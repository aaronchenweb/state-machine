var xC=Object.defineProperty;var bC=(s,o,h)=>o in s?xC(s,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[o]=h;var v=(s,o,h)=>bC(s,typeof o!="symbol"?o+"":o,h);function y1(s,o){for(var h=0;h<o.length;h++){const d=o[h];if(typeof d!="string"&&!Array.isArray(d)){for(const g in d)if(g!=="default"&&!(g in s)){const x=Object.getOwnPropertyDescriptor(d,g);x&&Object.defineProperty(s,g,x.get?x:{enumerable:!0,get:()=>d[g]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))d(g);new MutationObserver(g=>{for(const x of g)if(x.type==="childList")for(const S of x.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&d(S)}).observe(document,{childList:!0,subtree:!0});function h(g){const x={};return g.integrity&&(x.integrity=g.integrity),g.referrerPolicy&&(x.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?x.credentials="include":g.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(g){if(g.ep)return;g.ep=!0;const x=h(g);fetch(g.href,x)}})();function Nm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var v1={exports:{}},ac={},x1={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=Symbol.for("react.element"),wC=Symbol.for("react.portal"),SC=Symbol.for("react.fragment"),CC=Symbol.for("react.strict_mode"),kC=Symbol.for("react.profiler"),PC=Symbol.for("react.provider"),MC=Symbol.for("react.context"),NC=Symbol.for("react.forward_ref"),TC=Symbol.for("react.suspense"),AC=Symbol.for("react.memo"),LC=Symbol.for("react.lazy"),C0=Symbol.iterator;function EC(s){return s===null||typeof s!="object"?null:(s=C0&&s[C0]||s["@@iterator"],typeof s=="function"?s:null)}var b1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w1=Object.assign,S1={};function Ea(s,o,h){this.props=s,this.context=o,this.refs=S1,this.updater=h||b1}Ea.prototype.isReactComponent={};Ea.prototype.setState=function(s,o){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,o,"setState")};Ea.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function C1(){}C1.prototype=Ea.prototype;function Tm(s,o,h){this.props=s,this.context=o,this.refs=S1,this.updater=h||b1}var Am=Tm.prototype=new C1;Am.constructor=Tm;w1(Am,Ea.prototype);Am.isPureReactComponent=!0;var k0=Array.isArray,k1=Object.prototype.hasOwnProperty,Lm={current:null},P1={key:!0,ref:!0,__self:!0,__source:!0};function M1(s,o,h){var d,g={},x=null,S=null;if(o!=null)for(d in o.ref!==void 0&&(S=o.ref),o.key!==void 0&&(x=""+o.key),o)k1.call(o,d)&&!P1.hasOwnProperty(d)&&(g[d]=o[d]);var P=arguments.length-2;if(P===1)g.children=h;else if(1<P){for(var M=Array(P),O=0;O<P;O++)M[O]=arguments[O+2];g.children=M}if(s&&s.defaultProps)for(d in P=s.defaultProps,P)g[d]===void 0&&(g[d]=P[d]);return{$$typeof:ih,type:s,key:x,ref:S,props:g,_owner:Lm.current}}function DC(s,o){return{$$typeof:ih,type:s.type,key:o,ref:s.ref,props:s.props,_owner:s._owner}}function Em(s){return typeof s=="object"&&s!==null&&s.$$typeof===ih}function OC(s){var o={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(h){return o[h]})}var P0=/\/+/g;function Td(s,o){return typeof s=="object"&&s!==null&&s.key!=null?OC(""+s.key):o.toString(36)}function eu(s,o,h,d,g){var x=typeof s;(x==="undefined"||x==="boolean")&&(s=null);var S=!1;if(s===null)S=!0;else switch(x){case"string":case"number":S=!0;break;case"object":switch(s.$$typeof){case ih:case wC:S=!0}}if(S)return S=s,g=g(S),s=d===""?"."+Td(S,0):d,k0(g)?(h="",s!=null&&(h=s.replace(P0,"$&/")+"/"),eu(g,o,h,"",function(O){return O})):g!=null&&(Em(g)&&(g=DC(g,h+(!g.key||S&&S.key===g.key?"":(""+g.key).replace(P0,"$&/")+"/")+s)),o.push(g)),1;if(S=0,d=d===""?".":d+":",k0(s))for(var P=0;P<s.length;P++){x=s[P];var M=d+Td(x,P);S+=eu(x,o,h,M,g)}else if(M=EC(s),typeof M=="function")for(s=M.call(s),P=0;!(x=s.next()).done;)x=x.value,M=d+Td(x,P++),S+=eu(x,o,h,M,g);else if(x==="object")throw o=String(s),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return S}function Ph(s,o,h){if(s==null)return s;var d=[],g=0;return eu(s,d,"","",function(x){return o.call(h,x,g++)}),d}function FC(s){if(s._status===-1){var o=s._result;o=o(),o.then(function(h){(s._status===0||s._status===-1)&&(s._status=1,s._result=h)},function(h){(s._status===0||s._status===-1)&&(s._status=2,s._result=h)}),s._status===-1&&(s._status=0,s._result=o)}if(s._status===1)return s._result.default;throw s._result}var Si={current:null},nu={transition:null},RC={ReactCurrentDispatcher:Si,ReactCurrentBatchConfig:nu,ReactCurrentOwner:Lm};function N1(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Ph,forEach:function(s,o,h){Ph(s,function(){o.apply(this,arguments)},h)},count:function(s){var o=0;return Ph(s,function(){o++}),o},toArray:function(s){return Ph(s,function(o){return o})||[]},only:function(s){if(!Em(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Ne.Component=Ea;Ne.Fragment=SC;Ne.Profiler=kC;Ne.PureComponent=Tm;Ne.StrictMode=CC;Ne.Suspense=TC;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RC;Ne.act=N1;Ne.cloneElement=function(s,o,h){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var d=w1({},s.props),g=s.key,x=s.ref,S=s._owner;if(o!=null){if(o.ref!==void 0&&(x=o.ref,S=Lm.current),o.key!==void 0&&(g=""+o.key),s.type&&s.type.defaultProps)var P=s.type.defaultProps;for(M in o)k1.call(o,M)&&!P1.hasOwnProperty(M)&&(d[M]=o[M]===void 0&&P!==void 0?P[M]:o[M])}var M=arguments.length-2;if(M===1)d.children=h;else if(1<M){P=Array(M);for(var O=0;O<M;O++)P[O]=arguments[O+2];d.children=P}return{$$typeof:ih,type:s.type,key:g,ref:x,props:d,_owner:S}};Ne.createContext=function(s){return s={$$typeof:MC,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:PC,_context:s},s.Consumer=s};Ne.createElement=M1;Ne.createFactory=function(s){var o=M1.bind(null,s);return o.type=s,o};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(s){return{$$typeof:NC,render:s}};Ne.isValidElement=Em;Ne.lazy=function(s){return{$$typeof:LC,_payload:{_status:-1,_result:s},_init:FC}};Ne.memo=function(s,o){return{$$typeof:AC,type:s,compare:o===void 0?null:o}};Ne.startTransition=function(s){var o=nu.transition;nu.transition={};try{s()}finally{nu.transition=o}};Ne.unstable_act=N1;Ne.useCallback=function(s,o){return Si.current.useCallback(s,o)};Ne.useContext=function(s){return Si.current.useContext(s)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(s){return Si.current.useDeferredValue(s)};Ne.useEffect=function(s,o){return Si.current.useEffect(s,o)};Ne.useId=function(){return Si.current.useId()};Ne.useImperativeHandle=function(s,o,h){return Si.current.useImperativeHandle(s,o,h)};Ne.useInsertionEffect=function(s,o){return Si.current.useInsertionEffect(s,o)};Ne.useLayoutEffect=function(s,o){return Si.current.useLayoutEffect(s,o)};Ne.useMemo=function(s,o){return Si.current.useMemo(s,o)};Ne.useReducer=function(s,o,h){return Si.current.useReducer(s,o,h)};Ne.useRef=function(s){return Si.current.useRef(s)};Ne.useState=function(s){return Si.current.useState(s)};Ne.useSyncExternalStore=function(s,o,h){return Si.current.useSyncExternalStore(s,o,h)};Ne.useTransition=function(){return Si.current.useTransition()};Ne.version="18.3.1";x1.exports=Ne;var H=x1.exports;const zt=Nm(H),lc=y1({__proto__:null,default:zt},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC=H,BC=Symbol.for("react.element"),jC=Symbol.for("react.fragment"),zC=Object.prototype.hasOwnProperty,VC=IC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$C={key:!0,ref:!0,__self:!0,__source:!0};function T1(s,o,h){var d,g={},x=null,S=null;h!==void 0&&(x=""+h),o.key!==void 0&&(x=""+o.key),o.ref!==void 0&&(S=o.ref);for(d in o)zC.call(o,d)&&!$C.hasOwnProperty(d)&&(g[d]=o[d]);if(s&&s.defaultProps)for(d in o=s.defaultProps,o)g[d]===void 0&&(g[d]=o[d]);return{$$typeof:BC,type:s,key:x,ref:S,props:g,_owner:VC.current}}ac.Fragment=jC;ac.jsx=T1;ac.jsxs=T1;v1.exports=ac;var Lt=v1.exports,A1={exports:{}},_i={},L1={exports:{}},E1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function o(ht,gt){var St=ht.length;ht.push(gt);t:for(;0<St;){var Ct=St-1>>>1,Bt=ht[Ct];if(0<g(Bt,gt))ht[Ct]=gt,ht[St]=Bt,St=Ct;else break t}}function h(ht){return ht.length===0?null:ht[0]}function d(ht){if(ht.length===0)return null;var gt=ht[0],St=ht.pop();if(St!==gt){ht[0]=St;t:for(var Ct=0,Bt=ht.length,Ht=Bt>>>1;Ct<Ht;){var Ut=2*(Ct+1)-1,ge=ht[Ut],ae=Ut+1,me=ht[ae];if(0>g(ge,St))ae<Bt&&0>g(me,ge)?(ht[Ct]=me,ht[ae]=St,Ct=ae):(ht[Ct]=ge,ht[Ut]=St,Ct=Ut);else if(ae<Bt&&0>g(me,St))ht[Ct]=me,ht[ae]=St,Ct=ae;else break t}}return gt}function g(ht,gt){var St=ht.sortIndex-gt.sortIndex;return St!==0?St:ht.id-gt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;s.unstable_now=function(){return x.now()}}else{var S=Date,P=S.now();s.unstable_now=function(){return S.now()-P}}var M=[],O=[],L=1,j=null,V=3,q=!1,J=!1,Y=!1,W=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ht){for(var gt=h(O);gt!==null;){if(gt.callback===null)d(O);else if(gt.startTime<=ht)d(O),gt.sortIndex=gt.expirationTime,o(M,gt);else break;gt=h(O)}}function tt(ht){if(Y=!1,I(ht),!J)if(h(M)!==null)J=!0,wt(z);else{var gt=h(O);gt!==null&&ft(tt,gt.startTime-ht)}}function z(ht,gt){J=!1,Y&&(Y=!1,T(ot),ot=-1),q=!0;var St=V;try{for(I(gt),j=h(M);j!==null&&(!(j.expirationTime>gt)||ht&&!dt());){var Ct=j.callback;if(typeof Ct=="function"){j.callback=null,V=j.priorityLevel;var Bt=Ct(j.expirationTime<=gt);gt=s.unstable_now(),typeof Bt=="function"?j.callback=Bt:j===h(M)&&d(M),I(gt)}else d(M);j=h(M)}if(j!==null)var Ht=!0;else{var Ut=h(O);Ut!==null&&ft(tt,Ut.startTime-gt),Ht=!1}return Ht}finally{j=null,V=St,q=!1}}var nt=!1,R=null,ot=-1,lt=5,rt=-1;function dt(){return!(s.unstable_now()-rt<lt)}function Pt(){if(R!==null){var ht=s.unstable_now();rt=ht;var gt=!0;try{gt=R(!0,ht)}finally{gt?ct():(nt=!1,R=null)}}else nt=!1}var ct;if(typeof B=="function")ct=function(){B(Pt)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,Zt=Et.port2;Et.port1.onmessage=Pt,ct=function(){Zt.postMessage(null)}}else ct=function(){W(Pt,0)};function wt(ht){R=ht,nt||(nt=!0,ct())}function ft(ht,gt){ot=W(function(){ht(s.unstable_now())},gt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ht){ht.callback=null},s.unstable_continueExecution=function(){J||q||(J=!0,wt(z))},s.unstable_forceFrameRate=function(ht){0>ht||125<ht?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):lt=0<ht?Math.floor(1e3/ht):5},s.unstable_getCurrentPriorityLevel=function(){return V},s.unstable_getFirstCallbackNode=function(){return h(M)},s.unstable_next=function(ht){switch(V){case 1:case 2:case 3:var gt=3;break;default:gt=V}var St=V;V=gt;try{return ht()}finally{V=St}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ht,gt){switch(ht){case 1:case 2:case 3:case 4:case 5:break;default:ht=3}var St=V;V=ht;try{return gt()}finally{V=St}},s.unstable_scheduleCallback=function(ht,gt,St){var Ct=s.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?Ct+St:Ct):St=Ct,ht){case 1:var Bt=-1;break;case 2:Bt=250;break;case 5:Bt=1073741823;break;case 4:Bt=1e4;break;default:Bt=5e3}return Bt=St+Bt,ht={id:L++,callback:gt,priorityLevel:ht,startTime:St,expirationTime:Bt,sortIndex:-1},St>Ct?(ht.sortIndex=St,o(O,ht),h(M)===null&&ht===h(O)&&(Y?(T(ot),ot=-1):Y=!0,ft(tt,St-Ct))):(ht.sortIndex=Bt,o(M,ht),J||q||(J=!0,wt(z))),ht},s.unstable_shouldYield=dt,s.unstable_wrapCallback=function(ht){var gt=V;return function(){var St=V;V=gt;try{return ht.apply(this,arguments)}finally{V=St}}}})(E1);L1.exports=E1;var HC=L1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC=H,Qi=HC;function $t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D1=new Set,Ml={};function No(s,o){va(s,o),va(s+"Capture",o)}function va(s,o){for(Ml[s]=o,s=0;s<o.length;s++)D1.add(o[s])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=Object.prototype.hasOwnProperty,KC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M0={},N0={};function GC(s){return Ff.call(N0,s)?!0:Ff.call(M0,s)?!1:KC.test(s)?N0[s]=!0:(M0[s]=!0,!1)}function XC(s,o,h,d){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function YC(s,o,h,d){if(o===null||typeof o>"u"||XC(s,o,h,d))return!0;if(d)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function Ci(s,o,h,d,g,x,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=h,this.propertyName=s,this.type=o,this.sanitizeURL=x,this.removeEmptyString=S}var ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){ri[s]=new Ci(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];ri[o]=new Ci(o,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){ri[s]=new Ci(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){ri[s]=new Ci(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){ri[s]=new Ci(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){ri[s]=new Ci(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){ri[s]=new Ci(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){ri[s]=new Ci(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){ri[s]=new Ci(s,5,!1,s.toLowerCase(),null,!1,!1)});var Dm=/[\-:]([a-z])/g;function Om(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(Dm,Om);ri[o]=new Ci(o,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(Dm,Om);ri[o]=new Ci(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(Dm,Om);ri[o]=new Ci(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){ri[s]=new Ci(s,1,!1,s.toLowerCase(),null,!1,!1)});ri.xlinkHref=new Ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){ri[s]=new Ci(s,1,!1,s.toLowerCase(),null,!0,!0)});function Fm(s,o,h,d){var g=ri.hasOwnProperty(o)?ri[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(YC(o,h,g,d)&&(h=null),d||g===null?GC(o)&&(h===null?s.removeAttribute(o):s.setAttribute(o,""+h)):g.mustUseProperty?s[g.propertyName]=h===null?g.type===3?!1:"":h:(o=g.attributeName,d=g.attributeNamespace,h===null?s.removeAttribute(o):(g=g.type,h=g===3||g===4&&h===!0?"":""+h,d?s.setAttributeNS(d,o,h):s.setAttribute(o,h))))}var xr=UC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mh=Symbol.for("react.element"),Wo=Symbol.for("react.portal"),qo=Symbol.for("react.fragment"),Rm=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),O1=Symbol.for("react.provider"),F1=Symbol.for("react.context"),Im=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),Bf=Symbol.for("react.suspense_list"),Bm=Symbol.for("react.memo"),Lr=Symbol.for("react.lazy"),R1=Symbol.for("react.offscreen"),T0=Symbol.iterator;function Ya(s){return s===null||typeof s!="object"?null:(s=T0&&s[T0]||s["@@iterator"],typeof s=="function"?s:null)}var yn=Object.assign,Ad;function rl(s){if(Ad===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);Ad=o&&o[1]||""}return`
`+Ad+s}var Ld=!1;function Ed(s,o){if(!s||Ld)return"";Ld=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(O){var d=O}Reflect.construct(s,[],o)}else{try{o.call()}catch(O){d=O}s.call(o.prototype)}else{try{throw Error()}catch(O){d=O}s()}}catch(O){if(O&&d&&typeof O.stack=="string"){for(var g=O.stack.split(`
`),x=d.stack.split(`
`),S=g.length-1,P=x.length-1;1<=S&&0<=P&&g[S]!==x[P];)P--;for(;1<=S&&0<=P;S--,P--)if(g[S]!==x[P]){if(S!==1||P!==1)do if(S--,P--,0>P||g[S]!==x[P]){var M=`
`+g[S].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=S&&0<=P);break}}}finally{Ld=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?rl(s):""}function WC(s){switch(s.tag){case 5:return rl(s.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return s=Ed(s.type,!1),s;case 11:return s=Ed(s.type.render,!1),s;case 1:return s=Ed(s.type,!0),s;default:return""}}function jf(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case qo:return"Fragment";case Wo:return"Portal";case Rf:return"Profiler";case Rm:return"StrictMode";case If:return"Suspense";case Bf:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case F1:return(s.displayName||"Context")+".Consumer";case O1:return(s._context.displayName||"Context")+".Provider";case Im:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Bm:return o=s.displayName||null,o!==null?o:jf(s.type)||"Memo";case Lr:o=s._payload,s=s._init;try{return jf(s(o))}catch{}}return null}function qC(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jf(o);case 8:return o===Rm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Wr(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function I1(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function JC(s){var o=I1(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,x=h.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){d=""+S,x.call(this,S)}}),Object.defineProperty(s,o,{enumerable:h.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Nh(s){s._valueTracker||(s._valueTracker=JC(s))}function B1(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),d="";return s&&(d=I1(s)?s.checked?"true":"false":s.value),s=d,s!==h?(o.setValue(s),!0):!1}function Cu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function zf(s,o){var h=o.checked;return yn({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function A0(s,o){var h=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;h=Wr(o.value!=null?o.value:h),s._wrapperState={initialChecked:d,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function j1(s,o){o=o.checked,o!=null&&Fm(s,"checked",o,!1)}function Vf(s,o){j1(s,o);var h=Wr(o.value),d=o.type;if(h!=null)d==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?$f(s,o.type,h):o.hasOwnProperty("defaultValue")&&$f(s,o.type,Wr(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function L0(s,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,h||o===s.value||(s.value=o),s.defaultValue=o}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function $f(s,o,h){(o!=="number"||Cu(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var ol=Array.isArray;function ha(s,o,h,d){if(s=s.options,o){o={};for(var g=0;g<h.length;g++)o["$"+h[g]]=!0;for(h=0;h<s.length;h++)g=o.hasOwnProperty("$"+s[h].value),s[h].selected!==g&&(s[h].selected=g),g&&d&&(s[h].defaultSelected=!0)}else{for(h=""+Wr(h),o=null,g=0;g<s.length;g++){if(s[g].value===h){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function Hf(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error($t(91));return yn({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function E0(s,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error($t(92));if(ol(h)){if(1<h.length)throw Error($t(93));h=h[0]}o=h}o==null&&(o=""),h=o}s._wrapperState={initialValue:Wr(h)}}function z1(s,o){var h=Wr(o.value),d=Wr(o.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),o.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),d!=null&&(s.defaultValue=""+d)}function D0(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function V1(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uf(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?V1(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Th,$1=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,d,g){MSApp.execUnsafeLocalFunction(function(){return s(o,h,d,g)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Th=Th||document.createElement("div"),Th.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Th.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Nl(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZC=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(s){ZC.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),ul[o]=ul[s]})});function H1(s,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||ul.hasOwnProperty(s)&&ul[s]?(""+o).trim():o+"px"}function U1(s,o){s=s.style;for(var h in o)if(o.hasOwnProperty(h)){var d=h.indexOf("--")===0,g=H1(h,o[h],d);h==="float"&&(h="cssFloat"),d?s.setProperty(h,g):s[h]=g}}var QC=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kf(s,o){if(o){if(QC[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error($t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error($t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error($t(61))}if(o.style!=null&&typeof o.style!="object")throw Error($t(62))}}function Gf(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xf=null;function jm(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yf=null,ua=null,ca=null;function O0(s){if(s=oh(s)){if(typeof Yf!="function")throw Error($t(280));var o=s.stateNode;o&&(o=fc(o),Yf(s.stateNode,s.type,o))}}function K1(s){ua?ca?ca.push(s):ca=[s]:ua=s}function G1(){if(ua){var s=ua,o=ca;if(ca=ua=null,O0(s),o)for(s=0;s<o.length;s++)O0(o[s])}}function X1(s,o){return s(o)}function Y1(){}var Dd=!1;function W1(s,o,h){if(Dd)return s(o,h);Dd=!0;try{return X1(s,o,h)}finally{Dd=!1,(ua!==null||ca!==null)&&(Y1(),G1())}}function Tl(s,o){var h=s.stateNode;if(h===null)return null;var d=fc(h);if(d===null)return null;h=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error($t(231,o,typeof h));return h}var Wf=!1;if(mr)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){Wf=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{Wf=!1}function _C(s,o,h,d,g,x,S,P,M){var O=Array.prototype.slice.call(arguments,3);try{o.apply(h,O)}catch(L){this.onError(L)}}var cl=!1,ku=null,Pu=!1,qf=null,tk={onError:function(s){cl=!0,ku=s}};function ek(s,o,h,d,g,x,S,P,M){cl=!1,ku=null,_C.apply(tk,arguments)}function nk(s,o,h,d,g,x,S,P,M){if(ek.apply(this,arguments),cl){if(cl){var O=ku;cl=!1,ku=null}else throw Error($t(198));Pu||(Pu=!0,qf=O)}}function To(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function q1(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function F0(s){if(To(s)!==s)throw Error($t(188))}function ik(s){var o=s.alternate;if(!o){if(o=To(s),o===null)throw Error($t(188));return o!==s?null:s}for(var h=s,d=o;;){var g=h.return;if(g===null)break;var x=g.alternate;if(x===null){if(d=g.return,d!==null){h=d;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===h)return F0(g),s;if(x===d)return F0(g),o;x=x.sibling}throw Error($t(188))}if(h.return!==d.return)h=g,d=x;else{for(var S=!1,P=g.child;P;){if(P===h){S=!0,h=g,d=x;break}if(P===d){S=!0,d=g,h=x;break}P=P.sibling}if(!S){for(P=x.child;P;){if(P===h){S=!0,h=x,d=g;break}if(P===d){S=!0,d=x,h=g;break}P=P.sibling}if(!S)throw Error($t(189))}}if(h.alternate!==d)throw Error($t(190))}if(h.tag!==3)throw Error($t(188));return h.stateNode.current===h?s:o}function J1(s){return s=ik(s),s!==null?Z1(s):null}function Z1(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Z1(s);if(o!==null)return o;s=s.sibling}return null}var Q1=Qi.unstable_scheduleCallback,R0=Qi.unstable_cancelCallback,sk=Qi.unstable_shouldYield,rk=Qi.unstable_requestPaint,Ln=Qi.unstable_now,ok=Qi.unstable_getCurrentPriorityLevel,zm=Qi.unstable_ImmediatePriority,_1=Qi.unstable_UserBlockingPriority,Mu=Qi.unstable_NormalPriority,ak=Qi.unstable_LowPriority,tx=Qi.unstable_IdlePriority,hc=null,_s=null;function lk(s){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(hc,s,void 0,(s.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:ck,hk=Math.log,uk=Math.LN2;function ck(s){return s>>>=0,s===0?32:31-(hk(s)/uk|0)|0}var Ah=64,Lh=4194304;function al(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Nu(s,o){var h=s.pendingLanes;if(h===0)return 0;var d=0,g=s.suspendedLanes,x=s.pingedLanes,S=h&268435455;if(S!==0){var P=S&~g;P!==0?d=al(P):(x&=S,x!==0&&(d=al(x)))}else S=h&~g,S!==0?d=al(S):x!==0&&(d=al(x));if(d===0)return 0;if(o!==0&&o!==d&&!(o&g)&&(g=d&-d,x=o&-o,g>=x||g===16&&(x&4194240)!==0))return o;if(d&4&&(d|=h&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)h=31-Is(o),g=1<<h,d|=s[h],o&=~g;return d}function dk(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fk(s,o){for(var h=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,x=s.pendingLanes;0<x;){var S=31-Is(x),P=1<<S,M=g[S];M===-1?(!(P&h)||P&d)&&(g[S]=dk(P,o)):M<=o&&(s.expiredLanes|=P),x&=~P}}function Jf(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ex(){var s=Ah;return Ah<<=1,!(Ah&4194240)&&(Ah=64),s}function Od(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function sh(s,o,h){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Is(o),s[o]=h}function gk(s,o){var h=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<h;){var g=31-Is(h),x=1<<g;o[g]=0,d[g]=-1,s[g]=-1,h&=~x}}function Vm(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var d=31-Is(h),g=1<<d;g&o|s[d]&o&&(s[d]|=o),h&=~g}}var Ue=0;function nx(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var ix,$m,sx,rx,ox,Zf=!1,Eh=[],Vr=null,$r=null,Hr=null,Al=new Map,Ll=new Map,Or=[],mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function I0(s,o){switch(s){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":Al.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(o.pointerId)}}function qa(s,o,h,d,g,x){return s===null||s.nativeEvent!==x?(s={blockedOn:o,domEventName:h,eventSystemFlags:d,nativeEvent:x,targetContainers:[g]},o!==null&&(o=oh(o),o!==null&&$m(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function pk(s,o,h,d,g){switch(o){case"focusin":return Vr=qa(Vr,s,o,h,d,g),!0;case"dragenter":return $r=qa($r,s,o,h,d,g),!0;case"mouseover":return Hr=qa(Hr,s,o,h,d,g),!0;case"pointerover":var x=g.pointerId;return Al.set(x,qa(Al.get(x)||null,s,o,h,d,g)),!0;case"gotpointercapture":return x=g.pointerId,Ll.set(x,qa(Ll.get(x)||null,s,o,h,d,g)),!0}return!1}function ax(s){var o=uo(s.target);if(o!==null){var h=To(o);if(h!==null){if(o=h.tag,o===13){if(o=q1(h),o!==null){s.blockedOn=o,ox(s.priority,function(){sx(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function iu(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=Qf(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var d=new h.constructor(h.type,h);Xf=d,h.target.dispatchEvent(d),Xf=null}else return o=oh(h),o!==null&&$m(o),s.blockedOn=h,!1;o.shift()}return!0}function B0(s,o,h){iu(s)&&h.delete(o)}function yk(){Zf=!1,Vr!==null&&iu(Vr)&&(Vr=null),$r!==null&&iu($r)&&($r=null),Hr!==null&&iu(Hr)&&(Hr=null),Al.forEach(B0),Ll.forEach(B0)}function Ja(s,o){s.blockedOn===o&&(s.blockedOn=null,Zf||(Zf=!0,Qi.unstable_scheduleCallback(Qi.unstable_NormalPriority,yk)))}function El(s){function o(g){return Ja(g,s)}if(0<Eh.length){Ja(Eh[0],s);for(var h=1;h<Eh.length;h++){var d=Eh[h];d.blockedOn===s&&(d.blockedOn=null)}}for(Vr!==null&&Ja(Vr,s),$r!==null&&Ja($r,s),Hr!==null&&Ja(Hr,s),Al.forEach(o),Ll.forEach(o),h=0;h<Or.length;h++)d=Or[h],d.blockedOn===s&&(d.blockedOn=null);for(;0<Or.length&&(h=Or[0],h.blockedOn===null);)ax(h),h.blockedOn===null&&Or.shift()}var da=xr.ReactCurrentBatchConfig,Tu=!0;function vk(s,o,h,d){var g=Ue,x=da.transition;da.transition=null;try{Ue=1,Hm(s,o,h,d)}finally{Ue=g,da.transition=x}}function xk(s,o,h,d){var g=Ue,x=da.transition;da.transition=null;try{Ue=4,Hm(s,o,h,d)}finally{Ue=g,da.transition=x}}function Hm(s,o,h,d){if(Tu){var g=Qf(s,o,h,d);if(g===null)Ud(s,o,d,Au,h),I0(s,d);else if(pk(g,s,o,h,d))d.stopPropagation();else if(I0(s,d),o&4&&-1<mk.indexOf(s)){for(;g!==null;){var x=oh(g);if(x!==null&&ix(x),x=Qf(s,o,h,d),x===null&&Ud(s,o,d,Au,h),x===g)break;g=x}g!==null&&d.stopPropagation()}else Ud(s,o,d,null,h)}}var Au=null;function Qf(s,o,h,d){if(Au=null,s=jm(d),s=uo(s),s!==null)if(o=To(s),o===null)s=null;else if(h=o.tag,h===13){if(s=q1(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Au=s,null}function lx(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ok()){case zm:return 1;case _1:return 4;case Mu:case ak:return 16;case tx:return 536870912;default:return 16}default:return 16}}var Rr=null,Um=null,su=null;function hx(){if(su)return su;var s,o=Um,h=o.length,d,g="value"in Rr?Rr.value:Rr.textContent,x=g.length;for(s=0;s<h&&o[s]===g[s];s++);var S=h-s;for(d=1;d<=S&&o[h-d]===g[x-d];d++);return su=g.slice(s,1<d?1-d:void 0)}function ru(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Dh(){return!0}function j0(){return!1}function ts(s){function o(h,d,g,x,S){this._reactName=h,this._targetInst=g,this.type=d,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(h=s[P],this[P]=h?h(x):x[P]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Dh:j0,this.isPropagationStopped=j0,this}return yn(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Dh)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Dh)},persist:function(){},isPersistent:Dh}),o}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Km=ts(Da),rh=yn({},Da,{view:0,detail:0}),bk=ts(rh),Fd,Rd,Za,uc=yn({},rh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Za&&(Za&&s.type==="mousemove"?(Fd=s.screenX-Za.screenX,Rd=s.screenY-Za.screenY):Rd=Fd=0,Za=s),Fd)},movementY:function(s){return"movementY"in s?s.movementY:Rd}}),z0=ts(uc),wk=yn({},uc,{dataTransfer:0}),Sk=ts(wk),Ck=yn({},rh,{relatedTarget:0}),Id=ts(Ck),kk=yn({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),Pk=ts(kk),Mk=yn({},Da,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Nk=ts(Mk),Tk=yn({},Da,{data:0}),V0=ts(Tk),Ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ek={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dk(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Ek[s])?!!o[s]:!1}function Gm(){return Dk}var Ok=yn({},rh,{key:function(s){if(s.key){var o=Ak[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=ru(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Lk[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(s){return s.type==="keypress"?ru(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ru(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Fk=ts(Ok),Rk=yn({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$0=ts(Rk),Ik=yn({},rh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),Bk=ts(Ik),jk=yn({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),zk=ts(jk),Vk=yn({},uc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$k=ts(Vk),Hk=[9,13,27,32],Xm=mr&&"CompositionEvent"in window,dl=null;mr&&"documentMode"in document&&(dl=document.documentMode);var Uk=mr&&"TextEvent"in window&&!dl,ux=mr&&(!Xm||dl&&8<dl&&11>=dl),H0=" ",U0=!1;function cx(s,o){switch(s){case"keyup":return Hk.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dx(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Jo=!1;function Kk(s,o){switch(s){case"compositionend":return dx(o);case"keypress":return o.which!==32?null:(U0=!0,H0);case"textInput":return s=o.data,s===H0&&U0?null:s;default:return null}}function Gk(s,o){if(Jo)return s==="compositionend"||!Xm&&cx(s,o)?(s=hx(),su=Um=Rr=null,Jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ux&&o.locale!=="ko"?null:o.data;default:return null}}var Xk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Xk[s.type]:o==="textarea"}function fx(s,o,h,d){K1(d),o=Lu(o,"onChange"),0<o.length&&(h=new Km("onChange","change",null,h,d),s.push({event:h,listeners:o}))}var fl=null,Dl=null;function Yk(s){kx(s,0)}function cc(s){var o=_o(s);if(B1(o))return s}function Wk(s,o){if(s==="change")return o}var gx=!1;if(mr){var Bd;if(mr){var jd="oninput"in document;if(!jd){var G0=document.createElement("div");G0.setAttribute("oninput","return;"),jd=typeof G0.oninput=="function"}Bd=jd}else Bd=!1;gx=Bd&&(!document.documentMode||9<document.documentMode)}function X0(){fl&&(fl.detachEvent("onpropertychange",mx),Dl=fl=null)}function mx(s){if(s.propertyName==="value"&&cc(Dl)){var o=[];fx(o,Dl,s,jm(s)),W1(Yk,o)}}function qk(s,o,h){s==="focusin"?(X0(),fl=o,Dl=h,fl.attachEvent("onpropertychange",mx)):s==="focusout"&&X0()}function Jk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return cc(Dl)}function Zk(s,o){if(s==="click")return cc(o)}function Qk(s,o){if(s==="input"||s==="change")return cc(o)}function _k(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Vs=typeof Object.is=="function"?Object.is:_k;function Ol(s,o){if(Vs(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),d=Object.keys(o);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var g=h[d];if(!Ff.call(o,g)||!Vs(s[g],o[g]))return!1}return!0}function Y0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function W0(s,o){var h=Y0(s);s=0;for(var d;h;){if(h.nodeType===3){if(d=s+h.textContent.length,s<=o&&d>=o)return{node:h,offset:o-s};s=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=Y0(h)}}function px(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?px(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function yx(){for(var s=window,o=Cu();o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=Cu(s.document)}return o}function Ym(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function t2(s){var o=yx(),h=s.focusedElem,d=s.selectionRange;if(o!==h&&h&&h.ownerDocument&&px(h.ownerDocument.documentElement,h)){if(d!==null&&Ym(h)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(s,h.value.length);else if(s=(o=h.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var g=h.textContent.length,x=Math.min(d.start,g);d=d.end===void 0?x:Math.min(d.end,g),!s.extend&&x>d&&(g=d,d=x,x=g),g=W0(h,x);var S=W0(h,d);g&&S&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),s.removeAllRanges(),x>d?(s.addRange(o),s.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),s.addRange(o)))}}for(o=[],s=h;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)s=o[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var e2=mr&&"documentMode"in document&&11>=document.documentMode,Zo=null,_f=null,gl=null,tg=!1;function q0(s,o,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;tg||Zo==null||Zo!==Cu(d)||(d=Zo,"selectionStart"in d&&Ym(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),gl&&Ol(gl,d)||(gl=d,d=Lu(_f,"onSelect"),0<d.length&&(o=new Km("onSelect","select",null,o,h),s.push({event:o,listeners:d}),o.target=Zo)))}function Oh(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var Qo={animationend:Oh("Animation","AnimationEnd"),animationiteration:Oh("Animation","AnimationIteration"),animationstart:Oh("Animation","AnimationStart"),transitionend:Oh("Transition","TransitionEnd")},zd={},vx={};mr&&(vx=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function dc(s){if(zd[s])return zd[s];if(!Qo[s])return s;var o=Qo[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in vx)return zd[s]=o[h];return s}var xx=dc("animationend"),bx=dc("animationiteration"),wx=dc("animationstart"),Sx=dc("transitionend"),Cx=new Map,J0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(s,o){Cx.set(s,o),No(o,[s])}for(var Vd=0;Vd<J0.length;Vd++){var $d=J0[Vd],n2=$d.toLowerCase(),i2=$d[0].toUpperCase()+$d.slice(1);Jr(n2,"on"+i2)}Jr(xx,"onAnimationEnd");Jr(bx,"onAnimationIteration");Jr(wx,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(Sx,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);No("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));No("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));No("onBeforeInput",["compositionend","keypress","textInput","paste"]);No("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));No("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));No("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ll));function Z0(s,o,h){var d=s.type||"unknown-event";s.currentTarget=h,nk(d,o,void 0,s),s.currentTarget=null}function kx(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var d=s[h],g=d.event;d=d.listeners;t:{var x=void 0;if(o)for(var S=d.length-1;0<=S;S--){var P=d[S],M=P.instance,O=P.currentTarget;if(P=P.listener,M!==x&&g.isPropagationStopped())break t;Z0(g,P,O),x=M}else for(S=0;S<d.length;S++){if(P=d[S],M=P.instance,O=P.currentTarget,P=P.listener,M!==x&&g.isPropagationStopped())break t;Z0(g,P,O),x=M}}}if(Pu)throw s=qf,Pu=!1,qf=null,s}function on(s,o){var h=o[rg];h===void 0&&(h=o[rg]=new Set);var d=s+"__bubble";h.has(d)||(Px(o,s,2,!1),h.add(d))}function Hd(s,o,h){var d=0;o&&(d|=4),Px(h,s,d,o)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function Fl(s){if(!s[Fh]){s[Fh]=!0,D1.forEach(function(h){h!=="selectionchange"&&(s2.has(h)||Hd(h,!1,s),Hd(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Fh]||(o[Fh]=!0,Hd("selectionchange",!1,o))}}function Px(s,o,h,d){switch(lx(o)){case 1:var g=vk;break;case 4:g=xk;break;default:g=Hm}h=g.bind(null,o,h,s),g=void 0,!Wf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(o,h,{capture:!0,passive:g}):s.addEventListener(o,h,!0):g!==void 0?s.addEventListener(o,h,{passive:g}):s.addEventListener(o,h,!1)}function Ud(s,o,h,d,g){var x=d;if(!(o&1)&&!(o&2)&&d!==null)t:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var P=d.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(S===4)for(S=d.return;S!==null;){var M=S.tag;if((M===3||M===4)&&(M=S.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;S=S.return}for(;P!==null;){if(S=uo(P),S===null)return;if(M=S.tag,M===5||M===6){d=x=S;continue t}P=P.parentNode}}d=d.return}W1(function(){var O=x,L=jm(h),j=[];t:{var V=Cx.get(s);if(V!==void 0){var q=Km,J=s;switch(s){case"keypress":if(ru(h)===0)break t;case"keydown":case"keyup":q=Fk;break;case"focusin":J="focus",q=Id;break;case"focusout":J="blur",q=Id;break;case"beforeblur":case"afterblur":q=Id;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Sk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Bk;break;case xx:case bx:case wx:q=Pk;break;case Sx:q=zk;break;case"scroll":q=bk;break;case"wheel":q=$k;break;case"copy":case"cut":case"paste":q=Nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=$0}var Y=(o&4)!==0,W=!Y&&s==="scroll",T=Y?V!==null?V+"Capture":null:V;Y=[];for(var B=O,I;B!==null;){I=B;var tt=I.stateNode;if(I.tag===5&&tt!==null&&(I=tt,T!==null&&(tt=Tl(B,T),tt!=null&&Y.push(Rl(B,tt,I)))),W)break;B=B.return}0<Y.length&&(V=new q(V,J,null,h,L),j.push({event:V,listeners:Y}))}}if(!(o&7)){t:{if(V=s==="mouseover"||s==="pointerover",q=s==="mouseout"||s==="pointerout",V&&h!==Xf&&(J=h.relatedTarget||h.fromElement)&&(uo(J)||J[pr]))break t;if((q||V)&&(V=L.window===L?L:(V=L.ownerDocument)?V.defaultView||V.parentWindow:window,q?(J=h.relatedTarget||h.toElement,q=O,J=J?uo(J):null,J!==null&&(W=To(J),J!==W||J.tag!==5&&J.tag!==6)&&(J=null)):(q=null,J=O),q!==J)){if(Y=z0,tt="onMouseLeave",T="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Y=$0,tt="onPointerLeave",T="onPointerEnter",B="pointer"),W=q==null?V:_o(q),I=J==null?V:_o(J),V=new Y(tt,B+"leave",q,h,L),V.target=W,V.relatedTarget=I,tt=null,uo(L)===O&&(Y=new Y(T,B+"enter",J,h,L),Y.target=I,Y.relatedTarget=W,tt=Y),W=tt,q&&J)e:{for(Y=q,T=J,B=0,I=Y;I;I=Ho(I))B++;for(I=0,tt=T;tt;tt=Ho(tt))I++;for(;0<B-I;)Y=Ho(Y),B--;for(;0<I-B;)T=Ho(T),I--;for(;B--;){if(Y===T||T!==null&&Y===T.alternate)break e;Y=Ho(Y),T=Ho(T)}Y=null}else Y=null;q!==null&&Q0(j,V,q,Y,!1),J!==null&&W!==null&&Q0(j,W,J,Y,!0)}}t:{if(V=O?_o(O):window,q=V.nodeName&&V.nodeName.toLowerCase(),q==="select"||q==="input"&&V.type==="file")var z=Wk;else if(K0(V))if(gx)z=Qk;else{z=Jk;var nt=qk}else(q=V.nodeName)&&q.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(z=Zk);if(z&&(z=z(s,O))){fx(j,z,h,L);break t}nt&&nt(s,V,O),s==="focusout"&&(nt=V._wrapperState)&&nt.controlled&&V.type==="number"&&$f(V,"number",V.value)}switch(nt=O?_o(O):window,s){case"focusin":(K0(nt)||nt.contentEditable==="true")&&(Zo=nt,_f=O,gl=null);break;case"focusout":gl=_f=Zo=null;break;case"mousedown":tg=!0;break;case"contextmenu":case"mouseup":case"dragend":tg=!1,q0(j,h,L);break;case"selectionchange":if(e2)break;case"keydown":case"keyup":q0(j,h,L)}var R;if(Xm)t:{switch(s){case"compositionstart":var ot="onCompositionStart";break t;case"compositionend":ot="onCompositionEnd";break t;case"compositionupdate":ot="onCompositionUpdate";break t}ot=void 0}else Jo?cx(s,h)&&(ot="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(ot="onCompositionStart");ot&&(ux&&h.locale!=="ko"&&(Jo||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Jo&&(R=hx()):(Rr=L,Um="value"in Rr?Rr.value:Rr.textContent,Jo=!0)),nt=Lu(O,ot),0<nt.length&&(ot=new V0(ot,s,null,h,L),j.push({event:ot,listeners:nt}),R?ot.data=R:(R=dx(h),R!==null&&(ot.data=R)))),(R=Uk?Kk(s,h):Gk(s,h))&&(O=Lu(O,"onBeforeInput"),0<O.length&&(L=new V0("onBeforeInput","beforeinput",null,h,L),j.push({event:L,listeners:O}),L.data=R))}kx(j,o)})}function Rl(s,o,h){return{instance:s,listener:o,currentTarget:h}}function Lu(s,o){for(var h=o+"Capture",d=[];s!==null;){var g=s,x=g.stateNode;g.tag===5&&x!==null&&(g=x,x=Tl(s,h),x!=null&&d.unshift(Rl(s,x,g)),x=Tl(s,o),x!=null&&d.push(Rl(s,x,g))),s=s.return}return d}function Ho(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Q0(s,o,h,d,g){for(var x=o._reactName,S=[];h!==null&&h!==d;){var P=h,M=P.alternate,O=P.stateNode;if(M!==null&&M===d)break;P.tag===5&&O!==null&&(P=O,g?(M=Tl(h,x),M!=null&&S.unshift(Rl(h,M,P))):g||(M=Tl(h,x),M!=null&&S.push(Rl(h,M,P)))),h=h.return}S.length!==0&&s.push({event:o,listeners:S})}var r2=/\r\n?/g,o2=/\u0000|\uFFFD/g;function _0(s){return(typeof s=="string"?s:""+s).replace(r2,`
`).replace(o2,"")}function Rh(s,o,h){if(o=_0(o),_0(s)!==o&&h)throw Error($t(425))}function Eu(){}var eg=null,ng=null;function ig(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sg=typeof setTimeout=="function"?setTimeout:void 0,a2=typeof clearTimeout=="function"?clearTimeout:void 0,ty=typeof Promise=="function"?Promise:void 0,l2=typeof queueMicrotask=="function"?queueMicrotask:typeof ty<"u"?function(s){return ty.resolve(null).then(s).catch(h2)}:sg;function h2(s){setTimeout(function(){throw s})}function Kd(s,o){var h=o,d=0;do{var g=h.nextSibling;if(s.removeChild(h),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(d===0){s.removeChild(g),El(o);return}d--}else h!=="$"&&h!=="$?"&&h!=="$!"||d++;h=g}while(h);El(o)}function Ur(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function ey(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return s;o--}else h==="/$"&&o++}s=s.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),Js="__reactFiber$"+Oa,Il="__reactProps$"+Oa,pr="__reactContainer$"+Oa,rg="__reactEvents$"+Oa,u2="__reactListeners$"+Oa,c2="__reactHandles$"+Oa;function uo(s){var o=s[Js];if(o)return o;for(var h=s.parentNode;h;){if(o=h[pr]||h[Js]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=ey(s);s!==null;){if(h=s[Js])return h;s=ey(s)}return o}s=h,h=s.parentNode}return null}function oh(s){return s=s[Js]||s[pr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function _o(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error($t(33))}function fc(s){return s[Il]||null}var og=[],ta=-1;function Zr(s){return{current:s}}function an(s){0>ta||(s.current=og[ta],og[ta]=null,ta--)}function en(s,o){ta++,og[ta]=s.current,s.current=o}var qr={},pi=Zr(qr),Li=Zr(!1),bo=qr;function xa(s,o){var h=s.type.contextTypes;if(!h)return qr;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},x;for(x in h)g[x]=o[x];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=g),g}function Ei(s){return s=s.childContextTypes,s!=null}function Du(){an(Li),an(pi)}function ny(s,o,h){if(pi.current!==qr)throw Error($t(168));en(pi,o),en(Li,h)}function Mx(s,o,h){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return h;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error($t(108,qC(s)||"Unknown",g));return yn({},h,d)}function Ou(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||qr,bo=pi.current,en(pi,s),en(Li,Li.current),!0}function iy(s,o,h){var d=s.stateNode;if(!d)throw Error($t(169));h?(s=Mx(s,o,bo),d.__reactInternalMemoizedMergedChildContext=s,an(Li),an(pi),en(pi,s)):an(Li),en(Li,h)}var ur=null,gc=!1,Gd=!1;function Nx(s){ur===null?ur=[s]:ur.push(s)}function d2(s){gc=!0,Nx(s)}function Qr(){if(!Gd&&ur!==null){Gd=!0;var s=0,o=Ue;try{var h=ur;for(Ue=1;s<h.length;s++){var d=h[s];do d=d(!0);while(d!==null)}ur=null,gc=!1}catch(g){throw ur!==null&&(ur=ur.slice(s+1)),Q1(zm,Qr),g}finally{Ue=o,Gd=!1}}return null}var ea=[],na=0,Fu=null,Ru=0,cs=[],ds=0,wo=null,cr=1,dr="";function ao(s,o){ea[na++]=Ru,ea[na++]=Fu,Fu=s,Ru=o}function Tx(s,o,h){cs[ds++]=cr,cs[ds++]=dr,cs[ds++]=wo,wo=s;var d=cr;s=dr;var g=32-Is(d)-1;d&=~(1<<g),h+=1;var x=32-Is(o)+g;if(30<x){var S=g-g%5;x=(d&(1<<S)-1).toString(32),d>>=S,g-=S,cr=1<<32-Is(o)+g|h<<g|d,dr=x+s}else cr=1<<x|h<<g|d,dr=s}function Wm(s){s.return!==null&&(ao(s,1),Tx(s,1,0))}function qm(s){for(;s===Fu;)Fu=ea[--na],ea[na]=null,Ru=ea[--na],ea[na]=null;for(;s===wo;)wo=cs[--ds],cs[ds]=null,dr=cs[--ds],cs[ds]=null,cr=cs[--ds],cs[ds]=null}var Ji=null,Wi=null,dn=!1,Rs=null;function Ax(s,o){var h=fs(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=s,o=s.deletions,o===null?(s.deletions=[h],s.flags|=16):o.push(h)}function sy(s,o){switch(s.tag){case 5:var h=s.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Ji=s,Wi=Ur(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Ji=s,Wi=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=wo!==null?{id:cr,overflow:dr}:null,s.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=fs(18,null,null,0),h.stateNode=o,h.return=s,s.child=h,Ji=s,Wi=null,!0):!1;default:return!1}}function ag(s){return(s.mode&1)!==0&&(s.flags&128)===0}function lg(s){if(dn){var o=Wi;if(o){var h=o;if(!sy(s,o)){if(ag(s))throw Error($t(418));o=Ur(h.nextSibling);var d=Ji;o&&sy(s,o)?Ax(d,h):(s.flags=s.flags&-4097|2,dn=!1,Ji=s)}}else{if(ag(s))throw Error($t(418));s.flags=s.flags&-4097|2,dn=!1,Ji=s}}}function ry(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ji=s}function Ih(s){if(s!==Ji)return!1;if(!dn)return ry(s),dn=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!ig(s.type,s.memoizedProps)),o&&(o=Wi)){if(ag(s))throw Lx(),Error($t(418));for(;o;)Ax(s,o),o=Ur(o.nextSibling)}if(ry(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($t(317));t:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(o===0){Wi=Ur(s.nextSibling);break t}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}s=s.nextSibling}Wi=null}}else Wi=Ji?Ur(s.stateNode.nextSibling):null;return!0}function Lx(){for(var s=Wi;s;)s=Ur(s.nextSibling)}function ba(){Wi=Ji=null,dn=!1}function Jm(s){Rs===null?Rs=[s]:Rs.push(s)}var f2=xr.ReactCurrentBatchConfig;function Qa(s,o,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error($t(309));var d=h.stateNode}if(!d)throw Error($t(147,s));var g=d,x=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(S){var P=g.refs;S===null?delete P[x]:P[x]=S},o._stringRef=x,o)}if(typeof s!="string")throw Error($t(284));if(!h._owner)throw Error($t(290,s))}return s}function Bh(s,o){throw s=Object.prototype.toString.call(o),Error($t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function oy(s){var o=s._init;return o(s._payload)}function Ex(s){function o(T,B){if(s){var I=T.deletions;I===null?(T.deletions=[B],T.flags|=16):I.push(B)}}function h(T,B){if(!s)return null;for(;B!==null;)o(T,B),B=B.sibling;return null}function d(T,B){for(T=new Map;B!==null;)B.key!==null?T.set(B.key,B):T.set(B.index,B),B=B.sibling;return T}function g(T,B){return T=Yr(T,B),T.index=0,T.sibling=null,T}function x(T,B,I){return T.index=I,s?(I=T.alternate,I!==null?(I=I.index,I<B?(T.flags|=2,B):I):(T.flags|=2,B)):(T.flags|=1048576,B)}function S(T){return s&&T.alternate===null&&(T.flags|=2),T}function P(T,B,I,tt){return B===null||B.tag!==6?(B=Qd(I,T.mode,tt),B.return=T,B):(B=g(B,I),B.return=T,B)}function M(T,B,I,tt){var z=I.type;return z===qo?L(T,B,I.props.children,tt,I.key):B!==null&&(B.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Lr&&oy(z)===B.type)?(tt=g(B,I.props),tt.ref=Qa(T,B,I),tt.return=T,tt):(tt=du(I.type,I.key,I.props,null,T.mode,tt),tt.ref=Qa(T,B,I),tt.return=T,tt)}function O(T,B,I,tt){return B===null||B.tag!==4||B.stateNode.containerInfo!==I.containerInfo||B.stateNode.implementation!==I.implementation?(B=_d(I,T.mode,tt),B.return=T,B):(B=g(B,I.children||[]),B.return=T,B)}function L(T,B,I,tt,z){return B===null||B.tag!==7?(B=vo(I,T.mode,tt,z),B.return=T,B):(B=g(B,I),B.return=T,B)}function j(T,B,I){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Qd(""+B,T.mode,I),B.return=T,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Mh:return I=du(B.type,B.key,B.props,null,T.mode,I),I.ref=Qa(T,null,B),I.return=T,I;case Wo:return B=_d(B,T.mode,I),B.return=T,B;case Lr:var tt=B._init;return j(T,tt(B._payload),I)}if(ol(B)||Ya(B))return B=vo(B,T.mode,I,null),B.return=T,B;Bh(T,B)}return null}function V(T,B,I,tt){var z=B!==null?B.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return z!==null?null:P(T,B,""+I,tt);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Mh:return I.key===z?M(T,B,I,tt):null;case Wo:return I.key===z?O(T,B,I,tt):null;case Lr:return z=I._init,V(T,B,z(I._payload),tt)}if(ol(I)||Ya(I))return z!==null?null:L(T,B,I,tt,null);Bh(T,I)}return null}function q(T,B,I,tt,z){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return T=T.get(I)||null,P(B,T,""+tt,z);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case Mh:return T=T.get(tt.key===null?I:tt.key)||null,M(B,T,tt,z);case Wo:return T=T.get(tt.key===null?I:tt.key)||null,O(B,T,tt,z);case Lr:var nt=tt._init;return q(T,B,I,nt(tt._payload),z)}if(ol(tt)||Ya(tt))return T=T.get(I)||null,L(B,T,tt,z,null);Bh(B,tt)}return null}function J(T,B,I,tt){for(var z=null,nt=null,R=B,ot=B=0,lt=null;R!==null&&ot<I.length;ot++){R.index>ot?(lt=R,R=null):lt=R.sibling;var rt=V(T,R,I[ot],tt);if(rt===null){R===null&&(R=lt);break}s&&R&&rt.alternate===null&&o(T,R),B=x(rt,B,ot),nt===null?z=rt:nt.sibling=rt,nt=rt,R=lt}if(ot===I.length)return h(T,R),dn&&ao(T,ot),z;if(R===null){for(;ot<I.length;ot++)R=j(T,I[ot],tt),R!==null&&(B=x(R,B,ot),nt===null?z=R:nt.sibling=R,nt=R);return dn&&ao(T,ot),z}for(R=d(T,R);ot<I.length;ot++)lt=q(R,T,ot,I[ot],tt),lt!==null&&(s&&lt.alternate!==null&&R.delete(lt.key===null?ot:lt.key),B=x(lt,B,ot),nt===null?z=lt:nt.sibling=lt,nt=lt);return s&&R.forEach(function(dt){return o(T,dt)}),dn&&ao(T,ot),z}function Y(T,B,I,tt){var z=Ya(I);if(typeof z!="function")throw Error($t(150));if(I=z.call(I),I==null)throw Error($t(151));for(var nt=z=null,R=B,ot=B=0,lt=null,rt=I.next();R!==null&&!rt.done;ot++,rt=I.next()){R.index>ot?(lt=R,R=null):lt=R.sibling;var dt=V(T,R,rt.value,tt);if(dt===null){R===null&&(R=lt);break}s&&R&&dt.alternate===null&&o(T,R),B=x(dt,B,ot),nt===null?z=dt:nt.sibling=dt,nt=dt,R=lt}if(rt.done)return h(T,R),dn&&ao(T,ot),z;if(R===null){for(;!rt.done;ot++,rt=I.next())rt=j(T,rt.value,tt),rt!==null&&(B=x(rt,B,ot),nt===null?z=rt:nt.sibling=rt,nt=rt);return dn&&ao(T,ot),z}for(R=d(T,R);!rt.done;ot++,rt=I.next())rt=q(R,T,ot,rt.value,tt),rt!==null&&(s&&rt.alternate!==null&&R.delete(rt.key===null?ot:rt.key),B=x(rt,B,ot),nt===null?z=rt:nt.sibling=rt,nt=rt);return s&&R.forEach(function(Pt){return o(T,Pt)}),dn&&ao(T,ot),z}function W(T,B,I,tt){if(typeof I=="object"&&I!==null&&I.type===qo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Mh:t:{for(var z=I.key,nt=B;nt!==null;){if(nt.key===z){if(z=I.type,z===qo){if(nt.tag===7){h(T,nt.sibling),B=g(nt,I.props.children),B.return=T,T=B;break t}}else if(nt.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Lr&&oy(z)===nt.type){h(T,nt.sibling),B=g(nt,I.props),B.ref=Qa(T,nt,I),B.return=T,T=B;break t}h(T,nt);break}else o(T,nt);nt=nt.sibling}I.type===qo?(B=vo(I.props.children,T.mode,tt,I.key),B.return=T,T=B):(tt=du(I.type,I.key,I.props,null,T.mode,tt),tt.ref=Qa(T,B,I),tt.return=T,T=tt)}return S(T);case Wo:t:{for(nt=I.key;B!==null;){if(B.key===nt)if(B.tag===4&&B.stateNode.containerInfo===I.containerInfo&&B.stateNode.implementation===I.implementation){h(T,B.sibling),B=g(B,I.children||[]),B.return=T,T=B;break t}else{h(T,B);break}else o(T,B);B=B.sibling}B=_d(I,T.mode,tt),B.return=T,T=B}return S(T);case Lr:return nt=I._init,W(T,B,nt(I._payload),tt)}if(ol(I))return J(T,B,I,tt);if(Ya(I))return Y(T,B,I,tt);Bh(T,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,B!==null&&B.tag===6?(h(T,B.sibling),B=g(B,I),B.return=T,T=B):(h(T,B),B=Qd(I,T.mode,tt),B.return=T,T=B),S(T)):h(T,B)}return W}var wa=Ex(!0),Dx=Ex(!1),Iu=Zr(null),Bu=null,ia=null,Zm=null;function Qm(){Zm=ia=Bu=null}function _m(s){var o=Iu.current;an(Iu),s._currentValue=o}function hg(s,o,h){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===h)break;s=s.return}}function fa(s,o){Bu=s,Zm=ia=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(Ai=!0),s.firstContext=null)}function ms(s){var o=s._currentValue;if(Zm!==s)if(s={context:s,memoizedValue:o,next:null},ia===null){if(Bu===null)throw Error($t(308));ia=s,Bu.dependencies={lanes:0,firstContext:s}}else ia=ia.next=s;return o}var co=null;function tp(s){co===null?co=[s]:co.push(s)}function Ox(s,o,h,d){var g=o.interleaved;return g===null?(h.next=h,tp(o)):(h.next=g.next,g.next=h),o.interleaved=h,yr(s,d)}function yr(s,o){s.lanes|=o;var h=s.alternate;for(h!==null&&(h.lanes|=o),h=s,s=s.return;s!==null;)s.childLanes|=o,h=s.alternate,h!==null&&(h.childLanes|=o),h=s,s=s.return;return h.tag===3?h.stateNode:null}var Er=!1;function ep(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fx(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function fr(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Kr(s,o,h){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,Oe&2){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,yr(s,h)}return g=d.interleaved,g===null?(o.next=o,tp(d)):(o.next=g.next,g.next=o),d.interleaved=o,yr(s,h)}function ou(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,h|=d,o.lanes=h,Vm(s,h)}}function ay(s,o){var h=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var g=null,x=null;if(h=h.firstBaseUpdate,h!==null){do{var S={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};x===null?g=x=S:x=x.next=S,h=h.next}while(h!==null);x===null?g=x=o:x=x.next=o}else g=x=o;h={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:d.shared,effects:d.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}function ju(s,o,h,d){var g=s.updateQueue;Er=!1;var x=g.firstBaseUpdate,S=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var M=P,O=M.next;M.next=null,S===null?x=O:S.next=O,S=M;var L=s.alternate;L!==null&&(L=L.updateQueue,P=L.lastBaseUpdate,P!==S&&(P===null?L.firstBaseUpdate=O:P.next=O,L.lastBaseUpdate=M))}if(x!==null){var j=g.baseState;S=0,L=O=M=null,P=x;do{var V=P.lane,q=P.eventTime;if((d&V)===V){L!==null&&(L=L.next={eventTime:q,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var J=s,Y=P;switch(V=o,q=h,Y.tag){case 1:if(J=Y.payload,typeof J=="function"){j=J.call(q,j,V);break t}j=J;break t;case 3:J.flags=J.flags&-65537|128;case 0:if(J=Y.payload,V=typeof J=="function"?J.call(q,j,V):J,V==null)break t;j=yn({},j,V);break t;case 2:Er=!0}}P.callback!==null&&P.lane!==0&&(s.flags|=64,V=g.effects,V===null?g.effects=[P]:V.push(P))}else q={eventTime:q,lane:V,tag:P.tag,payload:P.payload,callback:P.callback,next:null},L===null?(O=L=q,M=j):L=L.next=q,S|=V;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;V=P,P=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);if(L===null&&(M=j),g.baseState=M,g.firstBaseUpdate=O,g.lastBaseUpdate=L,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else x===null&&(g.shared.lanes=0);Co|=S,s.lanes=S,s.memoizedState=j}}function ly(s,o,h){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],g=d.callback;if(g!==null){if(d.callback=null,d=h,typeof g!="function")throw Error($t(191,g));g.call(d)}}}var ah={},tr=Zr(ah),Bl=Zr(ah),jl=Zr(ah);function fo(s){if(s===ah)throw Error($t(174));return s}function np(s,o){switch(en(jl,o),en(Bl,s),en(tr,ah),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Uf(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Uf(o,s)}an(tr),en(tr,o)}function Sa(){an(tr),an(Bl),an(jl)}function Rx(s){fo(jl.current);var o=fo(tr.current),h=Uf(o,s.type);o!==h&&(en(Bl,s),en(tr,h))}function ip(s){Bl.current===s&&(an(tr),an(Bl))}var mn=Zr(0);function zu(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Xd=[];function sp(){for(var s=0;s<Xd.length;s++)Xd[s]._workInProgressVersionPrimary=null;Xd.length=0}var au=xr.ReactCurrentDispatcher,Yd=xr.ReactCurrentBatchConfig,So=0,pn=null,Vn=null,Zn=null,Vu=!1,ml=!1,zl=0,g2=0;function fi(){throw Error($t(321))}function rp(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!Vs(s[h],o[h]))return!1;return!0}function op(s,o,h,d,g,x){if(So=x,pn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,au.current=s===null||s.memoizedState===null?v2:x2,s=h(d,g),ml){x=0;do{if(ml=!1,zl=0,25<=x)throw Error($t(301));x+=1,Zn=Vn=null,o.updateQueue=null,au.current=b2,s=h(d,g)}while(ml)}if(au.current=$u,o=Vn!==null&&Vn.next!==null,So=0,Zn=Vn=pn=null,Vu=!1,o)throw Error($t(300));return s}function ap(){var s=zl!==0;return zl=0,s}function Ws(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?pn.memoizedState=Zn=s:Zn=Zn.next=s,Zn}function ps(){if(Vn===null){var s=pn.alternate;s=s!==null?s.memoizedState:null}else s=Vn.next;var o=Zn===null?pn.memoizedState:Zn.next;if(o!==null)Zn=o,Vn=s;else{if(s===null)throw Error($t(310));Vn=s,s={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Zn===null?pn.memoizedState=Zn=s:Zn=Zn.next=s}return Zn}function Vl(s,o){return typeof o=="function"?o(s):o}function Wd(s){var o=ps(),h=o.queue;if(h===null)throw Error($t(311));h.lastRenderedReducer=s;var d=Vn,g=d.baseQueue,x=h.pending;if(x!==null){if(g!==null){var S=g.next;g.next=x.next,x.next=S}d.baseQueue=g=x,h.pending=null}if(g!==null){x=g.next,d=d.baseState;var P=S=null,M=null,O=x;do{var L=O.lane;if((So&L)===L)M!==null&&(M=M.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),d=O.hasEagerState?O.eagerState:s(d,O.action);else{var j={lane:L,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};M===null?(P=M=j,S=d):M=M.next=j,pn.lanes|=L,Co|=L}O=O.next}while(O!==null&&O!==x);M===null?S=d:M.next=P,Vs(d,o.memoizedState)||(Ai=!0),o.memoizedState=d,o.baseState=S,o.baseQueue=M,h.lastRenderedState=d}if(s=h.interleaved,s!==null){g=s;do x=g.lane,pn.lanes|=x,Co|=x,g=g.next;while(g!==s)}else g===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function qd(s){var o=ps(),h=o.queue;if(h===null)throw Error($t(311));h.lastRenderedReducer=s;var d=h.dispatch,g=h.pending,x=o.memoizedState;if(g!==null){h.pending=null;var S=g=g.next;do x=s(x,S.action),S=S.next;while(S!==g);Vs(x,o.memoizedState)||(Ai=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),h.lastRenderedState=x}return[x,d]}function Ix(){}function Bx(s,o){var h=pn,d=ps(),g=o(),x=!Vs(d.memoizedState,g);if(x&&(d.memoizedState=g,Ai=!0),d=d.queue,lp(Vx.bind(null,h,d,s),[s]),d.getSnapshot!==o||x||Zn!==null&&Zn.memoizedState.tag&1){if(h.flags|=2048,$l(9,zx.bind(null,h,d,g,o),void 0,null),_n===null)throw Error($t(349));So&30||jx(h,o,g)}return g}function jx(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=pn.updateQueue,o===null?(o={lastEffect:null,stores:null},pn.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function zx(s,o,h,d){o.value=h,o.getSnapshot=d,$x(o)&&Hx(s)}function Vx(s,o,h){return h(function(){$x(o)&&Hx(s)})}function $x(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!Vs(s,h)}catch{return!0}}function Hx(s){var o=yr(s,1);o!==null&&Bs(o,s,1,-1)}function hy(s){var o=Ws();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:s},o.queue=s,s=s.dispatch=y2.bind(null,pn,s),[o.memoizedState,s]}function $l(s,o,h,d){return s={tag:s,create:o,destroy:h,deps:d,next:null},o=pn.updateQueue,o===null?(o={lastEffect:null,stores:null},pn.updateQueue=o,o.lastEffect=s.next=s):(h=o.lastEffect,h===null?o.lastEffect=s.next=s:(d=h.next,h.next=s,s.next=d,o.lastEffect=s)),s}function Ux(){return ps().memoizedState}function lu(s,o,h,d){var g=Ws();pn.flags|=s,g.memoizedState=$l(1|o,h,void 0,d===void 0?null:d)}function mc(s,o,h,d){var g=ps();d=d===void 0?null:d;var x=void 0;if(Vn!==null){var S=Vn.memoizedState;if(x=S.destroy,d!==null&&rp(d,S.deps)){g.memoizedState=$l(o,h,x,d);return}}pn.flags|=s,g.memoizedState=$l(1|o,h,x,d)}function uy(s,o){return lu(8390656,8,s,o)}function lp(s,o){return mc(2048,8,s,o)}function Kx(s,o){return mc(4,2,s,o)}function Gx(s,o){return mc(4,4,s,o)}function Xx(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Yx(s,o,h){return h=h!=null?h.concat([s]):null,mc(4,4,Xx.bind(null,o,s),h)}function hp(){}function Wx(s,o){var h=ps();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&rp(o,d[1])?d[0]:(h.memoizedState=[s,o],s)}function qx(s,o){var h=ps();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&rp(o,d[1])?d[0]:(s=s(),h.memoizedState=[s,o],s)}function Jx(s,o,h){return So&21?(Vs(h,o)||(h=ex(),pn.lanes|=h,Co|=h,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,Ai=!0),s.memoizedState=h)}function m2(s,o){var h=Ue;Ue=h!==0&&4>h?h:4,s(!0);var d=Yd.transition;Yd.transition={};try{s(!1),o()}finally{Ue=h,Yd.transition=d}}function Zx(){return ps().memoizedState}function p2(s,o,h){var d=Xr(s);if(h={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null},Qx(s))_x(o,h);else if(h=Ox(s,o,h,d),h!==null){var g=bi();Bs(h,s,d,g),tb(h,o,d)}}function y2(s,o,h){var d=Xr(s),g={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null};if(Qx(s))_x(o,g);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var S=o.lastRenderedState,P=x(S,h);if(g.hasEagerState=!0,g.eagerState=P,Vs(P,S)){var M=o.interleaved;M===null?(g.next=g,tp(o)):(g.next=M.next,M.next=g),o.interleaved=g;return}}catch{}finally{}h=Ox(s,o,g,d),h!==null&&(g=bi(),Bs(h,s,d,g),tb(h,o,d))}}function Qx(s){var o=s.alternate;return s===pn||o!==null&&o===pn}function _x(s,o){ml=Vu=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function tb(s,o,h){if(h&4194240){var d=o.lanes;d&=s.pendingLanes,h|=d,o.lanes=h,Vm(s,h)}}var $u={readContext:ms,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},v2={readContext:ms,useCallback:function(s,o){return Ws().memoizedState=[s,o===void 0?null:o],s},useContext:ms,useEffect:uy,useImperativeHandle:function(s,o,h){return h=h!=null?h.concat([s]):null,lu(4194308,4,Xx.bind(null,o,s),h)},useLayoutEffect:function(s,o){return lu(4194308,4,s,o)},useInsertionEffect:function(s,o){return lu(4,2,s,o)},useMemo:function(s,o){var h=Ws();return o=o===void 0?null:o,s=s(),h.memoizedState=[s,o],s},useReducer:function(s,o,h){var d=Ws();return o=h!==void 0?h(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=p2.bind(null,pn,s),[d.memoizedState,s]},useRef:function(s){var o=Ws();return s={current:s},o.memoizedState=s},useState:hy,useDebugValue:hp,useDeferredValue:function(s){return Ws().memoizedState=s},useTransition:function(){var s=hy(!1),o=s[0];return s=m2.bind(null,s[1]),Ws().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,h){var d=pn,g=Ws();if(dn){if(h===void 0)throw Error($t(407));h=h()}else{if(h=o(),_n===null)throw Error($t(349));So&30||jx(d,o,h)}g.memoizedState=h;var x={value:h,getSnapshot:o};return g.queue=x,uy(Vx.bind(null,d,x,s),[s]),d.flags|=2048,$l(9,zx.bind(null,d,x,h,o),void 0,null),h},useId:function(){var s=Ws(),o=_n.identifierPrefix;if(dn){var h=dr,d=cr;h=(d&~(1<<32-Is(d)-1)).toString(32)+h,o=":"+o+"R"+h,h=zl++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=g2++,o=":"+o+"r"+h.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},x2={readContext:ms,useCallback:Wx,useContext:ms,useEffect:lp,useImperativeHandle:Yx,useInsertionEffect:Kx,useLayoutEffect:Gx,useMemo:qx,useReducer:Wd,useRef:Ux,useState:function(){return Wd(Vl)},useDebugValue:hp,useDeferredValue:function(s){var o=ps();return Jx(o,Vn.memoizedState,s)},useTransition:function(){var s=Wd(Vl)[0],o=ps().memoizedState;return[s,o]},useMutableSource:Ix,useSyncExternalStore:Bx,useId:Zx,unstable_isNewReconciler:!1},b2={readContext:ms,useCallback:Wx,useContext:ms,useEffect:lp,useImperativeHandle:Yx,useInsertionEffect:Kx,useLayoutEffect:Gx,useMemo:qx,useReducer:qd,useRef:Ux,useState:function(){return qd(Vl)},useDebugValue:hp,useDeferredValue:function(s){var o=ps();return Vn===null?o.memoizedState=s:Jx(o,Vn.memoizedState,s)},useTransition:function(){var s=qd(Vl)[0],o=ps().memoizedState;return[s,o]},useMutableSource:Ix,useSyncExternalStore:Bx,useId:Zx,unstable_isNewReconciler:!1};function Es(s,o){if(s&&s.defaultProps){o=yn({},o),s=s.defaultProps;for(var h in s)o[h]===void 0&&(o[h]=s[h]);return o}return o}function ug(s,o,h,d){o=s.memoizedState,h=h(d,o),h=h==null?o:yn({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var pc={isMounted:function(s){return(s=s._reactInternals)?To(s)===s:!1},enqueueSetState:function(s,o,h){s=s._reactInternals;var d=bi(),g=Xr(s),x=fr(d,g);x.payload=o,h!=null&&(x.callback=h),o=Kr(s,x,g),o!==null&&(Bs(o,s,g,d),ou(o,s,g))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var d=bi(),g=Xr(s),x=fr(d,g);x.tag=1,x.payload=o,h!=null&&(x.callback=h),o=Kr(s,x,g),o!==null&&(Bs(o,s,g,d),ou(o,s,g))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=bi(),d=Xr(s),g=fr(h,d);g.tag=2,o!=null&&(g.callback=o),o=Kr(s,g,d),o!==null&&(Bs(o,s,d,h),ou(o,s,d))}};function cy(s,o,h,d,g,x,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,x,S):o.prototype&&o.prototype.isPureReactComponent?!Ol(h,d)||!Ol(g,x):!0}function eb(s,o,h){var d=!1,g=qr,x=o.contextType;return typeof x=="object"&&x!==null?x=ms(x):(g=Ei(o)?bo:pi.current,d=o.contextTypes,x=(d=d!=null)?xa(s,g):qr),o=new o(h,x),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=pc,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=x),o}function dy(s,o,h,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,d),o.state!==s&&pc.enqueueReplaceState(o,o.state,null)}function cg(s,o,h,d){var g=s.stateNode;g.props=h,g.state=s.memoizedState,g.refs={},ep(s);var x=o.contextType;typeof x=="object"&&x!==null?g.context=ms(x):(x=Ei(o)?bo:pi.current,g.context=xa(s,x)),g.state=s.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(ug(s,o,x,h),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&pc.enqueueReplaceState(g,g.state,null),ju(s,h,g,d),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Ca(s,o){try{var h="",d=o;do h+=WC(d),d=d.return;while(d);var g=h}catch(x){g=`
Error generating stack: `+x.message+`
`+x.stack}return{value:s,source:o,stack:g,digest:null}}function Jd(s,o,h){return{value:s,source:null,stack:h??null,digest:o??null}}function dg(s,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var w2=typeof WeakMap=="function"?WeakMap:Map;function nb(s,o,h){h=fr(-1,h),h.tag=3,h.payload={element:null};var d=o.value;return h.callback=function(){Uu||(Uu=!0,Sg=d),dg(s,o)},h}function ib(s,o,h){h=fr(-1,h),h.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;h.payload=function(){return d(g)},h.callback=function(){dg(s,o)}}var x=s.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(h.callback=function(){dg(s,o),typeof d!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),h}function fy(s,o,h){var d=s.pingCache;if(d===null){d=s.pingCache=new w2;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(h)||(g.add(h),s=R2.bind(null,s,o,h),o.then(s,s))}function gy(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function my(s,o,h,d,g){return s.mode&1?(s.flags|=65536,s.lanes=g,s):(s===o?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=fr(-1,1),o.tag=2,Kr(h,o,1))),h.lanes|=1),s)}var S2=xr.ReactCurrentOwner,Ai=!1;function vi(s,o,h,d){o.child=s===null?Dx(o,null,h,d):wa(o,s.child,h,d)}function py(s,o,h,d,g){h=h.render;var x=o.ref;return fa(o,g),d=op(s,o,h,d,x,g),h=ap(),s!==null&&!Ai?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,vr(s,o,g)):(dn&&h&&Wm(o),o.flags|=1,vi(s,o,d,g),o.child)}function yy(s,o,h,d,g){if(s===null){var x=h.type;return typeof x=="function"&&!yp(x)&&x.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=x,sb(s,o,x,d,g)):(s=du(h.type,null,d,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(x=s.child,!(s.lanes&g)){var S=x.memoizedProps;if(h=h.compare,h=h!==null?h:Ol,h(S,d)&&s.ref===o.ref)return vr(s,o,g)}return o.flags|=1,s=Yr(x,d),s.ref=o.ref,s.return=o,o.child=s}function sb(s,o,h,d,g){if(s!==null){var x=s.memoizedProps;if(Ol(x,d)&&s.ref===o.ref)if(Ai=!1,o.pendingProps=d=x,(s.lanes&g)!==0)s.flags&131072&&(Ai=!0);else return o.lanes=s.lanes,vr(s,o,g)}return fg(s,o,h,d,g)}function rb(s,o,h){var d=o.pendingProps,g=d.children,x=s!==null?s.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(ra,Yi),Yi|=h;else{if(!(h&1073741824))return s=x!==null?x.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,en(ra,Yi),Yi|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=x!==null?x.baseLanes:h,en(ra,Yi),Yi|=d}else x!==null?(d=x.baseLanes|h,o.memoizedState=null):d=h,en(ra,Yi),Yi|=d;return vi(s,o,g,h),o.child}function ob(s,o){var h=o.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function fg(s,o,h,d,g){var x=Ei(h)?bo:pi.current;return x=xa(o,x),fa(o,g),h=op(s,o,h,d,x,g),d=ap(),s!==null&&!Ai?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,vr(s,o,g)):(dn&&d&&Wm(o),o.flags|=1,vi(s,o,h,g),o.child)}function vy(s,o,h,d,g){if(Ei(h)){var x=!0;Ou(o)}else x=!1;if(fa(o,g),o.stateNode===null)hu(s,o),eb(o,h,d),cg(o,h,d,g),d=!0;else if(s===null){var S=o.stateNode,P=o.memoizedProps;S.props=P;var M=S.context,O=h.contextType;typeof O=="object"&&O!==null?O=ms(O):(O=Ei(h)?bo:pi.current,O=xa(o,O));var L=h.getDerivedStateFromProps,j=typeof L=="function"||typeof S.getSnapshotBeforeUpdate=="function";j||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==d||M!==O)&&dy(o,S,d,O),Er=!1;var V=o.memoizedState;S.state=V,ju(o,d,S,g),M=o.memoizedState,P!==d||V!==M||Li.current||Er?(typeof L=="function"&&(ug(o,h,L,d),M=o.memoizedState),(P=Er||cy(o,h,P,d,V,M,O))?(j||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=M),S.props=d,S.state=M,S.context=O,d=P):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{S=o.stateNode,Fx(s,o),P=o.memoizedProps,O=o.type===o.elementType?P:Es(o.type,P),S.props=O,j=o.pendingProps,V=S.context,M=h.contextType,typeof M=="object"&&M!==null?M=ms(M):(M=Ei(h)?bo:pi.current,M=xa(o,M));var q=h.getDerivedStateFromProps;(L=typeof q=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==j||V!==M)&&dy(o,S,d,M),Er=!1,V=o.memoizedState,S.state=V,ju(o,d,S,g);var J=o.memoizedState;P!==j||V!==J||Li.current||Er?(typeof q=="function"&&(ug(o,h,q,d),J=o.memoizedState),(O=Er||cy(o,h,O,d,V,J,M)||!1)?(L||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,J,M),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,J,M)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||P===s.memoizedProps&&V===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&V===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=J),S.props=d,S.state=J,S.context=M,d=O):(typeof S.componentDidUpdate!="function"||P===s.memoizedProps&&V===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&V===s.memoizedState||(o.flags|=1024),d=!1)}return gg(s,o,h,d,x,g)}function gg(s,o,h,d,g,x){ob(s,o);var S=(o.flags&128)!==0;if(!d&&!S)return g&&iy(o,h,!1),vr(s,o,x);d=o.stateNode,S2.current=o;var P=S&&typeof h.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&S?(o.child=wa(o,s.child,null,x),o.child=wa(o,null,P,x)):vi(s,o,P,x),o.memoizedState=d.state,g&&iy(o,h,!0),o.child}function ab(s){var o=s.stateNode;o.pendingContext?ny(s,o.pendingContext,o.pendingContext!==o.context):o.context&&ny(s,o.context,!1),np(s,o.containerInfo)}function xy(s,o,h,d,g){return ba(),Jm(g),o.flags|=256,vi(s,o,h,d),o.child}var mg={dehydrated:null,treeContext:null,retryLane:0};function pg(s){return{baseLanes:s,cachePool:null,transitions:null}}function lb(s,o,h){var d=o.pendingProps,g=mn.current,x=!1,S=(o.flags&128)!==0,P;if((P=S)||(P=s!==null&&s.memoizedState===null?!1:(g&2)!==0),P?(x=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),en(mn,g&1),s===null)return lg(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(S=d.children,s=d.fallback,x?(d=o.mode,x=o.child,S={mode:"hidden",children:S},!(d&1)&&x!==null?(x.childLanes=0,x.pendingProps=S):x=xc(S,d,0,null),s=vo(s,d,h,null),x.return=o,s.return=o,x.sibling=s,o.child=x,o.child.memoizedState=pg(h),o.memoizedState=mg,s):up(o,S));if(g=s.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return C2(s,o,S,d,P,g,h);if(x){x=d.fallback,S=o.mode,g=s.child,P=g.sibling;var M={mode:"hidden",children:d.children};return!(S&1)&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=M,o.deletions=null):(d=Yr(g,M),d.subtreeFlags=g.subtreeFlags&14680064),P!==null?x=Yr(P,x):(x=vo(x,S,h,null),x.flags|=2),x.return=o,d.return=o,d.sibling=x,o.child=d,d=x,x=o.child,S=s.child.memoizedState,S=S===null?pg(h):{baseLanes:S.baseLanes|h,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=s.childLanes&~h,o.memoizedState=mg,d}return x=s.child,s=x.sibling,d=Yr(x,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=h),d.return=o,d.sibling=null,s!==null&&(h=o.deletions,h===null?(o.deletions=[s],o.flags|=16):h.push(s)),o.child=d,o.memoizedState=null,d}function up(s,o){return o=xc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function jh(s,o,h,d){return d!==null&&Jm(d),wa(o,s.child,null,h),s=up(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function C2(s,o,h,d,g,x,S){if(h)return o.flags&256?(o.flags&=-257,d=Jd(Error($t(422))),jh(s,o,S,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(x=d.fallback,g=o.mode,d=xc({mode:"visible",children:d.children},g,0,null),x=vo(x,g,S,null),x.flags|=2,d.return=o,x.return=o,d.sibling=x,o.child=d,o.mode&1&&wa(o,s.child,null,S),o.child.memoizedState=pg(S),o.memoizedState=mg,x);if(!(o.mode&1))return jh(s,o,S,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var P=d.dgst;return d=P,x=Error($t(419)),d=Jd(x,d,void 0),jh(s,o,S,d)}if(P=(S&s.childLanes)!==0,Ai||P){if(d=_n,d!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(d.suspendedLanes|S)?0:g,g!==0&&g!==x.retryLane&&(x.retryLane=g,yr(s,g),Bs(d,s,g,-1))}return pp(),d=Jd(Error($t(421))),jh(s,o,S,d)}return g.data==="$?"?(o.flags|=128,o.child=s.child,o=I2.bind(null,s),g._reactRetry=o,null):(s=x.treeContext,Wi=Ur(g.nextSibling),Ji=o,dn=!0,Rs=null,s!==null&&(cs[ds++]=cr,cs[ds++]=dr,cs[ds++]=wo,cr=s.id,dr=s.overflow,wo=o),o=up(o,d.children),o.flags|=4096,o)}function by(s,o,h){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),hg(s.return,o,h)}function Zd(s,o,h,d,g){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:g}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=h,x.tailMode=g)}function hb(s,o,h){var d=o.pendingProps,g=d.revealOrder,x=d.tail;if(vi(s,o,d.children,h),d=mn.current,d&2)d=d&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&by(s,h,o);else if(s.tag===19)by(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(en(mn,d),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(h=o.child,g=null;h!==null;)s=h.alternate,s!==null&&zu(s)===null&&(g=h),h=h.sibling;h=g,h===null?(g=o.child,o.child=null):(g=h.sibling,h.sibling=null),Zd(o,!1,g,h,x);break;case"backwards":for(h=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&zu(s)===null){o.child=g;break}s=g.sibling,g.sibling=h,h=g,g=s}Zd(o,!0,h,null,x);break;case"together":Zd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function hu(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function vr(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),Co|=o.lanes,!(h&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error($t(153));if(o.child!==null){for(s=o.child,h=Yr(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=Yr(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function k2(s,o,h){switch(o.tag){case 3:ab(o),ba();break;case 5:Rx(o);break;case 1:Ei(o.type)&&Ou(o);break;case 4:np(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;en(Iu,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(en(mn,mn.current&1),o.flags|=128,null):h&o.child.childLanes?lb(s,o,h):(en(mn,mn.current&1),s=vr(s,o,h),s!==null?s.sibling:null);en(mn,mn.current&1);break;case 19:if(d=(h&o.childLanes)!==0,s.flags&128){if(d)return hb(s,o,h);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),en(mn,mn.current),d)break;return null;case 22:case 23:return o.lanes=0,rb(s,o,h)}return vr(s,o,h)}var ub,yg,cb,db;ub=function(s,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}};yg=function(){};cb=function(s,o,h,d){var g=s.memoizedProps;if(g!==d){s=o.stateNode,fo(tr.current);var x=null;switch(h){case"input":g=zf(s,g),d=zf(s,d),x=[];break;case"select":g=yn({},g,{value:void 0}),d=yn({},d,{value:void 0}),x=[];break;case"textarea":g=Hf(s,g),d=Hf(s,d),x=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Eu)}Kf(h,d);var S;h=null;for(O in g)if(!d.hasOwnProperty(O)&&g.hasOwnProperty(O)&&g[O]!=null)if(O==="style"){var P=g[O];for(S in P)P.hasOwnProperty(S)&&(h||(h={}),h[S]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(Ml.hasOwnProperty(O)?x||(x=[]):(x=x||[]).push(O,null));for(O in d){var M=d[O];if(P=g!=null?g[O]:void 0,d.hasOwnProperty(O)&&M!==P&&(M!=null||P!=null))if(O==="style")if(P){for(S in P)!P.hasOwnProperty(S)||M&&M.hasOwnProperty(S)||(h||(h={}),h[S]="");for(S in M)M.hasOwnProperty(S)&&P[S]!==M[S]&&(h||(h={}),h[S]=M[S])}else h||(x||(x=[]),x.push(O,h)),h=M;else O==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,P=P?P.__html:void 0,M!=null&&P!==M&&(x=x||[]).push(O,M)):O==="children"?typeof M!="string"&&typeof M!="number"||(x=x||[]).push(O,""+M):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(Ml.hasOwnProperty(O)?(M!=null&&O==="onScroll"&&on("scroll",s),x||P===M||(x=[])):(x=x||[]).push(O,M))}h&&(x=x||[]).push("style",h);var O=x;(o.updateQueue=O)&&(o.flags|=4)}};db=function(s,o,h,d){h!==d&&(o.flags|=4)};function _a(s,o){if(!dn)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function gi(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,d=0;if(o)for(var g=s.child;g!==null;)h|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)h|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=h,o}function P2(s,o,h){var d=o.pendingProps;switch(qm(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(o),null;case 1:return Ei(o.type)&&Du(),gi(o),null;case 3:return d=o.stateNode,Sa(),an(Li),an(pi),sp(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Ih(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Rs!==null&&(Pg(Rs),Rs=null))),yg(s,o),gi(o),null;case 5:ip(o);var g=fo(jl.current);if(h=o.type,s!==null&&o.stateNode!=null)cb(s,o,h,d,g),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error($t(166));return gi(o),null}if(s=fo(tr.current),Ih(o)){d=o.stateNode,h=o.type;var x=o.memoizedProps;switch(d[Js]=o,d[Il]=x,s=(o.mode&1)!==0,h){case"dialog":on("cancel",d),on("close",d);break;case"iframe":case"object":case"embed":on("load",d);break;case"video":case"audio":for(g=0;g<ll.length;g++)on(ll[g],d);break;case"source":on("error",d);break;case"img":case"image":case"link":on("error",d),on("load",d);break;case"details":on("toggle",d);break;case"input":A0(d,x),on("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!x.multiple},on("invalid",d);break;case"textarea":E0(d,x),on("invalid",d)}Kf(h,x),g=null;for(var S in x)if(x.hasOwnProperty(S)){var P=x[S];S==="children"?typeof P=="string"?d.textContent!==P&&(x.suppressHydrationWarning!==!0&&Rh(d.textContent,P,s),g=["children",P]):typeof P=="number"&&d.textContent!==""+P&&(x.suppressHydrationWarning!==!0&&Rh(d.textContent,P,s),g=["children",""+P]):Ml.hasOwnProperty(S)&&P!=null&&S==="onScroll"&&on("scroll",d)}switch(h){case"input":Nh(d),L0(d,x,!0);break;case"textarea":Nh(d),D0(d);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(d.onclick=Eu)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=V1(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=S.createElement(h,{is:d.is}):(s=S.createElement(h),h==="select"&&(S=s,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):s=S.createElementNS(s,h),s[Js]=o,s[Il]=d,ub(s,o,!1,!1),o.stateNode=s;t:{switch(S=Gf(h,d),h){case"dialog":on("cancel",s),on("close",s),g=d;break;case"iframe":case"object":case"embed":on("load",s),g=d;break;case"video":case"audio":for(g=0;g<ll.length;g++)on(ll[g],s);g=d;break;case"source":on("error",s),g=d;break;case"img":case"image":case"link":on("error",s),on("load",s),g=d;break;case"details":on("toggle",s),g=d;break;case"input":A0(s,d),g=zf(s,d),on("invalid",s);break;case"option":g=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},g=yn({},d,{value:void 0}),on("invalid",s);break;case"textarea":E0(s,d),g=Hf(s,d),on("invalid",s);break;default:g=d}Kf(h,g),P=g;for(x in P)if(P.hasOwnProperty(x)){var M=P[x];x==="style"?U1(s,M):x==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&$1(s,M)):x==="children"?typeof M=="string"?(h!=="textarea"||M!=="")&&Nl(s,M):typeof M=="number"&&Nl(s,""+M):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Ml.hasOwnProperty(x)?M!=null&&x==="onScroll"&&on("scroll",s):M!=null&&Fm(s,x,M,S))}switch(h){case"input":Nh(s),L0(s,d,!1);break;case"textarea":Nh(s),D0(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Wr(d.value));break;case"select":s.multiple=!!d.multiple,x=d.value,x!=null?ha(s,!!d.multiple,x,!1):d.defaultValue!=null&&ha(s,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Eu)}switch(h){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return gi(o),null;case 6:if(s&&o.stateNode!=null)db(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error($t(166));if(h=fo(jl.current),fo(tr.current),Ih(o)){if(d=o.stateNode,h=o.memoizedProps,d[Js]=o,(x=d.nodeValue!==h)&&(s=Ji,s!==null))switch(s.tag){case 3:Rh(d.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Rh(d.nodeValue,h,(s.mode&1)!==0)}x&&(o.flags|=4)}else d=(h.nodeType===9?h:h.ownerDocument).createTextNode(d),d[Js]=o,o.stateNode=d}return gi(o),null;case 13:if(an(mn),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(dn&&Wi!==null&&o.mode&1&&!(o.flags&128))Lx(),ba(),o.flags|=98560,x=!1;else if(x=Ih(o),d!==null&&d.dehydrated!==null){if(s===null){if(!x)throw Error($t(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error($t(317));x[Js]=o}else ba(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;gi(o),x=!1}else Rs!==null&&(Pg(Rs),Rs=null),x=!0;if(!x)return o.flags&65536?o:null}return o.flags&128?(o.lanes=h,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(s===null||mn.current&1?Hn===0&&(Hn=3):pp())),o.updateQueue!==null&&(o.flags|=4),gi(o),null);case 4:return Sa(),yg(s,o),s===null&&Fl(o.stateNode.containerInfo),gi(o),null;case 10:return _m(o.type._context),gi(o),null;case 17:return Ei(o.type)&&Du(),gi(o),null;case 19:if(an(mn),x=o.memoizedState,x===null)return gi(o),null;if(d=(o.flags&128)!==0,S=x.rendering,S===null)if(d)_a(x,!1);else{if(Hn!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(S=zu(s),S!==null){for(o.flags|=128,_a(x,!1),d=S.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=h,h=o.child;h!==null;)x=h,s=d,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=s,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,s=S.dependencies,x.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return en(mn,mn.current&1|2),o.child}s=s.sibling}x.tail!==null&&Ln()>ka&&(o.flags|=128,d=!0,_a(x,!1),o.lanes=4194304)}else{if(!d)if(s=zu(S),s!==null){if(o.flags|=128,d=!0,h=s.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),_a(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!dn)return gi(o),null}else 2*Ln()-x.renderingStartTime>ka&&h!==1073741824&&(o.flags|=128,d=!0,_a(x,!1),o.lanes=4194304);x.isBackwards?(S.sibling=o.child,o.child=S):(h=x.last,h!==null?h.sibling=S:o.child=S,x.last=S)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=Ln(),o.sibling=null,h=mn.current,en(mn,d?h&1|2:h&1),o):(gi(o),null);case 22:case 23:return mp(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?Yi&1073741824&&(gi(o),o.subtreeFlags&6&&(o.flags|=8192)):gi(o),null;case 24:return null;case 25:return null}throw Error($t(156,o.tag))}function M2(s,o){switch(qm(o),o.tag){case 1:return Ei(o.type)&&Du(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Sa(),an(Li),an(pi),sp(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return ip(o),null;case 13:if(an(mn),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error($t(340));ba()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return an(mn),null;case 4:return Sa(),null;case 10:return _m(o.type._context),null;case 22:case 23:return mp(),null;case 24:return null;default:return null}}var zh=!1,mi=!1,N2=typeof WeakSet=="function"?WeakSet:Set,ee=null;function sa(s,o){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(d){Pn(s,o,d)}else h.current=null}function vg(s,o,h){try{h()}catch(d){Pn(s,o,d)}}var wy=!1;function T2(s,o){if(eg=Tu,s=yx(),Ym(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else t:{h=(h=s.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var g=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{h.nodeType,x.nodeType}catch{h=null;break t}var S=0,P=-1,M=-1,O=0,L=0,j=s,V=null;e:for(;;){for(var q;j!==h||g!==0&&j.nodeType!==3||(P=S+g),j!==x||d!==0&&j.nodeType!==3||(M=S+d),j.nodeType===3&&(S+=j.nodeValue.length),(q=j.firstChild)!==null;)V=j,j=q;for(;;){if(j===s)break e;if(V===h&&++O===g&&(P=S),V===x&&++L===d&&(M=S),(q=j.nextSibling)!==null)break;j=V,V=j.parentNode}j=q}h=P===-1||M===-1?null:{start:P,end:M}}else h=null}h=h||{start:0,end:0}}else h=null;for(ng={focusedElem:s,selectionRange:h},Tu=!1,ee=o;ee!==null;)if(o=ee,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,ee=s;else for(;ee!==null;){o=ee;try{var J=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(J!==null){var Y=J.memoizedProps,W=J.memoizedState,T=o.stateNode,B=T.getSnapshotBeforeUpdate(o.elementType===o.type?Y:Es(o.type,Y),W);T.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var I=o.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($t(163))}}catch(tt){Pn(o,o.return,tt)}if(s=o.sibling,s!==null){s.return=o.return,ee=s;break}ee=o.return}return J=wy,wy=!1,J}function pl(s,o,h){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&s)===s){var x=g.destroy;g.destroy=void 0,x!==void 0&&vg(o,h,x)}g=g.next}while(g!==d)}}function yc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&s)===s){var d=h.create;h.destroy=d()}h=h.next}while(h!==o)}}function xg(s){var o=s.ref;if(o!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof o=="function"?o(s):o.current=s}}function fb(s){var o=s.alternate;o!==null&&(s.alternate=null,fb(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Js],delete o[Il],delete o[rg],delete o[u2],delete o[c2])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function gb(s){return s.tag===5||s.tag===3||s.tag===4}function Sy(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||gb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function bg(s,o,h){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(s,o):h.insertBefore(s,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(s,h)):(o=h,o.appendChild(s)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Eu));else if(d!==4&&(s=s.child,s!==null))for(bg(s,o,h),s=s.sibling;s!==null;)bg(s,o,h),s=s.sibling}function wg(s,o,h){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(wg(s,o,h),s=s.sibling;s!==null;)wg(s,o,h),s=s.sibling}var ni=null,Ds=!1;function Nr(s,o,h){for(h=h.child;h!==null;)mb(s,o,h),h=h.sibling}function mb(s,o,h){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(hc,h)}catch{}switch(h.tag){case 5:mi||sa(h,o);case 6:var d=ni,g=Ds;ni=null,Nr(s,o,h),ni=d,Ds=g,ni!==null&&(Ds?(s=ni,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):ni.removeChild(h.stateNode));break;case 18:ni!==null&&(Ds?(s=ni,h=h.stateNode,s.nodeType===8?Kd(s.parentNode,h):s.nodeType===1&&Kd(s,h),El(s)):Kd(ni,h.stateNode));break;case 4:d=ni,g=Ds,ni=h.stateNode.containerInfo,Ds=!0,Nr(s,o,h),ni=d,Ds=g;break;case 0:case 11:case 14:case 15:if(!mi&&(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var x=g,S=x.destroy;x=x.tag,S!==void 0&&(x&2||x&4)&&vg(h,o,S),g=g.next}while(g!==d)}Nr(s,o,h);break;case 1:if(!mi&&(sa(h,o),d=h.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch(P){Pn(h,o,P)}Nr(s,o,h);break;case 21:Nr(s,o,h);break;case 22:h.mode&1?(mi=(d=mi)||h.memoizedState!==null,Nr(s,o,h),mi=d):Nr(s,o,h);break;default:Nr(s,o,h)}}function Cy(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new N2),o.forEach(function(d){var g=B2.bind(null,s,d);h.has(d)||(h.add(d),d.then(g,g))})}}function Ts(s,o){var h=o.deletions;if(h!==null)for(var d=0;d<h.length;d++){var g=h[d];try{var x=s,S=o,P=S;t:for(;P!==null;){switch(P.tag){case 5:ni=P.stateNode,Ds=!1;break t;case 3:ni=P.stateNode.containerInfo,Ds=!0;break t;case 4:ni=P.stateNode.containerInfo,Ds=!0;break t}P=P.return}if(ni===null)throw Error($t(160));mb(x,S,g),ni=null,Ds=!1;var M=g.alternate;M!==null&&(M.return=null),g.return=null}catch(O){Pn(g,o,O)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)pb(o,s),o=o.sibling}function pb(s,o){var h=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Ts(o,s),Xs(s),d&4){try{pl(3,s,s.return),yc(3,s)}catch(Y){Pn(s,s.return,Y)}try{pl(5,s,s.return)}catch(Y){Pn(s,s.return,Y)}}break;case 1:Ts(o,s),Xs(s),d&512&&h!==null&&sa(h,h.return);break;case 5:if(Ts(o,s),Xs(s),d&512&&h!==null&&sa(h,h.return),s.flags&32){var g=s.stateNode;try{Nl(g,"")}catch(Y){Pn(s,s.return,Y)}}if(d&4&&(g=s.stateNode,g!=null)){var x=s.memoizedProps,S=h!==null?h.memoizedProps:x,P=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{P==="input"&&x.type==="radio"&&x.name!=null&&j1(g,x),Gf(P,S);var O=Gf(P,x);for(S=0;S<M.length;S+=2){var L=M[S],j=M[S+1];L==="style"?U1(g,j):L==="dangerouslySetInnerHTML"?$1(g,j):L==="children"?Nl(g,j):Fm(g,L,j,O)}switch(P){case"input":Vf(g,x);break;case"textarea":z1(g,x);break;case"select":var V=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!x.multiple;var q=x.value;q!=null?ha(g,!!x.multiple,q,!1):V!==!!x.multiple&&(x.defaultValue!=null?ha(g,!!x.multiple,x.defaultValue,!0):ha(g,!!x.multiple,x.multiple?[]:"",!1))}g[Il]=x}catch(Y){Pn(s,s.return,Y)}}break;case 6:if(Ts(o,s),Xs(s),d&4){if(s.stateNode===null)throw Error($t(162));g=s.stateNode,x=s.memoizedProps;try{g.nodeValue=x}catch(Y){Pn(s,s.return,Y)}}break;case 3:if(Ts(o,s),Xs(s),d&4&&h!==null&&h.memoizedState.isDehydrated)try{El(o.containerInfo)}catch(Y){Pn(s,s.return,Y)}break;case 4:Ts(o,s),Xs(s);break;case 13:Ts(o,s),Xs(s),g=s.child,g.flags&8192&&(x=g.memoizedState!==null,g.stateNode.isHidden=x,!x||g.alternate!==null&&g.alternate.memoizedState!==null||(fp=Ln())),d&4&&Cy(s);break;case 22:if(L=h!==null&&h.memoizedState!==null,s.mode&1?(mi=(O=mi)||L,Ts(o,s),mi=O):Ts(o,s),Xs(s),d&8192){if(O=s.memoizedState!==null,(s.stateNode.isHidden=O)&&!L&&s.mode&1)for(ee=s,L=s.child;L!==null;){for(j=ee=L;ee!==null;){switch(V=ee,q=V.child,V.tag){case 0:case 11:case 14:case 15:pl(4,V,V.return);break;case 1:sa(V,V.return);var J=V.stateNode;if(typeof J.componentWillUnmount=="function"){d=V,h=V.return;try{o=d,J.props=o.memoizedProps,J.state=o.memoizedState,J.componentWillUnmount()}catch(Y){Pn(d,h,Y)}}break;case 5:sa(V,V.return);break;case 22:if(V.memoizedState!==null){Py(j);continue}}q!==null?(q.return=V,ee=q):Py(j)}L=L.sibling}t:for(L=null,j=s;;){if(j.tag===5){if(L===null){L=j;try{g=j.stateNode,O?(x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(P=j.stateNode,M=j.memoizedProps.style,S=M!=null&&M.hasOwnProperty("display")?M.display:null,P.style.display=H1("display",S))}catch(Y){Pn(s,s.return,Y)}}}else if(j.tag===6){if(L===null)try{j.stateNode.nodeValue=O?"":j.memoizedProps}catch(Y){Pn(s,s.return,Y)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===s)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===s)break t;for(;j.sibling===null;){if(j.return===null||j.return===s)break t;L===j&&(L=null),j=j.return}L===j&&(L=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:Ts(o,s),Xs(s),d&4&&Cy(s);break;case 21:break;default:Ts(o,s),Xs(s)}}function Xs(s){var o=s.flags;if(o&2){try{t:{for(var h=s.return;h!==null;){if(gb(h)){var d=h;break t}h=h.return}throw Error($t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(Nl(g,""),d.flags&=-33);var x=Sy(s);wg(s,x,g);break;case 3:case 4:var S=d.stateNode.containerInfo,P=Sy(s);bg(s,P,S);break;default:throw Error($t(161))}}catch(M){Pn(s,s.return,M)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function A2(s,o,h){ee=s,yb(s)}function yb(s,o,h){for(var d=(s.mode&1)!==0;ee!==null;){var g=ee,x=g.child;if(g.tag===22&&d){var S=g.memoizedState!==null||zh;if(!S){var P=g.alternate,M=P!==null&&P.memoizedState!==null||mi;P=zh;var O=mi;if(zh=S,(mi=M)&&!O)for(ee=g;ee!==null;)S=ee,M=S.child,S.tag===22&&S.memoizedState!==null?My(g):M!==null?(M.return=S,ee=M):My(g);for(;x!==null;)ee=x,yb(x),x=x.sibling;ee=g,zh=P,mi=O}ky(s)}else g.subtreeFlags&8772&&x!==null?(x.return=g,ee=x):ky(s)}}function ky(s){for(;ee!==null;){var o=ee;if(o.flags&8772){var h=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:mi||yc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!mi)if(h===null)d.componentDidMount();else{var g=o.elementType===o.type?h.memoizedProps:Es(o.type,h.memoizedProps);d.componentDidUpdate(g,h.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&ly(o,x,d);break;case 3:var S=o.updateQueue;if(S!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}ly(o,S,h)}break;case 5:var P=o.stateNode;if(h===null&&o.flags&4){h=P;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&h.focus();break;case"img":M.src&&(h.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var O=o.alternate;if(O!==null){var L=O.memoizedState;if(L!==null){var j=L.dehydrated;j!==null&&El(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($t(163))}mi||o.flags&512&&xg(o)}catch(V){Pn(o,o.return,V)}}if(o===s){ee=null;break}if(h=o.sibling,h!==null){h.return=o.return,ee=h;break}ee=o.return}}function Py(s){for(;ee!==null;){var o=ee;if(o===s){ee=null;break}var h=o.sibling;if(h!==null){h.return=o.return,ee=h;break}ee=o.return}}function My(s){for(;ee!==null;){var o=ee;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{yc(4,o)}catch(M){Pn(o,h,M)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(M){Pn(o,g,M)}}var x=o.return;try{xg(o)}catch(M){Pn(o,x,M)}break;case 5:var S=o.return;try{xg(o)}catch(M){Pn(o,S,M)}}}catch(M){Pn(o,o.return,M)}if(o===s){ee=null;break}var P=o.sibling;if(P!==null){P.return=o.return,ee=P;break}ee=o.return}}var L2=Math.ceil,Hu=xr.ReactCurrentDispatcher,cp=xr.ReactCurrentOwner,gs=xr.ReactCurrentBatchConfig,Oe=0,_n=null,In=null,ii=0,Yi=0,ra=Zr(0),Hn=0,Hl=null,Co=0,vc=0,dp=0,yl=null,Ti=null,fp=0,ka=1/0,hr=null,Uu=!1,Sg=null,Gr=null,Vh=!1,Ir=null,Ku=0,vl=0,Cg=null,uu=-1,cu=0;function bi(){return Oe&6?Ln():uu!==-1?uu:uu=Ln()}function Xr(s){return s.mode&1?Oe&2&&ii!==0?ii&-ii:f2.transition!==null?(cu===0&&(cu=ex()),cu):(s=Ue,s!==0||(s=window.event,s=s===void 0?16:lx(s.type)),s):1}function Bs(s,o,h,d){if(50<vl)throw vl=0,Cg=null,Error($t(185));sh(s,h,d),(!(Oe&2)||s!==_n)&&(s===_n&&(!(Oe&2)&&(vc|=h),Hn===4&&Fr(s,ii)),Di(s,d),h===1&&Oe===0&&!(o.mode&1)&&(ka=Ln()+500,gc&&Qr()))}function Di(s,o){var h=s.callbackNode;fk(s,o);var d=Nu(s,s===_n?ii:0);if(d===0)h!==null&&R0(h),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(h!=null&&R0(h),o===1)s.tag===0?d2(Ny.bind(null,s)):Nx(Ny.bind(null,s)),l2(function(){!(Oe&6)&&Qr()}),h=null;else{switch(nx(d)){case 1:h=zm;break;case 4:h=_1;break;case 16:h=Mu;break;case 536870912:h=tx;break;default:h=Mu}h=Pb(h,vb.bind(null,s))}s.callbackPriority=o,s.callbackNode=h}}function vb(s,o){if(uu=-1,cu=0,Oe&6)throw Error($t(327));var h=s.callbackNode;if(ga()&&s.callbackNode!==h)return null;var d=Nu(s,s===_n?ii:0);if(d===0)return null;if(d&30||d&s.expiredLanes||o)o=Gu(s,d);else{o=d;var g=Oe;Oe|=2;var x=bb();(_n!==s||ii!==o)&&(hr=null,ka=Ln()+500,yo(s,o));do try{O2();break}catch(P){xb(s,P)}while(!0);Qm(),Hu.current=x,Oe=g,In!==null?o=0:(_n=null,ii=0,o=Hn)}if(o!==0){if(o===2&&(g=Jf(s),g!==0&&(d=g,o=kg(s,g))),o===1)throw h=Hl,yo(s,0),Fr(s,d),Di(s,Ln()),h;if(o===6)Fr(s,d);else{if(g=s.current.alternate,!(d&30)&&!E2(g)&&(o=Gu(s,d),o===2&&(x=Jf(s),x!==0&&(d=x,o=kg(s,x))),o===1))throw h=Hl,yo(s,0),Fr(s,d),Di(s,Ln()),h;switch(s.finishedWork=g,s.finishedLanes=d,o){case 0:case 1:throw Error($t(345));case 2:lo(s,Ti,hr);break;case 3:if(Fr(s,d),(d&130023424)===d&&(o=fp+500-Ln(),10<o)){if(Nu(s,0)!==0)break;if(g=s.suspendedLanes,(g&d)!==d){bi(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=sg(lo.bind(null,s,Ti,hr),o);break}lo(s,Ti,hr);break;case 4:if(Fr(s,d),(d&4194240)===d)break;for(o=s.eventTimes,g=-1;0<d;){var S=31-Is(d);x=1<<S,S=o[S],S>g&&(g=S),d&=~x}if(d=g,d=Ln()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*L2(d/1960))-d,10<d){s.timeoutHandle=sg(lo.bind(null,s,Ti,hr),d);break}lo(s,Ti,hr);break;case 5:lo(s,Ti,hr);break;default:throw Error($t(329))}}}return Di(s,Ln()),s.callbackNode===h?vb.bind(null,s):null}function kg(s,o){var h=yl;return s.current.memoizedState.isDehydrated&&(yo(s,o).flags|=256),s=Gu(s,o),s!==2&&(o=Ti,Ti=h,o!==null&&Pg(o)),s}function Pg(s){Ti===null?Ti=s:Ti.push.apply(Ti,s)}function E2(s){for(var o=s;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var d=0;d<h.length;d++){var g=h[d],x=g.getSnapshot;g=g.value;try{if(!Vs(x(),g))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fr(s,o){for(o&=~dp,o&=~vc,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var h=31-Is(o),d=1<<h;s[h]=-1,o&=~d}}function Ny(s){if(Oe&6)throw Error($t(327));ga();var o=Nu(s,0);if(!(o&1))return Di(s,Ln()),null;var h=Gu(s,o);if(s.tag!==0&&h===2){var d=Jf(s);d!==0&&(o=d,h=kg(s,d))}if(h===1)throw h=Hl,yo(s,0),Fr(s,o),Di(s,Ln()),h;if(h===6)throw Error($t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,lo(s,Ti,hr),Di(s,Ln()),null}function gp(s,o){var h=Oe;Oe|=1;try{return s(o)}finally{Oe=h,Oe===0&&(ka=Ln()+500,gc&&Qr())}}function ko(s){Ir!==null&&Ir.tag===0&&!(Oe&6)&&ga();var o=Oe;Oe|=1;var h=gs.transition,d=Ue;try{if(gs.transition=null,Ue=1,s)return s()}finally{Ue=d,gs.transition=h,Oe=o,!(Oe&6)&&Qr()}}function mp(){Yi=ra.current,an(ra)}function yo(s,o){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,a2(h)),In!==null)for(h=In.return;h!==null;){var d=h;switch(qm(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Du();break;case 3:Sa(),an(Li),an(pi),sp();break;case 5:ip(d);break;case 4:Sa();break;case 13:an(mn);break;case 19:an(mn);break;case 10:_m(d.type._context);break;case 22:case 23:mp()}h=h.return}if(_n=s,In=s=Yr(s.current,null),ii=Yi=o,Hn=0,Hl=null,dp=vc=Co=0,Ti=yl=null,co!==null){for(o=0;o<co.length;o++)if(h=co[o],d=h.interleaved,d!==null){h.interleaved=null;var g=d.next,x=h.pending;if(x!==null){var S=x.next;x.next=g,d.next=S}h.pending=d}co=null}return s}function xb(s,o){do{var h=In;try{if(Qm(),au.current=$u,Vu){for(var d=pn.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}Vu=!1}if(So=0,Zn=Vn=pn=null,ml=!1,zl=0,cp.current=null,h===null||h.return===null){Hn=1,Hl=o,In=null;break}t:{var x=s,S=h.return,P=h,M=o;if(o=ii,P.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var O=M,L=P,j=L.tag;if(!(L.mode&1)&&(j===0||j===11||j===15)){var V=L.alternate;V?(L.updateQueue=V.updateQueue,L.memoizedState=V.memoizedState,L.lanes=V.lanes):(L.updateQueue=null,L.memoizedState=null)}var q=gy(S);if(q!==null){q.flags&=-257,my(q,S,P,x,o),q.mode&1&&fy(x,O,o),o=q,M=O;var J=o.updateQueue;if(J===null){var Y=new Set;Y.add(M),o.updateQueue=Y}else J.add(M);break t}else{if(!(o&1)){fy(x,O,o),pp();break t}M=Error($t(426))}}else if(dn&&P.mode&1){var W=gy(S);if(W!==null){!(W.flags&65536)&&(W.flags|=256),my(W,S,P,x,o),Jm(Ca(M,P));break t}}x=M=Ca(M,P),Hn!==4&&(Hn=2),yl===null?yl=[x]:yl.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var T=nb(x,M,o);ay(x,T);break t;case 1:P=M;var B=x.type,I=x.stateNode;if(!(x.flags&128)&&(typeof B.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Gr===null||!Gr.has(I)))){x.flags|=65536,o&=-o,x.lanes|=o;var tt=ib(x,P,o);ay(x,tt);break t}}x=x.return}while(x!==null)}Sb(h)}catch(z){o=z,In===h&&h!==null&&(In=h=h.return);continue}break}while(!0)}function bb(){var s=Hu.current;return Hu.current=$u,s===null?$u:s}function pp(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),_n===null||!(Co&268435455)&&!(vc&268435455)||Fr(_n,ii)}function Gu(s,o){var h=Oe;Oe|=2;var d=bb();(_n!==s||ii!==o)&&(hr=null,yo(s,o));do try{D2();break}catch(g){xb(s,g)}while(!0);if(Qm(),Oe=h,Hu.current=d,In!==null)throw Error($t(261));return _n=null,ii=0,Hn}function D2(){for(;In!==null;)wb(In)}function O2(){for(;In!==null&&!sk();)wb(In)}function wb(s){var o=kb(s.alternate,s,Yi);s.memoizedProps=s.pendingProps,o===null?Sb(s):In=o,cp.current=null}function Sb(s){var o=s;do{var h=o.alternate;if(s=o.return,o.flags&32768){if(h=M2(h,o),h!==null){h.flags&=32767,In=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Hn=6,In=null;return}}else if(h=P2(h,o,Yi),h!==null){In=h;return}if(o=o.sibling,o!==null){In=o;return}In=o=s}while(o!==null);Hn===0&&(Hn=5)}function lo(s,o,h){var d=Ue,g=gs.transition;try{gs.transition=null,Ue=1,F2(s,o,h,d)}finally{gs.transition=g,Ue=d}return null}function F2(s,o,h,d){do ga();while(Ir!==null);if(Oe&6)throw Error($t(327));h=s.finishedWork;var g=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error($t(177));s.callbackNode=null,s.callbackPriority=0;var x=h.lanes|h.childLanes;if(gk(s,x),s===_n&&(In=_n=null,ii=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||Vh||(Vh=!0,Pb(Mu,function(){return ga(),null})),x=(h.flags&15990)!==0,h.subtreeFlags&15990||x){x=gs.transition,gs.transition=null;var S=Ue;Ue=1;var P=Oe;Oe|=4,cp.current=null,T2(s,h),pb(h,s),t2(ng),Tu=!!eg,ng=eg=null,s.current=h,A2(h),rk(),Oe=P,Ue=S,gs.transition=x}else s.current=h;if(Vh&&(Vh=!1,Ir=s,Ku=g),x=s.pendingLanes,x===0&&(Gr=null),lk(h.stateNode),Di(s,Ln()),o!==null)for(d=s.onRecoverableError,h=0;h<o.length;h++)g=o[h],d(g.value,{componentStack:g.stack,digest:g.digest});if(Uu)throw Uu=!1,s=Sg,Sg=null,s;return Ku&1&&s.tag!==0&&ga(),x=s.pendingLanes,x&1?s===Cg?vl++:(vl=0,Cg=s):vl=0,Qr(),null}function ga(){if(Ir!==null){var s=nx(Ku),o=gs.transition,h=Ue;try{if(gs.transition=null,Ue=16>s?16:s,Ir===null)var d=!1;else{if(s=Ir,Ir=null,Ku=0,Oe&6)throw Error($t(331));var g=Oe;for(Oe|=4,ee=s.current;ee!==null;){var x=ee,S=x.child;if(ee.flags&16){var P=x.deletions;if(P!==null){for(var M=0;M<P.length;M++){var O=P[M];for(ee=O;ee!==null;){var L=ee;switch(L.tag){case 0:case 11:case 15:pl(8,L,x)}var j=L.child;if(j!==null)j.return=L,ee=j;else for(;ee!==null;){L=ee;var V=L.sibling,q=L.return;if(fb(L),L===O){ee=null;break}if(V!==null){V.return=q,ee=V;break}ee=q}}}var J=x.alternate;if(J!==null){var Y=J.child;if(Y!==null){J.child=null;do{var W=Y.sibling;Y.sibling=null,Y=W}while(Y!==null)}}ee=x}}if(x.subtreeFlags&2064&&S!==null)S.return=x,ee=S;else t:for(;ee!==null;){if(x=ee,x.flags&2048)switch(x.tag){case 0:case 11:case 15:pl(9,x,x.return)}var T=x.sibling;if(T!==null){T.return=x.return,ee=T;break t}ee=x.return}}var B=s.current;for(ee=B;ee!==null;){S=ee;var I=S.child;if(S.subtreeFlags&2064&&I!==null)I.return=S,ee=I;else t:for(S=B;ee!==null;){if(P=ee,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:yc(9,P)}}catch(z){Pn(P,P.return,z)}if(P===S){ee=null;break t}var tt=P.sibling;if(tt!==null){tt.return=P.return,ee=tt;break t}ee=P.return}}if(Oe=g,Qr(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(hc,s)}catch{}d=!0}return d}finally{Ue=h,gs.transition=o}}return!1}function Ty(s,o,h){o=Ca(h,o),o=nb(s,o,1),s=Kr(s,o,1),o=bi(),s!==null&&(sh(s,1,o),Di(s,o))}function Pn(s,o,h){if(s.tag===3)Ty(s,s,h);else for(;o!==null;){if(o.tag===3){Ty(o,s,h);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Gr===null||!Gr.has(d))){s=Ca(h,s),s=ib(o,s,1),o=Kr(o,s,1),s=bi(),o!==null&&(sh(o,1,s),Di(o,s));break}}o=o.return}}function R2(s,o,h){var d=s.pingCache;d!==null&&d.delete(o),o=bi(),s.pingedLanes|=s.suspendedLanes&h,_n===s&&(ii&h)===h&&(Hn===4||Hn===3&&(ii&130023424)===ii&&500>Ln()-fp?yo(s,0):dp|=h),Di(s,o)}function Cb(s,o){o===0&&(s.mode&1?(o=Lh,Lh<<=1,!(Lh&130023424)&&(Lh=4194304)):o=1);var h=bi();s=yr(s,o),s!==null&&(sh(s,o,h),Di(s,h))}function I2(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),Cb(s,h)}function B2(s,o){var h=0;switch(s.tag){case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(h=g.retryLane);break;case 19:d=s.stateNode;break;default:throw Error($t(314))}d!==null&&d.delete(o),Cb(s,h)}var kb;kb=function(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps||Li.current)Ai=!0;else{if(!(s.lanes&h)&&!(o.flags&128))return Ai=!1,k2(s,o,h);Ai=!!(s.flags&131072)}else Ai=!1,dn&&o.flags&1048576&&Tx(o,Ru,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;hu(s,o),s=o.pendingProps;var g=xa(o,pi.current);fa(o,h),g=op(null,o,d,s,g,h);var x=ap();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ei(d)?(x=!0,Ou(o)):x=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,ep(o),g.updater=pc,o.stateNode=g,g._reactInternals=o,cg(o,d,s,h),o=gg(null,o,d,!0,x,h)):(o.tag=0,dn&&x&&Wm(o),vi(null,o,g,h),o=o.child),o;case 16:d=o.elementType;t:{switch(hu(s,o),s=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=z2(d),s=Es(d,s),g){case 0:o=fg(null,o,d,s,h);break t;case 1:o=vy(null,o,d,s,h);break t;case 11:o=py(null,o,d,s,h);break t;case 14:o=yy(null,o,d,Es(d.type,s),h);break t}throw Error($t(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Es(d,g),fg(s,o,d,g,h);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Es(d,g),vy(s,o,d,g,h);case 3:t:{if(ab(o),s===null)throw Error($t(387));d=o.pendingProps,x=o.memoizedState,g=x.element,Fx(s,o),ju(o,d,null,h);var S=o.memoizedState;if(d=S.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){g=Ca(Error($t(423)),o),o=xy(s,o,d,h,g);break t}else if(d!==g){g=Ca(Error($t(424)),o),o=xy(s,o,d,h,g);break t}else for(Wi=Ur(o.stateNode.containerInfo.firstChild),Ji=o,dn=!0,Rs=null,h=Dx(o,null,d,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ba(),d===g){o=vr(s,o,h);break t}vi(s,o,d,h)}o=o.child}return o;case 5:return Rx(o),s===null&&lg(o),d=o.type,g=o.pendingProps,x=s!==null?s.memoizedProps:null,S=g.children,ig(d,g)?S=null:x!==null&&ig(d,x)&&(o.flags|=32),ob(s,o),vi(s,o,S,h),o.child;case 6:return s===null&&lg(o),null;case 13:return lb(s,o,h);case 4:return np(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=wa(o,null,d,h):vi(s,o,d,h),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Es(d,g),py(s,o,d,g,h);case 7:return vi(s,o,o.pendingProps,h),o.child;case 8:return vi(s,o,o.pendingProps.children,h),o.child;case 12:return vi(s,o,o.pendingProps.children,h),o.child;case 10:t:{if(d=o.type._context,g=o.pendingProps,x=o.memoizedProps,S=g.value,en(Iu,d._currentValue),d._currentValue=S,x!==null)if(Vs(x.value,S)){if(x.children===g.children&&!Li.current){o=vr(s,o,h);break t}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var P=x.dependencies;if(P!==null){S=x.child;for(var M=P.firstContext;M!==null;){if(M.context===d){if(x.tag===1){M=fr(-1,h&-h),M.tag=2;var O=x.updateQueue;if(O!==null){O=O.shared;var L=O.pending;L===null?M.next=M:(M.next=L.next,L.next=M),O.pending=M}}x.lanes|=h,M=x.alternate,M!==null&&(M.lanes|=h),hg(x.return,h,o),P.lanes|=h;break}M=M.next}}else if(x.tag===10)S=x.type===o.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error($t(341));S.lanes|=h,P=S.alternate,P!==null&&(P.lanes|=h),hg(S,h,o),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===o){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}vi(s,o,g.children,h),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,fa(o,h),g=ms(g),d=d(g),o.flags|=1,vi(s,o,d,h),o.child;case 14:return d=o.type,g=Es(d,o.pendingProps),g=Es(d.type,g),yy(s,o,d,g,h);case 15:return sb(s,o,o.type,o.pendingProps,h);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Es(d,g),hu(s,o),o.tag=1,Ei(d)?(s=!0,Ou(o)):s=!1,fa(o,h),eb(o,d,g),cg(o,d,g,h),gg(null,o,d,!0,s,h);case 19:return hb(s,o,h);case 22:return rb(s,o,h)}throw Error($t(156,o.tag))};function Pb(s,o){return Q1(s,o)}function j2(s,o,h,d){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(s,o,h,d){return new j2(s,o,h,d)}function yp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function z2(s){if(typeof s=="function")return yp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Im)return 11;if(s===Bm)return 14}return 2}function Yr(s,o){var h=s.alternate;return h===null?(h=fs(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function du(s,o,h,d,g,x){var S=2;if(d=s,typeof s=="function")yp(s)&&(S=1);else if(typeof s=="string")S=5;else t:switch(s){case qo:return vo(h.children,g,x,o);case Rm:S=8,g|=8;break;case Rf:return s=fs(12,h,o,g|2),s.elementType=Rf,s.lanes=x,s;case If:return s=fs(13,h,o,g),s.elementType=If,s.lanes=x,s;case Bf:return s=fs(19,h,o,g),s.elementType=Bf,s.lanes=x,s;case R1:return xc(h,g,x,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O1:S=10;break t;case F1:S=9;break t;case Im:S=11;break t;case Bm:S=14;break t;case Lr:S=16,d=null;break t}throw Error($t(130,s==null?s:typeof s,""))}return o=fs(S,h,o,g),o.elementType=s,o.type=d,o.lanes=x,o}function vo(s,o,h,d){return s=fs(7,s,d,o),s.lanes=h,s}function xc(s,o,h,d){return s=fs(22,s,d,o),s.elementType=R1,s.lanes=h,s.stateNode={isHidden:!1},s}function Qd(s,o,h){return s=fs(6,s,null,o),s.lanes=h,s}function _d(s,o,h){return o=fs(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function V2(s,o,h,d,g){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Od(0),this.expirationTimes=Od(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Od(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function vp(s,o,h,d,g,x,S,P,M){return s=new V2(s,o,h,P,M),o===1?(o=1,x===!0&&(o|=8)):o=0,x=fs(3,null,null,o),s.current=x,x.stateNode=s,x.memoizedState={element:d,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},ep(x),s}function $2(s,o,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wo,key:d==null?null:""+d,children:s,containerInfo:o,implementation:h}}function Mb(s){if(!s)return qr;s=s._reactInternals;t:{if(To(s)!==s||s.tag!==1)throw Error($t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Ei(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error($t(171))}if(s.tag===1){var h=s.type;if(Ei(h))return Mx(s,h,o)}return o}function Nb(s,o,h,d,g,x,S,P,M){return s=vp(h,d,!0,s,g,x,S,P,M),s.context=Mb(null),h=s.current,d=bi(),g=Xr(h),x=fr(d,g),x.callback=o??null,Kr(h,x,g),s.current.lanes=g,sh(s,g,d),Di(s,d),s}function bc(s,o,h,d){var g=o.current,x=bi(),S=Xr(g);return h=Mb(h),o.context===null?o.context=h:o.pendingContext=h,o=fr(x,S),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=Kr(g,o,S),s!==null&&(Bs(s,g,S,x),ou(s,g,S)),S}function Xu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Ay(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function xp(s,o){Ay(s,o),(s=s.alternate)&&Ay(s,o)}function H2(){return null}var Tb=typeof reportError=="function"?reportError:function(s){console.error(s)};function bp(s){this._internalRoot=s}wc.prototype.render=bp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error($t(409));bc(s,o,null,null)};wc.prototype.unmount=bp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;ko(function(){bc(null,s,null,null)}),o[pr]=null}};function wc(s){this._internalRoot=s}wc.prototype.unstable_scheduleHydration=function(s){if(s){var o=rx();s={blockedOn:null,target:s,priority:o};for(var h=0;h<Or.length&&o!==0&&o<Or[h].priority;h++);Or.splice(h,0,s),h===0&&ax(s)}};function wp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Sc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Ly(){}function U2(s,o,h,d,g){if(g){if(typeof d=="function"){var x=d;d=function(){var O=Xu(S);x.call(O)}}var S=Nb(o,d,s,0,null,!1,!1,"",Ly);return s._reactRootContainer=S,s[pr]=S.current,Fl(s.nodeType===8?s.parentNode:s),ko(),S}for(;g=s.lastChild;)s.removeChild(g);if(typeof d=="function"){var P=d;d=function(){var O=Xu(M);P.call(O)}}var M=vp(s,0,!1,null,null,!1,!1,"",Ly);return s._reactRootContainer=M,s[pr]=M.current,Fl(s.nodeType===8?s.parentNode:s),ko(function(){bc(o,M,h,d)}),M}function Cc(s,o,h,d,g){var x=h._reactRootContainer;if(x){var S=x;if(typeof g=="function"){var P=g;g=function(){var M=Xu(S);P.call(M)}}bc(o,S,s,g)}else S=U2(h,o,s,g,d);return Xu(S)}ix=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var h=al(o.pendingLanes);h!==0&&(Vm(o,h|1),Di(o,Ln()),!(Oe&6)&&(ka=Ln()+500,Qr()))}break;case 13:ko(function(){var d=yr(s,1);if(d!==null){var g=bi();Bs(d,s,1,g)}}),xp(s,1)}};$m=function(s){if(s.tag===13){var o=yr(s,134217728);if(o!==null){var h=bi();Bs(o,s,134217728,h)}xp(s,134217728)}};sx=function(s){if(s.tag===13){var o=Xr(s),h=yr(s,o);if(h!==null){var d=bi();Bs(h,s,o,d)}xp(s,o)}};rx=function(){return Ue};ox=function(s,o){var h=Ue;try{return Ue=s,o()}finally{Ue=h}};Yf=function(s,o,h){switch(o){case"input":if(Vf(s,h),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var d=h[o];if(d!==s&&d.form===s.form){var g=fc(d);if(!g)throw Error($t(90));B1(d),Vf(d,g)}}}break;case"textarea":z1(s,h);break;case"select":o=h.value,o!=null&&ha(s,!!h.multiple,o,!1)}};X1=gp;Y1=ko;var K2={usingClientEntryPoint:!1,Events:[oh,_o,fc,K1,G1,gp]},tl={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G2={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=J1(s),s===null?null:s.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||H2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{hc=$h.inject(G2),_s=$h}catch{}}_i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K2;_i.createPortal=function(s,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wp(o))throw Error($t(200));return $2(s,o,null,h)};_i.createRoot=function(s,o){if(!wp(s))throw Error($t(299));var h=!1,d="",g=Tb;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=vp(s,1,!1,null,null,h,!1,d,g),s[pr]=o.current,Fl(s.nodeType===8?s.parentNode:s),new bp(o)};_i.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error($t(188)):(s=Object.keys(s).join(","),Error($t(268,s)));return s=J1(o),s=s===null?null:s.stateNode,s};_i.flushSync=function(s){return ko(s)};_i.hydrate=function(s,o,h){if(!Sc(o))throw Error($t(200));return Cc(null,s,o,!0,h)};_i.hydrateRoot=function(s,o,h){if(!wp(s))throw Error($t(405));var d=h!=null&&h.hydratedSources||null,g=!1,x="",S=Tb;if(h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onRecoverableError!==void 0&&(S=h.onRecoverableError)),o=Nb(o,null,s,1,h??null,g,!1,x,S),s[pr]=o.current,Fl(s),d)for(s=0;s<d.length;s++)h=d[s],g=h._getVersion,g=g(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,g]:o.mutableSourceEagerHydrationData.push(h,g);return new wc(o)};_i.render=function(s,o,h){if(!Sc(o))throw Error($t(200));return Cc(null,s,o,!1,h)};_i.unmountComponentAtNode=function(s){if(!Sc(s))throw Error($t(40));return s._reactRootContainer?(ko(function(){Cc(null,null,s,!1,function(){s._reactRootContainer=null,s[pr]=null})}),!0):!1};_i.unstable_batchedUpdates=gp;_i.unstable_renderSubtreeIntoContainer=function(s,o,h,d){if(!Sc(h))throw Error($t(200));if(s==null||s._reactInternals===void 0)throw Error($t(38));return Cc(s,o,h,!1,d)};_i.version="18.3.1-next-f1338f8080-20240426";function Ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ab)}catch(s){console.error(s)}}Ab(),A1.exports=_i;var Zs=A1.exports;const Mg=Nm(Zs),X2=y1({__proto__:null,default:Mg},[Zs]);var Lb,Ey=Zs;Lb=Ey.createRoot,Ey.hydrateRoot;(function(){const s=typeof globalThis=="object"&&globalThis||typeof global=="object"&&global.global===global&&global||typeof self=="object"&&self.self===self&&self||{};s.requestAnimationFrame===void 0&&(s.setImmediate===void 0?s.requestAnimationFrame=A=>s.setTimeout(A,0):s.requestAnimationFrame=s.setImmediate);const fn=class fn{static Nk(e,t,n){let i=-1;return function(){const r=this,a=arguments;i!==-1&&fn.Eg(i),i=fn.Oh(()=>{i=-1,n||e.apply(r,a)},t),n&&!i&&e.apply(r,a)}}static Oh(e,t){return s.setTimeout(e,t)}static Eg(e){s.clearTimeout(e)}static en(e){return s.document.createElement(e)}static o(e){throw new Error(e)}static T(e,t){let n="The object is frozen, so its properties cannot be set: "+e.toString();t!==void 0&&(n+="  to value: "+t),fn.o(n)}static qI(e,t,n,i){}static i(e,t,n,i){}static WI(e,t,n){}static JI(e,t,n){}static we(e,t,n,i){}static _(e,t,n,i){let r=fn.ND(n);i!==void 0&&(r+="."+i),fn.o(r+" is not in the range "+t+": "+e)}static ve(e){}static lr(e,t){}static ii(e){s.console&&s.console.log(e)}static wt(e){return typeof e=="object"&&e!==null}static $I(e,t,n){}static su(e,t,n){Array.isArray(e)?t>=e.length?e.push(n):e.splice(t,0,n):fn.o("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+t)}static tc(e,t){Array.isArray(e)?t>=e.length?e.pop():e.splice(t,1):fn.o("Cannot remove an object from an HTMLCollection or NodeList at "+t)}static nt(){const e=fn.Ck.pop();return e===void 0?[]:e}static tt(e){e.length=0,fn.Ck.push(e)}static ND(e){return e===null?"*":typeof e=="string"?e:typeof e=="function"?e.name:""}static sn(e){return typeof e=="function"?e.className?e.className:e.name:fn.wt(e)&&e.constructor?fn.sn(e.constructor):typeof e}static Ih(e,t){return t==null||t===""?null:fn.wt(e)&&t in e||e[t]?e[t]:null}static toString(e){let t=e;return fn.wt(e)&&(e.text?t=e.text:e.name?t=e.name:e.key!==void 0?t=e.key:e.id!==void 0?t=e.id:e.constructor===Object&&(e.Text?t=e.Text:e.Name?t=e.Name:e.Key!==void 0?t=e.Key:e.Id!==void 0?t=e.Id:e.ID!==void 0&&(t=e.ID))),t===void 0?"undefined":t===null?"null":t.toString()}static fw(e,t){if(e.hasOwnProperty(t))return!0;let n=Object.getPrototypeOf(e);for(;n&&n!==Function;){if(n.hasOwnProperty(t))return!0;const i=n.QI;if(i&&i[t])return!0;n=Object.getPrototypeOf(n)}return!1}static CD(e){const t=[];let n=0;for(n=0;n<256;n++)t[n]=n;let i=0,r=0;for(n=0;n<256;n++)i=(i+t[n]+119)%256,r=t[n],t[n]=t[i],t[i]=r;n=0,i=0;let a="";for(let l=0;l<e.length;l++)n=(n+1)%256,i=(i+t[n])%256,r=t[n],t[n]=t[i],t[i]=r,a+=String.fromCharCode(e.charCodeAt(l)^t[(t[n]+t[i])%256]);return a}static LD(e){const t="0123456789abcdef",n=[];for(let l=0;l<256;l++)n[t.charAt(l>>4)+t.charAt(l&15)]=String.fromCharCode(l);e.length%2&&(e="0"+e);const i=[];let r=0;for(let l=0;l<e.length;l+=2)i[r++]=n[e.substring(l,l+2)];const a=i.join("");return a===""?"0":a}static Cs(e){return fn.CD(fn.LD(e))}};v(fn,"rr",s.navigator!==void 0&&s.navigator.platform!==void 0&&s.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null),v(fn,"Ck",[]),v(fn,"ZI",Object.freeze([])),v(fn,"color1","@COLOR1"),v(fn,"color2","@COLOR2"),v(fn,"uw","32ab5ff3b26f42dc0ed90f21402913b5");let o=fn;o.vfo="29e646fdb265";class h{constructor(){v(this,"Lk");this.Lk=[]}toString(){return this.Lk.join("")}add(e){e!==""&&this.Lk.push(e)}}class d{}const Sh=class Sh{constructor(){v(this,"w");v(this,"key");v(this,"value");this.w=[]}[Symbol.iterator](){return this.w.values()}get iterator(){return this}reset(){}next(){return!1}hasNext(){return!1}first(){return null}any(){return!1}all(){return!0}each(){return this}map(e){return this}filter(){return this}get count(){return 0}dl(){}toString(){return"EmptyIterator"}};v(Sh,"instance",new Sh);let g=Sh;class x{constructor(e){v(this,"key");v(this,"value");this.key=-1,this.value=e}[Symbol.iterator](){return[this.value].values()}get iterator(){return this}reset(){this.key=-1}next(){return this.key===-1?(this.key=0,!0):!1}hasNext(){return this.next()}first(){return this.key=0,this.value}any(e){return this.key=-1,e(this.value)}all(e){return this.key=-1,e(this.value)}each(e){return this.key=-1,e(this.value),this}map(e){return new x(e(this.value))}filter(e){return e(this.value)?new x(this.value):g.instance}get count(){return 1}dl(){this.value=null}toString(){return"SingletonIterator("+this.value+")"}}class S{constructor(e){v(this,"qt");v(this,"Ls");v(this,"Yt");v(this,"Dt");v(this,"key");v(this,"value");this.qt=e,this.Ls=null,e.hr=null,this.Yt=e.ht,this.Dt=-1}[Symbol.iterator](){return this.Ls===null?this.qt.r.values():this.qt.r.filter(this.Ls).values()}get iterator(){return this}get predicate(){return this.Ls}set predicate(e){this.Ls=e}reset(){const e=this.qt;e.hr=null,this.Yt=e.ht,this.Dt=-1}next(){const e=this.qt;if(e.ht!==this.Yt&&this.key<0)return!1;const t=e.r,n=t.length;let i=++this.Dt;const r=this.Ls;if(r!==null)for(;i<n;){const a=t[i];if(r(a))return this.Dt=i,this.key=i,this.value=a,!0;i++}else{if(i<n)return this.key=i,this.value=t[i],!0;this.dl()}return!1}hasNext(){return this.next()}first(){const e=this.qt;this.Yt=e.ht,this.Dt=0;const t=e.r,n=t.length,i=this.Ls;if(i!==null){let r=0;for(;r<n;){const a=t[r];if(i(a))return this.Dt=r,this.key=r,this.value=a,a;r++}return null}else if(n>0){const r=t[0];return this.key=0,this.value=r,r}else return null}any(e){const t=this.qt;t.hr=null;const n=t.ht;this.Dt=-1;const i=t.r,r=i.length,a=this.Ls;for(let l=0;l<r;l++){const u=i[l];if(!(a!==null&&!a(u))){if(e(u))return!0;t.ht!==n&&o.ve(t)}}return!1}all(e){const t=this.qt;t.hr=null;const n=t.ht;this.Dt=-1;const i=t.r,r=i.length,a=this.Ls;for(let l=0;l<r;l++){const u=i[l];if(!(a!==null&&!a(u))){if(!e(u))return!1;t.ht!==n&&o.ve(t)}}return!0}each(e){const t=this.qt;t.hr=null;const n=t.ht;this.Dt=-1;const i=t.r,r=i.length,a=this.Ls;for(let l=0;l<r;l++){const u=i[l];a!==null&&!a(u)||(e(u),t.ht!==n&&o.ve(t))}return this}map(e){const t=this.qt;t.hr=null;const n=t.ht;this.Dt=-1;const i=[],r=t.r,a=r.length,l=this.Ls;for(let c=0;c<a;c++){const f=r[c];l!==null&&!l(f)||(i.push(e(f)),t.ht!==n&&o.ve(t))}const u=new M;return u.r=i,u.Oe(),u.iterator}filter(e){const t=this.qt;t.hr=null;const n=t.ht;this.Dt=-1;const i=[],r=t.r,a=r.length,l=this.Ls;for(let c=0;c<a;c++){const f=r[c];l!==null&&!l(f)||(e(f)&&i.push(f),t.ht!==n&&o.ve(t))}const u=new M;return u.r=i,u.Oe(),u.iterator}get count(){const e=this.Ls;if(e!==null){let t=0;const n=this.qt.r,i=n.length;for(let r=0;r<i;r++)e(n[r])&&t++;return t}else return this.qt.r.length}dl(){this.key=-1,this.value=null,this.Yt=-1,this.Ls=null,this.qt.hr=this}toString(){return"ListIterator@"+this.Dt+"/"+this.qt.count}}class P{constructor(e){v(this,"qt");v(this,"Yt");v(this,"Dt");v(this,"key");v(this,"value");this.qt=e,e.ar=null,this.Yt=e.ht,this.Dt=e.r.length}[Symbol.iterator](){return this.qt.r.reverse().values()}get iterator(){return this}reset(){const e=this.qt;e.ar=null,this.Yt=e.ht,this.Dt=e.r.length}next(){const e=this.qt;if(e.ht!==this.Yt&&this.key<0)return!1;const t=--this.Dt;return t>=0?(this.key=t,this.value=e.r[t],!0):(this.dl(),!1)}hasNext(){return this.next()}first(){const e=this.qt;this.Yt=e.ht;const t=e.r,n=t.length-1;if(this.Dt=n,n>=0){const i=t[n];return this.key=n,this.value=i,i}else return null}any(e){const t=this.qt;t.ar=null;const n=t.ht,i=t.r,r=i.length;this.Dt=r;for(let a=r-1;a>=0;a--){const l=i[a];if(e(l))return!0;t.ht!==n&&o.ve(t)}return!1}all(e){const t=this.qt;t.ar=null;const n=t.ht,i=t.r,r=i.length;this.Dt=r;for(let a=r-1;a>=0;a--){const l=i[a];if(!e(l))return!1;t.ht!==n&&o.ve(t)}return!0}each(e){const t=this.qt;t.ar=null;const n=t.ht,i=t.r,r=i.length;this.Dt=r;for(let a=r-1;a>=0;a--){const l=i[a];e(l),t.ht!==n&&o.ve(t)}return this}map(e){const t=this.qt;t.ar=null;const n=t.ht,i=[],r=t.r,a=r.length;this.Dt=a;for(let u=a-1;u>=0;u--){const c=r[u];i.push(e(c)),t.ht!==n&&o.ve(t)}const l=new M;return l.r=i,l.Oe(),l.iterator}filter(e){const t=this.qt;t.ar=null;const n=t.ht,i=[],r=t.r,a=r.length;this.Dt=a;for(let u=a-1;u>=0;u--){const c=r[u];e(c)&&i.push(c),t.ht!==n&&o.ve(t)}const l=new M;return l.r=i,l.Oe(),l.iterator}get count(){return this.qt.r.length}dl(){this.key=-1,this.value=null,this.Yt=-1,this.qt.ar=this}toString(){return"ListIteratorBackwards("+this.Dt+"/"+this.qt.count+")"}}class M{constructor(e){v(this,"h");v(this,"r");v(this,"ht");v(this,"hr");v(this,"ar");L.Gi(this),this.h=!1,this.r=[],this.ht=0,this.hr=null,this.ar=null,e!==void 0&&this.addAll(e)}[Symbol.iterator](){return this.r.values()}Oe(){let e=this.ht;e++,e>999999999&&(e=0),this.ht=e}g(){return this.h=!0,this}ot(){return this.h=!1,this}toString(){return"List()#"+L.as(this)}add(e){return this.h&&o.T(this,e),this.r.push(e),this.Oe(),this}push(e){this.add(e)}addAll(e){if(e===null)return this;this.h&&o.T(this);const t=this.r;if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;i++){const r=e[i];t.push(r)}}else{const n=e.iterator;for(;n.next();){const i=n.value;t.push(i)}}return this.Oe(),this}clear(){this.h&&o.T(this),this.r.length=0,this.Oe()}contains(e){return this.has(e)}has(e){return e===null?!1:this.r.indexOf(e)!==-1}indexOf(e){return e===null?-1:this.r.indexOf(e)}elt(e){const t=this.r;return(e<0||e>=t.length)&&o._(e,"0 <= i < length",M,"elt:i"),t[e]}get(e){return this.elt(e)}setElt(e,t){const n=this.r;(e<0||e>=n.length)&&o._(e,"0 <= i < length",M,"setElt:i"),this.h&&o.T(this,e),n[e]=t}set(e,t){this.setElt(e,t)}first(){const e=this.r;return e.length===0?null:e[0]}last(){const e=this.r,t=e.length;return t>0?e[t-1]:null}pop(){this.h&&o.T(this);const e=this.r;return e.length>0?e.pop():null}any(e){const t=this.r,n=this.ht,i=t.length;for(let r=0;r<i;r++){if(e(t[r]))return!0;this.ht!==n&&o.ve(this)}return!1}all(e){const t=this.r,n=this.ht,i=t.length;for(let r=0;r<i;r++){if(!e(t[r]))return!1;this.ht!==n&&o.ve(this)}return!0}each(e){const t=this.r,n=this.ht,i=t.length;for(let r=0;r<i;r++)e(t[r]),this.ht!==n&&o.ve(this);return this}map(e){const t=new M,n=[],i=this.r,r=this.ht,a=i.length;for(let l=0;l<a;l++)n.push(e(i[l])),this.ht!==r&&o.ve(this);return t.r=n,t.Oe(),t}filter(e){const t=new M,n=[],i=this.r,r=this.ht,a=i.length;for(let l=0;l<a;l++){const u=i[l];e(u)&&n.push(u),this.ht!==r&&o.ve(this)}return t.r=n,t.Oe(),t}insertAt(e,t){e<0&&o._(e,">= 0",M,"insertAt:i"),this.h&&o.T(this,e);const n=this.r;e>=n.length?n.push(t):n.splice(e,0,t),this.Oe()}remove(e){return this.delete(e)}delete(e){if(e===null)return!1;this.h&&o.T(this,e);const t=this.r,n=t.indexOf(e);return n===-1?!1:(n===t.length-1?t.pop():t.splice(n,1),this.Oe(),!0)}removeAt(e){const t=this.r;(e<0||e>=t.length)&&o._(e,"0 <= i < length",M,"removeAt:i"),this.h&&o.T(this,e),e===t.length-1?t.pop():t.splice(e,1),this.Oe()}removeRange(e,t){const n=this.r,i=n.length;if(e<0)e=0;else if(e>=i)return this;if(t<0)return this;if(t>=i&&(t=i-1),e>t)return this;this.h&&o.T(this);let r=e,a=t+1;for(;a<i;)n[r++]=n[a++];return n.length=i-(t-e+1),this.Oe(),this}copy(){const e=new M,t=this.r;return t.length>0&&(e.r=Array.prototype.slice.call(t)),e}toArray(){const e=this.r,t=this.count,n=new Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}get WN(){return this.r}toSet(){const e=new L,t=this.r,n=this.count;for(let i=0;i<n;i++)e.add(t[i]);return e}sort(e){return this.h&&o.T(this),this.r.sort(e),this.Oe(),this}sortRange(e,t,n){const i=this.r,r=i.length;t===void 0&&(t=0),n===void 0&&(n=r),this.h&&o.T(this);const a=n-t;if(a<=1)return this;if((t<0||t>=r-1)&&o._(t,"0 <= from < length",M,"sortRange:from"),a===2){const l=i[t],u=i[t+1];return e(l,u)>0&&(i[t]=u,i[t+1]=l,this.Oe()),this}if(t===0)if(n>=r)i.sort(e);else{const l=i.slice(0,n);l.sort(e);for(let u=0;u<n;u++)i[u]=l[u]}else if(n>=r){const l=i.slice(t);l.sort(e);for(let u=t;u<r;u++)i[u]=l[u-t]}else{const l=i.slice(t,n);l.sort(e);for(let u=t;u<n;u++)i[u]=l[u-t]}return this.Oe(),this}reverse(){return this.h&&o.T(this),this.r.reverse(),this.Oe(),this}get count(){return this.r.length}get size(){return this.r.length}get length(){return this.r.length}get iterator(){if(this.r.length<=0)return g.instance;const e=this.hr;return e!==null?(e.reset(),e):new S(this)}get iteratorBackwards(){if(this.r.length<=0)return g.instance;const e=this.ar;return e!==null?(e.reset(),e):new P(this)}}class O{constructor(e){v(this,"ko");v(this,"ei");v(this,"key");v(this,"value");this.ko=e,this.ei=e.w.values()}[Symbol.iterator](){return this.ko.w.values()}get iterator(){return this}reset(){const e=this.ko;this.ei=e.w.values()}next(){const e=this.ei.next();return this.value=e.value,this.key=e.value,!e.done}hasNext(){return this.next()}first(){return this.ko.w.size===0?null:(this.ei=this.ko.w.values(),this.ei.next().value)}any(e){return this.ko.any(e)}all(e){return this.ko.all(e)}each(e){return this.ko.each(e),this}map(e){const t=new M;return this.ko.w.forEach(n=>t.add(e(n))),t.iterator}filter(e){const t=new M;return this.ko.w.forEach(n=>{e(n)&&t.add(n)}),t.iterator}get count(){return this.ko.count}dl(){this.key=null,this.value=null,this.ei=null}toString(){return"SetIterator"}}const or=class or{constructor(e){v(this,"h");v(this,"w");this.h=!1,this.w=new Set,e!==void 0&&this.addAll(e)}[Symbol.iterator](){return this.w.values()}values(){return this.w.values()}g(){return this.h=!0,this}ot(){return this.h=!1,this}toString(){return"Set()#"+or.as(this)}add(e){return e===null?this:(this.w.add(e),this)}addAll(e){if(e===null)return this;if(Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++){const i=e[n];i!==null&&this.w.add(i)}}else{const t=e.iterator;for(;t.next();){const n=t.value;n!==null&&this.w.add(n)}}return this}has(e){return this.w.has(e)}contains(e){return this.has(e)}containsAll(e){if(e===null)return!0;const t=e.iterator;for(;t.next();)if(!this.has(t.value))return!1;return!0}containsAny(e){if(e===null)return!0;const t=e.iterator;for(;t.next();)if(this.has(t.value))return!0;return!1}first(){return this.w.size===0?null:this.w.values().next().value}any(e){for(const t of this.w)if(e(t))return!0;return!1}all(e){for(const t of this.w)if(!e(t))return!1;return!0}each(e){for(const t of this.w)e(t);return this}map(e){const t=new or;for(const n of this.w)t.add(e(n));return t}filter(e){const t=new or;for(const n of this.w)e(n)&&t.add(n);return t}delete(e){return this.h&&o.T(this),this.w.delete(e)}remove(e){return this.delete(e)}removeAll(e){if(e===null)return this;if(this.h&&o.T(this),Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++)this.delete(e[n])}else{const t=e.iterator;for(;t.next();)this.delete(t.value)}return this}retainAll(e){if(e===null)return this;if(this.count===0)return this;this.h&&o.T(this);const t=new or;t.addAll(e);const n=[],i=this.iterator;for(;i.next();){const r=i.value;t.has(r)||n.push(r)}return this.removeAll(n),this}clear(){this.h&&o.T(this),this.w.clear()}copy(){const e=new or;return this.w.forEach(t=>e.add(t)),e}toArray(){return Array.from(this.w)}toList(){const e=new M;return this.w.forEach(t=>e.add(t)),e}get count(){return this.w.size}get size(){return this.w.size}get iterator(){return this.w.size<=0?g.instance:new O(this)}entries(){return this.w.entries()}keys(){return this.w.keys()}forEach(e,t){return this.w.forEach(e,t)}static Gi(e){e.__gohashid=or.nu++}static as(e){return e.__gohashid}};v(or,"nu",1);let L=or;class j{constructor(e){v(this,"Z");v(this,"ei");v(this,"key");v(this,"value");this.Z=e,this.ei=e.w.keys()}[Symbol.iterator](){return this.Z.w.keys()}get iterator(){return this}reset(){const e=this.Z;this.ei=e.w.keys()}next(){const e=this.ei.next();return this.value=e.value,this.key=e.value,!e.done}hasNext(){return this.next()}first(){return this.Z.w.size===0?null:(this.ei=this.Z.w.keys(),this.ei.next().value)}any(e){for(const t of this.Z.w)if(e(t[0]))return!0;return!1}all(e){for(const t of this.Z.w)if(!e(t[0]))return!1;return!0}each(e){for(const t of this.Z.w)e(t[0]);return this}map(e){const t=this.Z,n=new M;for(const i of t.w)n.add(e(i[0]));return n.iterator}filter(e){const t=this.Z,n=new M;for(const i of t.w){const r=i[0];e(r)&&n.add(r)}return n.iterator}get count(){return this.Z.size}dl(){this.key=null,this.value=null,this.ei=null}toString(){return"MapKeySetIterator"}}class V extends L{constructor(t){super();v(this,"Z");L.Gi(this),this.h=!0,this.Z=t}[Symbol.iterator](){return this.w.keys()}values(){return this.w.keys()}g(){return this}ot(){return this}toString(){return"MapKeySet("+this.Z.toString()+")"}add(t){o.o("This Set is read-only: "+this.toString())}has(t){return this.Z.has(t)}contains(t){return this.has(t)}delete(t){o.o("This Set is read-only: "+this.toString())}remove(t){return this.delete(t)}clear(){o.o("This Set is read-only: "+this.toString())}first(){return this.Z.w.size===0?null:this.Z.w.keys().next().value}any(t){for(const n of this.Z.w)if(t(n[0]))return!0;return!1}all(t){for(const n of this.Z.w)if(!t(n[0]))return!1;return!0}each(t){for(const n of this.Z.w)t(n[0]);return this}map(t){const n=new L;for(const i of this.Z.w)n.add(t(i[0]));return n}filter(t){const n=new L;for(const i of this.Z.w){const r=i[0];t(r)&&n.add(r)}return n}copy(){return new V(this.Z)}toSet(){const t=new L,n=this.Z.w;for(const i of n)t.add(i[0]);return t}toArray(){const t=this.Z.w,n=new Array(t.size);let i=0;for(const r of t)n[i]=r[0],i++;return n}toList(){const t=new M,n=this.Z.w;for(const i of n)t.add(i[0]);return t}get count(){return this.Z.size}get size(){return this.Z.size}get iterator(){return this.Z.size<=0?g.instance:new j(this.Z)}}class q{constructor(e){v(this,"Z");v(this,"ei");v(this,"key");v(this,"value");this.Z=e,this.ei=e.w.values()}[Symbol.iterator](){return this.Z.w.values()}get iterator(){return this}reset(){const e=this.Z;this.ei=e.w.values()}next(){const e=this.ei.next();return this.value=e.value,this.key=e.value,!e.done}hasNext(){return this.next()}first(){return this.Z.w.size===0?null:(this.ei=this.Z.w.values(),this.ei.next().value)}any(e){for(const t of this.Z.w)if(e(t[1]))return!0;return!1}all(e){for(const t of this.Z.w)if(!e(t[1]))return!1;return!0}each(e){for(const t of this.Z.w)e(t[1]);return this}map(e){const t=this.Z,n=new M;for(const i of t.w)n.add(e(i[1]));return n.iterator}filter(e){const t=this.Z,n=new M;for(const i of t.w){const r=i[1];e(r)&&n.add(r)}return n.iterator}get count(){return this.Z.size}dl(){this.key=null,this.value=null,this.ei=null}toString(){return"MapValueSetIterator"}}class J{constructor(e,t){v(this,"key");v(this,"value");this.key=e,this.value=t}toString(){return"{"+this.key+":"+this.value+"}"}}class Y{constructor(e){v(this,"Z");v(this,"ei");v(this,"key");v(this,"value");this.Z=e,this.ei=e.w.entries()}[Symbol.iterator](){return this.Z.w.entries()}get iterator(){return this}reset(){const e=this.Z;this.ei=e.w.entries()}next(){const e=this.ei.next();return e.done?(this.key=null,this.value=null,!1):(this.key=e.value[0],this.value=e.value[1],!0)}hasNext(){return this.next()}first(){if(this.Z.w.size===0)return null;this.ei=this.Z.w.entries();const e=this.ei.next().value;return this.key=e[0],this.value=e[1],new J(e[0],e[1])}any(e){return this.Z.any(e)}all(e){return this.Z.all(e)}each(e){return this.Z.each(e),this}map(e){const t=new M;let n=null;return this.Z.w.forEach((i,r)=>{n===null?n=new J(r,i):(n.key=r,n.value=i),t.add(e(n))}),t.iterator}filter(e){const t=new M;let n=null;return this.Z.w.forEach((i,r)=>{n===null?n=new J(r,i):(n.key=r,n.value=i),e(n)&&(t.add(n),n=null)}),t.iterator}get count(){return this.Z.size}dl(){this.key=null,this.value=null,this.ei=null}toString(){return"MapIterator"}}class W{constructor(e){v(this,"h");v(this,"w");L.Gi(this),this.h=!1,this.w=new Map,e!==void 0&&this.addAll(e)}[Symbol.iterator](){return this.w.entries()}entries(){return this.w.entries()}g(){return this.h=!0,this}ot(){return this.h=!1,this}toString(){return"Map()#"+L.as(this)}set(e,t){return this.h&&o.T(this,e),this.w.set(e,t),this}add(e,t){return this.set(e,t)}addAll(e){if(e===null)return this;if(this.h&&o.T(this),Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++){const i=e[n];this.set(i.key,i.value)}}else if(e instanceof W){const t=e.iterator;for(;t.next();)this.set(t.key,t.value)}else{const t=e.iterator;for(;t.next();){const n=t.value;this.set(n.key,n.value)}}return this}first(){if(this.w.size===0)return null;const e=this.w.entries().next().value;return new J(e[0],e[1])}any(e){let t=null;for(const[n,i]of this.w)if(t===null?t=new J(n,i):(t.key=n,t.value=i),e(t))return!0;return!1}all(e){let t=null;for(const[n,i]of this.w)if(t===null?t=new J(n,i):(t.key=n,t.value=i),!e(t))return!1;return!0}each(e){let t=null;for(const[n,i]of this.w)t===null?t=new J(n,i):(t.key=n,t.value=i),e(t);return this}map(e){const t=new W;let n=null;for(const[i,r]of this.w)n===null?n=new J(i,r):(n.key=i,n.value=r),t.set(i,e(n));return t}filter(e){const t=new W;let n=null;for(const[i,r]of this.w)n===null?n=new J(i,r):(n.key=i,n.value=r),e(n)&&t.set(i,r);return t}has(e){return this.w.has(e)}contains(e){return this.has(e)}get(e){const t=this.w.get(e);return t===void 0?null:t}getValue(e){return this.get(e)}delete(e){return e===null?!1:(this.h&&o.T(this,e),this.w.delete(e))}remove(e){return this.delete(e)}clear(){this.h&&o.T(this),this.w.clear()}copy(){const e=new W;return e.w=new Map(this.w),e}toArray(){const e=this.w,t=new Array(e.size);let n=0;for(const i of e)t[n]=new J(i[0],i[1]),n++;return t}toKeySet(){return new V(this)}get count(){return this.w.size}get size(){return this.w.size}get iterator(){return this.w.size<=0?g.instance:new Y(this)}get iteratorKeys(){return this.count<=0?g.instance:new j(this)}keys(){return this.w.keys()}get iteratorValues(){return this.count<=0?g.instance:new q(this)}values(){return this.w.values()}forEach(e,t){return this.w.forEach(e,t)}}const Cn=class Cn{constructor(e,t){v(this,"b");v(this,"k");v(this,"h");e===void 0?(this.b=0,this.k=0):typeof e=="number"&&typeof t=="number"?(this.b=e,this.k=t):o.o("Invalid arguments to Point constructor: "+e+", "+t),this.h=!1}a(e){return this.b=e.b,this.k=e.k,this}e(e,t){return this.b=e,this.k=t,this}setTo(e,t){return this.b=e,this.k=t,this}set(e){return this.b=e.b,this.k=e.k,this}copy(){const e=new Cn;return e.b=this.b,e.k=this.k,e}it(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h=!0,this}ot(){return Object.isFrozen(this)&&o.o("cannot thaw constant: "+this),this.h=!1,this}dw(e){}static parse(e){if(typeof e=="string"){const t=e.split(" ");let n=0,i=0;for(;t[n]==="";)n++;let r=t[n++];r&&(i=parseFloat(r));let a=0;for(;t[n]==="";)n++;return r=t[n++],r&&(a=parseFloat(r)),new Cn(i,a)}else return new Cn}static stringify(e){return e.x.toString()+" "+e.y.toString()}static stringifyFixed(e){return t=>t.x.toFixed(e)+" "+t.y.toFixed(e)}toString(){return"Point("+this.x+","+this.y+")"}equals(e){return e instanceof Cn?this.b===e.x&&this.k===e.y:!1}equalTo(e,t){return this.b===e&&this.k===t}equalsApprox(e){return R.u(this.b,e.x)&&R.u(this.k,e.y)}add(e){return this.b+=e.x,this.k+=e.y,this}subtract(e){return this.b-=e.x,this.k-=e.y,this}offset(e,t){return this.b+=e,this.k+=t,this}rotate(e){if(e===0)return this;const t=this.b,n=this.k;if(t===0&&n===0)return this;let i=0,r=0;if(e>=360?e-=360:e<0&&(e+=360),e===90)i=0,r=1;else if(e===180)i=-1,r=0;else if(e===270)i=0,r=-1;else{const a=e*Math.PI/180;i=Math.cos(a),r=Math.sin(a)}return this.b=i*t-r*n,this.k=r*t+i*n,this}scale(e,t){return this.b*=e,this.k*=t,this}distanceSquaredPoint(e){const t=e.x-this.b,n=e.y-this.k;return t*t+n*n}distanceSquared(e,t){const n=e-this.b,i=t-this.k;return n*n+i*i}normalize(){const e=this.b,t=this.k,n=Math.sqrt(e*e+t*t);return n>0&&(this.b=e/n,this.k=t/n),this}directionPoint(e){return this.JN(e.x-this.b,e.y-this.k)}direction(e,t){return this.JN(e-this.b,t-this.k)}JN(e,t){if(e===0)return t>0?90:t<0?270:0;if(t===0)return e>0?0:180;{if(isNaN(e)||isNaN(t))return 0;let n=Math.atan(Math.abs(t/e))*180/Math.PI;return e<0?t<0?n+=180:n=180-n:t<0&&(n=360-n),n}}static compareWithLineSegment(e,t,n,i,r,a){return R.ou(e,t,n,i,r,a)}compareWithLineSegmentPoint(e,t){return R.ou(e.x,e.y,t.x,t.y,this.x,this.y)}static intersectingLineSegments(e,t,n,i,r,a,l,u){return R.ru(e,t,n,i,r,a,l,u)}projectOntoLineSegment(e,t,n,i){return R.gl(e,t,n,i,this.b,this.k,this),this}projectOntoLineSegmentPoint(e,t){return R.gl(e.x,e.y,t.x,t.y,this.b,this.k,this),this}snapToGrid(e,t,n,i){return R.Bg(this.b,this.k,e,t,n,i,this),this}snapToGridPoint(e,t){return R.Bg(this.b,this.k,e.x,e.y,t.width,t.height,this),this}setRectSpot(e,t){return this.b=e.x+t.x*e.width+t.offsetX,this.k=e.y+t.y*e.height+t.offsetY,this}setSpot(e,t,n,i,r){return this.b=e+r.x*n+r.offsetX,this.k=t+r.y*i+r.offsetY,this}D(e){return e.xt(this),this}Ie(e){return e._e(this),this}static distanceLineSegmentSquared(e,t,n,i,r,a){let l=r-n,u=a-i;const c=l*l+u*u,f=n-e,m=i-t,p=-f*l-m*u;if(p<=0||p>=c)return l=r-e,u=a-t,Math.min(f*f+m*m,l*l+u*u);{const y=l*m-u*f;return y*y/c}}static distanceSquared(e,t,n,i){const r=n-e,a=i-t;return r*r+a*a}static direction(e,t,n,i){const r=n-e,a=i-t;if(r===0)return a>0?90:a<0?270:0;if(a===0)return r>0?0:180;{if(isNaN(r)||isNaN(a))return 0;let l=Math.atan(Math.abs(a/r))*180/Math.PI;return r<0?a<0?l+=180:l=180-l:a<0&&(l=360-l),l}}get x(){return this.b}set x(e){this.b=e}get y(){return this.k}set y(e){this.k=e}isReal(){return isFinite(this.x)&&isFinite(this.y)}static l(){const e=Cn.Tk.pop();return e===void 0?new Cn:e}static X(e,t){const n=Cn.Tk.pop();return n===void 0?new Cn(e,t):(n.x=e,n.y=t,n)}static s(e){Cn.Tk.push(e)}};v(Cn,"Po",new Cn(0,0).it()),v(Cn,"$N",new Cn(-1/0,-1/0).it()),v(Cn,"ZN",new Cn(1/0,1/0).it()),v(Cn,"QN",new Cn(6,6).it()),v(Cn,"Ak",new Cn(NaN,NaN).it()),v(Cn,"Tk",[]);let T=Cn;const tn=class tn{constructor(e,t){v(this,"j");v(this,"H");v(this,"h");e===void 0?(this.j=0,this.H=0):typeof e=="number"&&(e>=0||isNaN(e))&&typeof t=="number"&&(t>=0||isNaN(t))?(this.j=e,this.H=t):o.o("Invalid arguments to Size constructor: "+e+", "+t),this.h=!1}a(e){return this.j=e.j,this.H=e.H,this}e(e,t){return this.j=e,this.H=t,this}setTo(e,t){return this.j=e,this.H=t,this}set(e){return this.j=e.j,this.H=e.H,this}copy(){const e=new tn;return e.j=this.j,e.H=this.H,e}it(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h=!0,this}ot(){return Object.isFrozen(this)&&o.o("cannot thaw constant: "+this),this.h=!1,this}dw(e){}static parse(e){if(typeof e=="string"){const t=e.split(" ");let n=0,i=0;for(;t[n]==="";)n++;let r=t[n++];r&&(i=parseFloat(r));let a=0;for(;t[n]==="";)n++;return r=t[n++],r&&(a=parseFloat(r)),new tn(i,a)}else return new tn}static stringify(e){return e.width.toString()+" "+e.height.toString()}static stringifyFixed(e){return t=>t.width.toFixed(e)+" "+t.height.toFixed(e)}toString(){return"Size("+this.width+","+this.height+")"}equals(e){return e instanceof tn?this.j===e.width&&this.H===e.height:!1}equalTo(e,t){return this.j===e&&this.H===t}equalsApprox(e){return R.u(this.j,e.width)&&R.u(this.H,e.height)}inflate(e,t){const n=this.width+e;this.j=n>=0?n:0;const i=this.height+t;return this.H=i>=0?i:0,this}get width(){return this.j}set width(e){e<0&&o._(e,">= 0",tn,"width"),this.j=e}get height(){return this.H}set height(e){e<0&&o._(e,">= 0",tn,"height"),this.H=e}isReal(){return isFinite(this.width)&&isFinite(this.height)}static l(){const e=tn.eC.pop();return e===void 0?new tn:e}static s(e){tn.eC.push(e)}};v(tn,"lu",new tn(0,0).it()),v(tn,"Dk",new tn(1,1).it()),v(tn,"_N",new tn(6,6).it()),v(tn,"hu",new tn(8,8).it()),v(tn,"tC",new tn(10,10).it()),v(tn,"iC",new tn(1/0,1/0).it()),v(tn,"gw",new tn(NaN,NaN).it()),v(tn,"eC",[]);let B=tn;const Wn=class Wn{constructor(e,t,n,i){v(this,"b");v(this,"k");v(this,"j");v(this,"H");v(this,"h");if(e===void 0)this.b=0,this.k=0,this.j=0,this.H=0;else if(typeof e=="number"&&typeof t=="number"&&typeof n=="number"&&(n>=0||isNaN(n))&&typeof i=="number"&&(i>=0||isNaN(i)))this.b=e,this.k=t,this.j=n,this.H=i;else if(e instanceof T){const r=e.x,a=e.y;if(t instanceof T){const l=t.x,u=t.y;this.b=Math.min(r,l),this.k=Math.min(a,u),this.j=Math.abs(r-l),this.H=Math.abs(a-u)}else t instanceof B?(this.b=r,this.k=a,this.j=t.width,this.H=t.height):o.o("Incorrect second argument supplied to Rect constructor "+t)}else o.o("Invalid arguments to Rect constructor: "+e+", "+t+", "+n+", "+i);this.h=!1}a(e){return this.b=e.b,this.k=e.k,this.j=e.j,this.H=e.H,this}e(e,t,n,i){return this.b=e,this.k=t,this.j=n,this.H=i,this}En(e,t){return this.j=e,this.H=t,this}setTo(e,t,n,i){return this.b=e,this.k=t,this.j=n,this.H=i,this}set(e){return this.b=e.b,this.k=e.k,this.j=e.j,this.H=e.H,this}setPoint(e){return this.b=e.x,this.k=e.y,this}setSize(e){return this.j=e.width,this.H=e.height,this}copy(){const e=new Wn;return e.b=this.b,e.k=this.k,e.j=this.j,e.H=this.H,e}it(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h=!0,this}ot(){return Object.isFrozen(this)&&o.o("cannot thaw constant: "+this),this.h=!1,this}dw(e){}static parse(e){if(typeof e=="string"){const t=e.split(" ");let n=0,i=0;for(;t[n]==="";)n++;let r=t[n++];r&&(i=parseFloat(r));let a=0;for(;t[n]==="";)n++;r=t[n++],r&&(a=parseFloat(r));let l=0;for(;t[n]==="";)n++;r=t[n++],r&&(l=parseFloat(r));let u=0;for(;t[n]==="";)n++;return r=t[n++],r&&(u=parseFloat(r)),new Wn(i,a,l,u)}else return new Wn}static stringify(e){return e.x.toString()+" "+e.y.toString()+" "+e.width.toString()+" "+e.height.toString()}static stringifyFixed(e){return t=>t.x.toFixed(e)+" "+t.y.toFixed(e)+" "+t.width.toFixed(e)+" "+t.height.toFixed(e)}toString(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"}equals(e){return e instanceof Wn?this.b===e.x&&this.k===e.y&&this.j===e.width&&this.H===e.height:!1}equalTo(e,t,n,i){return this.b===e&&this.k===t&&this.j===n&&this.H===i}equalsApprox(e){return R.u(this.b,e.x)&&R.u(this.k,e.y)&&R.u(this.j,e.width)&&R.u(this.H,e.height)}equalsApproxTo(e,t,n,i){return R.u(this.b,e)&&R.u(this.k,t)&&R.u(this.j,n)&&R.u(this.H,i)}equalsApproxClose(e){return R.K(this.b,e.x)&&R.K(this.k,e.y)&&R.K(this.j,e.width)&&R.K(this.H,e.height)}containsPoint(e){return this.b<=e.x&&this.b+this.j>=e.x&&this.k<=e.y&&this.k+this.H>=e.y}containsRect(e){return this.b<=e.x&&e.x+e.width<=this.b+this.j&&this.k<=e.y&&e.y+e.height<=this.k+this.H}contains(e,t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.b<=e&&e+n<=this.b+this.j&&this.k<=t&&t+i<=this.k+this.H}offset(e,t){return this.b+=e,this.k+=t,this}inflate(e,t){return this.mw(t,e,t,e)}addMargin(e){return this.mw(e.top,e.right,e.bottom,e.left)}subtractMargin(e){return this.mw(-e.top,-e.right,-e.bottom,-e.left)}grow(e,t,n,i){return this.mw(e,t,n,i)}mw(e,t,n,i){const r=this.j;t+i<=-r?(this.b+=r/2,this.j=0):(this.b-=i,this.j+=t+i);const a=this.H;return e+n<=-a?(this.k+=a/2,this.H=0):(this.k-=e,this.H+=e+n),this}intersectRect(e){return this.sC(e.x,e.y,e.width,e.height)}intersect(e,t,n,i){return this.sC(e,t,n,i)}sC(e,t,n,i){const r=Math.max(this.b,e),a=Math.max(this.k,t),l=Math.min(this.b+this.j,e+n),u=Math.min(this.k+this.H,t+i);return this.b=r,this.k=a,this.j=Math.max(0,l-r),this.H=Math.max(0,u-a),this}intersectsRect(e){return this.intersects(e.x,e.y,e.width,e.height)}intersects(e,t,n,i){let r=this.j;const a=this.b;if(r!==1/0&&n!==1/0&&(r+=a,n+=e,isNaN(n)||isNaN(r)||a>n||e>r))return!1;let l=this.H;const u=this.k;return!(l!==1/0&&i!==1/0&&(l+=u,i+=t,isNaN(i)||isNaN(l)||u>i||t>l))}intersectsRectPlus(e,t){let n=this.j,i=e.width+t+t;const r=this.b,a=e.x-t;if(n+=r,i+=a,r>i||a>n)return!1;let l=this.H,u=e.height+t+t;const c=this.k,f=e.y-t;return l+=c,u+=f,!(c>u||f>l)}unionPoint(e){return this.unionNoCheck(e.x,e.y,0,0)}unionRect(e){return this.unionNoCheck(e.b,e.k,e.j,e.H)}union(e,t,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.unionNoCheck(e,t,n,i)}unionNoCheck(e,t,n,i){const r=Math.min(this.b,e),a=Math.min(this.k,t),l=Math.max(this.b+this.j,e+n),u=Math.max(this.k+this.H,t+i);return this.b=r,this.k=a,this.j=l-r,this.H=u-a,this}setSpot(e,t,n){return this.b=e-n.offsetX-n.x*this.j,this.k=t-n.offsetY-n.y*this.H,this}static contains(e,t,n,i,r,a,l,u){return l===void 0&&(l=0),u===void 0&&(u=0),e<=r&&r+l<=e+n&&t<=a&&a+u<=t+i}static intersects(e,t,n,i,r,a,l,u){let c=n,f=l;const m=e,p=r;if(c+=m,f+=p,m>f||p>c)return!1;let y=i,w=u;const b=t,C=a;return y+=b,w+=C,!(b>w||C>y)}static intersectsLineSegment(e,t,n,i,r,a,l,u){return R.nC(e,t,n,i,r,a,l,u)}get x(){return this.b}set x(e){this.b=e}get y(){return this.k}set y(e){this.k=e}get width(){return this.j}set width(e){e<0&&o._(e,">= 0",Wn,"width"),this.j=e}get height(){return this.H}set height(e){e<0&&o._(e,">= 0",Wn,"height"),this.H=e}get left(){return this.b}set left(e){this.b=e}get top(){return this.k}set top(e){this.k=e}get right(){return this.b+this.j}set right(e){this.b+=e-(this.b+this.j)}get bottom(){return this.k+this.H}set bottom(e){this.k+=e-(this.k+this.H)}get position(){return new T(this.b,this.k)}set position(e){this.b=e.x,this.k=e.y}get size(){return new B(this.j,this.H)}set size(e){this.j=e.width,this.H=e.height}get center(){return new T(this.b+this.j/2,this.k+this.H/2)}set center(e){this.b=e.x-this.j/2,this.k=e.y-this.H/2}get centerX(){return this.b+this.j/2}set centerX(e){this.b=e-this.j/2}get centerY(){return this.k+this.H/2}set centerY(e){this.k=e-this.H/2}isReal(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)}isEmpty(){return this.width===0&&this.height===0}static l(){const e=Wn.Fk.pop();return e===void 0?new Wn:e}static X(e,t,n,i){const r=Wn.Fk.pop();return r===void 0?new Wn(e,t,n,i):r.e(e,t,n,i)}static s(e){Wn.Fk.push(e)}};v(Wn,"pw",new Wn(0,0,0,0).it()),v(Wn,"AD",new Wn(NaN,NaN,NaN,NaN).it()),v(Wn,"Fk",[]);let I=Wn;const qn=class qn{constructor(e,t,n,i){v(this,"nn");v(this,"on");v(this,"rn");v(this,"ln");v(this,"h");e===void 0?(this.nn=0,this.on=0,this.rn=0,this.ln=0):t===void 0?(t=e,n=e,i=e,this.top=e,this.right=t,this.bottom=n,this.left=i):n===void 0?(n=e,i=t,this.top=e,this.right=t,this.bottom=n,this.left=i):i!==void 0?(this.top=e,this.right=t,this.bottom=n,this.left=i):o.o("Invalid arguments to Margin constructor: "+e+", "+t+", "+n+", "+i),this.h=!1}a(e){return this.nn=e.nn,this.on=e.on,this.rn=e.rn,this.ln=e.ln,this}setTo(e,t,n,i){return this.nn=e,this.on=t,this.rn=n,this.ln=i,this}set(e){return this.nn=e.nn,this.on=e.on,this.rn=e.rn,this.ln=e.ln,this}copy(){const e=new qn;return e.nn=this.nn,e.on=this.on,e.rn=this.rn,e.ln=this.ln,e}it(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h=!0,this}ot(){return Object.isFrozen(this)&&o.o("cannot thaw constant: "+this),this.h=!1,this}dw(e){}static parse(e){if(typeof e=="string"){const t=e.split(" ");let n=0,i=NaN;for(;t[n]==="";)n++;let r=t[n++];if(r&&(i=parseFloat(r)),isNaN(i))return new qn;let a=NaN;for(;t[n]==="";)n++;if(r=t[n++],r&&(a=parseFloat(r)),isNaN(a))return new qn(i);let l=NaN;for(;t[n]==="";)n++;if(r=t[n++],r&&(l=parseFloat(r)),isNaN(l))return new qn(i,a);let u=NaN;for(;t[n]==="";)n++;return r=t[n++],r&&(u=parseFloat(r)),isNaN(u)?new qn(i,a):new qn(i,a,l,u)}else return new qn}static stringify(e){return e.top.toString()+" "+e.right.toString()+" "+e.bottom.toString()+" "+e.left.toString()}static stringifyFixed(e){return t=>t.top.toFixed(e)+" "+t.right.toFixed(e)+" "+t.bottom.toFixed(e)+" "+t.left.toFixed(e)}toString(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"}equals(e){return e instanceof qn?this.nn===e.top&&this.on===e.right&&this.rn===e.bottom&&this.ln===e.left:!1}equalTo(e,t,n,i){return this.nn===e&&this.on===t&&this.rn===n&&this.ln===i}equalsApprox(e){return R.u(this.nn,e.top)&&R.u(this.on,e.right)&&R.u(this.rn,e.bottom)&&R.u(this.ln,e.left)}get top(){return this.nn}set top(e){this.nn=e}get right(){return this.on}set right(e){this.on=e}get bottom(){return this.rn}set bottom(e){this.rn=e}get left(){return this.ln}set left(e){this.ln=e}isReal(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)}static l(){const e=qn.rC.pop();return e===void 0?new qn:e}static s(e){qn.rC.push(e)}};v(qn,"Ug",new qn(0,0,0,0).it()),v(qn,"oC",new qn(2,2,2,2).it()),v(qn,"rC",[]);let tt=qn;const xt=class xt{constructor(e,t,n,i){v(this,"b");v(this,"k");v(this,"As");v(this,"Ts");v(this,"h");e===void 0?(this.b=0,this.k=0,this.As=0,this.Ts=0):(t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=e,this.y=t,this.offsetX=n,this.offsetY=i),this.h=!1}a(e){return this.b=e.b,this.k=e.k,this.As=e.As,this.Ts=e.Ts,this}setTo(e,t,n,i){return this.b=e,this.k=t,this.As=n,this.Ts=i,this}set(e){return this.b=e.b,this.k=e.k,this.As=e.As,this.Ts=e.Ts,this}copy(){const e=new xt;return e.b=this.b,e.k=this.k,e.As=this.As,e.Ts=this.Ts,e}it(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h=!0,this}ot(){return Object.isFrozen(this)&&o.o("cannot thaw constant: "+this),this.h=!1,this}dw(e){}Ee(e){return this.b=NaN,this.k=NaN,this.As=e,this}_I(e,t){(isNaN(e)||e>1||e<0)&&o._(e,"0 <= "+t+" <= 1",xt,t)}tE(e,t){(isNaN(e)||e===1/0||e===-1/0)&&o._(e,"real number, not NaN or Infinity",xt,t)}static parse(e){if(typeof e=="string"){if(e=e.trim(),e==="None")return xt.None;if(e==="TopLeft")return xt.TopLeft;if(e==="Top"||e==="TopCenter"||e==="MiddleTop")return xt.TopCenter;if(e==="TopRight")return xt.TopRight;if(e==="Left"||e==="LeftCenter"||e==="MiddleLeft")return xt.LeftCenter;if(e==="Center")return xt.Center;if(e==="Right"||e==="RightCenter"||e==="MiddleRight")return xt.RightCenter;if(e==="BottomLeft")return xt.BottomLeft;if(e==="Bottom"||e==="BottomCenter"||e==="MiddleBottom")return xt.BottomCenter;if(e==="BottomRight")return xt.BottomRight;if(e==="TopSide")return xt.TopSide;if(e==="LeftSide")return xt.LeftSide;if(e==="RightSide")return xt.RightSide;if(e==="BottomSide")return xt.BottomSide;if(e==="TopBottomSides")return xt.TopBottomSides;if(e==="LeftRightSides")return xt.LeftRightSides;if(e==="TopLeftSides")return xt.TopLeftSides;if(e==="TopRightSides")return xt.TopRightSides;if(e==="BottomLeftSides")return xt.BottomLeftSides;if(e==="BottomRightSides")return xt.BottomRightSides;if(e==="NotTopSide")return xt.NotTopSide;if(e==="NotLeftSide")return xt.NotLeftSide;if(e==="NotRightSide")return xt.NotRightSide;if(e==="NotBottomSide")return xt.NotBottomSide;if(e==="AllSides")return xt.AllSides;if(e==="Default")return xt.Default;const t=e.split(" ");let n=0,i=0;for(;t[n]==="";)n++;let r=t[n++];r!==void 0&&r.length>0&&(i=parseFloat(r));let a=0;for(;t[n]==="";)n++;r=t[n++],r!==void 0&&r.length>0&&(a=parseFloat(r));let l=0;for(;t[n]==="";)n++;r=t[n++],r!==void 0&&r.length>0&&(l=parseFloat(r));let u=0;for(;t[n]==="";)n++;return r=t[n++],r!==void 0&&r.length>0&&(u=parseFloat(r)),new xt(i,a,l,u)}else return new xt}static stringify(e){return e.isSpot()?e.x.toString()+" "+e.y.toString()+" "+e.offsetX.toString()+" "+e.offsetY.toString():e.toString()}static stringifyFixed(e){return t=>t.x.toFixed(e)+" "+t.y.toFixed(e)+" "+t.offsetX.toFixed(e)+" "+t.offsetY.toFixed(e)}toString(){return this.isSpot()?this.As===0&&this.Ts===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.equals(xt.None)?"None":this.equals(xt.TopLeft)?"TopLeft":this.equals(xt.TopCenter)?"Top":this.equals(xt.TopRight)?"TopRight":this.equals(xt.LeftCenter)?"Left":this.equals(xt.Center)?"Center":this.equals(xt.RightCenter)?"Right":this.equals(xt.BottomLeft)?"BottomLeft":this.equals(xt.BottomCenter)?"Bottom":this.equals(xt.BottomRight)?"BottomRight":this.equals(xt.TopSide)?"TopSide":this.equals(xt.LeftSide)?"LeftSide":this.equals(xt.RightSide)?"RightSide":this.equals(xt.BottomSide)?"BottomSide":this.equals(xt.TopBottomSides)?"TopBottomSides":this.equals(xt.LeftRightSides)?"LeftRightSides":this.equals(xt.TopLeftSides)?"TopLeftSides":this.equals(xt.TopRightSides)?"TopRightSides":this.equals(xt.BottomLeftSides)?"BottomLeftSides":this.equals(xt.BottomRightSides)?"BottomRightSides":this.equals(xt.NotTopSide)?"NotTopSide":this.equals(xt.NotLeftSide)?"NotLeftSide":this.equals(xt.NotRightSide)?"NotRightSide":this.equals(xt.NotBottomSide)?"NotBottomSide":this.equals(xt.AllSides)?"AllSides":this.equals(xt.Default)?"Default":"None"}equals(e){return e instanceof xt?(this.b===e.x||isNaN(this.b)&&isNaN(e.x))&&(this.k===e.y||isNaN(this.k)&&isNaN(e.y))&&this.As===e.offsetX&&this.Ts===e.offsetY:!1}opposite(){return new xt(.5-(this.b-.5),.5-(this.k-.5),-this.As,-this.Ts)}includesSide(e){if(!this.isSide())return!1;if(!e.isSide())if(e.equals(xt.Left))e=xt.LeftSide;else if(e.equals(xt.Right))e=xt.RightSide;else if(e.equals(xt.Top))e=xt.TopSide;else if(e.equals(xt.Bottom))e=xt.BottomSide;else return!1;const t=this.Ts,n=e.offsetY;return(t&n)===n}get x(){return this.b}set x(e){this.b=e}get y(){return this.k}set y(e){this.k=e}get offsetX(){return this.As}set offsetX(e){this.As=e}get offsetY(){return this.Ts}set offsetY(e){this.Ts=e}isSpot(){return!isNaN(this.x)&&!isNaN(this.y)}isNoSpot(){return isNaN(this.x)||isNaN(this.y)}isSide(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0}isNone(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0}isDefault(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0}static l(){const e=xt.lC.pop();return e===void 0?new xt:e}static s(e){xt.lC.push(e)}};v(xt,"None",new xt(0,0,0,0).Ee(0).it()),v(xt,"Default",new xt(0,0,-1,0).Ee(-1).it()),v(xt,"TopLeft",new xt(0,0,0,0).it()),v(xt,"TopCenter",new xt(.5,0,0,0).it()),v(xt,"TopRight",new xt(1,0,0,0).it()),v(xt,"LeftCenter",new xt(0,.5,0,0).it()),v(xt,"Center",new xt(.5,.5,0,0).it()),v(xt,"RightCenter",new xt(1,.5,0,0).it()),v(xt,"BottomLeft",new xt(0,1,0,0).it()),v(xt,"BottomCenter",new xt(.5,1,0,0).it()),v(xt,"BottomRight",new xt(1,1,0,0).it()),v(xt,"MiddleTop",xt.TopCenter),v(xt,"MiddleLeft",xt.LeftCenter),v(xt,"MiddleRight",xt.RightCenter),v(xt,"MiddleBottom",xt.BottomCenter),v(xt,"Top",xt.TopCenter),v(xt,"Left",xt.LeftCenter),v(xt,"Right",xt.RightCenter),v(xt,"Bottom",xt.BottomCenter),v(xt,"TopSide",new xt(0,0,1,1).Ee(1).it()),v(xt,"LeftSide",new xt(0,0,1,2).Ee(1).it()),v(xt,"RightSide",new xt(0,0,1,4).Ee(1).it()),v(xt,"BottomSide",new xt(0,0,1,8).Ee(1).it()),v(xt,"TopBottomSides",new xt(0,0,1,9).Ee(1).it()),v(xt,"LeftRightSides",new xt(0,0,1,6).Ee(1).it()),v(xt,"TopLeftSides",new xt(0,0,1,3).Ee(1).it()),v(xt,"TopRightSides",new xt(0,0,1,5).Ee(1).it()),v(xt,"BottomLeftSides",new xt(0,0,1,10).Ee(1).it()),v(xt,"BottomRightSides",new xt(0,0,1,12).Ee(1).it()),v(xt,"NotTopSide",new xt(0,0,1,14).Ee(1).it()),v(xt,"NotLeftSide",new xt(0,0,1,13).Ee(1).it()),v(xt,"NotRightSide",new xt(0,0,1,11).Ee(1).it()),v(xt,"NotBottomSide",new xt(0,0,1,7).Ee(1).it()),v(xt,"AllSides",new xt(0,0,1,15).Ee(1).it()),v(xt,"Rk",new xt(.156,.156).it()),v(xt,"vk",new xt(.844,.844).it()),v(xt,"lC",[]);let z=xt;const Mr=class Mr{constructor(){v(this,"m11");v(this,"m12");v(this,"m21");v(this,"m22");v(this,"dx");v(this,"dy");this.m11=1,this.m12=0,this.m21=0,this.m22=1,this.dx=0,this.dy=0}set(e){return this.m11=e.m11,this.m12=e.m12,this.m21=e.m21,this.m22=e.m22,this.dx=e.dx,this.dy=e.dy,this}setTo(e,t,n,i,r,a){return this.m11=e,this.m12=t,this.m21=n,this.m22=i,this.dx=r,this.dy=a,this}copy(){const e=new Mr;return e.m11=this.m11,e.m12=this.m12,e.m21=this.m21,e.m22=this.m22,e.dx=this.dx,e.dy=this.dy,e}toString(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"}equals(e){return this.m11===e.m11&&this.m12===e.m12&&this.m21===e.m21&&this.m22===e.m22&&this.dx===e.dx&&this.dy===e.dy}Ok(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1}Ri(){return this.m11=1,this.m12=0,this.m21=0,this.m22=1,this.dx=0,this.dy=0,this}ic(e){const t=this.m11*e.m11+this.m21*e.m12,n=this.m12*e.m11+this.m22*e.m12,i=this.m11*e.m21+this.m21*e.m22,r=this.m12*e.m21+this.m22*e.m22;return this.dx=this.m11*e.dx+this.m21*e.dy+this.dx,this.dy=this.m12*e.dx+this.m22*e.dy+this.dy,this.m11=t,this.m12=n,this.m21=i,this.m22=r,this}hC(e){const t=1/(e.m11*e.m22-e.m12*e.m21),n=e.m22*t,i=-e.m12*t,r=-e.m21*t,a=e.m11*t,l=t*(e.m21*e.dy-e.m22*e.dx),u=t*(e.m12*e.dx-e.m11*e.dy),c=this.m11*n+this.m21*i,f=this.m12*n+this.m22*i,m=this.m11*r+this.m21*a,p=this.m12*r+this.m22*a;return this.dx=this.m11*l+this.m21*u+this.dx,this.dy=this.m12*l+this.m22*u+this.dy,this.m11=c,this.m12=f,this.m21=m,this.m22=p,this}yw(){const e=1/(this.m11*this.m22-this.m12*this.m21),t=this.m22*e,n=-this.m12*e,i=-this.m21*e,r=this.m11*e,a=e*(this.m21*this.dy-this.m22*this.dx),l=e*(this.m12*this.dx-this.m11*this.dy);return this.m11=t,this.m12=n,this.m21=i,this.m22=r,this.dx=a,this.dy=l,this}cs(e,t,n){if(e>=360?e-=360:e<0&&(e+=360),e===0)return this;this.Ds(t,n);let i=0,r=0;if(e===90)i=0,r=1;else if(e===180)i=-1,r=0;else if(e===270)i=0,r=-1;else{const f=e*Math.PI/180;i=Math.cos(f),r=Math.sin(f)}const a=this.m11*i+this.m21*r,l=this.m12*i+this.m22*r,u=this.m11*-r+this.m21*i,c=this.m12*-r+this.m22*i;return this.m11=a,this.m12=l,this.m21=u,this.m22=c,this.Ds(-t,-n),this}Ds(e,t){return this.dx+=this.m11*e+this.m21*t,this.dy+=this.m12*e+this.m22*t,this}et(e,t){return t===void 0&&(t=e),this.m11*=e,this.m12*=e,this.m21*=t,this.m22*=t,this}TD(){if(this.m11===1&&this.m12===0)return 0;let e=Math.atan2(this.m12,this.m11)*180/Math.PI;return e<0&&(e+=360),e}xt(e){const t=e.x,n=e.y;return e.e(t*this.m11+n*this.m21+this.dx,t*this.m12+n*this.m22+this.dy)}_e(e){const t=1/(this.m11*this.m22-this.m12*this.m21),n=this.m22*t,i=-this.m12*t,r=-this.m21*t,a=this.m11*t,l=e.x-this.dx,u=e.y-this.dy;return e.e(l*n+u*r,l*i+u*a)}ww(e){const t=1/(this.m11*this.m22-this.m12*this.m21),n=this.m22*t,i=-this.m12*t,r=-this.m21*t,a=this.m11*t,l=t*(this.m21*this.dy-this.m22*this.dx),u=t*(this.m12*this.dx-this.m11*this.dy),c=e.x*1.25,f=e.y*1.2;return e.e(c*n+f*r+l,c*i+f*a+u)}xw(e){const t=e.x,n=e.y,i=t+e.width,r=n+e.height,a=this.m11,l=this.m12,u=this.m21,c=this.m22,f=this.dx,m=this.dy,p=t*a+n*u+f,y=t*l+n*c+m,w=i*a+n*u+f,b=i*l+n*c+m,C=t*a+r*u+f,k=t*l+r*c+m,N=i*a+r*u+f,F=i*l+r*c+m;let D=p,E=p,U=y,$=y;return D=Math.min(D,w),E=Math.max(E,w),U=Math.min(U,b),$=Math.max($,b),D=Math.min(D,C),E=Math.max(E,C),U=Math.min(U,k),$=Math.max($,k),D=Math.min(D,N),E=Math.max(E,N),U=Math.min(U,F),$=Math.max($,F),e.e(D,U,E-D,$-U),e}static l(){const e=Mr.aC.pop();return e===void 0?new Mr:e}static s(e){Mr.aC.push(e)}};v(Mr,"aC",[]),v(Mr,"Ik","54a702f3e53909c447824c6706603faf4c");let nt=Mr;const R={DD:"7da71ca0ad381e90",Bn:4*((Math.sqrt(2)-1)/3),cC:null,bw:A=>{if(A<=0)return 0;let e=R.cC;if(e===null){e=[];for(let t=0;t<=2e3;t++)e[t]=Math.sqrt(t);R.cC=e}if(A<1){const t=1/A;return t<=2e3?1/e[t|0]:Math.sqrt(A)}else return A<=2e3?e[A|0]:Math.sqrt(A)},u:(A,e)=>{const t=A-e;return t<.5&&t>-.5},K:(A,e)=>{const t=A-e;return t<5e-8&&t>-5e-8},vi:(A,e,t,n,i,r,a)=>{i<=0&&(i=1e-6);let l=0,u=0,c=0,f=0;if(A<t?(u=A,l=t):(u=t,l=A),e<n?(f=e,c=n):(f=n,c=e),A===t)return f<=a&&a<=c&&A-i<=r&&r<=A+i;if(e===n)return u<=r&&r<=l&&e-i<=a&&a<=e+i;const m=l+i,p=u-i;if(p<=r&&r<=m){const y=c+i,w=f-i;if(w<=a&&a<=y)if(m-p>y-w)if(A-t>i||t-A>i){const b=(n-e)/(t-A)*(r-A)+e;if(b-i<=a&&a<=b+i)return!0}else return!0;else if(e-n>i||n-e>i){const b=(t-A)/(n-e)*(a-e)+A;if(b-i<=r&&r<=b+i)return!0}else return!0}return!1},kw:(A,e,t,n,i,r,a,l,u,c,f,m)=>{if(!R.vi(A,e,a,l,m,t,n)||!R.vi(A,e,a,l,m,i,r)){const p=(A+t)/2,y=(e+n)/2,w=(t+i)/2,b=(n+r)/2,C=(i+a)/2,k=(r+l)/2,N=(p+w)/2,F=(y+b)/2,D=(w+C)/2,E=(b+k)/2,U=(N+D)/2,$=(F+E)/2;return R.kw(A,e,p,y,N,F,U,$,u,c,f,m)||R.kw(U,$,D,E,C,k,a,l,u,c,f,m)}else return R.vi(A,e,a,l,m,c,f)},fC:(A,e,t,n,i,r,a,l,u)=>{const c=(A+t)/2,f=(e+n)/2,m=(t+i)/2,p=(n+r)/2,y=(i+a)/2,w=(r+l)/2,b=(c+m)/2,C=(f+p)/2,k=(m+y)/2,N=(p+w)/2;return u.e((b+k)/2,(C+N)/2),u},FD:(A,e,t,n,i,r,a,l)=>{const u=(A+t)/2,c=(e+n)/2,f=(t+i)/2,m=(n+r)/2,p=(i+a)/2,y=(r+l)/2,w=(u+f)/2,b=(c+m)/2,C=(f+p)/2,k=(m+y)/2;return T.direction(w,b,C,k)},au:(A,e,t,n,i,r,a,l,u,c)=>{if(!R.vi(A,e,a,l,u,t,n)||!R.vi(A,e,a,l,u,i,r)){const f=(A+t)/2,m=(e+n)/2,p=(t+i)/2,y=(n+r)/2,w=(i+a)/2,b=(r+l)/2,C=(f+p)/2,k=(m+y)/2,N=(p+w)/2,F=(y+b)/2,D=(C+N)/2,E=(k+F)/2;R.au(A,e,f,m,C,k,D,E,u,c),R.au(D,E,N,F,w,b,a,l,u,c)}else c.unionNoCheck(A,e,0,0),c.unionNoCheck(a,l,0,0);return c},Un:(A,e,t,n,i,r,a,l,u,c)=>{if(!R.vi(A,e,a,l,u,t,n)||!R.vi(A,e,a,l,u,i,r)){const f=(A+t)/2,m=(e+n)/2,p=(t+i)/2,y=(n+r)/2,w=(i+a)/2,b=(r+l)/2,C=(f+p)/2,k=(m+y)/2,N=(p+w)/2,F=(y+b)/2,D=(C+N)/2,E=(k+F)/2;R.Un(A,e,f,m,C,k,D,E,u,c),R.Un(D,E,N,F,w,b,a,l,u,c)}else c.length===0&&(c.push(A),c.push(e)),c.push(a),c.push(l);return c},Ek:(A,e,t,n,i,r,a,l,u,c)=>{if(R.vi(A,e,i,r,c,t,n))return R.vi(A,e,i,r,c,l,u);{const f=(A+t)/2,m=(e+n)/2,p=(t+i)/2,y=(n+r)/2,w=(f+p)/2,b=(m+y)/2;return R.Ek(A,e,f,m,w,b,a,l,u,c)||R.Ek(w,b,p,y,i,r,a,l,u,c)}},iE:(A,e,t,n,i,r,a)=>{const l=(A+t)/2,u=(e+n)/2,c=(t+i)/2,f=(n+r)/2;return a.e((l+c)/2,(u+f)/2),a},Bk:(A,e,t,n,i,r,a,l)=>{if(R.vi(A,e,i,r,a,t,n))l.unionNoCheck(A,e,0,0),l.unionNoCheck(i,r,0,0);else{const u=(A+t)/2,c=(e+n)/2,f=(t+i)/2,m=(n+r)/2,p=(u+f)/2,y=(c+m)/2;R.Bk(A,e,u,c,p,y,a,l),R.Bk(p,y,f,m,i,r,a,l)}return l},Vg:(A,e,t,n,i,r,a,l)=>{if(R.vi(A,e,i,r,a,t,n))l.length===0&&(l.push(A),l.push(e)),l.push(i),l.push(r);else{const u=(A+t)/2,c=(e+n)/2,f=(t+i)/2,m=(n+r)/2,p=(u+f)/2,y=(c+m)/2;R.Vg(A,e,u,c,p,y,a,l),R.Vg(p,y,f,m,i,r,a,l)}return l},zg:(A,e,t,n,i,r,a,l,u,c,f,m,p,y)=>{if(!R.vi(A,e,a,l,p,t,n)||!R.vi(A,e,a,l,p,i,r)){const w=(A+t)/2,b=(e+n)/2,C=(t+i)/2,k=(n+r)/2,N=(i+a)/2,F=(r+l)/2,D=(w+C)/2,E=(b+k)/2,U=(C+N)/2,$=(k+F)/2,K=(D+U)/2,_=(E+$)/2;let G=1/0,X=!1,Q=0,Z=0;if(R.zg(A,e,w,b,D,E,K,_,u,c,f,m,p,y)){const et=(y.x-u)*(y.x-u)+(y.y-c)*(y.y-c);et<G&&(G=et,X=!0,Q=y.x,Z=y.y)}if(R.zg(K,_,U,$,N,F,a,l,u,c,f,m,p,y)){const et=(y.x-u)*(y.x-u)+(y.y-c)*(y.y-c);et<G&&(G=et,X=!0,Q=y.x,Z=y.y)}return X&&(y.x=Q,y.y=Z),X}else{if(!R.ru(A,e,a,l,u,c,f,m))return!1;const w=(A-a)*(c-m)-(e-l)*(u-f);if(w===0)return!1;const b=((A*l-e*a)*(u-f)-(A-a)*(u*m-c*f))/w,C=((A*l-e*a)*(c-m)-(e-l)*(u*m-c*f))/w;return y.e(b,C),!0}},Xg:(A,e,t,n,i,r,a,l,u,c,f,m,p)=>{let y=0;if(!R.vi(A,e,a,l,p,t,n)||!R.vi(A,e,a,l,p,i,r)){const w=(A+t)/2,b=(e+n)/2,C=(t+i)/2,k=(n+r)/2,N=(i+a)/2,F=(r+l)/2,D=(w+C)/2,E=(b+k)/2,U=(C+N)/2,$=(k+F)/2,K=(D+U)/2,_=(E+$)/2;y+=R.Xg(A,e,w,b,D,E,K,_,u,c,f,m,p),y+=R.Xg(K,_,U,$,N,F,a,l,u,c,f,m,p)}else{const w=(A-a)*(c-m)-(e-l)*(u-f);if(w===0)return y;const b=((A*l-e*a)*(u-f)-(A-a)*(u*m-c*f))/w,C=((A*l-e*a)*(c-m)-(e-l)*(u*m-c*f))/w;if(b>=f)return y;let k=0,N=0;if((u>f?u-f:f-u)<(c>m?c-m:m-c)){if(e<l?(k=e,N=l):(k=l,N=e),C<k||C>N)return y}else if(A<a?(k=A,N=a):(k=a,N=A),b<k||b>N)return y;w>0?y++:w<0&&y--}return y},gl:(A,e,t,n,i,r,a)=>{if(R.K(A,t)){let l=0,u=0;e<n?(l=e,u=n):(l=n,u=e);const c=r;return c<l?(a.e(A,l),!1):c>u?(a.e(A,u),!1):(a.e(A,c),!0)}else if(R.K(e,n)){let l=0,u=0;A<t?(l=A,u=t):(l=t,u=A);const c=i;return c<l?(a.e(l,e),!1):c>u?(a.e(u,e),!1):(a.e(c,e),!0)}else{const l=(t-A)*(t-A)+(n-e)*(n-e),u=((A-i)*(A-t)+(e-r)*(e-n))/l;if(u<-5e-6)return a.e(A,e),!1;if(u>1.000005)return a.e(t,n),!1;{const c=A+u*(t-A),f=e+u*(n-e);return a.e(c,f),!0}}},Vn:(A,e,t,n,i,r,a,l,u)=>{if(R.u(A,t)&&R.u(e,n))return u.e(A,e),!1;if(R.K(i,a)){if(R.K(A,t))return R.gl(A,e,t,n,i,r,u),!1;{const c=(n-e)/(t-A)*(i-A)+e;return R.gl(A,e,t,n,i,c,u)}}else{const c=(l-r)/(a-i);if(R.K(A,t)){const f=c*(A-i)+r;let m=0,p=0;return e<n?(m=e,p=n):(m=n,p=e),f<m?(u.e(A,m),!1):f>p?(u.e(A,p),!1):(u.e(A,f),!0)}else{const f=(n-e)/(t-A);if(R.K(c,f))return R.gl(A,e,t,n,i,r,u),!1;{const m=(f*A-c*i+r-e)/(f-c);if(R.K(f,0)){let p=0,y=0;return A<t?(p=A,y=t):(p=t,y=A),m<p?(u.e(p,e),!1):m>y?(u.e(y,e),!1):(u.e(m,e),!0)}else{const p=f*(m-A)+e;return R.gl(A,e,t,n,m,p,u)}}}}},eE:(A,e,t,n,i)=>R.Vn(t.x,t.y,n.x,n.y,A.x,A.y,e.x,e.y,i),sE:(A,e,t,n,i,r,a,l,u,c)=>{let f=1/0;function m(U,$){const K=(U-A)*(U-A)+($-e)*($-e);K<f&&(f=K,u.e(U,$))}m(u.x,u.y);let p=0,y=0,w=0,b=0;i<a?(p=i,y=a):(p=a,y=i),r<l?(w=i,b=a):(w=a,b=i);const C=y-p,k=b-w,N=C/2+c,F=k/2+c,D=(i+a)/2,E=(r+l)/2;if(N===0||F===0)return u;if((t>A?t-A:A-t)<.5){const U=1-(t-D)*(t-D)/(N*N);if(U<0)return u;const $=Math.sqrt(U),K=F*$+E,_=-F*$+E;m(t,K),m(t,_)}else{const U=(n-e)/(t-A),$=1/(N*N)+U*U/(F*F),K=2*U*(e-U*A)/(F*F)-2*U*E/(F*F)-2*D/(N*N),_=2*U*A*E/(F*F)-2*e*E/(F*F)+E*E/(F*F)+D*D/(N*N)-1+(e-U*A)*(e-U*A)/(F*F),G=K*K-4*$*_;if(G<0)return u;const X=Math.sqrt(G),Q=(-K+X)/(2*$);m(Q,U*Q-U*A+e);const Z=(-K-X)/(2*$);m(Z,U*Z-U*A+e)}return u},ml:(A,e,t,n,i,r,a,l,u)=>{let c=1e21,f=A,m=e;if(R.Vn(A,e,A,n,i,r,a,l,u)){const p=(u.x-i)*(u.x-i)+(u.y-r)*(u.y-r);p<c&&(c=p,f=u.x,m=u.y)}if(R.Vn(t,e,t,n,i,r,a,l,u)){const p=(u.x-i)*(u.x-i)+(u.y-r)*(u.y-r);p<c&&(c=p,f=u.x,m=u.y)}if(R.Vn(A,e,t,e,i,r,a,l,u)){const p=(u.x-i)*(u.x-i)+(u.y-r)*(u.y-r);p<c&&(c=p,f=u.x,m=u.y)}if(R.Vn(A,n,t,n,i,r,a,l,u)){const p=(u.x-i)*(u.x-i)+(u.y-r)*(u.y-r);p<c&&(c=p,f=u.x,m=u.y)}return u.e(f,m),c<1e21},Pw:(A,e,t)=>R.nC(A.x,A.y,A.width,A.height,e.x,e.y,t.x,t.y),nC:(A,e,t,n,i,r,a,l)=>{const u=A,c=A+t,f=e,m=e+n;if(i===a){let p=0,y=0;return r<l?(p=r,y=l):(p=l,y=r),u<=i&&i<=c&&p<=m&&y>=f}if(r===l){let p=0,y=0;return i<a?(p=i,y=a):(p=a,y=i),f<=r&&r<=m&&p<=c&&y>=u}return!!(I.contains(A,e,t,n,i,r)||I.contains(A,e,t,n,a,l)||R.ru(u,f,c,f,i,r,a,l)||R.ru(c,f,c,m,i,r,a,l)||R.ru(c,m,u,m,i,r,a,l)||R.ru(u,m,u,f,i,r,a,l))},ru:(A,e,t,n,i,r,a,l)=>A===t&&e===n&&i===a&&r===l?A===i&&e===r:R.ou(A,e,t,n,i,r)*R.ou(A,e,t,n,a,l)<=0&&R.ou(i,r,a,l,A,e)*R.ou(i,r,a,l,t,n)<=0,ou:(A,e,t,n,i,r)=>{const a=t-A,l=n-e;let u=i-A,c=r-e,f=u*l-c*a;return f===0&&(f=u*a+c*l,f>0&&(u-=a,c-=l,f=u*a+c*l,f<0&&(f=0))),f},Kg:A=>(A<0&&(A+=360),A>=360&&(A-=360),A),uC:(A,e,t,n,i,r)=>{const a=Math.PI;r||(n=n*(a/180),i=i*(a/180));const l=n>i?-1:1,u=1e-5,c=a*2,f=[],m=a/2;let p=n,y=Math.min(c,Math.abs(i-n));if(y<u){const w=p+l*Math.min(y,m),b=A+t*Math.cos(p),C=e+t*Math.sin(p),k=A+t*Math.cos(w),N=e+t*Math.sin(w),F=(b+k)/2,D=(C+N)/2;return f.push([b,C,F,D,F,D,k,N]),f}for(;y>u;){const w=p+l*Math.min(y,m);f.push(R.RD(t,p,w,A,e)),y-=Math.abs(w-p),p=w}return f},RD:(A,e,t,n,i)=>{const r=(t-e)/2,a=A*Math.cos(r),l=A*Math.sin(r),u=a,c=-l,f=u*u+c*c,m=f+u*a+c*l,p=4/3*(Math.sqrt(2*f*m)-m)/(u*l-c*a),y=u-p*c,w=c+p*u,b=y,C=-w,k=r+e,N=Math.cos(k),F=Math.sin(k);return[n+A*Math.cos(e),i+A*Math.sin(e),n+y*N-w*F,i+y*F+w*N,n+b*N-C*F,i+b*F+C*N,n+A*Math.cos(t),i+A*Math.sin(t)]},Bg:(A,e,t,n,i,r,a)=>{const l=i,u=r,c=Math.floor((A-t)/l)*l+t,f=Math.floor((e-n)/u)*u+n;let m=c;c+l-A<l/2&&(m=c+l);let p=f;return f+u-e<u/2&&(p=f+u),a.e(m,p),a},dC:(A,e)=>{let t=Math.max(A,e),n=Math.min(A,e),i=1,r=1;do i=t%n,r=n,t=n,n=i;while(i>0);return r},vD:(A,e,t,n)=>{const i=t<0,r=n<0;let a=0,l=0,u=0;A<e?(l=1,u=0):(l=0,u=1);let c=0,f=0,m=0,p=0;return a=l,c=a===0?A:e,m=a===0?t:n,(a===0?i:r)&&(m=-m),a=u,f=a===0?A:e,p=a===0?t:n,(a===0?i:r)&&(p=-p),R.OD(c,f,m,p,0,0)},OD:(A,e,t,n,i,r)=>{let a=0;if(n>0)if(t>0){const l=A*A,u=e*e,c=A*t,f=e*n;let m=-u+f,p=-u+Math.sqrt(c*c+f*f),y=m;const w=9999999999;for(let k=0;k<w&&(y=.5*(m+p),!(y===m||y===p));++k){const N=c/(y+l),F=f/(y+u),D=N*N+F*F-1;if(D>0)m=y;else if(D<0)p=y;else break}i=l*t/(y+l),r=u*n/(y+u);const b=i-t,C=r-n;a=Math.sqrt(b*b+C*C)}else i=0,r=e,a=Math.abs(n-e);else{const l=A*A-e*e,u=A*t;if(u<l){const c=u/l,f=c*c;i=A*c,r=e*Math.sqrt(Math.abs(1-f));const m=i-t;a=Math.sqrt(m*m+r*r)}else i=A,r=0,a=Math.abs(t-A)}return a},So:new d,Yg:new d,cr:new d,fr:0,Gg:100};R.za=R.DD;var ot=(A=>(A[A.Line=1]="Line",A[A.Rectangle=2]="Rectangle",A[A.Ellipse=3]="Ellipse",A[A.Path=4]="Path",A))(ot||{}),lt=(A=>(A[A.None=0]="None",A[A.Default=1]="Default",A[A.Fill=2]="Fill",A[A.Uniform=6]="Uniform",A))(lt||{});const jn=class jn{constructor(e){v(this,"n");v(this,"jg");v(this,"Hg");v(this,"ec");v(this,"cu");v(this,"fu");v(this,"zn");v(this,"Xn");v(this,"Kn");v(this,"$");v(this,"xe");v(this,"be");v(this,"Qi");v(this,"_i");v(this,"Fs");v(this,"sc");v(this,"nc");L.Gi(this),this.n=2,e===void 0&&(e=4),this.$=e,this.xe=0,this.be=0,this.Qi=0,this._i=0,e===4?this.Fs=new M:this.Fs=jn.Sw,this.jg=this.Fs.ht,this.Hg=new I().g(),this.ec=null,this.cu=null,this.fu=NaN,this.zn=z.TopLeft,this.Xn=z.BottomRight,this.sc=NaN,this.nc=NaN,this.Kn=2}copy(){const e=new jn;if(e.n=this.n&-2,e.$=this.$,e.xe=this.xe,e.be=this.be,e.Qi=this.Qi,e._i=this._i,this.$===4){const t=this.Fs.r,n=e.Fs;for(let i=0;i<t.length;i++){const r=t[i];n.add(r.copy())}e.Fs=n}else e.Fs=this.Fs;return e.jg=this.jg,e.Hg.a(this.Hg),e.ec=this.ec,e.cu=this.cu,e.fu=this.fu,e.zn=this.zn.N(),e.Xn=this.Xn.N(),e.sc=this.sc,e.nc=this.nc,e.Kn=this.Kn,e}get h(){return(this.n&1)!==0}set h(e){e?this.n|=1:this.n&=-2}get bt(){return(this.n&2)!==0}set bt(e){e?this.n|=2:this.n&=-3}it(){return this.g(),Object.freeze(this),this}g(){if(this.h=!0,this.type!==4)return this;const e=this.figures;e.g();for(const t of e)t.g();return this}ot(){if(Object.isFrozen(this)&&o.o("cannot thaw constant: "+this),this.h=!1,this.type!==4)return this;const e=this.figures;e.ot();for(const t of e)t.ot();return this}equalsApprox(e){if(!(e instanceof jn))return!1;if(this.type!==e.type)return this.type===1&&e.type===4?this.gC(e):e.type===1&&this.type===4?e.gC(this):!1;if(this.type===4){const t=this.figures.r,n=e.figures.r,i=t.length;if(i!==n.length)return!1;for(let r=0;r<i;r++){const a=t[r],l=n[r];if(!a.equalsApprox(l))return!1}return!0}else return R.u(this.startX,e.startX)&&R.u(this.startY,e.startY)&&R.u(this.endX,e.endX)&&R.u(this.endY,e.endY)}gC(e){if(this.type!==1||e.type!==4)return!1;if(e.figures.count===1){const t=e.figures.elt(0);if(t.segments.count===1&&R.u(this.startX,t.startX)&&R.u(this.startY,t.startY)){const n=t.segments.elt(0);if(n.type===2&&R.u(this.endX,n.endX)&&R.u(this.endY,n.endY))return!0}}return!1}static stringify(e){return e.toString()}static stringifyFixed(e){return t=>t.toString(e)}ri(e){e in ot?this.type=e:o.lr(this,e)}toString(e){e===void 0&&(e=-1);const t=i=>i===0?"0":i.toFixed(e);let n;switch(this.type){case 1:return e<0?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+t(this.startX)+" "+t(this.startY)+"L"+t(this.endX)+" "+t(this.endY);case 2:return n=new I(this.startX,this.startY,0,0),n.union(this.endX,this.endY,0,0),e<0?"M"+n.x.toString()+" "+n.y.toString()+"H"+n.right.toString()+"V"+n.bottom.toString()+"H"+n.left.toString()+"z":"M"+t(n.x)+" "+t(n.y)+"H"+t(n.right)+"V"+t(n.bottom)+"H"+t(n.left)+"z";case 3:if(n=new I(this.startX,this.startY,0,0),n.union(this.endX,this.endY,0,0),e<0){const l=n.left.toString()+" "+(n.y+n.height/2).toString(),u=n.right.toString()+" "+(n.y+n.height/2).toString();return"M"+l+"A"+(n.width/2).toString()+" "+(n.height/2).toString()+" 0 0 1 "+u+"A"+(n.width/2).toString()+" "+(n.height/2).toString()+" 0 0 1 "+l}else{const l=t(n.left)+" "+t(n.y+n.height/2),u=t(n.right)+" "+t(n.y+n.height/2);return"M"+l+"A"+t(n.width/2)+" "+t(n.height/2)+" 0 0 1 "+u+"A"+t(n.width/2)+" "+t(n.height/2)+" 0 0 1 "+l}case 4:let i="";const r=this.figures.r,a=r.length;for(let l=0;l<a;l++){const u=r[l];l>0&&(i+=" x "),u.isFilled&&(i+="F "),i+=u.toString(e)}return i;default:return ot[this.type]}}static fillPath(e){const t=e.split(/[Xx]/),n=t.length;let i="";for(let r=0;r<n;r++){const a=t[r];if(a.match(/[Ff]/)!==null){r===0?i+=a:i+="X"+(a[0]===" "?"":" ")+a;continue}i+=(r===0?"":"X ")+"F"+(a[0]===" "?"":" ")+a}return i}static parse(e,t){t===void 0&&(t=!1);const n=new RegExp("(["+jn.qg+"])(["+jn.qg+"])","gm"),i=new RegExp("(["+jn.qg+"])([^s])","gm"),r=new RegExp("([^s])(["+jn.qg+"])","gm");e=e.replace(/,/gm," "),e=e.replace(n,"$1 $2"),e=e.replace(n,"$1 $2"),e=e.replace(i,"$1 $2"),e=e.replace(r,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2"),e=e.replace(/[\s\r\t\n]+/gm," "),e=e.replace(/^\s+|\s+$/g,"");const a=e.split(" ");for(let Z=0;Z<a.length;Z++){const et=a[Z];if(et.match(/(\.[0-9]*)(\.)/gm)!==null){const st=o.nt();let ut="",mt=!1;for(let at=0;at<et.length;at++){const vt=et[at];vt==="."&&!mt?(mt=!0,ut+=vt):vt==="."?(st.push(ut),ut="."):ut+=vt}st.push(ut),a.splice(Z,1);for(let at=0;at<st.length;at++)a.splice(Z+at,0,st[at]);Z+=st.length-1,o.tt(st)}}let l=-1,u="",c="";const f=new T(0,0),m=new T(0,0),p=new T(0,0);let y=!0;function w(){return l>=D-1||a[l+1].match(X)!==null?!0:(y=!1,!1)}function b(){return l++,a[l]}function C(Z){let et=parseFloat(b()),st=parseFloat(b());u===u.toLowerCase()&&(et=p.x+et,st=p.y+st),Z.e(et,st)}function k(){return C(p),p}function N(){return C(m),m}function F(){const Z=c.toLowerCase();return Z==="c"||Z==="s"||Z==="q"||Z==="t"?new T(2*p.x-m.x,2*p.y-m.y):new T(p.x,p.y)}const D=a.length,E=Ro.mC(null);let U=!1,$=!1,K=!1,_=!0,G=null;const X=new RegExp("["+jn.qg+"]");for(;!(l>=D-1);){if(c=u,u=b(),u==="")continue;y=!0;let Z=!1;switch(u.toUpperCase()){case"X":_=!0,U=!1,$=!1;break;case"M":for(G=k(),E.Pi===null||_===!0?(E.uu(G.x,G.y,U,!1,!$,K),_=!1):E.ID(G.x,G.y),f.a(p);!w();)G=k(),E.ur(G.x,G.y);break;case"L":for(;!w();)G=k(),E.ur(G.x,G.y);y&&(Z=!0);break;case"H":for(;!w();)p.e((u===u.toLowerCase()?p.x:0)+parseFloat(b()),p.y),E.ur(p.x,p.y);break;case"V":for(;!w();)p.e(p.x,(u===u.toLowerCase()?p.y:0)+parseFloat(b())),E.ur(p.x,p.y);y&&(Z=!0);break;case"C":for(;!w();){const et=new T;C(et);const st=N(),ut=k();E.dr(et.x,et.y,st.x,st.y,ut.x,ut.y)}y&&(Z=!0);break;case"S":for(;!w();){const et=F(),st=N(),ut=k();E.dr(et.x,et.y,st.x,st.y,ut.x,ut.y)}y&&(Z=!0);break;case"Q":for(;!w();){const et=N(),st=k();E.Mw(et.x,et.y,st.x,st.y)}y&&(Z=!0);break;case"T":for(;!w();){const et=F();m.a(et);const st=k();E.Mw(et.x,et.y,st.x,st.y),m.a(st)}y&&(Z=!0);break;case"B":for(;!w();){const et=parseFloat(b()),st=parseFloat(b());let ut=parseFloat(b()),mt=parseFloat(b());const at=parseFloat(b());let vt=at,Nt=!1;w()||(vt=parseFloat(b()),w()||(Nt=parseFloat(b())!==0)),u===u.toLowerCase()&&(ut+=p.x,mt+=p.y),E.ED(et,st,ut,mt,at,vt,Nt)}y&&(Z=!0);break;case"A":for(;!w();){const et=Math.abs(parseFloat(b())),st=Math.abs(parseFloat(b())),ut=parseFloat(b());let mt=!1,at=!1,vt=0,Nt=0;const qt=b();qt.length===1?(mt=!!parseFloat(qt),at=!!parseFloat(b()),vt=parseFloat(b()),Nt=parseFloat(b())):qt.length===2?(mt=!!parseFloat(qt[0]),at=!!parseFloat(qt[1]),vt=parseFloat(b()),Nt=parseFloat(b())):(mt=!!parseFloat(qt[0]),at=!!parseFloat(qt[1]),vt=parseFloat(qt.slice(2)),Nt=parseFloat(b())),u===u.toLowerCase()&&(vt=p.x+vt,Nt=p.y+Nt),p.e(vt,Nt),E.BD(et,st,ut,mt,at,vt,Nt)}y&&(Z=!0);break;case"Z":E.UD(),p.a(f);break;case"F":{let et="",st=1;for(;a[l+st];){if(a[l+st]==="0"){K=!0,st++;continue}if(a[l+st].match(/[Uu]/)!==null){st++;continue}if(a[l+st].match(X)===null){st++;continue}et=a[l+st];break}et.match(/[Mm]/)?U=!0:E.VD();break}case"U":{let et="",st=1;for(;a[l+st];){if(a[l+st].match(/[Ff]/)!==null){st++;continue}if(a[l+st].match(X)===null){st++;continue}et=a[l+st];break}et.match(/[Mm]/)?$=!0:E.zD(!1);break}default:if(u==="0"||u==="1")break;o.ii("Unknown geometry command: "+u);break}if(Z){o.ii(`Bad geometry command: ${u}, next token: ${b()},
string: ${e}`);break}}const Q=E.Wg;if(Ro.pC(E),t){const Z=Q.figures.iterator;for(;Z.next();){const et=Z.value;et.isFilled=!0}}return Q}static yC(e,t){const n=e.length,i=T.l();for(let r=0;r<n;r++){const a=e[r];i.x=a[0],i.y=a[1],t.xt(i),a[0]=i.x,a[1]=i.y,i.x=a[2],i.y=a[3],t.xt(i),a[2]=i.x,a[3]=i.y,i.x=a[4],i.y=a[5],t.xt(i),a[4]=i.x,a[5]=i.y,i.x=a[6],i.y=a[7],t.xt(i),a[6]=i.x,a[7]=i.y}T.s(i)}Uk(){if(this.bt)return!0;if(this.type===4){const e=this.figures;if(this.jg!==e.ht)return!0;const t=this.figures.r,n=t.length;for(let i=0;i<n;i++)if(t[i].Uk())return!0}return!1}Nw(){if(this.bt=!1,this.ec=null,this.cu=null,this.fu=NaN,this.type===4){const t=this.figures;this.jg=t.ht;const n=this.figures.r,i=n.length;for(let r=0;r<i;r++)n[r].XD()}const e=this.Hg;e.ot(),isNaN(this.sc)||isNaN(this.nc)?e.e(0,0,0,0):e.e(0,0,this.sc,this.nc),this.wC(e,!1),e.unionNoCheck(0,0,0,0),e.g()}computeBoundsWithoutOrigin(){const e=new I;return this.wC(e,!0),e}wC(e,t){switch(this.type){case 1:case 2:case 3:t?e.e(this.xe,this.be,0,0):e.unionNoCheck(this.xe,this.be,0,0),e.unionNoCheck(this.Qi,this._i,0,0);break;case 4:const n=this.figures,i=n.r,r=n.length;for(let a=0;a<r;a++){const l=i[a];t&&a===0?e.e(l.startX,l.startY,0,0):e.unionNoCheck(l.startX,l.startY,0,0);const u=l.segments.r,c=u.length;let f=l.startX,m=l.startY;for(let p=0;p<c;p++){const y=u[p];switch(y.type){case 2:case 1:f=y.endX,m=y.endY,e.unionNoCheck(f,m,0,0);break;case 3:R.au(f,m,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,e),f=y.endX,m=y.endY;break;case 4:R.Bk(f,m,y.point1X,y.point1Y,y.endX,y.endY,.5,e),f=y.endX,m=y.endY;break;case 5:case 6:const w=y.type===5?y.Mo(l):y.Eh(l,f,m),b=w.length;if(b===0){f=y.type===5?y.centerX:y.endX,m=y.type===5?y.centerY:y.endY,e.unionNoCheck(f,m,0,0);break}let C=null;for(let k=0;k<b;k++)C=w[k],R.au(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],.5,e);C!==null&&(f=C[6],m=C[7]);break;default:o.o("Unknown Segment type: "+y.type)}}}break;default:o.o("Unknown Geometry type: "+this.type)}}KD(e,t){const n=this.bounds;let i=e/n.width,r=t/n.height;return isFinite(i)||(i=1),isFinite(r)||(r=1),i===1&&r===1?this:this.copy().scale(i,r)}normalize(){this.h&&o.T(this);const e=this.computeBoundsWithoutOrigin();return this.offset(-e.x,-e.y),new T(-e.x,-e.y)}offset(e,t){return this.h&&o.T(this),this.D(1,0,0,1,e,t),this}scale(e,t){return this.h&&o.T(this),this.D(e,0,0,t,0,0),this}rotate(e,t,n){this.h&&o.T(this),t===void 0&&(t=0),n===void 0&&(n=0);const i=nt.l();return i.Ri(),i.cs(e,t,n),this.D(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),nt.s(i),this}D(e,t,n,i,r,a){let l=0,u=0;switch(this.type){case 1:case 2:case 3:l=this.xe,u=this.be,this.xe=l*e+u*n+r,this.be=l*t+u*i+a,l=this.Qi,u=this._i,this.Qi=l*e+u*n+r,this._i=l*t+u*i+a;break;case 4:const c=this.figures.r,f=c.length;for(let m=0;m<f;m++){const p=c[m];l=p.startX,u=p.startY,p.startX=l*e+u*n+r,p.startY=l*t+u*i+a;const y=p.segments.r,w=y.length;for(let b=0;b<w;b++){const C=y[b];switch(C.type){case 2:case 1:l=C.endX,u=C.endY,C.endX=l*e+u*n+r,C.endY=l*t+u*i+a;break;case 3:l=C.point1X,u=C.point1Y,C.point1X=l*e+u*n+r,C.point1Y=l*t+u*i+a,l=C.point2X,u=C.point2Y,C.point2X=l*e+u*n+r,C.point2Y=l*t+u*i+a,l=C.endX,u=C.endY,C.endX=l*e+u*n+r,C.endY=l*t+u*i+a;break;case 4:l=C.point1X,u=C.point1Y,C.point1X=l*e+u*n+r,C.point1Y=l*t+u*i+a,l=C.endX,u=C.endY,C.endX=l*e+u*n+r,C.endY=l*t+u*i+a;break;case 5:if(l=C.centerX,u=C.centerY,C.centerX=l*e+u*n+r,C.centerY=l*t+u*i+a,t!==0){let k=Math.atan2(t,e)*180/Math.PI;k<0&&(k+=360),C.startAngle+=k}e<0&&(C.startAngle=180-C.startAngle,C.sweepAngle=-C.sweepAngle),i<0&&(C.startAngle=-C.startAngle,C.sweepAngle=-C.sweepAngle),C.radiusX*=Math.sqrt(e*e+n*n),C.radiusY!==void 0&&(C.radiusY*=Math.sqrt(t*t+i*i));break;case 6:if(l=C.endX,u=C.endY,C.endX=l*e+u*n+r,C.endY=l*t+u*i+a,C.radiusX===0||C.radiusY===0)break;if(t!==0){let k=Math.atan2(t,e)*180/Math.PI;k<0&&(k+=360),C.xAxisRotation+=k}e<0&&(C.xAxisRotation=180-C.xAxisRotation,C.isClockwiseArc=!C.isClockwiseArc),i<0&&(C.xAxisRotation=-C.xAxisRotation,C.isClockwiseArc=!C.isClockwiseArc),C.radiusX*=Math.sqrt(e*e+n*n),C.radiusY*=Math.sqrt(t*t+i*i);break;default:o.o("Unknown Segment type: "+C.type)}}}break}return this.bt=!0,this}containsPoint(e,t){t===void 0&&(t=0);const n=this.xe,i=this.be,r=this.Qi,a=this._i;switch(this.type){case 1:return R.vi(n,i,r,a,t,e.x,e.y);case 2:{const l=Math.min(n,r)-t,u=Math.min(i,a)-t,c=Math.abs(r-n)+t*2,f=Math.abs(a-i)+t*2,m=I.X(l,u,c,f),p=m.containsPoint(e);return I.s(m),p}case 3:{let l=Math.min(n,r)-t,u=Math.min(i,a)-t;const c=Math.abs(r-n)+t*2,f=Math.abs(a-i)+t*2,m=c/2,p=f/2;return m<=0||p<=0?!1:(l=e.x-(l+m),u=e.y-(u+p),l*l/(m*m)+u*u/(p*p)<=1)}case 4:return this.Vk(e,t,!0,!1);default:return!1}}Vk(e,t,n,i){const r=e.x,a=e.y,l=this.bounds.x-20,u=a;let c=0,f=0,m=0,p=0,y=0,w=0;const b=this.figures.r,C=b.length;for(let k=0;k<C;k++){const N=b[k],F=!N.isEvenOdd;if(N.isFilled){if(n&&N.zk(r,a,t))return!0}else{if(N.zk(r,a,i?t:t+2))return!0;continue}const D=N.segments;f=N.startX,m=N.startY;let E=f,U=m;const $=D.r;for(let K=0;K<=D.length;K++){let _,G;switch(K!==D.length?(_=$[K],G=_.type,y=_.endX,w=_.endY):(G=2,y=E,w=U),G){case 1:{const X=this.Cw(r,a,l,u,f,m,E,U);if(isNaN(X))return!0;c+=X,E=y,U=w;break}case 2:{const X=this.Cw(r,a,l,u,f,m,y,w);if(isNaN(X))return!0;c+=X;break}case 3:p=R.Xg(f,m,_.point1X,_.point1Y,_.point2X,_.point2Y,y,w,l,u,r,a,.5),c+=p;break;case 4:{const X=(f+2*_.point1X)/3,Q=(m+2*_.point1Y)/3,Z=(_.point1X*2+y)/3,et=(_.point1Y*2+w)/3;p=R.Xg(f,m,X,Q,Z,et,y,w,l,u,r,a,.5),c+=p;break}case 5:case 6:{const X=_.type===5?_.Mo(N):_.Eh(N,f,m),Q=X.length;if(Q===0){const et=this.Cw(r,a,l,u,f,m,_.type===5?_.centerX:_.endX,_.type===5?_.centerY:_.endY);if(isNaN(et))return!0;c+=et;break}let Z=null;for(let et=0;et<Q;et++){if(Z=X[et],et===0){const st=this.Cw(r,a,l,u,f,m,Z[0],Z[1]);if(isNaN(st))return!0;c+=st}p=R.Xg(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],l,u,r,a,.5),c+=p}Z!==null&&(y=Z[6],w=Z[7]);break}default:o.o("Unknown Segment type: "+_.type)}f=y,m=w}if(F){if(c!==0)return!0}else if(c%2!==0)return!0;c=0}return!1}Cw(e,t,n,i,r,a,l,u){if(R.vi(r,a,l,u,.05,e,t))return NaN;const c=(e-n)*(a-u);if(c===0)return 0;const f=((e*i-t*n)*(r-l)-(e-n)*(r*u-a*l))/c,m=(e*i-t*n)*(a-u)/c;if(f>=e)return 0;if((r>l?r-l:l-r)<(a>u?a-u:u-a)){if(a<u){if(m<a||m>u)return 0}else if(m<u||m>a)return 0}else if(r<l){if(f<r||f>l)return 0}else if(f<l||f>r)return 0;return c>0?1:-1}xC(e,t,n){const i=this.figures.r,r=i.length;for(let a=0;a<r;a++)if(i[a].zk(e,t,n))return!0;return!1}getPointAlongPath(e,t){if(e<0?e=0:e>1&&(e=1),t===void 0&&(t=new T),this.type===1)return t.e(this.startX+e*(this.endX-this.startX),this.startY+e*(this.endY-this.startY)),t;const n=this.flattenedSegments,i=this.flattenedLengths,r=this.flattenedTotalLength,a=n.length,l=r*e;let u=0;for(let c=0;c<a;c++){const f=i[c],m=f.length;for(let p=0;p<m;p++){const y=f[p];if(u+y>=l){const w=l-u,b=y===0?0:w/y,C=n[c],k=C[p*2],N=C[p*2+1],F=C[p*2+2],D=C[p*2+3];return t.e(k+(F-k)*b,N+(D-N)*b),t}u+=y}}return t}getAngleAlongPath(e){if(e<0?e=0:e>1&&(e=1),this.type===1)return Math.atan2(this.endY-this.startY,this.endX-this.startX)*180/Math.PI;const t=this.flattenedSegments,n=this.flattenedLengths,i=this.flattenedTotalLength,r=t.length,a=i*e;let l=0;for(let u=0;u<r;u++){const c=n[u],f=c.length;for(let m=0;m<f;m++){const p=c[m];if(l+p>=a){const y=t[u],w=y[m*2],b=y[m*2+1],C=y[m*2+2],k=y[m*2+3];return Math.abs(C-w)<1&&Math.abs(k-b)<1?0:Math.abs(C-w)<1?k-b>=0?90:270:Math.abs(k-b)<1?C-w>=0?0:180:Math.atan2(k-b,C-w)*180/Math.PI}l+=p}}return NaN}getPointAndAngleAlongPath(e,t){if(e<0?e=0:e>1&&(e=1),t===void 0&&(t=[]),t.length=3,this.type===1)return t[0]=this.startX+e*(this.endX-this.startX),t[1]=this.startY+e*(this.endY-this.startY),t[2]=Math.atan2(this.endY-this.startY,this.endX-this.startX)*180/Math.PI,t;const n=this.flattenedSegments,i=this.flattenedLengths,r=this.flattenedTotalLength,a=n.length,l=r*e;let u=0;for(let c=0;c<a;c++){const f=i[c],m=f.length;for(let p=0;p<m;p++){const y=f[p];if(u+y>=l){const w=l-u,b=y===0?0:w/y,C=n[c],k=C[p*2],N=C[p*2+1],F=C[p*2+2],D=C[p*2+3];t[0]=k+(F-k)*b,t[1]=N+(D-N)*b;let E;return Math.abs(F-k)<1&&Math.abs(D-N)<1?E=0:Math.abs(F-k)<1?E=D-N>=0?90:270:Math.abs(D-N)<1?E=F-k>=0?0:180:E=Math.atan2(D-N,F-k)*180/Math.PI,t[2]=E,t}u+=y}}return t}getFractionForPoint(e){if(this.type===1){const t=this.startX,n=this.startY,i=this.endX,r=this.endY;if(t===i&&n===r)return 0;{const a=e.x,l=e.y;let u=0,c=0;if(t===i)return n<r?(u=n,c=r):(u=r,c=n),l<=u?u===n?0:1:l>=c?c===n?0:1:Math.abs(l-n)/(c-u);if(n===r)return t<i?(u=t,c=i):(u=i,c=t),a<=u?u===t?0:1:a>=c?c===t?0:1:Math.abs(a-t)/(c-u);{const f=(i-t)*(i-t)+(r-n)*(r-n),m=T.l();R.gl(t,n,i,r,a,l,m);const p=m.x,y=m.y;return T.s(m),Math.sqrt(((p-t)*(p-t)+(y-n)*(y-n))/f)}}}else if(this.type===2){const t=this.startX,n=this.startY,i=this.endX,r=this.endY;if(t===i&&n===r)return 0;{const a=i-t,l=r-n,u=a*2+l*2;let c=e.x,f=e.y;c=Math.min(Math.max(c,t),i),f=Math.min(Math.max(f,n),r);const m=Math.abs(c-t),p=Math.abs(c-i),y=Math.abs(f-n),w=Math.abs(f-r),b=Math.min(m,p,y,w);if(b===y)return c/u;if(b===p)return(a+f)/u;if(b===w)return(a*2+l-c)/u;if(b===m)return(a*2+l*2-f)/u}}else{const t=this.flattenedSegments,n=this.flattenedLengths,i=this.flattenedTotalLength,r=T.l();let a=1/0,l=0,u=0;const c=t.length;let f=0,m=0;for(let y=0;y<c;y++){const w=t[y],b=n[y],C=w.length;for(let k=0;k<C;k+=2){const N=w[k],F=w[k+1];if(k===0){f=N,m=F;continue}R.gl(f,m,N,F,e.x,e.y,r);const D=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y);D<a&&(a=D,l=u,l+=Math.sqrt((r.x-f)*(r.x-f)+(r.y-m)*(r.y-m))),u+=b[(k-2)/2],f=N,m=F}}T.s(r);const p=l/i;return p<0?0:p>1?1:p}return 0}get flattenedSegments(){return this.bC(),this.ec}bC(){if(this.ec===null){const e=this.ec=[],t=this.cu=[];this.YD(e,t)}}get flattenedLengths(){return this.bC(),this.cu}get flattenedTotalLength(){let e=this.fu;if(isNaN(e)){if(this.type===1){const t=Math.abs(this.endX-this.startX),n=Math.abs(this.endY-this.startY);e=Math.sqrt(t*t+n*n)}else if(this.type===2){const t=Math.abs(this.endX-this.startX),n=Math.abs(this.endY-this.startY);e=t*2+n*2}else{const t=this.flattenedLengths,n=t.length;e=0;for(let i=0;i<n;i++){const r=t[i],a=r.length;for(let l=0;l<a;l++)e+=r[l]}}this.fu=e}return e}Xk(e){const t=[];let n=0,i=0;const r=e.length;for(let a=0;a<r;a+=2){const l=e[a],u=e[a+1];if(a===0){n=l,i=u;continue}const c=Math.sqrt(T.distanceSquared(n,i,l,u));t.push(c),n=l,i=u}return t}YD(e,t){let n=[];const i=[];if(this.type===1)n.push(this.startX),n.push(this.startY),n.push(this.endX),n.push(this.endY),e.push(n),i.push(Math.sqrt((this.startX-this.endX)*(this.startX-this.endX)+(this.startY-this.endY)*(this.startY-this.endY))),t.push(i);else if(this.type===2)n.push(this.startX),n.push(this.startY),n.push(this.endX),n.push(this.startY),n.push(this.endX),n.push(this.endY),n.push(this.startX),n.push(this.endY),n.push(this.startX),n.push(this.startY),e.push(n),i.push(Math.abs(this.startX-this.endX)),i.push(Math.abs(this.startY-this.endY)),i.push(Math.abs(this.startX-this.endX)),i.push(Math.abs(this.startY-this.endY)),t.push(i);else if(this.type===3){const r=new dt;r.startX=this.endX,r.startY=(this.startY+this.endY)/2;const a=new ct(5);a.startAngle=0,a.sweepAngle=360,a.centerX=(this.startX+this.endX)/2,a.centerY=(this.startY+this.endY)/2,a.radiusX=Math.abs(this.startX-this.endX)/2,a.radiusY=Math.abs(this.startY-this.endY)/2,r.add(a);const l=a.Mo(r),u=l.length;if(u===0)n.push(a.centerX),n.push(a.centerY);else{let c=r.startX,f=r.startY;for(let m=0;m<u;m++){const p=l[m];R.Un(c,f,p[2],p[3],p[4],p[5],p[6],p[7],.5,n),c=p[6],f=p[7]}}e.push(n),t.push(this.Xk(n))}else{const r=this.figures.iterator;for(;r.next();){const a=r.value;n=[],n.push(a.startX),n.push(a.startY);let l=a.startX,u=a.startY,c=l,f=u;const m=a.segments.r,p=m.length;for(let y=0;y<p;y++){const w=m[y];switch(w.type){case 1:n.length>=4&&(e.push(n),t.push(this.Xk(n))),n=[],n.push(w.endX),n.push(w.endY),l=w.endX,u=w.endY,c=l,f=u;break;case 2:n.push(w.endX),n.push(w.endY),l=w.endX,u=w.endY;break;case 3:R.Un(l,u,w.point1X,w.point1Y,w.point2X,w.point2Y,w.endX,w.endY,.5,n),l=w.endX,u=w.endY;break;case 4:R.Vg(l,u,w.point1X,w.point1Y,w.endX,w.endY,.5,n),l=w.endX,u=w.endY;break;case 5:{const b=w.Mo(a),C=b.length;if(C===0){n.push(w.centerX),n.push(w.centerY),l=w.centerX,u=w.centerY;break}for(let k=0;k<C;k++){const N=b[k];R.Un(l,u,N[2],N[3],N[4],N[5],N[6],N[7],.5,n),l=N[6],u=N[7]}break}case 6:{const b=w.Eh(a,l,u),C=b.length,k=w.endX,N=w.endY;if(C===0){n.push(k),n.push(N),l=k,u=N;break}for(let F=0;F<C;F++){const D=b[F];R.Un(l,u,D[2],D[3],D[4],D[5],D[6],D[7],.5,n),l=D[6],u=D[7]}break}default:o.o("Segment not of valid type: "+w.type)}w.isClosed&&(n.push(c),n.push(f))}n.length>=4&&(e.push(n),t.push(this.Xk(n)))}}}get type(){return this.$}set type(e){this.$!==e&&(this.h&&o.T(this,e),this.$=e,e===4?this.Fs=new M:(jn.Sw===null&&(jn.Sw=new M().g()),this.Fs=jn.Sw),this.bt=!0)}get startX(){return this.xe}set startX(e){this.xe!==e&&(this.h&&o.T(this,e),this.xe=e,this.bt=!0)}get startY(){return this.be}set startY(e){this.be!==e&&(this.h&&o.T(this,e),this.be=e,this.bt=!0)}get endX(){return this.Qi}set endX(e){this.Qi!==e&&(this.h&&o.T(this,e),this.Qi=e,this.bt=!0)}get endY(){return this._i}set endY(e){this._i!==e&&(this.h&&o.T(this,e),this._i=e,this.bt=!0)}get figures(){return this.Fs}set figures(e){this.Fs!==e&&(this.h&&o.T(this,e),this.Fs=e,this.bt=!0)}add(e){return this.Fs.add(e),this}setSpots(e,t,n,i,r,a,l,u){return this.h&&o.T(this),this.zn=new z(e,t,r,a).g(),this.Xn=new z(n,i,l,u).g(),this}get spot1(){return this.zn}set spot1(e){this.h&&o.T(this,e),this.zn=e.N()}get spot2(){return this.Xn}set spot2(e){this.h&&o.T(this,e),this.Xn=e.N()}get defaultStretch(){return this.Kn}set defaultStretch(e){this.Kn=e}get bounds(){return this.Uk()&&this.Nw(),this.Hg}};v(jn,"Line",1),v(jn,"Rectangle",2),v(jn,"Ellipse",3),v(jn,"Path",4),v(jn,"Sw",new M().g()),v(jn,"qg","UuBbMmZzLlHhVvCcSsQqTtAaFfXx");let rt=jn;rt.stringify=rt.stringify,rt.stringifyFixed=rt.stringifyFixed,rt.fillPath=rt.fillPath,rt.parse=rt.parse;class dt{constructor(e,t,n,i,r){v(this,"n");v(this,"xe");v(this,"be");v(this,"oc");v(this,"Jg");v(this,"Be");n===void 0&&(n=!0),i===void 0&&(i=!0),r===void 0&&(r=!1),this.n=2|(n?4:0)|(i?8:0)|(r?16:0),e!==void 0?this.xe=e:this.xe=0,t!==void 0?this.be=t:this.be=0,this.oc=new M,this.Jg=this.oc.ht,this.Be=null}copy(){const e=new dt;e.n=this.n&-2,e.xe=this.xe,e.be=this.be;const t=this.oc.r,n=t.length,i=e.oc;for(let r=0;r<n;r++){const a=t[r].copy();i.add(a)}return e.Jg=this.Jg,e.Be=this.Be,e}equalsApprox(e){if(!(e instanceof dt)||!R.u(this.startX,e.startX)||!R.u(this.startY,e.startY))return!1;const t=this.segments.r,n=e.segments.r,i=t.length;if(i!==n.length)return!1;for(let r=0;r<i;r++){const a=t[r],l=n[r];if(!a.equalsApprox(l))return!1}return!0}toString(e){e===void 0&&(e=-1);let t="";if(e<0)t="M"+this.startX.toString()+" "+this.startY.toString();else{const r=a=>a===0?"0":a.toFixed(e);t="M"+r(this.startX)+" "+r(this.startY)}const n=this.segments.r,i=n.length;for(let r=0;r<i;r++){const a=n[r];t+=" "+a.toString(e)}return t}get h(){return(this.n&1)!==0}set h(e){e?this.n|=1:this.n&=-2}get bt(){return(this.n&2)!==0}set bt(e){e?this.n|=2:this.n&=-3}g(){this.h=!0;const e=this.segments;e.g();const t=e.r,n=e.length;for(let i=0;i<n;i++)t[i].g();return this}ot(){this.h=!1;const e=this.segments;e.ot();const t=e.r,n=t.length;for(let i=0;i<n;i++)t[i].ot();return this}Uk(){if(this.bt)return!0;const e=this.segments;if(this.Jg!==e.ht)return!0;for(const t of e)if(t.bt)return!0;return!1}XD(){this.bt=!1,this.Be=null;const e=this.segments;this.Jg=e.ht;for(const t of e)t.bt=!1,t.Rs=null}get isFilled(){return(this.n&4)!==0}set isFilled(e){this.h&&o.T(this,e),e?this.n|=4:this.n&=-5}get isShadowed(){return(this.n&8)!==0}set isShadowed(e){this.h&&o.T(this,e),e?this.n|=8:this.n&=-9}get isEvenOdd(){return(this.n&16)!==0}set isEvenOdd(e){this.h&&o.T(this,e),e?this.n|=16:this.n&=-17}get startX(){return this.xe}set startX(e){this.h&&o.T(this,e),this.xe=e,this.Be=null,this.bt=!0}get startY(){return this.be}set startY(e){this.h&&o.T(this,e),this.be=e,this.Be=null,this.bt=!0}get segments(){return this.oc}set segments(e){this.h&&o.T(this,e),this.oc=e,this.Be=null,this.bt=!0}add(e){return this.oc.add(e),this.Be=null,this}zk(e,t,n){const i=this;let r=i.startX,a=i.startY,l=r,u=a;const c=i.segments.r,f=c.length;for(let m=0;m<f;m++){const p=c[m];switch(p.type){case 1:l=p.endX,u=p.endY,r=p.endX,a=p.endY;break;case 2:if(R.vi(r,a,p.endX,p.endY,n,e,t))return!0;r=p.endX,a=p.endY;break;case 3:if(R.kw(r,a,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.5,e,t,n))return!0;r=p.endX,a=p.endY;break;case 4:if(R.Ek(r,a,p.point1X,p.point1Y,p.endX,p.endY,.5,e,t,n))return!0;r=p.endX,a=p.endY;break;case 5:case 6:const y=p.type===5?p.Mo(i):p.Eh(i,r,a),w=y.length,b=p.type===5?p.centerX:p.endX,C=p.type===5?p.centerY:p.endY;if(w===0){if(R.vi(r,a,b,C,n,e,t))return!0;r=b,a=C;break}let k=null;for(let N=0;N<w;N++)if(k=y[N],N===0&&R.vi(r,a,k[0],k[1],n,e,t)||R.kw(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],.5,e,t,n))return!0;k!==null&&(r=k[6],a=k[7]);break;default:o.o("Unknown Segment type: "+p.type)}if(p.isClosed&&(r!==l||a!==u)&&R.vi(r,a,l,u,n,e,t))return!0}return!1}}var Pt=(A=>(A[A.Move=1]="Move",A[A.Line=2]="Line",A[A.Bezier=3]="Bezier",A[A.QuadraticBezier=4]="QuadraticBezier",A[A.Arc=5]="Arc",A[A.SvgArc=6]="SvgArc",A))(Pt||{});const ss=class ss{constructor(e,t,n,i,r,a,l,u){v(this,"$");v(this,"n");v(this,"Qi");v(this,"_i");v(this,"hn");v(this,"pl");v(this,"yl");v(this,"gr");v(this,"Rs");if(L.Gi(this),e===void 0&&(e=2),this.$=e,this.n=2,t!==void 0?this.Qi=t:this.Qi=0,n!==void 0?this._i=n:this._i=0,i===void 0&&(i=0),r===void 0&&(r=0),a===void 0&&(a=0),l===void 0&&(l=0),e===6){let c=a;c=c%360,c<0&&(c+=360),this.hn=c,this.pl=0,this.yl=Math.max(i,0),this.gr=Math.max(r,0),typeof l=="boolean"?l&&(this.isLargeArc=!0):typeof l=="number"&&l&&(this.isLargeArc=!0),u&&(this.isClockwiseArc=!0)}else this.hn=i,this.pl=r,e===5&&(a=Math.max(a,0)),this.yl=a,typeof l=="number"?(e===5&&(l=Math.max(l,0)),this.gr=l):this.gr=0;this.Rs=null}copy(){const e=new ss;return e.$=this.$,e.n=this.n&-2,e.Qi=this.Qi,e._i=this._i,e.hn=this.hn,e.pl=this.pl,e.yl=this.yl,e.gr=this.gr,e}equalsApprox(e){if(!(e instanceof ss)||this.type!==e.type||this.isClosed!==e.isClosed)return!1;switch(this.type){case 1:case 2:return R.u(this.endX,e.endX)&&R.u(this.endY,e.endY);case 3:return R.u(this.endX,e.endX)&&R.u(this.endY,e.endY)&&R.u(this.point1X,e.point1X)&&R.u(this.point1Y,e.point1Y)&&R.u(this.point2X,e.point2X)&&R.u(this.point2Y,e.point2Y);case 4:return R.u(this.endX,e.endX)&&R.u(this.endY,e.endY)&&R.u(this.point1X,e.point1X)&&R.u(this.point1Y,e.point1Y);case 5:return R.u(this.startAngle,e.startAngle)&&R.u(this.sweepAngle,e.sweepAngle)&&R.u(this.centerX,e.centerX)&&R.u(this.centerY,e.centerY)&&R.u(this.radiusX,e.radiusX)&&R.u(this.radiusY,e.radiusY);case 6:return this.isClockwiseArc===e.isClockwiseArc&&this.isLargeArc===e.isLargeArc&&R.u(this.xAxisRotation,e.xAxisRotation)&&R.u(this.endX,e.endX)&&R.u(this.endY,e.endY)&&R.u(this.radiusX,e.radiusX)&&R.u(this.radiusY,e.radiusY);default:return!1}}ri(e){e in Pt?this.type=e:o.lr(this,e)}toString(e){e===void 0&&(e=-1);const t=i=>i===0?"0":i.toFixed(e);let n="";switch(this.type){case 1:e<0?n="M"+this.endX.toString()+" "+this.endY.toString():n="M"+t(this.endX)+" "+t(this.endY);break;case 2:e<0?n="L"+this.endX.toString()+" "+this.endY.toString():n="L"+t(this.endX)+" "+t(this.endY);break;case 3:e<0?n="C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():n="C"+t(this.point1X)+" "+t(this.point1Y)+" "+t(this.point2X)+" "+t(this.point2Y)+" "+t(this.endX)+" "+t(this.endY);break;case 4:e<0?n="Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():n="Q"+t(this.point1X)+" "+t(this.point1Y)+" "+t(this.endX)+" "+t(this.endY);break;case 5:e<0?n="B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():n="B"+t(this.startAngle)+" "+t(this.sweepAngle)+" "+t(this.centerX)+" "+t(this.centerY)+" "+t(this.radiusX)+" "+t(this.radiusY);break;case 6:e<0?n="A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():n="A"+t(this.radiusX)+" "+t(this.radiusY)+" "+t(this.xAxisRotation)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+t(this.endX)+" "+t(this.endY);break;default:n=Pt[this.type]}return n+(this.isClosed?"z":"")}get h(){return(this.n&1)!==0}set h(e){e?this.n|=1:this.n&=-2}get bt(){return(this.n&2)!==0}set bt(e){e?this.n|=2:this.n&=-3}g(){return this.h=!0,this}ot(){return this.h=!1,this}close(){return this.isClosed=!0,this}Mo(e){if(this.Rs!==null&&e.bt===!1)return this.Rs;const t=this.radiusX;let n=this.radiusY;if(n===void 0&&(n=t),t===0||n===0)return this.Rs=[],this.Rs;const i=this.hn,r=this.pl,a=R.uC(0,0,t<n?t:n,this.startAngle,this.startAngle+this.sweepAngle,!1);if(t!==n){const u=nt.l();u.Ri(),t<n?u.et(1,n/t):u.et(t/n,1),rt.yC(a,u),nt.s(u)}const l=a.length;for(let u=0;u<l;u++){const c=a[u];c[0]+=i,c[1]+=r,c[2]+=i,c[3]+=r,c[4]+=i,c[5]+=r,c[6]+=i,c[7]+=r}return this.Rs=a,this.Rs}Eh(e,t,n){if(this.Rs!==null&&e.bt===!1)return this.Rs;if(this.radiusX===0||this.radiusY===0)return this.Rs=[],this.Rs;const i=t,r=n;let a=this.yl,l=this.gr;a===0&&(a=1e-4),l===0&&(l=1e-4);const u=this.hn*(Math.PI/180),c=this.isLargeArc,f=this.isClockwiseArc,m=this.Qi,p=this._i,y=Math.cos(u),w=Math.sin(u),b=y*(i-m)/2+w*(r-p)/2,C=-w*(i-m)/2+y*(r-p)/2,k=b*b/(a*a)+C*C/(l*l);k>1&&(a*=Math.sqrt(k),l*=Math.sqrt(k));let N=(c===f?-1:1)*Math.sqrt((a*a*l*l-a*a*C*C-l*l*b*b)/(a*a*C*C+l*l*b*b));isNaN(N)&&(N=0);let F=N*a*C/l,D=N*-l*b/a;isNaN(F)&&(F=0),isNaN(D)&&(D=0);const E=(i+m)/2+y*F-w*D,U=(r+p)/2+w*F+y*D,$=(Tt,Ft)=>Math.sqrt(Tt*Tt+Ft*Ft),K=(Tt,Ft,Ot,Rt)=>(Tt*Ot+Ft*Rt)/($(Tt,Ft)*$(Ot,Rt)),_=(Tt,Ft,Ot,Rt)=>(Tt*Rt<Ft*Ot?-1:1)*Math.acos(K(Tt,Ft,Ot,Rt)),G=_(1,0,(b-F)/a,(C-D)/l),X=(b-F)/a,Q=(C-D)/l,Z=(-b-F)/a,et=(-C-D)/l;let st=_(X,Q,Z,et);const ut=K(X,Q,Z,et);ut<=-1?st=Math.PI:ut>=1&&(st=0),!f&&st>0&&(st=st-2*Math.PI),f&&st<0&&(st=st+2*Math.PI);const mt=a>l?a:l,at=a>l?1:a/l,vt=a>l?l/a:1,Nt=R.uC(0,0,mt,G,G+st,!0),qt=nt.l();return qt.Ri(),qt.Ds(E,U),qt.cs(this.hn,0,0),qt.et(at,vt),rt.yC(Nt,qt),nt.s(qt),this.Rs=Nt,this.Rs}get isClosed(){return(this.n&8)!==0}set isClosed(e){this.isClosed!==e&&(e?this.n|=8:this.n&=-9,this.bt=!0)}get type(){return this.$}set type(e){this.h&&o.T(this,e),this.$=e,this.bt=!0}get endX(){return this.Qi}set endX(e){this.h&&o.T(this,e),this.Qi=e,this.bt=!0}get endY(){return this._i}set endY(e){this.h&&o.T(this,e),this._i=e,this.bt=!0}get point1X(){return this.hn}set point1X(e){this.h&&o.T(this,e),this.hn=e,this.bt=!0}get point1Y(){return this.pl}set point1Y(e){this.h&&o.T(this,e),this.pl=e,this.bt=!0}get point2X(){return this.yl}set point2X(e){this.h&&o.T(this,e),this.yl=e,this.bt=!0}get point2Y(){return this.gr}set point2Y(e){this.h&&o.T(this,e),this.gr=e,this.bt=!0}get centerX(){return this.hn}set centerX(e){this.h&&o.T(this,e),this.hn=e,this.bt=!0}get centerY(){return this.pl}set centerY(e){this.h&&o.T(this,e),this.pl=e,this.bt=!0}get radiusX(){return this.yl}set radiusX(e){e<0&&o._(e,">= zero",ss,"radiusX"),this.h&&o.T(this,e),this.yl=e,this.bt=!0}get radiusY(){return this.gr}set radiusY(e){e<0&&o._(e,">= zero",ss,"radiusY"),this.h&&o.T(this,e),this.gr=e,this.bt=!0}get startAngle(){return this.Qi}set startAngle(e){this.h&&o.T(this,e),e=e%360,e<0&&(e+=360),this.Qi=e,this.bt=!0}get sweepAngle(){return this._i}set sweepAngle(e){this.h&&o.T(this,e),e>360&&(e=360),e<-360&&(e=-360),this._i=e,this.bt=!0}get isClockwiseArc(){return(this.n&4)!==0}set isClockwiseArc(e){this.h&&o.T(this,e),e?this.n|=4:this.n&=-5,this.bt=!0}get isLargeArc(){return(this.n&16)!==0}set isLargeArc(e){this.h&&o.T(this,e),e?this.n|=16:this.n&=-17,this.bt=!0}get xAxisRotation(){return this.hn}set xAxisRotation(e){this.h&&o.T(this,e),e=e%360,e<0&&(e+=360),this.hn=e,this.bt=!0}};v(ss,"Move",1),v(ss,"Line",2),v(ss,"Bezier",3),v(ss,"QuadraticBezier",4),v(ss,"Arc",5),v(ss,"SvgArc",6);let ct=ss;class Et{constructor(){v(this,"p");v(this,"Lw");v(this,"Aw");v(this,"$g");v(this,"Zg");v(this,"Qg");v(this,"_g");v(this,"tm");v(this,"im");v(this,"em");v(this,"sm");v(this,"nm");v(this,"om");v(this,"rm");v(this,"No");v(this,"lm");v(this,"hm");v(this,"am");v(this,"ke");this.p=null,this.Lw=new T(0,0).g(),this.Aw=new T(0,0).g(),this.$g=0,this.Zg=0,this.Qg=1,this._g="",this.tm="",this.im=!1,this.em=!1,this.sm=0,this.nm=0,this.om=!1,this.rm=!1,this.No=!1,this.lm=null,this.hm=0,this.am=null,this.ke=null}copy(){const e=new Et;return this.clone(e)}clone(e){return e.p=this.p,e.Lw.a(this.viewPoint),e.Aw.a(this.documentPoint),e.$g=this.$g,e.Zg=this.Zg,e.Qg=this.Qg,e._g=this._g,e.tm=this.tm,e.im=this.im,e.em=this.em,e.sm=this.sm,e.nm=this.nm,e.om=this.om,e.rm=this.rm,e.No=this.No,e.lm=this.lm,e.hm=this.hm,e.am=this.am,e.ke=this.ke,e}toString(){let e="^";return this.modifiers!==0&&(e+="M:"+this.modifiers),this.button!==0&&(e+="B:"+this.button),this.key!==""&&(e+="K:"+this.key),this.clickCount!==0&&(e+="C:"+this.clickCount),this.delta!==0&&(e+="D:"+this.delta),this.handled&&(e+="h"),this.bubbles&&(e+="b"),this.documentPoint!==null&&(e+="@"+this.documentPoint.toString()),e}get diagram(){return this.p}set diagram(e){this.p=e}get viewPoint(){return this.Lw}set viewPoint(e){this.Lw.a(e)}get documentPoint(){return this.Aw}set documentPoint(e){this.Aw.a(e)}getMultiTouchViewPoint(e,t){const n=this.diagram;return n===null||n.kC(this.event,e,t),t}getMultiTouchDocumentPoint(e,t){const n=this.diagram;return n===null||(n.kC(this.event,e,t),t.a(n.transformViewToDoc(t))),t}get modifiers(){return this.$g}set modifiers(e){this.$g=e}get button(){return this.Zg}set button(e){if(this.Zg=e,this.event===null)switch(e){case 0:this.buttons=1;return;case 1:this.buttons=4;return;case 2:this.buttons=2;return}}get buttons(){return this.Qg}set buttons(e){this.Qg=e}get key(){return this._g}set key(e){this._g=e}get code(){return this.tm}set code(e){this.tm=e}get down(){return this.im}set down(e){this.im=e}get up(){return this.em}set up(e){this.em=e}get clickCount(){return this.sm}set clickCount(e){this.sm=e}get delta(){return this.nm}set delta(e){this.nm=e}get isMultiTouch(){return this.om}set isMultiTouch(e){this.om=e}get handled(){return this.rm}set handled(e){this.rm=e}get bubbles(){return this.No}set bubbles(e){this.No=e}get event(){return this.lm}set event(e){this.lm=e}get isTouchEvent(){const e=this.event;return e===null?!1:e.pointerType==="touch"||e.pointerType==="pen"}get timestamp(){return this.hm}set timestamp(e){this.hm=e}get targetDiagram(){return this.am}set targetDiagram(e){this.am=e}get targetObject(){return this.ke}set targetObject(e){this.ke=e}get control(){return(this.modifiers&1)!==0}set control(e){this.modifiers=e?this.modifiers|1:this.modifiers&-2}get shift(){return(this.modifiers&4)!==0}set shift(e){this.modifiers=e?this.modifiers|4:this.modifiers&-5}get alt(){return(this.modifiers&2)!==0}set alt(e){this.modifiers=e?this.modifiers|2:this.modifiers&-3}get meta(){return(this.modifiers&8)!==0}set meta(e){this.modifiers=e?this.modifiers|8:this.modifiers&-9}get left(){const e=this.event;return e!==null&&(e.type==="mousedown"||e.type==="mouseup"||e.type==="pointerdown"||e.type==="pointerup")?this.button===0:(this.buttons&1)!==0}set left(e){e?this.buttons|=1:this.buttons&=-2}get right(){const e=this.event;return e!==null&&(e.type==="mousedown"||e.type==="mouseup"||e.type==="pointerdown"||e.type==="pointerup")?this.button===2:(this.buttons&2)!==0}set right(e){e?this.buttons|=2:this.buttons&=-3}get middle(){const e=this.event;return e!==null&&(e.type==="mousedown"||e.type==="mouseup"||e.type==="pointerdown"||e.type==="pointerup")?this.button===1:(this.buttons&4)!==0}set middle(e){e?this.buttons|=4:this.buttons&=-5}get commandKey(){const e=this.code,t=this.key;return"cxvyzagCXVYZAG".includes(t)?t.toLowerCase():e==="KeyC"?"c":e==="KeyX"?"x":e==="KeyV"?"v":e==="KeyY"?"y":e==="KeyZ"?"z":e==="KeyA"?"a":e==="KeyG"?"g":e!==""?e:t}}class Zt{constructor(){v(this,"p");v(this,"Mt");v(this,"cm");v(this,"fm");this.p=null,this.Mt="",this.cm=null,this.fm=null}copy(){const e=new Zt;return e.p=this.p,e.Mt=this.Mt,e.cm=this.cm,e.fm=this.fm,e}toString(){let e="*"+this.name;return this.subject!==null&&(e+=":"+this.subject.toString()),this.parameter!==null&&(e+="("+this.parameter.toString()+")"),e}get diagram(){return this.p}set diagram(e){this.p=e}get name(){return this.Mt}set name(e){this.Mt=e}get subject(){return this.cm}set subject(e){this.cm=e}get parameter(){return this.fm}set parameter(e){this.fm=e}}var wt=(A=>(A[A.Transaction=1]="Transaction",A[A.Property=2]="Property",A[A.Insert=3]="Insert",A[A.Remove=4]="Remove",A))(wt||{});const so=class so{constructor(){v(this,"du");v(this,"um");v(this,"an");v(this,"Si");v(this,"p");v(this,"gu");v(this,"rc");v(this,"lc");v(this,"hc");v(this,"ac");this.du=2,this.um="",this.an="",this.Si=null,this.p=null,this.gu=null,this.rc=null,this.lc=null,this.hc=null,this.ac=null}clear(){this.Si=null,this.p=null,this.gu=null,this.rc=null,this.lc=null,this.hc=null,this.ac=null}copy(){const e=new so;e.du=this.du,e.um=this.um,e.an=this.an,e.Si=this.Si,e.p=this.p,e.gu=this.gu;let t=this.rc;return o.wt(t)&&typeof t.copyFrozen=="function"?e.rc=t.copyFrozen():e.rc=t,t=this.lc,o.wt(t)&&typeof t.copyFrozen=="function"?e.lc=t.copyFrozen():e.lc=t,t=this.hc,o.wt(t)&&typeof t.copyFrozen=="function"?e.hc=t.copyFrozen():e.hc=t,t=this.ac,o.wt(t)&&typeof t.copyFrozen=="function"?e.ac=t.copyFrozen():e.ac=t,e}ri(e){e in wt?this.change=e:o.lr(this,e)}toString(){let e="";return this.change===1?e+="* ":this.change===2?e+=this.model!==null?"!m":"!d":e+=(this.model!==null?"!m":"!d")+this.change,this.propertyName&&typeof this.propertyName=="string"&&(e+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(e+=" "+this.modelChange),e+=": ",this.change===1?this.oldValue!==null&&(e+=" "+this.oldValue):(this.object!==null&&(e+=o.toString(this.object)),this.oldValue!==null&&(e+="  old: "+o.toString(this.oldValue)),this.oldParam!==null&&(e+=" "+this.oldParam),this.newValue!==null&&(e+="  new: "+o.toString(this.newValue)),this.newParam!==null&&(e+=" "+this.newParam)),e}getValue(e){return e?this.oldValue:this.newValue}getParam(e){return e?this.oldParam:this.newParam}canUndo(){return this.model!==null||this.diagram!==null}undo(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.PC(this,!0))}canRedo(){return this.model!==null||this.diagram!==null}redo(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.PC(this,!1))}get model(){return this.Si}set model(e){this.Si=e}get diagram(){return this.p}set diagram(e){this.p=e}get change(){return this.du}set change(e){this.du=e}get modelChange(){return this.um}set modelChange(e){this.um=e}get propertyName(){return this.an}set propertyName(e){this.an=e}get isTransactionFinished(){return this.du===1&&(this.an==="CommittedTransaction"||this.an==="FinishedUndo"||this.an==="FinishedRedo")}get object(){return this.gu}set object(e){this.gu=e}get oldValue(){return this.rc}set oldValue(e){this.rc=e}get oldParam(){return this.lc}set oldParam(e){this.lc=e}get newValue(){return this.hc}set newValue(e){this.hc=e}get newParam(){return this.ac}set newParam(e){this.ac=e}};v(so,"Transaction",1),v(so,"Property",2),v(so,"Insert",3),v(so,"Remove",4);let ft=so;class ht{constructor(){v(this,"SC");v(this,"Mt");v(this,"Kk");this.SC=new M().g(),this.Mt="",this.Kk=!1}toString(e){let t="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(e!==void 0&&e>0){const n=this.changes.count;for(let i=0;i<n;i++){const r=this.changes.elt(i);r!==null&&(t+=`
  `+r.toString())}}return t}clear(){const e=this.changes;e.ot();for(let t=e.count-1;t>=0;t--){const n=e.elt(t);n!==null&&n.clear()}e.clear(),e.g()}canUndo(){return this.isComplete}undo(){if(this.canUndo())for(let e=this.changes.count-1;e>=0;e--){const t=this.changes.elt(e);t!==null&&t.undo()}}canRedo(){return this.isComplete}redo(){if(!this.canRedo())return;const e=this.changes.count;for(let t=0;t<e;t++){const n=this.changes.elt(t);n!==null&&n.redo()}}GD(e){const t=this.changes;for(let n=t.count-1;n>=e;n--){const i=t.elt(n);i!==null&&i.undo(),t.ot(),t.removeAt(n)}t.g()}optimize(){if(!this.isComplete)return;const e=this.changes;e.ot();const t=new W;for(let i=0;i<e.count;i++){const r=e.elt(i);if(r===null||r.change!==2||!r.object)continue;let a=t.get(r.object);a||(a=new W,t.set(r.object,a));const l=a.get(r.propertyName);l===null?a.set(r.propertyName,-1):(l>0&&e.setElt(l,null),a.set(r.propertyName,i))}let n=0;for(let i=0;i<e.count;i++){const r=e.elt(i);r!==null&&(i>n&&e.setElt(n,r),n++)}for(;e.length>n;)e.pop();e.g()}get changes(){return this.SC}get name(){return this.Mt}set name(e){this.Mt=e}get isComplete(){return this.Kk}set isComplete(e){this.Kk=e}}class gt{constructor(e){v(this,"Tw");v(this,"Oi");v(this,"MC");v(this,"vs");v(this,"Yk");v(this,"dm");v(this,"Yn");v(this,"Gk");v(this,"jk");v(this,"cn");v(this,"cc");v(this,"Dw");v(this,"Os");v(this,"Fw");v(this,"Rw");v(this,"gm");v(this,"vw");this.Tw=new L,this.Oi=!1,this.MC=new M().g(),this.vs=-1,this.Yk=999,this.Os=!1,this.dm=null,this.Yn=0,this.Gk=!1,this.jk=23,this.cn=new M().g(),this.cc=new M,this.Dw=!0,this.Fw=!1,this.Rw=!1,this.gm=!1,this.vw=!1,e&&Object.assign(this,e)}toString(e){let t="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;t+="[";let n=this.nestedTransactionNames.count;for(let i=0;i<n;i++)i>0&&(t+=" "),t+=this.nestedTransactionNames.elt(i);if(t+="]",e!==void 0&&e>0){n=this.history.count;for(let i=0;i<n;i++)t+=`
 `+this.history.elt(i).toString(e-1)}return t}clear(){const e=this.history;e.ot();for(let t=e.count-1;t>=0;t--){const n=e.elt(t);n!==null&&n.clear()}e.clear(),this.vs=-1,e.g(),this.Os=!1,this.dm=null,this.Yn=0,this.cn.ot(),this.cn.clear(),this.cn.g(),this.cc.clear(),this.Fw=!1,this.Rw=!1,this.gm=!1,this.vw=!1}copyProperties(e){this.isEnabled=e.isEnabled,this.maxHistoryLength=e.maxHistoryLength,this.mm=e.mm}addModel(e){this.Tw.add(e)}removeModel(e){this.Tw.delete(e)}startTransaction(e){if(e===void 0&&(e=""),e===null&&(e=""),this.isUndoingRedoing)return!1;this.Dw===!0&&(this.Dw=!1,this.Yn++,this.wl||this.t("StartingFirstTransaction",e,this.currentTransaction),this.Yn>0&&this.Yn--),this.isEnabled&&(this.cn.ot(),this.cn.add(e),this.cn.g(),this.currentTransaction===null?this.cc.add(0):this.cc.add(this.currentTransaction.changes.count)),this.Yn++;const t=this.transactionLevel===1;return t&&(this.wl||this.t("StartedTransaction",e,this.currentTransaction)),t}commitTransaction(e){return e===void 0&&(e=""),this.NC(!0,e)}rollbackTransaction(){return this.NC(!1,"")}NC(e,t){if(this.isUndoingRedoing)return!1;this.mm&&this.transactionLevel<1&&o.ii("Ending transaction without having started a transaction: "+t);const n=this.transactionLevel===1;let i=this.currentTransaction;n&&e&&(this.wl||this.t("CommittingTransaction",t,i));let r=0;if(this.transactionLevel>0&&(this.Yn--,this.isEnabled)){const a=this.cn.count;a>0&&(t===""&&(t=this.cn.elt(0)),this.cn.ot(),this.cn.removeAt(a-1),this.cn.g());const l=this.cc.count;l>0&&(r=this.cc.elt(l-1),this.cc.removeAt(l-1))}if(n){if(e){if(this.gm=!1,i===null&&t!==""&&(i=this.currentTransaction),this.isEnabled&&i!==null){const a=i;a.isComplete||(a.isComplete=!0,a.name=t),this.discardHistoryAfterIndex();const l=this.history;l.ot();const u=this.maxHistoryLength;if(u>=0){if(u===0)l.clear();else if(l.count>=u){const c=l.elt(0);c!==null&&c.clear(),l.removeAt(0),this.vs--}}u!==0&&(l.count===0||l.get(l.count-1)!==a)&&(l.add(a),this.vs++),l.g(),i=a}this.wl||this.t("CommittedTransaction",t,i)}else{this.Os=!0;try{this.isEnabled&&i!==null&&(i.isComplete=!0,i.undo())}finally{this.wl||this.t("RolledBackTransaction",t,i),this.Os=!1}i!==null&&i.clear()}return this.dm=null,this.Ow&&this.clear(),this.Ow=!1,this.Iw=!1,!0}else return this.isEnabled&&!e&&i!==null&&i.GD(r),!1}discardHistoryAfterIndex(){if(this.isUndoingRedoing||!this.canRedo())return;const e=this.history;e.ot();for(let t=e.count-1;t>this.historyIndex;t--){const n=e.elt(t);n!==null&&n.clear(),e.removeAt(t),this.gm=!0}e.g()}nE(e){this.Yn+=e,this.Yn<0&&(this.Yn=0)}canUndo(){if(!this.isEnabled||this.transactionLevel>0)return!1;const e=this.transactionToUndo;return!!(e!==null&&e.canUndo())}undo(){if(!this.canUndo())return;const e=this.transactionToUndo;try{this.Os=!0,this.t("StartingUndo","Undo",e),this.vs--,e.undo()}catch(t){o.ii("undo error: "+t.toString())}finally{this.t("FinishedUndo","Undo",e),this.Os=!1}}canRedo(){if(!this.isEnabled||this.transactionLevel>0)return!1;const e=this.transactionToRedo;return!!(e!==null&&e.canRedo())}redo(){if(!this.canRedo())return;const e=this.transactionToRedo;try{this.Os=!0,this.t("StartingRedo","Redo",e),this.vs++,e.redo()}catch(t){o.ii("redo error: "+t.toString())}finally{this.t("FinishedRedo","Redo",e),this.Os=!1}}t(e,t,n){n===void 0&&(n=null);const i=new ft;i.change=1,i.propertyName=e,i.object=n,i.oldValue=t;const r=this.models;for(;r.next();){const a=r.value;i.model=a,a.Ew(i)}}handleChanged(e){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(e)){let t=this.currentTransaction;t===null&&(t=new ht,this.dm=t);const n=e.copy(),i=t.changes;if(i.ot(),i.add(n),i.g(),this.mm&&this.jk>0&&this.transactionLevel<=0&&!this.Dw){const r=e.diagram;if(r!==null&&r.Bh===!1)return;o.ii("Change not within a transaction: "+n.toString()),this.jk--}}}skipsEvent(e){if(e===null||e.change===1)return!0;const t=e.object;if(t===null)return!1;if(t.layer!==void 0){const n=t.layer;if(n!==null&&n.isTemporary)return!0}else if(t.isTemporary)return!0;return!1}get models(){return this.Tw.iterator}get isEnabled(){return this.Oi}set isEnabled(e){this.Oi=e}get transactionToUndo(){return this.historyIndex>=0&&this.historyIndex<=this.history.count-1?this.history.elt(this.historyIndex):null}get transactionToRedo(){return this.historyIndex<this.history.count-1?this.history.elt(this.historyIndex+1):null}get isUndoingRedoing(){return this.Os}get history(){return this.MC}get maxHistoryLength(){return this.Yk}set maxHistoryLength(e){this.Yk=e}get historyIndex(){return this.vs}get currentTransaction(){return this.dm}get transactionLevel(){return this.Yn}get isInTransaction(){return this.Yn>0}get mm(){return this.Gk}set mm(e){this.Gk=e}get nestedTransactionNames(){return this.cn}get Ow(){return this.Fw}set Ow(e){this.Fw=e}get Iw(){return this.Rw}set Iw(e){this.Rw=e}get wl(){return this.vw}set wl(e){this.vw=e}get isJustDiscarded(){return this.gm}}class St{constructor(){v(this,"p");v(this,"Mt");v(this,"Oi");v(this,"Hk");v(this,"qk");v(this,"pm");v(this,"CC");L.Gi(this),this.p=le.ym(),this.Mt="",this.Oi=!0,this.Hk=!1,this.qk=null,this.CC=new Et,this.pm=-1}get diagram(){return this.p}set diagram(e){e instanceof le&&(this.p=e)}toString(){return this.name!==""?this.name+" Tool":o.sn(this.constructor)}updateAdornments(e){}canStart(){return this.isEnabled}doStart(){}doActivate(){this.isActive=!0}doDeactivate(){this.isActive=!1}doStop(){}doCancel(){this.transactionResult=null,this.stopTool()}stopTool(){const e=this.diagram;e.currentTool===this&&(e.currentTool=null,e.currentCursor="")}doMouseDown(){!this.isActive&&this.canStart()&&this.doActivate()}doMouseMove(){}doMouseUp(){this.stopTool()}doMouseWheel(){}canStartMultiTouch(){return!0}standardPinchZoomStart(){const e=this.diagram,t=e.lastInput,n=t.getMultiTouchViewPoint(0,T.X(NaN,NaN)),i=t.getMultiTouchViewPoint(1,T.X(NaN,NaN));if(!n.isReal()||!i.isReal()){T.s(n),T.s(i);return}if(this.doCancel(),e.getInputOption("hasGestureZoom")){e.Wk=e.scale;const r=i.x-n.x,a=i.y-n.y,l=Math.sqrt(r*r+a*a);e.Jk=l,t.bubbles=!1}T.s(n),T.s(i)}standardPinchZoomMove(){const e=this.diagram,t=e.lastInput,n=t.getMultiTouchViewPoint(0,T.X(NaN,NaN)),i=t.getMultiTouchViewPoint(1,T.X(NaN,NaN));if(!n.isReal()||!i.isReal()){T.s(n),T.s(i);return}if(this.doCancel(),e.getInputOption("hasGestureZoom")){const r=i.x-n.x,a=i.y-n.y,l=Math.sqrt(r*r+a*a)/e.Jk,u=new T((Math.min(i.x,n.x)+Math.max(i.x,n.x))/2,(Math.min(i.y,n.y)+Math.max(i.y,n.y))/2),c=e.Wk*l,f=e.commandHandler;if(c!==e.scale&&f.canResetZoom(c)){const m=e.zoomPoint;e.zoomPoint=u,f.resetZoom(c),e.zoomPoint=m}t.bubbles=!1}T.s(n),T.s(i)}doKeyDown(){this.diagram.lastInput.code==="Escape"&&this.doCancel()}doKeyUp(){}startTransaction(e){return e===void 0&&(e=this.name),this.transactionResult=null,this.diagram.startTransaction(e)}stopTransaction(){const e=this.diagram;return this.transactionResult===null?e.rollbackTransaction():e.commitTransaction(this.transactionResult)}standardMouseSelect(){const e=this.diagram;if(!e.allowSelect)return;const t=e.lastInput,n=e.findPartAt(t.documentPoint,!1);if(n!==null){if(o.rr?t.meta:t.control){e.v("ChangingSelection",e.selection);let i=n;for(;i!==null&&!i.canSelect();)i=i.containingGroup;i!==null&&(i.isSelected=!i.isSelected),e.v("ChangedSelection",e.selection)}else if(t.shift){if(!n.isSelected){e.v("ChangingSelection",e.selection);let i=n;for(;i!==null&&!i.canSelect();)i=i.containingGroup;i!==null&&(i.isSelected=!0),e.v("ChangedSelection",e.selection)}}else if(!n.isSelected){let i=n;for(;i!==null&&!i.canSelect();)i=i.containingGroup;i!==null&&e.select(i)}}else t.left&&!(o.rr?t.meta:t.control)&&!t.shift&&e.clearSelection()}standardMouseClick(e,t){e===void 0&&(e=null),t===void 0&&(t=a=>!a.layer.isTemporary);const n=this.diagram,i=n.lastInput,r=n.findObjectAt(i.documentPoint,e,t);return i.targetObject=r,this.jD(r,i,n),i.handled}jD(e,t,n){if(t.handled=!1,e!==null&&!e.isEnabledObject())return;let i=0;t.left?t.clickCount===1?i=1:t.clickCount===2?i=2:i=1:t.right&&t.clickCount===1&&(i=3);let r="ObjectSingleClicked";if(e!==null){switch(i){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked";break}i!==0&&n.v(r,e)}else{switch(i){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked";break}i!==0&&n.v(r)}if(e!==null)for(;e!==null;){let a=null;switch(i){case 1:a=e.click;break;case 2:a=e.doubleClick?e.doubleClick:e.click;break;case 3:a=e.contextClick;break}if(a!==null&&(a(t,e),t.handled))break;e=e.panel}else{let a=null;switch(i){case 1:a=n.click;break;case 2:a=n.doubleClick?n.doubleClick:n.click;break;case 3:a=n.contextClick;break}a!==null&&a(t)}}standardMouseOver(){const e=this.diagram,t=e.lastInput;if(e.animationManager.wi===!0)return;const n=e.skipsUndoManager;e.skipsUndoManager=!0;let i=e.viewportBounds.containsPoint(t.documentPoint)?e.findObjectAt(t.documentPoint,null,null):null;t.event&&(t.event.type==="pointercancel"||t.event.type==="pointerout")&&(i=null),t.targetObject=i;let r=!1;if(i!==e.fc){let a=e.fc;const l=a;for(e.fc=i,this.doCurrentObjectChanged(a,i),t.handled=!1;a!==null;){const u=a.mouseLeave;if(u!==null&&(i===a||i!==null&&i.isContainedBy(a)||(u(t,a,i),r=!0,t.handled)))break;a=a.panel}for(a=l,t.handled=!1;i!==null;){const u=i.mouseEnter;if(u!==null&&(a===i||a!==null&&a.isContainedBy(i)||(u(t,i,a),r=!0,t.handled)))break;i=i.panel}i=e.fc}if(i!==null){let a=i,l="";for(;a!==null&&(l=a.cursor,l==="");)a=a.panel;for(e.currentCursor=l,t.handled=!1,a=i;a!==null;){const u=a.mouseOver;if(u!==null&&(u(t,a),r=!0,t.handled))break;a=a.panel}}else{this.doUpdateCursor(null);const a=e.mouseOver;a!==null&&(a(t),r=!0)}r&&e.requestUpdate(),e.skipsUndoManager=n}doUpdateCursor(e){const t=this.diagram;t&&(t.currentCursor="")}doCurrentObjectChanged(e,t){}standardMouseWheel(){const e=this.diagram,t=e.lastInput;let n=t.delta;if(n===0||!e.documentBounds.isReal())return;const i=e.commandHandler,r=e.toolManager.mouseWheelBehavior;if(i!==null&&(r===2&&!t.shift||r===1&&t.control)){if(n>0?i.canIncreaseZoom():i.canDecreaseZoom()){const a=e.zoomPoint;e.zoomPoint=t.viewPoint,n>0?i.increaseZoom():i.decreaseZoom(),e.zoomPoint=a}t.bubbles=!1}else if(r===2&&t.shift||r===1&&!t.control){const a=e.position.copy(),l=t.event,u=l.deltaMode;let c=l.deltaX,f=l.deltaY,m="pixel";if((c!==0||f!==0)&&!t.shift){switch(u){case 0:m="pixel";break;case 1:m="line";break;case 2:m="page";break}if(c!==0&&e.allowHorizontalScroll){const p=e.scrollHorizontalLineChange;c=c*(p/16),e.scroll(m,c>0?"right":"left",Math.abs(c))}if(f!==0&&e.allowVerticalScroll){const p=e.scrollVerticalLineChange;f=f*(p/16),e.scroll(m,f>0?"down":"up",Math.abs(f))}}else!t.shift&&e.allowVerticalScroll?(n=n*3*e.scrollVerticalLineChange,e.scroll(m,n>0?"up":"down",Math.abs(n))):t.shift&&e.allowHorizontalScroll&&(n=n*3*e.scrollHorizontalLineChange,e.scroll(m,n>0?"left":"right",Math.abs(n)));this.doWheelChange(e,a,t)}}doWheelChange(e,t,n){(!e.position.equals(t)||n.event.wheelDeltaX!==0)&&(n.bubbles=!1)}standardWaitAfter(e,t){t===void 0&&(t=this.diagram.lastInput),this.cancelWaitAfter();const n=this,i=t.clone(this.CC);this.pm=o.Oh(()=>n.doWaitAfter(i),e)}cancelWaitAfter(){this.pm!==-1&&o.Eg(this.pm),this.pm=-1}doWaitAfter(e){}findToolHandleAt(e,t){const n=this.diagram.findObjectAt(e,i=>{for(;i!==null&&!(i.panel instanceof ie);)i=i.panel;return i});return n===null?null:n.part.category===t?n:null}isBeyondDragSize(e,t){const n=this.diagram;e===void 0&&(e=n.firstInput.viewPoint),t===void 0&&(t=n.lastInput.viewPoint);const i=n.toolManager.dragSize;let r=i.width,a=i.height;return n.firstInput.isTouchEvent&&(r+=6,a+=6),Math.abs(t.x-e.x)>r||Math.abs(t.y-e.y)>a}get name(){return this.Mt}set name(e){this.Mt=e}get isEnabled(){return this.Oi}set isEnabled(e){this.Oi=e}get isActive(){return this.Hk}set isActive(e){this.Hk=e}get transactionResult(){return this.qk}set transactionResult(e){this.qk=e}}var Ct=(A=>(A[A.Scroll=1]="Scroll",A[A.Zoom=2]="Zoom",A[A.None=3]="None",A))(Ct||{}),Bt=(A=>(A[A.Zoom=1]="Zoom",A[A.Cancel=2]="Cancel",A[A.None=3]="None",A))(Bt||{});class Ht extends St{constructor(t){super();v(this,"LC");v(this,"AC");v(this,"TC");v(this,"$k");v(this,"Zk");v(this,"Qk");v(this,"_k");v(this,"tP");v(this,"iP");v(this,"eP");v(this,"wm");v(this,"Uh");this.name="ToolManager",this.LC=new M,this.AC=new M,this.TC=new M,this.$k=850,this.Zk=850,this.Qk=new B(2,2).it(),this._k=5e3,this.tP=1,this.iP=1,this.eP=null,this.wm=null,this.Uh=-1,t&&Object.assign(this,t)}get mouseWheelBehavior(){return this.tP}set mouseWheelBehavior(t){this.tP=t}get gestureBehavior(){return this.iP}set gestureBehavior(t){this.iP=t}initializeStandardTools(){}updateAdornments(t){const n=this.currentToolTip;if(n instanceof ie&&this.wm===t){const i=n.adornedObject;(t!==null?i.part===t:i===null)?this.showToolTip(n,i):this.hideToolTip()}}doMouseDown(){const t=this.diagram,n=t.lastInput;if(n.isTouchEvent&&this.gestureBehavior===2&&(n.bubbles=!1),n.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===3){n.bubbles=!0;return}if(this.gestureBehavior===2)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}t.undoManager;const i=this.mouseDownTools.length;for(let r=0;r<i;r++){const a=this.mouseDownTools.elt(r);if(a.diagram=this.diagram,a.canStart()){t.doFocus(),t.currentTool=a,t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===1?this.mouseWheelBehavior=2:this.mouseWheelBehavior===2&&(this.mouseWheelBehavior=1)),this.doActivate(),this.standardWaitAfter(this.holdDelay,n)}doMouseMove(){const t=this.diagram,n=t.lastInput;if(n.isMultiTouch){if(this.gestureBehavior===3){n.bubbles=!0;return}if(this.gestureBehavior===2)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive){const r=this.mouseMoveTools.length;for(let a=0;a<r;a++){const l=this.mouseMoveTools.elt(a);if(l.diagram=this.diagram,l.canStart()){t.doFocus(),t.currentTool=l,t.currentTool===l&&(l.isActive||l.doActivate(),l.doMouseMove());return}}}this.standardMouseActivity(t);const i=n.event;i!==null&&(i.type==="pointermove"||!i.cancelable)&&(n.bubbles=!0)}standardMouseActivity(t){this.standardMouseOver(),this.isBeyondDragSize()&&this.standardWaitAfter(this.isActive?this.holdDelay:this.hoverDelay,t.lastInput)}doCurrentObjectChanged(t,n){const i=this.currentToolTip;i!==null&&(n!==null&&i instanceof ie&&(n===i||n.isContainedBy(i))||this.hideToolTip())}doWaitAfter(t){const n=this.diagram;if(n.HD()&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!n.lastInput.handled)){const i=t.copy();i.button=2,n.lastInput=i,n.Bw=!0,n.doMouseUp();return}}doMouseHover(){const t=this.diagram,n=t.lastInput;n.targetObject===null&&(n.targetObject=t.findObjectAt(n.documentPoint,null,null));let i=n.targetObject;if(i!==null)for(n.handled=!1;i!==null;){const r=this.isActive?i.mouseHold:i.mouseHover;if(r!==null&&(r(n,i),n.handled))break;i=i.panel}else{const r=this.isActive?t.mouseHold:t.mouseHover;r!==null&&r(n)}}doToolTip(){const t=this.diagram,n=t.lastInput;n.targetObject===null&&(n.targetObject=t.findObjectAt(n.documentPoint,null,null));let i=n.targetObject;if(i!==null){const r=this.currentToolTip;if(r instanceof ie&&(i===r||i.isContainedBy(r)))return;for(;i!==null;){const a=i.toolTip;if(a!==null){this.showToolTip(a,i);return}i=i.panel}this.hideToolTip()}else{const r=t.toolTip;r!==null?this.showToolTip(r,null):this.hideToolTip()}}showToolTip(t,n){const i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof ie){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",t.hasPlaceholder()&&(t.placeholder.scale=i.scale);const a=t.diagram;a!==null&&a!==i&&a.remove(t),i.add(t),n!==null?t.adornedObject=n:t.data=i.model,t.ensureBounds(),this.positionToolTip(t,n)}else t instanceof Dn&&t!==this.currentToolTip&&t.show(n,i,this);this.currentToolTip=t,this.Uh!==-1&&(o.Eg(this.Uh),this.Uh=-1);const r=this.toolTipDuration;if(r>0&&r!==1/0){const a=this;this.Uh=o.Oh(()=>a.hideToolTip(),r)}}positionToolTip(t,n){if(t.hasPlaceholder())return;const i=t,r=this.diagram,a=r.lastInput.documentPoint.copy(),l=i.measuredBounds,u=r.viewportBounds;r.lastInput.isTouchEvent&&(a.x-=l.width),a.x+l.width>u.right&&(a.x-=l.width+5/r.scale),a.x<u.x&&(a.x=u.x),a.y+20/r.scale+l.height>u.bottom?a.y-=l.height+5/r.scale:a.y+=20/r.scale,a.y<u.y&&(a.y=u.y),i.position=a}hideToolTip(){this.Uh!==-1&&(o.Eg(this.Uh),this.Uh=-1);const t=this.diagram,n=this.currentToolTip;n!==null&&(n instanceof ie?(t.remove(n),this.wm!==null&&this.wm.removeAdornment(n.category),n.data=null,n.adornedObject=null):n instanceof Dn&&n.hide!==null&&n.hide(t,this),this.currentToolTip=null)}get currentToolTip(){return this.eP}set currentToolTip(t){this.eP=t,this.wm=t!==null&&t instanceof ie?t.adornedPart:null}doMouseUp(){this.cancelWaitAfter();const t=this.diagram;if(this.isActive){const n=this.mouseUpTools.length;for(let i=0;i<n;i++){const r=this.mouseUpTools.elt(i);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseUp());return}}}t.doFocus(),this.doDeactivate()}doMouseWheel(){this.standardMouseWheel()}doKeyDown(){const t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()}doKeyUp(){const t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()}findTool(t){let n=this.mouseDownTools.length;for(let i=0;i<n;i++){const r=this.mouseDownTools.elt(i);if(r.name===t)return r}n=this.mouseMoveTools.length;for(let i=0;i<n;i++){const r=this.mouseMoveTools.elt(i);if(r.name===t)return r}n=this.mouseUpTools.length;for(let i=0;i<n;i++){const r=this.mouseUpTools.elt(i);if(r.name===t)return r}return null}replaceTool(t,n){n!==null&&(n.diagram=this.diagram);let i=this.mouseDownTools.length;for(let r=0;r<i;r++){const a=this.mouseDownTools.elt(r);if(a.name===t)return n!==null?this.mouseDownTools.setElt(r,n):this.mouseDownTools.removeAt(r),a}i=this.mouseMoveTools.length;for(let r=0;r<i;r++){const a=this.mouseMoveTools.elt(r);if(a.name===t)return n!==null?this.mouseMoveTools.setElt(r,n):this.mouseMoveTools.removeAt(r),a}i=this.mouseUpTools.length;for(let r=0;r<i;r++){const a=this.mouseUpTools.elt(r);if(a.name===t)return n!==null?this.mouseUpTools.setElt(r,n):this.mouseUpTools.removeAt(r),a}return null}replaceStandardTool(t,n,i){this.Jt(t,n,i)}Jt(t,n,i){n!==null&&(n.name=t,n.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,n):n!==null&&i.add(n)}get mouseDownTools(){return this.LC}get mouseMoveTools(){return this.AC}get mouseUpTools(){return this.TC}get hoverDelay(){return this.$k}set hoverDelay(t){this.$k=t}get holdDelay(){return this.Zk}set holdDelay(t){this.Zk=t}get dragSize(){return this.Qk}set dragSize(t){this.Qk=t.N()}get toolTipDuration(){return this._k}set toolTipDuration(t){this._k=t}get actionTool(){return this.findTool("Action")}set actionTool(t){this.Jt("Action",t,this.mouseDownTools)}get relinkingTool(){return this.findTool("Relinking")}set relinkingTool(t){this.Jt("Relinking",t,this.mouseDownTools)}get linkReshapingTool(){return this.findTool("LinkReshaping")}set linkReshapingTool(t){this.Jt("LinkReshaping",t,this.mouseDownTools)}get resizingTool(){return this.findTool("Resizing")}set resizingTool(t){this.Jt("Resizing",t,this.mouseDownTools)}get rotatingTool(){return this.findTool("Rotating")}set rotatingTool(t){this.Jt("Rotating",t,this.mouseDownTools)}get linkingTool(){return this.findTool("Linking")}set linkingTool(t){this.Jt("Linking",t,this.mouseMoveTools)}get draggingTool(){return this.findTool("Dragging")}set draggingTool(t){this.Jt("Dragging",t,this.mouseMoveTools)}get dragSelectingTool(){return this.findTool("DragSelecting")}set dragSelectingTool(t){this.Jt("DragSelecting",t,this.mouseMoveTools)}get panningTool(){return this.findTool("Panning")}set panningTool(t){this.Jt("Panning",t,this.mouseMoveTools)}get contextMenuTool(){return this.findTool("ContextMenu")}set contextMenuTool(t){this.Jt("ContextMenu",t,this.mouseUpTools)}get textEditingTool(){return this.findTool("TextEditing")}set textEditingTool(t){this.Jt("TextEditing",t,this.mouseUpTools)}get clickCreatingTool(){return this.findTool("ClickCreating")}set clickCreatingTool(t){this.Jt("ClickCreating",t,this.mouseUpTools)}get clickSelectingTool(){return this.findTool("ClickSelecting")}set clickSelectingTool(t){this.Jt("ClickSelecting",t,this.mouseUpTools)}}v(Ht,"WheelScroll",1),v(Ht,"WheelZoom",2),v(Ht,"WheelNone",3),v(Ht,"GestureZoom",1),v(Ht,"GestureCancel",2),v(Ht,"GestureNone",3);const be=class be extends St{constructor(t){super();v(this,"sP");v(this,"nP");v(this,"fn");v(this,"oP");v(this,"rP");v(this,"lP");v(this,"hP");v(this,"uc");v(this,"xm");v(this,"aP");v(this,"Vh");v(this,"mr");v(this,"DC");v(this,"cP");v(this,"mu");v(this,"pu");v(this,"fP");v(this,"uP");v(this,"dP");v(this,"gP");this.name="Dragging",this.sP=!0,this.gP=!0,this.nP=!0,this.fn=null,this.oP=null,this.rP=null,this.lP=null,this.hP=!1,this.mu=!1,this.uc=new T(NaN,NaN),this.xm=new T,this.aP=!0,this.Vh=100,this.mr=[],this.DC=new L().g(),this.cP=new wr,this.pu=null,this.fP="copy",this.uP="",this.dP="no-drop",t&&Object.assign(this,t)}get isCopyEnabled(){return this.sP}set isCopyEnabled(t){this.sP=t}get copiesEffectiveCollection(){return this.nP}set copiesEffectiveCollection(t){this.nP=t}get dragOptions(){return this.cP}set dragOptions(t){this.cP=t}get isGridSnapEnabled(){return this.dragOptions.isGridSnapEnabled}set isGridSnapEnabled(t){this.dragOptions.isGridSnapEnabled=t}get isComplexRoutingRealtime(){return this.aP}set isComplexRoutingRealtime(t){this.aP=t;const n=this.diagram.findRouter("AvoidsLinks");n!==null&&(n.isRealtime=t)}get isGridSnapRealtime(){return this.dragOptions.isGridSnapRealtime}set isGridSnapRealtime(t){this.dragOptions.isGridSnapRealtime=t}get gridSnapCellSize(){return this.dragOptions.gridSnapCellSize}set gridSnapCellSize(t){this.dragOptions.gridSnapCellSize.equals(t)||(t=t.N(),this.dragOptions.gridSnapCellSize=t)}get gridSnapCellSpot(){return this.dragOptions.gridSnapCellSpot}set gridSnapCellSpot(t){this.dragOptions.gridSnapCellSpot.equals(t)||(t=t.N(),this.dragOptions.gridSnapCellSpot=t)}get gridSnapOrigin(){return this.dragOptions.gridSnapOrigin}set gridSnapOrigin(t){this.dragOptions.gridSnapOrigin.equals(t)||(t=t.N(),this.dragOptions.gridSnapOrigin=t)}get dragsLink(){return this.dragOptions.dragsLink}set dragsLink(t){this.dragOptions.dragsLink=t}get dragsTree(){return this.dragOptions.dragsTree}set dragsTree(t){this.dragOptions.dragsTree=t}get copyCursor(){return this.fP}set copyCursor(t){this.fP=t}get moveCursor(){return this.uP}set moveCursor(t){this.uP=t}get nodropCursor(){return this.dP}set nodropCursor(t){this.dP=t}get currentPart(){return this.oP}set currentPart(t){this.oP=t}get copiedParts(){return this.lP}set copiedParts(t){this.lP=t}get draggedParts(){return this.rP}set draggedParts(t){this.rP=t}get draggingParts(){return this.copiedParts!==null?this.copiedParts.toKeySet():this.draggedParts!==null?this.draggedParts.toKeySet():this.DC}get draggedLink(){return this.diagram.draggedLink}set draggedLink(t){this.diagram.draggedLink=t}get isDragOutStarted(){return this.hP}set isDragOutStarted(t){this.hP=t}get startPoint(){return this.xm}set startPoint(t){this.xm.equals(t)||this.xm.a(t)}get delay(){return this.Vh}set delay(t){this.Vh=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t===null||t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;const n=t.lastInput;return!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.Vh)?!1:this.findDraggablePart()!==null}findDraggablePart(){const t=this.diagram;let n=t.findPartAt(t.firstInput.documentPoint,!1);if(n===null)return null;for(;n!==null&&!n.canSelect();)n=n.containingGroup;return n!==null&&(n.canMove()||n.canCopy())?n:null}standardMouseSelect(){const t=this.diagram;if(!t.allowSelect)return;let n=t.findPartAt(t.firstInput.documentPoint,!1);if(n!==null){for(;n!==null&&!n.canSelect();)n=n.containingGroup;if(this.currentPart=n,this.currentPart!==null&&!this.currentPart.isSelected){t.v("ChangingSelection",t.selection);const i=t.lastInput;!(o.rr?i.meta:i.control)&&!i.shift&&t.clearSelection(!0),this.currentPart.isSelected=!0,t.v("ChangedSelection",t.selection)}}}doActivate(){const t=this.diagram;this.pu=null,this.currentPart===null&&this.standardMouseSelect();const n=this.currentPart;if(n===null||!n.canMove()&&!n.canCopy())return;t.cacheGroupExternalLinks(!0),be.yt=null,this.isActive=!0,this.uc.set(t.position),this.mP(t.selection),this.mr.length=0,t.animationManager.stopAnimation();const i=this.computeEffectiveCollection(t.selection,this.dragOptions);this.draggedParts=i,this.gP=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.dc=!0,t.getRenderingHint("temporaryPixelRatio")===!0&&t.avgSpf>30&&t.Uw(),t.Vw(this.draggedParts),t.yu=!0,this.startTransaction("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&this.qD()}mP(t){if(this.dragsLink){const n=this.diagram;if(!n.allowRelink)return;n.model.gc()&&t.count===1&&t.first()instanceof Gt?(this.draggedLink=t.first(),this.draggedLink.canRelinkFrom()&&this.draggedLink.canRelinkTo()&&this.draggedLink.clearAdornments(),this.fn=n.toolManager.findTool("Relinking"),this.fn===null&&(this.fn=new je,this.fn.diagram=n),this.fn.originalLink=this.draggedLink):(this.draggedLink=null,this.fn=null)}}computeEffectiveCollection(t,n){return this.diagram.commandHandler.computeEffectiveCollection(t,n)}Is(t){return t===void 0?new bs(T.Po):this.isGridSnapEnabled?new bs(new T(Math.round(t.x*1e3)/1e3,Math.round(t.y*1e3)/1e3)):new bs(t.copy())}doDeactivate(){this.isActive=!1;const t=this.diagram;this.diagram.layout.isRealtime=this.gP,t.yu=!1,t.xl=!0,t.cacheGroupExternalLinks(!1),t.stopAutoScroll(),this.pP(),t.bm(this.draggedParts),this.pu=null,this.currentPart=null,this.draggedParts=null,this.isDragOutStarted=!1,this.mu=!1,be.WD(),this.FC(),this.uc.e(NaN,NaN),be.zh!==null&&(be.zh.currentCursor=""),be.zh=null,be.yt=null,this.bl(),t.isMouseCaptured=!1,t.currentCursor="",t.dc=!1,this.stopTransaction(),t.yP(!0)}stopTransaction(){const t=this.diagram,n=super.stopTransaction();return n&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.optimize(),n}pP(){const t=this.diagram,n=t.skipsUndoManager;t.skipsUndoManager=!0;const i=t.lastInput;this.RC(i,null),t.skipsUndoManager=n,this.mr.length=0}vC(){this.bl(),this.wP();const t=this.diagram;this.uc.isReal()&&(t.position=this.uc),t.stopAutoScroll()}doCancel(){this.bl(),this.wP();const t=this.diagram;this.uc.isReal()&&(t.position=this.uc),this.stopTool()}doKeyDown(){const t=this.diagram,n=t.lastInput;this.isActive&&(n.code==="Escape"?this.doCancel():n.code!==t.previousInput.code&&this.doMouseMove())}doKeyUp(){this.isActive&&this.doMouseMove()}JD(t,n){let i=1/0,r=1/0,a=-1/0,l=-1/0;const u=t.iterator;for(;u.next();){const c=u.value;if(!c.isVisible())continue;const f=c.location,m=f.x,p=f.y;isNaN(m)||isNaN(p)||(m<i&&(i=m),p<r&&(r=p),m>a&&(a=m),p>l&&(l=p))}return i===1/0?n.e(0,0,0,0):n.e(i,r,a-i,l-r),n}xP(t){if(this.copiedParts!==null)return;const n=this.diagram;if(t&&(n.isReadOnly||n.isModelReadOnly)||this.draggedParts===null)return;const i=n.undoManager;i.isEnabled&&i.isInTransaction?i.currentTransaction!==null&&i.currentTransaction.changes.count>0&&(n.undoManager.rollbackTransaction(),n.startTransaction("Drag")):this.wP(),n.skipsUndoManager=!t,n.partManager.addsToTemporaryLayer=!t,this.startPoint=n.firstInput.documentPoint;const r=this.copiesEffectiveCollection?this.draggedParts.toKeySet():n.selection,a=n.copyParts(r,n,!0),l=new W,u=this.draggedParts.iterator;for(;u.next();){const f=u.key;if(f.Pe()&&f.canCopy()){const m=a.get(f);if(m===null)continue;m.location=f.location,m.ensureBounds(),l.set(m,this.Is(m.location))}}const c=a.iterator;for(;c.next();){const f=c.value;f instanceof Gt&&f.canCopy()&&l.set(f,this.Is())}if(this.copiedParts=l,this.mP(l.toKeySet()),this.draggedLink!==null){const f=this.draggedLink,m=f.routeBounds;f.pr(this.startPoint.x-(m.x+m.width/2),this.startPoint.y-(m.y+m.height/2))}this.doUpdateCursor(null)}bl(){const t=this.diagram;if(this.copiedParts!==null){if(t.removeParts(this.copiedParts.toKeySet(),!1),this.copiedParts=null,this.draggedParts!==null){const n=this.draggedParts.iterator;for(;n.next();)if(n.key instanceof Gt){const i=n.value;i.point=new T(0,0)}}this.doUpdateCursor(null)}t.skipsUndoManager=!1,t.partManager.addsToTemporaryLayer=!1,this.startPoint=t.firstInput.documentPoint}FC(){this.draggedLink!==null&&(this.dragsLink&&this.fn!==null&&(this.fn.stopDraggingMouseMove(),this.fn.originalLink=null),this.draggedLink=null,this.fn=null)}mc(t,n){const i=this.diagram,r=this.startPoint,a=T.l();a.a(i.lastInput.documentPoint),this.moveParts(t,a.subtract(r),n),T.s(a),i.getRenderingHint("temporaryPixelRatio")===!0&&i.kl===null&&i.avgSpf>30&&(i.Uw(),i.wu())}moveParts(t,n,i){i===void 0&&(i=!1);const r=this.diagram;r!==null&&r.bP(t,n,this.dragOptions,i)}wP(){if(this.draggedParts===null)return;const t=this.diagram;let n=this.draggedParts.iterator;for(;n.next();){const i=n.key;i.Pe()&&(i.location=n.value.point)}for(n=this.draggedParts.iterator;n.next();){const i=n.key;if(i instanceof Gt&&i.suspendsRouting){const r=n.value.point;this.draggedParts.set(i,this.Is()),i.pr(-r.x,-r.y)}}t.maybeUpdate()}$D(t){if(t===null)return!0;const n=t.part;return!!(n===null||n instanceof ie||n.layer.isTemporary||this.draggedParts&&this.draggedParts.has(n)||this.copiedParts&&this.copiedParts.has(n))}kP(t){const n=this.diagram;this.dragsLink&&(this.draggedLink!==null&&(this.draggedLink.fromNode=null,this.draggedLink.toNode=null),this.OC(!1));const i=this.findDragOverObject(t),r=n.lastInput;r.targetObject=i,this.doUpdateCursor(i);const a=n.skipsUndoManager;let l=!1;try{if(n.skipsUndoManager=!0,l=this.RC(r,i),!this.isActive&&be.yt===null)return;const u=i!==null?i.part:null;if(u===null||n.handlesDragDropForTopLevelParts&&u.isTopLevel&&!(u instanceof Vt)){const c=n.mouseDragOver;c!==null&&(c(r),l=!0)}if(!this.isActive&&be.yt===null||(this.doDragOver(t,i),!this.isActive&&be.yt===null))return}finally{n.skipsUndoManager=a,l&&n.maybeUpdate()}this.pu=i,!n.isReadOnly&&(n.allowMove||n.allowCopy)&&(n.allowHorizontalScroll||n.allowVerticalScroll)&&n.doAutoScroll(r.viewPoint)}findDragOverObject(t){return this.diagram.PP(t,null,n=>!this.$D(n))}doUpdateCursor(t){const n=this.diagram;(t===null||this.pu!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?n.currentCursor=this.copyCursor:this.mayMove()?n.currentCursor=this.moveCursor:this.mayDragOut()&&(n.currentCursor=this.nodropCursor))}RC(t,n){let i=!1,r=this.mr.length;const a=r>0?this.mr[0]:null;if(n===a)return!1;t.handled=!1;for(let u=0;u<r;u++){const c=this.mr[u],f=c.mouseDragLeave;if(f!==null&&(f(t,c,n),i=!0,t.handled))break}if(this.mr.length=0,!this.isActive&&be.yt===null||n===null)return i;t.handled=!1;let l=n;for(;l!==null;)this.mr.push(l),l=this.IC(l);r=this.mr.length;for(let u=0;u<r;u++){const c=this.mr[u],f=c.mouseDragEnter;if(f!==null&&(f(t,c,a),i=!0,t.handled))break}return i}oE(t,n){return t===null?!1:!!(t===n||t.isContainedBy(n)||n instanceof Vt&&!(t instanceof Vt)&&n.handlesDragDropForMembers&&t.part.isMemberOf(n))}IC(t){const n=t.panel;if(n!==null)return n;if(t instanceof xe&&!(t instanceof Vt)){const i=t.containingGroup;if(i!==null&&i.handlesDragDropForMembers)return i}return null}EC(t,n){const i=this.diagram,r=this.fn;if(r===null)return null;const a=r.portGravity,l=i.findObjectsNear(t,a,m=>r.findValidLinkablePort(m,n)),u=T.l();let c=1/0,f=null;for(const m=l.iterator;m.next();){const p=m.value;if(p.part===null)continue;const y=p.getDocumentPoint(z.Center,u),w=t.distanceSquaredPoint(y);w<c&&(f=p,c=w)}return T.s(u),f}OC(t){const n=this.draggedLink;if(n!==null){if(n.pointsCount<2)return;const i=this.diagram;if(i.isReadOnly)return;const r=this.fn;if(r===null)return;let a=null,l=null;n.fromNode===null&&(a=this.EC(n.getPoint(0),!1),a!==null&&(l=a.part));let u=null,c=null;n.toNode===null&&(u=this.EC(n.getPoint(n.pointsCount-1),!0),u!==null&&(c=u.part)),r.isValidLink(l,a,c,u)?t?(n.defaultFromPoint=n.getPoint(0),n.defaultToPoint=n.getPoint(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=l,a!==null&&(n.fromPortId=a.portId),n.toNode=c,u!==null&&(n.toPortId=u.portId),n.fromPort!==i.SP&&i.v("LinkRelinked",n,i.SP),n.toPort!==i.MP&&i.v("LinkRelinked",n,i.MP)):r.doDraggingMouseMove(l,a,c,u):r.doDraggingMouseMove(null,null,null,null)}}doDragOver(t,n){}BC(t){const n=this.diagram;this.dragsLink&&this.OC(!0),this.pP();const i=this.findDragOverObject(t),r=n.lastInput;if(r.targetObject=i,i!==null){r.handled=!1;let c=i;for(;c!==null;){const f=c.mouseDrop;if(f!==null&&(f(r,c),r.handled))break;this.ZD(r,c),c=this.IC(c)}}else{const c=n.mouseDrop;c!==null&&c(r)}if(!this.isActive&&be.yt===null)return;const a=(this.copiedParts||this.draggedParts).iterator;for(;a.next();){const c=a.key;c instanceof It&&c.linksConnected.each(f=>f.suspendsRouting=!1)}if(this.doDropOnto(t,i),!this.isActive&&be.yt===null)return;const l=I.l(),u=n.selection.iterator;for(;u.next();){const c=u.value;c instanceof It&&this.QD(n,c,l)}I.s(l)}ZD(t,n){const i=this.diagram,r=n.part;if(i.handlesDragDropForTopLevelParts&&r.isTopLevel&&!(r instanceof Vt)){const a=i.mouseDrop;a!==null&&a(t)}}QD(t,n,i){if(!n.canAvoid())return;let r=!1;i=n.getAvoidableRect(i),t.viewportBounds.containsRect(i)&&(r=!0);const a=this.copiedParts||this.draggedParts,l=t.NP(i,c=>c.part,c=>c instanceof Gt,!0,c=>c instanceof Gt,r);if(l.count===0)return;const u=l.iterator;for(;u.next();){const c=u.value;a.has(c)&&a.has(n)||!c.isMemberOf(n)&&c.isAvoiding&&c.invalidateRoute()}}doDropOnto(t,n){}doMouseMove(){if(!this.isActive)return;const t=this.diagram,n=t.lastInput;this.simulatedMouseMove(n.event,n.documentPoint,n.targetDiagram)||this.currentPart!==null&&this.draggedParts!==null&&(this.mayCopy()?(this.xP(!1),t.Vw(this.copiedParts),this.mc(this.copiedParts,!1),t.bm(this.copiedParts)):this.mayMove()?(this.bl(),this.mc(this.draggedParts,!0)):this.mayDragOut()?(this.xP(!1),this.mc(this.copiedParts,!1)):this.bl(),this.kP(t.lastInput.documentPoint))}doMouseUp(){if(!this.isActive)return;const t=this.diagram,n=t.lastInput;if(this.simulatedMouseUp(n.event,n.documentPoint,n.targetDiagram))return;let i=!1;const r=this.mayCopy();if(r&&this.copiedParts!==null?(this.bl(),this.xP(!0),t.Vw(this.copiedParts),this.mc(this.copiedParts,!1),t.bm(this.copiedParts),this.copiedParts!==null&&(t.v("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(a=>{a.isSelected=!0}))):(i=!0,this.bl(),this.mayMove()&&(this.mc(this.draggedParts,!0),this.kP(t.lastInput.documentPoint))),this.mu=!0,this.BC(t.lastInput.documentPoint),this.isActive){const a=r?this.copiedParts.toKeySet():this.draggedParts.toKeySet();this.copiedParts=null,i&&this._D(),t.invalidateDocumentBounds(),t.bm(this.draggedParts),this.transactionResult=r?"Copy":"Move",t.v(r?"SelectionCopied":"SelectionMoved",a)}this.stopTool(),r&&t.v("ChangedSelection",t.selection)}simulatedMouseMove(t,n,i){if(be.yt===null)return!1;const r=be.yt.diagram;i instanceof le||(i=null);const a=be.zh;if(i!==a){if(a!==null&&a!==r){a.stopAutoScroll(),be.yt.isDragOutStarted=!1;const u=a.toolManager.findTool("Dragging");u!==null&&u.doSimulatedDragLeave()}if(be.zh=i,i!==null&&i!==r){be.yt.vC();const u=i.toolManager.findTool("Dragging");u!==null&&(u.UC(),u.doSimulatedDragEnter())}this.doUpdateCursor(null)}if(i===null||i===r||!i.allowDrop||i.isReadOnly||!i.allowInsert)return!1;const l=i.toolManager.findTool("Dragging");if(l!==null){let u=n;t!==null&&(t.targetTouches!==void 0&&(t.targetTouches.length>0?t=t.targetTouches[0]:t.changedTouches.length>0&&(t=t.changedTouches[0])),u=i.getMouse(t)),i.lastInput.documentPoint=u,i.lastInput.viewPoint=i.transformDocToView(u),i.lastInput.down=!1,i.lastInput.up=!1,l.doSimulatedDragOver()}return!0}simulatedMouseUp(t,n,i){if(be.yt===null)return!1;const r=be.zh,a=be.yt.diagram;if(i===null)return be.yt.doCancel(),!0;if(i!==r){const l=r.toolManager.findTool("Dragging");if(r!==null&&r!==a&&l!==null)return r.stopAutoScroll(),be.yt.isDragOutStarted=!1,l.doSimulatedDragLeave(),!1;be.zh=i;const u=i.toolManager.findTool("Dragging");u!==null&&(be.yt.vC(),u.UC(),u.doSimulatedDragEnter())}if(i!==this.diagram){let l=n;t!==null?(t.targetTouches!==void 0&&(t.targetTouches.length>0?t=t.targetTouches[0]:t.changedTouches.length>0&&(t=t.changedTouches[0])),l=i.getMouse(t)):l===null&&(l=new T),i.lastInput.documentPoint=l,i.lastInput.viewPoint=i.transformDocToView(l),i.lastInput.down=!1,i.lastInput.up=!0;const u=i.toolManager.findTool("Dragging");u!==null&&u.doSimulatedDrop();const c=be.yt;if(c!==null){const f=c.mayCopy();c.transactionResult=f?"Copy":"Move",c.stopTool()}return!0}return!1}_D(){if(this.draggedParts===null)return;const t=this.draggedParts.iterator;for(;t.next();){const n=t.key;if(n instanceof It){const i=n.containingGroup;i!==null&&i.hasPlaceholder()&&!this.draggedParts.has(i)&&i.placeholder.c()}}}mayCopy(){if(!this.isCopyEnabled)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||!(o.rr?t.lastInput.alt:t.lastInput.control))return!1;const n=t.selection.iterator;for(;n.next();)if(n.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())}mayDragOut(){if(!this.isCopyEnabled)return!1;const t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;const n=t.selection.iterator;for(;n.next();)if(n.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())}mayMove(){const t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;const n=t.selection.iterator;for(;n.next();)if(n.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())}UC(){be.zw.has(this)||be.zw.add(this)}static WD(){if(be.zw.count>0){const t=be.zw,n=t.length;for(let i=0;i<n;i++){const r=t.elt(i);r.FC(),r.bl(),r.pP(),r.diagram.stopAutoScroll()}t.clear()}}computeBorder(t,n,i){return!this.mu&&this.draggedParts!==null&&!this.draggedParts.has(t)?i.a(n):null}getDraggingSource(){return be.yt}mayDragIn(){const t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;const n=be.yt;return!(n===null||n.diagram.model.dataFormat!==t.model.dataFormat)}doSimulatedDragEnter(){if(!this.mayDragIn())return;const t=this.diagram;t.animationManager.stopAnimation(),t.yr(),t.animationManager.stopAnimation();const n=be.yt;n!==null&&(this.diagram.dc=!0,t.lastInput.event===null&&(t.lastInput.event=n.diagram.lastInput.event)),this.doUpdateCursor(null)}doSimulatedDragLeave(){const t=be.yt;t!==null&&t.doSimulatedDragOut(),this.diagram.dc=!1,this.doCancel()}doSimulatedDragOver(){const t=this.diagram;t.animationManager.xu=!0;const n=be.yt;if(n!==null&&n.draggedParts!==null){if(!this.mayDragIn())return;this.VC(n.draggedParts.toKeySet(),!1,t.firstInput),this.mc(this.copiedParts,!1),this.kP(t.lastInput.documentPoint)}t.animationManager.xu=!1}doSimulatedDrop(){const t=this.diagram,n=be.yt;if(n!==null){const i=n.diagram;if(n.mu=!0,this.bl(),!this.mayDragIn())return;t.animationManager.xu=!0,t.v("ChangingSelection",t.selection),this.startTransaction("Drop"),this.VC(n.draggedParts.toKeySet(),!0,t.lastInput),this.mc(this.copiedParts,!1);const r=new L;this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(a=>{a.isSelected=!0,r.add(a)})),this.BC(t.lastInput.documentPoint),t.invalidateDocumentBounds(),this.copiedParts!==null&&(this.transactionResult="ExternalCopy"),this.copiedParts=null,t.doFocus(),t.dc=!1,t.v("ExternalObjectsDropped",r,i),this.stopTransaction(),t.v("ChangedSelection",t.selection)}t.animationManager.xu=!1}VC(t,n,i){if(this.copiedParts!==null)return;const r=this.diagram;if(r.isReadOnly||r.isModelReadOnly)return;r.skipsUndoManager=!n,r.partManager.addsToTemporaryLayer=!n,this.startPoint=i.documentPoint;const a=r.copyParts(t,r,!0),l=I.l();this.JD(t,l);const u=l.x+l.width/2,c=l.y+l.height/2;I.s(l);const f=this.xm,m=new W,p=T.l(),y=t.iterator;for(;y.next();){const b=y.value;if(b instanceof Gt&&b.canCopy()){const C=a.get(b);if(C===null)continue;C.points=b.points,C.pr(f.x-u,f.y-c),C.suspendsRouting=!0,m.set(C,this.Is())}}const w=t.iterator;for(;w.next();){const b=w.value;if(b.Pe()&&b.canCopy()){const C=a.get(b);if(C===null)continue;const k=b.location;p.e(f.x-(u-k.x),f.y-(c-k.y)),C.location=p,C.ensureBounds(),m.set(C,this.Is(p))}}if(T.s(p),this.copiedParts=m,this.mP(m.toKeySet()),this.draggedLink!==null){const b=this.draggedLink,C=b.routeBounds;b.pr(this.startPoint.x-(C.x+C.width/2),this.startPoint.y-(C.y+C.height/2))}this.doUpdateCursor(null)}qD(){this.isDragOutStarted=!0,this.mu=!1,be.yt=this,be.zh=this.diagram,this.doSimulatedDragOut()}doSimulatedDragOut(){const t=this.diagram;t.dc=!1,!this.mayCopy()&&!this.mayMove()?t.currentCursor=this.nodropCursor:t.currentCursor="",this.pu=null}computeMove(t,n,i,r){const a=this.diagram;return a!==null?a.computeMove(t,n,this.dragOptions,r):new T}};v(be,"zw",new M),v(be,"yt",null),v(be,"zh",null);let Ut=be;Ht.prototype.doCancel=function(){Ut.yt!==null&&Ut.yt.doCancel(),St.prototype.doCancel.call(this)};class ge extends St{constructor(){super();v(this,"CP");v(this,"LP");v(this,"Pl");v(this,"AP");v(this,"TP");v(this,"Xh");v(this,"DP");v(this,"Kh");v(this,"FP");v(this,"RP");v(this,"vP");v(this,"OP");v(this,"IP");v(this,"EP");v(this,"zC");v(this,"BP");v(this,"Sl");v(this,"UP");this.CP=100,this.LP=!1,this.Pl="pointer",this.AP=new Gt({layerName:"Tool"}).add(new Qt({isPanelMain:!0,stroke:"blue"}).theme("stroke","tempLink"),new Qt({toArrow:"Standard",fill:"blue",stroke:"blue"}).theme("fill","tempLink").theme("stroke","tempLink")).li(),this.Xh=new Qt("Rectangle",{portId:"",fill:null,stroke:"magenta",strokeWidth:2,desiredSize:B.Dk}).theme("stroke","tempPort"),this.TP=new It({selectable:!1,layerName:"Tool"}).add(this.Xh).li(),this.Kh=new Qt("Rectangle",{portId:"",fill:null,stroke:"magenta",strokeWidth:2,desiredSize:B.Dk}).theme("stroke","tempPort"),this.DP=new It({selectable:!1,layerName:"Tool"}).add(this.Kh).li(),this.FP=null,this.RP=null,this.vP=null,this.OP=null,this.IP=null,this.EP=!0,this.zC=new W,this.BP=null,this.Sl=null,this.UP=null}doStop(){this.diagram.stopAutoScroll(),this.originalLink=null,this.originalFromNode=null,this.originalFromPort=null,this.originalToNode=null,this.originalToPort=null,this.validPortsCache.clear(),this.targetPort=null}get portGravity(){return this.CP}set portGravity(t){t>=0&&(this.CP=t)}get isUnconnectedLinkValid(){return this.LP}set isUnconnectedLinkValid(t){this.LP=t}get linkingCursor(){return this.Pl}set linkingCursor(t){this.Pl=t}get temporaryLink(){return this.AP}set temporaryLink(t){t.li(),this.AP=t}get temporaryFromNode(){return this.TP}set temporaryFromNode(t){t.li(),this.TP=t,t&&(this.Xh=t.port)}get temporaryFromPort(){return this.Xh}set temporaryFromPort(t){if(this.Xh!==null){const n=this.Xh.panel;if(n!==null){const i=n.L.indexOf(this.Xh);n.removeAt(i),n.insertAt(i,t)}}this.Xh=t}get temporaryToNode(){return this.DP}set temporaryToNode(t){t.li(),this.DP=t,t&&(this.Kh=t.port)}get temporaryToPort(){return this.Kh}set temporaryToPort(t){if(this.Kh!==null){const n=this.Kh.panel;if(n!==null){const i=n.L.indexOf(this.Kh);n.removeAt(i),n.insertAt(i,t)}}this.Kh=t}get originalLink(){return this.FP}set originalLink(t){this.FP=t}get originalFromNode(){return this.RP}set originalFromNode(t){this.RP=t}get originalFromPort(){return this.vP}set originalFromPort(t){this.vP=t}get originalToNode(){return this.OP}set originalToNode(t){this.OP=t}get originalToPort(){return this.IP}set originalToPort(t){this.IP=t}get isForwards(){return this.EP}set isForwards(t){this.EP=t}get validPortsCache(){return this.zC}get targetPort(){return this.BP}set targetPort(t){this.BP=t}copyPortProperties(t,n,i,r,a){if(t===null||n===null||i===null||r===null)return;const l=n.getDocumentScale(),u=B.l();u.width=n.naturalBounds.width*l,u.height=n.naturalBounds.height*l,r.desiredSize=u,B.s(u),a?(r.toSpot=n.toSpot,r.toEndSegmentLength=n.toEndSegmentLength):(r.fromSpot=n.fromSpot,r.fromEndSegmentLength=n.fromEndSegmentLength),i.locationSpot=z.Center;const c=T.l();i.location=n.getDocumentPoint(z.Center,c),T.s(c),r.angle=n.getDocumentAngle(),this.portTargeted!==null&&this.portTargeted(t,n,i,r,a)}setNoTargetPortProperties(t,n,i){n!==null&&(n.desiredSize=B.Dk,n.fromSpot=z.None,n.toSpot=z.None),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,n,i)}doMouseDown(){this.isActive&&this.doMouseMove()}doMouseMove(){if(this.isActive){const t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof It){const n=this.targetPort.part;this.isForwards?this.copyPortProperties(n,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(n,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.doAutoScroll(t.lastInput.viewPoint)}}findValidLinkablePort(t,n){if(t===null)return null;const i=t.part;if(!(i instanceof It))return null;for(;t!==null;){const r=n?t.toLinkable:t.fromLinkable;if(r===!0&&(t.portId!==null||t instanceof It)&&(n?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(r===!1)return null;t=t.panel}return null}findTargetPort(t){const n=this.diagram,i=n.lastInput.documentPoint;let r=this.portGravity;r<=0&&(r=.1);const a=this,l=n.findObjectsNear(i,r,m=>a.findValidLinkablePort(m,t),null,!0);let u=1/0,c=null;const f=l.iterator;for(;f.next();){const m=f.value,p=m.part;if(!(p instanceof It))continue;const y=m.getDocumentPoint(z.Center,T.l()),w=i.x-y.x,b=i.y-y.y;T.s(y);const C=w*w+b*b;if(C<u){const k=this.validPortsCache.get(m);k!==null?k&&(c=m,u=C):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,p,m)||!t&&this.isValidLink(p,m,this.originalToNode,this.originalToPort)?(this.validPortsCache.set(m,!0),c=m,u=C):this.validPortsCache.set(m,!1)}}if(c!==null){const m=c.part;if(m instanceof It&&(m.layer===null||m.layer.allowLink))return c}return null}isValidFrom(t,n){if(t===null||n===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||n.fromLinkable!==!0))return!1;const i=n.fromMaxLinks;if(i<1/0){if(this.originalLink!==null&&t===this.originalFromNode&&n===this.originalFromPort)return!0;let r=n.portId;if(r===null&&(r=""),t.findLinksOutOf(r).count>=i)return!1}return!0}isValidTo(t,n){if(t===null||n===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||n.toLinkable!==!0))return!1;const i=n.toMaxLinks;if(i<1/0){if(this.originalLink!==null&&t===this.originalToNode&&n===this.originalToPort)return!0;let r=n.portId;if(r===null&&(r=""),t.findLinksInto(r).count>=i)return!1}return!0}isInSameNode(t,n){if(t===null||n===null)return!1;if(t===n)return!0;const i=t.part,r=n.part;return i!==null&&i===r}isLinked(t,n){if(t===null||n===null)return!1;const i=t.part;if(!(i instanceof It))return!1;let r=t.portId;r===null&&(r="");const a=n.part;if(!(a instanceof It))return!1;let l=n.portId;l===null&&(l="");const u=a.findLinksInto(l);for(;u.next();){const c=u.value;if(c.fromNode===i&&c.fromPortId===r)return!0}return!1}isValidLink(t,n,i,r){if(!this.isValidFrom(t,n)||!this.isValidTo(i,r)||n!==null&&r!==null&&(!(n.fromLinkableSelfNode&&r.toLinkableSelfNode)&&this.isInSameNode(n,r)||!(n.fromLinkableDuplicates&&r.toLinkableDuplicates)&&this.isLinked(n,r))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||i!==null&&this.isLabelDependentOnLink(i,this.originalLink))||t!==null&&i!==null&&(t.data===null&&i.data!==null||t.data!==null&&i.data===null)||!this.isValidCycle(t,i,this.originalLink))return!1;let a;return t!==null&&(a=t.linkValidation,a!==null&&!a(t,n,i,r,this.originalLink))||i!==null&&(a=i.linkValidation,a!==null&&!a(t,n,i,r,this.originalLink))?!1:(a=this.linkValidation,a!==null?a(t,n,i,r,this.originalLink):!0)}isLabelDependentOnLink(t,n){if(t===null)return!1;const i=t.labeledLink;if(i===null)return!1;if(i===n)return!0;const r=new L;return r.add(t),this.VP(i,n,r)}VP(t,n,i){if(t===n)return!0;const r=t.fromNode;if(r!==null&&r.isLinkLabel&&(i.add(r),this.VP(r.labeledLink,n,i)))return!0;const a=t.toNode;return!!(a!==null&&a.isLinkLabel&&(i.add(a),this.VP(a.labeledLink,n,i)))}isValidCycle(t,n,i){if(i===void 0&&(i=null),t===null||n===null)return this.isUnconnectedLinkValid;const r=this.diagram;let a=1;if(r&&(r.model.pc()?a=r.isTreePathToChildren?5:6:a=r.validCycle),a===1)return!0;if(a===5){const l=i||this.temporaryLink;if(l!==null&&!l.isTreeLink)return!0;const u=n.linksConnected;for(;u.next();){const c=u.value;if(c!==i&&c.isTreeLink&&c.toNode===n)return!1}return!this.bu(t,n,i,!0)}else if(a===6){const l=i||this.temporaryLink;if(l!==null&&!l.isTreeLink)return!0;const u=t.linksConnected;for(;u.next();){const c=u.value;if(c!==i&&c.isTreeLink&&c.fromNode===t)return!1}return!this.bu(t,n,i,!0)}else{if(a===2)return!this.tF(t,n,i);if(a===3)return!this.bu(t,n,i,!1);if(a===4)return!this.iF(t,n,i)}return!0}bu(t,n,i,r){if(t===n)return!0;if(t===null||n===null)return!1;const a=t.linksConnected;for(;a.next();){const l=a.value;if(l===i||r&&!l.isTreeLink||l.toNode!==t)continue;const u=l.fromNode;if(u!==t&&this.bu(u,n,i,r))return!0}return!1}tF(t,n,i){if(t===n)return!0;const r=new L;return r.add(n),this.XC(r,t,n,i)}XC(t,n,i,r){if(n===i)return!0;if(n===null||i===null||t.has(n))return!1;t.add(n);const a=n.linksConnected;for(;a.next();){const l=a.value;if(l===r||l.toNode!==n)continue;const u=l.fromNode;if(u!==n&&this.XC(t,u,i,r))return!0}return!1}iF(t,n,i){if(t===n)return!0;const r=new L;return r.add(n),this.KC(r,t,n,i)}KC(t,n,i,r){if(n===i)return!0;if(n===null||i===null||t.has(n))return!1;t.add(n);const a=n.linksConnected;for(;a.next();){const l=a.value;if(l===r)continue;const u=l.fromNode,c=l.toNode,f=u===n?c:u;if(f!==n&&this.KC(t,f,i,r))return!0}return!1}get linkValidation(){return this.Sl}set linkValidation(t){this.Sl=t}get portTargeted(){return this.UP}set portTargeted(t){this.UP=t}}var ae=(A=>(A[A.Either=1]="Either",A[A.ForwardsOnly=2]="ForwardsOnly",A[A.BackwardsOnly=3]="BackwardsOnly",A))(ae||{});class me extends ge{constructor(t){super();v(this,"zP");v(this,"XP");v(this,"S");v(this,"KP");this.name="Linking",this.zP={},this.XP=null,this.S=1,this.KP=null,t&&Object.assign(this,t)}get archetypeLinkData(){return this.zP}set archetypeLinkData(t){this.zP=t}get archetypeLabelNodeData(){return this.XP}set archetypeLabelNodeData(t){this.XP=t}get direction(){return this.S}set direction(t){this.S=t}get startObject(){return this.KP}set startObject(t){this.KP=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Xw()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null}findLinkablePort(){const t=this.diagram;let n=this.startObject;if(n===null&&(n=t.findObjectAt(t.firstInput.documentPoint,null,null)),n===null)return null;const i=n.part;if(!(i instanceof It))return null;const r=this.direction;if(r===1||r===2){const a=this.findValidLinkablePort(n,!1);if(a!==null)return this.isForwards=!0,a;if(this.startObject===i){const l=i.port;if(this.findValidLinkablePort(l,!1))return this.isForwards=!0,l}}if(r===1||r===3){const a=this.findValidLinkablePort(n,!0);if(a!==null)return this.isForwards=!1,a;if(this.startObject===i){const l=i.port;if(this.findValidLinkablePort(l,!0))return this.isForwards=!1,l}}return null}doActivate(){const t=this.diagram,n=this.findLinkablePort();if(n===null){this.stopTool();return}if(this.startTransaction(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards){this.temporaryToNode!==null&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=n;const i=this.originalFromPort.part;i instanceof It&&(this.originalFromNode=i),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else{this.temporaryFromNode!==null&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=n;const i=this.originalToPort.part;i instanceof It&&(this.originalToNode=i),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)}t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.ensureBounds(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.ensureBounds(),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.invalidateRoute(),t.add(this.temporaryLink)),this.isActive=!0}doDeactivate(){this.isActive=!1;const t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()}doStop(){super.doStop(),this.startObject=null}doMouseUp(){if(this.isActive){const t=this.diagram;this.transactionResult=null;let n=null,i=null,r=null,a=null,l=null;try{this.targetPort=this.findTargetPort(this.isForwards);const u=this.targetPort;if(u!==null){const c=u.part;c instanceof It&&(this.isForwards?(this.originalFromNode!==null&&(n=this.originalFromNode,i=this.originalFromPort),r=c,a=u):(n=c,i=u,this.originalToNode!==null&&(r=this.originalToNode,a=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(n=this.originalFromNode,i=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(r=this.originalToNode,a=this.originalToPort);n!==null||r!==null?(l=this.insertLink(n,i,r,a),l!==null?(u===null&&(this.isForwards?l.defaultToPoint=t.lastInput.documentPoint:l.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.v("ChangingSelection",t.selection),t.clearSelection(!0),l.isSelected=!0),this.transactionResult=this.name,t.v("LinkDrawn",l)):this.doNoLink(n,i,r,a)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),l&&t.allowSelect&&t.v("ChangedSelection",t.selection)}}}isNewTreeLink(){const t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof Gt)return t.isTreeLink;const n=this.diagram;if(n===null)return!0;const i=n.partManager.getLinkCategoryForData(t),r=n.partManager.findLinkTemplateForCategory(i);return r!==null?r.isTreeLink:!0}insertLink(t,n,i,r){return this.diagram.partManager.insertLink(t,n,i,r)}doNoLink(t,n,i,r){}}v(me,"Either",1),v(me,"ForwardsOnly",2),v(me,"BackwardsOnly",3);class je extends ge{constructor(t){super();v(this,"YP");v(this,"GP");v(this,"fs");v(this,"jP");this.name="Relinking",this.YP=new Qt("Diamond",{desiredSize:B.hu,fill:"lightblue",stroke:"dodgerblue",cursor:this.linkingCursor,segmentIndex:0}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.GP=new Qt("Diamond",{desiredSize:B.hu,fill:"lightblue",stroke:"dodgerblue",cursor:this.linkingCursor,segmentIndex:-1}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.fs=null,this.jP=new I,t&&Object.assign(this,t)}updateAdornments(t){if(t===null||!(t instanceof Gt))return;let n="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){const r=t.selectionObject;r!==null&&t.canRelinkFrom()&&t.actualBounds.isReal()&&t.isVisible()&&r.actualBounds.isReal()&&r.isVisibleObject()&&(i=t.findAdornment(n),i===null&&(i=this.makeAdornment(r,!1),t.addAdornment(n,i)))}if(i===null&&t.removeAdornment(n),n="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly){const r=t.selectionObject;r!==null&&t.canRelinkTo()&&t.actualBounds.isReal()&&t.isVisible()&&r.actualBounds.isReal()&&r.isVisibleObject()&&(i=t.findAdornment(n),i===null?(i=this.makeAdornment(r,!0),t.addAdornment(n,i)):i.c())}i===null&&t.removeAdornment(n)}makeAdornment(t,n){const i=new ie;i.type=Kt.Link;const r=n?this.toHandleArchetype:this.fromHandleArchetype;return r!==null&&i.add(r.copy().km()),i.adornedObject=t,i}get fromHandleArchetype(){return this.YP}set fromHandleArchetype(t){this.YP=t}get toHandleArchetype(){return this.GP}set toHandleArchetype(t){this.GP=t}get handle(){return this.fs}set handle(t){if(t!==null&&!(t.part instanceof ie))throw new Error("new handle is not in an Adornment: "+t);this.fs=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Xw()||!t.lastInput.left)return!1;let n=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return n===null&&(n=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),n!==null}doActivate(){const t=this.diagram;if(this.originalLink===null){let n=this.handle;if(n===null&&(n=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),n===null&&(n=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),n===null)return;const i=n.part;if(!(i instanceof ie)||!(i.adornedPart instanceof Gt))return;this.handle=n,this.isForwards=i===null||i.category==="RelinkTo",this.originalLink=i.adornedPart}this.startTransaction(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.jP.set(this.originalLink.actualBounds),this.originalLink!==null&&this.originalLink.pointsCount>0&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=B.lu),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.getPoint(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=B.lu),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.getPoint(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.invalidateRoute(),t.add(this.temporaryLink)),this.isActive=!0}copyLinkProperties(t,n){if(t===null||n===null)return;n.adjusting=t.adjusting,n.corner=t.corner;let i=t.curve;(i===11||i===10)&&(i=0),n.curve=i,n.curviness=t.curviness,n.isTreeLink=t.isTreeLink,n.points=t.points,n.routing=t.routing,n.smoothness=t.smoothness,n.fromSpot=t.fromSpot,n.fromEndSegmentLength=t.fromEndSegmentLength,n.fromShortLength=t.fromShortLength,n.toSpot=t.toSpot,n.toEndSegmentLength=t.toEndSegmentLength,n.toShortLength=t.toShortLength}doDeactivate(){this.isActive=!1;const t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()}doStop(){super.doStop(),this.handle=null}doMouseUp(){if(this.isActive){const t=this.diagram;this.transactionResult=null;let n=this.originalFromNode,i=this.originalFromPort,r=this.originalToNode,a=this.originalToPort,l=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){const u=this.targetPort.part;u instanceof It&&(this.isForwards?(r=u,a=this.targetPort):(n=u,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?(r=null,a=null):(n=null,i=null):l=null;l!==null?(this.reconnectLink(l,this.isForwards?r:n,this.isForwards?a:i,this.isForwards),this.targetPort===null&&(this.isForwards?l.defaultToPoint=t.lastInput.documentPoint:l.defaultFromPoint=t.lastInput.documentPoint,l.invalidateRoute()),this.transactionResult=this.name,t.v("LinkRelinked",l,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.invalidateOtherJumpOvers(this.jP)}finally{this.stopTool()}}}reconnectLink(t,n,i,r){const a=i!==null&&i.portId!==null?i.portId:"";return r?(t.toNode=n,t.toPortId=a):(t.fromNode=n,t.fromPortId=a),!0}doNoRelink(t,n){}doDraggingMouseMove(t,n,i,r){t!==null?(this.copyPortProperties(t,n,this.temporaryFromNode,this.temporaryFromPort,!1),this.diagram.add(this.temporaryFromNode)):this.diagram.remove(this.temporaryFromNode),i!==null?(this.copyPortProperties(i,r,this.temporaryToNode,this.temporaryToPort,!0),this.diagram.add(this.temporaryToNode)):this.diagram.remove(this.temporaryToNode)}stopDraggingMouseMove(){this.diagram.remove(this.temporaryFromNode),this.diagram.remove(this.temporaryToNode)}}var Fe=(A=>(A[A.None=0]="None",A[A.Horizontal=1]="Horizontal",A[A.Vertical=2]="Vertical",A[A.All=3]="All",A))(Fe||{});class pe extends St{constructor(t){super();v(this,"Co");v(this,"HP");v(this,"qP");v(this,"fs");v(this,"Kw");v(this,"WP");v(this,"Pm");this.name="LinkReshaping",this.Co=new Qt("Rectangle",{desiredSize:B._N,fill:"lightblue",stroke:"dodgerblue"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.HP=new Qt("Diamond",{desiredSize:B.hu,fill:"lightblue",stroke:"dodgerblue",cursor:"move"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.qP=3,this.fs=null,this.Kw=null,this.WP=new T,this.Pm=new M,t&&Object.assign(this,t)}getReshapingBehavior(t){return t?t.wr:0}setReshapingBehavior(t,n){t.wr=n}updateAdornments(t){if(t===null||!(t instanceof Gt))return;let n=null;if(t.isSelected&&!this.diagram.isReadOnly){const i=t.path;i!==null&&t.canReshape()&&t.actualBounds.isReal()&&t.isVisible()&&i.actualBounds.isReal()&&i.isVisibleObject()&&(n=t.findAdornment(this.name),(n===null||n.JP!==t.pointsCount||n.$P!==t.resegmentable)&&(n=this.makeAdornment(i),n!==null&&(n.JP=t.pointsCount,n.$P=t.resegmentable,t.addAdornment(this.name,n))))}n===null&&t.removeAdornment(this.name)}makeAdornment(t){const n=t.part,i=n.points,r=n.pointsCount,a=n.isOrthogonal;let l=null;if(i!==null&&r>1){l=new ie,l.type=Kt.Link;const u=n.firstPickIndex,c=n.lastPickIndex,f=a?1:0;if(n.resegmentable&&n.computeCurve()!==9)for(let m=u+f;m<c-f;m++){const p=this.makeResegmentHandle(t,m);p!==null&&(p.segmentIndex=m,p.segmentFraction=.5,p.fromMaxLinks=999,l.add(p))}for(let m=u+1;m<c;m++){const p=this.makeHandle(t,m);if(p!==null){if(p.segmentIndex=m,m!==u)if(m===u+1&&a){const y=n.getPoint(u);let w=n.getPoint(u+1);R.u(y.x,w.x)&&R.u(y.y,w.y)?(w=n.getPoint(u-1),R.u(y.x,w.x)?(this.setReshapingBehavior(p,2),p.cursor="n-resize"):R.u(y.y,w.y)&&(this.setReshapingBehavior(p,1),p.cursor="w-resize")):R.u(y.x,w.x)?(this.setReshapingBehavior(p,2),p.cursor="n-resize"):R.u(y.y,w.y)&&(this.setReshapingBehavior(p,1),p.cursor="w-resize")}else if(m===c-1&&a){let y=n.getPoint(c-1);const w=n.getPoint(c);R.u(y.x,w.x)&&R.u(y.y,w.y)?(y=n.getPoint(c+1),R.u(y.x,w.x)?(this.setReshapingBehavior(p,2),p.cursor="n-resize"):R.u(y.y,w.y)&&(this.setReshapingBehavior(p,1),p.cursor="w-resize")):R.u(y.x,w.x)?(this.setReshapingBehavior(p,2),p.cursor="n-resize"):R.u(y.y,w.y)&&(this.setReshapingBehavior(p,1),p.cursor="w-resize")}else m===c||(this.setReshapingBehavior(p,3),p.cursor="move");l.add(p)}}l.adornedObject=t}return l}makeHandle(t,n){const i=this.handleArchetype;return i===null?null:i.copy().km()}get handleArchetype(){return this.Co}set handleArchetype(t){this.Co=t}makeResegmentHandle(t,n){const i=this.midHandleArchetype;return i===null?null:i.copy().km()}get midHandleArchetype(){return this.HP}set midHandleArchetype(t){this.HP=t}get handle(){return this.fs}set handle(t){if(t!==null&&!(t.part instanceof ie))throw new Error("new handle is not in an Adornment: "+t);this.fs=t}get adornedLink(){return this.Kw}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return t.isReadOnly||!t.allowReshape||!t.lastInput.left?!1:this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null}doActivate(){const t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;const n=this.handle.part.adornedPart;if(n instanceof Gt){if(this.Kw=n,t.isMouseCaptured=!0,this.startTransaction(this.name),n.resegmentable&&this.handle.fromMaxLinks===999){const i=n.points.copy(),r=this.getResegmentingPoint();if(i.insertAt(this.handle.segmentIndex+1,r),n.isOrthogonal&&i.insertAt(this.handle.segmentIndex+1,r),n.points=i,n.invalidateAdornments(),n.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.WP=n.getPoint(this.handle.segmentIndex),this.Pm=n.points.copy(),this.isActive=!0}}doDeactivate(){this.stopTransaction(),this.handle=null,this.Kw=null;const t=this.diagram;t.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,n=super.stopTransaction();return n&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.optimize(),n}doCancel(){const t=this.adornedLink;t!==null&&(t.points=this.Pm),this.stopTool()}getResegmentingPoint(){return this.handle.getDocumentPoint(z.Center)}doMouseMove(){const t=this.diagram;if(this.isActive){const n=this.computeReshape(t.lastInput.documentPoint);this.reshape(n)}}doMouseUp(){const t=this.diagram;if(this.isActive){const n=this.computeReshape(t.lastInput.documentPoint);this.reshape(n);const i=this.adornedLink;if(i!==null&&i.resegmentable){const r=this.handle.segmentIndex,a=i.getPoint(r-1),l=i.getPoint(r),u=i.getPoint(r+1);if(i.isOrthogonal){if(r>i.firstPickIndex+1&&r<i.lastPickIndex-1){let c=i.getPoint(r-2);if(this.isWithinResegmentingDistance(a,l)&&(this.isInLineOrtho(c,a,l,u,!0)||this.isInLineOrtho(c,a,l,u,!1))){const f=i.points.copy();this.isInLineOrtho(c,a,l,u,!0)?(f.setElt(r-2,new T(c.x,(u.y+c.y)/2)),f.setElt(r+1,new T(u.x,(u.y+c.y)/2))):(f.setElt(r-2,new T((u.x+c.x)/2,c.y)),f.setElt(r+1,new T((u.x+c.x)/2,u.y))),f.removeAt(r),f.removeAt(r-1),i.points=f,i.invalidateAdornments()}else if(c=i.getPoint(r+2),this.isWithinResegmentingDistance(l,u)&&(this.isInLineOrtho(a,l,u,c,!0)||this.isInLineOrtho(a,l,u,c,!1))){const f=i.points.copy();this.isInLineOrtho(a,l,u,c,!0)?(f.setElt(r-1,new T(a.x,(a.y+c.y)/2)),f.setElt(r+2,new T(c.x,(a.y+c.y)/2))):(f.setElt(r-1,new T((a.x+c.x)/2,a.y)),f.setElt(r+2,new T((a.x+c.x)/2,c.y))),f.removeAt(r+1),f.removeAt(r),i.points=f,i.invalidateAdornments()}}}else{const c=T.l();if(R.gl(a.x,a.y,u.x,u.y,l.x,l.y,c)&&c.distanceSquaredPoint(l)<this.resegmentingDistance*this.resegmentingDistance){const f=i.points.copy();f.removeAt(r),i.points=f,i.invalidateAdornments()}T.s(c)}}t.invalidateDocumentBounds(),this.transactionResult=this.name,t.v("LinkReshaped",this.adornedLink,this.Pm)}this.stopTool()}isWithinResegmentingDistance(t,n){return Math.abs(t.x-n.x)<this.resegmentingDistance&&Math.abs(t.y-n.y)<this.resegmentingDistance}isInLineOrtho(t,n,i,r,a){return a?Math.abs(t.y-n.y)<this.resegmentingDistance&&Math.abs(n.y-i.y)<this.resegmentingDistance&&Math.abs(i.y-r.y)<this.resegmentingDistance:Math.abs(t.x-n.x)<this.resegmentingDistance&&Math.abs(n.x-i.x)<this.resegmentingDistance&&Math.abs(i.x-r.x)<this.resegmentingDistance}get resegmentingDistance(){return this.qP}set resegmentingDistance(t){this.qP=t}reshape(t){const n=this.adornedLink;n.startRoute();let i=this.handle.segmentIndex;const r=this.getReshapingBehavior(this.handle);if(n.isOrthogonal)if(i===n.firstPickIndex+1){const a=n.firstPickIndex+1;r===2?(n.setPointAt(a,n.getPoint(a-1).x,t.y),n.setPointAt(a+1,n.getPoint(a+2).x,t.y)):r===1&&(n.setPointAt(a,t.x,n.getPoint(a-1).y),n.setPointAt(a+1,t.x,n.getPoint(a+2).y))}else if(i===n.lastPickIndex-1){const a=n.lastPickIndex-1;r===2?(n.setPointAt(a-1,n.getPoint(a-2).x,t.y),n.setPointAt(a,n.getPoint(a+1).x,t.y)):r===1&&(n.setPointAt(a-1,t.x,n.getPoint(a-2).y),n.setPointAt(a,t.x,n.getPoint(a+1).y))}else{let a=i;const l=n.getPoint(a),u=n.getPoint(a-1),c=n.getPoint(a+1);R.u(u.x,l.x)&&R.u(l.y,c.y)?(R.u(u.x,n.getPoint(a-2).x)&&!R.u(u.y,n.getPoint(a-2).y)?(n.insertPointAt(a,t.x,u.y),i++,a++):n.setPointAt(a-1,t.x,u.y),R.u(c.y,n.getPoint(a+2).y)&&!R.u(c.x,n.getPoint(a+2).x)?n.insertPointAt(a+1,c.x,t.y):n.setPointAt(a+1,c.x,t.y)):R.u(u.y,l.y)&&R.u(l.x,c.x)?(R.u(u.y,n.getPoint(a-2).y)&&!R.u(u.x,n.getPoint(a-2).x)?(n.insertPointAt(a,u.x,t.y),i++,a++):n.setPointAt(a-1,u.x,t.y),R.u(c.x,n.getPoint(a+2).x)&&!R.u(c.y,n.getPoint(a+2).y)?n.insertPointAt(a+1,t.x,c.y):n.setPointAt(a+1,t.x,c.y)):R.u(u.x,l.x)&&R.u(l.x,c.x)?(R.u(u.x,n.getPoint(a-2).x)&&!R.u(u.y,n.getPoint(a-2).y)?(n.insertPointAt(a,t.x,u.y),i++,a++):n.setPointAt(a-1,t.x,u.y),R.u(c.x,n.getPoint(a+2).x)&&!R.u(c.y,n.getPoint(a+2).y)?n.insertPointAt(a+1,t.x,c.y):n.setPointAt(a+1,t.x,c.y)):R.u(u.y,l.y)&&R.u(l.y,c.y)&&(R.u(u.y,n.getPoint(a-2).y)&&!R.u(u.x,n.getPoint(a-2).x)?(n.insertPointAt(a,u.x,t.y),i++,a++):n.setPointAt(a-1,u.x,t.y),R.u(c.y,n.getPoint(a+2).y)&&!R.u(c.x,n.getPoint(a+2).x)?n.insertPointAt(a+1,c.x,t.y):n.setPointAt(a+1,c.x,t.y)),n.setPointAt(i,t.x,t.y)}else{n.setPointAt(i,t.x,t.y);let a=n.fromNode,l=n.fromPort;if(a!==null){const f=a.findVisibleNode();f!==null&&f!==a&&(a=f,l=a.port)}if(i===1&&n.computeSpot(!0,l).isNoSpot()){const f=l.getDocumentPoint(z.Center,T.l()),m=n.getLinkPointFromPoint(a,l,f,t,!0,T.l());n.setPointAt(0,m.x,m.y),T.s(f),T.s(m)}let u=n.toNode,c=n.toPort;if(u!==null){const f=u.findVisibleNode();f!==null&&f!==u&&(u=f,c=u.port)}if(i===n.pointsCount-2&&n.computeSpot(!1,c).isNoSpot()){const f=c.getDocumentPoint(z.Center,T.l()),m=n.getLinkPointFromPoint(u,c,f,t,!1,T.l());n.setPointAt(n.pointsCount-1,m.x,m.y),T.s(f),T.s(m)}}n.commitRoute()}computeReshape(t){const n=this.adornedLink,i=this.handle.segmentIndex;switch(this.getReshapingBehavior(this.handle)){case 3:return t;case 2:{const r=n.getPoint(i);return new T(r.x,t.y)}case 1:{const r=n.getPoint(i);return new T(t.x,r.y)}default:case 0:return n.getPoint(i)}}get originalPoint(){return this.WP}get originalPoints(){return this.Pm}}v(pe,"None",0),v(pe,"Horizontal",1),v(pe,"Vertical",2),v(pe,"All",3);class Mn extends St{constructor(t){super();v(this,"xr");v(this,"br");v(this,"Lo");v(this,"yc");v(this,"ZP");v(this,"us");v(this,"Co");v(this,"fs");v(this,"Sm");v(this,"QP");v(this,"wc");v(this,"Yw");v(this,"Gw");v(this,"jw");this.name="Resizing",this.xr=new B(1,1).g(),this.br=new B(9999,9999).g(),this.Lo=new B(NaN,NaN).g(),this.yc=!1,this.ZP=!0,this.us=null,this.Co=new Qt("Rectangle",{alignmentFocus:z.Center,desiredSize:B._N,fill:"lightblue",stroke:"dodgerblue",strokeWidth:1,cursor:"pointer"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.fs=null,this.Sm=new T,this.QP=new B,this.wc=new T,this.Yw=new B(0,0),this.Gw=new B(1/0,1/0),this.jw=new B(1,1),t&&Object.assign(this,t)}updateAdornments(t){if(!(t===null||t instanceof Gt)){if(t.isSelected&&!this.diagram.isReadOnly){const n=t.resizeObject;let i=t.findAdornment(this.name);if(n!==null&&t.canResize()&&t.actualBounds.isReal()&&t.isVisible()&&n.actualBounds.isReal()&&n.isVisibleObject()&&((i===null||i.adornedObject!==n)&&(i=this.makeAdornment(n)),i!==null)){const r=n.getDocumentAngle();t.Ml()&&this.updateResizeHandles(i,r),t.addAdornment(this.name,i);return}}t.removeAdornment(this.name)}}makeAdornment(t){let n=null;const i=t.part.resizeAdornmentTemplate;if(i===null){n=new ie,n.type=Kt.Spot,n.locationSpot=z.Center;const r=new $i;r.isPanelMain=!0,n.add(r),n.add(this.makeHandle(t,z.TopLeft)),n.add(this.makeHandle(t,z.TopRight)),n.add(this.makeHandle(t,z.BottomRight)),n.add(this.makeHandle(t,z.BottomLeft)),n.add(this.makeHandle(t,z.MiddleTop)),n.add(this.makeHandle(t,z.MiddleRight)),n.add(this.makeHandle(t,z.MiddleBottom)),n.add(this.makeHandle(t,z.MiddleLeft))}else if(i.li(),n=i.copy(),n===null)return null;return n.adornedObject=t,n}makeHandle(t,n){const i=this.handleArchetype;if(i===null)return null;const r=i.copy().km();return r.alignment=n,r}updateResizeHandles(t,n){if(t!==null){if(!t.alignment.isDefault()&&(t.cursor==="pointer"||t.cursor.indexOf("resize")>0))this.eF(t,n);else if(t instanceof Kt){const i=t.elements;for(;i.next();){const r=i.value;this.updateResizeHandles(r,n)}}}}eF(t,n){let i=t.alignment;i.isNoSpot()&&(i=z.Center);let r=n;if(i.x<=0)i.y<=0?r+=225:i.y>=1?r+=135:r+=180;else if(i.x>=1)i.y<=0?r+=315:i.y>=1&&(r+=45);else if(i.y<=0)r+=270;else if(i.y>=1)r+=90;else return;r<0?r+=360:r>=360&&(r-=360),r<22.5?t.cursor="e-resize":r<67.5?t.cursor="se-resize":r<112.5?t.cursor="s-resize":r<157.5?t.cursor="sw-resize":r<202.5?t.cursor="w-resize":r<247.5?t.cursor="nw-resize":r<292.5?t.cursor="n-resize":r<337.5?t.cursor="ne-resize":t.cursor="e-resize"}get handleArchetype(){return this.Co}set handleArchetype(t){this.Co=t}get handle(){return this.fs}set handle(t){if(t!==null&&!(t.part instanceof ie))throw new Error("new handle is not in an Adornment: "+t);this.fs=t}get adornedObject(){return this.us}set adornedObject(t){if(t!==null&&t.part instanceof ie)throw new Error("new handle must not be in an Adornment: "+t);this.us=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return t.isReadOnly||!t.allowResize||!t.lastInput.left?!1:this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null}doActivate(){const t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.stopAnimation(),t.yu=!0,this.startTransaction(this.name),this.Sm.set(this.adornedObject.getDocumentPoint(this.handle.alignment.opposite())),this.wc.set(this.adornedObject.part.location),this.QP.set(this.adornedObject.desiredSize),this.jw=this.computeCellSize(),this.Yw=this.computeMinSize(),this.Gw=this.computeMaxSize(),this.isActive=!0))}doDeactivate(){const t=this.diagram;t.yu=!1,t.xl=!0,this.stopTransaction(),this.handle=null,this.us=null,t.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,n=super.stopTransaction();return n&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.optimize(),n}doCancel(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()}doMouseMove(){const t=this.diagram;if(!this.isActive)return;const n=this.Yw,i=this.Gw,r=this.jw,a=t.lastInput.documentPoint,l=this.adornedObject.getLocalPoint(a,T.l()),u=this.computeReshape(),c=this.computeResize(l,this.handle.alignment,n,i,r,u);this.resize(c),t.maybeUpdate(),T.s(l)}doMouseUp(){const t=this.diagram;if(this.isActive){const n=this.Yw,i=this.Gw,r=this.jw,a=this.adornedObject.getLocalPoint(t.lastInput.documentPoint,T.l()),l=this.computeReshape(),u=this.computeResize(a,this.handle.alignment,n,i,r,l);this.resize(u),T.s(a),t.invalidateDocumentBounds(),this.transactionResult=this.name,t.v("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()}resize(t){const n=this.diagram,i=this.adornedObject;if(i===null)return;i.desiredSize=t.size;const r=i.part;r.ensureBounds();const a=i.getDocumentPoint(this.handle.alignment.opposite());if(r instanceof Vt){const l=new M;l.add(r);let u;!this.dragsMembers&&!r.hasPlaceholder()&&(u=new wr,u.dragsMembers=!1),n.moveParts(l,this.oppositePoint.copy().subtract(a),!0,u)}else r.location=r.location.copy().subtract(a).add(this.oppositePoint);n.maybeUpdate()}computeResize(t,n,i,r,a,l){n.isNoSpot()&&(n=z.Center);const u=this.adornedObject.naturalBounds,c=u.x,f=u.y,m=u.x+u.width,p=u.y+u.height;let y=1;if(!l){let C=u.width,k=u.height;C<=0&&(C=1),k<=0&&(k=1),y=k/C}const w=T.l();R.Bg(t.x,t.y,c,f,a.width,a.height,w);const b=u.copy();return n.x<=0?n.y<=0?(b.x=Math.max(w.x,m-r.width),b.x=Math.min(b.x,m-i.width),b.width=Math.max(m-b.x,i.width),b.y=Math.max(w.y,p-r.height),b.y=Math.min(b.y,p-i.height),b.height=Math.max(p-b.y,i.height),l||(b.height/b.width>=1?(b.height=Math.max(Math.min(y*b.width,r.height),i.height),b.width=b.height/y):(b.width=Math.max(Math.min(b.height/y,r.width),i.width),b.height=y*b.width),b.x=m-b.width,b.y=p-b.height)):n.y>=1?(b.x=Math.max(w.x,m-r.width),b.x=Math.min(b.x,m-i.width),b.width=Math.max(m-b.x,i.width),b.height=Math.max(Math.min(w.y-f,r.height),i.height),l||(b.height/b.width>=1?(b.height=Math.max(Math.min(y*b.width,r.height),i.height),b.width=b.height/y):(b.width=Math.max(Math.min(b.height/y,r.width),i.width),b.height=y*b.width),b.x=m-b.width)):(b.x=Math.max(w.x,m-r.width),b.x=Math.min(b.x,m-i.width),b.width=m-b.x,l||(b.height=Math.max(Math.min(y*b.width,r.height),i.height),b.width=b.height/y,b.y=f+.5*(p-f-b.height))):n.x>=1?n.y<=0?(b.width=Math.max(Math.min(w.x-c,r.width),i.width),b.y=Math.max(w.y,p-r.height),b.y=Math.min(b.y,p-i.height),b.height=Math.max(p-b.y,i.height),l||(b.height/b.width>=1?(b.height=Math.max(Math.min(y*b.width,r.height),i.height),b.width=b.height/y):(b.width=Math.max(Math.min(b.height/y,r.width),i.width),b.height=y*b.width),b.y=p-b.height)):n.y>=1?(b.width=Math.max(Math.min(w.x-c,r.width),i.width),b.height=Math.max(Math.min(w.y-f,r.height),i.height),l||(b.height/b.width>=1?(b.height=Math.max(Math.min(y*b.width,r.height),i.height),b.width=b.height/y):(b.width=Math.max(Math.min(b.height/y,r.width),i.width),b.height=y*b.width))):(b.width=Math.max(Math.min(w.x-c,r.width),i.width),l||(b.height=Math.max(Math.min(y*b.width,r.height),i.height),b.width=b.height/y,b.y=f+.5*(p-f-b.height))):n.y<=0?(b.y=Math.max(w.y,p-r.height),b.y=Math.min(b.y,p-i.height),b.height=p-b.y,l||(b.width=Math.max(Math.min(b.height/y,r.width),i.width),b.height=y*b.width,b.x=c+.5*(m-c-b.width))):n.y>=1&&(b.height=Math.max(Math.min(w.y-f,r.height),i.height),l||(b.width=Math.max(Math.min(b.height/y,r.width),i.width),b.height=y*b.width,b.x=c+.5*(m-c-b.width))),T.s(w),b}computeReshape(){let t=0;return this.adornedObject instanceof Qt&&(t=this.adornedObject._P()),!(t===6||this.diagram.lastInput.shift)}computeMinSize(){const t=this.adornedObject.minSize.copy(),n=this.minSize;return!isNaN(n.width)&&n.width>t.width&&(t.width=n.width),!isNaN(n.height)&&n.height>t.height&&(t.height=n.height),t}computeMaxSize(){const t=this.adornedObject.maxSize.copy(),n=this.maxSize;return!isNaN(n.width)&&n.width<t.width&&(t.width=n.width),!isNaN(n.height)&&n.height<t.height&&(t.height=n.height),t}computeCellSize(){const t=new B(NaN,NaN),n=this.adornedObject.part;if(n!==null){const a=n.resizeCellSize;!isNaN(a.width)&&a.width>0&&(t.width=a.width),!isNaN(a.height)&&a.height>0&&(t.height=a.height)}let i=this.cellSize;isNaN(t.width)&&!isNaN(i.width)&&i.width>0&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&i.height>0&&(t.height=i.height);const r=this.diagram;if((isNaN(t.width)||isNaN(t.height))&&r){const a=r.grid;a!==null&&a.visible&&this.isGridSnapEnabled&&(i=a.gridCellSize,isNaN(t.width)&&!isNaN(i.width)&&i.width>0&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&i.height>0&&(t.height=i.height))}return(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t}get minSize(){return this.xr}set minSize(t){if(!this.xr.equals(t)){let n=t.width;isNaN(n)&&(n=0);let i=t.height;isNaN(i)&&(i=0),this.xr.e(n,i)}}get maxSize(){return this.br}set maxSize(t){if(!this.br.equals(t)){let n=t.width;isNaN(n)&&(n=1/0);let i=t.height;isNaN(i)&&(i=1/0),this.br.e(n,i)}}get cellSize(){return this.Lo}set cellSize(t){this.Lo.equals(t)||this.Lo.a(t)}get isGridSnapEnabled(){return this.yc}set isGridSnapEnabled(t){this.yc=t}get dragsMembers(){return this.ZP}set dragsMembers(t){this.ZP=t}get oppositePoint(){return this.Sm}set oppositePoint(t){this.Sm.equals(t)||this.Sm.a(t)}get originalDesiredSize(){return this.QP}get originalLocation(){return this.wc}}class Ve extends St{constructor(t){super();v(this,"tS");v(this,"iS");v(this,"us");v(this,"Co");v(this,"fs");v(this,"eS");v(this,"Mm");v(this,"wc");v(this,"sS");v(this,"nS");this.name="Rotating",this.tS=45,this.iS=2,this.wc=new T,this.us=null,this.Co=new Qt("Ellipse",{desiredSize:B.hu,fill:"lightblue",stroke:"dodgerblue",strokeWidth:1,cursor:"pointer"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.fs=null,this.eS=0,this.Mm=new T(NaN,NaN),this.sS=0,this.nS=50,t&&Object.assign(this,t)}updateAdornments(t){if(t!==null){if(t.Nl()){const n=t.rotateObject;if(n===t||n===t.path||n.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly){const n=t.rotateObject;if(n!==null&&t.canRotate()&&t.actualBounds.isReal()&&t.isVisible()&&n.actualBounds.isReal()&&n.isVisibleObject()){let i=t.findAdornment(this.name);if((i===null||i.adornedObject!==n)&&(i=this.makeAdornment(n)),i!==null){i.angle=n.getDocumentAngle(),i.hasPlaceholder()||(i.location=this.computeAdornmentLocation(n)),t.addAdornment(this.name,i);return}}}t.removeAdornment(this.name)}}makeAdornment(t){let n=null;const i=t.part.rotateAdornmentTemplate;if(i===null){n=new ie,n.type=Kt.Position,n.locationSpot=z.Center;const r=this.handleArchetype;r!==null&&n.add(r.copy().km())}else if(i.li(),n=i.copy(),n===null)return null;return n.adornedObject=t,n}get handleArchetype(){return this.Co}set handleArchetype(t){this.Co=t}get handle(){return this.fs}set handle(t){if(t!==null&&!(t.part instanceof ie))throw new Error("new handle is not in an Adornment: "+t);this.fs=t}get adornedObject(){return this.us}set adornedObject(t){if(t!==null&&t.part instanceof ie)throw new Error("new handle must not be in an Adornment: "+t);this.us=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return t.isReadOnly||!t.allowRotate||!t.lastInput.left?!1:this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null}doActivate(){const t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.startTransaction(this.name),this.eS=this.adornedObject.angle,this.Mm=this.computeRotationPoint(this.adornedObject),this.wc=this.adornedObject.part.location.copy(),this.isActive=!0)}computeRotationPoint(t){const n=t.part,i=n.locationObject;return n.rotationSpot.isSpot()?t.getDocumentPoint(n.rotationSpot):t===n||t===i?i.getDocumentPoint(n.locationSpot):t.getDocumentPoint(z.Center)}computeAdornmentLocation(t){let n=this.rotationPoint;n.isReal()||(n=this.computeRotationPoint(t));const i=t.getLocalPoint(n);let r=this.handleAngle;r<0?r+=360:r>=360&&(r-=360),r=Math.round(Math.round(r/45)*45);const a=this.handleDistance;return r===0?i.x=t.naturalBounds.width+a:r===45?(i.x=t.naturalBounds.width+a,i.y=t.naturalBounds.height+a):r===90?i.y=t.naturalBounds.height+a:r===135?(i.x=-a,i.y=t.naturalBounds.height+a):r===180?i.x=-a:r===225?(i.x=-a,i.y=-a):r===270?i.y=-a:r===315&&(i.x=t.naturalBounds.width+a,i.y=-a),t.getDocumentPoint(i)}doDeactivate(){const t=this.diagram;this.stopTransaction(),this.handle=null,this.us=null,this.Mm=new T(NaN,NaN),t.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,n=super.stopTransaction();return n&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.optimize(),n}doCancel(){const t=this.diagram;t.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()}doMouseMove(){const t=this.diagram;if(this.isActive){const n=this.computeRotate(t.lastInput.documentPoint);this.rotate(n)}}doMouseUp(){const t=this.diagram;if(this.isActive){t.delaysLayout=!1;const n=this.computeRotate(t.lastInput.documentPoint);this.rotate(n),t.invalidateDocumentBounds(),this.transactionResult=this.name,t.v("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()}rotate(t){const n=this.adornedObject;if(n===null)return;n.angle=t;const i=n.part;i.ensureBounds();const r=i.locationObject,a=i.rotateObject;if(r===a||r.isContainedBy(a)){const l=this.wc.copy();i.location=l.subtract(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)}this.diagram.maybeUpdate()}computeRotate(t){let n=this.rotationPoint.directionPoint(t)-this.handleAngle;const i=this.adornedObject.panel;i!==null&&(n-=i.getDocumentAngle()),n>=360?n-=360:n<0&&(n+=360);const r=Math.min(Math.abs(this.snapAngleMultiple),180),a=Math.min(Math.abs(this.snapAngleEpsilon),r/2);return!this.diagram.lastInput.shift&&r>0&&a>0&&(n%r<a?n=Math.floor(n/r)*r:n%r>r-a&&(n=(Math.floor(n/r)+1)*r)),n>=360?n-=360:n<0&&(n+=360),n}get snapAngleMultiple(){return this.tS}set snapAngleMultiple(t){this.tS=t}get snapAngleEpsilon(){return this.iS}set snapAngleEpsilon(t){this.iS=t}get originalAngle(){return this.eS}get rotationPoint(){return this.Mm}set rotationPoint(t){this.Mm=t.copy()}get handleAngle(){return this.sS}set handleAngle(t){this.sS=t}get handleDistance(){return this.nS}set handleDistance(t){this.nS=t}}class Bn extends St{constructor(e){super(),this.name="ClickSelecting",e&&Object.assign(this,e)}canStart(){return!(!this.isEnabled||this.isBeyondDragSize())}doMouseUp(){this.isActive&&(this.standardMouseSelect(),this.standardMouseClick()||this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()}}class Ze extends St{constructor(t){super();v(this,"xc");this.name="Action",this.xc=null,t&&Object.assign(this,t)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram,n=t.lastInput,i=t.findObjectAt(n.documentPoint,r=>{for(;r.panel!==null;){if(r.isActionable)return r;r=r.panel}return r});return i!==null&&i.isActionable?(this.xc=i,t.fc=t.findObjectAt(n.documentPoint,null,null),!0):!1}doMouseDown(){if(!this.isActive)this.canStart()&&this.doActivate();else{const t=this.diagram.lastInput,n=this.xc;if(n===null)return;t.targetObject=n,n.actionDown!==null&&n.actionDown(t,n)}}doMouseMove(){if(this.isActive){const t=this.diagram.lastInput,n=this.xc;if(n===null)return;t.targetObject=n,n.actionMove!==null&&n.actionMove(t,n)}}doMouseUp(){if(this.isActive){const t=this.diagram.lastInput,n=this.xc;if(n===null)return;t.targetObject=n,n.actionUp!==null&&n.actionUp(t,n),this.standardMouseClick(i=>{for(;i.panel!==null;){if(i.isActionable&&i===n)return i;i=i.panel}return i},i=>i===n)}this.stopTool()}doCancel(){const t=this.diagram.lastInput,n=this.xc;n!==null&&(t.targetObject=n,n.actionCancel!==null&&n.actionCancel(t,n),this.stopTool())}doStop(){this.xc=null}}class Le extends St{constructor(t){super();v(this,"Cl");v(this,"oS");v(this,"yc");v(this,"rS");this.name="ClickCreating",this.Cl=null,this.oS=!0,this.yc=!1,this.rS=new T(0,0),t&&Object.assign(this,t)}canStart(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.rS=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.rS))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.findPartAt(t.lastInput.documentPoint,!0)!==null)}doMouseUp(){const t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()}insertPart(t){const n=this.diagram,i=this.archetypeNodeData;if(i===null)return null;let r=null;try{if(n.v("ChangingSelection",n.selection),this.startTransaction(this.name),i instanceof xe)i.Pe()&&(i.li(),r=i.copy(),r!==null&&n.add(r));else if(i!==null){const a=n.model.copyNodeData(i);o.wt(a)&&(n.model.addNodeData(a),r=n.findPartForData(a))}if(r!==null){const a=T.X(t.x,t.y);this.isGridSnapEnabled&&this.diagram.lS(r,t,a),r.location=a,n.allowSelect&&(n.clearSelection(!0),r.isSelected=!0),T.s(a)}n.invalidateDocumentBounds(),this.transactionResult=this.name,n.v("PartCreated",r)}finally{this.stopTransaction(),n.v("ChangedSelection",n.selection)}return r}get archetypeNodeData(){return this.Cl}set archetypeNodeData(t){this.Cl=t}get isDoubleClick(){return this.oS}set isDoubleClick(t){this.oS=t}get isGridSnapEnabled(){return this.yc}set isGridSnapEnabled(t){this.yc=t}}class Qe extends St{constructor(t){super();v(this,"Vh");v(this,"hS");v(this,"Ll");this.name="DragSelecting",this.Vh=175,this.hS=!1,this.Ll=new xe({layerName:"Tool",selectable:!1}).add(new Qt("Rectangle",{name:"SHAPE",fill:null,stroke:"magenta"}).theme("stroke","dragSelect")).li(),t&&Object.assign(this,t)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(!t.allowSelect)return!1;const n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.timestamp-t.firstInput.timestamp<this.delay||t.findPartAt(n.documentPoint,!0)!==null))}doActivate(){const t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()}doDeactivate(){const t=this.diagram;t.stopAutoScroll(),t.remove(this.box),t.skipsUndoManager=!1,t.isMouseCaptured=!1,this.isActive=!1}doMouseMove(){const t=this.diagram;if(this.isActive&&this.box!==null){const n=this.computeBoxBounds();let i=this.box.findObject("SHAPE");i===null&&(i=this.box.findMainElement());const r=B.l().e(n.width,n.height);i.desiredSize=r,this.box.bc(n.x,n.y,!1),B.s(r),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.doAutoScroll(t.lastInput.viewPoint)}}doMouseUp(){if(this.isActive){const t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.v("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.v("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()}computeBoxBounds(){const t=this.diagram;return new I(t.firstInput.documentPoint,t.lastInput.documentPoint)}selectInRect(t){const n=this.diagram,i=n.lastInput,r=n.findPartsIn(t,this.isPartialInclusion);if(o.rr?i.meta:i.control)if(i.shift){const a=r.iterator;for(;a.next();){const l=a.value;l.isSelected&&(l.isSelected=!1)}}else{const a=r.iterator;for(;a.next();){const l=a.value;l.isSelected=!l.isSelected}}else if(i.shift){const a=r.iterator;for(;a.next();){const l=a.value;l.isSelected||(l.isSelected=!0)}}else{const a=new M,l=n.selection.iterator;for(;l.next();){const f=l.value;r.has(f)||a.add(f)}const u=a.iterator;for(;u.next();){const f=u.value;f.isSelected=!1}const c=r.iterator;for(;c.next();){const f=c.value;f.isSelected||(f.isSelected=!0)}}}get delay(){return this.Vh}set delay(t){this.Vh=t}get isPartialInclusion(){return this.hS}set isPartialInclusion(t){this.hS=t}get box(){return this.Ll}set box(t){t!==null&&t.li(),this.Ll=t}}class xs extends St{constructor(t){super();v(this,"Hw");v(this,"YC");v(this,"No");v(this,"aS");this.name="Panning",this.Hw=new T,this.YC=new T,this.No=!1;const n=this;this.aS=()=>{const i=n.diagram;i!==null&&i.Mi(s.document,"scroll",n.aS,!1),n.stopTool()},t&&Object.assign(this,t)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())}doActivate(){const t=this.diagram;this.No?(t.lastInput.bubbles=!0,t.Vt(s.document,"scroll",this.aS,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Hw.a(t.position)),this.isActive=!0}doDeactivate(){const t=this.diagram;t.currentCursor="",t.isMouseCaptured=!1,this.isActive=!1}doCancel(){const t=this.diagram;t.position=this.Hw,t.isMouseCaptured=!1,this.stopTool()}doMouseMove(){this.GC()}doMouseUp(){this.GC(),this.stopTool()}GC(){const t=this.diagram;if(this.isActive&&t){if(this.No){t.lastInput.bubbles=!0;return}const n=t.position,i=t.firstInput.documentPoint,r=t.lastInput.documentPoint;let a=n.x+i.x-r.x,l=n.y+i.y-r.y;t.allowHorizontalScroll||(a=n.x),t.allowVerticalScroll||(l=n.y),t.position=this.YC.e(a,l)}}get bubbles(){return this.No}set bubbles(t){this.No=t}get originalPosition(){return this.Hw}}class Dn{constructor(e){v(this,"qw");v(this,"Ww");v(this,"cS");v(this,"fS");this.qw=null,this.Ww=null,this.cS=null,this.fS=null,e&&Object.assign(this,e)}get mainElement(){return this.cS}set mainElement(e){this.cS=e}get show(){return this.qw}set show(e){this.qw!==e&&(this.qw=e)}get hide(){return this.Ww}set hide(e){this.Ww!==e&&(this.Ww=e)}get valueFunction(){return this.fS}set valueFunction(e){this.fS=e}}class nn{constructor(e,t,n){v(this,"hi");v(this,"Nm");v(this,"kc");this.hi=e,this.Nm=t,this.kc=n}}const Xe=class Xe extends St{constructor(t){super();v(this,"uS");v(this,"Jw");v(this,"dS");v(this,"gS");v(this,"$w");v(this,"Zw");v(this,"Cm");this.name="ContextMenu",this.uS=null,this.Jw=null,this.dS=null,this.gS=new T,this.$w=null,this.Cm=!1;const n=this;this.Zw=()=>n.stopTool(),t&&Object.assign(this,t)}sF(){const t=new Dn;t.show=(u,c,f)=>f.showDefaultContextMenu(),t.hide=(u,c)=>c.hideDefaultContextMenu(),Xe.ku=t;const n=this;this.Zw=()=>n.stopTool();const i=o.en("div"),r=o.en("div");i.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",r.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";const a=o.en("style");s.document.getElementsByTagName("head")[0].appendChild(a),a.sheet.insertRule(".goCXul { list-style: none; }",0),a.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),a.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);const l=this.diagram;l!==null&&(l.Vt(i,"contextmenu",Xe.Yh,!1),l.Vt(i,"selectstart",Xe.Yh,!1),l.Vt(r,"contextmenu",Xe.Yh,!1)),i.className="goCXforeground",r.className="goCXbackground",s.document.body&&(s.document.body.appendChild(i),s.document.body.appendChild(r)),Xe.Lm=i,Xe.Am=r,Xe.mS=!0}static Yh(t){return t.preventDefault(),!1}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||t.lastInput.clickCount>1?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)}doStart(){const t=this.diagram;this.gS.set(t.firstInput.documentPoint)}doStop(){this.hideContextMenu(),this.currentObject=null,this.Cm=!1}findObjectWithContextMenu(t){t===void 0&&(t=null);const n=this.diagram,i=n.lastInput;let r=null;if(t instanceof le||(t instanceof Re?r=t:r=n.findObjectAt(i.documentPoint,null,a=>!a.layer.isTemporary)),r!==null){let a=r;for(;a!==null;){if(a.contextMenu!==null)return a;a=a.panel}if(n.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return r.part}else if(n.contextMenu!==null)return n;return null}doActivate(){}doMouseDown(){if(super.doMouseDown(),this.isActive&&this.currentContextMenu instanceof ie){const t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.has(this)&&this.doContextClick()}doMouseUp(){if(this.isActive&&this.currentContextMenu instanceof ie){const t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}this.doContextClick()}doContextClick(){const t=this.diagram;if(!this.isActive)this.canStart()&&(this.openMenu(!0),this.isActive||this.stopTool());else{const n=this.currentContextMenu;if(n===null)return;let i=null;n instanceof Dn||(i=t.findObjectAt(t.lastInput.documentPoint,null,null),i!==null&&i.isContainedBy(n)&&this.standardMouseClick(null,null)),this.maybeStopTool(i)}}maybeStopTool(t){this.stopTool(),this.canStart()&&(this.diagram.currentTool=this,this.doMouseUp())}openMenu(t,n){if(n===void 0&&(n=null),this.Cm)return;this.Cm=!0,t&&this.standardMouseSelect();const i=this.standardMouseClick();if(this.Cm=!1,!i){this.isActive=!0;const r=Xe.ku;if(n===null&&(n=this.findObjectWithContextMenu()),n!==null){const a=n.contextMenu;a!==null?(this.currentObject=n instanceof Re?n:null,this.showContextMenu(a,this.currentObject)):r!==null&&this.showContextMenu(r,this.currentObject)}else r!==null&&this.showContextMenu(r,null);this.currentContextMenu instanceof ie&&!this.currentContextMenu.visible&&this.stopTool()}}doMouseMove(){const t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()}showContextMenu(t,n){const i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof ie){const r=t;r.layerName="Tool",r.selectable=!1,r.scale=1/i.scale,r.category=this.name,r.hasPlaceholder()&&(r.placeholder.scale=i.scale);const a=r.diagram;a!==null&&a!==i&&a.remove(r),i.add(r),n!==null?r.adornedObject=n:r.data=i.model,r.ensureBounds(),this.positionContextMenu(r,n)}else t instanceof Dn&&t.show(n,i,this);this.currentContextMenu=t}positionContextMenu(t,n){if(t.hasPlaceholder())return;const i=t,r=this.diagram,a=r.lastInput.documentPoint.copy(),l=i.measuredBounds,u=r.viewportBounds;r.lastInput.isTouchEvent&&(a.x-=l.width),a.x+l.width>u.right&&(a.x-=l.width+5/r.scale),a.x<u.x&&(a.x=u.x),a.y+l.height>u.bottom&&(a.y-=l.height+5/r.scale),a.y<u.y&&(a.y=u.y),i.position=a}hideContextMenu(){const t=this.diagram,n=this.currentContextMenu;n!==null&&(n instanceof ie?(t.remove(n),this.Jw!==null&&this.Jw.removeAdornment(n.category),n.data=null,n.adornedObject=null):n instanceof Dn&&(n.hide!==null?n.hide(t,this):n.mainElement!==null&&(n.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())}nF(){const t=this,n=new M;return n.add(new nn("Copy",i=>i.commandHandler.copySelection(),i=>i.commandHandler.canCopySelection())),n.add(new nn("Cut",i=>i.commandHandler.cutSelection(),i=>i.commandHandler.canCutSelection())),n.add(new nn("Delete",i=>i.commandHandler.deleteSelection(),i=>i.commandHandler.canDeleteSelection())),n.add(new nn("Paste",i=>i.commandHandler.pasteSelection(t.mouseDownPoint),i=>i.commandHandler.canPasteSelection(t.mouseDownPoint))),n.add(new nn("Select All",i=>i.commandHandler.selectAll(),i=>i.commandHandler.canSelectAll())),n.add(new nn("Undo",i=>i.commandHandler.undo(),i=>i.commandHandler.canUndo())),n.add(new nn("Redo",i=>i.commandHandler.redo(),i=>i.commandHandler.canRedo())),n.add(new nn("Scroll To Part",i=>i.commandHandler.scrollToPart(),i=>i.commandHandler.canScrollToPart())),n.add(new nn("Zoom To Fit",i=>i.commandHandler.zoomToFit(),i=>i.commandHandler.canZoomToFit())),n.add(new nn("Reset Zoom",i=>i.commandHandler.resetZoom(),i=>i.commandHandler.canResetZoom())),n.add(new nn("Group Selection",i=>i.commandHandler.groupSelection(),i=>i.commandHandler.canGroupSelection())),n.add(new nn("Ungroup Selection",i=>i.commandHandler.ungroupSelection(),i=>i.commandHandler.canUngroupSelection())),n.add(new nn("Edit Text",i=>i.commandHandler.editTextBlock(),i=>i.commandHandler.canEditTextBlock())),n}showDefaultContextMenu(){const t=this.diagram;this.$w===null&&(this.$w=this.nF()),Xe.Lm.innerHTML="",Xe.Am.addEventListener("pointerdown",this.Zw,!1);const n=this,i=o.en("ul");i.className="goCXul",Xe.Lm.appendChild(i),i.innerHTML="";const r=this.$w.iterator;for(;r.next();){const a=r.value,l=a.Nm,u=a.kc;if(typeof l!="function"||typeof u=="function"&&!u(t))continue;const c=o.en("li");c.className="goCXli";const f=o.en("a");f.className="goCXa",f.href="#",f.Nm=a.Nm,f.addEventListener("pointerdown",function(m){return this.Nm(t),n.stopTool(),m.preventDefault(),!1},!1),f.textContent=a.hi,c.appendChild(f),i.appendChild(c)}Xe.Lm.style.display="block",Xe.Am.style.display="block"}hideDefaultContextMenu(){if(this.currentContextMenu===null||this.currentContextMenu!==Xe.ku)return;Xe.Lm.style.display="none",Xe.Am.style.display="none";const t=this.diagram;t!==null&&t.Mi(Xe.Am,"pointerdown",this.Zw,!1),this.currentContextMenu=null}get currentContextMenu(){return this.uS}set currentContextMenu(t){this.uS=t,this.Jw=t instanceof ie?t.adornedPart:null}get defaultTouchContextMenu(){return Xe.mS===!1&&Xe.ku===null&&le.isUsingDOM()&&this.sF(),Xe.ku}set defaultTouchContextMenu(t){t===null&&(Xe.mS=!0),Xe.ku=t}get currentObject(){return this.dS}set currentObject(t){this.dS=t}get mouseDownPoint(){return this.gS}};v(Xe,"ku",null),v(Xe,"mS",!1),v(Xe,"Am",null),v(Xe,"Lm",null);let De=Xe;var $e=(A=>(A[A.LostFocus=1]="LostFocus",A[A.MouseDown=2]="MouseDown",A[A.Tab=3]="Tab",A[A.Enter=4]="Enter",A))($e||{}),vn=(A=>(A[A.SingleClick=1]="SingleClick",A[A.SingleClickSelected=2]="SingleClickSelected",A[A.DoubleClick=3]="DoubleClick",A))(vn||{}),li=(A=>(A[A.None=1]="None",A[A.Active=2]="Active",A[A.Editing=3]="Editing",A[A.Validating=4]="Validating",A[A.Invalid=5]="Invalid",A[A.Validated=6]="Validated",A))(li||{});const un=class un extends St{constructor(t){super();v(this,"Se");v(this,"pS");v(this,"yS");v(this,"Al");v(this,"Yt");v(this,"wS");v(this,"xS");v(this,"bS");v(this,"Qw");v(this,"_w");this.name="TextEditing",this.Se=new Je,this.pS=null,this.yS=2,this.Al=null,this.Yt=1,this.wS=1,this.xS=!0,this.bS=null,this.Qw=new Dn,this._w=null,this.oF(this.Qw),t&&Object.assign(this,t)}oF(t){if(!le.isUsingDOM())return;const n=o.en("textarea");this._w=n;const i=this;n.addEventListener("input",function(r){if(i.textBlock===null)return;const a=i.measureTemporaryTextBlock(this.value),l=this.textScale;this.style.width=20+Math.max(i.textBlock.measuredBounds.width,a.measuredBounds.width)*l+"px",this.rows=Math.max(i.textBlock.lineCount,a.lineCount)},!1),n.addEventListener("keydown",function(r){if(r.isComposing||i.textBlock===null)return;const a=r.key;if(a==="Enter"){i.textBlock.isMultiline===!1&&r.preventDefault(),i.acceptText(4);return}else if(a==="Tab"){i.acceptText(3),r.preventDefault();return}else a==="Escape"&&(i.doCancel(),i.diagram!==null&&i.diagram.doFocus())},!1),n.addEventListener("focus",function(r){i.rF(r)},!1),n.addEventListener("blur",function(r){i.lF(r)},!1),t.valueFunction=()=>n.value,t.mainElement=n,t.show=(r,a,l)=>{if(!(r instanceof Je)||!a||!a.div||!(l instanceof un))return;if(l.state===5){n.style.border="3px solid red",n.focus();return}const u=r.getDocumentPoint(z.Center),c=a.position,f=a.scale;let m=r.getDocumentScale()*f;m<l.minimumEditorScale&&(m=l.minimumEditorScale);const p=r.naturalBounds.width*m+6,y=r.naturalBounds.height*m+2,w=(u.x-c.x)*f,b=(u.y-c.y)*f,C=r.verticalAlignment,k=(r.lineHeight+r.spacingAbove+r.spacingBelow)*r.lineCount*m,N=.5*y-.5*k,F=C.y*y-C.y*k+C.offsetY-N-k/2;n.value=r.text,a.div.style.font=r.font;const D=1;n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=m*100+"%",n.style.lineHeight="normal",n.style.width=p+"px",n.style.left=(w-p/2|0)-D+"px",n.style.top=(b+F|0)-D+"px",n.style.textAlign=r.textAlign,n.style.margin="0",n.style.padding=D+"px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=r.lineCount,n.textScale=m,n.className="goTXarea",a.div.appendChild(n),n.focus(),l.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))},t.hide=(r,a)=>{r.div&&r.div.removeChild(n)}}get textBlock(){return this.pS}set textBlock(t){this.pS=t}get currentTextEditor(){return this.bS}set currentTextEditor(t){this.bS=t}get defaultTextEditor(){return this.Qw}set defaultTextEditor(t){this.Qw=t}get starting(){return this.yS}set starting(t){this.yS=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t===null||t.isReadOnly||un.Pc&&un.Pc!==this&&(un.Pc.acceptText(2),un.Pc&&un.Pc!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;const n=t.lastInput.documentPoint,i=t.findObjectAt(n);if(i===null||!(i instanceof Je)||!i.editable||!i.part.canEdit())return!1;const r=i.part;return!(r===null||this.starting===2&&!r.isSelected||this.starting===3&&t.lastInput.clickCount<2)}doStart(){un.Pc=this,this.textBlock!==null&&this.doActivate()}doActivate(){if(this.isActive)return;const t=this.diagram;if(t===null)return;let n=this.textBlock;if(n===null&&(n=t.findObjectAt(t.lastInput.documentPoint)),n===null||!(n instanceof Je)||(this.textBlock=n,n.part===null))return;t.animationManager.stopAnimation(),this.isActive=!0,this.Yt=2;let i=this.defaultTextEditor;n.textEditor!==null&&(i=n.textEditor),this.Se=this.textBlock.copy();const r=new I(this.textBlock.getDocumentPoint(z.TopLeft),this.textBlock.getDocumentPoint(z.BottomRight));t.scrollToRect(r),i.show(n,t,this),this.currentTextEditor=i}doCancel(){this.stopTool()}doMouseUp(){this.canStart()&&this.doActivate()}doMouseDown(){this.isActive&&this.acceptText(2)}acceptText(t){switch(t){case 2:this.Yt===6?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.Yt===2||this.Yt===5||this.Yt===3)&&(this.Yt=4,this.jC());break;case 1:case 4:case 3:if(t===4&&this.textBlock.isMultiline===!0)return;(this.Yt===2||this.Yt===5||this.Yt===3)&&(this.Yt=4,this.jC());break}}jC(){const t=this.textBlock,n=this.diagram,i=this.currentTextEditor;if(t!==null&&i!==null){const r=t.text;let a="";if(i.valueFunction!==null&&(a=i.valueFunction()),!this.isValidText(t,r,a)){this.Yt=5,this.doError(r,a);return}this.startTransaction(this.name),this.Yt=6,this.transactionResult=this.name,t.text=a,this.doSuccess(r,a),n!==null&&n.v("TextEdited",t,r),this.stopTransaction(),this.stopTool(),n!==null&&n.doFocus()}}doError(t,n){const i=this.textBlock;i.errorFunction!==null&&i.errorFunction(this,t,n);const r=this.currentTextEditor;r&&r.show(i,this.diagram,this)}doSuccess(t,n){const i=this.textBlock;i.textEdited!==null&&i.textEdited(i,t,n)}doDeactivate(){const t=this.diagram;t!==null&&(this.Yt=1,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)}doStop(){un.Pc=null}rF(t){if(this.currentTextEditor===null||this.state===1)return;const n=this._w;this.Yt===2&&(this.Yt=3),typeof n.select=="function"&&this.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}lF(t){if(this.currentTextEditor===null||this.state===1)return;const n=this._w;typeof n.focus=="function"&&n.focus(),typeof n.select=="function"&&this.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}isValidText(t,n,i){const r=this.textValidation;if(r!==null&&!r(t,n,i))return!1;const a=t.textValidation;return!(a!==null&&!a(t,n,i))}get textValidation(){return this.Al}set textValidation(t){this.Al=t}get minimumEditorScale(){return this.wS}set minimumEditorScale(t){this.wS=t}get selectsTextOnActivate(){return this.xS}set selectsTextOnActivate(t){this.xS=t}get state(){return this.Yt}set state(t){this.Yt!==t&&(this.Yt=t)}measureTemporaryTextBlock(t){const n=this.Se;return n.text=t,n.ut(this.textBlock.Tl,1/0),n}};v(un,"LostFocus",1),v(un,"MouseDown",2),v(un,"Tab",3),v(un,"Enter",4),v(un,"SingleClick",1),v(un,"SingleClickSelected",2),v(un,"DoubleClick",3),v(un,"StateNone",1),v(un,"StateActive",2),v(un,"StateEditing",3),v(un,"StateValidating",4),v(un,"StateInvalid",5),v(un,"StateValidated",6),v(un,"Pc",null);let ti=un;var nr=(A=>(A[A.Default=1]="Default",A[A.AnimateLocations=2]="AnimateLocations",A[A.None=3]="None",A))(nr||{});const rs=class rs{constructor(e){v(this,"p");v(this,"Ni");v(this,"Oi");v(this,"kr");v(this,"Gn");v(this,"Ao");v(this,"kS");v(this,"PS");v(this,"Tm");v(this,"wi");v(this,"Sc");v(this,"un");v(this,"Dm");v(this,"Gh");v(this,"tx");v(this,"Fm");v(this,"ix");v(this,"Mc");v(this,"xu");v(this,"Rm");this.p=le.ym(),this.Ni=!1,this.Tm=!1,this.wi=!1,this.Sc=!1,this.ix=!0,this.Mc=1,this.xu=!1,this.Oi=!0,this.kr=!0,this.Ao=600,this.kS=!1,this.PS=!1,this.Gn=new L,this.un=new ei,this.Dm=new ei,this.un.ds=this,this.Gh=new L,this.tx=new L,this.Fm=new L,this.Rm=new L,e&&Object.assign(this,e)}To(e){this.p=e}rE(){return this.p}canStart(e){return!0}Dl(e){return!this.Oi||!this.canStart(e)?!1:(this.Gn.add(e),this.defaultAnimation.isAnimating&&this.stopAnimation(),this.p.Ci(),this.wi=!0,!0)}getBundleAnimation(){return this.Dm}SS(){if(!this.Oi||(this.Dm.ce.count>0&&this.Dm.start(),!this.wi))return;const e=this.un,t=this.p,n=this.Gn.has("Model");if(n&&(this.Sc=!0,this.Mc===1?(e.isViewportUnconstrained=!0,e.ce.clear(),e.add(t,"position",t.position.copy().offset(0,-200),t.position),e.add(t,"opacity",0,1)):this.Mc===3&&e.ce.clear(),this.Mc===2&&t.ex.equals(t.at)?this.ix=!0:this.ix=!1,t.v("InitialAnimationStarting",this)),n&&!this.kr||e.ce.count===0){this.Gn.clear(),this.wi=!1,e.ce.clear(),e.sx(t),this.Sc=!1,t.C();return}this.Gn.clear(),t.Pr=!1;const i=e.ce.get(t);t.autoScale!==1&&i!==null&&(delete i.si.scale,delete i.gs.scale);const r=this;s.requestAnimationFrame(()=>{r.wi===!1||e.Ni||(t.getRenderingHint("temporaryPixelRatio")&&t.Uw(),t.MS(),r.wi=!1,e.start(),e.Ni&&(r.Pu(),t.invalidateDocumentBounds(),e.HC(0),t.yr(!0),r.Su(),t.v("AnimationStarting",r)))})}NS(){return this.Gn.has("Trigger")&&this.Gn.count===1}qC(e,t,n,i){this.isTicking||this.NS()||e instanceof Gt&&(e.fromNode!==null||e.toNode!==null)||this.un.add(e,"position",t,n,i)}nx(e){return this.un.nx(e)}CS(e){return this.un.CS(e)}hF(e){const t=this.Gh,n=this;function i(){if(n.Fm.count>0&&(t.addAll(n.Fm),n.Fm.clear(),n.Ni=!0),n.Ni===!1||t.count===0)return;n.tx.addAll(t);const r=n.tx.iterator;for(;r.next();){const a=r.value;a.Ni!==!1&&(a.aF()?a.WC(!1):a.Nc=!0)}if(n.tx.clear(),n.Ni===!1){s.requestAnimationFrame(i);return}n.Pu(),n.p.yr(),n.Su(),s.requestAnimationFrame(i)}this.Ni?this.cF(e):(this.Ni=!0,t.add(e),s.requestAnimationFrame(()=>i()))}cF(e){this.Fm.add(e)}fF(){const e=this.Gh.iterator;for(;e.next();)e.value.Nc=!1}Pu(){if(this.Tm)return;const e=this.p;this.kS=e.skipsUndoManager,this.PS=e.fe,e.skipsUndoManager=!0,e.fe=!0,this.Tm=!0}Su(){const e=this.p;e.skipsUndoManager=this.kS,e.fe=this.PS,this.Tm=!1}stopAnimation(e){const t=this.un;if(this.wi===!0&&(this.wi=!1,this.Sc=!1,this.Gn.clear(),t.uF()&&this.p.requestUpdate()),!this.Ni){t.ce.clear(),t.sx(this.p);return}if(t.Mu(!0),t.sx(null),e===!0){const n=this.Gh.toArray();for(let i=0;i<n.length;i++)n[i].Mu(!0)}}Mu(e){this.Gh.delete(e),this.Gh.count===0&&(this.Ni=!1,this.p.requestUpdate()),e===this.defaultAnimation&&this.p.v("AnimationFinished",this)}Cc(e,t){this.wi&&(!this.Gn.has("Expand Tree")&&!this.Gn.has("Expand SubGraph")||(this.un.Cc(e,t),this.JC(e)))}Lc(e,t){this.wi&&(!this.Gn.has("Collapse Tree")&&!this.Gn.has("Collapse SubGraph")||(this.un.Lc(e,t),this.un.LS(t,"position",t.position,t.position),this.JC(e)))}$C(e,t){!this.wi||e.equals(t)||this.NS()||(this.p.Bh||(e=t.copy()),this.un.LS(this.p,"position",e,t))}ZC(e,t){this.wi&&(this.NS()||this.un.add(this.p,"scale",e,t))}AS(e,t){e.Me&&(e.Sr=t,this.Rm.add(e))}JC(e){const t=e.findLinksConnected();for(;t.next();){const n=t.value;n.Me&&(n.Sr=n.points.copy(),this.Rm.add(n))}}get isEnabled(){return this.Oi}set isEnabled(e){this.Oi=e,e&&this.Gh.each(t=>{!t.isAnimating&&t.runCount===1/0&&t.start()})}get duration(){return this.Ao}set duration(e){e<1&&o._(e,">= 1",rs,"duration"),this.Ao=e}get isAnimating(){return this.Ni}get isTicking(){return this.Tm}get isInitial(){return this.kr}set isInitial(e){this.kr=e}get defaultAnimation(){return this.un}get activeAnimations(){return this.Gh}get initialAnimationStyle(){return this.Mc}set initialAnimationStyle(e){this.Mc=e}static defineAnimationEffect(e,t){rs.ox.set(e,t)}static TS(e,t,n,i,r){e===null&&(e=[0,0,0,0]),t===null&&(t=[0,0,0,0]);let a=e[0],l=e[1];const u=e[2],c=e[3];let f=t[0],m=t[1];const p=t[2],y=t[3];u===0||u===100?(a=f,l=m):(p===0||p===100)&&(f=a,m=l),Math.abs(f-a)>180&&(f>a?a+=360:f+=360);const w=r(n,a,f-a,i)%360,b=r(n,l,m-l,i),C=r(n,u,p-u,i),k=r(n,c,y-c,i);return"hsla("+w+", "+b+"%, "+C+"%, "+k+")"}};v(rs,"ox",new W),(()=>{const e=rs.ox,t=(n,i,r,a,l,u)=>{n.position=new T(a(l,i.x,r.x-i.x,u),a(l,i.y,r.y-i.y,u))};e.set("position:diagram",t),e.set("position",t),e.set("position:part",(n,i,r,a,l,u)=>{l<u?n.bc(a(l,i.x,r.x-i.x,u),a(l,i.y,r.y-i.y,u),!1):n.position=new T(a(l,i.x,r.x-i.x,u),a(l,i.y,r.y-i.y,u))}),e.set("location",(n,i,r,a,l,u)=>{l<u?n.bc(a(l,i.x,r.x-i.x,u),a(l,i.y,r.y-i.y,u),!0):n.location=new T(a(l,i.x,r.x-i.x,u),a(l,i.y,r.y-i.y,u))}),e.set("position:placeholder",(n,i,r,a,l,u)=>{l<u?n.bc(a(l,i.x,r.x-i.x,u),a(l,i.y,r.y-i.y,u),!1):n.position=new T(a(l,i.x,r.x-i.x,u),a(l,i.y,r.y-i.y,u))}),e.set("position:nodeCollapse",(n,i,r,a,l,u)=>{const c=n.actualBounds,f=r.actualBounds,m=f.x+f.width/2-c.width/2,p=f.y+f.height/2-c.height/2;l<u?n.bc(a(l,i.x,m-i.x,u),a(l,i.y,p-i.y,u),!1):n.position=new T(a(l,i.x,m-i.x,u),a(l,i.y,p-i.y,u))}),e.set("desiredSize",(n,i,r,a,l,u)=>{n.desiredSize=new B(a(l,i.width,r.width-i.width,u),a(l,i.height,r.height-i.height,u))}),e.set("width",(n,i,r,a,l,u)=>{n.width=a(l,i,r-i,u)}),e.set("height",(n,i,r,a,l,u)=>{n.height=a(l,i,r-i,u)}),e.set("fill",(n,i,r,a,l,u)=>{n.fill=rs.TS(i,r,l,u,a)}),e.set("stroke",(n,i,r,a,l,u)=>{n.stroke=rs.TS(i,r,l,u,a)}),e.set("strokeWidth",(n,i,r,a,l,u)=>{n.strokeWidth=a(l,i,r-i,u)}),e.set("strokeDashOffset",(n,i,r,a,l,u)=>{n.strokeDashOffset=a(l,i,r-i,u)}),e.set("background",(n,i,r,a,l,u)=>{n.background=rs.TS(i,r,l,u,a)}),e.set("opacity",(n,i,r,a,l,u)=>{n.opacity=a(l,i,r-i,u)}),e.set("scale",(n,i,r,a,l,u)=>{n.scale=a(l,i,r-i,u)}),e.set("angle",(n,i,r,a,l,u)=>{n.angle=a(l,i,r-i,u)})})(),v(rs,"Default",1),v(rs,"AnimateLocations",2),v(rs,"None",3);let ns=rs;const Mi=class Mi{constructor(e){v(this,"rx");v(this,"vm");v(this,"Ni");v(this,"Nu");v(this,"Ao");v(this,"ms");v(this,"QC");v(this,"Ac");v(this,"ce");v(this,"lx");v(this,"si");v(this,"jn");v(this,"Cu");v(this,"Tc");v(this,"hx");v(this,"ax");v(this,"Nc");v(this,"DS");v(this,"cx");v(this,"ds");v(this,"p");v(this,"FS");v(this,"RS");v(this,"vS");this.p=null,this.ds=null,this.DS=null,this.cx=null,this.FS=!1,this.Ni=!1,this.Nc=!1,this.si=0,this.jn=0,this.rx=Mi.EaseInOutQuad,this.vm=Mi.EaseInOutQuad,this.Cu=!1,this.Tc=!1,this.hx=1,this.ax=0,this.Ao=NaN,this.ms=NaN,this.RS=0,this.Nu=null,this.QC=T.Po,this.ce=new W,this.lx=new W,this.Ac=new L,this.vS=1,e&&Object.assign(this,e)}suspend(){this.Nc=!0}advanceTo(e,t){t&&(this.Nc=!1),this.Cu&&e>=this.ms&&(this.Tc=!0,e=e-this.ms),this.RS=e,this.WC(!0),this.ds.Pu(),this.p.yr(),this.ds.Su(),this.p.redraw()}sx(e){if(this.lx.clear(),this.Tc=!1,this.ax=0,this.ms=NaN,this.Ac.count>0&&this.Ac.clear(),e!==null){const t=e.links;for(;t.next();)t.value.Sr=null}}uF(){return this.ce.count>0}start(){if(this.ce.count===0)return this;if(this.Ni)return this;let e=this.p;const t=this.ce.iterator;for(;t.next();){const i=t.key;e===null&&(i instanceof le?e=i:i instanceof Re&&(e=i.diagram))}if(e!==null)this.p=e,this.ds=e.animationManager;else return this;const n=this.ds;return n.isEnabled===!1?this:(this.ms=isNaN(this.Ao)?n.duration:this.Ao,this.vm=this.rx,n.Sc&&n.Mc===1&&this===n.defaultAnimation&&(this.vm=Mi.EaseOutExpo,this.ms=isNaN(this.Ao)?n.duration===600?900:n.duration:this.Ao),this.vS=e.scrollMode,this.isViewportUnconstrained&&(e.jh=2),n.Pu(),this.Ac.each(i=>{i.data=null,e.add(i)}),n.Su(),this.Ni=!0,this.si=+new Date,this.jn=this.si+this.ms,n.hF(this),this)}addTemporaryPart(e,t){return e.Pe()?(this.Ac.add(e),this.p=t,this):this}add(e,t,n,i,r){if(this.p===null&&(e instanceof le?this.p=e:e instanceof Re&&e.diagram!==null&&(this.p=e.diagram)),e instanceof xe){if(!e.isAnimated)return this;t==="position"&&(t="position:part")}return this.LS(e,t,n,i,r),this}LS(e,t,n,i,r){const a=this.ce;let l,u,c;if(e instanceof le&&t==="position"&&(t="position:diagram"),(t==="fill"||t==="stroke"||t==="background")&&(ve.Do(n),ve.OS(),n=[ve.Ii.n0,ve.Ii.n1,ve.Ii.n2,ve.Ii.n3],ve.Do(i),ve.OS(),i=[ve.Ii.n0,ve.Ii.n1,ve.Ii.n2,ve.Ii.n3]),a.has(e))l=a.get(e),u=l.si,c=l.gs,u[t]===void 0&&(u[t]=this.Lu(n)),c[t]=this.Lu(i);else{if(t==="position"&&n.equalsApprox(i))return;u={},c={},u[t]=this.Lu(n),c[t]=this.Lu(i),l=new Ri(u,c,r),a.set(e,l)}const f=u[t];f instanceof T&&!f.isReal()&&f.a(this.QC),r&&t.indexOf("position:")===0&&e instanceof xe?l.fx.location=this.Lu(e.location):r&&(l.fx[t]=this.Lu(n))}Lu(e){return e instanceof T||e instanceof B?e.copy():e}dF(e){const t=this.ce;if(t.has(e)){const n=t.get(e);n.ux=!0}}nx(e){if(!this.Ni)return!1;const t=this.ce.get(e);return t!==null&&t.ux}CS(e){if(!this.Ni)return!1;const t=this.ce.get(e);return t!==null&&!!(t.si.position||t.si["position:part"]||t.si.location)}aF(){if(this.Ac.count>0)return!0;const e=this.ce.iterator;for(;e.next();){const t=e.key;if(t instanceof Re&&t.diagram!==null||t instanceof le)return!0}return!1}WC(e){if(this.Nc&&!e)return;const t=this.ds;if(this.Ni===!1)return;const n=+new Date;let i=n>this.jn?this.ms:n-this.si;e&&(i=this.RS,i<this.ms?(this.si=+new Date-i,this.jn=this.si+this.ms):i=this.ms),t.Pu(),this.HC(i),this.p.yr(!0),t.Su(),n>this.jn&&(this.Cu&&!this.Tc?(this.si=+new Date,this.jn=this.si+this.ms,this.Tc=!0):this.Mu(!1))}HC(e){const t=this.ms,n=this.ce.iterator,i=this.Tc;for(;n.next();){const r=n.key;if(r instanceof Re&&r.diagram===null)continue;const a=n.value,l=i?a.gs:a.si,u=i?a.si:a.gs,c=ns.ox;for(const f in u)f==="position"&&(u["position:placeholder"]||u["position:nodeCollapse"])||c.get(f)!==null&&c.get(f)(r,l[f],u[f],this.vm,e,t,this)}}stop(){return this.Ni?(this.Mu(!0),this):this}Mu(e){if(this.cx!==null&&this.cx.gF(this.DS),!this.Ni)return;const t=this.p,n=this.ds;n.Sc=!1,this.Ni=!1,this.Nc=!1,n.Pu();const i=this.ce,r=this.Ac.iterator;for(;r.next();)t.remove(r.value);const a=this.Cu,l=i.iterator,u=ns.ox;for(;l.next();){const f=l.key,m=l.value,p=a?m.gs:m.si,y=a?m.si:m.gs,w=m.fx;for(const b in y)if(u.get(b)!==null){let C=b;m.gx&&(C==="position:nodeCollapse"||C==="position:placeholder")&&(C="position"),u.get(C)(f,p[b],w[b]!==void 0?w[b]:m.gx?p[b]:y[b],this.vm,this.ms,this.ms,this)}m.gx&&w.location!==void 0&&f instanceof xe&&(f.location=w.location),m.ux&&f instanceof xe&&f.Ei(!1)}this.ax++;const c=!e&&this.hx>this.ax;if(!c&&(this===n.Dm||this===n.defaultAnimation)&&this.ce.clear(),t.mx.clear(),t.yP(!1),t.invalidateDocumentBounds(),t.C(),t.yr(!0),n.defaultAnimation===this){const f=n.Rm.iterator;for(;f.next();)f.value.mF();n.Rm.clear()}if(t.yr(!0),this.isViewportUnconstrained&&(t.scrollMode=this.vS),n.Su(),c){this.Tc=!1,this.start();return}this.sx(null),t._C(),n.Mu(this),this.Nu&&this.Nu(this),t.requestUpdate()}Cc(e,t){const n=t.actualBounds;let i=null;if(t instanceof Vt&&(i=t.placeholder),i!==null&&i.visible){const r=i.getDocumentPoint(z.TopLeft),a=i.padding;r.x+=a.left,r.y+=a.top,this.add(e,"position",r,e.position,!1)}else this.add(e,"position",new T(n.x+n.width/2,n.y+n.height/2),e.position,!1);this.add(e,"scale",.01,e.scale,!1),e instanceof Vt&&this.pF(e,t)}pF(e,t){const n=e.memberParts;for(;n.next();){const i=n.value;i instanceof It&&this.Cc(i,t)}}Lc(e,t){if(!e.isVisible())return;let n=null;if(t instanceof Vt&&(n=t.placeholder),n!==null&&n.visible){const i=n.getDocumentPoint(z.TopLeft),r=n.padding;i.x+=r.left,i.y+=r.top,this.add(e,"position:placeholder",e.position,i,!0)}else this.add(e,"position:nodeCollapse",e.position,t,!0);this.add(e,"scale",e.scale,.01,!0),this.dF(e),e instanceof Vt&&this.yF(e,t)}yF(e,t){const n=e.memberParts;for(;n.next();){const i=n.value;i instanceof It&&this.Lc(i,t)}}get duration(){return this.Ao}set duration(e){o.i(e,"number",Mi,"duration"),e<1&&o._(e,">= 1",Mi,"duration"),this.Ao=e}get reversible(){return this.Cu}set reversible(e){this.Cu=e}get runCount(){return this.hx}set runCount(e){e>0?this.hx=e:o.o("Animation.runCount value must be a positive integer.")}get finished(){return this.Nu}set finished(e){this.Nu!==e&&(e!==null&&o.i(e,"function",Mi,"finished"),this.Nu=e)}get easing(){return this.rx}set easing(e){this.rx=e}get isViewportUnconstrained(){return this.FS}set isViewportUnconstrained(e){this.FS=e}get isAnimating(){return this.Ni}getTemporaryState(e){let t=this.lx.get(e);return t===null&&(t={},this.lx.set(e,t)),t}};v(Mi,"EaseLinear",(e,t,n,i)=>n*e/i+t),v(Mi,"EaseInOutQuad",(e,t,n,i)=>(e/=i/2,e<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t)),v(Mi,"EaseInQuad",(e,t,n,i)=>n*(e/=i)*e+t),v(Mi,"EaseOutQuad",(e,t,n,i)=>-n*(e/=i)*(e-2)+t),v(Mi,"EaseInExpo",(e,t,n,i)=>e===0?t:n*Math.pow(2,10*(e/i-1))+t),v(Mi,"EaseOutExpo",(e,t,n,i)=>e===i?t+n:n*(-Math.pow(2,-10*e/i)+1)+t);let ei=Mi;class Ri{constructor(e,t,n){v(this,"si");v(this,"gs");v(this,"fx");v(this,"gx");v(this,"ux");this.si=e,this.gs=t,this.fx={},this.gx=n,this.ux=!1}}var Ii=(A=>(A[A.Default=1]="Default",A[A.Immediate=2]="Immediate",A[A.Bundled=3]="Bundled",A))(Ii||{});const Vo=class Vo{constructor(e,t,n){v(this,"ke");v(this,"an");v(this,"Au");v(this,"Dc");this.ke=null,this.an=e,this.Au=n||1,this.Dc=null,t!==void 0&&(this.Dc=t,n===void 0&&(this.Au=2))}copy(){const e=new Vo(this.an);e.Au=this.Au;const t=this.Dc;if(t!==null){const n={};t.duration!==void 0&&(n.duration=t.duration),t.finished!==void 0&&(n.finished=t.finished),t.easing!==void 0&&(n.easing=t.easing),e.Dc=n}return e}get propertyName(){return this.an}set propertyName(e){this.an=e}get animationSettings(){return this.Dc}set animationSettings(e){this.Dc=e}wF(e){const t=this.Dc;t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}get startCondition(){return this.Au}set startCondition(e){this.Au=e}};v(Vo,"Default",1),v(Vo,"Immediate",2),v(Vo,"Bundled",3);let Pi=Vo;class we{constructor(e){v(this,"p");v(this,"Mt");v(this,"Wt");v(this,"Mr");v(this,"Fl");v(this,"Rl");v(this,"vl");v(this,"Ol");v(this,"Il");v(this,"El");v(this,"Bl");v(this,"Ul");v(this,"Vl");v(this,"zl");v(this,"Xl");v(this,"Kl");v(this,"kc");v(this,"Yl");v(this,"px");v(this,"Om");v(this,"Tu");v(this,"At");L.Gi(this),this.p=null,this.At=new M,this.Mt="",this.Wt=1,this.Mr=!1,this.Fl=!0,this.Rl=!0,this.vl=!0,this.Ol=!0,this.Il=!0,this.El=!0,this.Bl=!0,this.Ul=!0,this.Vl=!0,this.zl=!0,this.Xl=!0,this.Kl=!0,this.kc=!0,this.Yl=!0,this.px=!0,this.Om=!1,this.Tu=[],e&&Object.assign(this,e)}xF(){const e=this.At;for(let t=0;t<e.length;t++)e.r[t].IS(null);e.clear(),this.Tu.length=0}To(e){this.p=e}toString(e){e===void 0&&(e=0);const t='Layer "'+this.name+'"';if(e<=0)return t;let n=0,i=0,r=0,a=0,l=0;const u=this.At.iterator;for(;u.next();){const f=u.value;f instanceof Vt?r++:f instanceof It?i++:f instanceof Gt?a++:f instanceof ie?l++:n++}let c="";if(n>0&&(c+=n+" Parts "),i>0&&(c+=i+" Nodes "),r>0&&(c+=r+" Groups "),a>0&&(c+=a+" Links "),l>0&&(c+=l+" Adornments "),e>1){const f=this.At.iterator;for(;f.next();){const m=f.value;c+=`
    `+m.toString();const p=m.data;p!==null&&L.as(p)&&(c+=" #"+L.as(p)),m instanceof It?c+=" "+o.toString(p):m instanceof Gt&&(c+=" "+o.toString(m.fromNode)+" "+o.toString(m.toNode))}}return t+" "+this.At.count+": "+c}findObjectAt(e,t,n){if(t===void 0&&(t=null),n===void 0&&(n=null),this.Yl===!1)return null;let i=!1;this.diagram!==null&&this.diagram.viewportBounds.containsPoint(e)&&(i=!0);const r=T.l(),a=this.At.r,l=a.length;for(let u=l;u--;){const c=a[u];if(i===!0&&c.Ml()===!1||!c.isVisible())continue;r.a(e),r.Ie(c.Es);let f=c.tL(r,t,n);if(f!==null&&(t!==null&&(f=t(f)),f!==null&&(n===null||n(f))))return T.s(r),f}return T.s(r),null}findObjectsAt(e,t,n,i){if(t===void 0&&(t=null),n===void 0&&(n=null),!(i instanceof M)&&!(i instanceof L)&&(i=new L),this.Yl===!1)return i;let r=!1;this.diagram!==null&&this.diagram.viewportBounds.containsPoint(e)&&(r=!0);const a=T.l(),l=this.At.r,u=l.length;for(let c=u;c--;){const f=l[c];if(r===!0&&f.Ml()===!1||!f.isVisible())continue;a.a(e),a.Ie(f.Es);let m=f;f.iL(a,t,n,i)&&(t!==null&&(m=t(m)),m!==null&&(n===null||n(m))&&i.add(m))}return T.s(a),i}findObjectsIn(e,t,n,i,r){if(t===void 0&&(t=null),n===void 0&&(n=null),i===void 0&&(i=!1),!(r instanceof M)&&!(r instanceof L)&&(r=new L),this.Yl===!1)return r;let a=!1;this.diagram!==null&&this.diagram.viewportBounds.containsRect(e)&&(a=!0);const l=this.At.r,u=l.length;for(let c=u;c--;){const f=l[c];if(a===!0&&f.Ml()===!1||!f.isVisible())continue;let m=f;f.Im(e,t,n,i,r)&&(t!==null&&(m=t(m)),m!==null&&(n===null||n(m))&&r.add(m))}return r}NP(e,t,n,i,r,a,l){if(this.Yl===!1)return r;const u=this.At.r,c=u.length;for(let f=c;f--;){const m=u[f];if(l===!0&&m.Ml()===!1||!a(m)||!m.isVisible())continue;let p=m;m.Im(e,t,n,i,r)&&(t!==null&&(p=t(p)),p!==null&&(n===null||n(p))&&r.add(p))}return r}findObjectsNear(e,t,n,i,r,a){if(n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof M||r instanceof L)&&(a=r),r=!0),!(a instanceof M)&&!(a instanceof L)&&(a=new L),this.Yl===!1)return a;let l=!1;this.diagram!==null&&this.diagram.viewportBounds.containsPoint(e)&&(l=!0);const u=T.l(),c=T.l(),f=this.At.r,m=f.length;for(let p=m;p--;){const y=f[p];if(l===!0&&y.Ml()===!1||!y.isVisible())continue;u.a(e),u.Ie(y.Es),c.e(e.x+t,e.y),c.Ie(y.Es);let w=y;y.eL(u,c,n,i,r,a)&&(n!==null&&(w=n(w)),w!==null&&(i===null||i(w))&&a.add(w))}return T.s(u),T.s(c),a}ES(){return this.At.r}Bs(e,t){if(!this.visible)return;const n=this.At.r,i=n.length;if(i===0)return;const r=o.nt(),a=o.nt();for(let l=0;l<i;l++){const u=n[l];if(u.BS=l,u instanceof Gt){if(u.Me===!1)continue}else if(u instanceof ie&&u.adornedPart!==null)continue;const c=u.actualBounds;u.isVisible()&&c.intersectsRectPlus(t,10)?(u.Bs(!0),r.push(u)):(u.Bs(!1),u.adornments!==null&&u.adornments.count>0&&a.push(u))}for(let l=0;l<r.length;l++){const u=r[l];u.US();const c=u.adornments;for(;c.next();){const f=c.value;f.ut(1/0,1/0),f.zt(),f.Bs(!0)}}for(let l=0;l<a.length;l++)a[l].US();o.tt(r),o.tt(a)}Du(e){let t=1;return this.Wt!==1&&(t=e.globalAlpha,e.globalAlpha=t*this.Wt),t}sL(e,t){for(let n=0;n<t;n++)e[n].Fu()}Bi(e,t,n){if(!this.visible||this.Wt===0||(n===void 0&&(n=!0),!n&&this.isTemporary))return;const i=this.At.r,r=i.length;if(r===0)return;e.Mr&&this.sL(i,r);const a=this.Du(e),l=this.Tu;l.length=0;const u=t.scale,c=I.l();for(let f=0;f<r;f++){const m=i[f];this.Em(e,m,t,l,u,c,!0)}I.s(c),e.Mr&&this.sL(i,r),e.globalAlpha=a}lE(e,t,n){if(!this.visible||this.Wt===0)return;const i=this.At.r,r=i.length;if(r===0)return;const a=this.Du(e),l=this.Tu;l.length=0;const u=t.scale,c=I.l();for(let f=0;f<r;f++){const m=i[f];n.has(m)||this.Em(e,m,t,l,u,c,!0)}I.s(c),e.globalAlpha=a}bF(e,t,n,i){if(!this.visible||this.Wt===0||!i&&this.isTemporary)return;const r=this.At.r,a=r.length;if(a===0)return;const l=this.Du(e),u=this.Tu;u.length=0;const c=t.scale,f=I.l();for(let m=0;m<a;m++){const p=r[m];n.has(p)&&this.Em(e,p,t,u,c,f,!1)}I.s(f),e.globalAlpha=l}kF(e,t,n,i,r){if(!this.visible||this.opacity===0)return;const a=this.diagram.grid.part;if(!i&&this.isTemporary){if(r&&a.layer===this){const l=this.Du(e);a.Bi(e,n),e.globalAlpha=l}}else{const l=this.Du(e),u=n.scale,c=I.l(),f=this.At.r,m=f.length;for(let p=0;p<m;p++){const y=f[p];!r&&y===a||this.Em(e,y,n,null,u,c,!1)}I.s(c),e.globalAlpha=l}}hE(e,t,n){if(!this.visible||this.Wt===0)return;const i=this.Du(e),r=this.Tu;r.length=0;const a=t.scale,l=I.l(),u=this.At.r,c=u.length,f=n.length;for(let m=0;m<c;m++){const p=u[m],y=p.Hh(p.actualBounds);this.PF(y,n,f,a)&&this.Em(e,p,t,r,a,l,!0)}I.s(l),e.globalAlpha=i}Em(e,t,n,i,r,a,l){if(l&&!t.Ml()){e.removePartFromView(t);return}if(i!==null&&t instanceof Gt&&(t.isOrthogonal&&i.push(t),t.Me===!1)){e.removePartFromView(t);return}let u=!1,c=t.containingGroup;for(;c!==null;)u?c.ni!==null&&a.intersectRect(c.ni):c.ni!==null&&(u=!0,a.a(c.ni)),c=c.containingGroup;const f=t.actualBounds;let m=!1;if(u&&t.isVisible()){if(!a.intersectsRect(f)){e.removePartFromView(t);return}m=!a.containsRect(f)}m&&(e.save(),e instanceof Pe?e.partClipRect=a.copy():(e.beginPath(),e.rect(a.x,a.y,a.width,a.height),e.clip())),f.width*r>n.Bm||f.height*r>n.Bm?t.Bi(e,n):this.SF(e,t,n),m&&(e.restore(),e.clearContextCache(!0))}SF(e,t,n){if(e instanceof Pe){t.Bi(e,n);return}const i=t.actualBounds,r=t.naturalBounds;if(i.width===0||i.height===0||isNaN(i.x)||isNaN(i.y)||!t.isVisible())return;const a=t.D;if(t.background===null){t.dn(e,"rgba(0,0,0,0.3)",!0,!1,r,i),e.fillRect(i.x,i.y,i.width,i.height);return}if(e.transform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),t.dn(e,t.background,!0,!1,r,i),e.fillRect(0,0,r.width/2,r.height/2),!a.Ok()){const l=1/(a.m11*a.m22-a.m12*a.m21);e.transform(a.m22*l,-a.m12*l,-a.m21*l,a.m11*l,l*(a.m21*a.dy-a.m22*a.dx),l*(a.m12*a.dx-a.m11*a.dy))}}PF(e,t,n,i){const r=2/i,a=4/i;for(let l=0;l<n;l++){const u=t[l];if(!(u.width===0||u.height===0)&&e.intersects(u.x-r,u.y-r,u.width+a,u.height+a))return!0}return!1}t(e,t,n,i,r){const a=this.diagram;a!==null&&a.raiseChangedEvent(2,e,this,t,n,i,r)}qh(e,t,n){const i=this.At;if(t.IS(this),e>=i.count)e=i.count;else if(i.elt(e)===t)return-1;i.insertAt(e,t),t.Um(n);const r=this.diagram;return r!==null&&(n?r.C():r.qh(t)),this.yx(e,t),e}te(e,t,n){if(!n&&t.layer!==this&&t.layer!==null)return t.layer.te(e,t,n);const i=this.At;if(e<0||e>=i.length){if(e=i.indexOf(t),e<0)return-1}else if(i.elt(e)!==t&&(e=i.indexOf(t),e<0))return-1;t.Vm(n),i.removeAt(e);const r=this.diagram;return r!==null&&(n?r.C():r.te(t)),t.IS(null),e}yx(e,t){e=this.MF(e,t),t instanceof Vt&&this.NF(e,t),t.svg!==null&&t.svg.remove()}MF(e,t){const n=t.zOrder;if(isNaN(n))return e;const i=this.At,r=i.count;if(r<=1)return e;if(e<0&&(e=i.indexOf(t)),e<0)return-1;let a=e-1,l=NaN;for(;a>=0&&(l=i.elt(a).zOrder,!!isNaN(l));)a--;let u=e+1,c=NaN;for(;u<r&&(c=i.elt(u).zOrder,!!isNaN(c));)u++;if(!isNaN(l)&&l>n)for(;;){if(a===-1||l<=n)return a++,a===e?e:(i.removeAt(e),i.insertAt(a,t),a);for(l=NaN;--a>=0&&(l=i.elt(a).zOrder,!!isNaN(l)););}else if(!isNaN(c)&&c<n)for(;;){if(u===r||c>=n)return u--,u===e?e:(i.removeAt(e),i.insertAt(u,t),u);for(c=NaN;++u<r&&(c=i.elt(u).zOrder,!!isNaN(c)););}return e}NF(e,t){if(t===null||!isNaN(t.zOrder))return;this.CF(e,t);const n=t.containingGroup;n!==null&&this.yx(-1,n)}CF(e,t){if(t.memberParts.count===0)return;let n=-1;const i=this.At.r,r=i.length;for(let a=0;a<r;a++){const l=i[a];if(l===t&&(e=a,n>=0)||n<0&&l.containingGroup===t&&(n=a,e>=0))break}if(!(n<0)&&n<e){const a=this.At;a.removeAt(e),a.insertAt(n,t)}}get parts(){return this.At.iterator}get partsBackwards(){return this.At.iteratorBackwards}get diagram(){return this.p}get name(){return this.Mt}set name(e){const t=this.Mt;if(t!==e){const n=this.diagram;if(n!==null){t===""&&o.o("Cannot rename default Layer to: "+e);const r=n.layers;for(;r.next();)r.value.name===e&&o.o("Layer.name is already present in this diagram: "+e)}this.Mt=e,this.t("name",t,e);const i=this.At.iterator;for(;i.next();){const r=i.value;r.layerName=this.Mt}}}get opacity(){return this.Wt}set opacity(e){const t=this.Wt;if(t!==e){(e<0||e>1)&&o._(e,"0 <= value <= 1",we,"opacity"),this.Wt=e;const n=this.diagram;n!==null&&n.C(),this.t("opacity",t,e)}}get isViewportAligned(){return this.Om}set isViewportAligned(e){const t=this.Om;t!==e&&(this.Om=e,this.diagram&&(this.nL(),this.diagram.C()),this.t("isViewportAligned",t,e),e&&(this.isInDocumentBounds=!1))}nL(){if(!this.Om)return;const e=this.diagram,t=this.At.r,n=t.length,i=e.kt,r=e.Pt;for(let a=0;a<n;a++){const l=t[a],u=l.naturalBounds.width,c=l.naturalBounds.height;let f=l.alignment;(f.isDefault()||!f.isSpot())&&(f=z.BottomRight);let m=l.alignmentFocus;m.isDefault()&&(m=new z(f.x,f.y));const p=f.x*i+f.offsetX-(m.x*u+m.offsetX),y=f.y*r+f.offsetY-(m.y*c+m.offsetY),w=T.X(p,y);e.LF(w),l.bc(w.x,w.y,!0),T.s(w),l.et=1/e.scale}}get isTemporary(){return this.Mr}set isTemporary(e){const t=this.Mr;t!==e&&(this.Mr=e,this.t("isTemporary",t,e))}get visible(){return this.kc}set visible(e){const t=this.kc;if(t!==e){this.kc=e;const n=this.At.iterator;for(;n.next();)n.value.Ei(e);const i=this.diagram;i!==null&&i.C(),this.t("visible",t,e)}}get pickable(){return this.Yl}set pickable(e){const t=this.Yl;t!==e&&(this.Yl=e,this.t("pickable",t,e))}get isInDocumentBounds(){return this.px}set isInDocumentBounds(e){const t=this.px;t!==e&&(this.px=e,this.diagram!==null&&this.diagram.invalidateDocumentBounds(),this.t("isInDocumentBounds",t,e))}get allowCopy(){return this.Fl}set allowCopy(e){const t=this.Fl;t!==e&&(this.Fl=e,this.t("allowCopy",t,e))}get allowDelete(){return this.Rl}set allowDelete(e){const t=this.Rl;t!==e&&(this.Rl=e,this.t("allowDelete",t,e))}get allowTextEdit(){return this.vl}set allowTextEdit(e){const t=this.vl;t!==e&&(this.vl=e,this.t("allowTextEdit",t,e))}get allowGroup(){return this.Ol}set allowGroup(e){const t=this.Ol;t!==e&&(this.Ol=e,this.t("allowGroup",t,e))}get allowUngroup(){return this.Il}set allowUngroup(e){const t=this.Il;t!==e&&(this.Il=e,this.t("allowUngroup",t,e))}get allowLink(){return this.El}set allowLink(e){const t=this.El;t!==e&&(this.El=e,this.t("allowLink",t,e))}get allowRelink(){return this.Bl}set allowRelink(e){const t=this.Bl;t!==e&&(this.Bl=e,this.t("allowRelink",t,e))}get allowMove(){return this.Ul}set allowMove(e){const t=this.Ul;t!==e&&(this.Ul=e,this.t("allowMove",t,e))}get allowReshape(){return this.Vl}set allowReshape(e){const t=this.Vl;t!==e&&(this.Vl=e,this.t("allowReshape",t,e))}get allowResize(){return this.zl}set allowResize(e){const t=this.zl;t!==e&&(this.zl=e,this.t("allowResize",t,e))}get allowRotate(){return this.Xl}set allowRotate(e){const t=this.Xl;t!==e&&(this.Xl=e,this.t("allowRotate",t,e))}get allowSelect(){return this.Kl}set allowSelect(e){const t=this.Kl;t!==e&&(this.Kl=e,this.t("allowSelect",t,e))}}var Gn=(A=>(A[A.None=1]="None",A[A.Uniform=2]="Uniform",A[A.UniformToFill=3]="UniformToFill",A))(Gn||{}),Us=(A=>(A[A.All=1]="All",A[A.NotDirected=2]="NotDirected",A[A.NotDirectedFast=3]="NotDirectedFast",A[A.NotUndirected=4]="NotUndirected",A[A.DestinationTree=5]="DestinationTree",A[A.SourceTree=6]="SourceTree",A))(Us||{}),Do=(A=>(A[A.Document=1]="Document",A[A.Infinite=2]="Infinite",A))(Do||{}),no=(A=>(A[A.TreeParent=1]="TreeParent",A[A.AllParents=2]="AllParents",A[A.AnyParents=3]="AnyParents",A))(no||{});const yt=class yt{constructor(e,t){v(this,"ds");v(this,"di");v(this,"VS");v(this,"wx");v(this,"Nr");v(this,"Ru");v(this,"xx");v(this,"bx");v(this,"kx");v(this,"Px");v(this,"Sx");v(this,"Mx");v(this,"Fc");v(this,"jh");v(this,"Nx");v(this,"Cx");v(this,"Lx");v(this,"Gl");v(this,"Rc");v(this,"Cr");v(this,"zm");v(this,"Ax");v(this,"Tx");v(this,"vu");v(this,"Hn");v(this,"Lr");v(this,"Wh");v(this,"Fo");v(this,"Xm");v(this,"vc");v(this,"Km");v(this,"Oc");v(this,"Ou");v(this,"Ar");v(this,"qn");v(this,"zS");v(this,"XS");v(this,"Dx");v(this,"Fx");v(this,"KS");v(this,"Rx");v(this,"YS");v(this,"GS");v(this,"jS");v(this,"vx");v(this,"Ym");v(this,"Tr");v(this,"Dr");v(this,"Fr");v(this,"Rr");v(this,"vr");v(this,"Or");v(this,"Ox");v(this,"Ir");v(this,"Ix");v(this,"Er");v(this,"Br");v(this,"Ur");v(this,"Vr");v(this,"Ex");v(this,"HS");v(this,"Ro");v(this,"qS");v(this,"Bx");v(this,"Ux");v(this,"WS");v(this,"Si");v(this,"JS");v(this,"$S");v(this,"ZS");v(this,"vs");v(this,"vo");v(this,"Oi");v(this,"Vx");v(this,"Fl");v(this,"Rl");v(this,"zx");v(this,"Xx");v(this,"vl");v(this,"Ol");v(this,"Il");v(this,"Kx");v(this,"El");v(this,"Bl");v(this,"Ul");v(this,"Vl");v(this,"zl");v(this,"Xl");v(this,"Kl");v(this,"Yx");v(this,"Gx");v(this,"QS");v(this,"Iu");v(this,"Eu");v(this,"jx");v(this,"Hx");v(this,"qx");v(this,"Wx");v(this,"Gm");v(this,"Jx");v(this,"$x");v(this,"Zx");v(this,"$t");v(this,"_S");v(this,"Qx");v(this,"tM");v(this,"Bu");v(this,"gn");v(this,"Wn");v(this,"ie");v(this,"Jn");v(this,"oL");v(this,"jl");v(this,"iM");v(this,"eM");v(this,"jm");v(this,"_x");v(this,"Uu");v(this,"Hm");v(this,"tb");v(this,"zr");v(this,"Hl");v(this,"Jh");v(this,"sM");v(this,"nM");v(this,"qm");v(this,"ib");v(this,"eb");v(this,"ts");v(this,"Vu");v(this,"Wm");v(this,"zu");v(this,"ql");v(this,"Ic");v(this,"Jm");v(this,"Xr");v(this,"$h");v(this,"oM");v(this,"$m");v(this,"Ht");v(this,"D");v(this,"Ue");v(this,"Pr");v(this,"Ui");v(this,"ps");v(this,"rM");v(this,"Wl");v(this,"Kr");v(this,"xl");v(this,"Yr");v(this,"Zh");v(this,"Ec");v(this,"lM");v(this,"Xu");v(this,"Qh");v(this,"Ku");v(this,"Gt");v(this,"Jl");v(this,"at");v(this,"et");v(this,"Yu");v(this,"kt");v(this,"Pt");v(this,"dt");v(this,"Bc");v(this,"Bw");v(this,"sb");v(this,"_h");v(this,"Uc");v(this,"nb");v(this,"ob");v(this,"rb");v(this,"AF");v(this,"TF");v(this,"Vi");v(this,"kl");v(this,"Bm");v(this,"Zm");v(this,"hM");v(this,"aM");v(this,"rL");v(this,"Qm");v(this,"DF");v(this,"FF");v(this,"RF");v(this,"lb");v(this,"vF");v(this,"OF");v(this,"IF");v(this,"ta");v(this,"lL");v(this,"$l");v(this,"ia");v(this,"ea");v(this,"sa");v(this,"na");v(this,"wu");v(this,"Yh");v(this,"Zt");v(this,"Tt");v(this,"Vc");v(this,"Wk");v(this,"Jk");v(this,"fc");v(this,"Wt");v(this,"yu");v(this,"ab");v(this,"cb");v(this,"fb");v(this,"ub");v(this,"db");v(this,"_m");v(this,"uM");v(this,"t0");v(this,"i0");v(this,"e0");v(this,"ex");v(this,"dM");v(this,"gb");v(this,"zc");if(yt.uw||(yt.Ik(),yt.uw=!0),L.Gi(this),yt.aL(this),this.Ht=!0,this.Tt=null,this.kt=0,this.Pt=0,this.dt=null,yt.isUsingDOM()){const i=this,r=()=>{i.Mi(s.document,"DOMContentLoaded",r,!1),i.setRTL()};s.document.body!==null?this.setRTL():i.Vt(s.document,"DOMContentLoaded",r,!1)}this.Bc=null,yt.gM("Model",io);const n=this;return this.JS=i=>n.partManager.doModelDataChanged(i),this.$S=i=>n.partManager.doModelChanged(i),this.nb=null,this.ob=null,this.cL(),this.model=Wt.initDiagramModel(),this.gb=null,this.themeManager=new Ua,this.Ro=!0,this.fL(),this.layout=new Yn,this.Ro=!1,this.DF=null,this.FF=null,this.RF=null,this.lb=null,this.vF=null,this.OF=null,this.IF=null,this.ta=null,this.lL=null,this.$l=null,this.ia=null,this.ea=null,this.sa=null,this.na=null,this.wu=()=>{},this.Yh=null,this.zu=!1,this.Vc=new Oo(this),e!==void 0&&(typeof e=="string"||s.Element&&e instanceof Element?this.mM(e):t=e),t&&this.setProperties(t),this.Ht=!1,this.requestUpdate(),this}HD(){return this.dt!==null}get renderer(){return this.Ic}set renderer(e){if(this instanceof ln)return;e===""&&(e="default");const t=e.toLowerCase(),n=this.Ic;if(t===n)return;this.Ic=t;let i=null;t==="default"||t==="canvas"?(i=this.ql.get("svg"),i!==null&&i.Ft.remove(),this.dt&&(this.Zt=this.dt.ai),this.Zt.clearContextCache(!0)):t==="svg"?(this.ql.has("svg")?i=this.ql.get("svg"):(i=new ze(this,s.document),this.addRenderer("svg",i)),this.div!==null&&this.div.appendChild(i.Ft),this.Zt=i.ai,this.dt&&(this.dt.ai.setTransform(this.Vi,0,0,this.Vi,0,0),this.dt.ai.clearRect(0,0,this.kt,this.Pt))):t==="debug"&&(this.ql.has("SVG")||(i=new ze(this,s.document),this.addRenderer("SVG",i),i.Ft.style.backgroundColor="whitesmoke",this.div!==null&&this.div.after(i.Ft))),this.Ht||this.redraw()}cL(){this.zc=new M,this.setupRouters(),this.ds=new ns,this.ds.To(this),this.di=17,this.VS=!1,this.Yu=!1,this.wx="default",this.Gt=new M,this.ql=new W,this.Ic="default",this.resetRenderingHints(),this.EF(),this.Wt=1,this.at=new T(NaN,NaN).g(),this.ex=new T(NaN,NaN),this.et=1,this.$m=1,this.xx=new T(NaN,NaN).g(),this.bx=NaN,this.kx=1e-4,this.Px=100,this.D=new nt,this.Sx=new T(NaN,NaN).g(),this.Mx=new I(NaN,NaN,NaN,NaN).g(),this.Fc=new tt(0,0,0,0).g(),this.jh=1,this.Nx=!1,this.Cx=null,this.Lx=null,this.Gl=1,this.Rc=z.Default,this.Cr=1,this.zm=z.Default,this.Ax=z.None,this.Tx=z.None,this.Ue=!0,this.vu=!1,this.Hn=new Set,this.Lr=new L,this.Wh=new L,this.Fo=!1,this.Jl=new W,this.Xu=!0,this.Xm=250,this.vc=-1,this.Km=new tt(16,16,16,16).g(),this.Pr=!1,this.Oc=!1,this.Ou=!0,this.Jm=new Et,this.Jm.diagram=this,this.Xr=new Et,this.Xr.diagram=this,this.$h=new Et,this.$h.diagram=this,this.Ar=null,this.qn=null,this.Bw=!1,this.BF(),this.Yr=new L,this.Dx=!0,this.Fx=1,this.KS=!1,this.Rx=1,this.vx="auto",this.Ym="auto",this.Tr=null,this.Dr=null,this.Fr=null,this.Rr=null,this.vr=null,this.Or=null,this.Ox=null,this.Ir=null,this.Ix=!1,this.Er=null,this.Br=null,this.Ur=null,this.Vr=null,this.Ex=!1,this.sb={},this._h=[null,null],this.Ro=!1,this.qS=!1,this.Bx=!1,this.Ux=!1,this.WS=!0,this.ps=!1,this.Qh=!1,this.ZS=!0,this.vs=-2,this.Wl=new W,this.Ku=new M,this.vo=!1,this.Oi=!0,this.Vx=!0,this.Fl=!0,this.Rl=!0,this.zx=!1,this.Xx=!0,this.vl=!0,this.Ol=!0,this.Il=!0,this.Kx=!0,this.El=!0,this.Bl=!0,this.Ul=!0,this.Vl=!0,this.zl=!0,this.Xl=!0,this.Kl=!0,this.Yx=!0,this.Gx=!0,this.QS=!1,this.Uc=!1,this.Iu=!0,this.Eu=!0,this.jx=!0,this.Hx=!0,this.qx=16,this.Wx=16,this.Gm=!1,this.Jx=!1,this.$x=0,this.Zx=0,this.$t=new tt(5).g(),this._S=new L().g(),this.Qx=999999999,this.tM=new L().g(),this.Zh=!0,this.Bu=!0,this.Ec=!0,this.gn=!1,this.Wn=!1,this.Kr=!0,this.xl=!1,this.Jn=!1,this.oL=new L,this.lM=new L,this.jl=null,this.iM=new B(8,8),this.eM=999,this.jm=!1,this.Wk=1,this.Jk=0,this.Ui={scale:1,position:new T,bounds:new I,canvasSize:new B,newCanvasSize:new B,isScroll:!1},this.Ui.canvasSize=this.Ui.canvasSize,this.Ui.newCanvasSize=this.Ui.newCanvasSize,this.Ui.isScroll=!1,this._x=new I(NaN,NaN,NaN,NaN).g(),this.Uu=new B(NaN,NaN).g(),this.Hm=new I(NaN,NaN,NaN,NaN).g(),this.tb=!1,this.UF(),this.ts=null,this.Vu=!1,this.fc=null,this.partManager=new io,this.toolManager=new Ht,this.toolManager.initializeStandardTools(),this.defaultTool=this.toolManager,this.currentTool=this.defaultTool,this.cb=null,this.fb=new wr,this.ub=null,this.db=null,this.ab=!1,this.yu=!1,this.commandHandler=new _e,this.i0=null,this.e0=T.Ak,this.dM=!1,this.Vi=1,this.kl=null,this.Bm=1,this._m=0,this.uM=[0,0,0,0,0],this.t0=0,this.Zm=1,this.hM=0,this.aM=new T,this.rL=500,this.Wm=new T,this.Qm=!1}static isUsingDOM(){return yt.uL}static useDOM(e){yt.uL=e?s.document!==void 0:!1}clear(){this.animationManager.stopAnimation(),this.model.clear(),yt.dL(),this.gL(!1),this.Ku.clear(),this.mL(),this.jl=null,this.invalidateDocumentBounds(),this.ensureBounds(),this.C()}gL(e){this.animationManager.stopAnimation(!0),this._S=new L().g(),this.tM=new L().g();const t=this.skipsUndoManager,n=this.Si!==null&&this.Si!==void 0;n&&(this.skipsUndoManager=!0);let i=null;this.ts!==null&&(i=this.ts.part,i!==null&&this.remove(i));const r=[],a=this.Gt.length;if(e){for(let l=0;l<a;l++){const u=this.Gt.r[l].parts;for(;u.next();){const c=u.value;c!==i&&c.data===null&&r.push(c)}}for(let l=0;l<r.length;l++){const u=r[l];this.remove(u)}}for(let l=0;l<a;l++)this.Gt.r[l].xF();return this.partManager.clear(),this.Hn.clear(),this.Lr.clear(),this.Wh.clear(),this.Jl.clear(),this.Yr.clear(),this.fc=null,this.Ku.clear(),this.mL(),o.Ck=[],i!==null&&(this.add(i),this.partManager.parts.delete(i)),n&&(this.skipsUndoManager=t),r}static dL(){yt.s0=null,yt.mb=""}static aE(){return null}reset(){this.clear(),this.Ht=!0,this.cL(),this.themeManager=new Ua,this.Zl(),this.Ro=!0,this.fL(),this.layout=new Yn,this.Ro=!1,this.model=Wt.initDiagramModel(),this.model.undoManager=new gt,this.zu=!1,this.Ht=!1,this.C()}UF(){this.zr=new W,this.sM=new It().add(new Je({stroke:"black",font:"10pt sans-serif"}).bind("text","",o.toString).theme("stroke","text").theme("font","normal")),this.zr.set("",this.sM),this.zr.set("Comment",new It().add(new Je({stroke:"brown",font:"10pt sans-serif"}).bind("text","",o.toString).theme("stroke","comment").theme("font","normal"))),this.zr.set("LinkLabel",new It({selectable:!1,avoidable:!1}).add(new Qt("Ellipse",{fill:"black",stroke:null,desiredSize:new B(3,3).it()}).theme("fill","link"))),this.Jh=new W,this.rM=new Vt(Kt.Vertical,{selectionObjectName:"GROUPPANEL"}).add(new Je({stroke:"black",font:"bold 12pt sans-serif"}).bind("text","",o.toString).theme("stroke","text").theme("font","bold"),new Kt(Kt.Auto,{name:"GROUPPPANEL"}).add(new Qt({fill:"rgba(128,128,128,0.2)",stroke:"black",strokeWidth:1}).theme("fill","group").theme("stroke","outline").theme("strokeWidth","group"),new $i({padding:5}).theme("padding","group"))),this.Jh.set("",this.rM),this.Hl=new W,this.nM=new Gt().add(new Qt({isPanelMain:!0,stroke:"black"}).theme("stroke","link"),new Qt({toArrow:"Standard",fill:"black",stroke:null,strokeWidth:0}).theme("toArrow").theme("fill","link")),this.Hl.set("",this.nM),this.Hl.set("Comment",new Gt().add(new Qt({isPanelMain:!0,stroke:"brown"}).theme("stroke","comment"))),this.qm=new ie(Kt.Auto).add(new Qt({fill:null,stroke:"dodgerblue",strokeWidth:3}).theme("stroke","selection").theme("strokeWidth","selection"),new $i({margin:1.5}).theme("margin","selection","numbers",null,e=>e?new tt(e/2):1.5)),this.ib=this.qm,this.eb=new ie(Kt.Link).add(new Qt({isPanelMain:!0,fill:null,stroke:"dodgerblue",strokeWidth:3}).theme("stroke","selection").theme("strokeWidth","selection"))}setRTL(e){let t=e===void 0?this.div:e;t===null&&(t=s.document.body);const n=o.en("div");n.dir="rtl",n.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",n.textContent="A",t.appendChild(n);let i="reverse";n.scrollLeft>0?i="default":(n.scrollLeft=1,n.scrollLeft===0&&(i="negative")),t.removeChild(n),this.wx=i}setScrollWidth(e){let t=e===void 0?this.div:e;t===null&&(t=s.document.body);let n=0;if(yt.isUsingDOM()){let i=yt.fM,r=yt.cM;i===null&&(yt.fM=o.en("p"),i=yt.fM,i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",yt.cM=o.en("div"),r=yt.cM,r.style.position="absolute",r.style.visibility="hidden",r.style.width="200px",r.style.height="150px",r.style.boxSizing="content-box",r.appendChild(i)),r.style.overflow="hidden",t.appendChild(r);const a=i.offsetWidth;r.style.overflow="scroll";let l=i.offsetWidth;a===l&&(l=r.clientWidth),t.removeChild(r),n=a-l,n===0&&!o.rr&&(n=11)}this.di=n,this.VS=!0}ri(e){e in Gn?this.autoScale=e:o.lr(this,e)}toString(e){e===void 0&&(e=0);let t="";this.div&&this.div.id&&(t=this.div.id);let n='Diagram "'+t+'"';if(e<=0)return n;const i=this.Gt.iterator;for(;i.next();){const r=i.value;n+=`
  `+r.toString(e-1)}return n}static aL(e){yt.hb=e}static ym(){return yt.hb}static fromDiv(e){let t=e;if(typeof e=="string"&&(t=s.document.getElementById(e)),t instanceof HTMLDivElement){const n=yt.Ve.get(t);if(n)return n}return null}get div(){return this.Tt}set div(e){if(this.Tt!==e){const t=this.Tt;if(t!==null){if(yt.Ve.delete(t),t.goDiagram=void 0,t.go=void 0,t.innerHTML="",this.dt!==null){const i=this.dt.Ft;this.Mi(i,"pointermove",this.ia,!1),this.Mi(i,"pointerdown",this.$l,!1),this.Mi(i,"pointerup",this.ea,!1),this.Mi(i,"pointerout",this.sa,!1),this.Mi(i,"pointercancel",this.na,!1),this.dt.dispose()}this.Bc&&(this.Bc.disconnect(),this.Bc=null);const n=this.toolManager;n!==null&&(n.mouseDownTools.each(i=>i.cancelWaitAfter()),n.mouseMoveTools.each(i=>i.cancelWaitAfter()),n.mouseUpTools.each(i=>i.cancelWaitAfter())),n.cancelWaitAfter(),this.currentTool.doCancel(),this.dt=null,this.Mi(s,"resize",this.lb,!1),this.Mi(s,"wheel",this.ta,!0),yt.ym()===this&&yt.aL(null)}else this.$l===null&&(this.Jn=!1);if(this.Tt=null,e!==null){const n=yt.Ve.get(e);n&&(n.div=null),this.mM(e),this.wu(),this.themeManager&&this.themeManager.VF()}else this.themeManager&&this.themeManager.zF()}}setupRouters(){this.zc.push(new vC)}mM(e){const t=this;if(!yt.isUsingDOM())return;e==null&&o.o("Diagram setup requires an argument DIV."),t.Tt!==null&&o.o("Diagram has already completed setup."),typeof e=="string"?t.Tt=s.document.getElementById(e):e instanceof HTMLDivElement?t.Tt=e:o.o("No DIV or DIV id supplied: "+e),t.Tt===null&&o.o("Invalid DIV id; could not get element with id: "+e);const n=yt.Ve.get(t.Tt);if(n&&n!==this&&o.o("Invalid div id; div already has a Diagram associated with it."),!t.Bc&&s.ResizeObserver){const m=s.ResizeObserver,p=o.Nk(()=>t.requestUpdate(),250,!1);t.Bc=new m(()=>p()),t.Bc.observe(t.Tt)}s.getComputedStyle(t.Tt,null).position==="static"&&(t.Tt.style.position="relative");let i=5;const r="rgba(2"+i+"5, 255, 255, 0)";i--,t.Tt.style["-webkit-tap-highlight-color"]=r,t.Tt.innerHTML="",yt.Ve.set(t.Tt,t),t.Tt.goDiagram=t,t.Tt.go=s.go;const a=new wn(t);a.style!==void 0&&(a.style.position="absolute",a.style.top="0px",a.style.left="0px",s.getComputedStyle(t.Tt,null).getPropertyValue("direction")==="rtl"&&(t.Yu=!0),a.style.zIndex="2",a.style.userSelect="none",a.style.MozUserSelect="none",a.style.touchAction="none",a.style.letterSpacing="normal !important",a.style.wordSpacing="normal !important",a.style.lang="unknown"),t.dt=a,t.Zt=a.ai;const l=t.Zt;t.Vi=t.computePixelRatio(),t.viewSize.isReal()||(t.kt=t.Tt.clientWidth||1,t.Pt=t.Tt.clientHeight||1),t.pL(t.kt,t.Pt);const u=t;t.Tt.insertBefore(a.Ft,t.Tt.firstChild);const c=new wn(null);if(c.width=1,c.height=1,t.AF=c,t.TF=c.ai,yt.isUsingDOM()){const m=o.en("div"),p=o.en("div");m.style.position="absolute",m.style.overflow="auto",m.style.width=t.kt+"px",m.style.height=t.Pt+"px",m.style.zIndex="1",p.style.position="absolute",p.style.width="1px",p.style.height="1px",t.Tt.appendChild(m),m.appendChild(p),m.onscroll=yt.XF,m.addEventListener("pointerdown",yt.KF),m.p=t,m.YF=!0,m.GF=!0,t.nb=m,t.ob=p}t.wu=o.Nk(()=>{t.kl=null,t.C()},300,!1),t.lb=o.Nk(()=>{t.MS()},250,!1),t.Yh=m=>(m.preventDefault(),!1),t.ta=m=>{if(!u.isEnabled)return;const p=u.Xc(m,!0);p.bubbles=!0;let y=0,w=0;p.delta=0,m.deltaX!==void 0?(m.deltaX!==0&&(y=m.deltaX>0?1:-1),m.deltaY!==0&&(w=m.deltaY>0?1:-1),p.delta=Math.abs(m.deltaX)>Math.abs(m.deltaY)?-y:-w):m.wheelDeltaX!==void 0?(m.wheelDeltaX!==0&&(y=m.wheelDeltaX>0?-1:1),m.wheelDeltaY!==0&&(w=m.wheelDeltaY>0?-1:1),p.delta=Math.abs(m.wheelDeltaX)>Math.abs(m.wheelDeltaY)?-y:-w):m.wheelDelta!==void 0&&m.wheelDelta!==0&&(p.delta=m.wheelDelta>0?1:-1),u.doMouseWheel(),u.oa(p,m)},t.lL=m=>{if(!u.isEnabled)return;t.Uc=!1,u.Xc(m,!0);const p=u.currentTool;p.cancelWaitAfter(),p.standardMouseOver()},t.$l=m=>{if(!u.isEnabled)return;t.Uc=!0;const p=u.sb;p[m.pointerId]===void 0&&(p[m.pointerId]=m);const y=u._h;let w=!1;if(y[0]!==null&&(y[0].pointerId===m.pointerId||y[0].pointerType!==m.pointerType))y[0]=m;else if(y[1]!==null&&y[1].pointerId===m.pointerId)y[1]=m,w=!0;else if(y[0]===null)y[0]=m;else if(y[1]===null)y[1]=m,w=!0;else{m.preventDefault();return}const b=m.pointerType==="touch"||m.pointerType==="pen";b&&(u.Bw=!1,u.Qm=!0);const C=u.jF(m,m,w),k=u.aM,N=b?25:10;if(m.timeStamp-u.hM<u.rL&&!(Math.abs(k.x-m.screenX)>N||Math.abs(k.y-m.screenY)>N)?u.Zm++:u.Zm=1,C.clickCount=u.Zm,u.hM=m.timeStamp,u.aM.setTo(m.screenX,m.screenY),u.doMouseDown(),m.button===1){m.preventDefault();return}u.oa(C,m)},t.ia=m=>{if(!u.isEnabled)return;t.Uc=!0;const p=u._h;if(p[0]!==null&&(p[0].pointerId===m.pointerId||p[0].pointerType!==m.pointerType))p[0]=m;else if(p[1]!==null&&p[1].pointerId===m.pointerId){p[1]=m;return}else if(p[0]===null)p[0]=m;else return;if(p[0].pointerId!==m.pointerId)return;const y=u.HF(m,m,p[1]!==null);u.doMouseMove(),u.oa(y,m)},t.ea=m=>{if(!u.isEnabled)return;t.Uc=!0;const p=m.pointerType==="touch"||m.pointerType==="pen",y=u.sb;if(p&&u.Bw){delete y[m.pointerId],m.preventDefault();return}const w=u._h;if(w[0]!==null&&(w[0].pointerId===m.pointerId||w[0].pointerType!==m.pointerType))w[0]=null;else if(w[1]!==null&&w[1].pointerId===m.pointerId){w[1]=null;return}else return;const b=u.pM(m,!1,!0,!1,!0,!1);let C=s.document.elementFromPoint(m.clientX,m.clientY)||null;C!==null&&C.shadowRoot!==void 0&&C.shadowRoot!==null&&(C=C.shadowRoot.elementFromPoint(m.clientX,m.clientY)),C!==null&&C.p instanceof yt&&C.p!==u&&C.p.o0(m,b),C===null&&(C=m.target),u.o0(m,b),b.clickCount=u.Zm,b.targetDiagram=u.yM(m,C),b.targetObject=null,u.doMouseUp(),u.oa(b,m),p&&(u.Qm=!1)},t.sa=m=>{if(!u.isEnabled)return;t.Uc=!1;const p=u.sb;p[m.pointerId]&&delete p[m.pointerId];const y=u._h;if(y[0]!==null&&y[0].pointerId===m.pointerId&&(y[0]=null),y[1]!==null&&y[1].pointerId===m.pointerId&&(y[1]=null),m.pointerType==="touch"||m.pointerType==="pen")return;const w=u.currentTool;w.cancelWaitAfter(),w.standardMouseOver()},t.na=m=>{const p=u._h;p[0]!==null&&p[0].pointerId===m.pointerId?(p[0]=null,u.Qm=!1):p[1]!==null&&p[1].pointerId===m.pointerId&&(p[1]=null)};const f=l;if(t.rb=f.U[o.Cs("7eba17a4ca3b1a8346")][o.Cs("78a118b7")](f.U,yt.Gu,i,i),l.clearContextCache(!0),t.qF(),this.Ic==="svg"){const m=this.ql.get("svg");this.Tt.appendChild(m.Ft),this.Zt=m.ai}}addEventListener(e,t,n,i){e.addEventListener(t,n,{capture:i,passive:!1})}Vt(e,t,n,i){e.addEventListener(t,n,{capture:i,passive:!1})}removeEventListener(e,t,n,i){e.removeEventListener(t,n,{capture:i})}Mi(e,t,n,i){e.removeEventListener(t,n,{capture:i})}qF(){const e=this;let t=this.dt.Ft;t instanceof HTMLCanvasElement||(t=e.div),this.Vt(t,"pointerdown",e.$l,!1),this.Vt(t,"pointermove",e.ia,!1),this.Vt(t,"pointerup",e.ea,!1),this.Vt(t,"pointerout",e.sa,!1),this.Vt(t,"pointercancel",e.na,!1),this.Vt(t,"pointerenter",e.WF,!1),this.Vt(t,"pointerleave",e.JF,!1),this.Vt(t,"wheel",e.ta,!1),this.Vt(t,"keydown",e.$F,!1),this.Vt(t,"keyup",e.ZF,!1),this.Vt(t,"blur",e.QF,!1),this.Vt(t,"focus",e._F,!1),this.Vt(t,"selectstart",n=>(n.preventDefault(),!1),!1),this.Vt(t,"contextmenu",n=>(n.preventDefault(),!1),!1),this.Vt(s,"resize",e.lb,!1)}Uw(){this._m>30&&(this.kl=1)}yP(e){this.kl!==null&&(this.kl=null,e&&this.wu(),this._m=0,this.uM=[0,0,0,0,0],this.t0=0)}computePixelRatio(){return this.kl!==null?this.kl:s.devicePixelRatio||1}get avgSpf(){return this._m}doMouseDown(){this.currentTool.doMouseDown()}doMouseMove(){this.currentTool.doMouseMove()}doMouseUp(){this.currentTool.doMouseUp()}doMouseWheel(){this.currentTool.doMouseWheel()}doKeyDown(){this.currentTool.doKeyDown()}doKeyUp(){this.currentTool.doKeyUp()}doFocus(){this.focus()}focus(){if(this.dt)if(this.scrollsPageOnFocus)this.dt.focus();else{const e=s.scrollX,t=s.scrollY;this.dt.focus(),s.scrollTo(e,t)}}_F(e){const t=yt.Ve.get(this);t&&t.v("GainedFocus")}QF(e){const t=yt.Ve.get(this);t&&t.v("LostFocus")}MS(){if(this.dt===null)return;const e=this.Tt;if(e===null||e.clientWidth===0||e.clientHeight===0)return;this.VS||this.setScrollWidth();const t=this.Wn?this.di:0,n=this.gn?this.di:0,i=this.Vi;if(this.Vi=this.computePixelRatio(),this.Vi!==i&&(this.vu=!0,this.requestUpdate()),e.clientWidth!==this.kt+t||e.clientHeight!==this.Pt+n){this.ra(),this.Ue=!0;const r=this.layout;r!==null&&r.isViewportSized&&this.autoScale===1&&(this.Oc=!0,r.invalidateLayout()),this.ps||this.requestUpdate()}}fL(){let e=0,t=new we;t.name="Grid",t.allowSelect=!1,t.pickable=!1,t.isTemporary=!0,t.isInDocumentBounds=!1,this.Gr(t,e++),t=new we,t.name="ViewportBackground",t.isViewportAligned=!0,t.isTemporary=!0,t.isInDocumentBounds=!1,this.Gr(t,e++),t=new we,t.name="Background",this.Gr(t,e++),t=new we,t.name="",this.Gr(t,e++),t=new we,t.name="Foreground",this.Gr(t,e++),t=new we,t.name="ViewportForeground",t.isViewportAligned=!0,t.isTemporary=!0,t.isInDocumentBounds=!1,this.Gr(t,e++),t=new we,t.name="Adornment",t.isTemporary=!0,t.isInDocumentBounds=!1,this.Gr(t,e++),t=new we,t.name="Tool",t.isTemporary=!0,t.isInDocumentBounds=!0,this.Gr(t,e++)}yL(){const e=new Kt(Kt.Grid,{name:"GRID"}).add(new Qt("LineH",{stroke:"lightgray",strokeWidth:.5,interval:1}).theme("stroke","gridMinor"),new Qt("LineV",{stroke:"lightgray",strokeWidth:.5,interval:1}).theme("stroke","gridMinor"),new Qt("LineH",{stroke:"gray",strokeWidth:.5,interval:5}).theme("stroke","gridMajor"),new Qt("LineV",{stroke:"gray",strokeWidth:.5,interval:5}).theme("stroke","gridMajor"),new Qt("LineH",{stroke:"gray",strokeWidth:1,interval:10}).theme("stroke","gridMajor"),new Qt("LineV",{stroke:"gray",strokeWidth:1,interval:10}).theme("stroke","gridMajor")),t=new xe({layerName:"Grid",zOrder:0,isInDocumentBounds:!1,isAnimated:!1,pickable:!1,locationObjectName:"GRID"}).add(e);return this.add(t),this.partManager.parts.delete(t),e.visible=!1,e}static XF(){const e=yt.Ve.get(this.parentElement||this);if(e){if(e.Jx){e.Jx=!1;return}if(!e.isEnabled){e.wL();return}e.diagramScroll(this)}}static KF(e){if(!this.p.isEnabled){this.p.updateScroll();return}this.p.$x=e.target.scrollTop,this.p.Zx=e.target.scrollLeft}diagramScroll(e){if(this.dt===null)return;const t=this.nb,n=this.ob;this.Gm=!0;let i=this.documentBounds,r=this.viewportBounds;const a=this.Fc;let l=i.x-a.left,u=i.y-a.top;const c=i.width+a.left+a.right,f=i.height+a.top+a.bottom;let m=i.right+a.right,p=i.bottom+a.bottom,y=r.x,w=r.y;const b=r.width,C=r.height;let k=r.right,N=r.bottom;const F=this.scale;let D,E=e.scrollLeft;if(this.Yu)switch(this.wx){case"negative":E=E+e.scrollWidth-e.clientWidth;break;case"reverse":E=e.scrollWidth-E-e.clientWidth;break}const U=E;if(b<c||C<f){D=T.X(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Zx!==U&&(D.x=U/F+l,this.Zx=U),this.allowVerticalScroll&&this.$x!==e.scrollTop&&(D.y=e.scrollTop/F+u,this.$x=e.scrollTop),this.position=D,T.s(D),this.Gm=!1,this.Bu=!1;return}if(D=T.l(),e.YF&&this.allowHorizontalScroll&&(l<y&&(this.position=D.e(U+l,this.position.y)),m>k)){const $=t.scrollWidth-this.kt;this.position=D.e(-$+U-this.kt/F+m,this.position.y)}if(e.GF&&this.allowVerticalScroll&&(u<w&&(this.position=D.e(this.position.x,e.scrollTop+u)),p>N)){const $=t.scrollHeight-this.Pt;this.position=D.e(this.position.x,-$+e.scrollTop-this.Pt/F+p)}T.s(D),this.Ql(),this.Gm=!1,this.Bu=!1,i=this.documentBounds,r=this.viewportBounds,m=i.right,k=r.right,p=i.bottom,N=r.bottom,l=i.x,y=r.x,u=i.y,w=r.y,b>=c&&l>=y&&m<=k&&(n.style.width="1px"),C>=f&&u>=w&&p<=N&&(n.style.height="1px")}computeBounds(e){return e===void 0&&(e=new I),this.Ci(),this.xL(e)}xL(e){if(this.fixedBounds.isReal())return e.a(this.fixedBounds),e.addMargin(this.$t),e;let t=!0;const n=this.Gt.r,i=n.length;for(let r=0;r<i;r++){const a=n[r];if(!a.visible||!a.isInDocumentBounds)continue;const l=a.At.r,u=l.length;for(let c=0;c<u;c++){const f=l[c];if(!f.isInDocumentBounds||!f.isVisible())continue;const m=f.actualBounds;m.isReal()&&(t?(t=!1,e.a(m)):e.unionRect(m))}}return t&&e.e(0,0,0,0),e.addMargin(this.$t),e}computePartsBounds(e,t){t===void 0&&(t=!1);let n=null;if(Array.isArray(e))for(let i=0;i<e.length;i++){const r=e[i];!t&&r instanceof Gt||(r.ensureBounds(),n===null?n=r.actualBounds.copy():n.unionRect(r.actualBounds))}else{const i=e.iterator;for(;i.next();){const r=i.value;!t&&r instanceof Gt||(r.ensureBounds(),n===null?n=r.actualBounds.copy():n.unionRect(r.actualBounds))}}return n===null?new I(NaN,NaN,0,0):n}Us(e){if(!e&&!this.Jn||this.Ht||this.dt===null||!this.documentBounds.isReal())return;if(this.Ht=!0,e){const p=this.initialPosition;if(p.isReal()){this.Ht=!1,this.position=p;return}let y=this.initialDocumentSpot,w=this.initialViewportSpot;y.isNoSpot()&&(y=z.TopLeft),w.isNoSpot()&&(w=z.TopLeft);const b=T.l();b.setRectSpot(this.documentBounds,y);const C=this.viewportBounds,k=I.X(0,0,C.width,C.height),N=T.l();N.setRectSpot(k,w),N.e(b.x-N.x,b.y-N.y),this.Ht=!1,this.position=N,I.s(k),T.s(N)}let t=this.Gl;e&&this.Cr!==1&&(t=this.Cr);const n=t!==1?this.ju(t):this.scale,i=this.at.x,r=this.at.y,a=this.kt/n,l=this.Pt/n;let u=this.Rc;const c=this.zm;if(e&&!u.isSpot()&&(c.isSpot()||c.isDefault())){const p=this.initialDocumentSpot.isSpot()&&this.initialViewportSpot.isSpot();u=c.isDefault()&&!p?z.Center:c}this.wM(this.documentBounds,a,l,u,e);const f=this.scale;this.scale=n,this.Ht=!1;const m=this.viewportBounds;m.equalsApproxTo(i,r,a,l)||this.onViewportBoundsChanged(new I(i,r,a,l),m,f,!1)}ju(e){const t=this.$m;if(this.dt===null)return t;this.ensureBounds();const n=this.documentBounds;if(!n.isReal())return t;const i=n.width,r=n.height,a=this.kt+(this.Wn?this.di:0),l=this.Pt+(this.gn?this.di:0),u=a/i,c=l/r;let f;return e===2?(f=Math.min(c,u),f>t&&(f=t),f<this.minScale&&(f=this.minScale),f>this.maxScale&&(f=this.maxScale),f):e===3?(f=0,c>u?f=(l-this.di)/r:f=(a-this.di)/i,f>t&&(f=t),f<this.minScale&&(f=this.minScale),f>this.maxScale&&(f=this.maxScale),f):this.scale}zoomToFit(){const e=this.jh;this.jh=1,this.scale=this.ju(2),e!==1&&(this.Us(!1),this.wM(this.documentBounds,this.kt/this.et,this.Pt/this.et,this.Rc,!1)),this.jh=e}zoomToRect(e,t){t===void 0&&(t=2);const n=e.width,i=e.height;if(n===0||i===0||isNaN(n)&&isNaN(i))return;let r=1;if(t===2||t===3)if(isNaN(n))r=this.viewportBounds.height*this.scale/i;else if(isNaN(i))r=this.viewportBounds.width*this.scale/n;else{const a=this.kt,l=this.Pt;t===3?l/i>a/n?r=(l-(this.gn?this.di:0))/i:r=(a-(this.Wn?this.di:0))/n:r=Math.min(l/i,a/n)}this.scale=r,this.position=new T(e.x,e.y)}get tR(){return this.Ht}set tR(e){this.Ht=e}alignDocument(e,t){this.ensureBounds();const n=this.documentBounds,i=this.viewportBounds;this.position=new T(n.x+(e.x*n.width+e.offsetX)-(t.x*i.width-t.offsetX),n.y+(e.y*n.height+e.offsetY)-(t.y*i.height-t.offsetY))}focusObject(e){if(e instanceof Re){this.i0=e;const t=T.l();this.e0=this.transformDocToView(e.getDocumentPoint(z.TopLeft,t)),T.s(t)}else this.i0=null,this.e0=T.Ak}wM(e,t,n,i,r){const a=T.X(this.at.x,this.at.y);let l=a.x,u=a.y;if(this.i0!==null){let c=T.l();c=this.i0.getDocumentPoint(z.TopLeft,c),l=c.x-this.e0.x/this.scale,u=c.y-this.e0.y/this.scale,i=z.None,T.s(c)}if(r||this.scrollMode===1){i.isSpot()&&(t>e.width&&(l=e.x+(i.x*e.width+i.offsetX)-(i.x*t-i.offsetX)),n>e.height&&(u=e.y+(i.y*e.height+i.offsetY)-(i.y*n-i.offsetY)));const c=this.Fc,f=t-e.width;if(t<e.width+c.left+c.right){let p=l+t/2;p=Math.min(p,e.right+Math.max(f,c.right)-t/2),p=Math.max(p,e.left-Math.max(f,c.left)+t/2),l=p-t/2}else l>e.left?l=e.left:l<e.right-t&&(l=e.right-t);const m=n-e.height;if(n<e.height+c.top+c.bottom){let p=u+n/2;p=Math.min(p,e.bottom+Math.max(m,c.bottom)-n/2),p=Math.max(p,e.top-Math.max(m,c.top)+n/2),u=p-n/2}else u>e.top?u=e.top:u<e.bottom-n&&(u=e.bottom-n)}if(a.x=isFinite(l)?l:-this.$t.left,a.y=isFinite(u)?u:-this.$t.top,this.positionComputation!==null){const c=this.positionComputation(this,a);a.x=c.x,a.y=c.y}this.ds.$C(this.at,a),this.at.e(a.x,a.y),this.pb(),this.Zl(),this.iR(),T.s(a)}findPartAt(e,t){if(t===void 0&&(t=!0),t){const n=this.PP(e,i=>i.part,i=>i.canSelect());if(n instanceof xe)return n}else{const n=this.PP(e,i=>i.part);if(n instanceof xe)return n}return null}findObjectAt(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null),this.Ci();const i=this.Gt.iteratorBackwards;for(;i.next();){const r=i.value;if(!r.visible)continue;const a=r.findObjectAt(e,t,n);if(a!==null)return a}return null}PP(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null),this.Ci();const i=this.Gt.iteratorBackwards;for(;i.next();){const r=i.value;if(!r.visible||r.isTemporary)continue;const a=r.findObjectAt(e,t,n);if(a!==null)return a}return null}findPartsAt(e,t,n){return t===void 0&&(t=!0),this.eR(e,i=>i.part,t?i=>i instanceof xe&&i.canSelect():null,n)}eR(e,t,n,i){t===void 0&&(t=null),n===void 0&&(n=null),!(i instanceof M)&&!(i instanceof L)&&(i=new L),this.Ci();const r=this.Gt.iteratorBackwards;for(;r.next();){const a=r.value;!a.visible||a.isTemporary||a.findObjectsAt(e,t,n,i)}return i}findObjectsAt(e,t,n,i){t===void 0&&(t=null),n===void 0&&(n=null),!(i instanceof M)&&!(i instanceof L)&&(i=new L),this.Ci();const r=this.Gt.iteratorBackwards;for(;r.next();){const a=r.value;a.visible&&a.findObjectsAt(e,t,n,i)}return i}findPartsIn(e,t,n,i){return t===void 0&&(t=!1),n===void 0&&(n=!0),this.sR(e,null,r=>r instanceof xe&&(!n||r.canSelect()),t,i)}findObjectsIn(e,t,n,i,r){t===void 0&&(t=null),n===void 0&&(n=null),i===void 0&&(i=!1),!(r instanceof M)&&!(r instanceof L)&&(r=new L),this.Ci();const a=this.Gt.iteratorBackwards;for(;a.next();){const l=a.value;l.visible&&l.findObjectsIn(e,t,n,i,r)}return r}NP(e,t,n,i,r,a){const l=new L;this.Ci();const u=this.Gt.iteratorBackwards;for(;u.next();){const c=u.value;c.visible&&c.NP(e,t,n,i,l,r,a)}return l}sR(e,t,n,i,r){t===void 0&&(t=null),n===void 0&&(n=null),i===void 0&&(i=!1),!(r instanceof M)&&!(r instanceof L)&&(r=new L),this.Ci();const a=this.Gt.iteratorBackwards;for(;a.next();){const l=a.value;!l.visible||l.isTemporary||l.findObjectsIn(e,t,n,i,r)}return r}findPartsNear(e,t,n,i,r){return n===void 0&&(n=!0),i===void 0&&(i=!0),this.nR(e,t,null,a=>a instanceof xe&&(!i||a.canSelect()),n,r)}findObjectsNear(e,t,n,i,r,a){n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof M||r instanceof L)&&(a=r),r=!0),!(a instanceof M)&&!(a instanceof L)&&(a=new L),this.Ci();const l=this.Gt.iteratorBackwards;for(;l.next();){const u=l.value;u.visible&&u.findObjectsNear(e,t,n,i,r,a)}return a}nR(e,t,n,i,r,a){n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof M||r instanceof L)&&(a=r),r=!0),!(a instanceof M)&&!(a instanceof L)&&(a=new L),this.Ci();const l=this.Gt.iteratorBackwards;for(;l.next();){const u=l.value;!u.visible||u.isTemporary||u.findObjectsNear(e,t,n,i,r,a)}return a}acceptEvent(e){return this.Xc(e,e instanceof MouseEvent)}Xc(e,t){const n=this.Xr;this.Xr=this.$h,this.$h=n,n.diagram=this,n.event=e,t?this.o0(e,n):(n.viewPoint=this.Xr.viewPoint,n.documentPoint=this.Xr.documentPoint);let i=0;const r=e;return r.ctrlKey&&(i+=1),r.altKey&&(i+=2),r.shiftKey&&(i+=4),r.metaKey&&(i+=8),n.modifiers=i,n.button=r.button,r.buttons!==void 0&&(n.buttons=r.buttons),o.rr&&r.button===0&&r.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=this.yM(e,e.target),n.targetObject=null,n}yM(e,t){if(t===null)return null;const n=yt.Ve.get(t);if(n)return n;let i=e.path;if(!i&&typeof e.composedPath=="function"&&(i=e.composedPath()),i&&i[0]){const r=yt.Ve.get(i[0]);if(r)return r}return null}jF(e,t,n){const i=this.pM(e,!0,!1,!1,!0,n);return this.o0(t,i),i.targetDiagram=this.yM(e,e.target),i.targetObject=null,n||i.clone(this.Jm),i}HF(e,t,n){const i=this.pM(e,!1,!1,!1,!1,n);let r=s.document.elementFromPoint(t.clientX,t.clientY)||null;r!==null&&r.shadowRoot!==void 0&&r.shadowRoot!==null&&(r=r.shadowRoot.elementFromPoint(t.clientX,t.clientY));let a=this,l=e;if(r){const u=yt.Ve.get(r);u&&(l=t,a=u)}return i.targetDiagram=a,this.o0(l,i),i.targetObject=null,i}pM(e,t,n,i,r,a){const l=this.Xr;this.Xr=this.$h,this.$h=l,l.diagram=this,l.clickCount=1,l.delta=0;let u=0;return e.ctrlKey&&(u+=1),e.altKey&&(u+=2),e.shiftKey&&(u+=4),e.metaKey&&(u+=8),l.modifiers=u,l.event=e,l.timestamp=e.timeStamp,l.button=n?this.firstInput.button:e.button,l.buttons=e.buttons,o.rr&&e.button===0&&e.ctrlKey&&(l.button=2),l.down=t,l.up=n,l.handled=i,l.bubbles=r,l.isMultiTouch=a,l}oa(e,t){return e.bubbles?!0:(t.stopPropagation!==void 0&&t.stopPropagation(),t.cancelable!==!1&&t.preventDefault(),t.cancelBubble=!0,!1)}$F(e){const t=yt.Ve.get(this);if(!t||!t.isEnabled)return!1;const n=t.Xc(e,!1);return n.key=e.key,n.code=e.code,n.down=!0,t.doKeyDown(),t.oa(n,e)}ZF(e){const t=yt.Ve.get(this);if(!t||!t.isEnabled)return!1;const n=t.Xc(e,!1);return n.key=e.key,n.code=e.code,n.up=!0,t.doKeyUp(),t.oa(n,e)}WF(e){const t=yt.Ve.get(this);if(!t||!t.isEnabled)return!1;const n=t.Xc(e,!0);return t.mouseEnter!==null&&t.mouseEnter(n),t.currentTool.standardMouseOver(),t.oa(n,e)}JF(e){const t=yt.Ve.get(this);if(!t||!t.isEnabled)return!1;const n=t.Xc(e,!0);return t.mouseLeave!==null&&t.mouseLeave(n),t.oa(n,e)}getMouse(e){const t=this.dt;if(t===null)return new T(0,0);const n=t.getBoundingClientRect(),i=(e.clientX-n.left)*(this.kt/n.width),r=(e.clientY-n.top)*(this.Pt/n.height);return new T(i,r).Ie(this.D)}o0(e,t){const n=this.dt;let i=0,r=0;if(n!==null){const l=n.getBoundingClientRect();i=(e.clientX-l.left)*(this.kt/l.width),r=(e.clientY-l.top)*(this.Pt/l.height)}t.viewPoint.e(i,r);const a=T.X(i,r);this.D._e(a),t.documentPoint.a(a),T.s(a)}kC(e,t,n){let i;if(this._h[0]!==null)i=this._h[t];else return;const r=this.dt;if(r!==null){const a=r.getBoundingClientRect();n.e((i.clientX-a.left)*(this.kt/a.width),(i.clientY-a.top)*(this.Pt/a.height))}}invalidateDocumentBounds(){this.Zh||(this.Zh=!0,this.requestUpdate(!1))}oR(){this.ps||this.Ci(),this.ensureBounds()}redraw(){this.Ht||this.ps||(this.C(),this.maybeUpdate())}isUpdateRequested(){return this.Pr}delayInitialization(e){e===void 0&&(e=null);const t=this.animationManager,n=t.isEnabled;t.stopAnimation(),t.isEnabled=!1,this.yr(),this.Jn=!1,this.ex=new T(NaN,NaN),t.isEnabled=n,this.ps=!0;const i=this;e!==null&&o.Oh(()=>{i.ps=!1,t.Dl("Model"),e(i)},1)}requestUpdate(e){if(e===void 0&&(e=!1),this.Pr===!0||this.Ht||e===!1&&this.ps)return;this.Pr=!0;const t=this;s.requestAnimationFrame(()=>{t.Pr&&t.maybeUpdate()})}maybeUpdate(){this.Ou&&!this.Pr||(this.Ou&&(this.Ou=!1),this.yr())}xM(e,t){!this.Bu||this.Ht||this.animationManager.defaultAnimation.isAnimating||this.wL()||(e&&this.Ci(),t&&this.Us(!1))}yr(e){if(this.ps||(this.Pr=!1,this.Tt===null&&!this.Uu.isReal()))return;this.ps=!0;const t=this.animationManager,n=this.Ku;if(!t.isAnimating&&n.length!==0){const m=n.r,p=m.length;for(let y=0;y<p;y++){const w=m[y];w.ue(!1),w.c()}n.clear()}const i=this.lM;i.count>0&&(i.each(m=>m.bM()),i.clear());let r=!1,a=!1;t.defaultAnimation.isAnimating&&(a=!0,r=this.skipsUndoManager,this.skipsUndoManager=!0),t.wi||this.MS(),e||this.xM(!1,!0);const l=!this.undoManager.isUndoingRedoing&&(this.xl||this.zc.count!==0&&this.Lr.size!==0),u=!this.Jn||this.Kr;this.Ci(!0);let c=!1;(u||l)&&(this.Jn?this.kM(!this.Oc,l):(this.startTransaction("Initial Layout"),t.isEnabled===!1&&t.stopAnimation(),this.kM(!1,l)),c=u),this.Oc=!1,this.xl=!1,this.Ci(),this.ts!==null&&(this.ts.visible&&!this.Vu&&(this._l(),this.Vu=!0),!this.ts.visible&&this.Vu&&(this.Vu=!1)),this.Bx||this.oR(),e||this.xM(!0,!1);let f=!1;if(c){const m=I.l();m.a(this.viewportBounds),this.Jn||(this.Jn=!0,f=!0,this.skipsUndoManager||(this.undoManager.Ow=!0),this.undoManager.Iw=!0,this.rR()),this.lR(),this.Ci(!1),e||this.xM(!0,!0),I.s(m)}else if(t.Sc&&t.ix){if(this.Cr!==1)this.scale=this.ju(this.Cr);else if(this.Gl!==1)this.scale=this.ju(this.Gl);else{const m=this.initialScale;isFinite(m)&&m>0&&(this.scale=m)}this.Us(!0)}c&&f&&this.commitTransaction("Initial Layout"),e||this.Bi(this.Zt),a&&(this.skipsUndoManager=r),this.ps=!1}get Bh(){return this.Jn}rR(){if(this.Cr!==1)this.scale=this.ju(this.Cr);else if(this.Gl!==1)this.scale=this.ju(this.Gl);else{const t=this.initialScale;isFinite(t)&&t>0&&(this.scale=t)}this.Us(!0);const e=this.Gt.r;this.Bs(e,e.length,this,this.viewportBounds),this.v("InitialLayoutCompleted"),this.ex.a(this.at),this._l()}lR(){this.v("LayoutCompleted")}r0(e){this.Hn.add(e)}addInvalidRoute(e){this.Fo?this.Wh.add(e):this.Lr.add(e)}Ci(e){if(this.Hn.size!==0&&!(!this.ps&&this.animationManager.isTicking)){if(this.ps||(this.xl=!0),e){this.bL(this.Hn);return}for(let t=0;t<23&&this.Hn.size!==0;t++){const n=new Set(this.Hn);this.Hn.clear(),this.bM(n,this.Hn)}this.nodes.each(t=>{t instanceof Vt&&t.kL(!1)})}}bL(e,t){for(const n of e)!n.Pe()||n instanceof Vt||(n.jr()?(n.ut(1/0,1/0),n.zt()):t&&t.add(n));for(const n of e)if(n instanceof Vt){if(!n.isVisible())continue;this.yb(n)}}bM(e,t){this.bL(e,t);for(const n of e){if(!(n instanceof Gt))continue;const i=n;i.isVisible()&&(i.jr()?(i.ut(1/0,1/0),i.zt()):t.add(i))}for(const n of e)n instanceof ie&&n.isVisible()&&(n.jr()?(n.ut(1/0,1/0),n.zt()):t.add(n))}l0(e){const t=e instanceof yt,n=t?e.links:e.memberParts,i=this.Hn;if(t)this.Ci(!0);else{for(;n.next();){const r=n.value;i.has(r)&&(!r.Pe()||r instanceof Vt||r.jr()&&(r.ut(1/0,1/0),r.zt()))}for(n.reset();n.next();){const r=n.value;if(i.has(r)&&r instanceof Vt){if(!r.isVisible())continue;this.yb(r)}}n.reset()}for(;n.next();){const r=n.value;r instanceof Gt&&i.has(r)&&r.isVisible()&&r.jr()&&(r.ut(1/0,1/0),r.zt())}}yb(e){const t=o.nt(),n=o.nt(),i=e.memberParts;for(;i.next();){const a=i.value;a.isVisible()&&(a instanceof Vt?(a.Oo()||a.is()||a.th())&&this.yb(a):a instanceof Gt?a.fromNode===e||a.toNode===e?n.push(a):t.push(a):(a.ut(1/0,1/0),a.zt()))}let r=t.length;for(let a=0;a<r;a++){const l=t[a];l.ut(1/0,1/0),l.zt()}o.tt(t),e.ut(1/0,1/0),e.zt(),r=n.length;for(let a=0;a<r;a++){const l=n[a];l.ut(1/0,1/0),l.zt()}o.tt(n)}Bs(e,t,n,i){if(!(!this.Ec&&!this.animationManager.isAnimating)){for(let r=0;r<t;r++)e[r].Bs(n,i);this.Ci()}}Bi(e){this.Tt!==null&&(this.dt===null&&o.o("No canvas specified"),this.Ic==="svg"?this.hR(e):this.aR(e))}aR(e){const t=this.animationManager;if(t.wi||t.isAnimating&&!t.isTicking)return;const n=new Date;if(this.h0(),this.Tt.style.opacity==="0")return;const i=e!==this.Zt,r=this.Gt.r,a=r.length,l=this;if(this.Bs(r,a,l,l.viewportBounds),i)e.clearContextCache(!0),this.Ql();else if(!this.Ue&&!t.isAnimating)return;const u=this.D,c=this.Vi;e.setTransform(c,0,0,c,0,0),e.clearRect(0,0,this.kt,this.Pt),this.Wt!==1&&(e.globalAlpha=this.Wt),this.PM(e);for(let w=0;w<a;w++)e.setTransform(c,0,0,c,0,0),e.transform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),e.commitTransform(),r[w].Bi(e,l);let f=!1;this.Vc?this.Vc.Gu(this)&&(f=this.rb()):f=!0,f&&(nt.prototype._e=nt.prototype.ww),i?(this.Zt.clearContextCache(!0),this.Ql()):(this.Ec=!1,this.Ue=!1);const m=+new Date-+n,p=!1,y=this.uM;if(this.kl===null){y[this.t0]=m,this.t0=(this.t0+1)%y.length;let w=0;for(let b=0;b<y.length;b++)w+=y[b];this._m=w/y.length}this.Wt!==1&&(e.globalAlpha=1)}hR(e){if(this.Tt===null)return;const t=this.animationManager;if(t.wi||t.isAnimating&&!t.isTicking)return;this.h0();const n=this.kt,i=this.Pt;e.surface.resize(n,i,n,i);const r=this.Gt.r,a=r.length,l=this;if(this.Bs(r,a,l,l.viewportBounds),!this.Ue&&!t.isAnimating)return;const u=this.D;e.lastDrawnPart=null,e.setDiagramPosScale(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),this.Wt!==1&&(e.globalAlpha=this.Wt),this.PM(e);const c=this.Vi;this.dt.ai.setTransform(c,0,0,c,0,0),this.dt.ai.clearRect(0,0,this.kt,this.Pt);for(let m=0;m<a;m++)r[m].Bi(e,l);let f=!1;this.Vc?this.Vc.Gu(this)&&(f=this.rb()):f=!0,f&&(nt.prototype._e=nt.prototype.ww),this.Ec=!1,this.Ue=!1}wb(e,t,n,i,r,a,l,u,c){if(this.Tt===null)return;this.dt===null&&o.o("No canvas specified"),a===void 0&&(a=null),l===void 0&&(l=null),u===void 0&&(u=!1),c===void 0&&(c=!1),this.h0(),this.Zt.clearContextCache(!0),this.Ql(),this.Qh=!0;const f=this.et;this.et=i;const m=this,p=this.Gt.r,y=p.length;try{const w=new I(r.x,r.y,n.width/i,n.height/i),b=w.copy();b.addMargin(t),this._l(b),this.Ci(),this.Bs(p,y,m,w),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),l!==null&&l!==""&&(e.fillStyle=l,e.fillBackground(0,0,n.width,n.height));const C=this.Vi;e.scale(C,C);const k=nt.l();k.Ri(),k.Ds(t.left,t.top),k.et(i),(r.x!==0||r.y!==0)&&k.Ds(-r.x,-r.y),e.setTransform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),e.commitTransform(),e instanceof Pe&&e.setDiagramPosScale(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),nt.s(k),this.PM(e),e.globalAlpha=this.Wt;const N=this.findLayer("Grid");if(a){const F=new L,D=a.iterator;for(D.reset();D.next();){const E=D.value;E instanceof xe&&(!c&&E.layer===N||(E.Fu(),F.add(E)))}for(let E=0;E<y;E++)p[E].bF(e,m,F,u);F.each(E=>E.Fu())}else for(let F=0;F<y;F++){const D=p[F];D===N?c&&D.Bi(e,m,!0):D.Bi(e,m,u)}this.Qh=!1,this.Vc&&this.Vc.Gu(this)&&this.rb()}finally{this.et=f,this.Zt.clearContextCache(!0),this.Ql(),this.Bs(p,y,m,m.viewportBounds),this._l(),this.Zt instanceof Pe&&(this.Zt.diagramGroup.replaceChildren(),this.redraw())}}getRenderingHint(e){return this.Nr[e]}setRenderingHint(e,t){e==="minDrawingLength"&&(this.Bm=t),this.Nr[e]=t,this.redraw()}resetRenderingHints(){this.Nr=new d,this.Nr.drawShadows=!0,this.Nr.textGreeking=!0,this.Nr.viewportOptimizations=!o.rr,this.Nr.temporaryPixelRatio=!0,this.Nr.pictureRatioOptimization=!0,this.Nr.minDrawingLength=1,this.Bm=1}PM(e){const t=this.Nr;if(t===null)return;if(t.imageSmoothingEnabled!==void 0){const i=!!t.imageSmoothingEnabled;e.setImageSmoothingEnabled(i)}const n=t.defaultFont;n!=null&&(e.font=n)}getInputOption(e){return this.Ru[e]}setInputOption(e,t){this.Ru[e]=t}EF(){this.Ru=new d,this.Ru.extraTouchArea=10,this.Ru.extraTouchThreshold=10,this.Ru.hasGestureZoom=!0}set(e){return Object.assign(this,e),this}attach(e){return this.setProperties(e)}setProperties(e){return yt.a0(this,e),this}static a0(e,t){const n=e instanceof Kt,i=e instanceof yt;for(const r in t){r===""&&o.o("Setting properties requires non-empty property names");let a=e,l=r;if(n||i){const c=r.indexOf(".");if(c>0){const f=r.substring(0,c);n?a=e.findObject(f):(a=e[f],a==null&&(a=e.toolManager[f])),o.wt(a)?l=r.substring(c+1):o.o("Unable to find object named: "+f+" in "+e.toString()+" when trying to set property: "+r)}}if(l[0]!=="_"&&!o.fw(a,l))if(i&&l==="ModelChanged"){e.addModelChangedListener(t[l]);continue}else if(i&&l==="Changed"){e.addChangedListener(t[l]);continue}else if(i&&o.fw(e.toolManager,l))a=e.toolManager;else if(i&&e.PL(l)){e.addDiagramListener(l,t[l]);continue}else if(e instanceof Wt&&l==="Changed"){e.addChangedListener(t[l]);continue}else o.o('Trying to set undefined property "'+l+'" on object: '+a.toString());const u=t[r];a[l]=u,l[0]==="_"&&a instanceof Re&&a.addCopyProperty(l)}}_C(){if(this.Jl.count!==0&&!(this.undoManager.transactionLevel>1)){for(;this.Jl.count>0;){const e=this.Jl;this.Jl=new W;const t=e.iterator;for(;t.next();){const n=t.key;n.invalidateOtherJumpOvers(t.value),n.ee()}}this.C()}}C(e){if(e===void 0)this.Ue=!0,this.requestUpdate();else{const t=this.viewportBounds;e.isReal()&&t.intersectsRect(e)&&(this.Ue=!0,this.requestUpdate())}this.v("InvalidateDraw")}invalidateViewport(e,t){if(this.Ue!==!0){if(this.Ue=!0,this.Ic==="svg"){this.maybeUpdate();return}this.getRenderingHint("temporaryPixelRatio")===!0?(this.Uw(),this.maybeUpdate(),this.yP(!0)):this.maybeUpdate()}}ra(){this.Bu=!0}Ql(){this.Ec=!0}h0(){this.vu!==!1&&(this.vu=!1,this.pL(this.kt,this.Pt))}pL(e,t){this.Zl();const n=this.Vi,i=e*n,r=t*n;this.dt.resize(i,r,e,t)&&(this.Ue=!0,this.Zt.clearContextCache(!0))}wL(){const e=this.dt;if(e===null||this.Uu.isReal())return!0;const t=this.kt,n=this.Pt,i=this.Tt;let r=!1,a=this.Wn?this.di:0,l=this.gn?this.di:0,u=i.clientWidth||t+a,c=i.clientHeight||n+l;const f=this.viewportBounds,m=f.x,p=f.y,y=f.width,w=f.height;if((u!==t+a||c!==n+l)&&(this.Wn=!1,this.gn=!1,a=0,l=0,this.kt=u,this.Pt=c,this.vu=!0,r=!0,this.Zl()),!this.Jn||!this.viewportBounds.isReal())return!0;const b=this.nb,C=this.ob;if(this.Bu=!1,!r&&!this.Wn&&!this.gn&&!this.Iu&&!this.Eu)return!0;const k=this.documentBounds;let N=0,F=0,D=0,E=0;const U=f.width,$=f.height,K=this.Fc;this.contentAlignment.isSpot()?(k.width>U&&(N=K.left,F=K.right),k.height>$&&(D=K.top,E=K.bottom)):(N=K.left,F=K.right,D=K.top,E=K.bottom);const _=k.width+N+F,G=k.height+D+E,X=this.scale,Q=X;let Z=_>u/X,et=G>c/X;if(!r&&!this.Wn&&!this.gn&&!Z&&!et)return!0;const st=k.x-N,ut=f.x,mt=k.right+F;let at=f.right+a;const vt=k.y-D,Nt=f.y,qt=k.bottom+E;let Tt=f.bottom+l,Ft="1px",Ot="1px";if(this.scrollMode===1&&(Z||et)){if(Z&&this.hasHorizontalScrollbar&&this.allowHorizontalScroll){let At=1;st+1<ut&&(At=Math.max((ut-st)*X+this.kt,At)),mt>at+1&&(At=Math.max((mt-at)*X+this.kt,At)),U+a+1<_&&(At=Math.max((_-U)*X+this.kt,At)),Ft=At.toString()+"px"}if(et&&this.hasVerticalScrollbar&&this.allowVerticalScroll){let At=1;vt+1<Nt&&(At=Math.max((Nt-vt)*X+this.Pt,At)),qt>Tt+1&&(At=Math.max((qt-Tt)*X+this.Pt,At)),$+l+1<G&&(At=Math.max((G-$)*X+this.Pt,At)),Ot=At.toString()+"px"}}let Rt=Ft!=="1px",ne=Ot!=="1px";if(!(Rt&&ne)&&(Rt||ne)){if(Z=!(_<U+a),et=!(G<$+l),ne&&(at-=this.di),Rt&&(Tt-=this.di),Z&&this.hasHorizontalScrollbar&&this.allowHorizontalScroll){let Xt=1;st+1<ut&&(Xt=Math.max((ut-st)*X+this.kt,Xt)),mt>at+1&&(Xt=Math.max((mt-at)*X+this.kt,Xt)),U+1<_&&(Xt=Math.max((_-U)*X+this.kt,Xt)),Ft=Xt.toString()+"px"}Rt=Ft!=="1px";let At=this.Pt;if(Rt!==this.gn&&(At=Rt?this.Pt-this.di:this.Pt+this.di),et&&this.hasVerticalScrollbar&&this.allowVerticalScroll){let Xt=1;vt+1<Nt&&(Xt=Math.max((Nt-vt)*X+At,Xt)),qt>Tt+1&&(Xt=Math.max((qt-Tt)*X+At,Xt)),$+1<G&&(Xt=Math.max((G-$)*X+At,Xt)),Ot=Xt.toString()+"px"}ne=Ot!=="1px"}if(this.Gm&&!(Rt!==this.gn||ne!==this.Wn))return(t!==this.kt||n!==this.Pt)&&this.maybeUpdate(),!1;if(Rt!==this.gn&&(Ft==="1px"?this.Pt=this.Pt+this.di:this.Pt=Math.max(this.Pt-this.di,1),r=!0),this.gn=Rt,C.style.width=Ft,ne!==this.Wn&&(Ot==="1px"?this.kt=this.kt+this.di:this.kt=Math.max(this.kt-this.di,1),r=!0,this.Yu)){const At=T.l();ne?(e.style.left=this.di+"px",this.position=At.e(this.at.x+this.di/this.scale,this.at.y)):(e.style.left="0px",this.position=At.e(this.at.x-this.di/this.scale,this.at.y)),T.s(At)}r&&this.Zl(),this.Wn=ne,C.style.height=Ot,this.Jx=!0,r&&(this.vu=!0);let te=b.scrollLeft;if(this.hasHorizontalScrollbar&&this.allowHorizontalScroll&&(U+1<_?te=(this.position.x-st)*X:st+1<ut?te=b.scrollWidth-b.clientWidth:mt>at+1&&(te=this.position.x*X)),this.Yu)switch(this.wx){case"negative":te=-(b.scrollWidth-te-b.clientWidth);break;case"reverse":te=b.scrollWidth-te-b.clientWidth;break}if(b.scrollLeft=te,this.hasVerticalScrollbar&&this.allowVerticalScroll&&($+1<G?b.scrollTop=(this.position.y-vt)*X:vt+1<Nt?b.scrollTop=b.scrollHeight-b.clientHeight:qt>Tt+1&&(b.scrollTop=this.position.y*X)),u=this.kt,c=this.Pt,b.style.width=u+(this.Wn?this.di:0)+"px",b.style.height=c+(this.gn?this.di:0)+"px",t!==u||n!==c||this.animationManager.wi){const At=I.X(m,p,y,w);return this.onViewportBoundsChanged(At,this.viewportBounds,Q,r),I.s(At),!1}return!0}add(e){const t=e.diagram;if(t===this)return;t!==null&&o.o("Cannot add part "+e.toString()+" to "+this.toString()+". It is already a part of "+t.toString());let n=this.findLayer(e.layerName);if(n===null&&(n=this.findLayer("")),n===null&&o.o('Cannot add a Part when unable find a Layer named "'+e.layerName+'" and there is no default Layer'),e.layer===n)return;const i=n.qh(99999999,e,e.diagram===this);i>=0&&this.raiseChangedEvent(3,"parts",n,null,e,null,i),n.isTemporary||this.invalidateDocumentBounds(),e.invalidateLayout(1);const r=e.layerChanged;r!==null&&r(e,null,n)}qh(e){this.partManager.qh(e);const t=this;e.Hr(n=>t.SL(n)),e.data||e.Io(),e.hasPlaceholder()&&e.c(),e.data!==null&&e.Hr(n=>t.partManager.SM(n,null)),(e.is()===!0||e.th()===!0)&&this.r0(e),e.ML(!0,this),e.NL()?(e.actualBounds.isReal()&&this.C(e.Hh(e.actualBounds)),this.invalidateDocumentBounds()):e.isVisible()&&e.actualBounds.isReal()&&this.C(e.Hh(e.actualBounds)),this.requestUpdate()}te(e){e.clearAdornments(),this.partManager.te(e);const t=this;e.data!==null&&e.Hr(n=>t.partManager.MM(n,t)),this.Hn.delete(e),e instanceof Gt&&this.Lr.delete(e),e.NL()?(e.actualBounds.isReal()&&this.C(e.Hh(e.actualBounds)),this.invalidateDocumentBounds()):e.isVisible()&&e.actualBounds.isReal()&&this.C(e.Hh(e.actualBounds)),this.requestUpdate()}remove(e){this.NM(e,!0)}NM(e,t){const n=e.layer;if(n===null||n.diagram!==this)return;e.isSelected=!1,e.isHighlighted=!1,e.invalidateLayout(2),t&&e.Kc();const i=n.te(-1,e,!1);i>=0&&this.raiseChangedEvent(4,"parts",n,e,null,i,null);const r=e.layerChanged;r!==null&&r(e,n,null)}removeParts(e,t){if(t===void 0&&(t=!1),Array.isArray(e)){const n=e.length;for(let i=0;i<n;i++){const r=e[i];t&&!r.canDelete()||this.remove(r)}}else{const n=new L;n.addAll(e);const i=n.iterator;for(;i.next();){const r=i.value;t&&!r.canDelete()||this.remove(r)}}}copyParts(e,t,n){return n===void 0&&(n=!1),this.partManager.copyParts(e,t,n)}moveParts(e,t,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=this.c0()),this.toolManager===null)return;const r=new W;if(e!==null)if(Array.isArray(e))for(let a=0;a<e.length;a++)this.qr(r,e[a],n,i);else{const a=e.iterator;for(;a.next();)this.qr(r,a.value,n,i)}else{let a=this.parts;for(;a.next();){const l=a.value;this.qr(r,l,n,i)}for(a=this.nodes;a.next();){const l=a.value;this.qr(r,l,n,i)}for(a=this.links;a.next();){const l=a.value;this.qr(r,l,n,i)}}this.bP(r,t,i,n)}qr(e,t,n,i,r){if(!e.has(t)&&(r===void 0&&(r=!1),!(n&&!r&&!t.canMove()&&!t.canCopy())))if(i===void 0&&(i=this.c0()),t instanceof It){if(e.set(t,this.Is(i,t,t.location)),t instanceof Vt&&(t.hasPlaceholder()||i.dragsMembers)){const l=t.memberParts;for(;l.next();){const u=l.value;this.qr(e,u,n,i,i.groupsAlwaysMove)}}const a=t.linksConnected;for(;a.next();){const l=a.value;if(e.has(l))continue;const u=l.fromNode,c=l.toNode;u!==null&&e.has(u)&&c!==null&&e.has(c)&&this.qr(e,l,n,i)}if(i.dragsTree){const l=t.findTreeChildrenNodes();for(;l.next();){const u=l.value;this.qr(e,u,n,i)}}}else if(t instanceof Gt){e.set(t,this.Is(i,t));const a=t.labelNodes;for(;a.next();){const l=a.value;this.qr(e,l,n,i)}}else t instanceof ie||e.set(t,this.Is(i,t,t.location))}bP(e,t,n,i){if(e===null||e.count===0)return;const r=T.l(),a=T.l();a.a(t),isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0);const l=this.ab;l||this.Vw(e);const u=o.nt(),c=o.nt(),f=e.iterator;let m=T.l();for(;f.next();){const C=f.key,k=f.value;if(C.Pe()){const N=this.CL(C,e);if(N!==null)u.push(new $a(C,k,N));else if(!i||C.canMove()){const F=k.point;r.a(F),this.computeMove(C,r.add(a),n,m),C.location=m,k.shifted===void 0&&(k.shifted=new T),k.shifted.a(m.subtract(F))}}else f.key instanceof Gt&&c.push(new J(f.key,f.value))}T.s(m);const p=u.length;for(let C=0;C<p;C++){const k=u[C],N=k.LL.point;r.a(N),k.xb.shifted===void 0&&(k.xb.shifted=new T),k.de.location=r.add(k.xb.shifted)}const y=T.l(),w=T.l(),b=c.length;for(let C=0;C<b;C++){const k=c[C],N=k.key;if(N instanceof Gt){if(N.suspendsRouting){N.Sr=null;const F=N.fromNode,D=N.toNode;if(this.draggedLink!==null&&n.dragsLink){const E=k.value.point;if(N.dragComputation===null){e.set(N,this.Is(n,N,a));const U=a.x-E.x,$=a.y-E.y;N.pr(U,$)}else{const U=T.X(0,0),$=N.getPoint(0);$&&$.isReal()&&U.a($),m=T.l().a(U).add(a);let K=m;n.isGridSnapEnabled&&(n.isGridSnapRealtime||this.lastInput.up)&&(K=T.l(),this.lS(N,m,K,n)),m.a(N.dragComputation(N,m,K)).subtract(U),e.set(N,this.Is(n,N,m));const _=m.x-E.x,G=m.y-E.y;N.pr(_,G),T.s(U),T.s(m),K!==m&&T.s(K)}}else{if(F!==null){y.a(F.location);const E=e.get(F);E!==null&&y.subtract(E.point)}if(D!==null){w.a(D.location);const E=e.get(D);E!==null&&w.subtract(E.point)}if(F!==null&&D!==null)if(y.equalsApprox(w)){const E=k.value.point,U=r;U.a(y),U.subtract(E),e.set(N,this.Is(n,N,y)),N.pr(U.x,U.y)}else N.suspendsRouting=!1,N.invalidateRoute();else{const E=k.value.point;let U;F!==null?U=y:D!==null?U=w:U=a,e.set(N,this.Is(n,N,U));const $=U.x-E.x,K=U.y-E.y;N.pr($,K)}}}else if(N.fromNode===null||N.toNode===null){const F=k.value.point;e.set(N,this.Is(n,N,a));const D=a.x-F.x,E=a.y-F.y;N.pr(D,E)}}}T.s(r),T.s(a),T.s(y),T.s(w),o.tt(u),o.tt(c),l||(this.Ci(),this.bm(e))}computeMove(e,t,n,i){if(i===void 0&&(i=new T),i.a(t),e===null)return i;let r=t;const a=n.isGridSnapEnabled;a&&(n.isGridSnapRealtime||this.lastInput.up)&&(r=T.l(),this.lS(e,t,r,n));const l=e.dragComputation!==null?e.dragComputation(e,t,r):r,u=e.minLocation;let c=u.x;isNaN(c)&&(c=a?Math.round(e.location.x*1e3)/1e3:e.location.x);let f=u.y;isNaN(f)&&(f=a?Math.round(e.location.y*1e3)/1e3:e.location.y);const m=e.maxLocation;let p=m.x;isNaN(p)&&(p=a?Math.round(e.location.x*1e3)/1e3:e.location.x);let y=m.y;return isNaN(y)&&(y=a?Math.round(e.location.y*1e3)/1e3:e.location.y),i.e(Math.max(c,Math.min(l.x,p)),Math.max(f,Math.min(l.y,y))),r!==t&&T.s(r),i}c0(){const e=this.toolManager.findTool("Dragging");return e instanceof Ut?e.dragOptions:this.fb}lS(e,t,n,i){if(i===void 0&&(i=this.c0()),n.a(t),e===null)return n;const r=this.grid,a=i.gridSnapCellSize;let l=a.width,u=a.height;const c=i.gridSnapOrigin;let f=c.x,m=c.y;const p=i.gridSnapCellSpot;if(r!==null){const w=r.gridCellSize;isNaN(l)&&(l=w.width),isNaN(u)&&(u=w.height);const b=r.gridOrigin;isNaN(f)&&(f=b.x),isNaN(m)&&(m=b.y)}const y=T.X(0,0);return y.setSpot(0,0,l,u,p),R.Bg(t.x,t.y,f+y.x,m+y.y,l,u,n),T.s(y),n}Vw(e){if(e===null)return;this.ab=!0;const t=e.iterator;for(;t.next();){const n=t.key;n instanceof Gt&&(n.suspendsRouting=!0)}}bm(e){if(e===null)return;const t=e.iterator;for(;t.next();){const n=t.key;n instanceof Gt&&(n.suspendsRouting=!1,n.AL()&&n.invalidateRoute())}this.ab=!1}get draggedLink(){return this.cb}set draggedLink(e){this.cb!==e&&(this.cb=e,e!==null&&(this.ub=e.fromPort,this.db=e.toPort))}get SP(){return this.ub}set SP(e){this.ub=e}get MP(){return this.db}set MP(e){this.db=e}CL(e,t){const n=e.containingGroup;if(n!==null){let i=this.CL(n,t);if(i!==null||(i=t.get(n),i!==null))return i}return null}Is(e,t,n){if(n===void 0)return new bs(T.Po);let i=e.isGridSnapEnabled;return!e.groupsSnapMembers&&t.containingGroup!==null&&(i=!1),i?new bs(new T(Math.round(n.x*1e3)/1e3,Math.round(n.y*1e3)/1e3)):new bs(n.copy())}CM(e,t){if(e.diagram!==null&&e.diagram!==this&&o.o("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),t===null?e.diagram!==null&&o.o("Cannot add an existing Layer to this Diagram again: "+e):(t.diagram!==this&&o.o("Existing Layer must be in this Diagram: "+t+" not in "+t.diagram),e===t&&o.o("Cannot move a Layer before or after itself: "+e)),e.diagram===this)return;const n=e.name,i=this.Gt,r=i.count;for(let a=0;a<r;a++)i.elt(a).name===n&&o.o("Cannot add Layer with the name '"+n+"'; a Layer with the same name is already present in this Diagram.")}addLayer(e){this.CM(e,null),e.To(this);const t=this.Gt;let n=t.count-1;if(!e.isTemporary)for(;n>=0&&t.elt(n).isTemporary;)n--;return t.insertAt(n+1,e),this.Si!==null&&this.raiseChangedEvent(3,"layers",this,null,e,null,n+1),this.C(),this.invalidateDocumentBounds(),this}addLayerBefore(e,t){this.CM(e,t),e.To(this);const n=this.Gt,i=n.indexOf(e);i>=0&&(n.delete(e),this.Si!==null&&this.raiseChangedEvent(4,"layers",this,e,null,i,null));const r=n.count;let a;for(a=0;a<r;a++)if(n.elt(a)===t){n.insertAt(a,e);break}return this.Si!==null&&this.raiseChangedEvent(3,"layers",this,null,e,null,a),this.C(),i<0&&this.invalidateDocumentBounds(),this}addLayerAfter(e,t){this.CM(e,t),e.To(this);const n=this.Gt,i=n.indexOf(e);i>=0&&(n.delete(e),this.Si!==null&&this.raiseChangedEvent(4,"layers",this,e,null,i,null));const r=n.count;let a;for(a=0;a<r;a++)if(n.elt(a)===t){n.insertAt(a+1,e);break}return this.Si!==null&&this.raiseChangedEvent(3,"layers",this,null,e,null,a+1),this.C(),i<0&&this.invalidateDocumentBounds(),this}Gr(e,t){e.To(this),this.Gt.insertAt(t,e)}TL(e){this.Gt.removeAt(e)}removeLayer(e){if(e.diagram!==this&&o.o("Cannot remove a Layer from another Diagram: "+e+" of "+e.diagram),e.name==="")return;const t=this.Gt,n=t.indexOf(e);if(t.delete(e)){const i=e.At.copy().iterator;for(;i.next();){const r=i.value,a=r.layerName;a!==e.name?r.layerName=a:r.layerName=""}this.Si!==null&&this.raiseChangedEvent(4,"layers",this,e,null,n,null),this.C(),this.invalidateDocumentBounds()}}findLayer(e){const t=this.layers;for(;t.next();){const n=t.value;if(n.name===e)return n}return null}findRouter(e){for(const t of this.zc)if(t.name===e)return t;return null}addModelChangedListener(e){return o.i(e,"function",yt,"addModelChangedListener:listener"),this.qn===null&&(this.qn=new M),this.qn.add(e),this.model.addChangedListener(e),this}removeModelChangedListener(e){o.i(e,"function",yt,"removeModelChangedListener:listener"),this.qn!==null&&(this.qn.delete(e),this.qn.count===0&&(this.qn=null)),this.model.removeChangedListener(e)}addChangedListener(e){return o.i(e,"function",yt,"addChangedListener:listener"),this.Ar===null&&(this.Ar=new M),this.Ar.add(e),this}removeChangedListener(e){o.i(e,"function",yt,"removeChangedListener:listener"),this.Ar!==null&&(this.Ar.delete(e),this.Ar.count===0&&(this.Ar=null))}Ew(e){if(!this.skipsUndoManager&&!this.model.skipsUndoManager&&this.model.undoManager.handleChanged(e),e.change!==1&&(this.isModified=!0),this.Ar!==null){const t=this.Ar,n=t.length;for(let i=0;i<n;i++)t.elt(i)(e)}}raiseChangedEvent(e,t,n,i,r,a,l){a===void 0&&(a=null),l===void 0&&(l=null);const u=new ft;u.diagram=this,u.change=e,u.propertyName=t,u.object=n,u.oldValue=i,u.oldParam=a,u.newValue=r,u.newParam=l,this.Ew(u)}raiseChanged(e,t,n,i,r){this.raiseChangedEvent(2,e,this,t,n,i,r)}t(e,t,n,i,r){this.raiseChangedEvent(2,e,this,t,n,i,r)}get animationManager(){return this.ds}get undoManager(){return this.Si.undoManager}get skipsUndoManager(){return this.Ro}set skipsUndoManager(e){o.i(e,"boolean",yt,"skipsUndoManager"),this.Ro=e,this.Si.skipsUndoManager=e}get delaysLayout(){return this.Ux}set delaysLayout(e){this.Ux=e}PC(e,t){if(e===null||e.diagram!==this)return;const n=this.fe;try{this.fe=!0;const i=e.change;if(i===2){const r=e.object,a=e.propertyName,l=e.getValue(t);if(Wt.rt(r,a,l),r instanceof Re){const u=r.part;u!==null&&u.invalidateAdornments()}this.isModified=!0}else if(i===3){const r=e.object,a=e.newParam,l=e.newValue;if(r instanceof Kt)if(typeof a=="number"&&l instanceof Re){t?r.te(a):r.insertAt(a,l);const u=r.part;u!==null&&u.invalidateAdornments()}else typeof a=="number"&&l instanceof ui&&(l.isRow?r.DL(a,t?void 0:l):r.FL(a,t?void 0:l));else if(r instanceof we){const u=e.oldParam===!0;typeof a=="number"&&l instanceof xe&&(t?(l.isSelected=!1,l.isHighlighted=!1,l.invalidateAdornments(),r.te(u?a:-1,l,u)):r.qh(a,l,u))}else r instanceof yt?typeof a=="number"&&l instanceof we&&(t?this.TL(a):this.Gr(l,a)):o.o("unknown ChangeType.Insert object: "+e.toString());this.isModified=!0}else if(i===4){const r=e.object,a=e.oldParam,l=e.oldValue;if(r instanceof Kt)typeof a=="number"&&l instanceof Re?t?r.insertAt(a,l):r.te(a):typeof a=="number"&&l instanceof ui&&(l.isRow?r.DL(a,t?l:void 0):r.FL(a,t?l:void 0));else if(r instanceof we){const u=e.newParam===!0;typeof a=="number"&&l instanceof xe&&(t?r.At.indexOf(l)<0&&r.qh(a,l,u):(l.isSelected=!1,l.isHighlighted=!1,l.invalidateAdornments(),r.te(u?a:-1,l,u)))}else r instanceof yt?typeof a=="number"&&l instanceof we&&(t?this.Gr(l,a):this.TL(a)):o.o("unknown ChangeType.Remove object: "+e.toString());this.isModified=!0}else i===1||o.o("unknown ChangedEvent: "+e.toString())}finally{this.fe=n}}startTransaction(e){return this.undoManager.startTransaction(e)}commitTransaction(e){return this.undoManager.commitTransaction(e)}rollbackTransaction(){return this.undoManager.rollbackTransaction()}commit(e,t){let n=t;n===void 0&&(n="");const i=this.skipsUndoManager;n===null&&(this.skipsUndoManager=!0,n=""),this.undoManager.startTransaction(n);let r=!1;try{e(this),r=!0}finally{r?this.undoManager.commitTransaction(n):this.undoManager.rollbackTransaction(),this.skipsUndoManager=i}}updateAllTargetBindings(e){this.partManager.updateAllTargetBindings(e)}updateAllThemeBindings(){if(this.partManager.updateAllThemeBindings(),this.ts!==null){const e=this.ts.part;e!==null&&e.Io()}}setDivBackground(e){this.div&&(this.div.style.backgroundColor=e)}updateAllRelationshipsFromData(){this.partManager.updateAllRelationshipsFromData()}pb(){const e=this.D,t=this.et,n=this.at;e.Ri(),t!==1&&e.et(t),(n.x!==0||n.y!==0)&&e.Ds(-n.x,-n.y)}RL(e,t){const n=this.animationManager;if(this.Ht||this.ps){this.et=t,this.Zl(),this.C(),this.ra(),n.ZC(e,this.et),this.pb();return}if(this.dt===null){this.et=t,this.pb();return}this.Ht=!0;const i=this.viewportBounds.copy(),r=this.kt,a=this.Pt;let l=this.zoomPoint.x,u=this.zoomPoint.y;const c=this.contentAlignment;isNaN(l)&&(c.isSide()?c.includesSide(z.LeftSide)?l=0:c.includesSide(z.RightSide)&&(l=r-1):c.isSpot()?l=c.x*(r-1):l=r/2),isNaN(u)&&(c.isSide()?c.includesSide(z.TopSide)?u=0:c.includesSide(z.BottomSide)&&(u=a-1):c.isSpot()?u=c.y*(a-1):u=a/2),this.scaleComputation!==null&&!this.animationManager.defaultAnimation.isAnimating&&(t=this.scaleComputation(this,t)),t<this.minScale&&(t=this.minScale),t>this.maxScale&&(t=this.maxScale);const f=T.X(this.at.x+l/e-l/t,this.at.y+u/e-u/t);this.position=f,T.s(f),this.et=t,this.Zl(),this.Ht=!1,this.onViewportBoundsChanged(i,this.viewportBounds,e,!1),this.Us(!1),n.ZC(e,this.et),this.C()}iR(){const e=this.Gt.r;for(let t=0;t<e.length;t++)e[t].nL()}onViewportBoundsChanged(e,t,n,i){if(e.equals(t))return;i===void 0&&(i=!1),i||this.ra(),this.Ql();const r=this.layout;r!==null&&r.isViewportSized&&this.autoScale===1&&(e.width!==t.width||e.height!==t.height)&&r.invalidateLayout();const a=this.currentTool;this.Uc===!0&&a instanceof Ht&&!this.animationManager.isTicking&&(this.lastInput.documentPoint=this.transformViewToDoc(this.lastInput.viewPoint),a.standardMouseActivity(this)),this.Ht||this.invalidateViewport(e,t),this._l(),this.Ui.scale=n,this.Ui.position.x=e.x,this.Ui.position.y=e.y,this.Ui.bounds.a(e),this.Ui.canvasSize.width=Math.round(e.width*n),this.Ui.canvasSize.height=Math.round(e.height*n),this.Ui.newCanvasSize.width=this.kt,this.Ui.newCanvasSize.height=this.Pt,this.Ui.isScroll=i,this.v("ViewportBoundsChanged",this.Ui,e),this.isVirtualized&&this.links.each(l=>{l.isAvoiding&&l.actualBounds.intersectsRect(t)&&l.invalidateRoute()})}_l(e){const t=this.ts;if(t===null||!t.visible||t.layer===null)return;const n=e!==void 0?e:this._x;if(!n.isReal())return;const i=n.width,r=n.height;if(t.scale=1,t.angle=0,t.layer.isViewportAligned)t.width=i*this.scale,t.height=r*this.scale,t.part.alignment=z.TopLeft;else{t.xi===null&&(t.xi=new Fo);const a=t.xi.Yc;if(!a.isReal())return;t.width=i+a.width*2,t.height=r+a.height*2;const l=T.l();R.Bg(n.x,n.y,0,0,a.width,a.height,l),l.offset(-a.width,-a.height),t.part.location=l,T.s(l)}}clearSelection(e){e===void 0&&(e=!1);const t=this.selection;if(t.count===0)return;e||this.v("ChangingSelection",t);const n=t.toArray(),i=n.length;for(let r=0;r<i;r++){const a=n[r];a.isSelected=!1}t.ot(),t.clear(),t.g(),e||this.v("ChangedSelection",t)}select(e){e!==null&&e.diagram===this&&(!e.isSelected||this.selection.count>1)&&(this.v("ChangingSelection",this.selection),this.clearSelection(!0),e.isSelected=!0,this.v("ChangedSelection",this.selection))}selectCollection(e){if(this.v("ChangingSelection",this.selection),this.clearSelection(!0),Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++){const i=e[n];i instanceof xe||o.o("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}}else{const t=e.iterator;for(;t.next();){const n=t.value;n instanceof xe||o.o("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}}this.v("ChangedSelection",this.selection)}clearHighlighteds(){const e=this.highlighteds;if(e.count>0){const t=e.toArray(),n=t.length;for(let i=0;i<n;i++){const r=t[i];r.isHighlighted=!1}e.ot(),e.clear(),e.g()}}highlight(e){e!==null&&e.diagram===this&&(!e.isHighlighted||this.highlighteds.count>1)&&(this.clearHighlighteds(),e.isHighlighted=!0)}highlightCollection(e){const t=new L().addAll(e),n=this.highlighteds.copy().removeAll(t).iterator;for(;n.next();){const r=n.value;r.isHighlighted=!1}const i=t.iterator;for(;i.next();){const r=i.value;r instanceof xe||o.o("Diagram.highlightCollection given something that is not a Part: "+r),r.isHighlighted=!0}}scroll(e,t,n){n===void 0&&(n=1);const i=t==="up"||t==="down";let r=0;const a=T.l();if(e==="pixel")r=n;else if(e==="line")r=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(e==="page"){let u=i?this.viewportBounds.height:this.viewportBounds.width;if(u*=this.scale,u!==0){const c=Math.max(u-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0);r=n*c}}else if(e==="document"){const u=this.documentBounds,c=this.viewportBounds;t==="up"?this.position=a.e(c.x,u.y):t==="left"?this.position=a.e(u.x,c.y):t==="down"?this.position=a.e(c.x,u.bottom-c.height):t==="right"&&(this.position=a.e(u.right-c.width,c.y)),T.s(a);return}else o.o("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+e);r/=this.scale;const l=this.position;t==="up"?this.position=a.e(l.x,l.y-r):t==="down"?this.position=a.e(l.x,l.y+r):t==="left"?this.position=a.e(l.x-r,l.y):t==="right"?this.position=a.e(l.x+r,l.y):o.o("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+t),T.s(a)}scrollToRect(e){const t=this.viewportBounds;if(t.containsRect(e))return;const n=e.center;n.x-=t.width/2,n.y-=t.height/2,this.position=n}centerRect(e){const t=this.viewportBounds,n=e.center;n.x-=t.width/2,n.y-=t.height/2,this.position=n}transformDocToView(e){return e.copy().D(this.D)}transformViewToDoc(e){return e.copy().Ie(this.D)}LF(e){return e.Ie(this.D)}get opacity(){return this.Wt}set opacity(e){const t=this.Wt;t!==e&&(o.i(e,"number",yt,"opacity"),(e<0||e>1)&&o._(e,"0 <= value <= 1",yt,"opacity"),this.Wt=e,this.t("opacity",t,e),this.C())}get validCycle(){return this.Rx}set validCycle(e){const t=this.Rx;t!==e&&(this.Rx=e,this.t("validCycle",t,e))}get layers(){return this.Gt.iterator}get isModelReadOnly(){const e=this.Si;return e===null?!1:e.isReadOnly}set isModelReadOnly(e){const t=this.Si;t!==null&&(t.isReadOnly=e)}get isReadOnly(){return this.vo}set isReadOnly(e){const t=this.vo;t!==e&&(o.i(e,"boolean",yt,"isReadOnly"),this.vo=e,this.t("isReadOnly",t,e))}get isEnabled(){return this.Oi}set isEnabled(e){const t=this.Oi;t!==e&&(o.i(e,"boolean",yt,"isEnabled"),this.Oi=e,this.t("isEnabled",t,e))}get allowClipboard(){return this.Vx}set allowClipboard(e){const t=this.Vx;t!==e&&(o.i(e,"boolean",yt,"allowClipboard"),this.Vx=e,this.t("allowClipboard",t,e))}get allowCopy(){return this.Fl}set allowCopy(e){const t=this.Fl;t!==e&&(o.i(e,"boolean",yt,"allowCopy"),this.Fl=e,this.t("allowCopy",t,e))}get allowDelete(){return this.Rl}set allowDelete(e){const t=this.Rl;t!==e&&(o.i(e,"boolean",yt,"allowDelete"),this.Rl=e,this.t("allowDelete",t,e))}get allowDragOut(){return this.zx}set allowDragOut(e){const t=this.zx;t!==e&&(o.i(e,"boolean",yt,"allowDragOut"),this.zx=e,this.t("allowDragOut",t,e))}get allowDrop(){return this.Xx}set allowDrop(e){const t=this.Xx;t!==e&&(o.i(e,"boolean",yt,"allowDrop"),this.Xx=e,this.t("allowDrop",t,e))}get allowTextEdit(){return this.vl}set allowTextEdit(e){const t=this.vl;t!==e&&(o.i(e,"boolean",yt,"allowTextEdit"),this.vl=e,this.t("allowTextEdit",t,e))}get allowGroup(){return this.Ol}set allowGroup(e){const t=this.Ol;t!==e&&(o.i(e,"boolean",yt,"allowGroup"),this.Ol=e,this.t("allowGroup",t,e))}get allowUngroup(){return this.Il}set allowUngroup(e){const t=this.Il;t!==e&&(o.i(e,"boolean",yt,"allowUngroup"),this.Il=e,this.t("allowUngroup",t,e))}get allowInsert(){return this.Kx}set allowInsert(e){const t=this.Kx;t!==e&&(o.i(e,"boolean",yt,"allowInsert"),this.Kx=e,this.t("allowInsert",t,e))}get allowLink(){return this.El}set allowLink(e){const t=this.El;t!==e&&(o.i(e,"boolean",yt,"allowLink"),this.El=e,this.t("allowLink",t,e))}get allowRelink(){return this.Bl}set allowRelink(e){const t=this.Bl;t!==e&&(o.i(e,"boolean",yt,"allowRelink"),this.Bl=e,this.t("allowRelink",t,e))}get allowMove(){return this.Ul}set allowMove(e){const t=this.Ul;t!==e&&(o.i(e,"boolean",yt,"allowMove"),this.Ul=e,this.t("allowMove",t,e))}get allowReshape(){return this.Vl}set allowReshape(e){const t=this.Vl;t!==e&&(o.i(e,"boolean",yt,"allowReshape"),this.Vl=e,this.t("allowReshape",t,e))}get allowResize(){return this.zl}set allowResize(e){const t=this.zl;t!==e&&(o.i(e,"boolean",yt,"allowResize"),this.zl=e,this.t("allowResize",t,e))}get allowRotate(){return this.Xl}set allowRotate(e){const t=this.Xl;t!==e&&(o.i(e,"boolean",yt,"allowRotate"),this.Xl=e,this.t("allowRotate",t,e))}get allowSelect(){return this.Kl}set allowSelect(e){const t=this.Kl;t!==e&&(o.i(e,"boolean",yt,"allowSelect"),this.Kl=e,this.t("allowSelect",t,e))}get allowUndo(){return this.Yx}set allowUndo(e){const t=this.Yx;t!==e&&(o.i(e,"boolean",yt,"allowUndo"),this.Yx=e,this.t("allowUndo",t,e))}get allowZoom(){return this.Gx}set allowZoom(e){const t=this.Gx;t!==e&&(o.i(e,"boolean",yt,"allowZoom"),this.Gx=e,this.t("allowZoom",t,e))}get hasVerticalScrollbar(){return this.Eu}set hasVerticalScrollbar(e){const t=this.Eu;t!==e&&(o.i(e,"boolean",yt,"hasVerticalScrollbar"),this.Eu=e,this.ra(),this.C(),this.t("hasVerticalScrollbar",t,e),this.Us(!1))}get hasHorizontalScrollbar(){return this.Iu}set hasHorizontalScrollbar(e){const t=this.Iu;t!==e&&(o.i(e,"boolean",yt,"hasHorizontalScrollbar"),this.Iu=e,this.ra(),this.C(),this.t("hasHorizontalScrollbar",t,e),this.Us(!1))}get allowHorizontalScroll(){return this.jx}set allowHorizontalScroll(e){const t=this.jx;t!==e&&(o.i(e,"boolean",yt,"allowHorizontalScroll"),this.jx=e,this.t("allowHorizontalScroll",t,e),this.Us(!1))}get allowVerticalScroll(){return this.Hx}set allowVerticalScroll(e){const t=this.Hx;t!==e&&(o.i(e,"boolean",yt,"allowVerticalScroll"),this.Hx=e,this.t("allowVerticalScroll",t,e),this.Us(!1))}get scrollHorizontalLineChange(){return this.qx}set scrollHorizontalLineChange(e){const t=this.qx;t!==e&&(o.i(e,"number",yt,"scrollHorizontalLineChange"),e<0&&o._(e,">= 0",yt,"scrollHorizontalLineChange"),this.qx=e,this.t("scrollHorizontalLineChange",t,e))}get scrollVerticalLineChange(){return this.Wx}set scrollVerticalLineChange(e){const t=this.Wx;t!==e&&(o.i(e,"number",yt,"scrollVerticalLineChange"),e<0&&o._(e,">= 0",yt,"scrollVerticalLineChange"),this.Wx=e,this.t("scrollVerticalLineChange",t,e))}get lastInput(){return this.$h}set lastInput(e){this.$h=e}get previousInput(){return this.Xr}set previousInput(e){this.Xr=e}get firstInput(){return this.Jm}set firstInput(e){this.Jm=e}get currentCursor(){return this.vx}set currentCursor(e){if(e===""&&(e=this.Ym),this.vx!==e){o.i(e,"string",yt,"currentCursor");const t=this.dt,n=this.Tt;if(t===null||n===null)return;this.vx=e;const i=t.style.cursor;t.style.cursor=e,n.style.cursor=e,t.style.cursor===i&&(t.style.cursor="-webkit-"+e,n.style.cursor="-webkit-"+e,t.style.cursor===i&&(t.style.cursor="-moz-"+e,n.style.cursor="-moz-"+e,t.style.cursor===i&&(t.style.cursor=e,n.style.cursor=e)))}}get defaultCursor(){return this.Ym}set defaultCursor(e){e===""&&(e="auto");const t=this.Ym;t!==e&&(o.i(e,"string",yt,"defaultCursor"),this.Ym=e,this.t("defaultCursor",t,e))}get click(){return this.Tr}set click(e){const t=this.Tr;t!==e&&(e!==null&&o.i(e,"function",yt,"click"),this.Tr=e,this.t("click",t,e))}get doubleClick(){return this.Dr}set doubleClick(e){const t=this.Dr;t!==e&&(e!==null&&o.i(e,"function",yt,"doubleClick"),this.Dr=e,this.t("doubleClick",t,e))}get contextClick(){return this.Fr}set contextClick(e){const t=this.Fr;t!==e&&(e!==null&&o.i(e,"function",yt,"contextClick"),this.Fr=e,this.t("contextClick",t,e))}get mouseOver(){return this.Rr}set mouseOver(e){const t=this.Rr;t!==e&&(e!==null&&o.i(e,"function",yt,"mouseOver"),this.Rr=e,this.t("mouseOver",t,e))}get mouseHover(){return this.vr}set mouseHover(e){const t=this.vr;t!==e&&(e!==null&&o.i(e,"function",yt,"mouseHover"),this.vr=e,this.t("mouseHover",t,e))}get mouseHold(){return this.Or}set mouseHold(e){const t=this.Or;t!==e&&(e!==null&&o.i(e,"function",yt,"mouseHold"),this.Or=e,this.t("mouseHold",t,e))}get mouseDragOver(){return this.Ox}set mouseDragOver(e){const t=this.Ox;t!==e&&(e!==null&&o.i(e,"function",yt,"mouseDragOver"),this.Ox=e,this.t("mouseDragOver",t,e))}get mouseDrop(){return this.Ir}set mouseDrop(e){const t=this.Ir;t!==e&&(this.Ir=e,this.t("mouseDrop",t,e))}get handlesDragDropForTopLevelParts(){return this.Ix}set handlesDragDropForTopLevelParts(e){const t=this.Ix;t!==e&&(o.i(e,"boolean",yt,"handlesDragDropForTopLevelParts"),this.Ix=e,this.t("handlesDragDropForTopLevelParts",t,e))}get mouseEnter(){return this.Er}set mouseEnter(e){const t=this.Er;t!==e&&(e!==null&&o.i(e,"function",yt,"mouseEnter"),this.Er=e,this.t("mouseEnter",t,e))}get mouseLeave(){return this.Br}set mouseLeave(e){const t=this.Br;t!==e&&(e!==null&&o.i(e,"function",yt,"mouseLeave"),this.Br=e,this.t("mouseLeave",t,e))}get toolTip(){return this.Ur}set toolTip(e){const t=this.Ur;t!==e&&(this.Ur=e,this.t("toolTip",t,e))}get contextMenu(){return this.Vr}set contextMenu(e){const t=this.Vr;t!==e&&(this.Vr=e,this.t("contextMenu",t,e))}get commandHandler(){return this.HS}set commandHandler(e){this.HS!==e&&(this.HS=e,e.To(this))}get toolManager(){return this.YS}set toolManager(e){this.YS!==e&&(this.YS=e,e.diagram=this)}get defaultTool(){return this.GS}set defaultTool(e){const t=this.GS;t!==e&&(this.GS=e,e.diagram=this,this.currentTool===t&&(this.currentTool=e))}get currentTool(){return this.jS}set currentTool(e){const t=this.jS;t&&(t.isActive&&t.doDeactivate(),t.cancelWaitAfter(),t.doStop()),e===null&&(e=this.defaultTool),e!==null&&(this.jS=e,e.diagram=this,e.doStart())}get selection(){return this._S}get maxSelectionCount(){return this.Qx}set maxSelectionCount(e){const t=this.Qx;if(t!==e)if(o.i(e,"number",yt,"maxSelectionCount"),e>=0&&!isNaN(e)){if(this.Qx=e,this.t("maxSelectionCount",t,e),!this.undoManager.isUndoingRedoing){const n=this.selection.count-e;if(n>0){this.v("ChangingSelection",this.selection);const i=this.selection.toArray();for(let r=0;r<n;r++)i[r].isSelected=!1;this.v("ChangedSelection",this.selection)}}}else o._(e,">= 0",yt,"maxSelectionCount")}get nodeSelectionAdornmentTemplate(){return this.qm}set nodeSelectionAdornmentTemplate(e){const t=this.qm;t!==e&&(this.qm=e,this.t("nodeSelectionAdornmentTemplate",t,e))}get groupSelectionAdornmentTemplate(){return this.ib}set groupSelectionAdornmentTemplate(e){const t=this.ib;t!==e&&(this.ib=e,this.t("groupSelectionAdornmentTemplate",t,e))}get linkSelectionAdornmentTemplate(){return this.eb}set linkSelectionAdornmentTemplate(e){const t=this.eb;t!==e&&(this.eb=e,this.t("linkSelectionAdornmentTemplate",t,e))}get highlighteds(){return this.tM}get isModified(){const e=this.undoManager;return e.isEnabled?e.currentTransaction!==null?!0:this.zu&&this.vs!==e.historyIndex:this.zu}set isModified(e){if(this.zu!==e){o.i(e,"boolean",yt,"isModified"),this.zu=e;const t=this.undoManager;!e&&t.isEnabled&&(this.vs=t.historyIndex),e||this.vL()}}vL(){const e=this.isModified;this.ZS!==e&&(this.ZS=e,this.v("Modified"))}get model(){return this.Si}set model(e){const t=this.Si;if(t!==e){this.currentTool.doCancel(),t&&t.undoManager!==e.undoManager&&t.undoManager.isInTransaction&&o.o("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.stopAnimation(!0);const n=this.gL(!0);this.Jn=!1,this.Ou=!0,this.vs=-2,this.Pr=!1;const i=this.Ht;this.Ht=!0,this.animationManager.Dl("Model"),t&&(this.qn!==null&&this.qn.each(r=>t.removeChangedListener(r)),t.removeChangedListener(this.$S)),this.Si=e,this.partManager=this.cR(this.Si.type),this.initializePartManager(this.partManager);for(let r=0;r<n.length;r++)this.add(n[r]);e.addChangedListener(this.JS),this.partManager.LM(),e.removeChangedListener(this.JS),e.addChangedListener(this.$S),this.qn!==null&&this.qn.each(r=>e.addChangedListener(r)),this.Ht=i,this.invalidateDocumentBounds(),this.Ht||this.C(),t&&e.undoManager.copyProperties(t.undoManager)}}get themeManager(){return this.gb}set themeManager(e){const t=this.gb;t!==e&&(t!==null&&t.removeDiagram(this),this.gb=e,e!==null&&e.addDiagram(this))}initializePartManager(e){}static gM(e,t){yt.hL.set(e,t)}static get licenseKey(){return yt.AM.last()}static set licenseKey(e){yt.AM.add(e.replace(/\s/g,""))}static get version(){return yt.fR}cR(e){const t=yt.hL.get(e);return t!==null?new t:new io}get Y(){return this.WS}set Y(e){this.WS=e}get mx(){return this.oL}uR(e){if(e.model!==this.model)return;const t=e.change,n=e.propertyName;if(t===1&&n[0]==="S"){if(n==="StartingFirstTransaction"){const i=this,r=this.toolManager;r.mouseDownTools.each(a=>a.diagram=i),r.mouseMoveTools.each(a=>a.diagram=i),r.mouseUpTools.each(a=>a.diagram=i),this.routers.each(a=>a.diagram=i),!this.ps&&!this.Jn&&(this.Oc=!0,this.Ou&&(this.Pr=!0))}else if(n==="StartingUndo"||n==="StartingRedo"){const i=this.animationManager;this.skipsUndoManager||(i.defaultAnimation.isAnimating&&i.stopAnimation(),i.getBundleAnimation().isAnimating&&i.getBundleAnimation().stop()),this.v("ChangingSelection",this.selection)}else if(n==="StartedTransaction"){const i=this.animationManager;i.defaultAnimation.isAnimating&&!this.skipsUndoManager&&i.stopAnimation()}return}if(this.Y){this.Y=!1;try{if(e.modelChange===""&&t===1){(n==="FinishedUndo"||n==="FinishedRedo")&&(this.v("ChangedSelection",this.selection),this.Ci());const i=this.animationManager;n==="RolledBackTransaction"&&i.stopAnimation(),this._C(),this.Oc=!0,this.maybeUpdate(),(this.undoManager.transactionLevel===0||this.undoManager.transactionLevel===1)&&i.SS(),n==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.vs=Math.min(this.vs,this.undoManager.historyIndex-1)),(n==="CommittedTransaction"||n==="RolledBackTransaction")&&this.undoManager.Iw&&setTimeout(()=>{this.isModified=!1},1);const r=e.isTransactionFinished;if(r&&(this.vL(),this.mx.clear(),this.animationManager.fF()),!this.Ex&&r&&this.lastInput.targetDiagram){this.Ex=!0;const a=this;o.Oh(()=>{a.currentTool.standardMouseOver(),a.Ex=!1},10)}}}finally{this.Y=!0}}}get fe(){return this.qS}set fe(e){this.qS=e}get dc(){return this.Bx}set dc(e){this.Bx=e}SL(e){const t=e.L.r;for(const n of t)n instanceof Vi&&this.TM(n)}TM(e){const t=e.element;if(t===null||!(t instanceof HTMLImageElement)||(t.es instanceof L&&t.es.add(this),e.dR(),!t.f0))return;const n=t.getAttribute("src")||"",i=this.Wl.get(n);if(i===null){Vi.OL(e,t);const r=[];r.push(e),this.Wl.set(n,r)}else{for(let r=0;r<i.length;r++)if(i[r]===e)return;i.push(e)}}gR(e){const t=e.L.r,n=t.length;for(let i=0;i<n;i++)this.DM(t[i])}DM(e){if(!(e instanceof Vi))return;const t=e.element;if(t===null||!(t instanceof HTMLImageElement)||!t.f0)return;const n=t.getAttribute("src")||"",i=this.Wl.get(n);if(i!==null){for(let r=0;r<i.length;r++)if(i[r]===e){i.splice(r,1),i.length===0&&(this.Wl.delete(n),Vi.mR(t),t.es instanceof L&&t.es.delete(this),Vi.clearCache(n));return}}}mL(){Vi.clearCache(),this.Wl.clear()}rebuildParts(){this.partManager.rebuildParts()}Lc(e,t){this.ds.Lc(e,t)}Cc(e,t){this.ds.Cc(e,t)}findPartForKey(e){return this.partManager.findPartForKey(e)}findNodeForKey(e){return this.partManager.findNodeForKey(e)}findLinkForKey(e){return this.partManager.findLinkForKey(e)}findPartForData(e){return this.partManager.findPartForData(e)}findNodeForData(e){return this.partManager.findNodeForData(e)}findLinkForData(e){return this.partManager.findLinkForData(e)}findNodesByExample(...e){return this.partManager.findNodesByExample(...e)}findLinksByExample(...e){return this.partManager.findLinksByExample(...e)}get nodeTemplate(){return this.zr.get("")}set nodeTemplate(e){const t=this.zr.get("");t!==e&&(this.zr.set("",e),this.t("nodeTemplate",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get nodeTemplateMap(){return this.zr}set nodeTemplateMap(e){const t=this.zr;t!==e&&(this.zr=e,this.t("nodeTemplateMap",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get groupTemplate(){return this.Jh.get("")}set groupTemplate(e){const t=this.Jh.get("");t!==e&&(this.Jh.set("",e),this.t("groupTemplate",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get groupTemplateMap(){return this.Jh}set groupTemplateMap(e){const t=this.Jh;t!==e&&(this.Jh=e,this.t("groupTemplateMap",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get linkTemplate(){return this.Hl.get("")}set linkTemplate(e){const t=this.Hl.get("");t!==e&&(this.Hl.set("",e),this.t("linkTemplate",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get linkTemplateMap(){return this.Hl}set linkTemplateMap(e){const t=this.Hl;t!==e&&(this.Hl=e,this.t("linkTemplateMap",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get isMouseCaptured(){return this.QS}set isMouseCaptured(e){const t=this.dt;if(t===null)return;const n=t.Ft;n instanceof SVGElement||(e?(this.lastInput.bubbles=!1,this.Mi(n,"pointermove",this.ia,!1),this.Mi(n,"pointerdown",this.$l,!1),this.Mi(n,"pointerup",this.ea,!1),this.Mi(n,"pointerout",this.sa,!1),this.Mi(n,"pointercancel",this.na,!1),this.Vt(s,"pointermove",this.ia,!0),this.Vt(s,"pointerdown",this.$l,!0),this.Vt(s,"pointerup",this.ea,!0),this.Vt(s,"pointerout",this.sa,!0),this.Vt(s,"pointercancel",this.na,!0),this.Mi(n,"wheel",this.ta,!1),this.Vt(s,"wheel",this.ta,!0),this.Vt(s,"selectstart",this.Yh,!1)):(this.Mi(s,"pointermove",this.ia,!0),this.Mi(s,"pointerdown",this.$l,!0),this.Mi(s,"pointerup",this.ea,!0),this.Mi(s,"pointerout",this.sa,!0),this.Mi(s,"pointercancel",this.na,!0),this.Vt(n,"pointermove",this.ia,!1),this.Vt(n,"pointerdown",this.$l,!1),this.Vt(n,"pointerup",this.ea,!1),this.Vt(n,"pointerout",this.sa,!1),this.Vt(n,"pointercancel",this.na,!1),this.Mi(s,"wheel",this.ta,!0),this.Mi(s,"selectstart",this.Yh,!1),this.Vt(n,"wheel",this.ta,!1)),this.QS=e)}get position(){return this.at}set position(e){if(this.at.equals(e))return;const t=T.l().a(this.at),n=this.viewportBounds.copy();if(this.at.a(e),this.animationManager.$C(t,this.at),!this.Ht&&!(this.dt===null&&!this.Uu.isReal())){this.Ht=!0;const i=this.scale,r=this.kt/i,a=this.Pt/i;this.wM(this.Hm,r,a,this.Rc,!1),this.Ht=!1}else this.Zl(),this.pb();if(!this.Ht){const i=this.viewportBounds;this.onViewportBoundsChanged(n,i,this.et,!1)}T.s(t)}get initialPosition(){return this.xx}set initialPosition(e){this.xx.equals(e)||(this.xx=e.N())}get initialScale(){return this.bx}set initialScale(e){this.bx!==e&&(o.i(e,"number",yt,"initialScale"),this.bx=e)}get grid(){return this.ts===null&&(this.ts=this.yL()),this.ts}set grid(e){let t=this.ts;if(t!==e){t===null&&(this.ts=this.yL(),t=this.ts),e.type!==Kt.Grid&&o.o("Diagram.grid must be a Panel of type Panel.Grid");const n=t.panel;n!==null&&n.remove(t),this.ts=e,e.name="GRID",n!==null&&n.add(e),this.Vu=!1,this.C(),this.t("grid",t,e)}}get viewportBounds(){return this._x}Zl(){const e=this._x,t=this.at,n=this.et;e.e(t.x,t.y,Math.max(this.kt,0)/n,Math.max(this.Pt,0)/n),this.Ql()}get viewSize(){return this.Uu}set viewSize(e){const t=this.viewSize;if(!t.equals(e)){e=e.N(),this.Uu=e;let n=0,i=0;e.isReal()?(n=e.width,i=e.height):this.Tt!==null&&(n=this.Tt.clientWidth||1,i=this.Tt.clientHeight||1),this.kt=n,this.Pt=i,this.Zl(),this.invalidateDocumentBounds(),this.t("viewSize",t,e),this.C()}}get fixedBounds(){return this.Mx}set fixedBounds(e){const t=this.Mx;t.equals(e)||((e.width===-1/0||e.height===1/0||e.height===-1/0)&&o.o("fixedBounds width/height must not be Infinity"),e=e.N(),this.Mx=e,this.invalidateDocumentBounds(),this.t("fixedBounds",t,e))}get scrollMargin(){return this.Fc}set scrollMargin(e){typeof e=="number"&&(e=new tt(e));const t=this.Fc;t.equals(e)||(e=e.N(),this.Fc=e,this.t("scrollMargin",t,e),this.wu())}get scrollMode(){return this.jh}set scrollMode(e){const t=this.jh;t!==e&&(this.jh=e,e===1&&this.Us(!1),this.t("scrollMode",t,e),this.ra(),this.C())}get scrollsPageOnFocus(){return this.Nx}set scrollsPageOnFocus(e){const t=this.Nx;t!==e&&(o.i(e,"boolean",yt,"scrollsPageOnFocus"),this.Nx=e,this.t("scrollsPageOnFocus",t,e))}get positionComputation(){return this.Cx}set positionComputation(e){const t=this.Cx;t!==e&&(e!==null&&o.i(e,"function",yt,"positionComputation"),this.Cx=e,this.Us(!1),this.t("positionComputation",t,e))}get scaleComputation(){return this.Lx}set scaleComputation(e){const t=this.Lx;t!==e&&(e!==null&&o.i(e,"function",yt,"scaleComputation"),this.Lx=e,this.RL(this.scale,this.scale),this.t("scaleComputation",t,e))}get documentBounds(){return this.Hm}IL(e){this.Zh=!1;let t=this.Hm;t.equals(e)||(t=t.copy(),this.Hm.a(e),this.Us(!1),this.v("DocumentBoundsChanged",void 0,t),this.ra(),this.C())}ensureBounds(){if(this.Zh){const e=I.l();this.IL(this.computeBounds(e)),I.s(e)}}get isVirtualized(){return this.tb}set isVirtualized(e){const t=this.tb;t!==e&&(o.i(e,"boolean",yt,"isVirtualized"),this.tb=e,this.t("isVirtualized",t,e))}get scale(){return this.et}set scale(e){const t=this.et;t!==e&&this.RL(t,e)}get defaultScale(){return this.$m}set defaultScale(e){this.$m=e}get autoScale(){return this.Gl}set autoScale(e){const t=this.Gl;t!==e&&(this.Gl=e,this.t("autoScale",t,e),e!==1&&this.Us(!1))}get initialAutoScale(){return this.Cr}set initialAutoScale(e){const t=this.Cr;t!==e&&(this.Cr=e,this.t("initialAutoScale",t,e))}get initialViewportSpot(){return this.Tx}set initialViewportSpot(e){const t=this.Tx;t!==e&&(e.isSpot()||o.o("initialViewportSpot must be a specific Spot: "+e),this.Tx=e,this.t("initialViewportSpot",t,e))}get initialDocumentSpot(){return this.Ax}set initialDocumentSpot(e){const t=this.Ax;t!==e&&(e.isSpot()||o.o("initialViewportSpot must be a specific Spot: "+e),this.Ax=e,this.t("initialDocumentSpot",t,e))}get minScale(){return this.kx}set minScale(e){const t=this.kx;t!==e&&(e>0?(this.kx=e,this.t("minScale",t,e),e>this.scale&&(this.scale=e)):o._(e,"> 0",yt,"minScale"))}get maxScale(){return this.Px}set maxScale(e){const t=this.Px;t!==e&&(e>0?(this.Px=e,this.t("maxScale",t,e),e<this.scale&&(this.scale=e)):o._(e,"> 0",yt,"maxScale"))}get zoomPoint(){return this.Sx}set zoomPoint(e){this.Sx.equals(e)||(e=e.N(),this.Sx=e)}get contentAlignment(){return this.Rc}set contentAlignment(e){const t=this.Rc;t.equals(e)||(e=e.N(),this.Rc=e,this.t("contentAlignment",t,e),this.Us(!1))}get initialContentAlignment(){return this.zm}set initialContentAlignment(e){const t=this.zm;t.equals(e)||(e=e.N(),this.zm=e,this.t("initialContentAlignment",t,e))}get padding(){return this.$t}set padding(e){typeof e=="number"&&(e=new tt(e));const t=this.$t;t.equals(e)||(e=e.N(),this.$t=e,this.invalidateDocumentBounds(),this.t("padding",t,e))}get partManager(){return this.oM}set partManager(e){const t=this.oM;t!==e&&(e.diagram!==null&&o.o("Cannot share PartManagers between Diagrams: "+e.toString()),t&&t.To(null),this.oM=e,e.To(this))}get nodes(){return this.partManager.nodes.iterator}get links(){return this.partManager.links.iterator}get parts(){return this.partManager.parts.iterator}findTopLevelNodesAndLinks(){const e=new L,t=this.nodes;for(;t.next();){const i=t.value;i.isTopLevel&&e.add(i)}const n=this.links;for(;n.next();){const i=n.value;i.isTopLevel&&e.add(i)}return e.iterator}findTopLevelGroups(){return this.Yr.iterator}get routers(){return this.zc}doLinkRouting(e){this.Fo=!0;const t=this.zc.r;for(let n=0;n<t.length;n++)t[n].canRoute(e)&&t[n].routeLinks(this.Lr,e);this.Fo=!1}get layout(){return this.ie}set layout(e){const t=this.ie;t!==e&&(this.ie=e,e.diagram=this,e.group=null,this.Kr=!0,this.t("layout",t,e),this.requestUpdate())}layoutDiagram(e){this.Ci(),e&&this.bb(!0),this.ps?this.kM(!1,this.xl||this.zc.count!==0&&this.Hn.size!==0):(this.Oc=!0,this.yr())}bb(e){const t=this.Yr.iterator;for(;t.next();)this.EL(t.value,e);this.layout&&(e?this.layout.isValidLayout=!1:this.layout.invalidateLayout())}EL(e,t){if(e===null)return;const n=e.la.iterator;for(;n.next();){const i=n.value;this.EL(i,t)}e.layout!==null&&(t?e.layout.isValidLayout=!1:e.layout.invalidateLayout())}kM(e,t){if(this.Ux)return;const n=this.Y;this.Y=!0;const i="Layout",r=this.undoManager.transactionLevel,a=this.layout,l=this.animationManager;try{r===0&&(this.undoManager.wl=!0,this.startTransaction(i)),r<=1&&!l.defaultAnimation.isAnimating&&!l.wi&&(e||l.Dl(i)),this.Kr=!1;let u=this.Yr.iterator;for(;u.next();)this.BL(u.value,e,r,t);let c=!1;if(a.isValidLayout||(!e||a.isRealtime||a.isRealtime===null||r===0?(a.doLayout(this),this.l0(this),c=!0,a.isValidLayout=!0):this.Kr=!0),c||this.l0(this),this.doLinkRouting(this),this.Lr.clear(),this.Wh.size!==0){for(let f=0;f<23&&this.Wh.size!==0;f++){for(u=this.Yr.iterator;u.next();)this.UL(u.value);const m=this.Lr;this.Lr=this.Wh,this.Wh=m,this.l0(this),this.doLinkRouting(this)}this.Lr.clear(),this.Wh.clear()}}finally{const u=this.undoManager.wl;r===0&&(this.commitTransaction(i),this.undoManager.wl=!1),u&&(r===0||r===1)&&l.SS(),this.Kr&&(this.Kr=!a.isValidLayout),this.Y=n}}BL(e,t,n,i){const r=e.la.iterator;for(;r.next();)this.BL(r.value,t,n,i);const a=e.layout;a!==null&&!a.isValidLayout?!t||a.isRealtime||n===0?(e.Wr=!e.location.isReal(),a.doLayout(e),e.invalidateLayout(32),this.yb(e),this.l0(e),this.doLinkRouting(e),a.isValidLayout=!0):(this.doLinkRouting(e),this.Kr=!0):i&&this.doLinkRouting(e)}UL(e){const t=e.la.iterator;for(;t.next();)this.UL(t.value);this.l0(e),this.doLinkRouting(e)}get isTreePathToChildren(){return this.Dx}set isTreePathToChildren(e){const t=this.Dx;if(t!==e&&(o.i(e,"boolean",yt,"isTreePathToChildren"),this.Dx=e,this.t("isTreePathToChildren",t,e),!this.undoManager.isUndoingRedoing)){const n=this.nodes;for(;n.next();)n.value.u0()}}findTreeRoots(){const e=new M,t=this.nodes;for(;t.next();){const n=t.value;n.isTopLevel&&n.findTreeParentLink()===null&&e.add(n)}return e.iterator}get treeCollapsePolicy(){return this.Fx}set treeCollapsePolicy(e){const t=this.Fx;t!==e&&(e!==1&&e!==2&&e!==3&&o.o("Unknown Diagram.treeCollapsePolicy: "+e),this.Fx=e,this.t("treeCollapsePolicy",t,e))}get isCollapsingExpanding(){return this.KS}set isCollapsingExpanding(e){this.KS=e}BF(){const e=new W,t=new W;function n(i){const r=i.toLowerCase(),a=new M;e.set(i,a),e.set(r,a),t.set(i,i),t.set(r,i)}n("InitialAnimationStarting"),n("AnimationStarting"),n("AnimationFinished"),n("BackgroundSingleClicked"),n("BackgroundDoubleClicked"),n("BackgroundContextClicked"),n("ClipboardChanged"),n("ClipboardPasted"),n("DocumentBoundsChanged"),n("ExternalObjectsDropped"),n("GainedFocus"),n("InitialLayoutCompleted"),n("LayoutCompleted"),n("LinkDrawn"),n("LinkRelinked"),n("LinkReshaped"),n("LostFocus"),n("Modified"),n("ObjectSingleClicked"),n("ObjectDoubleClicked"),n("ObjectContextClicked"),n("PartCreated"),n("PartResized"),n("PartRotated"),n("SelectionMoved"),n("SelectionCopied"),n("SelectionDeleting"),n("SelectionDeleted"),n("SelectionGrouped"),n("SelectionUngrouped"),n("ChangingSelection"),n("ChangedSelection"),n("SubGraphCollapsed"),n("SubGraphExpanded"),n("TextEdited"),n("ThemeChanged"),n("TreeCollapsed"),n("TreeExpanded"),n("ViewportBoundsChanged"),n("InvalidateDraw"),this.zS=e,this.XS=t}PL(e){const t=this.XS.get(e);return t!==null?t:this.XS.get(e.toLowerCase())}FM(e){let t=this.zS.get(e);if(t!==null)return t;const n=e.toLowerCase();if(t=this.zS.get(n),t!==null)return t;o.o("Unknown DiagramEvent name: "+e)}addDiagramListener(e,t){o.i(e,"string",yt,"addDiagramListener:name"),o.i(t,"function",yt,"addDiagramListener:listener");const n=this.FM(e);return n!==null&&n.add(t),this}removeDiagramListener(e,t){o.i(e,"string",yt,"removeDiagramListener:name"),o.i(t,"function",yt,"addDiagramListener:listener");const n=this.FM(e);n!==null&&n.delete(t)}raiseDiagramEvent(e,t,n){this.v(e,t,n)}v(e,t,n){const i=this.FM(e),r=new Zt;r.diagram=this;const a=this.PL(e);a!==null&&(r.name=a),t!==void 0&&(r.subject=t),n!==void 0&&(r.parameter=n);const l=i.length;if(l===1)i.elt(0)(r);else if(l!==0){const u=i.toArray();for(let c=0;c<l;c++){const f=u[c];f(r)}}}isUnoccupied(e,t){return this.getPositions(!1,null,t||null).isUnoccupied(e.x,e.y,e.width,e.height)}computeOccupiedArea(e){return this.isVirtualized?this.viewportBounds.copy():this.Zh?this.xL(e):e.a(this.documentBounds)}getPositions(e,t,n){let i=this.jl;i===null&&(this.jl=i=new sr(this.avoidanceCellSize));let r=t;if(i.Eo||i.ha!==r||i.RM!==n){if(i.vM=Math.max(i.Gc+1,Math.floor(this.avoidanceLimit/this.avoidanceCellSize.width)),i.OM=Math.max(i.Gc+1,Math.floor(this.avoidanceLimit/this.avoidanceCellSize.height)),r!==null&&(r=this.VL(r)),r===null){const a=I.l();this.computeOccupiedArea(a),a.inflate(100,100),i.kb(a);const l=this.nodes;for(;l.next();){const u=l.value,c=u.layer;c===null||!c.visible||c.isTemporary||this.IM(u,n,a)}I.s(a)}else{if(r.memberParts.count>0){const u=this.computePartsBounds(r.memberParts,!1);u.inflate(20,20),i.kb(u)}const a=I.l(),l=r.memberParts;for(;l.next();){const u=l.value;u instanceof It&&this.IM(u,n,a)}I.s(a)}i.ha=r,i.RM=n,i.Eo=!1}else e&&i.zL();return i}get avoidanceCellSize(){return this.iM}set avoidanceCellSize(e){this.jl=null,this.iM=new B(Math.max(1,e.width),Math.max(1,e.height))}get avoidanceLimit(){return this.eM}set avoidanceLimit(e){this.eM=Math.max(1,e)}VL(e){return e.canAvoid()?e:e.containingGroup!==null?this.VL(e.containingGroup):null}IM(e,t,n){if(e===t||!e.isVisible())return;const i=e.canAvoid();if(i){const r=e.getAvoidableRect(n);this.jl.pR(r.x,r.y,r.width,r.height)}if(e instanceof Vt&&(!i||e.avoidableMembers)){const r=e.memberParts;for(;r.next();){const a=r.value;a instanceof It&&this.IM(a,t,n)}}}EM(e){this.jl!==null&&!this.jl.Eo&&(e===void 0||e.canAvoid())&&(this.jl.Eo=!0)}get autoScrollInterval(){return this.Xm}set autoScrollInterval(e){const t=this.Xm;t!==e&&(this.Xm=e,this.t("autoScrollInterval",t,e))}get autoScrollRegion(){return this.Km}set autoScrollRegion(e){typeof e=="number"&&(e=new tt(e));const t=this.Km;t.equals(e)||(e=e.N(),this.Km=e,this.invalidateDocumentBounds(),this.t("autoScrollRegion",t,e))}doAutoScroll(e){this.Wm.a(e),this.computeAutoScrollPosition(this.Wm).equalsApprox(this.position)?this.stopAutoScroll():this.XL()}XL(){if(this.vc!==-1)return;const e=this.Xm,t=this;this.vc=o.Oh(()=>{if(t.vc===-1||(t.stopAutoScroll(),t.lastInput.event===null))return;const n=t.computeAutoScrollPosition(t.Wm);if(n.equalsApprox(t.position))return;t.position=n,t.lastInput.documentPoint=t.transformViewToDoc(t.Wm),t.doMouseMove(),t.Zh=!0;const i=I.l();t.computeBounds(i),i.unionRect(t.documentBounds),t.IL(i),I.s(i),t.Ue=!0,t.maybeUpdate(),t.XL()},e)}stopAutoScroll(){this.vc!==-1&&(o.Eg(this.vc),this.vc=-1)}computeAutoScrollPosition(e){let t=this.position;const n=this.Km;if(n.top<=0&&n.left<=0&&n.right<=0&&n.bottom<=0)return t;const i=this.viewportBounds,r=this.scale,a=I.X(0,0,i.width*r,i.height*r),l=T.X(0,0);if(e.x>=a.x&&e.x<a.x+n.left&&this.allowHorizontalScroll){let u=Math.max(this.scrollHorizontalLineChange,1);u=u|0,l.x-=u,e.x<a.x+n.left/2&&(l.x-=u),e.x<a.x+n.left/4&&(l.x-=4*u)}else if(e.x<=a.x+a.width&&e.x>a.x+a.width-n.right&&this.allowHorizontalScroll){let u=Math.max(this.scrollHorizontalLineChange,1);u=u|0,l.x+=u,e.x>a.x+a.width-n.right/2&&(l.x+=u),e.x>a.x+a.width-n.right/4&&(l.x+=4*u)}if(e.y>=a.y&&e.y<a.y+n.top&&this.allowVerticalScroll){let u=Math.max(this.scrollVerticalLineChange,1);u=u|0,l.y-=u,e.y<a.y+n.top/2&&(l.y-=u),e.y<a.y+n.top/4&&(l.y-=4*u)}else if(e.y<=a.y+a.height&&e.y>a.y+a.height-n.bottom&&this.allowVerticalScroll){let u=Math.max(this.scrollVerticalLineChange,1);u=u|0,l.y+=u,e.y>a.y+a.height-n.bottom/2&&(l.y+=u),e.y>a.y+a.height-n.bottom/4&&(l.y+=4*u)}return l.equalsApprox(T.Po)||(t=new T(t.x+l.x/r,t.y+l.y/r)),I.s(a),T.s(l),t}makeSvg(e){this.ql.has("SVG")||this.addRenderer("SVG",new ze(this,s.document));const t=new ze(this,s.document,!0);e===void 0&&(e={});const n=this;function i(r,a){const l=n.KL(r,"SVG",t),u=l!==null?l.svg:null;return typeof a=="function"?(a(u),null):u}return this.YL(i,e)}makeSVG(e){return this.makeSvg(e)}addRenderer(e,t){this.ql.set(e,t)}removeRenderer(e){this.ql.delete(e)}cacheGroupExternalLinks(e){this.dM=e,e||this.nodes.each(t=>{t instanceof Vt&&(t.d0=null)})}YL(e,t){const n=t.callback;let i=!0;const r=this.Wl.iterator;for(;r.next();)if(!r.value[0].mn){i=!1;break}if(typeof n!="function"||i)return e(t,n,this);const a=this;function l(){const f=+new Date;for(i=!0,r.reset();r.next();)if(!r.value[0].mn){i=!1;break}if(i||f-c>u){e(t,n,a);return}s.requestAnimationFrame(l)}const u=t.callbackTimeout||300,c=+new Date;return s.requestAnimationFrame(()=>l()),null}makeImage(e){return yt.isUsingDOM()?(e===void 0&&(e={}),e.returnType="Image",this.makeImageData(e)):null}makeImageData(e){return e===void 0&&(e={}),this.YL(this.yR,e)}yR(e,t,n){const i=n.KL(e,"canvas",null);if(i===null)return null;const r=i.U.canvas;let a=null;if(r!==null){let l=e.returnType;switch(l===void 0?l="string":l=l.toLowerCase(),l){case yt.img+"data":a=i.getImageData(0,0,r.width,r.height);break;case yt.img:const u=(e.document||document).createElement("img");u.src=r.toDataURL(e.type,e.details),a=u;break;case"blob":{const c=r;return typeof t!="function"&&(a="",o.o('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.')),typeof c.toBlob=="function"?(c.toBlob(t,e.type,e.details),"toBlob"):(t(null),null)}case"string":default:a=r.toDataURL(e.type,e.details)}}return typeof t=="function"?(t(a),null):a}KL(e,t,n){if(this.animationManager.stopAnimation(),this.maybeUpdate(),this.dt===null)return null;typeof e!="object"&&o.o("properties argument must be an Object.");let i=!1,r=e.size||null,a=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(a="NaN");let l=e.maxSize;e.maxSize===void 0&&(i=!0,t==="SVG"?l=new B(1/0,1/0):l=new B(2e3,2e3));const u=e.position||null;let c=e.parts||null;Array.isArray(c)&&(c=new M(c));let f=e.padding===void 0?1:e.padding;const m=e.background||null;let p=e.omitTemporary;p===void 0&&(p=!0);const y=e.document||document,w=e.elementFinished||null;let b=e.showTemporary;b===void 0&&(b=!p);let C=e.showGrid;C===void 0&&(C=b),r!==null&&isNaN(r.width)&&isNaN(r.height)&&(r=null),typeof f=="number"?f=new tt(f):f instanceof tt||o.o("MakeImage padding must be a Margin or a number."),f.left=Math.max(f.left,0),f.right=Math.max(f.right,0),f.top=Math.max(f.top,0),f.bottom=Math.max(f.bottom,0),this.Zt.clearContextCache(!0);const k=new wn(null,y,void 0,!0),N=k.ai;if(!(r||a||c||u))return k.width=this.kt+Math.ceil(f.left+f.right),k.height=this.Pt+Math.ceil(f.top+f.bottom),t==="SVG"?n===null?null:(n.resize(k.width,k.height,k.width,k.height),n.aa=y,n.Hu=w,this.wb(n.ai,f,new B(k.width,k.height),this.et,this.at,c,m,b,C),n.ai):(this.Xu=!1,this.wb(N,f,new B(k.width,k.height),this.et,this.at,c,m,b,C),this.Xu=!0,k.ai);const F=this.$m,D=this.documentBounds.copy();if(D.subtractMargin(this.$t),b){const Q=this.Gt.r,Z=Q.length;for(let et=0;et<Z;et++){const st=Q[et];if(!st.visible||!st.isTemporary)continue;const ut=st.At.r,mt=ut.length;for(let at=0;at<mt;at++){const vt=ut[at];if(!vt.isInDocumentBounds||!vt.isVisible())continue;const Nt=vt.actualBounds;Nt.isReal()&&D.unionRect(Nt)}}}let E=new T(D.x,D.y);if(c!==null){const Q=new I(0,0,0,0);let Z=!0;const et=c.iterator;for(et.reset();et.next();){const st=et.value;if(!(st instanceof xe))continue;const ut=st.layer;if(ut!==null&&!ut.visible||ut!==null&&!b&&ut.isTemporary||!st.isVisible())continue;const mt=st.actualBounds;mt.isReal()&&(Z?(Z=!1,Q.a(mt)):Q.unionRect(mt))}D.width=Q.width,D.height=Q.height,E.x=Q.x,E.y=Q.y}u!==null&&u.isReal()&&(E=u,a||(a=F));let U=0,$=0;f!==null&&(U=f.left+f.right,$=f.top+f.bottom);let K=0,_=0;r!==null&&(K=r.width,_=r.height,isFinite(K)&&(K=Math.max(0,K-U)),isFinite(_)&&(_=Math.max(0,_-$)));let G=0,X=0;if(r!==null&&a!==null?(a==="NaN"&&(a=F),r.isReal()?(G=K,X=_):isNaN(_)?(G=K,X=D.height*a):(G=D.width*a,X=_)):r!==null?r.isReal()?(a=Math.min(K/D.width,_/D.height),G=K,X=_):isNaN(_)?(a=K/D.width,G=K,X=D.height*a):(a=_/D.height,G=D.width*a,X=_):a!==null?a==="NaN"&&l.isReal()?(a=Math.min((l.width-U)/D.width,(l.height-$)/D.height),a>F?(a=F,G=D.width,X=D.height):(G=l.width,X=l.height)):(G=D.width*a,X=D.height*a):(a=F,G=D.width,X=D.height),f!==null?(G+=U,X+=$):f=new tt(0),l!==null){let Q=l.width,Z=l.height;t!=="SVG"&&i&&yt.wR,isNaN(Q)&&(Q=2e3),isNaN(Z)&&(Z=2e3),isFinite(Q)&&(G=Math.min(G,Q)),isFinite(Z)&&(X=Math.min(X,Z))}return k.width=Math.ceil(G),k.height=Math.ceil(X),t==="SVG"?n===null?null:(n.resize(k.width,k.height,k.width,k.height),n.aa=y,n.Hu=w,this.wb(n.ai,f,new B(Math.ceil(G),Math.ceil(X)),a,E,c,m,b,C),n.ai):(this.Xu=!1,this.wb(N,f,new B(Math.ceil(G),Math.ceil(X)),a,E,c,m,b,C),this.Xu=!0,k.ai)}};v(yt,"hb",null),v(yt,"hL",new W),v(yt,"cM"),v(yt,"fM",null),v(yt,"uL",s.document!==void 0),v(yt,"Ve",new WeakMap),v(yt,"s0",null),v(yt,"mb",""),v(yt,"None",1),v(yt,"Uniform",2),v(yt,"UniformToFill",3),v(yt,"CycleAll",1),v(yt,"CycleNotDirected",2),v(yt,"CycleNotDirectedFast",3),v(yt,"CycleNotUndirected",4),v(yt,"CycleDestinationTree",5),v(yt,"CycleSourceTree",6),v(yt,"DocumentScroll",1),v(yt,"InfiniteScroll",2),v(yt,"TreeParentCollapsed",1),v(yt,"AllParentsCollapsed",2),v(yt,"AnyParentsCollapsed",3),v(yt,"AM",new M),v(yt,"fR","3.0.13"),v(yt,"img","image"),v(yt,"wR",!1),v(yt,"Gu",null),v(yt,"GL","5da73c80a36555d4038e4972187c3cae51fd22"),v(yt,"uw",!1),v(yt,"Ik",()=>{if(yt.GL[5]===void 0&&(nt.prototype._e=nt.prototype.ww),!yt.isUsingDOM())return;const e=s.document.createElement("canvas"),t=e.getContext("2d"),n=o.Cs("7ca11abfd022028846");t[n]=o.Cs("398c3597c01238");const i="7ca11abfd7330390",r=[yt.GL,o.uw+"4ae6247590da4bb21c324ba3a84e385776",nt.Ik+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",R.za],a=10,l=0;for(let u=1;u<5;u++)t[o.Cs(i)](o.Cs(r[u-1]),a,u*15+l);t[n]=o.Cs("39f046ebb36e4b");for(let u=1;u<5;u++)t[o.Cs(i)](o.Cs(r[u-1]),a,u*15+l);(r.length!==4||r[0][0]!=="5"||r[3][0]!=="7")&&(nt.prototype._e=nt.prototype.ww),yt.Gu=e});let le=yt;class Oo{constructor(e){v(this,"jL");v(this,"HL");v(this,"BM");v(this,"Ne");if(this.jL=null,this.HL="63ad05bbe23a1786468a4c741b6d2",this.BM="@onz",this.HL===this._tk){this.BM=!0,this.Ne=this.BM;return}this.Ne=null}xR(e,t){let n="f";const i=s[o.Cs("76a715b2f73f148a")][o.Cs("72ba13b5")]||"",r=o.Cs;if(this.Ne=!0,!le.isUsingDOM())return;let a=le[r("76a115b6ed251eaf4692")];if(!a){const u=i[r("76ad18b4f73e")];for(let f=i[r("73a612b6fb191d")](r("35e7"))+2;f<u;f++)n+=i[f];const c=n[r("73a612b6fb191d")](r("7da71ca0ad381e90"));this.Ne=!(c>=0&&c<n[r("73a612b6fb191d")](r("35")));return}const l=le.AM.iterator;for(;l.next();){a=l.value;const u=r(a).split(r("39e9"));if(u.length<6)return;const c=r(u[1]).split(".");if(u[4]!=="7da71ca0")return;const f=r(o[r("6cae19")]).split(".");if(!(c[0]>f[0]||c[0]===f[0]&&c[1]>=f[1]))continue;const m="73a612b6fb191d",p=s[r("74a900bae4370f8b51")][r("6fbb13a1c2311e8a57")].toLowerCase(),y=p[r(m)](r("3aad1ab6e022098b4dc4")),w=r(u[2]);if(y>-1){const G=p[r(m)](w.toLowerCase()+"/");if(this.Ne=!(G>-1&&G<y),!this.Ne)return}const b=i[r("76ad18b4f73e")];for(let G=i[r(m)](r("35e7"))+2;G<b;G++)n+=i[G];let C=n[r(m)](w);if(C<0&&w!==r("7da71ca0ad381e90")&&(C=n[r(m)](r("76a715b2ef3e149757"))),C<0&&(C=n[r(m)](r("76a715b2ef3e149757"))),C<0&&(C=n[r(m)](r("2bfa41fdb3784bca12"))),C<0&&(C=i[r(m)](r("7baa19a6f76c1988428554"))),this.Ne=!(C>=0&&C<n[r(m)](r("35"))||n[r(m)](r("35"))===-1),!this.Ne||i[r(m)](r("7fb002b6ed25128b4da25b2e"))&&(this.Ne=!(i[r(m)](w)>-1),!this.Ne))return;const k=s[o.Cs("76a715b2f73f148a")][o.Cs("69ad17a1e03e")],N=k[r(m)](r("7fb002b6ed25128b4da25b2e"));if(N>-1&&(this.Ne=!(k[r(m)](w)>N),!this.Ne))return;const F=w;if(F[0]!=="#")continue;const D=s.document.createElement("div");let E=u[0].replace(/[A-Za-z]/g,"");for(;E.length<4;)E+="9";const U=E;E=E.substring(E.length-4);let $="";const K=["gsh","gsf"],_=["Header","Background","Display","Feedback"];if($+=K[parseInt(E.substring(0,1),10)%2],$+=_[parseInt(E.substring(0,1),10)%4],D[r("79a417a0f0181a8946")]=$,s.document[r("78a712aa")]){s.document[r("78a712aa")][r("7bb806b6ed32388c4a875b")](D);const G=s.getComputedStyle(D).getPropertyValue(r("78a704b7e62456904c9b12701b6532a8")),X=s.getComputedStyle(D).getPropertyValue(r("75b817b0ea2202"));if(s.document[r("78a712aa")][r("68ad1bbcf533388c4a875b")](D),!G)continue;const Q=s[r("77a902b0eb1b1e804a8a")],Z="0."+parseInt(U,10)%100;if(X===Z||G.indexOf(parseInt(F[1]+F[2],16))!==-1&&G.indexOf(parseInt(F[3]+F[4],16))!==-1){this.Ne=!1;return}else if(Q&&Q(r("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches){$="."+$;for(let et=0;et<document.styleSheets.length;et++){const st=document.styleSheets[et].rules||document.styleSheets[et].cssRules;for(const ut in st)if($===st[ut].selectorText){this.Ne=!1;return}}}}else this.Ne=null,t&&(this.Ne=!1)}}Gu(e){return e.Zt.setTransform(e.Vi,0,0,e.Vi,0,0),e.Zt.commitTransform(),this.Ne===null&&this.xR(e,!0),0<this.Ne&&this!==this.jL}}class bs{constructor(e){v(this,"UM");v(this,"VM");this.UM=e===void 0?new T:e,this.VM=new T}get point(){return this.UM}set point(e){this.UM=e}get shifted(){return this.VM}set shifted(e){this.VM=e}}class $a{constructor(e,t,n){v(this,"de");v(this,"LL");v(this,"xb");this.de=e,this.LL=t,this.xb=n}}class wr{constructor(e){v(this,"isGridSnapEnabled");v(this,"isGridSnapRealtime");v(this,"gridSnapCellSize");v(this,"gridSnapCellSpot");v(this,"gridSnapOrigin");v(this,"dragsLink");v(this,"dragsTree");v(this,"groupsSnapMembers");v(this,"groupsAlwaysMove");v(this,"dragsMembers");this.Ri(),e&&Object.assign(this,e)}Ri(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new B(NaN,NaN).g(),this.gridSnapCellSpot=z.TopLeft,this.gridSnapOrigin=new T(NaN,NaN).g(),this.dragsLink=!1,this.dragsTree=!1,this.groupsSnapMembers=!1,this.groupsAlwaysMove=!0,this.dragsMembers=!0}}class xn extends le{constructor(e,t){let n;return e===void 0||typeof e=="string"||s.Element&&e instanceof Element?n=e:typeof e=="object"&&(t=e),super(n),this.qL(),t&&this.setProperties(t),this}qL(){this.allowDragOut=!0,this.allowMove=!1,this.isReadOnly=!0,this.contentAlignment=z.TopCenter,this.layout=new xh}setupRouters(){}reset(){super.reset(),this.qL()}}class ln extends le{constructor(t,n){let i;t===void 0||typeof t=="string"||s.Element&&t instanceof Element?i=t:typeof t=="object"&&(n=t);super(i);v(this,"Pb");v(this,"Sb");v(this,"Mb");v(this,"Nb");v(this,"g0");v(this,"jc");v(this,"Ll");v(this,"zM");v(this,"XM");v(this,"Cb");v(this,"KM");return this.animationManager.isEnabled=!1,this.Ht=!0,this.Pb=null,this.Iu=!1,this.Eu=!1,this.Sb=!0,this.Mb=!0,this.Nb=0,this.g0=!1,this.jc=null,this.setRenderingHint("drawShadows",!1),this.Ll=new xe({selectable:!0,selectionAdorned:!1,selectionObjectName:"BOXSHAPE",locationObjectName:"BOXSHAPE",resizeObjectName:"BOXSHAPE",cursor:"move"}).add(new Qt({name:"BOXSHAPE",fill:"transparent",stroke:"magenta",strokeWidth:2}).theme("stroke","overviewBox")).li(),this.allowCopy=!1,this.allowDelete=!1,this.allowDrop=!1,this.allowSelect=!0,this.autoScrollRegion=new tt(0,0,0,0),this.at.e(0,0),this.toolManager.Jt("Dragging",new Nn,this.toolManager.mouseMoveTools),this.click=()=>{const r=this.observed;if(r===null)return;const a=r.viewportBounds,l=this.lastInput.documentPoint;r.position=new T(l.x-a.width/2,l.y-a.height/2)},this.zM=r=>{this.invalidateDocumentBounds(),this.m0()},this.XM=r=>{this.observed!==null&&(this.invalidateDocumentBounds(),this.C())},this.Cb=r=>{this.updateDelay<1?this.C():this.g0||(this.g0=!0,setTimeout(()=>this.redraw(),this.updateDelay))},this.KM=r=>{this.observed!==null&&this.m0()},this.autoScale=2,this.Ht=!1,n&&Object.assign(this,n),this}setupRouters(){}computePixelRatio(){return 1}redraw(){this.g0&&this.updateDelay>=1&&(this.g0=!1,this.bR()),super.redraw()}Bi(){if(this.Tt===null&&o.o("No div specified"),this.dt===null&&o.o("No canvas specified"),this.dt instanceof ze||(this.box.US(),!this.Ue))return;const t=this.observed;if(t===null||t.animationManager.defaultAnimation.isAnimating||!t.Bh)return;this.h0();const n=this.dt,i=this.Zt;if(i.clearContextCache(!0),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,n.width,n.height),this.updateDelay<1)this.WL();else if(this.jc!==null){i.drawImage(this.jc.Ft,0,0);const l=this.D;i.scale(this.Vi,this.Vi),i.transform(l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),i.commitTransform()}const r=this.Gt.r,a=r.length;for(let l=0;l<a;l++)r[l].Bi(i,this);this.Ec=!1,this.Ue=!1}bR(){const t=this.dt,n=this.Zt;if(!(t===null||n===null)){if(this.h0(),this.jc===null){const i=new wn(null);i.width=t.width,i.height=t.height,this.jc=i}try{this.dt=this.jc,this.Zt=this.dt.ai,this.Zt.clearContextCache(!0),this.Zt.setTransform(1,0,0,1,0,0),this.Zt.clearRect(0,0,this.dt.width,this.dt.height),this.WL()}finally{this.dt=t,this.Zt=n}}}WL(){const t=this.observed;if(t===null)return;const n=this.drawsTemporaryLayers,i=this.drawsGrid&&n,r=t.grid;if(i&&r!==null&&r.visible&&!(isNaN(r.width)||isNaN(r.height))){const m=I.l().a(this.viewportBounds).unionRect(t.viewportBounds);t._l(m),I.s(m),t.Ci()}const a=this.D,l=this.Zt;l.scale(this.Vi,this.Vi),l.transform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),l.commitTransform();const u=this.viewportBounds,c=t.Gt.r,f=c.length;for(let m=0;m<f;m++)c[m].kF(l,u,this,n,i)}get observed(){return this.Pb}set observed(t){const n=this.Pb;if(t instanceof ln&&o.o("Overview.observed Diagram may not be an Overview itself: "+t),n!==t){if(this.kR(n),this.Pb=t,this.PR(t),this.invalidateDocumentBounds(),t===null){this.jc=null;const i=this.dt,r=this.Zt;i&&r&&(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,i.width,i.height))}else this.Cb(null),this.m0(),this.C();this.t("observed",n,t)}}get box(){return this.Ll}set box(t){const n=this.Ll;n!==t&&(t.li(),this.Ll=t,this.remove(n),this.add(this.Ll),this.m0(),this.t("box",n,t))}get drawsTemporaryLayers(){return this.Sb}set drawsTemporaryLayers(t){this.Sb!==t&&(this.Sb=t,this.redraw())}get drawsGrid(){return this.Mb}set drawsGrid(t){this.Mb!==t&&(this.Mb=t,this.redraw())}get updateDelay(){return this.Nb}set updateDelay(t){t<0&&(t=0),this.Nb!==t&&(this.Nb=t)}PR(t){t!==null&&(t.addDiagramListener("ViewportBoundsChanged",this.zM),t.addDiagramListener("DocumentBoundsChanged",this.XM),t.addDiagramListener("InvalidateDraw",this.Cb),t.addDiagramListener("AnimationFinished",this.KM),this.add(this.box))}kR(t){t!==null&&(this.remove(this.box),t.removeDiagramListener("ViewportBoundsChanged",this.zM),t.removeDiagramListener("DocumentBoundsChanged",this.XM),t.removeDiagramListener("InvalidateDraw",this.Cb),t.removeDiagramListener("AnimationFinished",this.KM))}m0(){const t=this.box;if(t===null)return;const n=this.observed;if(n===null)return;this.Ue=!0;const i=n.viewportBounds,r=t.selectionObject,a=B.l();a.e(i.width,i.height),r.desiredSize=a,B.s(a);const l=2/this.scale;r instanceof Qt&&(r.strokeWidth=l),t.location=new T(i.x-l/2,i.y-l/2),t.isSelected=!0}computeBounds(){const t=this.observed;if(t===null)return I.pw;const n=t.documentBounds.copy();return n.unionRect(t.viewportBounds),n}invalidateViewport(t,n){this.Ue!==!0&&(this.Ue=!0,this.requestUpdate())}onViewportBoundsChanged(t,n,i,r){this.Ht||(this.Ql(),this.C(),this.ra(),this.invalidateDocumentBounds(),this.m0(),this.Ui.scale=i,this.Ui.position.x=t.x,this.Ui.position.y=t.y,this.Ui.bounds.a(t),this.Ui.isScroll=r,this.v("ViewportBoundsChanged",this.Ui,t))}}class Nn extends Ut{constructor(){super();v(this,"ih");this.ih=null}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;const n=t.observed;if(n===null)return!1;const i=t.lastInput;if(!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay))return!1;if(this.findDraggablePart()===null){const r=n.viewportBounds;this.ih=new T(r.width/2,r.height/2);const a=t.firstInput.documentPoint;n.position=new T(a.x-this.ih.x,a.y-this.ih.y)}return!0}doActivate(){this.ih=null,super.doActivate()}doUpdateCursor(t){const n=this.diagram,i=n.box;i!==null&&i.cursor&&(n.currentCursor=i.cursor)}moveParts(t,n,i){const r=this.diagram,a=r.observed;if(a===null)return;const l=r.box;if(l===null)return;if(this.ih===null){const c=r.firstInput.documentPoint,f=l.location;this.ih=new T(c.x-f.x,c.y-f.y)}const u=r.lastInput.documentPoint;a.position=new T(u.x-this.ih.x,u.y-this.ih.y)}}class _e{constructor(e){v(this,"p");v(this,"YM");v(this,"GM");v(this,"jM");v(this,"HM");v(this,"qM");v(this,"WM");v(this,"JM");v(this,"$M");v(this,"eh");v(this,"ZM");v(this,"Lb");v(this,"QM");v(this,"Ab");v(this,"Tb");v(this,"_M");v(this,"Bo");v(this,"t2");L.Gi(this),this.p=le.ym(),this.YM=!0,this.GM=!0,this.jM=!0,this.HM=!1,this.qM=!1,this.WM=!1,this.JM=!1,this.$M=null,this.eh=null,this.ZM=1.05,this.Lb=NaN,this.QM=null,this.Ab=NaN,this.Tb=I.pw,this._M=!1,this.Bo=null,this.t2=200,e&&Object.assign(this,e)}toString(){return"CommandHandler"}get diagram(){return this.p}To(e){this.p=e}doKeyDown(){const e=this.diagram,t=e.lastInput,n=o.rr?t.meta:t.control,i=t.shift,r=t.alt,a=t.commandKey;n&&(a==="Insert"||a==="c")?this.canCopySelection()&&this.copySelection():n&&a==="x"||i&&a==="Delete"?this.canCutSelection()&&this.cutSelection():n&&a==="v"||i&&a==="Insert"?this.canPasteSelection()&&this.pasteSelection():n&&a==="y"||r&&i&&a==="Backspace"?this.canRedo()&&this.redo():n&&a==="z"||r&&a==="Backspace"?this.canUndo()&&this.undo():a==="Delete"||a==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():n&&a==="a"?this.canSelectAll()&&this.selectAll():a==="Escape"?this.canStopCommand()&&this.stopCommand():a==="ArrowUp"?e.allowVerticalScroll&&(n?e.scroll("pixel","up"):e.scroll("line","up")):a==="ArrowDown"?e.allowVerticalScroll&&(n?e.scroll("pixel","down"):e.scroll("line","down")):a==="ArrowLeft"?e.allowHorizontalScroll&&(n?e.scroll("pixel","left"):e.scroll("line","left")):a==="ArrowRight"?e.allowHorizontalScroll&&(n?e.scroll("pixel","right"):e.scroll("line","right")):a==="PageUp"?i&&e.allowHorizontalScroll?e.scroll("page","left"):e.allowVerticalScroll&&e.scroll("page","up"):a==="PageDown"?i&&e.allowHorizontalScroll?e.scroll("page","right"):e.allowVerticalScroll&&e.scroll("page","down"):a==="Home"?n&&e.allowVerticalScroll?e.scroll("document","up"):!n&&e.allowHorizontalScroll&&e.scroll("document","left"):a==="End"?n&&e.allowVerticalScroll?e.scroll("document","down"):!n&&e.allowHorizontalScroll&&e.scroll("document","right"):a==="Space"?this.canScrollToPart()&&this.scrollToPart():a==="Minus"||a==="NumpadSubtract"?this.canDecreaseZoom()&&this.decreaseZoom():a==="Equal"||a==="NumpadAdd"?this.canIncreaseZoom()&&this.increaseZoom():n&&a==="Digit0"?this.canResetZoom()&&this.resetZoom():i&&a==="z"?this.canZoomToFit()&&this.zoomToFit():n&&!i&&a==="g"?this.canGroupSelection()&&this.groupSelection():n&&i&&a==="g"?this.canUngroupSelection()&&this.ungroupSelection():a==="F2"?this.canEditTextBlock()&&this.editTextBlock():a==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():t.bubbles=!0}doKeyUp(){const e=this.diagram.lastInput;e.bubbles=!0}stopCommand(){const e=this.diagram,t=e.currentTool;t instanceof Ht&&e.allowSelect&&e.clearSelection(),t!==null&&t.doCancel()}canStopCommand(){return!0}selectAll(){const e=this.diagram;e.C();try{e.currentCursor="wait",e.v("ChangingSelection",e.selection);const t=e.parts;for(;t.next();){const r=t.value;r.canSelect()&&!r.layer.isTemporary&&(r.isSelected=!0)}const n=e.nodes;for(;n.next();){const r=n.value;r.canSelect()&&!r.layer.isTemporary&&(r.isSelected=!0)}const i=e.links;for(;i.next();){const r=i.value;r.canSelect()&&!r.layer.isTemporary&&(r.isSelected=!0)}}finally{e.v("ChangedSelection",e.selection),e.currentCursor=""}}canSelectAll(){return this.diagram.allowSelect}deleteSelection(){const e=this.diagram;try{e.currentCursor="wait",e.v("ChangingSelection",e.selection),e.startTransaction("Delete"),e.v("SelectionDeleting",e.selection);const t=new L,n=e.selection.iterator;for(;n.next();){const i=n.value;xe.sh(t,i,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,r=>r.canDelete())}e.removeParts(t,!0),e.v("SelectionDeleted",t)}finally{e.commitTransaction("Delete"),e.v("ChangedSelection",e.selection),e.currentCursor=""}}canDeleteSelection(){const e=this.diagram;return!(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||e.selection.count===0)}copySelection(){const e=this.diagram;try{const t=new L,n=e.selection.iterator;for(;n.next();){const i=n.value;xe.sh(t,i,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,r=>r.canCopy())}this.copyToClipboard(t)}finally{}}canCopySelection(){const e=this.diagram;return!(!e.allowCopy||!e.allowClipboard||e.selection.count===0)}cutSelection(){this.copySelection(),this.deleteSelection()}canCutSelection(){const e=this.diagram;return!(e.isReadOnly||e.isModelReadOnly||!e.allowCopy||!e.allowDelete||!e.allowClipboard||e.selection.count===0)}copyToClipboard(e){const t=this.diagram;let n=null;if(e===null)le.dL();else{const i=t.model;let r=!1,a=!1,l=null;try{i.pc()&&(r=i.copiesParentKeyOfNodeData,i.copiesParentKeyOfNodeData=this.copiesParentKey),(i.gc()||i.qu())&&(a=i.copiesGroupKeyOfNodeData,i.copiesGroupKeyOfNodeData=this.copiesGroupKey),l=t.copyParts(e,null,!0)}finally{i.pc()&&(i.copiesParentKeyOfNodeData=r),(i.gc()||i.qu())&&(i.copiesGroupKeyOfNodeData=a),n=new M,n.addAll(l.iteratorValues),le.s0=n,le.mb=t.model.dataFormat}}t.v("ClipboardChanged",n)}pasteFromClipboard(){const e=new L,t=le.s0;if(t===null)return e;const n=this.diagram;if(le.mb!==n.model.dataFormat)return e;const i=n.model;let r=!1,a=!1,l=null;try{i.pc()&&(r=i.copiesParentKeyOfNodeData,i.copiesParentKeyOfNodeData=this.copiesParentKey),(i.gc()||i.qu())&&(a=i.copiesGroupKeyOfNodeData,i.copiesGroupKeyOfNodeData=this.copiesGroupKey),l=n.copyParts(t,n,!1)}finally{i.pc()&&(i.copiesParentKeyOfNodeData=r),(i.gc()||i.qu())&&(i.copiesGroupKeyOfNodeData=a);const u=l.iterator;for(;u.next();){const c=u.value,f=u.key;c.location.isReal()||(f.location.isReal()?c.location=f.location:!c.position.isReal()&&f.position.isReal()&&(c.position=f.position)),e.add(c)}}return e}pasteSelection(e){e===void 0&&(e=null);const t=this.diagram;try{t.currentCursor="wait",t.v("ChangingSelection",t.selection),t.startTransaction("Paste");const n=this.pasteFromClipboard();n.count>0&&t.clearSelection(!0);const i=n.iterator;for(;i.next();){const r=i.value;r.isSelected=!0}if(e!==null){const r=t.computePartsBounds(t.selection);if(r.isReal()){const a=this.computeEffectiveCollection(t.selection,t.fb);t.bP(a,new T(e.x-r.centerX,e.y-r.centerY),t.fb,!1)}}t.v("ClipboardPasted",n)}finally{t.commitTransaction("Paste"),t.v("ChangedSelection",t.selection),t.currentCursor=""}}canPasteSelection(e){const t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||le.s0===null||le.s0.count===0||le.mb!==t.model.dataFormat)}undo(){this.diagram.undoManager.undo()}canUndo(){const e=this.diagram;return e.isReadOnly||e.isModelReadOnly?!1:e.allowUndo&&e.undoManager.canUndo()}redo(){this.diagram.undoManager.redo()}canRedo(){const e=this.diagram;return e.isReadOnly||e.isModelReadOnly?!1:e.allowUndo&&e.undoManager.canRedo()}decreaseZoom(e){e===void 0&&(e=1/this.zoomFactor);const t=this.diagram;if(t.autoScale!==1)return;const n=t.scale*e;n<t.minScale||n>t.maxScale||(t.scale=n)}canDecreaseZoom(e){e===void 0&&(e=1/this.zoomFactor);const t=this.diagram;if(t.autoScale!==1)return!1;const n=t.scale*e;return n<t.minScale||n>t.maxScale?!1:t.allowZoom}increaseZoom(e){e===void 0&&(e=this.zoomFactor);const t=this.diagram;if(t.autoScale!==1)return;const n=t.scale*e;n<t.minScale||n>t.maxScale||(t.scale=n)}canIncreaseZoom(e){e===void 0&&(e=this.zoomFactor);const t=this.diagram;if(t.autoScale!==1)return!1;const n=t.scale*e;return n<t.minScale||n>t.maxScale?!1:t.allowZoom}resetZoom(e){e===void 0&&(e=this.defaultScale);const t=this.diagram;e<t.minScale||e>t.maxScale||(t.scale=e)}canResetZoom(e){e===void 0&&(e=this.defaultScale);const t=this.diagram;return e<t.minScale||e>t.maxScale?!1:t.allowZoom}zoomToFit(){const e=this.diagram,t=e.animationManager;t.stopAnimation(),e.redraw();const n=e.position,i=e.scale;t.Dl("Zoom To Fit"),this.isZoomToFitRestoreEnabled&&i===this.Ab&&!isNaN(this.Lb)&&e.documentBounds.equals(this.Tb)?(e.scale=this.Lb,e.position=this.QM,this.Ab=NaN,this.Tb=I.pw):(this.Lb=i,this.QM=n.copy(),e.zoomToFit(),this.Ab=e.scale,this.Tb=e.documentBounds.copy()),t.SS()}canZoomToFit(){return this.diagram.allowZoom}scrollToPart(e){e===void 0&&(e=null);const t=this.diagram;if(t.ensureBounds(),e===null){try{this.Bo!==null&&(this.Bo.next()?e=this.Bo.value:this.Bo=null)}catch{this.Bo=null}e===null&&(t.highlighteds.count>0?this.Bo=t.highlighteds.iterator:t.selection.count>0&&(this.Bo=t.selection.iterator),this.Bo!==null&&this.Bo.next()&&(e=this.Bo.value))}if(e!==null){const n=t.animationManager;n.Dl("Scroll To Part");const i=this.scrollToPartPause;if(i>0){const r=this.Hc(e,[e]);if(r.length===1)t.startTransaction(),t.centerRect(e.actualBounds),t.commitTransaction("Scroll To Part");else{const a=()=>{t.startTransaction();let u=r.pop();for(;r.length>0&&u instanceof It&&u.isTreeExpanded&&(!(u instanceof Vt)||u.isSubGraphExpanded);)u=r.pop();r.length>0?(u instanceof xe&&t.scrollToRect(u.actualBounds),u instanceof It&&!u.isTreeExpanded&&(u.isTreeExpanded=!0),u instanceof Vt&&!u.isSubGraphExpanded&&(u.isSubGraphExpanded=!0)):(u instanceof xe&&t.centerRect(u.actualBounds),t.removeDiagramListener("LayoutCompleted",l)),t.commitTransaction("Scroll To Part")},l=()=>{o.Oh(a,(n.isEnabled?n.duration:0)+i)};t.addDiagramListener("LayoutCompleted",l),a()}}else{const r=t.position.copy();t.centerRect(e.actualBounds),r.equalsApprox(t.position)&&n.stopAnimation()}}}Hc(e,t){if(e.isVisible())return t;if(e instanceof ie)this.Hc(e.adornedPart,t);else if(e instanceof Gt){const n=e.fromNode;n!==null&&this.Hc(n,t);const i=e.toNode;i!==null&&this.Hc(i,t)}else{if(e instanceof It){const i=e.labeledLink;i!==null&&this.Hc(i,t);const r=e.findTreeParentNode();r!==null&&(!r.isTreeExpanded&&!r.wasTreeExpanded&&t.push(r),this.Hc(r,t))}const n=e.containingGroup;n!==null&&(!n.isSubGraphExpanded&&!n.wasSubGraphExpanded&&t.push(n),this.Hc(n,t))}return t}canScrollToPart(e){if(e===void 0&&(e=null),e!==null&&!(e instanceof xe))return!1;const t=this.diagram;return t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll}collapseTree(e){e===void 0&&(e=null);const t=this.diagram,n="Collapse Tree";try{t.startTransaction(n),t.animationManager.Dl(n);const i=new M;if(e!==null&&e.isTreeExpanded)e.collapseTree(),i.add(e);else if(e===null){const r=t.selection.iterator;for(;r.next();){const a=r.value;a instanceof It&&a.isTreeExpanded&&(a.collapseTree(),i.add(a))}}t.v("TreeCollapsed",i)}finally{t.commitTransaction(n)}}canCollapseTree(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly)return!1;if(e!==null){if(!(e instanceof It)||!e.isTreeExpanded)return!1;if(e.findTreeChildrenLinks().count>0)return!0}else{const n=t.selection.iterator;for(;n.next();){const i=n.value;if(i instanceof It){if(!i.isTreeExpanded)continue;if(i.findTreeChildrenLinks().count>0)return!0}}}return!1}expandTree(e){e===void 0&&(e=null);const t=this.diagram,n="Expand Tree";try{t.startTransaction(n),t.animationManager.Dl(n);const i=new M;if(e!==null&&!e.isTreeExpanded)e.expandTree(),i.add(e);else if(e===null){const r=t.selection.iterator;for(;r.next();){const a=r.value;a instanceof It&&(a.isTreeExpanded||(a.expandTree(),i.add(a)))}}t.v("TreeExpanded",i)}finally{t.commitTransaction(n)}}canExpandTree(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly)return!1;if(e!==null){if(!(e instanceof It)||e.isTreeExpanded)return!1;if(e.findTreeChildrenLinks().count>0)return!0}else{const n=t.selection.iterator;for(;n.next();){const i=n.value;if(i instanceof It){if(i.isTreeExpanded)continue;if(i.findTreeChildrenLinks().count>0)return!0}}}return!1}groupSelection(){const e=this.diagram,t=e.model;if(!t.qc())return;const n=this.archetypeGroupData;if(n===null)return;let i=null;try{e.currentCursor="wait",e.v("ChangingSelection",e.selection),e.startTransaction("Group");const r=new M,a=e.selection.iterator;for(;a.next();){const c=a.value;c.Pe()&&c.canGroup()&&r.add(c)}const l=new M,u=r.iterator;for(;u.next();){const c=u.value;let f=!1;const m=r.iterator;for(;m.next();){const p=m.value;if(c.isMemberOf(p)){f=!0;break}}f||l.add(c)}if(l.count>0){let c=l.first().containingGroup;if(c!==null)for(;c!==null;){let f=!1;const m=l.iterator;for(;m.next();)if(!m.value.isMemberOf(c)){f=!0;break}if(f)c=c.containingGroup;else break}if(n instanceof Vt)n.li(),i=n.copy(),i!==null&&e.add(i);else if(t.isGroupForData(n)){const f=t.copyNodeData(n);o.wt(f)&&(t.addNodeData(f),i=e.findNodeForData(f))}if(i!==null){c!==null&&this.isValidMember(c,i)&&(i.containingGroup=c);const f=l.iterator;for(;f.next();){const m=f.value;this.isValidMember(i,m)&&(m.containingGroup=i)}e.clearSelection(!0),i.isSelected=!0}}e.v("SelectionGrouped",i)}finally{e.commitTransaction("Group"),e.v("ChangedSelection",e.selection),e.currentCursor=""}}canGroupSelection(){const e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowInsert||!e.allowGroup||!e.model.qc()||this.archetypeGroupData===null)return!1;const t=e.selection.iterator;for(;t.next();){const n=t.value;if(n.Pe()&&n.canGroup())return!0}return!1}i2(e){const t=o.nt();if(Array.isArray(e))e.forEach(r=>{r instanceof Gt||r instanceof xe&&t.push(r)});else{const r=e.iterator;for(;r.next();){const a=r.value;a instanceof Gt||a instanceof xe&&t.push(a)}}const n=new L,i=t.length;for(let r=0;r<i;r++){const a=t[r];let l=!0;for(let u=0;u<i;u++)if(a.isMemberOf(t[u])){l=!1;break}l&&n.add(a)}return o.tt(t),n}isValidMember(e,t){if(t===null||e===t||t instanceof Gt)return!1;let n;return e!==null&&(e===t||e.isMemberOf(t)||(n=e.memberValidation,n!==null&&!n(e,t))||e.data===null&&t.data!==null||e.data!==null&&t.data===null)?!1:(n=this.memberValidation,n!==null?n(e,t):!0)}ungroupSelection(e){e===void 0&&(e=null);const t=this.diagram,n=t.model;if(n.qc())try{t.currentCursor="wait",t.v("ChangingSelection",t.selection),t.startTransaction("Ungroup");const i=new M;if(e!==null)i.add(e);else{const a=t.selection.iterator;for(;a.next();){const l=a.value;l instanceof Vt&&l.canUngroup()&&i.add(l)}}const r=new M;if(i.count>0){t.clearSelection(!0);const a=i.iterator;for(;a.next();){const l=a.value;l.expandSubGraph();const u=l.containingGroup,c=u!==null&&u.data!==null?n.getKeyForNodeData(u.data):void 0;r.addAll(l.memberParts);const f=r.iterator;for(;f.next();){const m=f.value;if(m.isSelected=!0,m instanceof Gt)continue;const p=m.data;p!==null?n.setGroupForData(p,c):m.containingGroup=u}t.remove(l)}}t.v("SelectionUngrouped",i,r)}finally{t.commitTransaction("Ungroup"),t.v("ChangedSelection",t.selection),t.currentCursor=""}}canUngroupSelection(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||!t.allowUngroup||!t.model.qc())return!1;if(e!==null){if(!(e instanceof Vt))return!1;if(e.canUngroup())return!0}else{const n=t.selection.iterator;for(;n.next();){const i=n.value;if(i instanceof Vt&&i.canUngroup())return!0}}return!1}addTopLevelParts(e,t){const n=this.i2(e);let i=!0;const r=n.iterator;for(;r.next();){const a=r.value;a.containingGroup!==null&&(!t||this.isValidMember(null,a)?a.containingGroup=null:i=!1)}return i}collapseSubGraph(e){e===void 0&&(e=null);const t=this.diagram,n="Collapse SubGraph";try{t.startTransaction(n),t.animationManager.Dl(n);const i=new M;if(e!==null&&e.isSubGraphExpanded)e.collapseSubGraph(),i.add(e);else if(e===null){const r=t.selection.iterator;for(;r.next();){const a=r.value;a instanceof Vt&&a.isSubGraphExpanded&&(a.collapseSubGraph(),i.add(a))}}t.v("SubGraphCollapsed",i)}finally{t.commitTransaction(n)}}canCollapseSubGraph(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly)return!1;if(e!==null)return!(!(e instanceof Vt)||!e.isSubGraphExpanded);{const n=t.selection.iterator;for(;n.next();){const i=n.value;if(i instanceof Vt&&i.isSubGraphExpanded)return!0}}return!1}expandSubGraph(e){e===void 0&&(e=null);const t=this.diagram,n="Expand SubGraph",i=new M;try{if(t.startTransaction(n),t.animationManager.Dl(n),e!==null&&!e.isSubGraphExpanded)e.expandSubGraph(),i.add(e);else if(e===null){const r=t.selection.iterator;for(;r.next();){const a=r.value;a instanceof Vt&&(a.isSubGraphExpanded||(a.expandSubGraph(),i.add(a)))}}t.v("SubGraphExpanded",i)}finally{for(const r of i)this.JL(t,r);e&&this.JL(t,e),t.commitTransaction(n)}}JL(e,t){for(const n of t.memberParts)n instanceof It&&e.Cc(n,t)}canExpandSubGraph(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly)return!1;if(e!==null)return!(!(e instanceof Vt)||e.isSubGraphExpanded);{const n=t.selection.iterator;for(;n.next();){const i=n.value;if(i instanceof Vt&&!i.isSubGraphExpanded)return!0}}return!1}editTextBlock(e){e===void 0&&(e=null);const t=this.diagram,n=t.toolManager.findTool("TextEditing");if(n!==null){if(e===null){let i=null;const r=t.selection.iterator;for(;r.next();){const a=r.value;if(a.canEdit()){i=a;break}}if(i===null)return;e=i.findInVisualTree(a=>a instanceof Je&&a.editable)}e!==null&&(t.currentTool=null,n.textBlock=e,t.currentTool=n)}}canEditTextBlock(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowTextEdit||t.toolManager.findTool("TextEditing")===null)return!1;if(e!==null){if(!(e instanceof Je))return!1;const n=e.part;if(n!==null&&n.canEdit())return!0}else{const n=t.selection.iterator;for(;n.next();){const i=n.value;if(i.canEdit()&&(e=i.findInVisualTree(r=>r instanceof Je&&r.editable),e!==null))return!0}}return!1}showContextMenu(e){const t=this.diagram,n=t.toolManager.findTool("ContextMenu");if(n===null)return;e===void 0&&(t.selection.count>0?e=t.selection.first():e=t);const i=n.findObjectWithContextMenu(e);if(i!==null){const r=t.lastInput;let a=null;if(i instanceof Re)a=i.getDocumentPoint(z.Center);else if(!t.viewportBounds.containsPoint(r.documentPoint)){const l=t.viewportBounds;a=new T(l.x+l.width/2,l.y+l.height/2)}if(a!==null){const l=new Et;l.diagram=t,l.viewPoint=t.transformDocToView(a),l.documentPoint=a,l.button=2,l.up=!0,t.lastInput=l}t.currentTool=n,n.openMenu(!1,i)}}canShowContextMenu(e){const t=this.diagram,n=t.toolManager.findTool("ContextMenu");return!(n===null||(e===void 0&&(t.selection.count>0?e=t.selection.first():e=t),n.findObjectWithContextMenu(e)===null))}get copiesClipboardData(){return this.YM}set copiesClipboardData(e){o.i(e,"boolean",_e,"copiesClipboardData"),this.YM=e}get copiesConnectedLinks(){return this.GM}set copiesConnectedLinks(e){o.i(e,"boolean",_e,"copiesConnectedLinks"),this.GM=e}get deletesConnectedLinks(){return this.jM}set deletesConnectedLinks(e){o.i(e,"boolean",_e,"deletesConnectedLinks"),this.jM=e}get copiesTree(){return this.HM}set copiesTree(e){o.i(e,"boolean",_e,"copiesTree"),this.HM=e}get deletesTree(){return this.qM}set deletesTree(e){o.i(e,"boolean",_e,"deletesTree"),this.qM=e}get copiesParentKey(){return this.WM}set copiesParentKey(e){o.i(e,"boolean",_e,"copiesParentKey"),this.WM=e}get copiesGroupKey(){return this.JM}set copiesGroupKey(e){o.i(e,"boolean",_e,"copiesGroupKey"),this.JM=e}get archetypeGroupData(){return this.$M}set archetypeGroupData(e){e!==null&&o.i(e,"object",_e,"archetypeGroupData"),this.diagram,this.$M=e}get memberValidation(){return this.eh}set memberValidation(e){e!==null&&o.i(e,"function",_e,"memberValidation"),this.eh=e}get defaultScale(){return this.diagram.defaultScale}set defaultScale(e){this.diagram.defaultScale=e}get zoomFactor(){return this.ZM}set zoomFactor(e){e>1||o.o("zoomFactor must be larger than 1.0, not: "+e),this.ZM=e}get isZoomToFitRestoreEnabled(){return this._M}set isZoomToFitRestoreEnabled(e){o.i(e,"boolean",_e,"isZoomToFitRestoreEnabled"),this._M=e}get scrollToPartPause(){return this.t2}set scrollToPartPause(e){this.t2=e}computeEffectiveCollection(e,t){const n=this.diagram,i=n.toolManager.findTool("Dragging"),r=n.currentTool===i;t===void 0&&(t=n.c0());const a=new W;if(e===null)return a;let l=e.iterator;for(;l.next();){const u=l.value;n.qr(a,u,r,t)}if(n.draggedLink!==null&&t.dragsLink)return a;for(l=e.iterator;l.next();){const u=l.value;if(u instanceof Gt){const c=u.fromNode;if(c!==null&&!a.has(c))a.delete(u);else{const f=u.toNode;f!==null&&!a.has(f)&&a.delete(u)}}}return a}}var On=(A=>(A[A.None=0]="None",A[A.Default=1]="Default",A[A.Vertical=4]="Vertical",A[A.Horizontal=5]="Horizontal",A[A.Fill=2]="Fill",A))(On||{}),bn=(A=>(A[A.None=0]="None",A[A.Along=21]="Along",A[A.Plus90=22]="Plus90",A[A.Minus90=23]="Minus90",A[A.Opposite=24]="Opposite",A[A.Upright=25]="Upright",A[A.Plus90Upright=26]="Plus90Upright",A[A.Minus90Upright=27]="Minus90Upright",A[A.Upright45=28]="Upright45",A))(bn||{}),Fn=(A=>(A[A.None=0]="None",A[A.Vertical=1]="Vertical",A[A.Horizontal=2]="Horizontal",A[A.Both=3]="Both",A))(Fn||{});const Jt=class Jt{constructor(){v(this,"n");v(this,"Wu");v(this,"Ju");v(this,"Uo");v(this,"f");v(this,"nh");v(this,"q");v(this,"at");v(this,"se");v(this,"Wt");v(this,"$u");v(this,"Vs");v(this,"Ct");v(this,"ze");v(this,"Jr");v(this,"oh");v(this,"bi");v(this,"ca");v(this,"et");v(this,"Xt");v(this,"$r");v(this,"Li");v(this,"zi");v(this,"Zu");v(this,"oi");v(this,"Wc");v(this,"Bt");v(this,"ni");v(this,"Zr");v(this,"Db");v(this,"rh");v(this,"Qu");L.Gi(this),this.n=30723,this.Wt=1,this.$u="",this.Vs=null,this.Ct=null,this.at=new T(NaN,NaN).g(),this.ze=B.gw,this.Jr=new nt,this.oh=new nt,this.bi=null,this.ca=1,this.et=1,this.Xt=0,this.$r=tt.Ug,this.se=new I(NaN,NaN,NaN,NaN).g(),this.Li=new I(NaN,NaN,NaN,NaN).g(),this.zi=new I(0,0,NaN,NaN).g(),this.Zu=null,this.Wu=null,this.q=null,this.oi=z.Default,this.Wc=z.Default,this.Ju=0,this.Uo=0,this.Bt=null,this.f=null,this.nh=null,this.ni=null,this.Db=null,this.rh=null,this.Zr=null,this.Qu=null}cloneProtected(e){e.n=(this.n|2048|4096)&-32769,e.Wt=this.Wt,e.$u=this.$u,e.Ct=this.Ct,e.at.a(this.at),e.ze=this.ze.N(),this.bi!==null?e.bi=this.bi.copy():e.bi=null,e.et=this.et,e.Xt=this.Xt,e.$r=this.$r.N(),e.se.a(this.se),e.Li.a(this.Li),e.zi.a(this.zi),e.Wu=this.Wu,this.q!==null&&(e.q=this.q.copy()),e.oi=this.oi.N(),e.Wc=this.Wc.N(),e.Ju=this.Ju,e.Uo=this.Uo,this.Bt!==null&&(e.Bt=this.Bt.copy()),this.f!==null&&(this.f.gi?e.f=this.f:e.f=this.f.copy()),this.nh!==null&&(e.nh=this.nh.slice()),this.ni!==null&&(e.ni=this.ni.copy())}addCopyProperty(e){let t=this.nh;if(!Array.isArray(t))t=[],this.nh=t;else for(let n=0;n<t.length;n++)if(t[n]===e)return;t.push(e)}Vo(e){e.Zu=null,e.Zr=null,e.c()}clone(){const e=new this.constructor;if(this.cloneProtected(e),this.nh!==null)for(let t=0;t<this.nh.length;t++){const n=this.nh[t];e[n]=this[n]}return e}copy(){return this.clone()}km(){const e=this.Ai;if(e!==null){this.Ai=null;for(const t of e)t._u()&&(t.isToData?this.themeData(t.targetProperty,t.sourceProperty,t.themeSource,t.converter,t.themeConverter):t.isToObject?this.themeObject(t.targetProperty,t.sourceProperty,t.themeSource,t.converter,t.themeConverter,t.sourceName):t.isToModel?this.themeModel(t.targetProperty,t.sourceProperty,t.themeSource,t.converter,t.themeConverter):this.theme(t.targetProperty,t.sourceProperty,t.themeSource,t.converter,t.themeConverter))}return this}ri(e){e in bn?this.segmentOrientation=e:e in On?this.stretch=e:o.lr(this,e)}toString(){return o.sn(this.constructor)+"#"+L.as(this)}lh(){this.f!==null&&(this.f.gi=!0)}jt(){this.f===null?this.f=new Me:this.f.gi&&(this.f=this.f.copy())}Xe(){if(this.q===null){const e=new vh;e.fa=z.None,e.ua=z.None,e.da=10,e.ga=10,e.ma=0,e.pa=0,this.q=e}}raiseChangedEvent(e,t,n,i,r,a,l){const u=this.part;if(u!==null){u.Jc(e,t,n,i,r,a,l),n===this&&e===2&&this.$c()&&this.ya(u,t);const c=this.diagram;if(this.ys!==null&&c!==null&&c.Bh&&!c.undoManager.isUndoingRedoing&&!c.animationManager.xu){const f=this.ys.get(t);if(f!==null&&c.animationManager.isEnabled&&!c.animationManager.isTicking){this.Qu===null&&(this.Qu=new W);let m=c.undoManager.transactionLevel===0;if(f.startCondition===2?m=!0:f.startCondition===3&&(m=!1),m){const p=new ei;f.wF(p);const y=this.Qu.get(f);y!==null&&y.stop(),this.Qu.set(f,p),p.cx=this,p.DS=f,p.add(this,t,i,r),p.start()}else c.animationManager.getBundleAnimation().add(this,t,i,r)}}if(this instanceof Kt&&n===u&&u.e2()&&u.data!==null){const f=this.L.r,m=f.length;for(let p=0;p<m;p++){const y=f[p];y instanceof Kt&&y.Hr(w=>{w.data!==null&&w.e2()&&w.updateTargetBindings(t)})}}}}gF(e){this.Qu.delete(e)}Io(){if(this.diagram!==null&&this.findBindingPanel()===null&&this.Ai!==null){const e=this.Ai.iterator;for(;e.next();){const t=e.value;if(!t.isToTheme)continue;let n=null;const i=t.sourceName;t.isToObject&&(n=this.$L(i));let r=this;const a=t.targetId;a!==-1&&(r=this.p0(a),r===null)||(i==="/"?n=r.part:i==="."?n=r:i===".."&&(n=r.panel),t.updateTarget(r,n))}}}ya(e,t){const n=this.findBindingPanel();if(n!==null){const i=this.Ai.iterator;for(;i.next();){const r=i.value;let a=null;if(r.isToObject){if(a=r.ZL(n,this),a===null)continue;r.updateSource(this,a,t,null)}else if(r.isToModel){const l=e.diagram;l!==null&&!l.fe&&r.updateSource(this,l.model.modelData,t,n)}else if(!r.isToTheme){const l=n.data;if(l===null)continue;const u=e.diagram;u!==null&&!u.fe&&r.updateSource(this,l,t,n)}if(a===this){const l=r.targetId,u=n.p0(l);u!==null&&r.updateTarget(u,a,t)}}}}p0(e){return this.$n===e?this:null}$L(e){let t;return e===""?t=this:e==="/"?t=this:e==="."?t=this:e===".."?t=this:t=this.part.findObject(e),t}get $n(){return this.f!==null?this.f.$n:-1}set $n(e){this.$n!==e&&(this.f===null&&(this.f=new Me),this.f.$n=e)}get Ai(){return this.f!==null?this.f.Ai:null}set Ai(e){this.Ai!==e&&(this.f===null&&(this.f=new Me),this.f.Ai=e)}get Zn(){return this.f!==null?this.f.Zn:null}set Zn(e){this.Zn!==e&&(this.f===null&&(this.f=new Me),this.f.Zn=e)}raiseChanged(e,t,n){this.raiseChangedEvent(2,e,this,t,n)}t(e,t,n){this.raiseChangedEvent(2,e,this,t,n)}Qn(e,t,n,i){const r=this.se;if(r.e(e,t,n,i),this.et!==1||this.Xt!==0){this.bi===null&&(this.bi=new nt);const a=this.bi;a.Ri(),this.y0(a,e,t,n,i),a.xw(r)}}QL(e,t,n){return this.pickable===!1?!1:(n.ic(this.D),t?this.intersectsRect(e,n):this.containedInRect(e,n))}_L(e,t,n){if(this.pickable===!1)return!1;const i=this.naturalBounds,r=e.distanceSquaredPoint(t);return n?T.distanceLineSegmentSquared(e.x,e.y,0,0,0,i.height)<=r||T.distanceLineSegmentSquared(e.x,e.y,0,i.height,i.width,i.height)<=r||T.distanceLineSegmentSquared(e.x,e.y,i.width,i.height,i.width,0)<=r||T.distanceLineSegmentSquared(e.x,e.y,i.width,0,0,0)<=r:e.distanceSquared(0,0)<=r&&e.distanceSquared(0,i.height)<=r&&e.distanceSquared(i.width,0)<=r&&e.distanceSquared(i.width,i.height)<=r}pn(){return!0}containsPoint(e){const t=T.l();t.a(e),this.D.xt(t);const n=this.actualBounds;if(!n.isReal())return T.s(t),!1;const i=this.diagram;if(i!==null&&i.Qm){const a=i.getInputOption("extraTouchThreshold"),l=i.getInputOption("extraTouchArea"),u=l/2,c=this.naturalBounds,f=this.getDocumentScale()*i.scale,m=1/f;if(c.width*f<a&&c.height*f<a){const p=I.contains(n.x-u*m,n.y-u*m,n.width+l*m,n.height+l*m,t.x,t.y);return T.s(t),p}}let r=!1;return(this instanceof ie||this instanceof Qt?I.contains(n.x-5,n.y-5,n.width+10,n.height+10,t.x,t.y):n.containsPoint(t))&&(this.ni&&!this.ni.containsPoint(t)?r=!1:this.Ct!==null&&this.zi.containsPoint(e)?r=!0:r=this.hh(e)),T.s(t),r}hh(e){const t=this.naturalBounds;return I.contains(0,0,t.width,t.height,e.x,e.y)}containsRect(e){if(this.angle===0)return this.actualBounds.containsRect(e);const t=this.naturalBounds,n=I.X(0,0,t.width,t.height),i=this.D;let r=!1;const a=T.X(e.x,e.y);return n.containsPoint(i._e(a))&&(a.e(e.x,e.bottom),n.containsPoint(i._e(a))&&(a.e(e.right,e.bottom),n.containsPoint(i._e(a))&&(a.e(e.right,e.y),n.containsPoint(i._e(a))&&(r=!0)))),T.s(a),I.s(n),r}containedInRect(e,t){if(t===void 0)return e.containsRect(this.actualBounds);const n=this.naturalBounds,i=t;let r=!1;const a=T.X(0,0);return e.containsPoint(i.xt(a))&&(a.e(0,n.height),e.containsPoint(i.xt(a))&&(a.e(n.width,n.height),e.containsPoint(i.xt(a))&&(a.e(n.width,0),e.containsPoint(i.xt(a))&&(r=!0)))),T.s(a),r}intersectsRect(e,t){if(t===void 0&&(t=this.D,this.angle===0))return e.intersectsRect(this.actualBounds);const n=this.naturalBounds,i=t,r=T.X(0,0),a=T.X(0,n.height),l=T.X(n.width,n.height),u=T.X(n.width,0);let c=!1;if(e.containsPoint(i.xt(r))||e.containsPoint(i.xt(a))||e.containsPoint(i.xt(l))||e.containsPoint(i.xt(u)))c=!0;else{const f=I.X(0,0,n.width,n.height),m=T.X(e.x,e.y);f.containsPoint(i._e(m))?c=!0:(m.e(e.x,e.bottom),f.containsPoint(i._e(m))?c=!0:(m.e(e.right,e.bottom),f.containsPoint(i._e(m))?c=!0:(m.e(e.right,e.y),f.containsPoint(i._e(m))&&(c=!0)))),T.s(m),I.s(f),c||(R.Pw(e,r,a)||R.Pw(e,a,l)||R.Pw(e,l,u)||R.Pw(e,u,r))&&(c=!0)}return T.s(r),T.s(a),T.s(l),T.s(u),c}getDocumentPoint(e,t){if(t===void 0&&(t=new T),e instanceof z){const n=e,i=this.naturalBounds;return t.e(n.x*i.width+n.offsetX,n.y*i.height+n.offsetY),this.Es.xt(t),t}else return t.set(e),this.Es.xt(t),t}getDocumentBounds(e){e===void 0&&(e=new I);const t=this.naturalBounds,n=this.Es,i=T.X(0,0).D(n);return e.e(i.x,i.y,0,0),i.e(t.width,0).D(n),e.unionNoCheck(i.x,i.y,0,0),i.e(t.width,t.height).D(n),e.unionNoCheck(i.x,i.y,0,0),i.e(0,t.height).D(n),e.unionNoCheck(i.x,i.y,0,0),T.s(i),e}getDocumentAngle(){return this.Es.TD()}getDocumentScale(){if(this.w0()===!1)return this.ca;const e=this.et;return this.panel!==null?e*this.panel.getDocumentScale():e}getLocalPoint(e,t){return t===void 0&&(t=new T),t.a(e),this.Es._e(t),t}getNearestIntersectionPoint(e,t,n){return this.Zc(e.x,e.y,t.x,t.y,n)}Zc(e,t,n,i,r){const a=this.D,l=1/(a.m11*a.m22-a.m12*a.m21),u=a.m22*l,c=-a.m12*l,f=-a.m21*l,m=a.m11*l,p=l*(a.m21*a.dy-a.m22*a.dx),y=l*(a.m12*a.dx-a.m11*a.dy),w=e*u+t*f+p,b=e*c+t*m+y,C=n*u+i*f+p,k=n*c+i*m+y;r.e(0,0);const N=this.naturalBounds,F=R.ml(0,0,N.width,N.height,w,b,C,k,r);return r.D(a),F}ut(e,t,n,i){if(this.Oo()===!1)return;const r=this.$r,a=r.right+r.left,l=r.top+r.bottom;e=Math.max(e-a,0),t=Math.max(t-l,0),n=n||0,i=i||0,n=Math.max(n-a,0),i=Math.max(i-l,0);const u=this.angle;let c=0;const f=this.desiredSize,m=this.x0();u===90||u===270?(e=isFinite(f.height)?f.height+m:e,t=isFinite(f.width)?f.width+m:t):(e=isFinite(f.width)?f.width+m:e,t=isFinite(f.height)?f.height+m:t);let p=n||0,y=i||0;const w=this instanceof Kt;switch(this.zs(!0)){case 0:p=0,y=0,w&&(e=1/0,t=1/0);break;case 2:isFinite(e)&&e>n&&(p=e),isFinite(t)&&t>i&&(y=t);break;case 5:isFinite(e)&&e>n&&(p=e),y=0,w&&(t=1/0);break;case 4:isFinite(t)&&t>i&&(y=t),p=0,w&&(e=1/0);break}const b=this.maxSize,C=this.minSize;p>b.width&&C.width<b.width&&(p=b.width),y>b.height&&C.height<b.height&&(y=b.height),n=Math.max(p,C.width),i=Math.max(y,C.height),b.width<n&&(n=Math.min(C.width,n)),b.height<i&&(i=Math.min(C.height,i)),e=Math.min(b.width,e),t=Math.min(b.height,t),e=Math.max(n,e),t=Math.max(i,t),(u===90||u===270)&&(c=e,e=t,t=c,c=n,n=i,i=c),this.se.ot(),this.td(e,t,n,i),this.se.g(),this.se.isReal()||o.o("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.se.toString()),this.ue(!1)}td(e,t,n,i){}Xs(){return!1}zt(e,t,n,i,r){this.Qc();const a=I.l();a.a(this.Li),this.Li.ot(),this.is()===!1?this.Li.e(e,t,n,i):this.ah(e,t,n,i),this.Li.g(),r===void 0?this.ni=null:this.ni=r;let l=!1;if(r!==void 0)l=!0;else{let u=this.panel;if(u!==null&&u.Qr()&&(u=u.panel),u!==null){const c=u.zi,f=this.measuredBounds,m=t+f.height,p=e+f.width;if(l=!(0<=e+.05&&p<=c.width+.05&&0<=t+.05&&m<=c.height+.05),this instanceof Je){const y=this.naturalBounds;(this.b0>y.height||this.mi>y.width)&&(l=!0)}}}l?this.n|=256:this.n&=-257,this.Li.isReal()||o.o("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Li.toString()),this.ed(a,this.Li),this._n(!1),I.s(a)}ah(e,t,n,i){}commonArrange(e,t,n,i){if(this.Li.e(e,t,n,i),this.desiredSize.isReal())return;const r=this.se,a=this.$r,l=a.right+a.left,u=a.top+a.bottom,c=r.width+l,f=r.height+u;n+=l,i+=u;let m=this.zs(!0);switch(c===n&&f===i&&(m=0),m){case 0:(c>n||f>i)&&(this.ue(!0),this.ut(c>n?n:c,f>i?i:f,0,0));break;case 2:this.ue(!0),this.ut(n,i,0,0);break;case 5:this.ue(!0),this.ut(n,f,0,0);break;case 4:this.ue(!0),this.ut(c,i,0,0);break}}ed(e,t){const n=this.part;n!==null&&n.diagram!==null&&((n.selectionObject===this||n.resizeObject===this||n.rotateObject===this)&&n.s2(!0),this.C(),!e.equalsApproxClose(t)&&(n.ch(),this.k0(n)))}k0(e){this.portId!==null&&(e.s2(!0),e instanceof It&&e.tA(this))}get shadowVisible(){return this.f!==null?this.f.P0:null}set shadowVisible(e){const t=this.shadowVisible;t!==e&&(this.jt(),this.f.P0=e,this.ss(!0),this.C(),this.t("shadowVisible",t,e))}SR(e,t){const n=this.naturalBounds,i=this.oh,r=i.m11,a=i.m21,l=i.dx,u=i.m12,c=i.m22,f=i.dy;let m=0,p=0,y=m,w=p;m=y*r+w*a+l,p=y*u+w*c+f;let b=m,C=p,k=0,N=0;y=n.width+t,w=0,m=y*r+w*a+l,p=y*u+w*c+f;let F=Math.min(b,m),D=Math.min(C,p);k=Math.max(b+k,m)-F,N=Math.max(C+N,p)-D,b=F,C=D,y=n.width+t,w=n.height+t,m=y*r+w*a+l,p=y*u+w*c+f,F=Math.min(b,m),D=Math.min(C,p),k=Math.max(b+k,m)-F,N=Math.max(C+N,p)-D,b=F,C=D,y=0,w=n.height+t,m=y*r+w*a+l,p=y*u+w*c+f,F=Math.min(b,m),D=Math.min(C,p),k=Math.max(b+k,m)-F,N=Math.max(C+N,p)-D,b=F,C=D;const E=e.viewportBounds,U=E.x,$=E.y,K=E.width,_=E.height;return b>K+U||U>k+b||C>_+$||$>N+C}Bi(e,t){if(this.MR(e,t)||!this.visible)return;const n=this.opacity;if(n===0)return;let i=1;n!==1&&(i=e.globalAlpha,e.globalAlpha=i*n);let r="";this.filter!==""&&(r=e.filter,e.filter=this.filter);const a=this.D,l=this.panel;this.w0()===!0&&this.Fb();const u=this.part;let c=!1,f=0;if(u&&t.getRenderingHint("drawShadows")&&(c=u.isShadowed,c)){const C=u.shadowOffset;f=Math.max(C.y,C.x)*t.scale*t.Vi}const m=this instanceof Kt&&this.Qr(),p=this.Li;if(m&&(this.iA(c,e,!1,l),this.NR(e,t),this.eA(c,e,!1,l),this.sA(c,e,!1)),m||!m&&(p.width===0||p.height===0||isNaN(p.x)||isNaN(p.y))){n!==1&&(e.globalAlpha=i),this.filter!==""&&(e.filter=r);return}const y=this.Xs();if(!t.Qh&&y&&this.SR(t,f)){n!==1&&(e.globalAlpha=i),this.filter!==""&&(e.filter=r);return}let w=(this.n&256)!==0;if(e.clipInsteadOfFill&&(w=!1),this instanceof Je&&(e.font=this.font),w){const C=l.pn()?l.naturalBounds:l.actualBounds;let k=Math.max(p.x,C.x),N=Math.max(p.y,C.y),F=Math.min(p.right,C.right)-k,D=Math.min(p.bottom,C.bottom)-N;const E=this.ni;if(E!==null&&(k=E.x,N=E.y,F=E.width,D=E.height),k>p.width+p.x||p.x>C.width+C.x){n!==1&&(e.globalAlpha=i),this.filter!==""&&(e.filter=r);return}e.save(),e.beginPath(),e.rect(k,N,F,D),e.clip()}if(y){if(!u.isVisible()){n!==1&&(e.globalAlpha=i),this.filter!==""&&(e.filter=r);return}if(c){const C=u.shadowOffset;e.shadowsSet(C.x*t.scale*this.scale*t.Vi,C.y*t.scale*this.scale*t.Vi,u.shadowBlur),e.shadowsOn(),e.shadowColor=u.shadowColor}}const b=this.naturalBounds;if(e.transform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),this.iA(c,e,y,l),this.Ct!==null&&(e.commitTransform(),this.Rb(e,b,p)),this.eA(c,e,y,l),this.fh(e,t),this.sA(c,e,y),w&&(e.restore(),e.clearContextCache(this instanceof Kt)),!a.Ok()){const C=1/(a.m11*a.m22-a.m12*a.m21);e.transform(a.m22*C,-a.m12*C,-a.m21*C,a.m11*C,C*(a.m21*a.dy-a.m22*a.dx),C*(a.m12*a.dx-a.m11*a.dy))}n!==1&&(e.globalAlpha=i),this.filter!==""&&(e.filter=r)}iA(e,t,n,i){e&&this.shadowVisible===!0?t.shadowsOn():e&&this.shadowVisible===!1&&t.shadowsOff(),e&&this.vb(i)&&this.shadowVisible===null&&t.shadowsOff()}eA(e,t,n,i){e&&(this.Ct!==null||this.vb(i))?(this.Ob(!0),this.shadowVisible===null&&t.shadowsOff()):this.Ob(!1)}sA(e,t,n){e&&this.o2()===!0&&t.shadowsOn(),n&&e&&t.shadowsOff()}CR(e,t,n){const i=this.part;let r=!1;i&&e.getRenderingHint("drawShadows")&&(r=i.isShadowed),t.clipInsteadOfFill&&(r=!1),this.Xs()&&r&&t.shadowsOn(),r&&this.shadowVisible===!0?t.shadowsOn():r&&this.shadowVisible===!1&&t.shadowsOff();const a=this.panel;if(r&&this.vb(a)&&this.shadowVisible===null&&t.shadowsOff(),t._r){const l=e.computePixelRatio(),u=`drop-shadow(${t.shadowOffsetX/l}px ${t.shadowOffsetY/l}px ${t.shadowBlur/l/2}px ${t.shadowColor})`;this.background!==null&&n.Ct.setAttributeNS(null,"filter",u)}return r&&(this.Ct!==null||this.vb(a))?(this.Ob(!0),this.shadowVisible===null&&t.shadowsOff()):this.Ob(!1),r}LR(e,t,n,i){if(n._r){const r=t.computePixelRatio(),a=`drop-shadow(${n.shadowOffsetX/r}px ${n.shadowOffsetY/r}px ${n.shadowBlur/r/2}px ${n.shadowColor})`;this.l2(e,a)}i&&this.o2()===!0&&n.shadowsOn(),this.Xs()&&n.shadowsOff()}vb(e){return e===null?!1:(e.Qr()&&(e=e.panel),e.o2()||(e.type===Kt.Auto||e.type===Kt.Spot)&&e.findMainElement()!==this)}l2(e,t){}Rb(e,t,n){const i=this.x0(),r=t.x,a=t.y,l=t.width+i,u=t.height+i;this.dn(e,this.Ct,!0,!1,t,n),this.Ct instanceof ve&&this.Ct.type===3?(e.beginPath(),e.rect(r-i/2,a-i/2,l,u),e.fillContext(this.Ct,!1,null)):e.fillRect(r-i/2,a-i/2,l,u)}nA(e,t){let n=e.AR(this);const i=e.rh!==null?e.rh:e.svg;if(n!==-1)if(n===0)if(i.Ct)i.Ct.after(t);else if(e.type===Kt.Table){const r=i.getElementsByClassName("gojs-ts"),a=r.length!==0?r[0]:null;a!==null&&a.after(t)}else i.prepend(t);else{for(;n!==0&&!e.elt(n-1).isVisibleObject();)n--;if(n===0)i.prepend(t);else{const r=e.elt(n-1).svg;r!==null?r.after(t):i.appendChild(t)}}}MR(e,t){if(!(e instanceof Pe))return!1;if(!this.visible||this.opacity===0)return this.svg!==null&&this.svg.parentNode!==null&&this.svg.remove(),!0;const n=this.Li;if(this.Xs()&&(!this.isVisible()||n.width===0||n.height===0||isNaN(n.x)||isNaN(n.y)))return this.svg!==null&&this.svg.parentNode!==null&&this.svg.remove(),!0;const i=this.panel,r=this.sd(e);if(this._c(e,t,r))return this.oA(this.svg),this.svg.parentElement!==null?(this.Xs()&&(e.lastDrawnPart=this.svg),!0):(this.Xs()?(e.lastDrawnPart!==null?e.lastDrawnPart.after(this.svg):e.diagramGroup.prepend(this.svg),e.lastDrawnPart=this.svg):i&&this.nA(i,this.svg),!0);if(this.Xs()&&this.isShadowed){const b=this.shadowOffset;e.shadowsSet(b.x*t.scale*this.scale*t.Vi,b.y*t.scale*this.scale*t.Vi,this.shadowBlur),e.shadowsOn(),e.shadowColor=this.shadowColor}this instanceof Je&&(e.font=this.font),e.currentElement=null;const a=this.D,l=this instanceof Kt,u=this instanceof Kt?this.Qr():!1,c=this.svg;if(this.w0()===!0&&this.Fb(),e.setCurrentTransform(1,0,0,1,0,0),e.outerGroup=!1,r)if(e.outerGroup=!0,l&&u)e.newGroup(1,0,0,1,0,0),this.svg=e.lastCreatedElement;else if(l&&this.isClipping){const b=this.findMainElement();let C=0,k=0;b!==null&&(C=b.actualBounds.x,k=b.actualBounds.y),e.newGroup(a.m11,a.m12,a.m21,a.m22,a.dx+C,a.dy+k),this.svg=e.lastCreatedElement,b!==null&&e.createOrUpdateClipGroup(this,b.actualBounds),e.currentElement=e.lastCreatedElement}else l?(e.newGroup(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),this.svg=e.lastCreatedElement):e.newGroup(1,0,0,1,0,0);const f=this.naturalBounds;l||e.setCurrentTransform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),this.background!==null&&(l?(u&&e.setCurrentTransform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),this.Rb(e,f,n),u&&e.setCurrentTransform(1,0,0,1,0,0)):(e.setCurrentTransform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),this.Rb(e,f,n)),e.currentElement.Ct=e.lastCreatedElement,e.currentElement.prepend(e.lastCreatedElement));const m=this.CR(t,e,e.currentElement);this.fh(e,t),l&&e.endGroup(),e.outerGroup&&e.endGroup();const p=e.surface.Hu,y=l?this.svg:e.currentElement;if(!l&&c!==null&&y!==c&&c.parentNode===this.panel.svg){const b=this.svg.getAttribute("filter");return b!==null&&y.setAttribute("filter",b),this.svg.replaceWith(y),this.svg=y,y!==null&&this.S0(e,i,n,y),e.rA(c),!0}if(this.svg=y,p!==null&&y===null&&e.dummyGroup(),y===null)return!0;this.S0(e,i,n,y),this.LR(y,t,e,m);const w=this.Xs()?this.opacity*e.globalAlpha:this.opacity;if(w!==1&&y.setAttributeNS(null,"opacity",w.toString()),this.filter!==""&&y.setAttributeNS(null,"filter",this.filter),this.Xs()){if(c!==null&&y!==c&&c.parentNode===e.diagramGroup){const b=c.getAttribute("filter");b!==null&&y.setAttribute("filter",b),c.replaceWith(y)}else e.lastDrawnPart?e.lastDrawnPart.after(y):e.diagramGroup.prepend(y);e.lastDrawnPart=y}else i!==null&&this.nA(i,y);return p!==null&&p(this,y),this.oA(y),!0}oA(e){const t=this,n=e.dataset;t instanceof Jt&&(t.portId!==null&&(n.portId=t.portId),t instanceof Kt&&(isNaN(t.itemIndex)||(n.itemIndex=t.itemIndex.toString()),t instanceof xe&&(n.className=o.sn(t),t.key!==void 0&&(n.key=t.key.toString()),t.containingGroup!==null&&(n.group=t.containingGroup.key.toString()),t instanceof Gt&&(t.fromNode!==null&&t.fromNode.key!==void 0&&(n.fromKey=t.fromNode.key.toString()),t.fromPortId!==""&&(n.fromPortId=t.fromPortId),t.toNode!==null&&t.toNode.key!==void 0&&(n.toKey=t.toNode.key.toString()),t.toPortId!==""&&(n.toPortId=t.toPortId)))))}S0(e,t,n,i){let r=(this.n&256)!==0;if(e.clipInsteadOfFill&&(r=!1),!r){i.removeAttributeNS(null,"clip-path"),e.rA(i);return}const a=t.pn()?t.naturalBounds:t.actualBounds;let l=Math.max(n.x,a.x),u=Math.max(n.y,a.y),c=Math.min(n.right,a.right)-l,f=Math.min(n.bottom,a.bottom)-u;const m=this.ni;m!==null&&(l=m.x,u=m.y,c=m.width,f=m.height);const p=e.TR(i);if(p===null){const y="CLIP"+L.nu++,w={id:y},b=e.makeElement("clipPath",w),C=e.makeElement("rect",{x:l,y:u,width:c,height:f});if(this instanceof Kt){const k=this.D.copy().yw();C.setAttribute("transform",`matrix(${k.m11}, ${k.m12}, ${k.m21}, ${k.m22}, ${k.dx}, ${k.dy})`)}b.appendChild(C),e.svg.appendChild(b),i.setAttributeNS(null,"clip-path","url(#"+y+")")}else{const y=p.firstElementChild;y.setAttribute("x",l.toString()),y.setAttribute("y",u.toString()),y.setAttribute("width",c.toString()),y.setAttribute("height",f.toString())}}DR(){if(this.svg===null)return;const e=this.svg.innerHTML.match(/url\(#((CLIP|GRAD).+?)\)/g),t=this.svg.ownerDocument;if(e!==null)for(const n of e){const i=t.getElementById(n.split("#")[1].slice(0,-1));i!==null&&i.remove()}this.svg.remove()}NR(e,t){const n=this.Li,i=this.zi,r=this.Ct;r!==null&&e.commitTransform(),r!==null&&(this.dn(e,r,!0,!1,i,n),r instanceof ve&&r.type===3?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.fillContext(r,!1,null)):e.fillRect(n.x,n.y,n.width,n.height)),this.fh(e,t)}fh(e,t){}nd(){this.ss(!0)}_c(e,t,n){const i=this.svg;if(this.FR()){if(this.nd(),this.ss(!1),i===null)return!1;const m=i.getAttribute("clip-path");if(m!==null&&m.includes("url")){const p=e.svg.getElementById(m.split("#")[1].slice(0,-1));p!==null&&p.remove()}return i.getAttribute("filter")&&i.removeAttribute("filter"),!1}if(i===null)return!1;if(!this.visible)return i.remove(),!1;if(i.nodeName!=="g"&&n||i.nodeName==="g"&&!n)return!1;const r=this.D,a="matrix("+r.m11+", "+r.m12+", "+r.m21+", "+r.m22+", "+r.dx+", "+r.dy+")",l=this instanceof Kt,u=l?this.Qr():!1;if(!(l&&u))if(this instanceof Vi){const m=this.Ib;e.setCurrentTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),m!==null&&e.amendImageTransform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7]),n?i.lastElementChild.setAttributeNS(null,"transform",e.getCurrentTransform()):i.setAttributeNS(null,"transform",e.getCurrentTransform())}else if(n&&!l)if(this instanceof Qt){const m=i.getElementsByTagName("path");for(let p=0;p<m.length;p++)m[p].setAttributeNS(null,"transform",a)}else if(this instanceof Je){const m=i.getElementsByTagName("text");for(let p=0;p<m.length;p++)m[p].setAttributeNS(null,"transform",a)}else(i.lastElementChild||i).setAttributeNS(null,"transform",a);else if(l&&this.isClipping&&this.rh){const m=this.findMainElement(),p=m!==null?m.actualBounds.x:0,y=m!==null?m.actualBounds.y:0;this.rh.setAttributeNS(null,"transform","matrix(1,0,0,1,"+-p+", "+-y+")"),i.setAttributeNS(null,"transform","matrix("+r.m11+", "+r.m12+", "+r.m21+", "+r.m22+", "+(r.dx+p)+", "+(r.dy+y)+")")}else i.setAttributeNS(null,"transform",a);const c=this.Xs()?this.opacity*e.globalAlpha:this.opacity;c===1?i.removeAttribute("opacity"):i.setAttributeNS(null,"opacity",c.toString()),e.setCurrentTransform(1,0,0,1,0,0);const f=this.rh?this.rh:this.Db;if(this.background!==null||f.Ct!==void 0){const m=f.Ct;if(this.background===null)e.removeOldGradient(this,f.Ct,"fill"),f.Ct.remove(),f.Ct=void 0;else{if((u||n&&!(this instanceof Kt))&&e.setCurrentTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.Rb(e,this.naturalBounds,this.actualBounds),f.Ct){e.removeOldGradient(this,f.Ct,"fill");const p=f.Ct.getAttribute("filter");p!==null&&e.lastCreatedElement.setAttribute("filter",p),f.Ct.replaceWith(e.lastCreatedElement)}else f.prepend(e.lastCreatedElement);f.Ct=e.lastCreatedElement}m&&e.removeOldGradient(this,m,"fill")}return this.S0(e,this.panel,this.actualBounds,i),!0}sd(e){if(this.background!==null)return!0;let t=(this.n&256)!==0;return e.clipInsteadOfFill&&(t=!1),!!t}static cE(e,t,n,i,r,a,l){let u=.001;const c=a.length;e.moveTo(t,n);let f=i-t;const m=r-n;f===0&&(f=.001);const p=m/f;let y=Math.sqrt(f*f+m*m),w=0,b=!0;u=a[w%c];let C=l!==0;for(;y>=.1;){if(C){for(u=a[w++%c],u-=l;u<0;)u+=a[w++%c],b=!b;C=!1}else u=a[w++%c];u>y&&(u=y);let k=Math.sqrt(u*u/(1+p*p));f<0&&(k=-k),t+=k,n+=p*k,b?e.lineTo(t,n):e.moveTo(t,n),y-=u,b=!b}}dn(e,t,n,i,r,a){let l=1,u=1;if(typeof t=="string"){n?e.fillStyle=t:e.strokeStyle=t;return}else if(t.type===1){n?e.fillStyle=t.color:e.strokeStyle=t.color;return}let c;const f=this.x0();l=r.width,u=r.height,i?(l=a.width,u=a.height):n||(l+=f,u+=f);const m=e instanceof Sn;if(m&&t.yn&&(t.type===4||t.tf===l&&t.Eb===u))c=t.yn;else{let p=0,y=0,w=0,b=0,C=0,k=0,N=0,F=0;if(i?(N=a.x,F=a.y):n||(N-=f/2,F-=f/2),p=t.start.x*l+t.start.offsetX+N,y=t.start.y*u+t.start.offsetY+F,w=t.end.x*l+t.end.offsetX+N,b=t.end.y*u+t.end.offsetY+F,t.type===2)c=e.createLinearGradient(p,y,w,b);else if(t.type===3)k=isNaN(t.endRadius)?Math.max(l,u)/2:t.endRadius,isNaN(t.startRadius)?(C=0,k=Math.max(l,u)/2):C=t.startRadius,c=e.createRadialGradient(p,y,C,w,b,k);else if(t.type===4)try{c=e.createPattern(t.pattern,"repeat")}catch{c=null}else o.we(t.type,"Brush type");if(t.type!==4){const D=t.colorStops;if(D!==null){const E=D.iterator;for(;E.next();)c.addColorStop(E.key,E.value)}}if(m&&(t.yn=c,c!==null&&(t.tf=l,t.Eb=u),c===null&&t.type===4&&t.tf!==-1)){t.tf=-1;const D=this.diagram;D!==null&&t.tf===-1&&o.Oh(()=>{D.redraw()},600)}}n?e.fillStyle=c:e.strokeStyle=c}isContainedBy(e){return e instanceof Kt?this.RR(this,e):!1}RR(e,t){if(e===t||t===null)return!1;let n=e.panel;for(;n!==null;){if(n===t)return!0;n=n.panel}return!1}isVisibleObject(){if(!this.visible)return!1;const e=this.panel;return e!==null?e.isVisibleObject():!0}isEnabledObject(){let e=this instanceof Kt?this:this.panel;for(;e!==null&&e.isEnabled;)e=e.panel;return e===null}get enabledChanged(){return this.f!==null?this.f.M0:null}set enabledChanged(e){const t=this.enabledChanged;t!==e&&(e!==null&&o.i(e,"function",Jt,"enabledChanged"),this.jt(),this.f.M0=e,this.t("enabledChanged",t,e))}Fb(){if(this.Bb()===!0){const e=this.Jr;if(e.Ri(),!this.Li.isReal()||!this.se.isReal()){this.od(!1);return}if(e.Ds(this.Li.x-this.se.x,this.Li.y-this.se.y),this.scale!==1||this.angle!==0){const t=this.naturalBounds;this.y0(e,t.x,t.y,t.width,t.height)}this.od(!1),this.wa(!0)}if(this.w0()===!0){const e=this.panel;if(e===null)this.oh.set(this.Jr),this.ca=this.scale;else if(e.Es!==null){const t=this.oh;t.Ri(),e.pn()?t.ic(e.oh):e.panel!==null&&t.ic(e.panel.oh),t.ic(this.Jr),this.ca=this.scale*e.ca}this.wa(!1)}}y0(e,t,n,i,r){if(this.et!==1&&e.et(this.et),this.Xt===0)return;const a=T.l();a.setSpot(t,n,i,r,z.Center),e.cs(this.Xt,a.x,a.y),T.s(a)}c(e){if(this.Oo())return;e===void 0&&(e=!1),this.ue(!0),this._n(!0);const t=this.panel;t!==null&&!e&&t.c()}ef(){this.Oo()||(this.ue(!0),this._n(!0))}sf(e){if(this.is())return;const t=this.panel;!e&&t!==null&&t.c(),this._n(!0)}Qc(){this.Bb()===!1&&(this.od(!0),this.wa(!0))}h2(){this.wa(!0)}C(){const e=this.part;e!==null&&e.C()}zs(e){const t=this.stretch,n=this.panel;if(n===null)return this.zo(t===1?0:t,e);if(n.type===Kt.Table)return this.N0(n.getRowDefinition(this.row),n.getColumnDefinition(this.column),e);if(n.type===Kt.Auto&&n.findMainElement()===this)return this.zo(2,e);if(t===1){if(n.type===Kt.Spot&&n.findMainElement()===this)return this.zo(2,e);const i=n.defaultStretch;return i===1?this.zo(0,e):this.zo(i,e)}return this.zo(t,e)}N0(e,t,n){const i=this.stretch;if(i!==1)return this.zo(i,n);let r=null,a=null;switch(e.stretch){case 1:case 5:break;case 4:a=!0;break;case 2:a=!0;break}switch(t.stretch){case 1:case 4:break;case 5:r=!0;break;case 2:r=!0;break}const l=this.panel.defaultStretch;return r===null&&(r=l===5||l===2),a===null&&(a=l===4||l===2),r===!0&&a===!0?this.zo(2,n):r===!0?this.zo(5,n):a===!0?this.zo(4,n):this.zo(0,n)}zo(e,t){if(t)return e;if(e===0)return 0;const n=this.desiredSize;if(n.isReal())return 0;const i=!isNaN(n.width),r=!isNaN(n.height),a=this.angle;if(i)if(a!==90&&a!==270){if(e===5)return 0;if(e===2)return 4}else{if(e===4)return 0;if(e===2)return 5}if(r)if(a!==90&&a!==270){if(e===4)return 0;if(e===2)return 5}else{if(e===5)return 0;if(e===2)return 4}return e}get segmentOrientation(){return this.Bt!==null?this.Bt.C0:0}set segmentOrientation(e){const t=this.segmentOrientation;t!==e&&(this.Bt===null&&(this.Bt=new Cr),this.Bt.C0=e,this.c(),this.t("segmentOrientation",t,e),e===0&&(this.angle=0))}vR(){this.segmentOrientation=21}get segmentIndex(){return this.Bt!==null?this.Bt.L0:-1/0}set segmentIndex(e){e=Math.round(e);const t=this.segmentIndex;t!==e&&(this.Bt===null&&(this.Bt=new Cr),this.Bt.L0=e,this.c(),this.t("segmentIndex",t,e))}get segmentFraction(){return this.Bt!==null?this.Bt.A0:0}set segmentFraction(e){isNaN(e)||e<0?e=0:e>1&&(e=1);const t=this.segmentFraction;t!==e&&(this.Bt===null&&(this.Bt=new Cr),this.Bt.A0=e,this.c(),this.t("segmentFraction",t,e))}get segmentOffset(){return this.Bt!==null?this.Bt.T0:T.Po}set segmentOffset(e){const t=this.segmentOffset;t.equals(e)||(e=e.N(),this.Bt===null&&(this.Bt=new Cr),this.Bt.T0=e,this.c(),this.t("segmentOffset",t,e))}get stretch(){return this.f!==null?this.f.to:1}set stretch(e){const t=this.stretch;t!==e&&(this.jt(),this.f.to=e,this.c(),this.t("stretch",t,e))}get name(){return this.f!==null?this.f.Mt:""}set name(e){const t=this.name;t!==e&&(this.jt(),this.f.Mt=e,this.part!==null&&this.part.D0(),this.t("name",t,e))}get opacity(){return this.Wt}set opacity(e){const t=this.Wt;if(t!==e){o.i(e,"number",Jt,"opacity"),(e<0||e>1)&&o._(e,"0 <= value <= 1",Jt,"opacity"),this.Wt=e,this.t("opacity",t,e);const n=this.diagram,i=this.part;n!==null&&i!==null&&n.C(i.Hh(i.actualBounds))}}get filter(){return this.$u}set filter(e){const t=this.$u;if(t!==e){this.$u=e,this.ss(!0),this.t("filter",t,e);const n=this.diagram,i=this.part;n!==null&&i!==null&&n.C(i.Hh(i.actualBounds))}}get visible(){return(this.n&1)!==0}set visible(e){const t=(this.n&1)!==0;if(t!==e){this.n=this.n^1,this.nd(),this.t("visible",t,e);const n=this.panel;n!==null?n.c():this.Xs()&&this.Ei(e),this.C(),this.lA()}}get pickable(){return(this.n&2)!==0}set pickable(e){const t=(this.n&2)!==0;t!==e&&(this.n=this.n^2,this.t("pickable",t,e))}get fromLinkableDuplicates(){return(this.n&4)!==0}set fromLinkableDuplicates(e){const t=(this.n&4)!==0;t!==e&&(this.n=this.n^4,this.t("fromLinkableDuplicates",t,e))}get fromLinkableSelfNode(){return(this.n&8)!==0}set fromLinkableSelfNode(e){const t=(this.n&8)!==0;t!==e&&(this.n=this.n^8,this.t("fromLinkableSelfNode",t,e))}get toLinkableDuplicates(){return(this.n&16)!==0}set toLinkableDuplicates(e){const t=(this.n&16)!==0;t!==e&&(this.n=this.n^16,this.t("toLinkableDuplicates",t,e))}get toLinkableSelfNode(){return(this.n&32)!==0}set toLinkableSelfNode(e){const t=(this.n&32)!==0;t!==e&&(this.n=this.n^32,this.t("toLinkableSelfNode",t,e))}get isPanelMain(){return(this.n&64)!==0}set isPanelMain(e){const t=(this.n&64)!==0;t!==e&&(this.n=this.n^64,this.c(),this.t("isPanelMain",t,e))}get isActionable(){return(this.n&128)!==0}set isActionable(e){const t=(this.n&128)!==0;t!==e&&(this.n=this.n^128,this.t("isActionable",t,e))}get background(){return this.Ct}set background(e){const t=this.Ct;t!==e&&(e!==null&&ve.rd(e,"GraphObject.background"),e instanceof ve&&e.g(),this.Ct=e,this.C(),this.t("background",t,e))}o2(){return(this.n&512)!==0}Ob(e){e?this.n|=512:this.n&=-513}$c(){return(this.n&1024)!==0}a2(e){e?this.n|=1024:this.n&=-1025}Bb(){return(this.n&2048)!==0}od(e){e?this.n|=2048:this.n&=-2049}w0(){return(this.n&4096)!==0}wa(e){e?this.n|=4096:this.n&=-4097}Oo(){return(this.n&8192)!==0}ue(e){e?this.n|=8192:this.n&=-8193}is(){return(this.n&16384)!==0}_n(e){e?this.n|=16384:this.n&=-16385}FR(){return(this.n&32768)!==0}ss(e){e?this.n|=32768:this.n&=-32769}get part(){if(this.Xs())return this;if(this.Zr!==null)return this.Zr;let e=this;for(e=e.panel;e;){if(e instanceof xe)return this.Zr=e,e;e=e.panel}return null}get svg(){return this.Db}set svg(e){this.Db=e}Fu(){this.svg=null}get panel(){return this.Vs}xa(e){this.Vs=e,this.svg!==null&&this.svg.remove()}get layer(){const e=this.part;return e!==null?e.layer:null}get diagram(){const e=this.part;return e!==null?e.diagram:null}get position(){return this.at}set position(e){const t=e.x,n=e.y,i=this.at,r=i.x,a=i.y;r!==t&&(!isNaN(r)||!isNaN(t))||a!==n&&(!isNaN(a)||!isNaN(n))?(e=e.copy(),this.c2(e,r,a)&&this.t("position",new T(r,a),e)):this.f2()}f2(){}c2(e,t,n){return this.at=e,this.sf(),!0}bc(e,t,n){this.at.x===e&&this.at.y===t||(this.at.e(e,t),this.Qc())}get actualBounds(){return this.Li}get scale(){return this.et}set scale(e){const t=this.et;t!==e&&(e<=0&&o.o("GraphObject.scale for "+this+" must be greater than zero, not: "+e),this.et=e,this.c(),this.t("scale",t,e))}get angle(){return this.Xt}set angle(e){const t=this.Xt;if(t!==e){if(e=e%360,e<0&&(e+=360),t===e)return;this.Xt=e,this.lA(),this.c(),this.t("angle",t,e)}}get desiredSize(){return this.ze}set desiredSize(e){const t=e.width,n=e.height,i=this.ze,r=i.width,a=i.height;if((r!==t&&(!isNaN(r)||!isNaN(t))||a!==n&&(!isNaN(a)||!isNaN(n)))&&(e=e.N(),this.ze=e,this.c(),this instanceof Qt&&this.ee(),this.t("desiredSize",i,e),this.$c())){const l=this.part;l!==null&&(this.ya(l,"width"),this.ya(l,"height"))}}get width(){return this.ze.width}set width(e){const t=this.ze.width;if(t!==e&&(!isNaN(t)||!isNaN(e))){const n=this.ze,i=new B(e,this.ze.height).g();if(this.ze=i,this.c(),this instanceof Qt&&this.ee(),this.t("desiredSize",n,i),this.$c()){const r=this.part;r!==null&&this.ya(r,"width")}}}get height(){return this.ze.height}set height(e){const t=this.ze.height;if(t!==e&&(!isNaN(t)||!isNaN(e))){const n=this.ze,i=new B(this.ze.width,e).g();if(this.ze=i,this.c(),this instanceof Qt&&this.ee(),this.t("desiredSize",n,i),this.$c()){const r=this.part;r!==null&&this.ya(r,"height")}}}get minSize(){return this.f!==null?this.f.xr:B.lu}set minSize(e){const t=this.minSize;t.equals(e)||(e=e.copy(),isNaN(e.width)&&(e.width=0),isNaN(e.height)&&(e.height=0),e.g(),this.jt(),this.f.xr=e,this.c(),this.t("minSize",t,e))}get maxSize(){return this.f!==null?this.f.br:B.iC}set maxSize(e){const t=this.maxSize;t.equals(e)||(e=e.copy(),isNaN(e.width)&&(e.width=1/0),isNaN(e.height)&&(e.height=1/0),e.g(),this.jt(),this.f.br=e,this.c(),this.t("maxSize",t,e))}get measuredBounds(){return this.se}get naturalBounds(){return this.zi}x0(){return 0}get margin(){return this.$r}set margin(e){typeof e=="number"&&(e=new tt(e));const t=this.$r;t.equals(e)||(e=e.N(),this.$r=e,this.c(),this.t("margin",t,e))}get D(){return this.Bb()===!0&&this.Fb(),this.Jr}get Es(){return this.w0()===!0&&this.Fb(),this.oh}trigger(e,t,n){let i=null;return typeof e=="string"?i=new Pi(e,t,n):i=e,i.ke=this,this.ys===null&&(this.ys=new W),this.ys.set(i.propertyName,i),this}get ys(){return this.f!==null?this.f.ys:null}set ys(e){this.ys!==e&&(this.jt(),this.f.ys=e)}get wr(){return this.f!==null?this.f.wr:0}set wr(e){this.wr!==e&&(this.jt(),this.f.wr=e)}get alignment(){return this.oi}set alignment(e){const t=this.oi;t.equals(e)||(e.isNoSpot()&&!e.isDefault()&&o.o("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+e),e=e.N(),this.oi=e,this.sf(),this.t("alignment",t,e))}get column(){return this.Uo}set column(e){e=Math.round(e);const t=this.Uo;t!==e&&(e<0&&o._(e,">= 0",Jt,"column"),this.Uo=e,this.c(),this.t("column",t,e),this.svg!==null&&this.svg.remove())}get columnSpan(){return this.f!==null?this.f.F0:1}set columnSpan(e){e=Math.round(e);const t=this.columnSpan;t!==e&&(e<1&&o._(e,">= 1",Jt,"columnSpan"),this.jt(),this.f.F0=e,this.c(),this.t("columnSpan",t,e))}get row(){return this.Ju}set row(e){e=Math.round(e);const t=this.Ju;t!==e&&(e<0&&o._(e,">= 0",Jt,"row"),this.Ju=e,this.c(),this.t("row",t,e),this.svg!==null&&this.svg.remove())}get rowSpan(){return this.f!==null?this.f.R0:1}set rowSpan(e){e=Math.round(e);const t=this.rowSpan;t!==e&&(e<1&&o._(e,">= 1",Jt,"rowSpan"),this.jt(),this.f.R0=e,this.c(),this.t("rowSpan",t,e))}get spanAllocation(){return this.f!==null?this.f.v0:null}set spanAllocation(e){const t=this.spanAllocation;t!==e&&(e!==null&&o.i(e,"function",Jt,"spanAllocation"),this.jt(),this.f.v0=e,this.c(),this.t("spanAllocation",t,e))}get alignmentFocus(){return this.Wc}set alignmentFocus(e){const t=this.Wc;t.equals(e)||(e=e.N(),this.Wc=e,this.c(),this.t("alignmentFocus",t,e))}get portId(){return this.Wu}set portId(e){const t=this.Wu;if(t!==e){const n=this.part;n!==null&&!(n instanceof It)&&o.o("Cannot set portID on a Link: "+e);const i=n;t!==null&&i!==null&&i.u2(this),this.Wu=e,e!==null&&i!==null&&(i.wn=!0,i.hA(this)),this.t("portId",t,e)}}ba(){const e=this.part;if(e instanceof It&&(this.portId!==null||this===e.port)){const t=e.diagram;t!==null&&!t.undoManager.isUndoingRedoing&&e.tA(this)}}lA(){const e=this.diagram;e===null||e.undoManager.isUndoingRedoing||(this instanceof Kt?this instanceof It?this.invalidateConnectedLinks():this.walkVisualTreeFrom(this,t=>{t.ba()}):this.ba())}get toSpot(){return this.q!==null?this.q.ua:z.None}set toSpot(e){const t=this.toSpot;t.equals(e)||(e=e.N(),this.Xe(),this.q.ua=e,this.t("toSpot",t,e),this.ba())}get toEndSegmentLength(){return this.q!==null?this.q.ga:10}set toEndSegmentLength(e){const t=this.toEndSegmentLength;t!==e&&(e<0&&o._(e,">= 0",Jt,"toEndSegmentLength"),this.Xe(),this.q.ga=e,this.t("toEndSegmentLength",t,e),this.ba())}get toShortLength(){return this.q!==null?this.q.pa:0}set toShortLength(e){const t=this.toShortLength;t!==e&&(this.Xe(),this.q.pa=e,this.t("toShortLength",t,e),this.ba())}get toLinkable(){return this.q!==null?this.q.O0:null}set toLinkable(e){const t=this.toLinkable;t!==e&&(this.Xe(),this.q.O0=e,this.t("toLinkable",t,e))}get toMaxLinks(){return this.q!==null?this.q.I0:1/0}set toMaxLinks(e){const t=this.toMaxLinks;t!==e&&(e<0&&o._(e,">= 0",Jt,"toMaxLinks"),this.Xe(),this.q.I0=e,this.t("toMaxLinks",t,e))}get fromSpot(){return this.q!==null?this.q.fa:z.None}set fromSpot(e){const t=this.fromSpot;t.equals(e)||(e=e.N(),this.Xe(),this.q.fa=e,this.t("fromSpot",t,e),this.ba())}get fromEndSegmentLength(){return this.q!==null?this.q.da:10}set fromEndSegmentLength(e){const t=this.fromEndSegmentLength;t!==e&&(e<0&&o._(e,">= 0",Jt,"fromEndSegmentLength"),this.Xe(),this.q.da=e,this.t("fromEndSegmentLength",t,e),this.ba())}get fromShortLength(){return this.q!==null?this.q.ma:0}set fromShortLength(e){const t=this.fromShortLength;t!==e&&(this.Xe(),this.q.ma=e,this.t("fromShortLength",t,e),this.ba())}get fromLinkable(){return this.q!==null?this.q.E0:null}set fromLinkable(e){const t=this.fromLinkable;t!==e&&(this.Xe(),this.q.E0=e,this.t("fromLinkable",t,e))}get fromMaxLinks(){return this.q!==null?this.q.B0:1/0}set fromMaxLinks(e){const t=this.fromMaxLinks;t!==e&&(e<0&&o._(e,">= 0",Jt,"fromMaxLinks"),this.Xe(),this.q.B0=e,this.t("fromMaxLinks",t,e))}get cursor(){return this.f!==null?this.f.Pl:""}set cursor(e){const t=this.cursor;t!==e&&(o.i(e,"string",Jt,"cursor"),this.jt(),this.f.Pl=e,this.t("cursor",t,e))}get click(){return this.f!==null?this.f.Tr:null}set click(e){const t=this.click;t!==e&&(e!==null&&o.i(e,"function",Jt,"click"),this.jt(),this.f.Tr=e,this.t("click",t,e))}get doubleClick(){return this.f!==null?this.f.Dr:null}set doubleClick(e){const t=this.doubleClick;t!==e&&(e!==null&&o.i(e,"function",Jt,"doubleClick"),this.jt(),this.f.Dr=e,this.t("doubleClick",t,e))}get contextClick(){return this.f!==null?this.f.Fr:null}set contextClick(e){const t=this.contextClick;t!==e&&(e!==null&&o.i(e,"function",Jt,"contextClick"),this.jt(),this.f.Fr=e,this.t("contextClick",t,e))}get mouseEnter(){return this.f!==null?this.f.Er:null}set mouseEnter(e){const t=this.mouseEnter;t!==e&&(e!==null&&o.i(e,"function",Jt,"mouseEnter"),this.jt(),this.f.Er=e,this.t("mouseEnter",t,e))}get mouseLeave(){return this.f!==null?this.f.Br:null}set mouseLeave(e){const t=this.mouseLeave;t!==e&&(e!==null&&o.i(e,"function",Jt,"mouseLeave"),this.jt(),this.f.Br=e,this.t("mouseLeave",t,e))}get mouseOver(){return this.f!==null?this.f.Rr:null}set mouseOver(e){const t=this.mouseOver;t!==e&&(e!==null&&o.i(e,"function",Jt,"mouseOver"),this.jt(),this.f.Rr=e,this.t("mouseOver",t,e))}get mouseHover(){return this.f!==null?this.f.vr:null}set mouseHover(e){const t=this.mouseHover;t!==e&&(e!==null&&o.i(e,"function",Jt,"mouseHover"),this.jt(),this.f.vr=e,this.t("mouseHover",t,e))}get mouseHold(){return this.f!==null?this.f.Or:null}set mouseHold(e){const t=this.mouseHold;t!==e&&(e!==null&&o.i(e,"function",Jt,"mouseHold"),this.jt(),this.f.Or=e,this.t("mouseHold",t,e))}get mouseDragEnter(){return this.f!==null?this.f.U0:null}set mouseDragEnter(e){const t=this.mouseDragEnter;t!==e&&(e!==null&&o.i(e,"function",Jt,"mouseDragEnter"),this.jt(),this.f.U0=e,this.t("mouseDragEnter",t,e))}get mouseDragLeave(){return this.f!==null?this.f.V0:null}set mouseDragLeave(e){const t=this.mouseDragLeave;t!==e&&(e!==null&&o.i(e,"function",Jt,"mouseDragLeave"),this.jt(),this.f.V0=e,this.t("mouseDragLeave",t,e))}get mouseDrop(){return this.f!==null?this.f.Ir:null}set mouseDrop(e){const t=this.mouseDrop;t!==e&&(e!==null&&o.i(e,"function",Jt,"mouseDrop"),this.jt(),this.f.Ir=e,this.t("mouseDrop",t,e))}get actionDown(){return this.f!==null?this.f.z0:null}set actionDown(e){const t=this.actionDown;t!==e&&(e!==null&&o.i(e,"function",Jt,"actionDown"),this.jt(),this.f.z0=e,this.t("actionDown",t,e))}get actionMove(){return this.f!==null?this.f.X0:null}set actionMove(e){const t=this.actionMove;t!==e&&(e!==null&&o.i(e,"function",Jt,"actionMove"),this.jt(),this.f.X0=e,this.t("actionMove",t,e))}get actionUp(){return this.f!==null?this.f.K0:null}set actionUp(e){const t=this.actionUp;t!==e&&(e!==null&&o.i(e,"function",Jt,"actionUp"),this.jt(),this.f.K0=e,this.t("actionUp",t,e))}get actionCancel(){return this.f!==null?this.f.Y0:null}set actionCancel(e){const t=this.actionCancel;t!==e&&(e!==null&&o.i(e,"function",Jt,"actionCancel"),this.jt(),this.f.Y0=e,this.t("actionCancel",t,e))}get toolTip(){return this.f!==null?this.f.Ur:null}set toolTip(e){const t=this.toolTip;t!==e&&(this.jt(),this.f.Ur=e,this.t("toolTip",t,e))}get contextMenu(){return this.f!==null?this.f.Vr:null}set contextMenu(e){const t=this.contextMenu;t!==e&&(this.jt(),this.f.Vr=e,this.t("contextMenu",t,e))}findBindingPanel(){let e=this instanceof Kt?this:this.panel;for(;e!==null;){if(e.d2())return e;e=e.panel}return null}bind(e,t,n,i){return this.nf(e,t,n,i),this}bindTwoWay(e,t,n,i){return this.nf(e,t,n,i).makeTwoWay(),this}bindModel(e,t,n,i){return this.nf(e,t,n,i).ofModel(),this}bindObject(e,t,n,i,r){return this.nf(e,t,n,i).ofObject(r),this}theme(e,t,n,i,r){return this.uh(e,t,n,i,r),this}themeData(e,t,n,i,r){return this.uh(e,t,n,i,r).ofData(),this}themeObject(e,t,n,i,r,a){return this.uh(e,t,n,i,r).ofObject(a),this}themeModel(e,t,n,i,r){return this.uh(e,t,n,i,r).ofModel(),this}nf(e,t,n,i){let r=null;return typeof e=="string"?r=new rr(e,t,n,i):r=e,this.G0(r),r}uh(e,t,n,i,r){let a=null;return typeof e=="string"?a=new Bo(e,t,n,i,r):a=e,this.G0(a),a}G0(e){e.ke=this;const t=this.findBindingPanel();t!==null&&t.aA()&&o.o("Cannot add a Binding to a template that has already been copied: "+e),this.Ai===null&&(this.Ai=new M),this.Ai.add(e)}set(e){return Object.assign(this,e),this}attach(e){return Jt.g2(this,e),this}apply(e){return e(this),this}setProperties(e){return le.a0(this,e),this}static build(e,t,...n){const i=Jt.j0.get(e);if(typeof i=="function"){const r=i([e].concat(n));if(r instanceof Jt)return t&&r.setProperties(t),r}o.o('GraphObject.build invoked object builder "'+e+'", but it did not return an Object')}static make(e,...t){let n=arguments,i=null,r=null;if(typeof e=="function")r=e;else if(typeof e=="string"){const l=Jt.j0.get(e);typeof l=="function"?(n=Array.prototype.slice.call(n),i=l(n),o.wt(i)||o.o('GraphObject.make invoked object builder "'+e+'", but it did not return an Object')):r=s.go[e]}i===null&&((r==null||!r.constructor)&&o.o("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+e),i=new r);let a=1;if(i instanceof le&&n.length>1){const l=i,u=n[1];(typeof u=="string"||u instanceof HTMLDivElement)&&(l.mM(u),a++)}for(let l=a;l<n.length;l++){const u=n[l];u===void 0?o.o("Undefined value at argument "+l+" for object being constructed by GraphObject.make: "+i):Jt.g2(i,u)}return i}static g2(e,t){if(typeof t=="number")Jt.OR(e,t);else if(typeof t=="string")Jt.IR(e,t);else if(t instanceof Jt)e instanceof Kt||o.o("A GraphObject can only be added to a Panel, not to: "+e),e.add(t);else if(t instanceof ui){let n;t.isRow&&typeof e.getRowDefinition=="function"?n=e.getRowDefinition(t.index):!t.isRow&&typeof e.getColumnDefinition=="function"&&(n=e.getColumnDefinition(t.index)),n instanceof ui?n.Ub(t):o.o("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+e)}else if(t instanceof de){const n=e;n.type=t}else if(t instanceof rr)e instanceof Jt||e instanceof ui?e.bind(t):o.o("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+e);else if(t instanceof Pi)e instanceof Jt?e.trigger(t):o.o("An AnimationTrigger can only be applied to a GraphObject, not to: "+e);else if(t instanceof dt)e instanceof rt&&e.type===4?e.figures.add(t):o.o("A PathFigure can only be added to a Path Geometry, not to: "+e);else if(t instanceof ct)e instanceof dt?e.segments.add(t):o.o("A PathSegment can only be added to a PathFigure, not to: "+e);else if(t instanceof Yn)e instanceof le||e instanceof Vt?e.layout=t:o.o("A Layout can only be assigned to a Diagram or a Group, not to: "+e);else if(Array.isArray(t))for(let n=0;n<t.length;n++){const i=t[n];Jt.g2(e,i)}else typeof t=="object"&&t!==null?Jt.ER(e,t):o.o('Unknown initializer "'+t+'" for object being constructed by GraphObject.make: '+e)}static IR(e,t){if(e instanceof Je)e.text=t;else if(e instanceof Qt)e.figure=t;else if(e instanceof Vi)e.source=t;else if(e instanceof Kt){const n=de.Layouts.get(t);n!==null&&(e.type=n)}else if(e instanceof ve){const n=o.Ih(Xn,t);n!==null?e.type=n:o.o("Unknown Brush type as an argument to GraphObject.make: "+t)}else if(e instanceof rt){const n=o.Ih(ot,t);n!==null&&(e.type=n)}else if(e instanceof ct){const n=o.Ih(Pt,t);n!==null&&(e.type=n)}}static OR(e,t){typeof e.ri=="function"?e.ri(t):o.lr(e,t)}static ER(e,t){if(e instanceof ve){const n=new d;for(const i in t){const r=parseFloat(i);isNaN(r)?n[i]=t[i]:e.addColorStop(r,t[i])}le.a0(e,n)}else if(e instanceof ui){if(t.row!==void 0){const i=t.row;(i==null||i===1/0||isNaN(i)||i<0)&&o.o("Must specify non-negative integer row for RowColumnDefinition "+t+", not: "+i),e.isRow=!0,e.index=i}else if(t.column!==void 0){const i=t.column;(i==null||i===1/0||isNaN(i)||i<0)&&o.o("Must specify non-negative integer column for RowColumnDefinition "+t+", not: "+i),e.isRow=!1,e.index=i}const n=new d;for(const i in t)i==="row"||i==="column"||(n[i]=t[i]);le.a0(e,n)}else le.a0(e,t)}static fE(){const e=new W;for(const t in Jt.j0){if(t===t.toLowerCase())continue;const n=Jt.j0.get(t);typeof n=="function"&&e.set(t,n)}return e.g(),e}static defineBuilder(e,t){o.i(e,"string",Jt,"defineBuilder:name"),o.i(t,"function",Jt,"defineBuilder:func"),e.toLowerCase(),Jt.j0.set(e,t)}static takeBuilderArgument(e,t,n){n===void 0&&(n=null);const i=e[1];if(typeof n=="function"?n(i):typeof i=="string")return e.splice(1,1),i;if(t===void 0)throw new Error("no "+(typeof n=="function"?"satisfactory":"string")+" argument for GraphObject builder "+e[0]);return t}};v(Jt,"None",0),v(Jt,"Default",1),v(Jt,"Fill",2),v(Jt,"Vertical"),v(Jt,"Horizontal"),v(Jt,"Uniform",6),v(Jt,"UniformToFill",7),v(Jt,"FlipVertical",1),v(Jt,"FlipHorizontal",2),v(Jt,"FlipBoth",3),v(Jt,"j0",new W),Jt.Vertical=4,Jt.Horizontal=5,Jt.defineBuilder("Button",e=>{const t="#f5f5f5",n="#737373",i="#d4d4d4",r="#737373",a="#a3a3a3",l=2.76142374915397,u=2.761423749153969,c=new Kt(Kt.Auto,{isActionable:!0,enabledChanged:(f,m)=>{if(f instanceof Kt){const p=f.findObject("ButtonBorder");p!==null&&(m?(f._buttonFillDisabled=p.fill,p.fill=f._buttonFillNormal):(f._buttonFillNormal=p.fill,p.fill=f._buttonFillDisabled))}},cursor:"pointer"}).attach({_buttonFillNormal:t,_buttonStrokeNormal:n,_buttonFillOver:i,_buttonStrokeOver:r,_buttonFillDisabled:a}).add(new Qt("RoundedRectangle",{name:"ButtonBorder",spot1:new z(0,0,l,u),spot2:new z(1,1,-l,-u),parameter1:2,fill:t,stroke:n}));return c.mouseEnter=(f,m,p)=>{if(!m.isEnabledObject()||!(m instanceof Kt))return;const y=m.findObject("ButtonBorder");y instanceof Qt&&(m._buttonFillNormal=y.fill,y.fill=m._buttonFillOver,m._buttonStrokeNormal=y.stroke,y.stroke=m._buttonStrokeOver)},c.mouseLeave=(f,m,p)=>{if(!m.isEnabledObject()||!(m instanceof Kt))return;const y=m.findObject("ButtonBorder");y instanceof Qt&&(y.fill=m._buttonFillNormal,y.stroke=m._buttonStrokeNormal)},c}),Jt.defineBuilder("TreeExpanderButton",e=>{const t=Jt.build("Button");return t.attach({_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine",visible:!1}),t.add(new Qt("MinusLine",{name:"ButtonIcon",stroke:"#0a0a0a",strokeWidth:2,desiredSize:B.hu}).bindObject("figure","isTreeExpanded",(n,i)=>{const r=i.panel;return n?r._treeExpandedFigure:r._treeCollapsedFigure})),t.bindObject("visible","isTreeLeaf",n=>!n),t.click=(n,i)=>{let r=i.part;if(r instanceof ie&&(r=r.adornedPart),!(r instanceof It))return;const a=r.diagram;if(a===null)return;const l=a.commandHandler;if(r.isTreeExpanded){if(!l.canCollapseTree(r))return}else if(!l.canExpandTree(r))return;n.handled=!0,r.isTreeExpanded?l.collapseTree(r):l.expandTree(r)},t}),Jt.defineBuilder("SubGraphExpanderButton",e=>{const t=Jt.build("Button");return t.attach({_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"}),t.add(new Qt("MinusLine",{name:"ButtonIcon",stroke:"#0a0a0a",strokeWidth:2,desiredSize:B.hu}).bindObject("figure","isSubGraphExpanded",(n,i)=>{const r=i.panel;return n?r._subGraphExpandedFigure:r._subGraphCollapsedFigure})),t.click=(n,i)=>{let r=i.part;if(r instanceof ie&&(r=r.adornedPart),!(r instanceof Vt))return;const a=r.diagram;if(a===null)return;const l=a.commandHandler;if(r.isSubGraphExpanded){if(!l.canCollapseSubGraph(r))return}else if(!l.canExpandSubGraph(r))return;n.handled=!0,r.isSubGraphExpanded?l.collapseSubGraph(r):l.expandSubGraph(r)},t}),Jt.defineBuilder("ToolTip",e=>new ie(Kt.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new T(0,2)}).add(new Qt("RoundedRectangle",{name:"Border",parameter1:1,fill:"#f5f5f5",strokeWidth:0,spot1:new z(0,0,4,6),spot2:new z(1,1,-4,-4)}))),Jt.defineBuilder("ContextMenu",e=>new ie(Kt.Vertical,{background:"#f5f5f5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new T(0,2)}).bindObject("background","",t=>t.adornedPart!==null&&t.hasPlaceholder()?null:"#f5f5f5")),Jt.defineBuilder("ContextMenuButton",e=>{const t=Jt.build("Button");t.stretch=5;const n=t.findObject("ButtonBorder");return n instanceof Qt&&(n.figure="Rectangle",n.strokeWidth=0,n.spot1=new z(0,0,4,6),n.spot2=new z(1,1,-4,-4)),t}),Jt.defineBuilder("PanelExpanderButton",e=>{const t=Jt.takeBuilderArgument(e,"COLLAPSIBLE"),n=Jt.build("Button");n.attach({_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null}),n.add(new Qt({name:"ButtonIcon",strokeWidth:2}).bindObject("geometryString","visible",r=>r?n._buttonExpandedFigure:n._buttonCollapsedFigure,void 0,t));const i=n.findObject("ButtonBorder");return i instanceof Qt&&(i.stroke=null,i.fill="rgba(0, 0, 0, 0)"),n.click=(r,a)=>{if(!(a instanceof Kt))return;const l=a.diagram;if(l===null||l.isReadOnly)return;let u=a.findBindingPanel();if(u===null&&(u=a.part),u!==null){const c=u.findObject(t);c!==null&&(r.handled=!0,l.startTransaction("Collapse/Expand Panel"),c.visible=!c.visible,l.commitTransaction("Collapse/Expand Panel"))}},n}),Jt.defineBuilder("CheckBoxButton",e=>{const t=Jt.takeBuilderArgument(e),n=Jt.build("Button",{desiredSize:new B(14,14)});n.attach({"ButtonBorder.spot1":new z(0,0,1,1),"ButtonBorder.spot2":new z(1,1,-1,-1)});const i=new Qt({name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:2,geometryStretch:6,visible:!1});return t!==""&&i.bindTwoWay("visible",t),n.add(i),n.click=(r,a)=>{if(!(a instanceof Kt))return;const l=r.diagram;if(l===null||l.isReadOnly||t!==""&&l.model.isReadOnly)return;r.handled=!0;const u=a.findObject("ButtonIcon");l.startTransaction("checkbox"),u!==null&&(u.visible=!u.visible),typeof a._doClick=="function"&&a._doClick(r,a),l.commitTransaction("checkbox")},n}),Jt.defineBuilder("CheckBox",e=>{const t=Jt.takeBuilderArgument(e),n=Jt.build("CheckBoxButton",{name:"Button",isActionable:!1,margin:new tt(0,1,0,0)},t),i=new Kt("Horizontal",{isActionable:!0,cursor:n.cursor,margin:new tt(1),mouseEnter:n.mouseEnter,mouseLeave:n.mouseLeave,click:n.click}).attach({_buttonFillNormal:n._buttonFillNormal,_buttonStrokeNormal:n._buttonStrokeNormal,_buttonFillOver:n._buttonFillOver,_buttonStrokeOver:n._buttonStrokeOver,_buttonFillDisabled:n._buttonFillDisabled,_buttonClick:n.click});return i.add(n),n.mouseEnter=null,n.mouseLeave=null,n.click=null,i});let Re=Jt;class Me{constructor(){v(this,"gi");v(this,"Mt");v(this,"$n");v(this,"Ai");v(this,"Zn");v(this,"Ks");v(this,"Pl");v(this,"Tr");v(this,"Dr");v(this,"Fr");v(this,"Er");v(this,"Br");v(this,"Rr");v(this,"vr");v(this,"Or");v(this,"U0");v(this,"V0");v(this,"Ir");v(this,"z0");v(this,"X0");v(this,"K0");v(this,"Y0");v(this,"Ur");v(this,"Vr");v(this,"M0");v(this,"v0");v(this,"ys");v(this,"xr");v(this,"br");v(this,"to");v(this,"R0");v(this,"F0");v(this,"wr");v(this,"P0");v(this,"H0");v(this,"q0");this.gi=!1,this.Mt="",this.$n=-1,this.Ai=null,this.Zn=null,this.Ks=null,this.Pl="",this.Tr=null,this.Dr=null,this.Fr=null,this.Er=null,this.Br=null,this.Rr=null,this.vr=null,this.Or=null,this.U0=null,this.V0=null,this.Ir=null,this.z0=null,this.X0=null,this.K0=null,this.Y0=null,this.Ur=null,this.Vr=null,this.M0=null,this.v0=null,this.ys=null,this.xr=B.lu,this.br=B.iC,this.to=1,this.R0=1,this.F0=1,this.wr=0,this.P0=null,this.H0=null,this.q0="category"}copy(){const e=new Me;return e.Mt=this.Mt,e.$n=this.$n,e.Ai=this.Ai,e.Ks=this.Ks,e.Pl=this.Pl,e.Tr=this.Tr,e.Dr=this.Dr,e.Fr=this.Fr,e.Er=this.Er,e.Br=this.Br,e.Rr=this.Rr,e.vr=this.vr,e.Or=this.Or,e.U0=this.U0,e.V0=this.V0,e.Ir=this.Ir,e.z0=this.z0,e.X0=this.X0,e.K0=this.K0,e.Y0=this.Y0,e.Ur=this.Ur,e.Vr=this.Vr,e.M0=this.M0,e.v0=this.v0,e.ys=this.ys,e.xr=this.xr.N(),e.br=this.br.N(),e.to=this.to,e.R0=this.R0,e.F0=this.F0,e.wr=this.wr,e.P0=this.P0,e.H0=this.H0,e.q0=this.q0,e}}class Bi{constructor(){v(this,"m");this.m=[1,0,0,1,0,0]}copy(){const e=new Bi;return e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5],e}translate(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}scale(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}rotate(e,t,n){if(e>=360?e-=360:e<0&&(e+=360),e===0)return;this.translate(t,n);let i=0,r=0;if(e===90)i=0,r=1;else if(e===180)i=-1,r=0;else if(e===270)i=0,r=-1;else{const f=e*Math.PI/180;i=Math.cos(f),r=Math.sin(f)}const a=this.m[0]*i+this.m[2]*r,l=this.m[1]*i+this.m[3]*r,u=this.m[0]*-r+this.m[2]*i,c=this.m[1]*-r+this.m[3]*i;this.m[0]=a,this.m[1]=l,this.m[2]=u,this.m[3]=c,this.translate(-t,-n)}}class ji{constructor(e){v(this,"type");v(this,"x1");v(this,"y1");v(this,"r1");v(this,"x2");v(this,"y2");v(this,"r2");v(this,"colors");v(this,"pattern");this.type=e,this.x1=0,this.y1=0,this.r1=0,this.x2=0,this.y2=0,this.r2=0,this.colors=[],this.pattern=null}addColorStop(e,t){this.colors.push({offset:e,color:t})}}class ze{constructor(e,t,n){v(this,"Ft");v(this,"ai");v(this,"aa");v(this,"Hu");v(this,"m2");const i=t===void 0?s.document:t;this.aa=i,this.m2="http://www.w3.org/2000/svg";const r="http://www.w3.org/2000/xmlns/";i!==void 0&&(this.Ft=this.makeElement("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.style.display="block",this.style.letterSpacing="normal",this.style.wordSpacing="normal",n||(this.style.position="absolute"),this.Ft.setAttributeNS(r,"xmlns",this.m2),this.Ft.setAttributeNS(r,"xmlns:xlink","http://www.w3.org/1999/xlink")),this.Hu=null,this.ai=new Pe(this,n)}resize(e,t,n,i){return this.width!==e||this.height!==t?(this.width=e,this.height=t,this.style.width=n+"px",this.style.height=i+"px",this.Ft.setAttributeNS(null,"width",n+"px"),this.Ft.setAttributeNS(null,"height",i+"px"),this.Ft.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.ai.p2.firstElementChild.setAttributeNS(null,"width",n+"px"),this.ai.p2.firstElementChild.setAttributeNS(null,"height",i+"px"),!0):!1}makeElement(e,t,n){const i=this.aa.createElementNS(this.m2,e);if(o.wt(t))for(const r in t)i.setAttributeNS(r==="href"?"http://www.w3.org/1999/xlink":"",r,t[r]);return n!==void 0&&(i.textContent=n),i}getBoundingClientRect(){return this.Ft.getBoundingClientRect()}focus(){this.Ft.focus()}get width(){return this.Ft.width.baseVal.value}set width(e){this.Ft.setAttribute("width",e+"px")}get height(){return this.Ft.height.baseVal.value}set height(e){this.Ft.setAttribute("height",e+"px")}dispose(){this.aa=null}get style(){return this.Ft.style}}class Pe{constructor(e,t){v(this,"of");v(this,"rf");v(this,"xn");v(this,"Ti");v(this,"Ke");v(this,"fillStyle");v(this,"font");v(this,"globalAlpha");v(this,"lineCap");v(this,"lineDashOffset");v(this,"lineJoin");v(this,"lineWidth");v(this,"miterLimit");v(this,"shadowBlur");v(this,"shadowColor");v(this,"shadowOffsetX");v(this,"shadowOffsetY");v(this,"strokeStyle");v(this,"textAlign");v(this,"imageSmoothingEnabled");v(this,"clipInsteadOfFill");v(this,"lastCreatedElement");v(this,"lf");v(this,"hf");v(this,"surface");v(this,"svg");v(this,"p2");v(this,"cA");v(this,"Vb");v(this,"Xo");v(this,"dh");v(this,"ka");v(this,"currentElement");v(this,"clipPathGroup");v(this,"diagramGroup");v(this,"lastDrawnPart");v(this,"currentPath");v(this,"outerGroup");v(this,"pathAttributes");v(this,"_r");v(this,"Mr");v(this,"filter");v(this,"partClipRect");this.surface=e,this.svg=e.Ft,this.lf=[],this.hf=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetX=0,this.shadowOffsetY=0,this._r=!1,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.of=0,this.rf=0,this.xn=0,this.lastCreatedElement=null,this.currentElement=null,this.Ti=[],this.pathAttributes={},this.Vb=!1,this.Xo=null,this.dh=0,this.Ke=new Bi,this.clipPathGroup=this.newGroup2(),this.diagramGroup=this.newGroup2("gojs-diagram"),this.lastDrawnPart=null,this.currentPath=null;const n=L.nu++,i=this.makeElement("clipPath",{id:"mainClip"+n}),r={x:0,y:0,width:e.width,height:e.height};i.appendChild(this.makeElement("rect",r)),this.p2=i,this.svg.appendChild(this.clipPathGroup),this.clipPathGroup.appendChild(this.diagramGroup),this.svg.appendChild(i),this.clipPathGroup.setAttributeNS(null,"clip-path","url(#mainClip"+n+")"),this.cA={},this.Mr=!!t,this.filter="",this.partClipRect=null}setDiagramPosScale(e,t,n,i,r,a){this.diagramGroup===void 0?this.newGroup(e,t,n,i,r,a):this.diagramGroup.setAttribute("transform","matrix("+e+", "+t+", "+n+", "+i+", "+r+", "+a+")")}resetInnerSVG(){this.diagramGroup!==null&&(this.diagramGroup.innerHTML="")}arc(e,t,n,i,r,a,l,u){const c=2*Math.PI,f=1e-6,m=c-f,p=n*Math.cos(i),y=n*Math.sin(i),w=e+p,b=t+y,C=a?0:1;let k=a?i-r:r-i;(Math.abs(l-w)>f||Math.abs(u-b)>f)&&this.Ti.push(["L",w,+b]),k<0&&(k=k%c+c),k>m?(this.Ti.push(["A",n,n,0,1,C,e-p,t-y]),this.Ti.push(["A",n,n,0,1,C,w,b])):k>f&&this.Ti.push(["A",n,n,0,+(k>=Math.PI),C,e+n*Math.cos(r),t+n*Math.sin(r)])}beginPath(){this.Ti=[],this.pathAttributes={stroke:"none",fill:"none"}}endPath(e){this.BR(this.Ti,this.Ke,e||0)}bezierCurveTo(e,t,n,i,r,a){this.Ti.push(["C",e,t,n,i,r,a])}clearRect(e,t,n,i){}clip(){this.pathAttributes.clipPath=!0}closePath(){this.Ti.push(["z"])}createLinearGradient(e,t,n,i){const r=new ji("linear");return r.x1=e,r.y1=t,r.x2=n,r.y2=i,r}createPattern(e,t){let n="";e instanceof HTMLCanvasElement&&(n=e.toDataURL()),e instanceof HTMLImageElement&&(n=e.getAttribute("src"));const i=this.cA;if(i[n])return"url(#"+i[n]+")";const r="PATTERN"+L.nu++,a={width:e.width,height:e.height,id:r,patternUnits:"userSpaceOnUse"},l={x:0,y:0,width:e.width,height:e.height,href:n},u=this.makeElement("pattern",a);return u.appendChild(this.makeElement(le.img,l)),this.svg.appendChild(u),i[n]=r,"url(#"+r+")"}createRadialGradient(e,t,n,i,r,a){const l=new ji("radial");return l.x1=e,l.y1=t,l.r1=n,l.x2=i,l.y2=r,l.r2=a,l}amendImageTransform(e,t,n,i,r,a,l,u){const c=l/n,f=u/i;(r!==0||a!==0)&&this.Ke.translate(r,a),(c!==1||f!==1)&&this.Ke.scale(c,f),(e!==0||t!==0)&&this.Ke.translate(-e,-t)}drawImage(e,t,n,i,r,a,l,u,c){let f="";e instanceof HTMLCanvasElement&&(f=e.toDataURL()),e instanceof HTMLImageElement&&(f=e.getAttribute("src"));const m=e instanceof HTMLImageElement?e.naturalWidth:e.width,p=e instanceof HTMLImageElement?e.naturalHeight:e.height;i===void 0&&(a=t,l=n,u=i=m,c=r=p),i=i||0,r=r||0,a=a||0,l=l||0,u=u||0,c=c||0,this.amendImageTransform(t,n,i,r,a,l,u,c);const y={x:0,y:0,width:m||i,height:p||r,href:f};!R.K(i,u)||!R.K(r,c)?y.preserveAspectRatio="none":f.toLowerCase().indexOf(".svg")===-1&&f.toLowerCase().indexOf("data:image/svg")===-1&&(y.preserveAspectRatio="xMidYMid slice"),(t!==0||n!==0||i!==m||r!==p)&&(i+=t,r+=n,y["clip-path"]=`path('M ${t},${n} L ${i} ${n} L ${i} ${r} L ${t} ${r} z')`),this.processCommon(le.img,y,this.Ke),this.ld(le.img,y)}fill(e,t){e&&(this.pathAttributes["fill-rule"]="evenodd"),this.setFill(this.pathAttributes)}fillContext(e,t,n){this.clipInsteadOfFill?this.clip():this.fill(t,n)}createOrUpdateClipGroup(e,t){const n=this.newGroup(1,0,0,1,-t.x,-t.y);n.setAttributeNS(null,"class","spotClip"),e.rh=n}fillRect(e,t,n,i){this.addRect("fill",[e,t,n,i],this.Ke)}fillBackground(e,t,n,i){const r={x:e,y:t,width:n,height:i};this.processCommon("fill",r,this.Ke),this.setFill(r),this.svg.prepend(this.makeElement("rect",r))}fillText(e,t,n){this.addText("fill",[e,t,n],this.Ke)}lineTo(e,t){this.Ti.push(["L",e,t])}moveTo(e,t){this.Ti.push(["M",e,t])}quadraticCurveTo(e,t,n,i){this.Ti.push(["Q",e,t,n,i])}rect(e,t,n,i){this.Ti.push(["M",e,t],["L",e+n,t],["L",e+n,t+i],["L",e,t+i],["z"])}restore(){this.Ke=this.lf.pop(),this.Ti=this.lf.pop();const e=this.lf.pop();this.fillStyle=e.fillStyle,this.font=e.font,this.globalAlpha=e.globalAlpha,this.lineCap=e.lineCap,this.lineDashOffset=e.lineDashOffset,this.lineJoin=e.lineJoin,this.lineWidth=e.lineWidth,this.miterLimit=e.miterLimit,this.shadowBlur=e.shadowBlur,this.shadowColor=e.shadowColor,this.shadowOffsetX=e.shadowOffsetX,this.shadowOffsetY=e.shadowOffsetY,this.strokeStyle=e.strokeStyle,this.textAlign=e.textAlign,this.partClipRect=e.partClipRect}save(){const e={fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign,partClipRect:this.partClipRect};this.lf.push(e);const t=[];for(let n=0;n<this.Ti.length;n++)t.push(this.Ti[n]);this.lf.push(t),this.lf.push(this.Ke.copy())}setTransform(e,t,n,i,r,a){e===1&&t===0&&n===0&&i===1&&r===0&&a===0||this.newGroup(e,t,n,i,r,a)}setCurrentTransform(e,t,n,i,r,a){this.Ke.m=[e,t,n,i,r,a]}getCurrentTransform(){const e=this.Ke.m;return"matrix("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}scale(e,t){this.Ke.scale(e,t)}translate(e,t){this.Ke.translate(e,t)}transform(e,t,n,i,r,a){}commitTransform(){}stroke(){this.setStroke(this.pathAttributes)}strokeContext(){this.clipInsteadOfFill||this.stroke()}strokeRect(e,t,n,i){this.addRect("stroke",[e,t,n,i],this.Ke)}makeElement(e,t,n){return this.surface.makeElement(e,t,n)}ld(e,t,n){const i=this.makeElement(e,t,n);return this.currentElement!==null?this.currentElement.appendChild(i):this.currentElement=i,this.lastCreatedElement=i,i}processCommon(e,t,n){if(e==="fill"?this.setFill(t):e==="stroke"&&this.setStroke(t),n!==null){const i=n.m;t.transform="matrix("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")"}}setFill(e){if(this.fillStyle instanceof ji){e.fill=this.addGradient(this.fillStyle,!0);return}if(/^rgba\(/.test(this.fillStyle)){const t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.fillStyle);e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]}else e.fill=this.fillStyle}setFillOrStrokeInPlace(e,t){const n=t?"fill":"stroke";if(this.fillStyle instanceof ji){e.setAttributeNS(null,"fill",this.addGradient(this.fillStyle,!0));return}if(/^rgba\(/.test(this.fillStyle)){const i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.fillStyle);e.setAttributeNS(null,n,"rgb("+i[1]+","+i[2]+","+i[3]+")"),e.setAttributeNS(null,n+"-opacity",i[4])}else e.setAttributeNS(null,n,this.fillStyle)}setStroke(e){if(this.strokeStyle instanceof ji)e.stroke=this.addGradient(this.strokeStyle,!1);else if(/^rgba\(/.test(this.strokeStyle)){const t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.strokeStyle);e.stroke="rgb("+t[1]+","+t[2]+","+t[3]+")",e["stroke-opacity"]=t[4]}else e.stroke=this.strokeStyle;e["stroke-width"]=this.lineWidth,e["stroke-linecap"]=this.lineCap,e["stroke-linejoin"]=this.lineJoin,e["stroke-miterlimit"]=this.miterLimit,this.Vb&&(e["stroke-dasharray"]=this.Xo.toString(),e["stroke-dashoffset"]=this.dh)}addGradient(e,t){let n="";const i=this.currentPath!==null?this.currentPath.getAttribute(t?"fill":"stroke"):null;if(i!==null&&i.indexOf("GRAD")!==-1){n=i.split("#")[1].slice(0,-1);const c=this.svg.getElementById(n);c!==null&&c.remove()}else n="GRAD"+L.nu++;let r;if(e.type==="linear"){const c={x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"};r=this.makeElement("linearGradient",c)}else if(e.type==="radial"){const c={x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n};r=this.makeElement("radialGradient",c)}else throw new Error("invalid gradient");const a=e.colors,l=a.length,u=[];for(let c=0;c<l;c++){const f=a[c],m=f.color,p={offset:f.offset,"stop-color":m};if(/^rgba\(/.test(m)){const y=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m);p["stop-color"]="rgb("+y[1]+","+y[2]+","+y[3]+")",p["stop-opacity"]=y[4]}u.push(p)}u.sort((c,f)=>c.offset>f.offset?1:-1);for(let c=0;c<l;c++)r.appendChild(this.makeElement("stop",u[c]));return this.svg.appendChild(r),"url(#"+n+")"}addRect(e,t,n){const i={x:t[0],y:t[1],width:t[2],height:t[3]};this.processCommon(e,i,n),this.ld("rect",i)}addText(e,t,n){let i=this.textAlign;i==="left"?i="start":i==="right"?i="end":i==="center"&&(i="middle");const r={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":i};this.processCommon(e,r,n),this.ld("text",r,t[0])}BR(e,t,n){const i=this.UR(e),r=this.pathAttributes;if(r.clipPath){this.hf.length>1&&this.hf[this.hf.length-2].setAttributeNS(null,"clip-path",'path("'+i+'") view-box');return}if(r.d=i,this.processCommon("",r,t),this.currentPath!==null){const a=this.currentPath;if(a.nodeName!=="g")for(const l in r)l!=="transform"&&a.setAttributeNS(null,l,r[l]);else{const l=a.getElementsByTagName("path");for(const u in r)u!=="transform"&&l[n].setAttributeNS(null,u,r[u])}}else this.ld("path",r)}TR(e){const t=e.getAttribute("clip-path");return t===null?null:this.svg.getElementById(t.split("#")[1].slice(0,-1))}rA(e){const t=e.getAttribute("clip-path");if(t===null)return;const n=this.svg.getElementById(t.split("#")[1].slice(0,-1));n!==null&&n.remove()}UR(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n].slice(),r=[i.shift()];if(r[0]==="A")r.push(i.shift()+","+i.shift(),i.shift(),i.shift()+","+i.shift(),i.shift()+","+i.shift());else for(;i.length;)r.push(i.shift()+","+i.shift());t.push(r.join(" "))}return t.join(" ")}newGroup(e,t,n,i,r,a){const l=new Bi;l.m=[e,t,n,i,r,a];const u={};this.processCommon("g",u,l);const c=this.ld("g",u);return this.hf.push(c),c}newGroup2(e){const t={};e&&(t.class=e);const n=this.ld("g",t);return this.hf.push(n),n}endGroup(){return this.hf.pop()}dummyGroup(){return this.newGroup2(),this.endGroup()}shadowsSet(e,t,n){this.of=e,this.rf=t,this.xn=n}shadowsOff(){this._r=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0}shadowsOn(){this._r=!0,this.shadowOffsetX=this.of,this.shadowOffsetY=this.rf,this.shadowBlur=this.xn}enableDash(e,t){this.Vb=!0,this.Xo=e,this.dh=t}disableDash(){this.Vb=!1}clearContextCache(e){}setImageSmoothingEnabled(e){}rotate(e){this.Ke.rotate(e*57.2958,0,0)}getImageData(e,t,n,i){return null}measureText(e){return null}removeOldGradient(e,t,n){const i=t.getAttribute(n);if(i===null)return;const r=i.split("#");if(r.length===1)return;const a=this.svg.getElementById(r[1].slice(0,-1));if(a!==null){const l=new RegExp(a.id,"g");this.svg.innerHTML.match(l).length===1&&a.remove()}}removePartFromView(e){e.svg!==null&&e.svg.parentNode===this.diagramGroup&&e.svg.remove()}}class wn{constructor(e,t,n,i){v(this,"Ft");v(this,"ai");v(this,"aa");v(this,"Hu");const r=t===void 0?s.document:t;this.aa=r,this.Hu=null;const a=r.createElement("canvas");a.tabIndex=0,this.Ft=a,this.ai=new Sn(a,n,i),le.Ve.set(a,e)}resize(e,t,n,i){return this.width!==e||this.height!==t?(this.width=e,this.height=t,this.style.width=n+"px",this.style.height=i+"px",!0):!1}toDataURL(e,t){return this.Ft.toDataURL(e,t)}getBoundingClientRect(){return this.Ft.getBoundingClientRect()}focus(){this.Ft.focus()}get width(){return this.Ft.width}set width(e){this.Ft.width=e}get height(){return this.Ft.height}set height(e){this.Ft.height=e}dispose(){le.Ve.delete(this.Ft),this.aa=null}get style(){return this.Ft.style}}const Ch=class Ch{constructor(e,t,n){v(this,"U");v(this,"zb");v(this,"Xb");v(this,"Kb");v(this,"clipInsteadOfFill");v(this,"of");v(this,"rf");v(this,"xn");v(this,"ka");v(this,"_r");v(this,"Mr");this.U=e.getContext?e.getContext("2d",t):null,this.U===null&&o.o("Browser does not support HTML Canvas Element"),this.zb="",this.Xb="",this.Kb="",this.clipInsteadOfFill=!1,this.of=0,this.rf=0,this.xn=0,this._r=!1,this.ka=new nt,this.Mr=!!n}createOrUpdateClipGroup(e,t){}setImageSmoothingEnabled(e){this.U.imageSmoothingEnabled=e}get fillStyle(){return this.U.fillStyle}set fillStyle(e){this.Kb!==e&&(this.U.fillStyle=e,this.Kb=e)}get font(){return this.U.font}set font(e){this.zb!==e&&(this.U.font=e,this.zb=e)}get globalAlpha(){return this.U.globalAlpha}set globalAlpha(e){this.U.globalAlpha=e}get lineCap(){return this.U.lineCap}set lineCap(e){this.U.lineCap=e}get lineDashOffset(){return this.U.lineDashOffset}set lineDashOffset(e){this.U.lineDashOffset=e}get lineJoin(){return this.U.lineJoin}set lineJoin(e){this.U.lineJoin=e}get lineWidth(){return this.U.lineWidth}set lineWidth(e){this.U.lineWidth=e}get miterLimit(){return this.U.miterLimit}set miterLimit(e){this.U.miterLimit=e}get shadowBlur(){return this.U.shadowBlur}set shadowBlur(e){this.U.shadowBlur=e}get shadowColor(){return this.U.shadowColor}set shadowColor(e){this.U.shadowColor=e}get shadowOffsetX(){return this.U.shadowOffsetX}set shadowOffsetX(e){this.U.shadowOffsetX=e}get shadowOffsetY(){return this.U.shadowOffsetY}set shadowOffsetY(e){this.U.shadowOffsetY=e}get strokeStyle(){return this.U.strokeStyle}set strokeStyle(e){this.Xb!==e&&(this.U.strokeStyle=e,this.Xb=e)}get textAlign(){return this.U.textAlign}set textAlign(e){this.U.textAlign=e}get imageSmoothingEnabled(){return this.U.imageSmoothingEnabled}set imageSmoothingEnabled(e){this.U.imageSmoothingEnabled=e}get filter(){return this.U.filter}set filter(e){e===""?this.U.filter="none":this.U.filter=e}arc(e,t,n,i,r,a,l,u){this.U.arc(e,t,n,i,r,a)}beginPath(){this.U.beginPath()}endPath(){}bezierCurveTo(e,t,n,i,r,a){this.U.bezierCurveTo(e,t,n,i,r,a)}clearRect(e,t,n,i){this.commitTransform(),this.U.clearRect(e,t,n,i)}clip(e){e?this.U.clip(e):this.U.clip()}closePath(){this.U.closePath()}createLinearGradient(e,t,n,i){return this.U.createLinearGradient(e,t,n,i)}createPattern(e,t){return this.U.createPattern(e,t)}createRadialGradient(e,t,n,i,r,a){return this.U.createRadialGradient(e,t,n,i,r,a)}drawImage(e,t,n,i,r,a,l,u,c){i===void 0?this.U.drawImage(e,t,n):this.U.drawImage(e,t,n,i,r,a,l,u,c)}fill(e,t){t?this.U.fill(t,e?"evenodd":"nonzero"):this.U.fill(e?"evenodd":"nonzero")}fillRect(e,t,n,i){this.U.fillRect(e,t,n,i)}fillBackground(e,t,n,i){this.U.fillRect(e,t,n,i)}fillText(e,t,n){this.U.fillText(e,t,n)}getImageData(e,t,n,i){return this.U.getImageData(e,t,n,i)}lineTo(e,t){this.U.lineTo(e,t)}measureText(e){return this.U.measureText(e)}moveTo(e,t){this.U.moveTo(e,t)}quadraticCurveTo(e,t,n,i){this.U.quadraticCurveTo(e,t,n,i)}rect(e,t,n,i){this.U.rect(e,t,n,i)}restore(){this.U.restore()}save(){this.commitTransform(),this.U.save()}rotate(e){this.ka.cs(e*57.2958,0,0)}setTransform(e,t,n,i,r,a){this.ka.setTo(e,t,n,i,r,a)}scale(e,t){this.ka.et(e,t)}translate(e,t){this.ka.Ds(e,t)}stroke(e){e?this.U.stroke(e):this.U.stroke()}transform(e,t,n,i,r,a){if(e===1&&t===0&&n===0&&i===1&&r===0&&a===0)return;const l=this.ka,u=l.m11*e+l.m21*t,c=l.m12*e+l.m22*t,f=l.m11*n+l.m21*i,m=l.m12*n+l.m22*i;l.dx=l.m11*r+l.m21*a+l.dx,l.dy=l.m12*r+l.m22*a+l.dy,l.m11=u,l.m12=c,l.m21=f,l.m22=m}commitTransform(){const e=this.ka;this.U.setTransform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy)}fillContext(e,t,n){this.radialFill(e,t,n)||this.fillOrClip(t,n)}radialFill(e,t,n){if(!(e instanceof ve)||e.type!==3)return!1;const i=e.tf,r=e.Eb;return r>i?(this.scale(i/r,1),this.translate((r-i)/2,0)):i>r&&(this.scale(1,r/i),this.translate(0,(i-r)/2)),this.fillOrClip(t,n),r>i?(this.translate(-(r-i)/2,0),this.scale(1/(i/r),1)):i>r&&(this.translate(0,-(i-r)/2),this.scale(1,1/(r/i))),!0}strokeContext(){this.clipInsteadOfFill||this.stroke()}fillOrClip(e,t){this.clipInsteadOfFill?this.clip(t):this.fill(e,t)}shadowsSet(e,t,n){this.of=e,this.rf=t,this.xn=n}shadowsOff(){this._r=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0}shadowsOn(){this._r=!0,this.shadowOffsetX=this.of,this.shadowOffsetY=this.rf,this.shadowBlur=this.xn}enableDash(e,t){const n=this.U;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}disableDash(){const e=this.U;e.setLineDash!==void 0&&(e.setLineDash(Ch.EmptyArray),e.lineDashOffset=0)}clearContextCache(e){e&&(this.zb=""),this.Xb="",this.Kb=""}removePartFromView(e){}};v(Ch,"EmptyArray",Object.freeze([]));let Sn=Ch;var Xn=(A=>(A[A.Solid=1]="Solid",A[A.Linear=2]="Linear",A[A.Radial=3]="Radial",A[A.Pattern=4]="Pattern",A))(Xn||{}),Sr=(A=>(A[A.Lab=1]="Lab",A[A.HSL=2]="HSL",A[A.Oklch=3]="Oklch",A))(Sr||{});class ir{constructor(){v(this,"n0");v(this,"n1");v(this,"n2");v(this,"n3");this.n0=0,this.n1=0,this.n2=0,this.n3=0}}const it=class it{constructor(e,t){v(this,"h");v(this,"$");v(this,"Pa");v(this,"si");v(this,"gs");v(this,"W0");v(this,"J0");v(this,"bn");v(this,"$0");v(this,"yn");v(this,"tf");v(this,"Eb");if(L.Gi(this),this.h=!1,e===void 0)this.$=1,this.Pa="black";else if(typeof e=="string"){const i=o.Ih(Xn,e);i!==null?(this.$=i,this.Pa="black"):(this.$=1,this.Pa=e)}else this.$=e,this.Pa="black";const n=this.$;if(n===2?(this.si=z.TopCenter,this.gs=z.BottomCenter):n===3?(this.si=z.Center,this.gs=z.Center):(this.si=z.None,this.gs=z.None),this.W0=0,this.J0=NaN,this.bn=null,this.$0=null,this.yn=null,this.tf=0,this.Eb=0,t){const i={};for(const r in t)isFinite(parseFloat(r))?this.addColorStop(parseFloat(r),t[r]):i[r]=t[r];Object.assign(this,i)}}copy(){const e=new it;return e.$=this.$,e.Pa=this.Pa,e.si=this.si.N(),e.gs=this.gs.N(),e.W0=this.W0,e.J0=this.J0,this.bn!==null&&(e.bn=this.bn.copy()),e.$0=this.$0,e}g(){return this.h=!0,this.bn!==null&&this.bn.g(),this}ot(){return Object.isFrozen(this)&&o.o("cannot thaw constant: "+this),this.h=!1,this.bn!==null&&this.bn.ot(),this}ri(e){e in Xn?this.type=e:o.lr(this,e)}toString(){let e="Brush(";if(this.type===1)e+=this.color;else if(this.type===2?e+="Linear ":this.type===3?e+="Radial ":this.type===4?e+="Pattern ":e+="(unknown) ",e+=this.start+" "+this.end,this.colorStops!==null){const t=this.colorStops.iterator;for(;t.next();){const n=t.key,i=t.value;e+=" "+n+":"+i}}return e+=")",e}addColorStop(e,t){return this.h&&o.T(this),(typeof e!="number"||!isFinite(e)||e>1||e<0)&&o._(e,"0 <= loc <= 1",it,"addColorStop:loc"),o.i(t,"string",it,"addColorStop:color"),this.bn===null&&(this.bn=new W),this.bn.set(e,t),this.$===1&&(this.type=2),this.yn=null,this}get type(){return this.$}set type(e){this.h&&o.T(this,e),this.$=e,this.start.isNoSpot()&&(e===2?this.start=z.TopCenter:e===3&&(this.start=z.Center)),this.end.isNoSpot()&&(e===2?this.end=z.BottomCenter:e===3&&(this.end=z.Center)),this.yn=null}get color(){return this.Pa}set color(e){this.h&&o.T(this,e),this.Pa=e,this.yn=null}get start(){return this.si}set start(e){this.h&&o.T(this,e),this.si=e.N(),this.yn=null}get end(){return this.gs}set end(e){this.h&&o.T(this,e),this.gs=e.N(),this.yn=null}get startRadius(){return this.W0}set startRadius(e){this.h&&o.T(this,e),e<0&&o._(e,">= zero",it,"startRadius"),this.W0=e,this.yn=null}get endRadius(){return this.J0}set endRadius(e){this.h&&o.T(this,e),e<0&&o._(e,">= zero",it,"endRadius"),this.J0=e,this.yn=null}get colorStops(){return this.bn}set colorStops(e){this.h&&o.T(this,e),this.bn=e,this.yn=null}get pattern(){return this.$0}set pattern(e){this.h&&o.T(this,e),this.$0=e,this.yn=null}static randomColor(e,t){e===void 0&&(e=128),t===void 0&&(t=Math.max(e,255));const n=Math.abs(t-e);let i=Math.floor(e+Math.random()*n).toString(16),r=Math.floor(e+Math.random()*n).toString(16),a=Math.floor(e+Math.random()*n).toString(16);return i.length<2&&(i="0"+i),r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),"#"+i+r+a}static isValidColor(e){return s.CSS?s.CSS.supports("color",e):!0}static lighten(e){return it.lightenBy(e)}lightenBy(e,t){this.h&&o.T(this);const n=e===void 0||typeof e!="number"?.2:e,i=t===void 0?3:t;if(this.type===1)it.Do(this.color),this.color=it.hd(n,i);else if((this.type===2||this.type===3)&&this.colorStops!==null){const r=this.colorStops.iterator;for(;r.next();)it.Do(r.value),this.addColorStop(r.key,it.hd(n,i))}return this}static lightenBy(e,t,n){const i=t===void 0||typeof t!="number"?.2:t,r=n===void 0?3:n;return it.Do(e),it.hd(i,r)}static darken(e){return it.darkenBy(e)}darkenBy(e,t){this.h&&o.T(this);const n=e===void 0||typeof e!="number"?.2:e,i=t===void 0?3:t;if(this.type===1)it.Do(this.color),this.color=it.hd(-n,i);else if((this.type===2||this.type===3)&&this.colorStops!==null){const r=this.colorStops.iterator;for(;r.next();)it.Do(r.value),this.addColorStop(r.key,it.hd(-n,i))}return this}static darkenBy(e,t,n){const i=t===void 0||typeof t!="number"?.2:t,r=n===void 0?3:n;return it.Do(e),it.hd(-i,r)}static mix(e,t,n){it.Do(e);const i=it.G.n0,r=it.G.n1,a=it.G.n2,l=it.G.n3;it.Do(t),n===void 0&&(n=.5);const u=Math.round((it.G.n0-i)*n+i),c=Math.round((it.G.n1-r)*n+r),f=Math.round((it.G.n2-a)*n+a),m=Math.round((it.G.n3-l)*n+l);return`rgba(${u}, ${c}, ${f}, ${m})`}isDark(){if(this.type===1)return it.isDark(this.color);if((this.type===2||this.type===3)&&this.colorStops!==null){const e=this.colorStops;if(this.type===3)return it.isDark(e.first().value);if(e.get(.5)!==null)return it.isDark(e.get(.5));if(e.count===2){const u=e.toArray();return it.isDark(it.mix(u[0].value,u[1].value))}const t=e.iterator;let n=-1,i=-1,r=1,a=1;for(;t.next();){const u=t.key,c=Math.abs(.5-t.key);r>a&&c<r?(n=u,r=c):a>=r&&c<a&&(i=u,a=c)}if(n>i){let u=n;n=i,i=u,u=r,r=a,a=u}const l=i-n;return it.isDark(it.mix(e.get(n),e.get(i),1-a/l))}return!1}static isDark(e){return e?e instanceof it?e.isDark():(it.Do(e),(299*it.G.n0+587*it.G.n1+114*it.G.n2)/1e3<128):!1}static hd(e,t){switch(t){case 1:return it.VR(),it.io.n0=Math.min(100,Math.max(0,it.io.n0+100*e)),it.zR(),"rgba("+it.G.n0+", "+it.G.n1+", "+it.G.n2+", "+it.G.n3+")";case 2:return it.OS(),it.Ii.n2=Math.min(100,Math.max(0,it.Ii.n2+100*e)),"hsla("+it.Ii.n0+", "+it.Ii.n1+"%, "+it.Ii.n2+"%, "+it.Ii.n3+")";case 3:return it.XR(),it.eo.n0=Math.min(100,Math.max(0,it.eo.n0+100*e)),it.KR(),"rgba("+it.G.n0+", "+it.G.n1+", "+it.G.n2+", "+it.G.n3+")";default:o.o("Unknown color space: "+t)}}static Do(e){const t=it.tl;if(t===null)return;t.clearRect(0,0,1,1),t.fillStyle="#000000";const n=t.fillStyle;if(t.fillStyle=e,t.fillStyle!==n){t.fillRect(0,0,1,1);const i=t.getImageData(0,0,1,1).data;it.G.n0=i[0],it.G.n1=i[1],it.G.n2=i[2],it.G.n3=i[3]/255}else t.fillStyle="#FFFFFF",t.fillStyle,t.fillStyle=e,t.fillStyle,it.G.n0=0,it.G.n1=0,it.G.n2=0,it.G.n3=1}static OS(){const e=it.G.n0/255,t=it.G.n1/255,n=it.G.n2/255,i=Math.max(e,t,n),r=Math.min(e,t,n),a=i-r;let l,u;const c=(i+r)/2;if(a===0)l=u=0;else{switch(i){case e:l=(t-n)/a%6;break;case t:l=(n-e)/a+2;break;case n:l=(e-t)/a+4;break}l*=60,l<0&&(l+=360),u=a/(1-Math.abs(2*c-1))}it.Ii.n0=Math.round(l),it.Ii.n1=Math.round(u*100),it.Ii.n2=Math.round(c*100),it.Ii.n3=it.G.n3}static uE(){const e=it.Ii.n0,t=it.Ii.n1/100,n=it.Ii.n2/100;let i,r,a;const l=(1-Math.abs(2*n-1))*t,u=e/60,c=l*(1-Math.abs(u%2-1));u>=0&&u<1?(i=l,r=c,a=0):u>=1&&u<2?(i=c,r=l,a=0):u>=2&&u<3?(i=0,r=l,a=c):u>=3&&u<4?(i=0,r=c,a=l):u>=4&&u<5?(i=c,r=0,a=l):u>=5&&u<6&&(i=l,r=0,a=c);const f=n-.5*l;i+=f,r+=f,a+=f,it.G.n0=Math.round(i*255),it.G.n1=Math.round(r*255),it.G.n2=Math.round(a*255),it.G.n3=it.Ii.n3}static VR(){it.fA(),it.YR()}static zR(){it.GR(),it.uA()}static w2(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}static b2(e){return e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055}static fA(){const e=it.w2(it.G.n0),t=it.w2(it.G.n1),n=it.w2(it.G.n2);it.Rt.n0=.4124564*e+.3575761*t+.1804375*n,it.Rt.n1=.2126729*e+.7151522*t+.072175*n,it.Rt.n2=.0193339*e+.119192*t+.9503041*n,it.Rt.n3=it.G.n3}static uA(){const e=3.2404542*it.Rt.n0+-1.5371385*it.Rt.n1+-.4985314*it.Rt.n2,t=-.969266*it.Rt.n0+1.8760108*it.Rt.n1+.041556*it.Rt.n2,n=.0556434*it.Rt.n0+-.2040259*it.Rt.n1+1.0572252*it.Rt.n2;it.G.n0=it.b2(e)*255,it.G.n1=it.b2(t)*255,it.G.n2=it.b2(n)*255,it.G.n3=it.Rt.n3,it.G.n0=Math.round(it.G.n0),it.G.n0>255?it.G.n0=255:it.G.n0<0&&(it.G.n0=0),it.G.n1=Math.round(it.G.n1),it.G.n1>255?it.G.n1=255:it.G.n1<0&&(it.G.n1=0),it.G.n2=Math.round(it.G.n2),it.G.n2>255?it.G.n2=255:it.G.n2<0&&(it.G.n2=0)}static P2(e){return e>it.k2?Math.pow(e,1/3):(it.Yb*e+16)/116}static YR(){const e=it.P2(it.Rt.n0*100/it.ad[0]),t=it.P2(it.Rt.n1*100/it.ad[1]),n=it.P2(it.Rt.n2*100/it.ad[2]);it.io.n0=116*t-16,it.io.n1=500*(e-t),it.io.n2=200*(t-n),it.io.n3=it.Rt.n3}static dA(e){const t=e*e*e;return t>it.k2?t:(116*e-16)/it.Yb}static GR(){const e=(it.io.n0+16)/116,t=it.io.n1/500+e,n=e-it.io.n2/200;it.Rt.n0=it.ad[0]/100*it.dA(t),it.Rt.n1=it.ad[1]/100*(it.io.n0>it.Yb*it.k2?Math.pow(e,3):it.io.n0/it.Yb),it.Rt.n2=it.ad[2]/100*it.dA(n),it.Rt.n3=it.io.n3}static jR(){let e=.8190224*it.Rt.n0+.3619062*it.Rt.n1+-.1288737*it.Rt.n2,t=.03298366*it.Rt.n0+.9292868*it.Rt.n1+.03614466*it.Rt.n2,n=.04817719*it.Rt.n0+.2642395*it.Rt.n1+.6335478*it.Rt.n2;e=Math.cbrt(e),t=Math.cbrt(t),n=Math.cbrt(n),it.ci.n0=.2104542*e+.7936177*t+-.004072046*n,it.ci.n1=1.977998*e+-2.428592*t+.4505937*n,it.ci.n2=.02590403*e+.7827717*t+-.8086757*n,it.ci.n3=it.Rt.n3,it.ci.n0*=100}static HR(){it.ci.n0/=100;let e=.9999999*it.ci.n0+.3963377*it.ci.n1+.2158037*it.ci.n2,t=1.000000009*it.ci.n0+-.1055613*it.ci.n1+-.06385417*it.ci.n2,n=1.00000005*it.ci.n0+-.08948418*it.ci.n1+-1.291485*it.ci.n2;e=e**3,t=t**3,n=n**3,it.Rt.n0=1.2268798*e+-.5578149*t+.281391*n,it.Rt.n1=-.04057576*e+1.112286*t+-.07171106*n,it.Rt.n2=-.07637294*e+-.4214933*t+1.586924*n,it.Rt.n3=it.ci.n3}static qR(){const e=Math.atan2(it.ci.n2,it.ci.n1)*180/Math.PI;it.eo.n0=it.ci.n0,it.eo.n1=Math.sqrt(it.ci.n1**2+it.ci.n2**2),it.eo.n2=e>=0?e:e+360,it.eo.n3=it.ci.n3}static WR(){it.ci.n0=it.eo.n0,it.ci.n1=it.eo.n1*Math.cos(it.eo.n2*Math.PI/180),it.ci.n2=it.eo.n1*Math.sin(it.eo.n2*Math.PI/180),it.ci.n3=it.eo.n3}static XR(){it.fA(),it.jR(),it.qR()}static KR(){it.WR(),it.HR(),it.uA()}static rd(e,t){typeof e=="string"||e instanceof it||o.o("Value for "+t+" must be a color string or a Brush, not "+e)}};v(it,"k2",216/24389),v(it,"Yb",24389/27),v(it,"ad",[95.047,100,108.883]),v(it,"Solid",1),v(it,"Linear",2),v(it,"Radial",3),v(it,"Pattern",4),v(it,"Lab",1),v(it,"HSL",2),v(it,"tl",le.isUsingDOM()?new wn(null,void 0,{willReadFrequently:!0}).ai:null),v(it,"G",new ir),v(it,"Ii",new ir),v(it,"Rt",new ir),v(it,"io",new ir),v(it,"ci",new ir),v(it,"eo",new ir);let ve=it;const kh=class kh{constructor(){v(this,"Mt","Base")}static definePanelLayout(e,t){t.name=e,kh.Layouts.set(e,t)}get name(){return this.Mt}set name(e){this.Mt=e}get classType(){return Kt}measure(e,t,n,i,r,a,l){}measureElement(e,t,n,i,r){e.ut(t,n,i,r)}arrange(e,t,n){}arrangeElement(e,t,n,i,r,a){e.zt(t,n,i,r,a)}remeasureObject(e){e.ef()}Bi(e,t,n){}};v(kh,"Layouts",new W);let de=kh;class Jc extends de{constructor(){super()}measure(e,t,n,i,r,a,l){const u=i.length,c=e.Ko();for(let f=0;f<u;f++){const m=i[f];if(!m.visible&&m!==c)continue;const p=m.margin,y=p.right+p.left,w=p.top+p.bottom;m.ut(t,n,a,l);const b=m.measuredBounds,C=Math.max(b.width+y,0),k=Math.max(b.height+w,0);let N=m.position.x,F=m.position.y;if(isFinite(N)||(N=0),isFinite(F)||(F=0),m instanceof Qt&&m.isGeometryPositioned){const D=m.strokeWidth/2;N-=D,F-=D}r.unionNoCheck(N,F,C,k)}}arrange(e,t,n){const i=t.length,r=e.padding,a=n.x-r.left,l=n.y-r.top;for(let u=0;u<i;u++){const c=t[u],f=c.measuredBounds,m=c.margin,p=c.position.x,y=c.position.y;let w=isNaN(p)?-a:p-a,b=isNaN(y)?-l:y-l;if(c instanceof Qt&&c.isGeometryPositioned){const C=c.strokeWidth/2;w-=C,b-=C}c.visible&&c.zt(w+m.left,b+m.top,f.width,f.height)}}}de.definePanelLayout("Position",new Jc);class Zc extends de{constructor(){super()}measure(e,t,n,i,r,a,l){const u=i.length,c=o.nt(),f=e.Ko();for(let p=0;p<u;p++){const y=i[p];if(!y.visible&&y!==f)continue;const w=y.zs(!1);if(w!==0&&w!==5){c.push(y);continue}y.ut(1/0,n,0,l);const b=y.margin,C=y.measuredBounds,k=Math.max(C.width+b.right+b.left,0),N=Math.max(C.height+b.top+b.bottom,0);r.En(r.width+k,Math.max(r.height,N))}const m=c.length;e.desiredSize.height?n=Math.min(e.desiredSize.height,e.maxSize.height):r.height!==0&&(n=Math.min(r.height,e.maxSize.height));for(let p=0;p<m;p++){const y=c[p];if(!y.visible&&y!==f)continue;const w=y.margin,b=w.right+w.left,C=w.top+w.bottom;y.ut(1/0,n,0,l);const k=y.measuredBounds,N=Math.max(k.width+b,0),F=Math.max(k.height+C,0);r.width+=N,r.height=Math.max(r.height,F)}o.tt(c)}arrange(e,t,n){const i=t.length,r=e.padding,a=r.top,l=e.isOpposite;let u=l?n.width:r.left;for(let c=0;c<i;c++){const f=a,m=t[c];if(!m.visible)continue;const p=m.measuredBounds,y=m.margin,w=y.top+y.bottom,b=a+r.bottom;let C=p.height;const k=m.zs(!1);(isNaN(m.desiredSize.height)&&k===2||k===4)&&(C=Math.max(n.height-w-b,0));const N=C+w+b;let F=m.alignment;F.isDefault()&&(F=e.defaultAlignment),F.isSpot()||(F=z.Center),l&&(u-=p.width+y.left+y.right),m.zt(u+F.offsetX+y.left,f+F.offsetY+y.top+(n.height*F.y-N*F.y),p.width,C),l||(u+=p.width+y.left+y.right)}}}de.definePanelLayout("Horizontal",new Zc);class Qc extends de{constructor(){super()}measure(e,t,n,i,r,a,l){const u=i.length,c=o.nt(),f=e.Ko();for(let p=0;p<u;p++){const y=i[p];if(!y.visible&&y!==f)continue;const w=y.zs(!1);if(w!==0&&w!==4){c.push(y);continue}y.ut(t,1/0,a,0);const b=y.margin,C=y.measuredBounds,k=Math.max(C.width+b.right+b.left,0),N=Math.max(C.height+b.top+b.bottom,0);r.En(Math.max(r.width,k),r.height+N)}const m=c.length;e.desiredSize.width?t=Math.min(e.desiredSize.width,e.maxSize.width):r.width!==0&&(t=Math.min(r.width,e.maxSize.width));for(let p=0;p<m;p++){const y=c[p];if(!y.visible&&y!==f)continue;const w=y.margin,b=w.right+w.left,C=w.top+w.bottom;y.ut(t,1/0,a,0);const k=y.measuredBounds,N=Math.max(k.width+b,0),F=Math.max(k.height+C,0);r.width=Math.max(r.width,N),r.height+=F}o.tt(c)}arrange(e,t,n){const i=t.length,r=e.padding,a=r.left,l=e.isOpposite;let u=l?n.height:r.top;for(let c=0;c<i;c++){const f=a,m=t[c];if(!m.visible)continue;const p=m.measuredBounds,y=m.margin,w=y.left+y.right,b=a+r.right;let C=p.width;const k=m.zs(!1);(isNaN(m.desiredSize.width)&&k===2||k===5)&&(C=Math.max(n.width-w-b,0));const N=C+w+b;let F=m.alignment;F.isDefault()&&(F=e.defaultAlignment),F.isSpot()||(F=z.Center),l&&(u-=p.height+y.bottom+y.top),m.zt(f+F.offsetX+y.left+(n.width*F.x-N*F.x),u+F.offsetY+y.top,C,p.height),l||(u+=p.height+y.bottom+y.top)}}}de.definePanelLayout("Vertical",new Qc);const Ga=class Ga extends de{constructor(){super()}measure(e,t,n,i,r,a,l){const u=i.length;if(u===0)return;const c=e.findMainElement();let f=c.margin,m=0,p=0;const y=f.right+f.left,w=f.top+f.bottom;c.ut(t,n,a,l);let b=c.measuredBounds,C=b.width,k=b.height,N=Math.max(C+y,0),F=Math.max(k+w,0);const D=e.isClipping;D&&c.x0()!==0&&!Ga.gA&&(Ga.gA=!0,o.ii("Main Shape for Spot Panel with isClipping = true must have a zero strokeWidth: "+e.toString()));const E=I.X(-f.left,-f.top,N,F);let U=I.X(0,0,C,k);this.S2(c,U,!0),C=U.width,k=U.height;let $=!0;const K=e.Ko();let _;for(let G=0;G<u;G++){const X=i[G];let Q=t,Z=n;if(X===c||!X.visible&&X!==K)continue;f=X.margin;let et=f.left,st=f.top;switch(m=f.right+f.left,p=f.top+f.bottom,_=X.zs(!1),_){case 2:Q=C,Z=k,m=0,p=0,et=0,st=0;break;case 5:Q=C,m=0,et=0;break;case 4:Z=k,p=0,st=0;break}X.ut(Q,Z,0,0),b=X.measuredBounds,N=Math.max(b.width+m,0),F=Math.max(b.height+p,0);let ut=X.alignment;ut.isDefault()&&(ut=e.defaultAlignment),ut.isSpot()||(ut=z.Center);let mt=X.alignmentFocus;mt.isDefault()&&(mt=z.Center);let at=null;X instanceof Kt&&X.so!==""&&(at=X.findObject(X.so),at===X&&(at=null));let vt=U.x-et,Nt=U.y-st;if(at!==null){X.zt(0,0,b.width,b.height);const qt=at.actualBounds,Tt=T.X(qt.x+(mt.x*qt.width-mt.offsetX),qt.y+(mt.y*qt.height-mt.offsetY));for(at=at.panel;at!==X;)at.D.xt(Tt),at=at.panel;vt+=ut.x*C+ut.offsetX-Tt.x,Nt+=ut.y*k+ut.offsetY-Tt.y,T.s(Tt)}else vt+=ut.x*C+ut.offsetX-(mt.x*b.width+mt.offsetX),Nt+=ut.y*k+ut.offsetY-(mt.y*b.height+mt.offsetY);$?($=!1,r.e(vt,Nt,N,F)):r.unionNoCheck(vt,Nt,N,F)}switch($?r.a(E):D?r.intersect(U.x,U.y,U.width,U.height):r.unionNoCheck(E.x,E.y,E.width,E.height),I.s(E),I.s(U),_=c.stretch,_===1&&(_=c.zs(!1)),_){case 0:return;case 2:if(!isFinite(t)&&!isFinite(n))return;break;case 5:if(!isFinite(t))return;break;case 4:if(!isFinite(n))return;break}b=c.measuredBounds,C=b.width,k=b.height,N=Math.max(C+y,0),F=Math.max(k+w,0),f=c.margin,U=I.X(-f.left,-f.top,N,F),this.S2(c,U,!0),C=U.width,k=U.height;for(let G=0;G<u;G++){const X=i[G];if(X===c||!X.visible&&X!==K)continue;f=X.margin,m=f.right+f.left,p=f.top+f.bottom,b=X.measuredBounds,N=Math.max(b.width+m,0),F=Math.max(b.height+p,0);let Q=X.alignment;Q.isDefault()&&(Q=e.defaultAlignment),Q.isSpot()||(Q=z.Center);let Z=X.alignmentFocus;Z.isDefault()&&(Z=z.Center),$?($=!1,r.e(Q.x*C+Q.offsetX-(Z.x*b.width+Z.offsetX)-f.left,Q.y*k+Q.offsetY-(Z.y*b.height+Z.offsetY)-f.top,N,F)):r.unionNoCheck(Q.x*C+Q.offsetX-(Z.x*b.width+Z.offsetX)-f.left,Q.y*k+Q.offsetY-(Z.y*b.height+Z.offsetY)-f.top,N,F)}$?r.a(E):D?r.intersect(U.x,U.y,U.width,U.height):r.unionNoCheck(E.x,E.y,E.width,E.height),I.s(U)}arrange(e,t,n){const i=t.length;if(i===0)return;const r=e.findMainElement(),a=r.measuredBounds,l=a.width,u=a.height,c=e.padding,f=c.left,m=c.top;let p=f-n.x,y=m-n.y;r.zt(p,y,l,u);const w=I.X(0,0,l,u);this.S2(r,w,!1);for(let b=0;b<i;b++){const C=t[b];if(C===r)continue;const k=C.measuredBounds,N=k.width,F=k.height;let D=C.alignment;D.isDefault()&&(D=e.defaultAlignment),D.isSpot()||(D=z.Center);let E=C.alignmentFocus;E.isDefault()&&(E=z.Center);let U=null;if(C instanceof Kt&&C.so!==""&&(U=C.findObject(C.so),U===C&&(U=null)),U!==null){const $=U.actualBounds,K=T.X($.x+(E.x*$.width-E.offsetX),$.y+(E.y*$.height-E.offsetY));for(U=U.panel;U!==C;)U.D.xt(K),U=U.panel;p=D.x*w.width+D.offsetX-K.x,y=D.y*w.height+D.offsetY-K.y,T.s(K)}else p=D.x*w.width+D.offsetX-(E.x*N+E.offsetX),y=D.y*w.height+D.offsetY-(E.y*F+E.offsetY);p+=w.x-n.x,y+=w.y-n.y,C.visible&&C.zt(f+p,m+y,N,F)}I.s(w)}S2(e,t,n){let i=null;if(e instanceof Kt&&e.so!==""&&(i=e.findObject(e.so),i===e&&(i=null)),i!==null)for(n&&e.zt(0,0,t.width,t.height),t.a(i.actualBounds),i=i.panel;i!==e;)i.D.xw(t),i=i.panel}};v(Ga,"gA",!1);let zi=Ga;de.definePanelLayout("Spot",new zi);class iC extends de{constructor(){super()}measure(e,t,n,i,r,a,l){const u=i.length;if(u===0)return;const c=e.findMainElement();let f=c.margin,m=t,p=n;const y=f.right+f.left,w=f.top+f.bottom;c.ut(t,n,a,l);let b=c.measuredBounds,C=0,k=null;c instanceof Qt&&(k=c,C=k.strokeWidth*k.scale);let N=Math.max(b.width+y,0),F=Math.max(b.height+w,0),D=e.M2(c);const E=D.x*N+D.offsetX,U=D.y*F+D.offsetY;let $=e.N2(c);const K=$.x*N+$.offsetX,_=$.y*F+$.offsetY;isFinite(t)&&(m=Math.max(Math.abs(E-K)-C,0)),isFinite(n)&&(p=Math.max(Math.abs(U-_)-C,0));let G=0,X=0;a>0&&(G=Math.max(Math.abs(D.x*a+D.offsetX-($.x*a+$.offsetX))-C,0)),l>0&&(X=Math.max(Math.abs(D.y*l+D.offsetY-($.y*l+$.offsetY))-C,0));const Q=B.l();Q.e(0,0);const Z=e.Ko();for(let mt=0;mt<u;mt++){const at=i[mt];if(at===c||!at.visible&&at!==Z)continue;f=at.margin;const vt=f.right+f.left,Nt=f.top+f.bottom;at.ut(m,p,G,X),b=at.measuredBounds,N=Math.max(b.width+vt,0),F=Math.max(b.height+Nt,0),Q.e(Math.max(N,Q.width),Math.max(F,Q.height))}if(u===1){b=c.measuredBounds,r.width=N,r.height=F,B.s(Q);return}D=e.M2(c),$=e.N2(c);let et=0,st=0;$.x!==D.x&&$.y!==D.y&&(et=Q.width/Math.abs($.x-D.x),st=Q.height/Math.abs($.y-D.y)),B.s(Q),C=0,k!==null&&(C=k.strokeWidth*k.scale,k._P()===6&&(et=st=Math.max(et,st))),et+=Math.abs(D.offsetX)+Math.abs($.offsetX)+C,st+=Math.abs(D.offsetY)+Math.abs($.offsetY)+C;let ut=c.stretch;switch(ut===1&&(ut=c.zs(!1)),ut){case 0:a=0,l=0;break;case 2:isFinite(t)&&(et=t),isFinite(n)&&(st=n);break;case 5:isFinite(t)&&(et=t),l=0;break;case 4:a=0,isFinite(n)&&(st=n);break}c.ef(),c.ut(et,st,a,l),r.width=c.measuredBounds.width+y,r.height=c.measuredBounds.height+w}arrange(e,t,n){const i=t.length;if(i===0)return;const r=e.findMainElement(),a=r.measuredBounds,l=I.l();l.e(0,0,1,1);let u=r.margin;const c=u.left,f=u.top,m=e.padding,p=m.left,y=m.top;let w=c,b=f,C=a.width,k=a.height;r.zt(p+w,y+b,C,k);const N=e.M2(r),F=e.N2(r),D=0+N.x*a.width+N.offsetX,E=0+N.y*a.height+N.offsetY,U=0+F.x*a.width+F.offsetX,$=0+F.y*a.height+F.offsetY;l.x=D,l.y=E,l.unionNoCheck(U,$,0,0),l.x+=c+p,l.y+=f+y;for(let K=0;K<i;K++){const _=t[K];if(_===r)continue;const G=_.measuredBounds;u=_.margin;const X=Math.max(G.width+u.right+u.left,0),Q=Math.max(G.height+u.top+u.bottom,0);let Z=_.alignment;Z.isDefault()&&(Z=e.defaultAlignment),Z.isSpot()||(Z=z.Center),w=l.width*Z.x+Z.offsetX-X*Z.x+u.left+l.x,b=l.height*Z.y+Z.offsetY-Q*Z.y+u.top+l.y,C=l.width,k=l.height,_.visible&&(I.contains(l.x,l.y,l.width,l.height,w,b,G.width,G.height)?_.zt(w,b,G.width,G.height):_.zt(w,b,G.width,G.height,new I(l.x,l.y,l.width,l.height)))}I.s(l)}}de.definePanelLayout("Auto",new iC);class sC extends de{constructor(){super(),this.name="Table"}measure(e,t,n,i,r,a,l){let u=i.length;const c=o.nt(),f=o.nt();for(let Dt=0;Dt<u;Dt++){const kt=i[Dt],Yt=kt instanceof Kt?kt:null;if(Yt!==null&&Yt.Qr()&&kt.visible){f.push(Yt);const ue=Yt.L.r,We=ue.length;for(let rn=0;rn<We;rn++){const cn=ue[rn];Yt.type===Kt.TableRow?cn.row=kt.row:Yt.type===Kt.TableColumn&&(cn.column=kt.column),c.push(cn)}}else c.push(kt)}u=c.length,u===0&&(e.getRowDefinition(0),e.getColumnDefinition(0));const m=[];for(let Dt=0;Dt<u;Dt++){const kt=c[Dt];kt.visible&&(kt.ue(!0),kt._n(!0),m[kt.row]||(m[kt.row]=[]),m[kt.row][kt.column]||(m[kt.row][kt.column]=[]),m[kt.row][kt.column].push(kt))}o.tt(c);const p=o.nt(),y=o.nt(),w=o.nt(),b={count:0},C={count:0};let k=t,N=n;const F=e.Ye,D=e.Ge;let E=null;u=F.length;for(let Dt=0;Dt<u;Dt++)E=F[Dt],E!==void 0&&(E.actual=0);u=D.length;for(let Dt=0;Dt<u;Dt++)E=D[Dt],E!==void 0&&(E.actual=0);let U=m.length,$=0;for(let Dt=0;Dt<U;Dt++)m[Dt]&&($=Math.max($,m[Dt].length));const K=Math.min(e.topIndex,U-1),_=Math.min(e.leftIndex,$-1);let G=0,X;U=m.length;const Q=e.Ko();for(let Dt=0;Dt<U;Dt++){if(!m[Dt])continue;$=m[Dt].length;const kt=e.getRowDefinition(Dt);kt.actual=0,kt.ji=0;for(let Yt=0;Yt<$;Yt++){if(!m[Dt][Yt])continue;const ue=e.getColumnDefinition(Yt);p[Yt]===void 0&&(ue.actual=0,ue.ji=0,p[Yt]=!0);const We=m[Dt][Yt],rn=We.length;for(let cn=0;cn<rn;cn++){const gn=We[cn];if(!gn.visible&&gn!==Q)continue;const Ps=gn.rowSpan>1,Ni=gn.columnSpan>1;(Ps||Ni)&&!(Dt<K)&&!(Yt<_)&&y.push(gn);const Ui=gn.margin,kn=Ui.right+Ui.left,zn=Ui.top+Ui.bottom;X=gn.N0(kt,ue,!1);const as=gn.desiredSize,Se=!isNaN(as.width),Gs=!isNaN(as.height);if(X!==0&&!(Se&&Gs)&&!(Dt<K)&&!(Yt<_)&&(!Ni&&b[Yt]===void 0&&(X===2||X===5)&&(b[Yt]=-1,b.count++),!Ps&&C[Dt]===void 0&&(X===2||X===4)&&(C[Dt]=-1,C.count++),!Ps&&!Ni&&w.push(gn)),gn.ut(1/0,1/0,0,0),Dt<K||Yt<_)continue;const di=gn.measuredBounds,Ms=Math.max(di.width+kn,0),ar=Math.max(di.height+zn,0);if(gn.rowSpan===1&&(X===0||X===5)){E=e.getRowDefinition(Dt);const Ns=E.computeEffectiveSpacing(),Xa=E.st===0;G=Math.max(ar-E.actual,0),G+(Xa?Ns:0)>N&&(G=Math.max(N-Ns,0)),E.ji=E.ji+G,E.actual=E.st+G,N=Math.max(N-(G+(Xa?Ns:0)),0)}if(gn.columnSpan===1&&(X===0||X===4)){E=e.getColumnDefinition(Yt);const Ns=E.computeEffectiveSpacing(),Xa=E.st===0;G=Math.max(Ms-E.actual,0),G+(Xa?Ns:0)>k&&(G=Math.max(k-Ns,0)),E.ji=E.ji+G,E.actual=E.st+G,k=Math.max(k-(G+(Xa?Ns:0)),0)}(Ps||Ni)&&gn.ef()}}}o.tt(p);let Z=0,et=0;u=e.columnCount;for(let Dt=0;Dt<u;Dt++){const kt=D[Dt];kt!==void 0&&(Z+=isNaN(kt.ge)?kt.ji:kt.ge,kt.ji!==0&&(Z+=kt.computeEffectiveSpacing()))}u=e.rowCount;for(let Dt=0;Dt<u;Dt++){const kt=F[Dt];kt!==void 0&&(et+=isNaN(kt.ge)?kt.ji:kt.ge,kt.ji!==0&&(et+=kt.computeEffectiveSpacing()))}k=Math.max(t-Z,0),N=Math.max(n-et,0);let st=N,ut=k;u=w.length;for(let Dt=0;Dt<u;Dt++){const kt=w[Dt],Yt=e.getRowDefinition(kt.row),ue=e.getColumnDefinition(kt.column),We=kt.measuredBounds,rn=kt.margin,cn=rn.right+rn.left,gn=rn.top+rn.bottom;ue.ji===0&&b[kt.column]!==void 0?b[kt.column]=Math.max(We.width+cn,b[kt.column]):b[kt.column]=null,Yt.ji===0&&C[kt.row]!==void 0?C[kt.row]=Math.max(We.height+gn,C[kt.row]):C[kt.row]=null}let mt=0,at=0,vt;for(vt in C)vt!=="count"&&(mt+=C[vt]);for(vt in b)vt!=="count"&&(at+=b[vt]);const Nt=B.l();for(let Dt=0;Dt<u;Dt++){const kt=w[Dt];if(!kt.visible&&kt!==Q)continue;const Yt=e.getRowDefinition(kt.row),ue=e.getColumnDefinition(kt.column);let We=0;isFinite(ue.width)?We=ue.width:(isFinite(k)&&b[kt.column]!==null?at===0?We=ue.actual+k:We=b[kt.column]/at*ut:b[kt.column]!==null?We=k:We=ue.actual||k,We=Math.max(0,We-ue.computeEffectiveSpacing()));let rn=0;switch(isFinite(Yt.height)?rn=Yt.height:(isFinite(N)&&C[kt.row]!==null?mt===0?rn=Yt.actual+N:rn=C[kt.row]/mt*st:C[kt.row]!==null?rn=N:rn=Yt.actual||N,rn=Math.max(0,rn-Yt.computeEffectiveSpacing())),Nt.e(Math.max(ue.minimum,Math.min(We,ue.maximum)),Math.max(Yt.minimum,Math.min(rn,Yt.maximum))),X=kt.N0(Yt,ue,!1),X){case 5:Nt.height=Math.max(Nt.height,Yt.actual+N);break;case 4:Nt.width=Math.max(Nt.width,ue.actual+k);break}const cn=kt.margin,gn=cn.right+cn.left,Ps=cn.top+cn.bottom;kt.ef();let Ni=ue.minimum,Ui=Yt.minimum;const kn=kt.measuredBounds;kn.width===0&&b[kt.column]!==null&&(Ni=Math.max(Ni,b[kt.column])),kn.height===0&&C[kt.row]!==null&&(Ui=Math.max(Ni,C[kt.row])),kt.ut(Nt.width,Nt.height,Ni,Ui);const zn=kt.measuredBounds;let as=Math.max(zn.width+gn,0),Se=Math.max(zn.height+Ps,0);isFinite(k)&&(as=Math.min(as,Nt.width)),isFinite(N)&&(Se=Math.min(Se,Nt.height));let Gs=0;Gs=Yt.actual,Yt.actual=Math.max(Yt.actual,Se),Yt.ji=Math.max(Yt.ji,Se),G=Yt.actual-Gs,N=Math.max(N-G,0),C[kt.row]===null&&(st=Math.max(st-G,0)),Gs=ue.actual,ue.actual=Math.max(ue.actual,as),ue.ji=Math.max(ue.ji,as),G=ue.actual-Gs,k=Math.max(k-G,0),b[kt.column]===null&&(ut=Math.max(ut-G,0))}o.tt(w);const qt=B.l(),Tt=o.nt(),Ft=o.nt();if(u=y.length,u!==0)for(let Dt=0;Dt<U;Dt++){if(!m[Dt])continue;$=m[Dt].length;const kt=e.getRowDefinition(Dt);Tt[Dt]=kt.actual;for(let Yt=0;Yt<$;Yt++){if(!m[Dt][Yt])continue;const ue=e.getColumnDefinition(Yt);Ft[Yt]=ue.actual}}for(let Dt=0;Dt<u;Dt++){const kt=y[Dt];if(!kt.visible&&kt!==Q)continue;const Yt=e.getRowDefinition(kt.row),ue=e.getColumnDefinition(kt.column);switch(Nt.e(Math.max(ue.minimum,Math.min(t,ue.maximum)),Math.max(Yt.minimum,Math.min(n,Yt.maximum))),X=kt.N0(Yt,ue,!1),X){case 2:Ft[ue.index]!==0&&(Nt.width=Math.min(Nt.width,Ft[ue.index])),Tt[Yt.index]!==0&&(Nt.height=Math.min(Nt.height,Tt[Yt.index]));break;case 5:Ft[ue.index]!==0&&(Nt.width=Math.min(Nt.width,Ft[ue.index]));break;case 4:Tt[Yt.index]!==0&&(Nt.height=Math.min(Nt.height,Tt[Yt.index]));break}isFinite(ue.width)&&(Nt.width=ue.width),isFinite(Yt.height)&&(Nt.height=Yt.height),qt.e(0,0);let We=ue.minimum,rn=Yt.minimum;for(let Se=1;Se<kt.rowSpan&&!(kt.row+Se>=e.rowCount);Se++)E=e.getRowDefinition(kt.row+Se),G=0,X===2||X===4?G=Math.max(E.minimum,Tt[kt.row+Se]===0?E.maximum:Math.min(Tt[kt.row+Se],E.maximum)):G=Math.max(E.minimum,isNaN(E.ge)?E.maximum:Math.min(E.ge,E.maximum)),qt.height+=G,rn+=E.minimum;for(let Se=1;Se<kt.columnSpan&&!(kt.column+Se>=e.columnCount);Se++)E=e.getColumnDefinition(kt.column+Se),G=0,X===2||X===5?G=Math.max(E.minimum,Ft[kt.column+Se]===0?E.maximum:Math.min(Ft[kt.column+Se],E.maximum)):G=Math.max(E.minimum,isNaN(E.ge)?E.maximum:Math.min(E.ge,E.maximum)),qt.width+=G,We+=E.minimum;Nt.width+=qt.width,Nt.height+=qt.height;const cn=kt.margin,gn=cn.right+cn.left,Ps=cn.top+cn.bottom;kt.ut(Nt.width,Nt.height,We,rn);const Ni=kt.measuredBounds,Ui=Math.max(Ni.width+gn,0),kn=Math.max(Ni.height+Ps,0);let zn=0;for(let Se=0;Se<kt.rowSpan&&!(kt.row+Se>=e.rowCount);Se++)E=e.getRowDefinition(kt.row+Se),zn+=E.total||0;if(zn<kn){let Se=kn-zn;const Gs=kn-zn;if(kt.spanAllocation!==null){const di=kt.spanAllocation;for(let Ms=0;Ms<kt.rowSpan&&!(Se<=0||kt.row+Ms>=e.rowCount);Ms++){E=e.getRowDefinition(kt.row+Ms);const ar=E.st||0,Ns=di(kt,E,Gs);E.actual=Math.min(E.maximum,ar+Ns),E.st!==ar&&(Se-=E.st-ar)}}for(;Se>0;){const di=E.st||0;if(isNaN(E.height)&&E.maximum>di&&(E.actual=Math.min(E.maximum,di+Se),E.st!==di&&(Se-=E.st-di)),E.index===0)break;E=e.getRowDefinition(E.index-1)}}let as=0;for(let Se=0;Se<kt.columnSpan&&!(kt.column+Se>=e.columnCount);Se++)E=e.getColumnDefinition(kt.column+Se),as+=E.total||0;if(as<Ui){let Se=Ui-as;const Gs=Ui-as;if(kt.spanAllocation!==null){const di=kt.spanAllocation;for(let Ms=0;Ms<kt.columnSpan&&!(Se<=0||kt.column+Ms>=e.columnCount);Ms++){E=e.getColumnDefinition(kt.column+Ms);const ar=E.st||0,Ns=di(kt,E,Gs);E.actual=Math.min(E.maximum,ar+Ns),E.st!==ar&&(Se-=E.st-ar)}}for(;Se>0;){const di=E.st||0;if(isNaN(E.width)&&E.maximum>di&&(E.actual=Math.min(E.maximum,di+Se),E.st!==di&&(Se-=E.st-di)),E.index===0)break;E=e.getColumnDefinition(E.index-1)}}}o.tt(y),B.s(qt),B.s(Nt),Tt!==void 0&&o.tt(Tt),Ft!==void 0&&o.tt(Ft);let Ot=0,Rt=0;const ne=e.desiredSize,te=e.maxSize;X=e.zs(!0),Z=0,et=0;let At=0,Xt=0;u=e.columnCount;for(let Dt=0;Dt<u;Dt++)if(D[Dt]!==void 0){if(E=e.getColumnDefinition(Dt),isFinite(E.width)){At+=E.width,At+=E.computeEffectiveSpacing();continue}else if(E.Gb()===2){At+=E.st,At+=E.computeEffectiveSpacing();continue}E.st!==0&&(Z+=E.st,Z+=E.computeEffectiveSpacing())}isFinite(ne.width)?Ot=Math.min(ne.width,te.width):X!==0&&isFinite(t)?Ot=t:Ot=Z,Ot=Math.max(Ot,isFinite(t)?Math.min(a,t):a),Ot=Math.max(Ot-At,0);const Be=Z===0?1:Math.max(Ot/Z,1);for(let Dt=0;Dt<u;Dt++)D[Dt]!==void 0&&(E=e.getColumnDefinition(Dt),!isFinite(E.width)&&E.Gb()!==2&&(E.actual=E.st*Be),E.position=r.width,E.st!==0&&(r.width+=E.st,r.width+=E.computeEffectiveSpacing()));u=e.rowCount;for(let Dt=0;Dt<u;Dt++)if(F[Dt]!==void 0){if(E=e.getRowDefinition(Dt),isFinite(E.height)){Xt+=E.height,Xt+=E.computeEffectiveSpacing();continue}else if(E.Gb()===2){Xt+=E.st,Xt+=E.computeEffectiveSpacing();continue}E.st!==0&&(et+=E.st,et+=E.computeEffectiveSpacing())}isFinite(ne.height)?Rt=Math.min(ne.height,te.height):X!==0&&isFinite(n)?Rt=n:Rt=et,Rt=Math.max(Rt,isFinite(n)?Math.min(l,n):l),Rt=Math.max(Rt-Xt,0);const re=et===0?1:Math.max(Rt/et,1);for(let Dt=0;Dt<u;Dt++)F[Dt]!==void 0&&(E=e.getRowDefinition(Dt),!isFinite(E.height)&&E.Gb()!==2&&(E.actual=E.st*re),E.position=r.height,E.st!==0&&(r.height+=E.st,r.height+=E.computeEffectiveSpacing()));u=f.length;for(let Dt=0;Dt<u;Dt++){const kt=f[Dt];let Yt=0,ue=0;kt.type===Kt.TableRow?(Yt=r.width,E=e.getRowDefinition(kt.row),ue=E.actual):(E=e.getColumnDefinition(kt.column),Yt=E.actual,ue=r.height),kt.measuredBounds.e(0,0,Yt,ue),kt.ue(!1)}o.tt(f),e.gh=m}arrange(e,t,n){const i=t.length,r=e.padding,a=r.left,l=r.top,u=e.gh;if(u===null)return;let c=0,f=0;const m=u.length;let p=0;for(let _=0;_<m;_++)u[_]&&(p=Math.max(p,u[_].length));const y=e.Ye,w=e.Ge;let b=0,C=0,k=Math.min(e.topIndex,m-1);if(y.length>0){for(;k!==m&&(y[k]===void 0||y[k].st===0);)k++;k=Math.max(Math.min(k,m-1),0),b=-y[k].position}let N=Math.min(e.leftIndex,p-1);if(w.length>0){for(;N!==p&&(w[N]===void 0||w[N].st===0);)N++;N=Math.max(Math.min(N,p-1),0),C=-w[N].position}let F=0,D=0;for(;F!==m&&y[F]===void 0;)F++;for(;D!==m&&w[D]===void 0;)D++;const E=e.part;let U=e.getRowDefinition(F),$=e.getColumnDefinition(D);for(let _=0;_<t.length;_++){const G=t[_];if(!(G instanceof Kt&&G.visible&&G.Qr()))continue;G.type===Kt.TableRow?(U=e.getRowDefinition(G.row),$=e.getColumnDefinition(D)):(U=e.getRowDefinition(F),$=e.getColumnDefinition(G.column)),f=U.position+b+l,U.st!==0&&(f+=U.computeEffectiveSpacingTop(Math.max(F,k))),c=$.position+C+a,$.st!==0&&(c+=$.computeEffectiveSpacingTop(Math.max(D,N)));const X=G.measuredBounds;G.Qc(),G.actualBounds.ot();const Q=G.actualBounds,Z=I.X(Q.x,Q.y,Q.width,Q.height);if(Q.x=G.type===Kt.TableRow?a:c,Q.y=G.type===Kt.TableColumn?l:f,Q.width=X.width,Q.height=X.height,G.actualBounds.g(),G._n(!1),Z.equalsApproxClose(Q)){I.s(Z);continue}E!==null&&(E.ch(),G.k0(E)),I.s(Z)}const K=B.l();for(let _=0;_<m;_++){if(!u[_])continue;p=u[_].length;const G=e.getRowDefinition(_);f=G.position+b+l,G.st!==0&&(f+=G.computeEffectiveSpacingTop(Math.max(F,k)));for(let X=0;X<p;X++){if(!u[_][X])continue;const Q=e.getColumnDefinition(X);c=Q.position+C+a,Q.st!==0&&(c+=Q.computeEffectiveSpacingTop(Math.max(D,N)));const Z=u[_][X],et=Z.length;for(let st=0;st<et;st++){const ut=Z[st],mt=ut.measuredBounds;K.e(0,0);for(let kn=1;kn<ut.rowSpan&&!(_+kn>=e.rowCount);kn++){const zn=e.getRowDefinition(_+kn);zn.st!==0&&(K.height+=zn.total)}for(let kn=1;kn<ut.columnSpan&&!(X+kn>=e.columnCount);kn++){const zn=e.getColumnDefinition(X+kn);zn.st!==0&&(K.width+=zn.total)}const at=Q.st+K.width,vt=G.st+K.height;let Nt=c,qt=f;const Tt=at,Ft=vt,Ot=c,Rt=f;let ne=at,te=vt;c+at>n.width&&(ne=Math.max(n.width-c,0)),f+vt>n.height&&(te=Math.max(n.height-f,0));let At=ut.alignment,Xt=0,Be=0,re=0,Dt=0;if(At.isDefault()){At=e.defaultAlignment,At.isSpot()||(At=z.Center),Xt=At.x,Be=At.y,re=At.offsetX,Dt=At.offsetY;const kn=Q.alignment,zn=G.alignment;kn.isSpot()&&(Xt=kn.x,re=kn.offsetX),zn.isSpot()&&(Be=zn.y,Dt=zn.offsetY)}else Xt=At.x,Be=At.y,re=At.offsetX,Dt=At.offsetY;(isNaN(Xt)||isNaN(Be))&&(Xt=.5,Be=.5,re=0,Dt=0);let kt=mt.width,Yt=mt.height;const ue=ut.margin,We=ue.left+ue.right,rn=ue.top+ue.bottom,cn=ut.N0(G,Q,!1);isNaN(ut.desiredSize.width)&&(cn===2||cn===5)&&(kt=Math.max(at-We,0)),isNaN(ut.desiredSize.height)&&(cn===2||cn===4)&&(Yt=Math.max(vt-rn,0));const gn=ut.maxSize,Ps=ut.minSize;kt=Math.min(gn.width,kt),Yt=Math.min(gn.height,Yt),kt=Math.max(Ps.width,kt),Yt=Math.max(Ps.height,Yt);const Ni=kt+We,Ui=Yt+rn;Nt+=Tt*Xt-Ni*Xt+re+ue.left,qt+=Ft*Be-Ui*Be+Dt+ue.top,ut.visible&&(I.contains(Ot,Rt,ne,te,Nt,qt,mt.width,mt.height)?ut.zt(Nt,qt,kt,Yt):ut.zt(Nt,qt,kt,Yt,new I(Ot,Rt,ne,te)))}}}B.s(K);for(let _=0;_<i;_++){const G=t[_],X=G instanceof Kt?G:null;if(X!==null&&X.Qr()){const Q=G.actualBounds;G.naturalBounds.ot(),G.naturalBounds.e(0,0,Q.width,Q.height),G.naturalBounds.g()}}}}de.definePanelLayout("Table",new sC);class rC extends de{constructor(){super()}measure(e,t,n,i,r,a,l){}arrange(e,t,n){}}de.definePanelLayout("TableRow",new rC);class oC extends de{constructor(){super()}measure(e,t,n,i,r,a,l){}arrange(e,t,n){}}de.definePanelLayout("TableColumn",new oC);class aC extends de{constructor(){super()}measure(e,t,n,i,r,a,l){i.length!==1&&o.o("Viewbox Panel must contain exactly one GraphObject.");const u=i[0];u.et=1,u.ef(),u.ut(1/0,1/0,a,l);let c=u.measuredBounds;const f=u.margin,m=f.right+f.left,p=f.top+f.bottom;if(isFinite(t)||isFinite(n)){const y=u.scale,w=c.width,b=c.height,C=Math.max(t-m,0),k=Math.max(n-p,0);let N=1;e.viewboxStretch===6?(w!==0&&b!==0&&(N=Math.min(C/w,k/b)),N===0&&(N=1e-4),u.et*=N):(w!==0&&b!==0&&(N=Math.max(C/w,k/b)),N===0&&(N=1e-4),u.et*=N),y!==u.scale&&(u.ue(!0),u.ut(1/0,1/0,a,l))}c=u.measuredBounds,r.width=isFinite(t)?t:Math.max(c.width+m,0),r.height=isFinite(n)?n:Math.max(c.height+p,0)}arrange(e,t,n){const i=t[0],r=i.measuredBounds,a=i.margin,l=a.right+a.left,u=a.top+a.bottom,c=Math.max(r.width+l,0),f=Math.max(r.height+u,0);let m=i.alignment;m.isDefault()&&(m=e.defaultAlignment),m.isSpot()||(m=z.Center),i.zt(n.width*m.x-c*m.x+m.offsetX,n.height*m.y-f*m.y+m.offsetY,r.width,r.height)}}de.definePanelLayout("Viewbox",new aC);class lC extends de{constructor(){super()}measure(e,t,n,i,r,a,l){e.xi===null&&(e.xi=new Fo),this.JR(e),this.$R(e)}arrange(e,t,n){}Bi(e,t,n){const i=e.naturalBounds,r=i.width,a=i.height;t.save(),t.beginPath(),t.rect(0,0,r,a),t.clip(),t.endPath(),this.ZR(e,t,n),t.restore(),t.clearContextCache(!1)}ZR(e,t,n){let i=e.getDocumentScale()*n.scale;i<=0&&(i=1);const r=e.gridCellSize,a=r.width,l=r.height,u=e.naturalBounds,c=e.actualBounds,f=u.width,m=u.height,p=Math.ceil(f/a),y=Math.ceil(m/l),w=e.gridOrigin,b=w.x,C=w.y,k=e.xi.Z0,N=e.L.r,F=N.length;for(let D=0;D<F;D++){const E=N[D];if(!E.visible)continue;const U=E.interval||1,$=Math.abs(U);if(a*$*i<2)continue;let K=E.segmentIndex;(!isFinite(K)||isNaN(K))&&(K=0),K<0&&(K=$-Math.min(-K,$)),K=Math.round(K%$);const _=E.opacity;let G=1;if(_!==1){if(_===0)continue;G=t.globalAlpha,t.globalAlpha=G*_}const X=k[D];let Q=!1;const Z=E.strokeDashArray;if(Z!==null&&(Q=!0,t.enableDash(Z,E.strokeDashOffset)),E.stroke!==null&&E.strokeWidth>0&&(E.figure==="LineV"||E.figure==="LineH")){if(t.lineWidth=E.strokeWidth,e.dn(t,E.stroke,!1,!1,u,c),t.beginPath(),E.figure==="LineV"){const et=Math.floor((b-a)/a);for(let st=et;st<=et+p;st++){const ut=st*a+b;0<=ut&&ut<=f&&this.jb(st,U,K,X)&&(t.moveTo(ut,0),t.lineTo(ut,m))}}else if(E.figure==="LineH"){const et=Math.floor((C-l)/l);for(let st=et;st<=et+y;st++){const ut=st*l+C;0<=ut&&ut<=m&&this.jb(st,U,K,X)&&(t.moveTo(0,ut),t.lineTo(f,ut))}}t.stroke(),t.endPath()}else if(E.fill!==null){if(e.dn(t,E.fill,!0,!1,u,c),E.figure==="BarV"){let et=E.width;isNaN(et)&&(et=a);const st=Math.floor((b-a)/a);for(let ut=st;ut<=st+p;ut++){const mt=ut*a+b;0<=mt+et&&mt<=f&&this.jb(ut,U,K,X)&&t.fillRect(mt,0,et,m)}}else if(E.figure==="BarH"){let et=E.height;isNaN(et)&&(et=l);const st=Math.floor((C-l)/l);for(let ut=st;ut<=st+y;ut++){const mt=ut*l+C;0<=mt+et&&mt<=m&&this.jb(ut,U,K,X)&&t.fillRect(0,mt,f,et)}}}Q&&t.disableDash(),_!==1&&(t.globalAlpha=G)}}jb(e,t,n,i){if(t<0)return e%t===n;if(e%t!==n)return!1;const r=i.length;for(let a=0;a<r;a++){const l=i[a];if(e%l===n)return!1}return!0}$R(e){const t=[],n=e.L.r,i=n.length;for(let r=0;r<i;r++){const a=n[r],l=[];if(t.push(l),!a.visible)continue;const u=a.interval;if(u<0)continue;const c=a.figure,f=this.C2(c);for(let m=0;m<i;m++){if(m===r)continue;const p=n[m];if(!p.visible)continue;const y=p.figure;if(this.C2(y)!==f)continue;const w=p.interval;w>u&&l.push(w)}}e.xi.Z0=t}C2(e){return e==="LineV"||e==="BarV"}JR(e){let t=1,n=1;const i=e.L.r,r=i.length;for(let u=0;u<r;u++){const c=i[u],f=Math.abs(c.interval);f<2||(this.C2(c.figure)?n=n*f/R.dC(n,f):t=t*f/R.dC(t,f))}const a=e.gridCellSize,l=e.xi;l.Yc.isReal()?l.Yc.e(n*a.width,t*a.height):l.Yc=new B(n*a.width,t*a.height)}}de.definePanelLayout("Grid",new lC);class hC extends de{constructor(){super()}measure(e,t,n,i,r,a,l){const u=i.length;if(!(e instanceof ie||e instanceof Gt))return;let c=null,f=null;if(e instanceof Gt&&(c=e),e instanceof ie&&(f=e,c=f.adornedPart,e.af===null&&(e.af=[])),!(c instanceof Gt))return;const m=c;if(u===0){e.naturalBounds.En(0,0),e.measuredBounds.e(0,0,0,0);return}const p=e instanceof ie?null:c.path,y=c.routeBounds,w=e.Yo;w.e(0,0,y.width,y.height);const b=m.points,C=c.pointsCount;f!==null?f.cd(!1):c!==null&&c.cd(!1);const k=y.width,N=y.height,F=e.af;if(F.length=0,p!==null){this.measureLinkPath(e,k,N,p);const $=p.measuredBounds;w.unionRect($),F.push($)}const D=nt.l(),E=T.l(),U=T.l();for(let $=0;$<u;$++){const K=i[$];if(K===p)continue;let _=K.measuredBounds;if(K.isPanelMain&&K instanceof Qt){this.measureLinkPath(e,k,N,K),_=K.measuredBounds,w.unionRect(_),F.push(_);continue}if(C<2){K.ut(1/0,1/0,0,0),_=K.measuredBounds,w.unionRect(_),F.push(_);continue}const G=K.segmentIndex,X=K.segmentFraction;let Q=K.alignmentFocus;Q.isNoSpot()&&(Q=z.Center);const Z=K.segmentOrientation,et=K.segmentOffset;let st=0,ut=0,mt=0,at=0;if(isNaN(G)){const At=m.ct,Xt=o.nt();At.getPointAndAngleAlongPath(X,Xt);const Be=T.X(Xt[0],Xt[1]);at=Xt[2],Z!==0&&(mt=m.computeAngle(K,Z,at),K.Xt=mt,K.ue(!0),K._n(!0)),st=Be.x,ut=Be.y,T.s(Be),o.tt(Xt)}else if(G<-C||G>=C){const At=T.l();m.mA(At),at=m.midAngle,Z!==0&&(mt=m.computeAngle(K,Z,at),K.Xt=mt,K.ue(!0),K._n(!0)),st=At.x-y.x,ut=At.y-y.y,T.s(At)}else{let At,Xt,Be=0;if(G>=0?(At=b.elt(G),Xt=G<C-1?b.elt(G+1):At):(Be=C+G,At=b.elt(Be),Xt=Be>0?b.elt(Be-1):At),at=0,At.equalsApprox(Xt)){let re,Dt;G>=0?(re=G>0?b.elt(G-1):At,Dt=G<C-2?b.elt(G+2):Xt):(re=Be<C-1?b.elt(Be+1):At,Dt=Be>1?b.elt(Be-2):Xt);const kt=re.distanceSquaredPoint(At),Yt=Xt.distanceSquaredPoint(Dt);kt>Yt+10?at=G>=0?re.directionPoint(At):At.directionPoint(re):Yt>kt+10?at=G>=0?Xt.directionPoint(Dt):Dt.directionPoint(Xt):at=G>=0?re.directionPoint(Dt):Dt.directionPoint(re)}else at=G>=0?At.directionPoint(Xt):Xt.directionPoint(At);Z!==0&&(mt=m.computeAngle(K,Z,at),K.Xt=mt,K.ue(!0),K._n(!0)),st=At.x+(Xt.x-At.x)*X-y.x,ut=At.y+(Xt.y-At.y)*X-y.y}K.ut(1/0,1/0,0,0),_=K.measuredBounds;const vt=K.naturalBounds;let Nt=0;K instanceof Qt&&(Nt=K.strokeWidth);const qt=vt.width+Nt,Tt=vt.height+Nt;D.Ri(),D.Ds(-_.x,-_.y),D.et(K.scale,K.scale),D.cs(Z===0?K.angle:at,qt/2,Tt/2),(Z===22||Z===26)&&D.cs(90,qt/2,Tt/2),(Z===23||Z===27)&&D.cs(-90,qt/2,Tt/2),Z===28&&(at>45&&at<135||at>225&&at<315)&&D.cs(-at,qt/2,Tt/2);const Ft=new I(0,0,qt,Tt);E.setRectSpot(Ft,Q),D.xt(E);const Ot=-E.x+Nt/2*K.scale,Rt=-E.y+Nt/2*K.scale;U.a(et);const ne=isNaN(et.x),te=isNaN(et.y);if(ne||te){const At=qt/2+3,Xt=Tt/2+3,Be=at>=45&&at<=135,re=at>=225&&at<=315;Z===0&&(Be||re)?(U.x=te?At:et.y,U.y=ne?Xt:et.x,Be?G>=0||isNaN(G)&&X<.5||ne&&(U.y=-Xt):re&&((G>=0||isNaN(G)&&X<.5)&&ne&&(U.y=-Xt),te&&(U.x=-At))):(ne&&(G>=0||isNaN(G)&&X<.5?U.x=At:U.x=-At),te&&(U.y=-Xt),U.rotate(at))}else U.rotate(at);st+=U.x,ut+=U.y,Ft.e(st+Ot,ut+Rt,_.width,_.height),F.push(Ft),w.unionRect(Ft)}if(c!==null){const $=c.labelNodes;for(;$.next();)$.value.ut(1/0,1/0)}e.Yo=w,e.position.e(y.x+w.x,y.y+w.y),r.En(w.width||0,w.height||0),nt.s(D),T.s(E),T.s(U)}arrange(e,t,n){const i=t.length;if(!(e instanceof ie||e instanceof Gt))return;let r=e,a=null;e instanceof ie&&(a=e,r=a.adornedPart);const l=e,u=e instanceof ie?null:r.path,c=e.af;if(c.length!==0){let y=0;if(u!==null&&y<c.length){const w=c[y];y++,u.zt(w.x-l.Yo.x,w.y-l.Yo.y,w.width,w.height)}for(let w=0;w<i;w++){const b=t[w];if(b!==u&&y<c.length){const C=c[y];y++,b.zt(C.x-l.Yo.x,C.y-l.Yo.y,C.width,C.height)}}}const f=r.points,m=f.count;if(m>=2&&l instanceof Gt){const y=l.labelNodes;for(;y.next();){const w=y.value;l.QR(w,m,f)}}a!==null?a.cd(!1):r.cd(!1);const p=e.pA(T.l());e.location.e(e.position.x+p.x,e.position.y+p.y),T.s(p)}measureLinkPath(e,t,n,i){if(i.Oo()===!1)return;let r=i.strokeWidth;if(r===0&&e instanceof ie&&e.type===Kt.Link&&e.adornedObject instanceof Qt&&(r=e.adornedObject.strokeWidth),r=r*i.et,e instanceof Gt&&e.ct!==null){const a=e.geometry.bounds;i.Qn(a.x-r/2,a.y-r/2,a.width+r,a.height+r)}else if(e instanceof ie&&e.adornedPart.ct!==null){const a=e.adornedPart.ct.bounds;i.Qn(a.x-r/2,a.y-r/2,a.width+r,a.height+r)}else i.Qn(-(r/2),-(r/2),t+r,n+r);i._R(),i.ue(!1)}}de.definePanelLayout("Link",new hC);class uC extends de{constructor(){super()}measure(e,t,n,i,r,a,l){const u=e.findMainElement();e.je=[];const c=u.margin,f=c.right+c.left,m=c.top+c.bottom;u.ut(t,n,a,l);const p=u.measuredBounds,y=p.width,w=p.height,b=Math.max(y+f,0),C=Math.max(w+m,0),k=new I(-c.left,-c.top,b,C);e.je.push(k),r.a(k),this.determineGraduatedMarks(e,u);const N=e.ws;if(N===null)return;const F=i.length;for(let D=0;D<F;D++){const E=i[D],U=N[D];!E.visible||E===u||U.length===0||(E instanceof Qt?this.measureGraduatedTicks(e,E,U,r):E instanceof Je&&this.measureGraduatedLabels(e,E,U,r),E.ue(!1))}}arrange(e,t,n){if(e.je===null)return;const i=e.findMainElement(),r=e.ws;if(r===null)return;const a=e.je;let l=0,u=a[l];l++,i!==null&&i.zt(u.x-n.x,u.y-n.y,u.width,u.height);const c=t.length;for(let f=0;f<c;f++){const m=t[f],p=r[f];!m.visible||m===i||p.length===0||(u=a[l],l++,m.zt(u.x-n.x,u.y-n.y,u.width,u.height))}e.je=null}measureGraduatedTicks(e,t,n,i){let r=t.alignmentFocus;r.isNoSpot()&&(r=z.TopCenter);const a=t.angle;t.Xt=0,t.ut(1/0,1/0,0,0),t.Xt=a;const l=t.measuredBounds,u=l.width,c=l.height,f=I.X(0,0,u,c),m=T.l();m.setRectSpot(f,r),I.s(f);const p=-m.x,y=-m.y,w=new I,b=n.length;for(let C=0;C<b;C++){const k=n[C],N=k.pt.x,F=k.pt.y,D=k.angle;for(let E=0;E<4;E++){switch(E){case 0:m.e(p,y);break;case 1:m.e(p+u,y);break;case 2:m.e(p,y+c);break;case 3:m.e(p+u,y+c);break}m.rotate(D+t.angle),m.offset(N,F),C===0&&E===0?w.e(m.x,m.y,0,0):w.unionPoint(m),m.offset(-N,-F),m.rotate(-D-t.angle)}}T.s(m),e.je!==null&&e.je.push(w),i.unionNoCheck(w.x,w.y,w.width,w.height)}measureGraduatedLabels(e,t,n,i){e.Se===null&&(e.Se=new Je);const r=e.Se;this.yA(t,r);let a=t.alignmentFocus;a.isNoSpot()&&(a=z.TopCenter);const l=t.segmentOrientation,u=t.segmentOffset,c=new I;let f=0,m=0,p=0,y=0,w=0;const b=n.length;for(let C=0;C<b;C++){const k=n[C];f=k.pt.x,m=k.pt.y,p=k.angle,y=t.angle,w=t.angle,l!==0&&(l===21||l===25?w=p+t.angle:w=p,y=Gt.computeAngle(l,w)),r.Xt=y,r.text=k.text||"",r.ut(1/0,1/0,0,0);const N=r.measuredBounds,F=r.naturalBounds,D=F.width,E=F.height,U=nt.l();U.Ri(),U.Ds(-N.x,-N.y),U.et(r.scale,r.scale),U.cs(w,D/2,E/2),(l===22||l===26)&&U.cs(90,D/2,E/2),(l===23||l===27)&&U.cs(-90,D/2,E/2),l===28&&(p>45&&p<135||p>225&&p<315)&&U.cs(-p,D/2,E/2);const $=I.X(0,0,D,E),K=T.l();K.setRectSpot($,a),U.xt(K);const _=-K.x,G=-K.y,X=T.l();X.a(u),isNaN(X.x)&&(X.x=D/2+3),isNaN(X.y)&&(X.y=-(E/2+3)),X.rotate(p),f+=X.x+_,m+=X.y+G;const Q=new I(f,m,N.width,N.height),Z=new I(N.x,N.y,N.width,N.height),et=new I(F.x,F.y,F.width,F.height);k.labelAngle=y,k.lineCount=r.lineCount,k.lines=r.getMetrics(),k.actualBounds=Q,k.measuredBounds=Z,k.naturalBounds=et,C===0?c.a(Q):c.unionRect(Q),T.s(X),T.s(K),I.s($),nt.s(U)}e.je!==null&&e.je.push(c),i.unionNoCheck(c.x,c.y,c.width,c.height)}determineGraduatedMarks(e,t){const n=t.geometry,i=t.strokeWidth,r=n.flattenedSegments,a=n.flattenedLengths,l=n.flattenedTotalLength,u=r.length;let c=0,f=0;const m=o.nt();for(let F=0;F<u;F++){const D=r[F],E=[];c=0,f=0;const U=D.length;for(let $=0;$<U;$+=2){const K=D[$],_=D[$+1];if($===0){c=K,f=_;continue}let G=Math.atan2(_-f,K-c)*180/Math.PI;G<0&&(G+=360),E.push(G),c=K,f=_}m.push(E)}const p=this.tv(e),y=e.L.r,w=y.length;let b=0,C=0,k=l;e.ws=[];let N;for(let F=0;F<w;F++){const D=y[F];if(N=[],!D.visible||D===t){e.ws.push(N);continue}const E=Math.abs(D.interval),U=e.graduatedTickUnit;if(U*E*l/e.graduatedRange<2&&D.graduatedSkip===null){e.ws.push(N);continue}let $=a[0][0],K=0,_=0;C=l*D.graduatedStart-1e-4,k=l*D.graduatedEnd+1e-4;const G=U*E;let X=e.graduatedTickBase;if(X<e.graduatedMin){let st=(e.graduatedMin-X)/G;st=st%1===0?st:Math.floor(st+1),X+=st*G}else if(X>e.graduatedMin+G){const st=Math.floor((X-e.graduatedMin)/G);X-=st*G}const Q=p[F],Z=X,et=e.graduatedMax*1e-6;for(let st=1;X<=e.graduatedMax+et;st++){if(this.iv(e,X-e.graduatedTickBase,Q)&&(X>e.graduatedMax&&(X=e.graduatedMax),(D.graduatedSkip===null||D instanceof Je&&!D.graduatedSkip(X,D)||D instanceof Qt&&!D.graduatedSkip(X,D))&&(b=(X-e.graduatedMin)*l/e.graduatedRange,b>l&&(b=l),C<=b&&b<=k))){let ut=m[K][_],mt=a[K][_];for(;K<a.length;){for(;b>$&&_<a[K].length-1;)_++,ut=m[K][_],mt=a[K][_],$+=mt;if(b<=$)break;K++,_=0,ut=m[K][_],mt=a[K][_],$+=mt}const at=r[K],vt=at[_*2],Nt=at[_*2+1],qt=at[_*2+2],Tt=at[_*2+3],Ft=(b-($-mt))/mt,Ot=new T(vt+(qt-vt)*Ft+i/2-n.bounds.x,Nt+(Tt-Nt)*Ft+i/2-n.bounds.y);if(Ot.scale(t.scale,t.scale),ut=this.ev(ut,Ft,at,m[K],_),D instanceof Je){let Rt="";D.graduatedFunction!==null?(Rt=D.graduatedFunction(X,D),Rt=Rt!=null?Rt.toString():""):Rt=(+X.toFixed(2)).toString(),Rt!==""&&N.push({pt:Ot,angle:ut,text:Rt})}else N.push({pt:Ot,angle:ut})}X=Z+st*G}e.ws.push(N)}o.tt(m)}ev(e,t,n,i,r){if(t<.5005&&t>.4995)return e;let a=e;if(t<.5?r>0?a=i[r-1]:R.K(n[0],n[n.length-2])&&R.K(n[1],n[n.length-1])&&(a=i[i.length-1]):t>.5&&(r+1<i.length?a=i[r+1]:R.K(n[0],n[n.length-2])&&R.K(n[1],n[n.length-1])&&(a=i[0])),e!==a){let l=Math.abs(e-a);if(l>180&&(e<a?e+=360:a+=360,l=Math.abs(e-a)),t<5e-4||t>.9995)return(e+a)/2%360;if(l<10){const u=1-Math.abs(.5-t);return(e*u+a*(1-u))%360}}return e}tv(e){if(e.ns===null){const t=[],n=e.L.r,i=n.length;for(let r=0;r<i;r++){const a=n[r],l=[];if(t.push(l),!a.visible)continue;const u=a.interval;if(!(u<0))for(let c=0;c<i;c++){if(c===r)continue;const f=n[c];if(!f.visible||a.constructor!==f.constructor)continue;const m=f.interval;m>u&&l.push(m)}}e.ns=t}return e.ns}iv(e,t,n){const i=n.length;for(let r=0;r<i;r++){const a=n[r]*e.graduatedTickUnit,l=t%a,u=e.graduatedTickUnit*1e-6;if(l<u&&l>-u)return!1}return!0}Bi(e,t,n){const i=n.Qh;n.Qh=!0;const r=e.naturalBounds,a=r.width,l=r.height,u=t instanceof Pe;t.save(),t.beginPath(),t.rect(-1,-1,a+1,l+1),t.clip(),t.endPath();const c=e.findMainElement();c.Bi(t,n);let f=e.getDocumentScale()*n.scale;f<=0&&(f=1);const m=c.actualBounds,p=e.L.r,y=e.ws,w=p.length;for(let b=0;b<w;b++){const C=p[b],k=y[b],N=k.length;if(!(!C.visible||C===c||k.length===0)){if(C instanceof Qt){if(e.graduatedTickUnit*C.interval*c.geometry.flattenedTotalLength/e.graduatedRange*f<2&&C.graduatedSkip===null)continue;const F=C.measuredBounds,D=C.strokeWidth*C.scale;let E=C.alignmentFocus;E.isNoSpot()&&(E=z.TopCenter);for(let U=0;U<N;U++){const $=k[U].pt,K=k[U].angle;this.sv(C,$,m,K,F,D,E),C.Bi(t,n),u&&(e.svg.appendChild(C.svg),C.svg=null),C.Jr.Ri()}}else if(C instanceof Je){e.Se===null&&(e.Se=new Je);const F=e.Se;this.yA(C,F),F.L2=!0;for(let D=0;D<N;D++){const E=k[D];if(E.actualBounds&&E.measuredBounds&&E.naturalBounds){F.nv(E);const U=E.actualBounds;F.zt(U.x,U.y,U.width,U.height),this.ov(F,m,U,E.measuredBounds,E.naturalBounds),F.Zr=C.part,F.Vs=C.panel,F.Bi(t,n),F.Vs=null,F.Zr=null,u&&(e.svg.appendChild(F.svg),F.svg=null)}}}}}n.Qh=i,t.restore(),t.clearContextCache(!0)}sv(e,t,n,i,r,a,l){const u=e.Jr;u.Ri(),u.Ds(t.x+n.x,t.y+n.y),u.cs(i+e.angle,0,0),u.Ds(-r.width*l.x+l.offsetX+a/2,-r.height*l.y+l.offsetY+a/2),u.et(e.scale,e.scale),e.od(!1),e.oh.set(e.Jr),e.ca=e.scale,e.wa(!1)}ov(e,t,n,i,r){const a=e.Jr;a.Ri(),a.Ds(n.x+t.x,n.y+t.y),a.Ds(-i.x,-i.y),e.y0(a,r.x,r.y,r.width,r.height),e.od(!1),e.oh.set(e.Jr),e.ca=e.scale,e.wa(!1)}yA(e,t){t.rv(e)}}de.definePanelLayout("Graduated",new uC);var i0=(A=>(A[A.Uniform=6]="Uniform",A[A.UniformToFill=7]="UniformToFill",A))(i0||{});const jt=class jt extends Re{constructor(t,n){super();v(this,"$");v(this,"L");v(this,"$t");v(this,"fd");v(this,"Kn");v(this,"il");v(this,"so");v(this,"Yo");v(this,"A2");v(this,"O");v(this,"ud");v(this,"lt");v(this,"xi");v(this,"Qt");v(this,"dd");v(this,"mh");v(this,"Ys");if(this.$=null,t===void 0)this.$=jt.Position;else if(typeof t=="string"){const i=de.Layouts.get(t);i!==null&&(this.$=i)}else t instanceof de?this.$=t:t&&(this.$=jt.Position,n=t);this.$===null&&o.o("Panel type not specified or PanelLayout not loaded: "+t),this.n|=4194304|(this.$===jt.Grid?1048576:0),this.L=new M,this.$t=tt.Ug,this.fd=z.Default,this.Kn=1,this.il=null,this.so="",this.Yo=new I(NaN,NaN,NaN,NaN),this.A2=null,this.O=null,this.ud=6,this.xi=null,this.lt=null,this.Qt=null,this.dd=NaN,this.mh=null,this.Ys=null,n&&Object.assign(this,n)}cloneProtected(t){super.cloneProtected(t),t.$=this.$,t.$t=this.$t.N(),t.fd=this.fd.N(),t.Kn=this.Kn,t.so=this.so,t.Yo.a(this.Yo),this.O!==null&&(t.O=this.O.copy(t)),t.ud=this.ud,this.lt!==null&&(t.lt=this.lt.copy()),this.xi!==null&&(t.xi=this.xi.copy()),t.Qt=this.Qt,t.dd=this.dd,t.mh=this.mh}Vo(t){super.Vo(t),t.L=this.L;const n=t.L.r,i=n.length;for(let r=0;r<i;r++){const a=n[r];a.Vs=t}t.il=null}copy(){const t=super.copy();if(t!==null){const n=this.L.r,i=n.length;for(let r=0;r<i;r++){const a=n[r].copy();t.lv(a)}return t}else return null}toString(){return"Panel("+this.type.name+")#"+L.as(this)}get type(){return this.$}set type(t){const n=this.$;n!==t&&(this.$=t,this.cf=this.$===jt.Grid,this.c(),this.t("type",n,t))}get elements(){return this.L.iterator}get naturalBounds(){return this.zi}get padding(){return this.$t}set padding(t){typeof t=="number"?(t<0&&o._(t,">= 0",jt,"padding"),t=new tt(t)):(t.left<0&&o._(t.left,">= 0",jt,"padding:value.left"),t.right<0&&o._(t.right,">= 0",jt,"padding:value.right"),t.top<0&&o._(t.top,">= 0",jt,"padding:value.top"),t.bottom<0&&o._(t.bottom,">= 0",jt,"padding:value.bottom"));const n=this.$t;n.equals(t)||(t=t.N(),this.$t=t,this.c(),this.t("padding",n,t))}get defaultAlignment(){return this.fd}set defaultAlignment(t){const n=this.fd;n.equals(t)||(t=t.N(),this.fd=t,this.c(),this.t("defaultAlignment",n,t))}get defaultStretch(){return this.Kn}set defaultStretch(t){const n=this.Kn;n!==t&&(this.Kn=t,this.c(),this.t("defaultStretch",n,t))}get defaultSeparatorPadding(){return this.O!==null?this.O.Q0:tt.Ug}set defaultSeparatorPadding(t){typeof t=="number"&&(t=new tt(t));const n=this.defaultSeparatorPadding;n.equals(t)||(t=t.N(),this.O===null&&(this.O=new hi),this.O.Q0=t,this.c(),this.t("defaultSeparatorPadding",n,t))}get defaultRowSeparatorStroke(){return this.O!==null?this.O._0:null}set defaultRowSeparatorStroke(t){const n=this.defaultRowSeparatorStroke;n!==t&&(t===null||typeof t=="string"||t instanceof ve)&&(t instanceof ve&&t.g(),this.O===null&&(this.O=new hi),this.O._0=t,this.C(),this.t("defaultRowSeparatorStroke",n,t))}get defaultRowSeparatorStrokeWidth(){return this.O!==null?this.O.tp:1}set defaultRowSeparatorStrokeWidth(t){const n=this.defaultRowSeparatorStrokeWidth;n!==t&&isFinite(t)&&t>=0&&(this.O===null&&(this.O=new hi),this.O.tp=t,this.c(),this.t("defaultRowSeparatorStrokeWidth",n,t))}get defaultRowSeparatorDashArray(){return this.O!==null?this.O.ip:null}set defaultRowSeparatorDashArray(t){const n=this.defaultRowSeparatorDashArray;if(n!==t){if(t!==null&&!Array.isArray(t)&&o.we(t,"Array",jt,"defaultRowSeparatorDashArray:value"),t!==null){const i=t.length;let r=0;for(let a=0;a<i;a++){const l=t[a];(typeof l!="number"||!(l>=0)||!isFinite(l))&&o.o("defaultRowSeparatorDashArray value "+l+" at index "+a+" must be a positive number or zero."),r+=l}if(r===0){if(n===null)return;t=null}}this.O===null&&(this.O=new hi),this.O.ip=t,this.C(),this.t("defaultRowSeparatorDashArray",n,t)}}get defaultColumnSeparatorStroke(){return this.O!==null?this.O.ep:null}set defaultColumnSeparatorStroke(t){const n=this.defaultColumnSeparatorStroke;n!==t&&(t===null||typeof t=="string"||t instanceof ve)&&(t instanceof ve&&t.g(),this.O===null&&(this.O=new hi),this.O.ep=t,this.C(),this.t("defaultColumnSeparatorStroke",n,t))}get defaultColumnSeparatorStrokeWidth(){return this.O!==null?this.O.sp:1}set defaultColumnSeparatorStrokeWidth(t){const n=this.defaultColumnSeparatorStrokeWidth;n!==t&&isFinite(t)&&t>=0&&(this.O===null&&(this.O=new hi),this.O.sp=t,this.c(),this.t("defaultColumnSeparatorStrokeWidth",n,t))}get defaultColumnSeparatorDashArray(){return this.O!==null?this.O.np:null}set defaultColumnSeparatorDashArray(t){const n=this.defaultColumnSeparatorDashArray;if(n!==t){if(t!==null&&!Array.isArray(t)&&o.we(t,"Array",jt,"defaultColumnSeparatorDashArray:value"),t!==null){const i=t.length;let r=0;for(let a=0;a<i;a++){const l=t[a];(typeof l!="number"||!(l>=0)||!isFinite(l))&&o.o("defaultColumnSeparatorDashArray value "+l+" at index "+a+" must be a positive number or zero."),r+=l}if(r===0){if(n===null)return;t=null}}this.O===null&&(this.O=new hi),this.O.np=t,this.C(),this.t("defaultColumnSeparatorDashArray",n,t)}}get gh(){return this.O!==null?this.O.gh:null}set gh(t){this.O===null&&(this.O=new hi),this.O.gh=t}get viewboxStretch(){return this.ud}set viewboxStretch(t){const n=this.ud;n!==t&&(this.ud=t,this.c(),this.t("viewboxStretch",n,t))}get gridCellSize(){return this.xi!==null?this.xi.gd:B.tC}set gridCellSize(t){this.xi===null&&(this.xi=new Fo);const n=this.xi.gd;if(!n.equals(t)){(!t.isReal()||t.width===0||t.height===0)&&o.o("Invalid Panel.gridCellSize: "+t),this.xi.gd=t.N();const i=this.diagram;i!==null&&this===i.grid&&i._l(),this.C(),this.t("gridCellSize",n,t)}}get gridOrigin(){return this.xi!==null?this.xi.md:T.Po}set gridOrigin(t){this.xi===null&&(this.xi=new Fo);const n=this.xi.md;if(!n.equals(t)){t.isReal()||o.o("Invalid Panel.gridOrigin: "+t),this.xi.md=t.N();const i=this.diagram;i!==null&&this===i.grid&&i._l(),this.C(),this.t("gridOrigin",n,t)}}get graduatedMin(){return this.lt!==null?this.lt.op:0}set graduatedMin(t){const n=this.graduatedMin;if(n!==t&&(this.lt===null&&(this.lt=new Ks),this.lt.op=t,this.c(),this.t("graduatedMin",n,t),this.$c())){const i=this.part;i!==null&&this.ya(i,"graduatedRange")}}get graduatedMax(){return this.lt!==null?this.lt.rp:100}set graduatedMax(t){const n=this.graduatedMax;if(n!==t&&(this.lt===null&&(this.lt=new Ks),this.lt.rp=t,this.c(),this.t("graduatedMax",n,t),this.$c())){const i=this.part;i!==null&&this.ya(i,"graduatedRange")}}get graduatedRange(){return this.graduatedMax-this.graduatedMin}get graduatedTickUnit(){return this.lt!==null?this.lt.lp:10}set graduatedTickUnit(t){const n=this.graduatedTickUnit;n!==t&&t>0&&(this.lt===null&&(this.lt=new Ks),this.lt.lp=t,this.c(),this.t("graduatedTickUnit",n,t))}get graduatedTickBase(){return this.lt!==null?this.lt.hp:0}set graduatedTickBase(t){const n=this.graduatedTickBase;n!==t&&(this.lt===null&&(this.lt=new Ks),this.lt.hp=t,this.c(),this.t("graduatedTickBase",n,t))}get ws(){return this.lt!==null?this.lt.ws:null}set ws(t){this.lt!==null?this.lt.ws=t:t!==null&&(this.lt=new Ks,this.lt.ws=t)}get je(){return this.lt!==null?this.lt.je:null}set je(t){this.lt!==null?this.lt.je=t:t!==null&&(this.lt=new Ks,this.lt.je=t)}get ns(){return this.lt!==null?this.lt.ns:null}set ns(t){this.lt!==null?this.lt.ns=t:t!==null&&(this.lt=new Ks,this.lt.ns=t)}get Se(){return this.lt!==null?this.lt.Se:null}set Se(t){this.lt!==null?this.lt.Se=t:t!==null&&(this.lt=new Ks,this.lt.Se=t)}k0(t){super.k0(t);const n=this.L.r,i=n.length;for(let r=0;r<i;r++)n[r].k0(t)}fh(t,n){if(this.$===jt.Grid){t.commitTransform(),this.$.Bi(this,t,n);return}if(this.$===jt.Graduated){t.commitTransform(),this.$.Bi(this,t,n);return}if(this.$===jt.Table)if(t.commitTransform(),t instanceof Pe){const u=t.currentElement;t.currentElement=t.newGroup2("gojs-ts"),this.T2(t,n),t.endGroup(),t.currentElement=u}else this.T2(t,n);const i=this.isClipping&&this.$===jt.Spot;i&&t.save();const r=this.findMainElement(),a=this.L.r,l=a.length;for(let u=0;u<l;u++){const c=a[u];i&&c===r&&(t.clipInsteadOfFill=!0),c.Bi(t,n),i&&c===r&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.clearContextCache(!0))}T2(t,n){t.lineCap="butt";const i=this.rowCount>0?this.Ye:null,r=this.columnCount>0?this.Ge:null;i!==null&&this.Hb(t,n,!0,i,!0),r!==null&&this.Hb(t,n,!1,r,!0),i!==null&&this.wA(t,!0,i),r!==null&&this.wA(t,!1,r),i!==null&&this.Hb(t,n,!0,i,!1),r!==null&&this.Hb(t,n,!1,r,!1)}wA(t,n,i){const r=i.length,a=this.actualBounds,l=this.naturalBounds;let u=!0;for(let c=0;c<r;c++){const f=i[c];if(f===void 0||f.actual===0)continue;if(u){u=!1;continue}if(n){if(f.position>l.height)continue}else if(f.position>l.width)continue;let m=f.separatorStrokeWidth;isNaN(m)&&(m=n?this.defaultRowSeparatorStrokeWidth:this.defaultColumnSeparatorStrokeWidth);let p=f.separatorStroke;if(p===null&&(p=n?this.defaultRowSeparatorStroke:this.defaultColumnSeparatorStroke),m===0||p===null)continue;this.dn(t,p,!1,!1,l,a);let y=!1,w=f.separatorDashArray;w===null&&(w=n?this.defaultRowSeparatorDashArray:this.defaultColumnSeparatorDashArray),w!==null&&(y=!0,t.enableDash(w,0)),t.beginPath();const b=f.position+m;n?b>l.height&&(m-=b-l.height):b>l.width&&(m-=b-l.width);let C=f.position+m/2;t.lineWidth=m;const k=this.$t;if(n){C+=k.top;const N=k.left,F=l.width-k.right;t.moveTo(N,C),t.lineTo(F,C)}else{C+=k.left;const N=k.top,F=l.height-k.bottom;t.moveTo(C,N),t.lineTo(C,F)}t.stroke(),t.endPath(),y&&t.disableDash()}}Hb(t,n,i,r,a){const l=r.length,u=this.actualBounds,c=this.naturalBounds,f=this.xA(!0),m=this.xA(!1);for(let p=0;p<l;p++){const y=r[p];if(y===void 0||y.background===null||y.coversSeparators===a||y.actual===0)continue;const w=i?u.height:u.width;if(y.position>w)continue;let b=y.computeEffectiveSpacing(),C=y.separatorStrokeWidth;isNaN(C)&&(C=i?this.defaultRowSeparatorStrokeWidth:this.defaultColumnSeparatorStrokeWidth);let k=y.separatorStroke;k===null&&(k=i?this.defaultRowSeparatorStroke:this.defaultColumnSeparatorStroke),(k===null||y.index===(i?f:m))&&(C=0),b-=C;const N=y.position+C;let F=b+y.actual;if(N+F>w&&(F=w-N),F<=0)continue;const D=this.$t;this.dn(t,y.background,!0,!1,c,u),i?t.fillRect(D.left,N+D.top,u.width-(D.left+D.right),F):t.fillRect(N+D.left,D.top,F,u.height-(D.top+D.bottom))}}xA(t){const n=t?this.rowCount:this.columnCount;for(let i=0;i<n;i++){const r=t?this.Ye[i]:this.Ge[i];if(r!==void 0)return r.index}return 0}nd(){const t=this.L.r,n=t.length;for(let i=0;i<n;i++)t[i].nd();this.ss(!0)}_c(t,n,i){const r=this.svg;if(r===null)return!1;if(this.type===jt.Table){const u=r.getElementsByClassName("gojs-ts"),c=u.length!==0?u[0]:null;c!==null&&(c.innerHTML=""),t.currentElement=c,this.T2(t,n),t.currentElement=null}else{if(this.$===jt.Grid||this.$===jt.Graduated)return r.innerHTML="",r.remove(),!1;if(this.$===jt.Spot&&this.isClipping)return r.innerHTML="",r.remove(),this.rh=null,this.nd(),!1}if(!super._c(t,n,i))return!1;const a=this.L.r,l=a.length;for(let u=0;u<l;u++)a[u].Bi(t,n);return!0}sd(t){return!0}S0(t,n,i,r){if(!this.isClipping){if(this.Xs()&&t.partClipRect!==null){const a=t.partClipRect,l=this.L.r;let u=0,c=0;for(let f=0;f<l.length;f++){if(!l[f].isVisibleObject())continue;const m=l[f].actualBounds;u=f===0?m.x:Math.min(m.x,u),c=f===0?m.y:Math.min(m.y,c)}r.setAttributeNS(null,"clip-path",`path('M ${a.x-i.x-u},${a.y-i.y-c} l ${a.width} 0 l 0 ${a.height} l -${a.width} 0 z')`);return}super.S0(t,n,i,r)}}Zc(t,n,i,r,a){const l=this.pn(),u=this.D,c=1/(u.m11*u.m22-u.m12*u.m21);let f=u.m22*c,m=-u.m12*c,p=-u.m21*c,y=u.m11*c,w=c*(u.m21*u.dy-u.m22*u.dx),b=c*(u.m12*u.dx-u.m11*u.dy);if(this.background!==null){const C=t*f+n*p+w,k=t*m+n*y+b,N=i*f+r*p+w,F=i*m+r*y+b;a.e(0,0);const D=this.naturalBounds,E=R.ml(0,0,D.width,D.height,C,k,N,F,a);return a.D(u),E}else{l||(f=1,m=0,p=0,y=1,w=0,b=0);const C=t*f+n*p+w,k=t*m+n*y+b,N=i*f+r*p+w,F=i*m+r*y+b;a.e(N,F);let D=(N-C)*(N-C)+(F-k)*(F-k),E=!1;const U=this.L.r,$=U.length,K=T.l();let _=null,G=1/0,X=null;const Q=this.isClipping&&this.$===jt.Spot;Q&&(X=T.l(),_=this.findMainElement(),E=_.Zc(C,k,N,F,X),E&&(G=(C-X.x)*(C-X.x)+(k-X.y)*(k-X.y)));for(let Z=0;Z<$;Z++){const et=U[Z];if(!et.visible||et===_||!et.Zc(C,k,N,F,K))continue;E=!0;const st=(C-K.x)*(C-K.x)+(k-K.y)*(k-K.y);st<D&&(D=st,a.set(K))}return Q&&(G>D&&a.set(X),T.s(X)),T.s(K),l&&a.D(u),E}}Fu(){const t=this.L.r,n=t.length;for(let i=0;i<n;i++)t[i].Fu();super.Fu()}c(t){if(this.Oo())return;super.c(t);let n=null;(this.$===jt.Auto||this.$===jt.Link)&&(n=this.findMainElement());const i=this.L.r,r=i.length;for(let a=0;a<r;a++){const l=i[a];if((l===n||l.isPanelMain)&&l.c(!0),l.desiredSize.isReal())continue;const u=l.zs(!1);!(l instanceof $i)&&!(l instanceof jt)&&!(l instanceof Je)&&u===0||l.c(!0)}}ef(){if(this.Oo())return;this.ue(!0),this._n(!0);const t=this.L.r,n=t.length;for(let i=0;i<n;i++)t[i].ef()}Qc(){if(this.Bb()===!1){this.od(!0),this.wa(!0);const t=this.L.r,n=t.length;for(let i=0;i<n;i++)t[i].h2()}}h2(){this.wa(!0);const t=this.L.r,n=t.length;for(let i=0;i<n;i++)t[i].h2()}td(t,n,i,r){const a=this.Yo;a.e(0,0,0,0);const l=this.desiredSize,u=this.minSize;i===void 0&&(i=u.width,r=u.height),i=Math.max(i,u.width),r=Math.max(r,u.height);const c=this.maxSize;isNaN(l.width)||(t=Math.min(l.width,c.width)),isNaN(l.height)||(n=Math.min(l.height,c.height)),t=Math.max(i,t),n=Math.max(r,n);const f=this.$t;t=Math.max(t-f.left-f.right,0),n=Math.max(n-f.top-f.bottom,0);const m=this.L.r;this.$.measure(this,t,n,m,a,i,r);let p=a.width+f.left+f.right,y=a.height+f.top+f.bottom;isFinite(l.width)&&(p=l.width),isFinite(l.height)&&(y=l.height),p=Math.min(c.width,p),y=Math.min(c.height,y),p=Math.max(u.width,p),y=Math.max(u.height,y),p=Math.max(i,p),y=Math.max(r,y),a.En(p,y),this.naturalBounds.En(p,y),this.Qn(0,0,p,y)}findMainElement(){if(this.il===null){const t=this.L.r,n=t.length;if(n===0)return null;for(let i=0;i<n;i++){const r=t[i];if(r.isPanelMain===!0)return this.il=r,r}this.il=t[0]}return this.il}Ko(){return this.part!==null?this.part.locationObject:null}get panelLayoutState(){return this.A2}set panelLayoutState(t){this.A2=t}ah(t,n,i,r){const a=this.L.r;if(this.actualBounds.e(t,n,i,r),!this.desiredSize.isReal()){let l=this.zs(!0);const u=this.measuredBounds,c=u.width,f=u.height,m=this.$r,p=m.left+m.right,y=m.top+m.bottom;switch(c===i&&f===r&&(l=0),l){case 0:(c>i||f>r)&&(this.c(),this.ut(c>i?i:c,f>r?r:f,0,0));break;case 2:this.c(!0),this.ut(i+p,r+y,0,0);break;case 5:this.c(!0),this.ut(i+p,f+y,0,0);break;case 4:this.c(!0),this.ut(c+p,r+y,0,0);break}}this.$.arrange(this,a,this.Yo)}hh(t){const n=this.naturalBounds,i=this.Ko();if(I.contains(0,0,n.width,n.height,t.x,t.y)){const r=this.L.r,a=r.length,l=T.X(0,0);for(let u=a;u--;){const c=r[u];if(!(!c.visible&&c!==i)&&(l.set(t).Ie(c.D),c.containsPoint(l)))return T.s(l),!0}return T.s(l),this.Ct!==null}return!1}p0(t){if(this.$n===t)return this;const n=this.L.r,i=n.length;for(let r=0;r<i;r++){const a=n[r].p0(t);if(a!==null)return a}return null}walkVisualTreeFrom(t,n){if(n(this,t),t instanceof jt){const i=t.L.r,r=i.length;for(let a=0;a<r;a++)this.walkVisualTreeFrom(i[a],n)}}Hr(t){this.bA(this,t)}bA(t,n){n(t);const i=t.L.r,r=i.length;for(let a=0;a<r;a++){const l=i[a];l instanceof jt&&this.bA(l,n)}}hv(t){this.kA(this,t)}kA(t,n){if(n(t),t instanceof jt){const i=t.L.r,r=i.length;for(let a=0;a<r;a++)this.kA(i[a],n)}}findInVisualTree(t){return this.PA(this,t)}PA(t,n){if(n(t))return t;if(t instanceof jt){const i=t.L.r,r=i.length;for(let a=0;a<r;a++){const l=this.PA(i[a],n);if(l!==null)return l}}return null}findObject(t){if(this.name===t)return this;const n=this.L.r;let i=n.length;this.av()&&(i=this.ap());for(let r=0;r<i;r++){const a=n[r];if(a instanceof jt){const l=a.findObject(t);if(l!==null)return l}if(a.name===t)return a}return null}SA(){const t=this.L.r,n=t.length;let i=0;for(let r=0;r<n;r++){const a=t[r];a instanceof jt?i=Math.max(i,a.SA()):a instanceof Qt&&(i=Math.max(i,a.cv()))}return i}pn(){return!(this.type===jt.TableRow||this.type===jt.TableColumn)}Qr(){return this.type===jt.TableRow||this.type===jt.TableColumn}tL(t,n,i){if(this.pickable===!1||(n===void 0&&(n=null),i===void 0&&(i=null),this.is()))return null;const r=this.naturalBounds,a=1/this.getDocumentScale(),l=this.pn(),u=l?t:T.X(t.x,t.y).Ie(this.D),c=this.diagram;let f=10,m=5;if(c!==null&&(f=c.getInputOption("extraTouchArea"),m=f/2),I.contains(-(m*a),-(m*a),r.width+f*a,r.height+f*a,u.x,u.y)){if(!this.cf){const y=this.L.r,w=y.length,b=T.l(),C=this.isClipping&&this.$===jt.Spot,k=C?this.findMainElement():null;if(C&&(k.pn()?b.set(t).Ie(k.D):b.set(t),!k.containsPoint(b)))return T.s(b),l||T.s(u),null;const N=this.Ko();for(let F=w;F--;){const D=y[F];if(!D.visible&&D!==N||(D.pn()?b.set(t).Ie(D.D):b.set(t),C&&D===k))continue;let E=null;if(D instanceof jt?E=D.tL(b,n,i):D.pickable===!0&&D.containsPoint(b)&&(E=D),E!==null&&(n!==null&&(E=n(E)),E!==null&&(i===null||i(E))))return T.s(b),l||T.s(u),E}T.s(b)}if(this.background===null)return l||T.s(u),null;const p=I.contains(0,0,r.width,r.height,u.x,u.y)?this:null;return l||T.s(u),p}return l||T.s(u),null}iL(t,n,i,r){if(this.pickable===!1)return!1;n===void 0&&(n=null),i===void 0&&(i=null);const a=this.naturalBounds,l=this.pn(),u=l?t:T.X(t.x,t.y).Ie(this.D),c=this.Qr(),f=I.contains(0,0,a.width,a.height,u.x,u.y);if(c||f){if(!this.cf){const m=this.L.r,p=m.length,y=T.l(),w=this.Ko();for(let b=p;b--;){const C=m[b];if(!C.visible&&C!==w)continue;C.pn()?y.set(t).Ie(C.D):y.set(t);let k=C;const N=C instanceof jt?C:null;if(N!==null?N.iL(y,n,i,r):k.containsPoint(y)){if(k.pickable===!1)continue;n!==null&&(k=n(k)),k!==null&&(i===null||i(k))&&r.add(k)}}T.s(y)}return l||T.s(u),f&&this.background!==null}return l||T.s(u),!1}Im(t,n,i,r,a,l){if(this.pickable===!1)return!1;n===void 0&&(n=null),i===void 0&&(i=null);let u=l;if(l===void 0&&(u=nt.l(),u.Ri()),u.ic(this.D),this.containedInRect(t,u))return this.D2(n,i,a),l===void 0&&nt.s(u),!0;if(this.intersectsRect(t,u)){if(!this.cf){const c=this.Ko(),f=this.L.r,m=f.length;for(let p=m;p--;){const y=f[p];if(!y.visible&&y!==c)continue;const w=y.actualBounds,b=this.naturalBounds;if(w.x>b.width||w.y>b.height||w.x+w.width<0||w.y+w.height<0)continue;let C=y;const k=y instanceof jt?y:null,N=nt.l();N.set(u),(k!==null?k.Im(t,n,i,r,a,N):C.QL(t,r,N))&&(n!==null&&(C=n(C)),C!==null&&(i===null||i(C))&&a.add(C)),nt.s(N)}}return l===void 0&&nt.s(u),r}return l===void 0&&nt.s(u),!1}D2(t,n,i){const r=this.L.r,a=r.length;for(let l=a;l--;){const u=r[l];if(!u.visible)continue;const c=u.actualBounds,f=this.naturalBounds;if(c.x>f.width||c.y>f.height||c.x+c.width<0||c.y+c.height<0)continue;u instanceof jt&&u.D2(t,n,i);let m=u;t!==null&&(m=t(m)),m!==null&&(n===null||n(m))&&i.add(m)}}eL(t,n,i,r,a,l){if(this.pickable===!1)return!1;i===void 0&&(i=null),r===void 0&&(r=null);const u=this.naturalBounds,c=this.pn(),f=c?t:T.X(t.x,t.y).Ie(this.D),m=c?n:T.X(n.x,n.y).Ie(this.D),p=f.distanceSquaredPoint(m),y=f.x>0&&f.x<u.width&&f.y>0&&f.y<u.height||T.distanceLineSegmentSquared(f.x,f.y,0,0,0,u.height)<=p||T.distanceLineSegmentSquared(f.x,f.y,0,u.height,u.width,u.height)<=p||T.distanceLineSegmentSquared(f.x,f.y,u.width,u.height,u.width,0)<=p||T.distanceLineSegmentSquared(f.x,f.y,u.width,0,0,0)<=p,w=f.distanceSquared(0,0)<=p&&f.distanceSquared(0,u.height)<=p&&f.distanceSquared(u.width,0)<=p&&f.distanceSquared(u.width,u.height)<=p;if(c||(T.s(f),T.s(m)),y){if(!this.cf){const b=T.l(),C=T.l(),k=this.Ko(),N=this.L.r,F=N.length;for(let D=F;D--;){const E=N[D];if(!E.visible&&E!==k)continue;const U=E.actualBounds,$=this.naturalBounds;if(c&&(U.x>$.width||U.y>$.height||U.x+U.width<0||U.y+U.height<0))continue;if(E.pn()){const G=E.D;b.set(t).Ie(G),C.set(n).Ie(G)}else b.set(t),C.set(n);let K=E;const _=E instanceof jt?E:null;(_!==null?_.eL(b,C,i,r,a,l):K._L(b,C,a))&&(i!==null&&(K=i(K)),K!==null&&(r===null||r(K))&&l.add(K))}T.s(b),T.s(C)}return a?y:w}return!1}M2(t){let n=null;if(t instanceof Qt){n=t.spot1,n===z.Default&&(n=null);const i=t.geometry;i!==null&&n===null&&(n=i.spot1)}return n===null&&(n=z.TopLeft),n}N2(t){let n=null;if(t instanceof Qt){n=t.spot2,n===z.Default&&(n=null);const i=t.geometry;i!==null&&n===null&&(n=i.spot2)}return n===null&&(n=z.BottomRight),n}add(...t){for(let n=0;n<t.length;n++)this.insertAt(this.L.count,t[n]);return this}elt(t){return this.L.elt(t)}insertAt(t,n){n instanceof xe&&o.o("Cannot add a Part to a Panel: "+n+"; use a Panel instead"),(this===n||this.isContainedBy(n))&&(this===n&&o.o("Cannot make a Panel contain itself: "+this.toString()),o.o("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+n.toString()));const i=n.panel;if(i!==null&&i!==this&&o.o("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+n.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.$===jt.Grid&&!(n instanceof Qt)&&o.o("Can only add Shapes to a Grid Panel, not: "+n),this.$===jt.Graduated&&!(n instanceof Qt||n instanceof Je)&&o.o("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+n),n.xa(this),n.Zr=null,this.itemArray!==null){const u=n.data;u!==null&&typeof u=="object"&&(this.Ys===null&&(this.Ys=new W),this.Ys.set(u,n))}const r=this.L;let a=-1;if(i===this){let u=-1;const c=this.L.r,f=c.length;for(let m=0;m<f;m++)if(c[m]===n){u=m;break}if(u!==-1){if(u===t||u+1>=r.count&&t>=r.count)return;r.removeAt(u),a=u}else o.o("element "+n.toString()+" has panel "+i.toString()+" but is not contained by it.")}(t<0||t>r.count)&&(t=r.count),r.insertAt(t,n),(t===0||n.isPanelMain)&&(this.il=null),this.Oo()||this.c(),n.c(!1),n.portId!==null?this.wn=!0:n instanceof jt&&n.wn===!0&&(this.wn=!0),this.ns=null,this.isEnabledObject()||this.qb(n,!1);const l=this.part;if(l!==null){l.D0(),l.ff(),this.wn&&l instanceof It&&(l.wn=!0),l.wn&&l instanceof It&&(l.ne=null);const u=this.diagram;if(u!==null&&u.undoManager.isUndoingRedoing)return;a!==-1&&l.raiseChangedEvent(4,"elements",this,n,null,a,null),l.raiseChangedEvent(3,"elements",this,null,n,null,t)}}get wn(){return(this.n&8388608)!==0}set wn(t){(this.n&8388608)!==0!==t&&(this.n=this.n^8388608)}e2(){return(this.n&16777216)!==0}F2(t){t?this.n|=16777216:this.n&=-16777217}lv(t){t.xa(this),t.Zr=null;const n=this.L,i=n.count;n.insertAt(i,t);const r=this.part;if(r!==null){r.D0(),t.portId!==null&&r instanceof It&&(r.wn=!0);const a=this.diagram;if(a!==null&&a.undoManager.isUndoingRedoing)return;r.raiseChangedEvent(3,"elements",this,null,t,null,i)}}AR(t){const n=this.L.r,i=n.length;let r=-1;for(let a=0;a<i;a++)if(n[a]===t){r=a;break}return r}remove(t){const n=this.L.r,i=n.length;let r=-1;for(let a=0;a<i;a++)if(n[a]===t){r=a;break}r!==-1&&this.te(r,!0)}removeAt(t){t>=0&&this.te(t,!0)}te(t,n){const i=this.L,r=i.elt(t);if(r.Zr=null,r.xa(null),this.Ys!==null){const l=r.data;typeof l=="object"&&this.Ys.delete(l)}i.removeAt(t),this.ue(!1),this.c(),this.il===r&&(this.il=null),this.ns=null;const a=this.part;if(a!==null){a.D0(),a.ff(),a.invalidateAdornments(),a instanceof It&&(r instanceof jt?r.walkVisualTreeFrom(r,(u,c)=>a.u2(c,n)):a.u2(r,n));const l=this.diagram;if(l!==null&&l.undoManager.isUndoingRedoing)return;a.raiseChangedEvent(4,"elements",this,r,null,t,null)}}get Ye(){return this.O===null&&(this.O=new hi),this.O.Ye}get rowCount(){return this.O===null?0:this.Ye.length}getRowDefinition(t){t<0&&o._(t,">= 0",jt,"getRowDefinition:idx"),t=Math.round(t);const n=this.Ye;if(n[t]===void 0){const i=new ui;i.xa(this),i.isRow=!0,i.index=t,n[t]=i,this.raiseChangedEvent(3,"rowdefs",this,null,i,null,t)}return n[t]}removeRowDefinition(t){if(t<0&&o._(t,">= 0",jt,"removeRowDefinition:idx"),this.rowCount===0)return;t=Math.round(t);const n=this.Ye,i=n[t];if(i){n[t]=void 0;let r=n.length-1;for(;r>=0&&n[r--]===void 0;)n.length--;this.raiseChangedEvent(4,"rowdefs",this,i,null,t,null),this.c()}}DL(t,n){const i=this.Ye;if(!(t<0)){if(i[t]=n instanceof ui?n:void 0,!n){let r=i.length-1;for(;r>=0&&i[r--]===void 0;)i.length--}this.c()}}get Ge(){return this.O===null&&(this.O=new hi),this.O.Ge}get columnCount(){return this.O===null?0:this.Ge.length}getColumnDefinition(t){t<0&&o._(t,">= 0",jt,"getColumnDefinition:idx"),t=Math.round(t);const n=this.Ge;if(n[t]===void 0){const i=new ui;i.xa(this),i.isRow=!1,i.index=t,n[t]=i,this.raiseChangedEvent(3,"coldefs",this,null,i,null,t)}return n[t]}removeColumnDefinition(t){if(t<0&&o._(t,">= 0",jt,"removeColumnDefinition:idx"),this.columnCount===0)return;t=Math.round(t);const n=this.Ge,i=n[t];if(i){n[t]=void 0;let r=n.length-1;for(;r>=0&&n[r--]===void 0;)n.length--;this.raiseChangedEvent(4,"coldefs",this,i,null,t,null),this.c()}}FL(t,n){const i=this.Ge;if(!(t<0)){if(i[t]=n instanceof ui?n:void 0,!n){let r=i.length-1;for(;r>=0&&i[r--]===void 0;)i.length--}this.c()}}addRowColumnDefinition(t){let n=null;return t.isRow?n=this.getRowDefinition(t.index):t.isRow||(n=this.getColumnDefinition(t.index)),n&&n.Ub(t),this}addRowDefinition(t,n){const i=this.getRowDefinition(t);return i&&i.Ub(new ui(n)),this}addColumnDefinition(t,n){const i=this.getColumnDefinition(t);return i&&i.Ub(new ui(n)),this}get rowSizing(){return this.O!==null?this.O.cp:3}set rowSizing(t){const n=this.rowSizing;n!==t&&(this.O===null&&(this.O=new hi),this.O.cp=t,this.c(),this.t("rowSizing",n,t))}get columnSizing(){return this.O!==null?this.O.fp:3}set columnSizing(t){const n=this.columnSizing;n!==t&&(this.O===null&&(this.O=new hi),this.O.fp=t,this.c(),this.t("columnSizing",n,t))}get topIndex(){return this.O!==null?this.O.dp:0}set topIndex(t){const n=this.topIndex;n!==t&&((!isFinite(t)||t<0)&&o.o("Panel.topIndex must be greater than zero and a real number, not: "+t),this.O===null&&(this.O=new hi),this.O.dp=t,this.c(),this.t("topIndex",n,t))}get leftIndex(){return this.O!==null?this.O.gp:0}set leftIndex(t){const n=this.leftIndex;n!==t&&((!isFinite(t)||t<0)&&o.o("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.O===null&&(this.O=new hi),this.O.gp=t,this.c(),this.t("leftIndex",n,t))}findRowForLocalY(t){if(t<0||this.type!==jt.Table||this.rowCount===0)return-1;let n=0;const i=this.Ye,r=i.length;let a=this.topIndex;for(;a<r;a++){const l=i[a];if(l!==void 0&&(n+=l.total,t<n))return a}return a}findColumnForLocalX(t){if(t<0||this.type!==jt.Table||this.columnCount===0)return-1;let n=0;const i=this.Ge,r=i.length;let a=this.leftIndex;for(;a<r;a++){const l=i[a];if(l!==void 0&&(n+=l.total,t<n))return a}return a}graduatedPointForValue(t,n){if(n===void 0&&(n=new T(NaN,NaN)),this.type!==jt.Graduated)return n.e(NaN,NaN),n;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);const i=this.findMainElement();return i.geometry.getPointAlongPath((t-this.graduatedMin)/this.graduatedRange,n),i.D.xt(n)}graduatedValueForPoint(t){if(this.type!==jt.Graduated)return NaN;const n=this.findMainElement();return n.D._e(t),n.geometry.getFractionForPoint(t)*this.graduatedRange+this.graduatedMin}get data(){return this.Qt}set data(t){const n=this.Qt;if(n!==t){const i=this instanceof xe&&!(this instanceof ie);i&&o.i(t,"object",jt,"data"),this.li(),this.Qt=t;const r=this.diagram;if(r!==null)if(i)r.partManager.fv(this,n,t);else{const a=this.panel;a!==null&&a.Ys!==null&&(n!==null&&a.Ys.delete(n),t!==null&&a.Ys.set(t,this))}if(this.t("data",n,t),r!==null&&r.undoManager.isUndoingRedoing)return;t!==null&&this.updateTargetBindings()}}get itemIndex(){return this.dd}set itemIndex(t){const n=this.dd;n!==t&&(this.dd=t,this.t("itemIndex",n,t))}get Ks(){return this.f!==null?this.f.Ks:null}set Ks(t){this.Ai!==t&&(this.f===null&&(this.f=new Me),this.f.Ks=t)}d2(){return this.Ks!==null}aA(){const t=this.Ks;return t!==null&&t.h}li(){let t=this.Ks;if(t===null)this.data!==null&&o.o("Template cannot have .data be non-null: "+this),this.Ks=t=new M;else if(t.h)return this;const n=new M;this.F2(!1),this.walkVisualTreeFrom(this,(a,l)=>{l.lh();const u=l.Ai;if(u!==null){l.a2(!1);const c=u.iterator;for(;c.next();){const f=c.value;f.mode===2&&l.a2(!0);const m=f.sourceName;if(f.isToObject){m==="/"&&a.F2(!0);const p=f.ZL(a,l);p!==null&&(n.add(p),p.Zn===null&&(p.Zn=new M),p.Zn.add(f))}t.add(f)}}if(l instanceof jt&&l.type===jt.Table){if(l.rowCount>0){const c=l.Ye,f=c.length;for(let m=0;m<f;m++){const p=c[m];if(p!==void 0&&p.Gs!==null){const y=p.Gs.iterator;for(;y.next();){const w=y.value;w.ke=p,w.pd=2,w.uf=p.index,t.add(w)}}}}if(l.columnCount>0){const c=l.Ge,f=c.length;for(let m=0;m<f;m++){const p=c[m];if(p!==void 0&&p.Gs!==null){const y=p.Gs.iterator;for(;y.next();){const w=y.value;w.ke=p,w.pd=1,w.uf=p.index,t.add(w)}}}}}});const i=n.iterator;for(;i.next();){const a=i.value;if(a.Zn!==null){a.a2(!0);const l=a.Zn.iterator;for(;l.next();){const u=l.value;a.Ai===null&&(a.Ai=new M),a.Ai.add(u)}}a.Zn=null}let r=t.iterator;for(;r.next();){const a=r.value;let l=a.ke;if(l!==null){a.ke=null;const u=a.targetProperty,c=u.indexOf(".");if(c>0&&l instanceof jt){const f=u.substring(0,c),m=u.substring(c+1),p=l.findObject(f);p!==null?(l=p,a.targetProperty=m):(o.ii('Warning: unable to find GraphObject named "'+f+'" for Binding: '+a.toString()),l=null)}if(l instanceof ui){const f=L.as(l.panel);a.targetId=f===void 0?-1:f,l.panel.$n=a.targetId}else if(l instanceof Re){const f=L.as(l);a.targetId=f===void 0?-1:f,l.$n=a.targetId}else o.o("Unknown type of binding target: "+l);a.check(l)}}return t.g(),this instanceof xe&&this.Pe()&&this.ensureBounds(),this}copyTemplate(t){t===void 0&&(t=!1);const n=this.copy();return n.hv(i=>{i instanceof jt&&(i.Ks=null,i.Qt=null);const r=i.Ai;r!==null&&(i.Ai=null,r.each(l=>i.bind(l.copy())));const a=i.ys;a!==null&&(i.ys=null,a.each(l=>i.trigger(l.value.copy())))}),t&&n.li(),n}updateTargetBindings(t){const n=this.Ks;if(n===null)return;t===void 0&&(t="");const i=n.iterator;for(;i.next();){const r=i.value,a=this.MA(r,t);if(a===null)continue;const{data:l,elt:u}=a;r.isToTheme&&this.diagram===null||u!==void 0&&r.updateTarget(u,l)}}Io(){if(this.diagram!==null)if(this.d2()){const t=this.Ks.iterator;for(;t.next();){const n=t.value;if(!n.isToTheme)continue;const i=this.MA(n);if(i===null)continue;const{data:r,elt:a}=i;a!==void 0&&n.updateTarget(a,r)}}else{const t=this.L.r,n=t.length;for(let i=0;i<n;i++)t[i].Io()}}MA(t,n=""){const i=t.sourceProperty;if(n!==""&&i!==""&&i!==n)return null;const r=t.targetProperty;if(t.converter===null&&r==="")return null;let a=this.data;const l=t.sourceName;if(t.isToObject){if(a=this.$L(l),a===null)return null}else if(t.isToModel){const m=this.diagram;if(m===null)return null;a=m.model.modelData}let u=this;const c=t.targetId;if(c!==-1){if(u=this.p0(c),u===null)return null}else t.ke!==null&&(u=t.ke);l==="/"?a=u.part:l==="."?a=u:l===".."&&(a=u.panel);const f=t.pd;if(f!==0){if(!(u instanceof jt))return null;f===1?u=u.getColumnDefinition(t.uf):f===2&&(u=u.getRowDefinition(t.uf))}return{data:a,elt:u}}get itemArray(){return this.mh}set itemArray(t){const n=this.mh;if(n!==t||t!==null&&this.uv(t)){const i=this.diagram;if(n!==t&&(i!==null&&n!==null&&i.partManager.MM(this,i),this.mh=t,i!==null&&t!==null&&i.partManager.SM(this,i)),this.t("itemArray",n,t),i!==null&&i.undoManager.isUndoingRedoing)return;this.NA(n,t)}}findItemPanelForData(t){return t==null||this.Ys===null?null:(o.i(t,"object",jt,"findItemPanelForData"),this.Ys.get(t))}uv(t){const n=this.L.r,i=n.length,r=t.length;let a=0,l=null;for(;a<i&&(l=n[a],!(l instanceof jt)||l.data===null);)a++,l=n[a];if(i-a!==r)return!0;if(l===null)return r>0;let u=0;for(;a<i&&u<r;){if(l=n[a],!(l instanceof jt)||l.data!==t[u])return!0;a++,u++}return!1}ap(){if(this.type===jt.Spot||this.type===jt.Auto)return Math.min(this.L.length,1);if(this.type===jt.Link){const t=this.L,n=t.length;let i=0;for(;i<n;i++){const r=t.elt(i);if(!(r instanceof Qt)||!r.isPanelMain)return i}return i}if(this.type===jt.Table&&this.L.length>0){const t=this.L.elt(0);if(t.isPanelMain&&t instanceof jt&&t.Qr())return 1}return 0}rebuildItemElements(){const t=this.ap();for(;this.L.length>t;)this.te(this.L.length-1,!1);this.NA(null,this.itemArray)}NA(t,n){const i=this.ap(),r=n;if(r===null||r.length===0){for(;this.L.length>i;)this.te(this.L.length-1,!1);return}if(this.L.length<=i){const a=r.length;for(let l=0;l<a;l++)this.Wb(r[l],l,!0)}else{let a=i;for(let u=0;u<r.length;u++,a++){const c=r[u],f=a<this.L.length?this.L.elt(a):null;if(f instanceof jt){if(f.data!==c){const m=this.R2(f.data,u),p=this.R2(c,u);let y=p!==m;if(!y){const w=this.v2(f.data,u,m);y=this.v2(c,u,p)!==w}y?(this.te(a,!1),this.Wb(c,u,!1)):f.data=c}}else this.Wb(c,u,!1)}for(;a<this.L.length;)this.te(a,!1);this.il=null,this.O2(i,0),this.Oo()||this.c(),this.ns=null,this.isEnabledObject()||this.qb(this,!1);const l=this.part;l!==null&&(l.D0(),l.ff(),this.wn&&l instanceof It&&(l.wn=!0),l.wn&&l instanceof It&&(l.ne=null))}}Wb(t,n,i){if(t==null||n<0)return null;const r=this.R2(t,n),a=this.v2(t,n,r);if(a!==null){a.li();const l=a.copy();if(l.e2()){const c=this.findBindingPanel();c!==null&&c.F2(!0)}typeof t=="object"&&(this.Ys===null&&(this.Ys=new W),this.Ys.set(t,l));const u=n+this.ap();return this.insertAt(u,l),i&&(l.Qt=t,this.O2(u,n),l.Qt=null),l.data=t,l}return null}dv(t){if(t<0)return;const n=t+this.ap();this.te(n,!0),this.O2(n,t)}O2(t,n){const i=this.L;let r=t,a=n;for(;r<i.length;){const l=i.elt(r);l instanceof jt&&l.gv(r,a),r++,a++}}gv(t,n){this.type===jt.TableRow?this.row=t:this.type===jt.TableColumn&&(this.column=t),this.itemIndex=n}av(){return this.mh!==null||this.itemTemplateMap!==null}get itemTemplate(){return this.itemTemplateMap===null?null:this.itemTemplateMap.get("")}set itemTemplate(t){if(this.itemTemplateMap===null){if(t===null)return;this.itemTemplateMap=new W}const n=this.itemTemplateMap.get("");if(n!==t){(t instanceof xe||t.isPanelMain)&&o.o("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.set("",t),this.t("itemTemplate",n,t);const i=this.diagram;if(i!==null&&i.undoManager.isUndoingRedoing)return;this.rebuildItemElements()}}get itemTemplateMap(){return this.f!==null?this.f.H0:null}set itemTemplateMap(t){const n=this.itemTemplateMap;if(n!==t){const i=t.iterator;for(;i.next();)i.value;this.jt(),this.f.H0=t,this.t("itemTemplateMap",n,t);const r=this.diagram;if(r!==null&&r.undoManager.isUndoingRedoing)return;this.rebuildItemElements()}}get itemCategoryProperty(){return this.f!==null?this.f.q0:"category"}set itemCategoryProperty(t){const n=this.itemCategoryProperty;n!==t&&(typeof t!="string"&&typeof t!="function"&&o.we(t,"string or function",jt,"itemCategoryProperty"),this.jt(),this.f.q0=t,this.t("itemCategoryProperty",n,t))}R2(t,n){if(t===null)return"";const i=this.itemCategoryProperty;let r="";if(typeof i=="function")r=i(t);else if(typeof i=="string"&&typeof t=="object"){if(i==="")return"";r=Wt.vt(t,i)}else return"";if(r===void 0)return"";if(typeof r=="string")return r;o.o("Panel.getCategoryForItemData found a non-string category for "+t+": "+r)}v2(t,n,i){const r=this.itemTemplateMap;let a=null;return r!==null&&(a=r.get(i)),a===null&&(r!==null&&(a=r.get("")),a===null&&(jt.CA||(jt.CA=!0,o.ii('No item template Panel found for category "'+i+'" on '+this),o.ii("  Using default item template."),jt.LA=new jt().add(new Je().bind("text","",o.toString).theme("stroke","text"))),a=jt.LA)),a}get cf(){return(this.n&1048576)!==0}set cf(t){const n=(this.n&1048576)!==0;n!==t&&(o.i(t,"boolean",jt,"isAtomic"),this.n=this.n^1048576,this.t("isAtomic",n,t))}get isClipping(){return(this.n&2097152)!==0}set isClipping(t){const n=(this.n&2097152)!==0;n!==t&&(this.nd(),this.n=this.n^2097152,this instanceof Vt&&(this.ni=null),this.c(),this.t("isClipping",n,t))}get isOpposite(){return(this.n&33554432)!==0}set isOpposite(t){const n=(this.n&33554432)!==0;n!==t&&(o.i(t,"boolean",jt,"isOpposite"),this.n=this.n^33554432,this.c(),this.t("isOpposite",n,t))}get isEnabled(){return(this.n&4194304)!==0}set isEnabled(t){const n=(this.n&4194304)!==0;if(n!==t){o.i(t,"boolean",jt,"isEnabled");const i=this.panel===null||this.panel.isEnabledObject();this.n=this.n^4194304,this.t("isEnabled",n,t);const r=this.diagram;if(r!==null&&r.undoManager.isUndoingRedoing)return;i&&this.qb(this,t)}}qb(t,n){const i=t.enabledChanged;if(i!==null&&i(t,n),t instanceof jt){const r=t.L.r,a=r.length;for(let l=0;l<a;l++){const u=r[l];n&&u instanceof jt&&!u.isEnabled||this.qb(u,n)}}}get alignmentFocusName(){return this.so}set alignmentFocusName(t){const n=this.so;n!==t&&(this.so=t,this.c(),this.t("alignmentFocusName",n,t))}static definePanelLayout(t,n){de.definePanelLayout(t,n)}};v(jt,"dE",!1),v(jt,"CA",!1),v(jt,"LA",null),v(jt,"Position",de.Layouts.get("Position")),v(jt,"Horizontal",de.Layouts.get("Horizontal")),v(jt,"Vertical",de.Layouts.get("Vertical")),v(jt,"Spot",de.Layouts.get("Spot")),v(jt,"Auto",de.Layouts.get("Auto")),v(jt,"Table",de.Layouts.get("Table")),v(jt,"Viewbox",de.Layouts.get("Viewbox")),v(jt,"TableRow",de.Layouts.get("TableRow")),v(jt,"TableColumn",de.Layouts.get("TableColumn")),v(jt,"Link",de.Layouts.get("Link")),v(jt,"Grid",de.Layouts.get("Grid")),v(jt,"Graduated",de.Layouts.get("Graduated"));let Kt=jt;Kt.definePanelLayout=Kt.definePanelLayout;class Ks{constructor(){v(this,"op");v(this,"rp");v(this,"lp");v(this,"hp");v(this,"ws");v(this,"je");v(this,"ns");v(this,"Se");this.op=0,this.rp=100,this.lp=10,this.hp=0,this.ws=null,this.je=null,this.ns=null,this.Se=null}copy(){const e=new Ks;return e.op=this.op,e.rp=this.rp,e.lp=this.lp,e.hp=this.hp,e.ws=this.ws,e.je=this.je,e.ns=this.ns,e.Se=this.Se,e}}class Fo{constructor(){v(this,"gd");v(this,"md");v(this,"Yc");v(this,"Z0");this.gd=B.tC,this.md=T.Po,this.Yc=B.gw,this.Z0=[]}copy(){const e=new Fo;return e.gd=this.gd.copy(),e.md=this.md.copy(),e.Yc=this.Yc.copy(),e.Z0=this.Z0,e}}class hi{constructor(){v(this,"Ye");v(this,"Ge");v(this,"cp");v(this,"fp");v(this,"dp");v(this,"gp");v(this,"Q0");v(this,"tp");v(this,"_0");v(this,"ip");v(this,"sp");v(this,"ep");v(this,"np");v(this,"gh");this.Ye=[],this.Ge=[],this.cp=3,this.fp=3,this.dp=0,this.gp=0,this.Q0=tt.Ug,this.tp=1,this._0=null,this.ip=null,this.sp=1,this.ep=null,this.np=null,this.gh=null}copy(e){const t=new hi,n=this.Ye,i=n.length,r=t.Ye;for(let c=0;c<i;c++){if(n[c]===void 0)continue;const f=n[c].copy();f.xa(e),r[c]=f}const a=this.Ge,l=a.length,u=t.Ge;for(let c=0;c<l;c++){if(a[c]===void 0)continue;const f=a[c].copy();f.xa(e),u[c]=f}return t.cp=this.cp,t.fp=this.fp,t.dp=this.dp,t.gp=this.gp,t.Q0=this.Q0.N(),t.tp=this.tp,t._0=this._0,t.ip=this.ip,t.sp=this.sp,t.ep=this.ep,t.np=this.np,t.gh=this.gh,t}}var _c=(A=>(A[A.Default=1]="Default",A[A.None=2]="None",A[A.ProportionalExtra=3]="ProportionalExtra",A))(_c||{});const os=class os{constructor(e){v(this,"Vs");v(this,"mp");v(this,"Dt");v(this,"Sa");v(this,"Ma");v(this,"oi");v(this,"at");v(this,"yd");v(this,"to");v(this,"Go");v(this,"wd");v(this,"xd");v(this,"Na");v(this,"Ct");v(this,"bd");v(this,"Gs");v(this,"st");v(this,"ji");v(this,"ge");L.Gi(this),this.Vs=null,this.mp=!0,this.Dt=0,this.ge=NaN,this.Sa=0,this.Ma=1/0,this.oi=z.Default,this.st=0,this.ji=0,this.at=0,this.Gs=null,this.yd=1,this.to=1,this.Go=null,this.wd=null,this.xd=NaN,this.Na=null,this.Ct=null,this.bd=!1,e&&(Object.assign(this,e),e.column!==void 0?(this.isRow=!1,this.index=e.column):e.row!==void 0&&(this.isRow=!0,this.index=e.row))}copy(){const e=new os;return e.mp=this.mp,e.Dt=this.Dt,e.ge=this.ge,e.Sa=this.Sa,e.Ma=this.Ma,e.oi=this.oi,e.st=this.st,e.ji=this.ji,e.at=this.at,e.to=this.to,e.yd=this.yd,this.Go===null?e.Go=null:e.Go=this.Go.N(),e.wd=this.wd,e.xd=this.xd,e.Na=null,this.Na!==null&&(e.separatorDashArray=this.separatorDashArray.slice()),e.Ct=this.Ct,e.bd=this.bd,e.Gs=this.Gs,e}Ub(e){e.isRow?this.height=e.height:this.width=e.width,this.minimum=e.minimum,this.maximum=e.maximum,this.alignment=e.alignment,this.stretch=e.stretch,this.sizing=e.sizing,this.Go=e.separatorPadding===null?null:e.separatorPadding.N(),this.separatorStroke=e.separatorStroke,this.separatorStrokeWidth=e.separatorStrokeWidth,this.Na=null,e.separatorDashArray&&(this.Na=e.separatorDashArray.slice()),this.background=e.background,this.coversSeparators=e.coversSeparators,this.Gs=e.Gs}ri(e){e in _c?this.sizing=e:o.lr(this,e)}toString(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+L.as(this)}xa(e){this.Vs=e}computeEffectiveSpacingTop(e){let t=0;const n=this.Vs;if(this.index!==e){let r=this.separatorStroke;r===null&&n!==null&&(r=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),r!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(n!==null?t=this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:t=0))}let i=this.Go;if(i===null)if(n!==null)i=n.defaultSeparatorPadding;else return t;return t+(this.isRow?i.top:i.left)}computeEffectiveSpacing(){let e=0;const t=this.Vs;let n=0;const i=this.isRow;if(t!==null&&t.type===Kt.Table){const a=i?t.Ye.length:t.Ge.length;for(let l=0;l<a;l++){const u=i?t.Ye[l]:t.Ge[l];if(u!==void 0&&u.st!==0){n=u.index;break}}}if(this.index!==n){let a=this.separatorStroke;a===null&&t!==null&&(a=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),a!==null&&(e=this.separatorStrokeWidth,isNaN(e)&&(t!==null?e=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth:e=0))}let r=this.Go;if(r===null)if(t!==null)r=t.defaultSeparatorPadding;else return e;return e+(this.isRow?r.top+r.bottom:r.left+r.right)}t(e,t,n,i,r){const a=this.Vs;if(a!==null&&(a.raiseChangedEvent(2,e,this,t,n,i,r),this.Gs!==null)){const l=a.diagram;if(l!==null&&!l.fe){const u=a.findBindingPanel();if(u!==null){const c=u.data;if(c!==null){const f=this.Gs.iterator;for(;f.next();)f.value.updateSource(this,c,e,u)}}}}}get panel(){return this.Vs}get isRow(){return this.mp}set isRow(e){this.mp=e}get index(){return this.Dt}set index(e){this.Dt=e}get height(){return this.ge}set height(e){const t=this.ge;t!==e&&(e<0&&o._(e,">= 0",os,"height"),this.ge=e,this.actual=this.st,this.panel!==null&&this.panel.c(),this.t("height",t,e))}get width(){return this.ge}set width(e){const t=this.ge;t!==e&&(e<0&&o._(e,">= 0",os,"width"),this.ge=e,this.actual=this.st,this.panel!==null&&this.panel.c(),this.t("width",t,e))}get minimum(){return this.Sa}set minimum(e){const t=this.Sa;t!==e&&((e<0||!isFinite(e))&&o._(e,">= 0",os,"minimum"),this.Sa=e,this.actual=this.st,this.panel!==null&&this.panel.c(),this.t("minimum",t,e))}get maximum(){return this.Ma}set maximum(e){const t=this.Ma;t!==e&&(e<0&&o._(e,">= 0",os,"maximum"),this.Ma=e,this.actual=this.st,this.panel!==null&&this.panel.c(),this.t("maximum",t,e))}get alignment(){return this.oi}set alignment(e){const t=this.oi;t.equals(e)||(this.oi=e.N(),this.panel!==null&&this.panel.c(),this.t("alignment",t,e))}get stretch(){return this.to}set stretch(e){const t=this.to;t!==e&&(this.to=e,this.panel!==null&&this.panel.c(),this.t("stretch",t,e))}get separatorPadding(){return this.Go}set separatorPadding(e){typeof e=="number"&&(e=new tt(e));const t=this.Go;(e===null||t===null||!t.equals(e))&&(e!==null&&(e=e.N()),this.Go=e,this.panel!==null&&this.panel.c(),this.t("separatorPadding",t,e))}get separatorStroke(){return this.wd}set separatorStroke(e){const t=this.wd;t!==e&&(e!==null&&ve.rd(e,"RowColumnDefinition.separatorStroke"),e instanceof ve&&e.g(),this.wd=e,this.panel!==null&&this.panel.c(),this.t("separatorStroke",t,e))}get separatorStrokeWidth(){return this.xd}set separatorStrokeWidth(e){const t=this.xd;t!==e&&(this.xd=e,this.panel!==null&&this.panel.c(),this.t("separatorStrokeWidth",t,e))}get separatorDashArray(){return this.Na}set separatorDashArray(e){const t=this.Na;if(t!==e){if(e!==null&&!Array.isArray(e)&&o.we(e,"Array",os,"separatorDashArray:value"),e!==null){const n=e.length;let i=0;for(let r=0;r<n;r++){const a=e[r];(typeof a!="number"||!(a>=0)||!isFinite(a))&&o.o("separatorDashArray value "+a+" at index "+r+" must be a positive number or zero."),i+=a}if(i===0){if(t===null)return;e=null}}this.Na=e,this.panel!==null&&this.panel.C(),this.t("separatorDashArray",t,e)}}get background(){return this.Ct}set background(e){const t=this.Ct;t!==e&&(e!==null&&ve.rd(e,"RowColumnDefinition.background"),e instanceof ve&&e.g(),this.Ct=e,this.panel!==null&&this.panel.C(),this.t("background",t,e))}get coversSeparators(){return this.bd}set coversSeparators(e){const t=this.bd;t!==e&&(o.i(e,"boolean",os,"coversSeparators"),this.bd=e,this.panel!==null&&this.panel.C(),this.t("coversSeparators",t,e))}get sizing(){return this.yd}set sizing(e){const t=this.yd;t!==e&&(this.yd=e,this.panel!==null&&this.panel.c(),this.t("sizing",t,e))}Gb(){if(this.sizing===1){const e=this.Vs;return this.isRow?e.rowSizing:e.columnSizing}return this.sizing}get actual(){return this.st}set actual(e){isNaN(this.ge)?this.st=Math.max(Math.min(this.Ma,e),this.Sa):this.st=Math.max(Math.min(this.Ma,this.ge),this.Sa)}get measured(){return this.ji}set measured(e){this.ji=e}get total(){return this.st+this.computeEffectiveSpacing()}get position(){return this.at}set position(e){this.at=e}bind(e,t,n,i){return this.nf(e,t,n,i),this}bindTwoWay(e,t,n,i){const r=this.nf(e,t,n,i);return i===void 0&&r.makeTwoWay(),this}theme(e,t,n,i,r){return this.uh(e,t,n,i,r),this}themeData(e,t,n,i,r){return this.uh(e,t,n,i,r).ofData(),this}themeObject(e,t,n,i,r,a){return this.uh(e,t,n,i,r).ofObject(a),this}themeModel(e,t,n,i,r){return this.uh(e,t,n,i,r).ofModel(),this}nf(e,t,n,i){let r=null;return typeof e=="string"?r=new rr(e,t,n,i):r=e,this.G0(r),r}uh(e,t,n,i,r){let a=null;return typeof e=="string"?a=new Bo(e,t,n,i,r):a=e,this.G0(a),a}G0(e){e.ke=this;const t=this.panel;if(t!==null){const n=t.findBindingPanel();n!==null&&n.aA()&&o.o("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+e+" on "+t)}this.Gs===null&&(this.Gs=new M),this.Gs.add(e)}};v(os,"Default",1),v(os,"None",2),v(os,"ProportionalExtra",3);let ui=os;const Ie=class Ie extends Re{constructor(t,n){super();v(this,"ct");v(this,"xs");v(this,"kd");v(this,"Ca");v(this,"Hi");v(this,"jo");v(this,"Xo");v(this,"Lt");v(this,"Pd");v(this,"Sd");v(this,"J");this.ct=null,this.xs=null,this.kd="None",this.Ca="black",this.Hi="black",this.jo=1,this.Xo=null,this.Lt=null,this.Pd=NaN,this.Sd=NaN,this.J=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),n&&Object.assign(this,n)}cloneProtected(t){super.cloneProtected(t),t.ct=this.ct,t.xs=this.xs,t.kd=this.kd,t.Ca=this.Ca,t.Hi=this.Hi,t.jo=this.jo,this.Xo!==null&&(t.Xo=this.Xo.slice()),this.Lt!==null&&(this.Lt.gi?t.Lt=this.Lt:t.Lt=this.Lt.copy()),t.Pd=this.Pd,t.Sd=this.Sd,this.J!==null&&(t.J=this.J.copy())}La(){this.Lt===null?this.Lt=new td:this.Lt.gi&&(this.Lt=this.Lt.copy())}lh(){super.lh(),this.Lt!==null&&(this.Lt.gi=!0)}ri(t){t in lt?this.geometryStretch=t:super.ri(t)}toString(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+L.as(this)}mv(t,n){const i=this.pathPattern;i.ut(1/0,1/0);const r=i.measuredBounds;i.zt(0,0,r.width,r.height);const a=this.geometry;t.save(),t.beginPath();const l=o.nt();if(a.type===1)l.push(a.startX),l.push(a.startY),l.push(a.endX),l.push(a.endY),this.Md(t,n,l,i);else if(a.type===4){const u=a.figures.iterator;for(;u.next();){const c=u.value;l.length=0,l.push(c.startX),l.push(c.startY);let f=c.startX,m=c.startY,p=f,y=m;const w=c.segments.r,b=w.length;for(let C=0;C<b;C++){const k=w[C];switch(k.type){case 1:this.Md(t,n,l,i),l.length=0,l.push(k.endX),l.push(k.endY),f=k.endX,m=k.endY,p=f,y=m;break;case 2:l.push(k.endX),l.push(k.endY),f=k.endX,m=k.endY;break;case 3:R.Un(f,m,k.point1X,k.point1Y,k.point2X,k.point2Y,k.endX,k.endY,.5,l),f=k.endX,m=k.endY;break;case 4:R.Vg(f,m,k.point1X,k.point1Y,k.endX,k.endY,.5,l),f=k.endX,m=k.endY;break;case 5:{const N=k.Mo(c),F=N.length;if(F===0){l.push(k.centerX),l.push(k.centerY),f=k.centerX,m=k.centerY;break}for(let D=0;D<F;D++){const E=N[D];R.Un(f,m,E[2],E[3],E[4],E[5],E[6],E[7],.5,l),f=E[6],m=E[7]}break}case 6:{const N=k.Eh(c,f,m),F=N.length;if(F===0){l.push(k.endX),l.push(k.endY),f=k.endX,m=k.endY;break}for(let D=0;D<F;D++){const E=N[D];R.Un(f,m,E[2],E[3],E[4],E[5],E[6],E[7],.5,l),f=E[6],m=E[7]}break}default:o.o("Segment not of valid type: "+k.type)}k.isClosed&&(l.push(p),l.push(y),this.Md(t,n,l,i))}this.Md(t,n,l,i)}}else if(a.type===2)l.push(a.startX),l.push(a.startY),l.push(a.endX),l.push(a.startY),l.push(a.endX),l.push(a.endY),l.push(a.startX),l.push(a.endY),l.push(a.startX),l.push(a.startY),this.Md(t,n,l,i);else if(a.type===3){const u=new dt;u.startX=a.endX,u.startY=(a.startY+a.endY)/2;const c=new ct(5);c.startAngle=0,c.sweepAngle=360,c.centerX=(a.startX+a.endX)/2,c.centerY=(a.startY+a.endY)/2,c.radiusX=Math.abs(a.startX-a.endX)/2,c.radiusY=Math.abs(a.startY-a.endY)/2,u.add(c);const f=c.Mo(u),m=f.length;if(m===0)l.push(c.centerX),l.push(c.centerY);else{let p=u.startX,y=u.startY;for(let w=0;w<m;w++){const b=f[w];R.Un(p,y,b[2],b[3],b[4],b[5],b[6],b[7],.5,l),p=b[6],y=b[7]}}this.Md(t,n,l,i)}o.tt(l),t.restore(),t.clearContextCache(!1)}pv(t){let n=t.measuredBounds.width;return t instanceof Ie&&(n-=t.strokeWidth),n<1&&(n=1),n}Md(t,n,i,r){const a=i.length;if(a<4)return;const l=r.measuredBounds,u=Math.max(1,l.width),c=l.height;let f=i[0],m=i[1],p=0,y=0,w=0,b=0,C=0,k=0,N=0,F=0;const D=o.nt();for(let Q=2;Q<a;Q+=2)p=i[Q],y=i[Q+1],w=p-f,b=y-m,w===0&&(w=.001),C=b/w,k=Math.atan2(b,w),N=Math.sqrt(w*w+b*b),D.push([w,k,C,N]),F+=N,f=p,m=y;f=i[0],m=i[1];const E=this.pv(r);let U=E;const $=u/2;let K=$!==0,_=0,G=D[_];w=G[0],k=G[1],C=G[2],N=G[3];let X=0;for(;F>=.1;){if(X===0&&(K?(U=E,U-=$,F-=$,K=!1):U=E,U===0&&(U=1)),U>F){U=F,o.tt(D);return}U>N?(X=U-N,U=N):X=0;let Q=Math.sqrt(U*U/(1+C*C));if(w<0&&(Q=-Q),f+=Q,m+=C*Q,t.translate(f,m),t.rotate(k),t.translate(-(u/2),-(c/2)),X===0&&r.fh(t,n),t.translate(u/2,c/2),t.rotate(-k),t.translate(-f,-m),F-=U,N-=U,X!==0){if(_++,_===D.length){o.tt(D);return}G=D[_],w=G[0],k=G[1],C=G[2],N=G[3],U=X}}o.tt(D)}fh(t,n){const i=t instanceof Pe;let r=this.Hi;const a=this.Ca;if(r===null&&a===null)return;const l=this.ct;if(l===null)return;t.commitTransform();const u=this.actualBounds,c=this.naturalBounds;a!==null&&this.dn(t,a,!0,!1,c,u);const f=this.part;let m=this.jo;r!==null&&m===0&&f!==null&&(this.isPanelMain||f.findMainElement()===this)&&(m=f.yv()),m===0&&(r=null),r!==null&&m!==0&&(this.dn(t,r,!1,!1,c,u),t.lineWidth=m,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit);let p=!1;f&&n.getRenderingHint("drawShadows")&&(p=f.isShadowed),t._r===!1&&(p=!1);let y=!0;r!==null&&(a===null||a==="transparent")&&(y=!1);let w=!1;const b=this.strokeDashArray;if(b!==null&&(w=!0,t.enableDash(b,this.strokeDashOffset)),l.type===1)t.beginPath(),t.moveTo(l.startX,l.startY),t.lineTo(l.endX,l.endY),r!==null&&t.strokeContext(),t.endPath();else if(l.type===2){const C=l.startX,k=l.startY,N=l.endX,F=l.endY,D=Math.min(C,N),E=Math.min(k,F),U=Math.abs(N-C),$=Math.abs(F-k);t.beginPath(),t.rect(D,E,U,$),a!==null&&t.fillContext(a,!1,null),r!==null&&(y&&p&&t.shadowsOff(),t.strokeContext(),y&&p&&t.shadowsOn()),t.endPath()}else if(l.type===3){const C=l.startX,k=l.startY,N=l.endX,F=l.endY,D=Math.abs(N-C)/2,E=Math.abs(F-k)/2,U=Math.min(C,N)+D,$=Math.min(k,F)+E;t.beginPath(),t.moveTo(U,$-E),t.bezierCurveTo(U+R.Bn*D,$-E,U+D,$-R.Bn*E,U+D,$),t.bezierCurveTo(U+D,$+R.Bn*E,U+R.Bn*D,$+E,U,$+E),t.bezierCurveTo(U-R.Bn*D,$+E,U-D,$+R.Bn*E,U-D,$),t.bezierCurveTo(U-D,$-R.Bn*E,U-R.Bn*D,$-E,U,$-E),t.closePath(),a!==null&&t.fillContext(a,!1,null),r!==null&&(y&&p&&t.shadowsOff(),t.strokeContext(),y&&p&&t.shadowsOn()),t.endPath()}else if(l.type===4){const C=l.figures,k=C.length;for(let N=0;N<k;N++){const F=C.r[N];i?this.buildPath(t,F):F.Be===null&&(F.Be=new Path2D,this.buildPath(F.Be,F));const D=F.isFilled;p?F.isShadowed?(D===!0&&a!=="transparent"&&a!==null&&t.fillContext(a,F.isEvenOdd,F.Be),r!==null&&(D&&y&&t.shadowsOff(),t.stroke(F.Be),D&&y&&t.shadowsOn())):(t.shadowsOff(),D&&a!=="transparent"&&a!==null&&t.fillContext(a,F.isEvenOdd,F.Be),r!==null&&t.stroke(F.Be),t.shadowsOn()):(D&&a!==null&&t.fillContext(a,F.isEvenOdd,F.Be),r!==null&&t.stroke(F.Be)),t.endPath(N)}}w&&t.disableDash(),this.pathPattern!==null&&this.mv(t,n)}buildPath(t,n){t instanceof Path2D||t.beginPath(),t.moveTo(n.startX,n.startY);const i=n.segments.r,r=i.length;let a=null;for(let l=0;l<r;l++){const u=i[l];switch(u.type){case 1:t.moveTo(u.endX,u.endY);break;case 2:t.lineTo(u.endX,u.endY);break;case 3:t.bezierCurveTo(u.point1X,u.point1Y,u.point2X,u.point2Y,u.endX,u.endY);break;case 4:t.quadraticCurveTo(u.point1X,u.point1Y,u.endX,u.endY);break;case 5:if(u.radiusX===u.radiusY){const c=a!==null?a.endX:n.startX,f=a!==null?a.endY:n.startY,m=Math.PI/180;t.arc(u.point1X,u.point1Y,u.radiusX,u.startAngle*m,(u.startAngle+u.sweepAngle)*m,u.sweepAngle<0,c,f)}else{const c=u.Mo(n),f=c.length;if(f===0){t.lineTo(u.centerX,u.centerY);break}for(let m=0;m<f;m++){const p=c[m];m===0&&t.lineTo(p[0],p[1]),t.bezierCurveTo(p[2],p[3],p[4],p[5],p[6],p[7])}}break;case 6:{let c=0,f=0,m;if(a!==null&&a.type===5){m=a.Mo(n);const y=m.length;if(y===0){t.lineTo(u.endX,u.endY);break}const w=m[y-1]||null;w!==null&&(c=w[6],f=w[7])}else c=a!==null?a.endX:n.startX,f=a!==null?a.endY:n.startY;m=u.Eh(n,c,f);const p=m.length;if(p===0){t.lineTo(u.endX,u.endY);break}for(let y=0;y<p;y++){const w=m[y];t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7])}break}}u.isClosed&&t.closePath(),a=u}}_c(t,n,i){if(!super._c(t,n,i)||this.Hi===null&&this.Ca===null||this.ct===null||this.pathPattern!==null)return!1;const r=this.svg.getElementsByTagName("path");return this.geometry.figures.length!==r.length?!1:(t.currentPath=this.svg,this.fh(t,n),t.currentPath=null,!0)}sd(t){return this.geometry!==null&&this.geometry.figures.length>1||this.pathPattern!==null?!0:super.sd(t)}l2(t,n){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",n);else{const i=t.getElementsByTagName("path");for(let r=0;r<i.length;r++)i[r].setAttributeNS(null,"filter",n)}}getDocumentPoint(t,n){if(n===void 0&&(n=new T),t instanceof z){const i=t;i.isNoSpot()&&o.o("getDocumentPoint Spot must be a real, specific Spot, not: "+i.toString());const r=this.naturalBounds,a=this.strokeWidth;return n.e(i.x*(r.width+a)-a/2+r.x+i.offsetX,i.y*(r.height+a)-a/2+r.y+i.offsetY),this.Es.xt(n),n}else return n.set(t),this.Es.xt(n),n}getDocumentBounds(t){t===void 0&&(t=new I);const n=this.naturalBounds,i=this.Es,r=I.X(n.x,n.y,n.width,n.height),a=this.strokeWidth;r.inflate(a/2,a/2);const l=T.X(r.x,r.y).D(i);return t.e(l.x,l.y,0,0),l.e(r.right,r.y).D(i),t.unionNoCheck(l.x,l.y,0,0),l.e(r.right,r.bottom).D(i),t.unionNoCheck(l.x,l.y,0,0),l.e(r.x,r.bottom).D(i),t.unionNoCheck(l.x,l.y,0,0),I.s(r),T.s(l),t}hh(t,n){const i=this.geometry;if(i===null||this.fill===null&&this.stroke===null)return!1;const r=i.bounds;let a=this.strokeWidth/2;i.type===1&&!n&&(a+=2);const l=I.l();if(l.a(r),l.inflate(a+2,a+2),!l.containsPoint(t))return I.s(l),!1;const u=a+1e-4;if(i.type===1){if(this.stroke===null)return!1;const c=(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY),f=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY);return c<0||f<0?!1:(I.s(l),R.vi(i.startX,i.startY,i.endX,i.endY,a,t.x,t.y))}else if(i.type===2){const c=i.startX,f=i.startY,m=i.endX,p=i.endY;if(l.x=Math.min(c,m),l.y=Math.min(f,p),l.width=Math.abs(m-c),l.height=Math.abs(p-f),this.fill===null){if(l.inflate(-u,-u),l.containsPoint(t))return I.s(l),!1;l.inflate(u,u)}this.stroke!==null&&l.inflate(a,a);const y=l.containsPoint(t);return I.s(l),y}else if(i.type===3){const c=i.startX,f=i.startY,m=i.endX,p=i.endY;let y=Math.min(c,m),w=Math.min(f,p);const b=Math.abs(m-c),C=Math.abs(p-f);let k=b/2,N=C/2;if(y=t.x-(y+k),w=t.y-(w+N),this.fill===null){if(k-=u,N-=u,k<=0||N<=0||y*y/(k*k)+w*w/(N*N)<=1)return I.s(l),!1;k+=u,N+=u}return this.stroke!==null&&(k+=u,N+=u),I.s(l),k<=0||N<=0?!1:y*y/(k*k)+w*w/(N*N)<=1}else{if(i.type===4)return I.s(l),this.fill===null?i.xC(t.x,t.y,a):i.Vk(t,a,this.strokeWidth>1,n);o.o("Unknown Geometry type: "+i.type)}}td(t,n,i,r){const a=this.desiredSize,l=this.jo;t=Math.max(t,0),n=Math.max(n,0);let u;if(this.xs!==null)u=this.geometry.bounds;else{const C=this.figure;let k=Ie.I2[C];if(k===void 0){let N=R.So[C];typeof N=="string"&&(N=R.So[N]),typeof N=="function"?(k=N(null,100,100),Ie.I2[C]=k):o.o("Unsupported Figure: "+C)}u=k.bounds}let c=u.width,f=u.height,m=u.width,p=u.height;switch(this.zs(!0)){case 0:i=0,r=0;break;case 2:m=Math.max(t-l,0),p=Math.max(n-l,0);break;case 5:m=Math.max(t-l,0),r=0;break;case 4:i=0,p=Math.max(n-l,0);break}isFinite(a.width)&&(m=a.width),isFinite(a.height)&&(p=a.height);const y=this.maxSize,w=this.minSize;i=Math.max(i-l,w.width),r=Math.max(r-l,w.height),m=Math.min(y.width,m),p=Math.min(y.height,p),m=isFinite(m)?Math.max(i,m):Math.max(c,i),p=isFinite(p)?Math.max(r,p):Math.max(f,r);const b=this._P();switch(b){case 0:break;case 2:c=m,f=p;break;case 6:{let C=Math.min(m/c,p/f);isFinite(C)||(C=1),c=c*C,f=f*C;break}default:o.o(b+" is not a valid geometryStretch.")}if(this.xs!==null){c===0&&(c=.001),f===0&&(f=.001);const C=(this.xs!==null?this.xs:this.ct).KD(c,f);this.ct=C}else(this.ct===null||!R.K(this.ct.sc,t-l)||!R.K(this.ct.nc,n-l))&&(this.ct=Ie.wv(this,c,f));u=this.ct.bounds,t===1/0||n===1/0?this.Qn(u.x-l/2,u.y-l/2,t===0&&c===0?0:u.width+l,n===0&&f===0?0:u.height+l):this.Qn(-(l/2),-(l/2),m+l,p+l),a.isReal()?(m=a.width,p=a.height,m=Math.min(y.width,m),p=Math.min(y.height,p),m=Math.max(w.width,m),p=Math.max(w.height,p),this.zi.e(0,0,m,p)):this.zi.a(u)}_P(){const t=this.geometryStretch;return this.xs!==null?t===1?2:t:t===1?Ie.I2[this.figure].defaultStretch:t}ah(t,n,i,r){this.commonArrange(t,n,i,r)}getNearestIntersectionPoint(t,n,i){return this.Zc(t.x,t.y,n.x,n.y,i)}Zc(t,n,i,r,a){const l=this.D,u=1/(l.m11*l.m22-l.m12*l.m21),c=l.m22*u,f=-l.m12*u,m=-l.m21*u,p=l.m11*u,y=u*(l.m21*l.dy-l.m22*l.dx),w=u*(l.m12*l.dx-l.m11*l.dy),b=t*c+n*m+y,C=t*f+n*p+w,k=i*c+r*m+y,N=i*f+r*p+w,F=this.jo/2;let D=this.ct;D===null&&(this.ut(1/0,1/0),D=this.ct);const E=D.bounds;let U=!1;if(D.type===1)if(this.strokeWidth<=1.5)U=R.Vn(D.startX,D.startY,D.endX,D.endY,b,C,k,N,a);else{let $=0,K=0;if(D.startX===D.endX)$=F,K=0;else{const Z=(D.endY-D.startY)/(D.endX-D.startX);K=F/Math.sqrt(1+Z*Z),$=K*Z}const _=o.nt();let G=new T;R.Vn(D.startX+$,D.startY+K,D.endX+$,D.endY+K,b,C,k,N,G)&&_.push(G),G=new T,R.Vn(D.startX-$,D.startY-K,D.endX-$,D.endY-K,b,C,k,N,G)&&_.push(G),G=new T,R.Vn(D.startX+$,D.startY+K,D.startX-$,D.startY-K,b,C,k,N,G)&&_.push(G),G=new T,R.Vn(D.endX+$,D.endY+K,D.endX-$,D.endY-K,b,C,k,N,G)&&_.push(G);const X=_.length;if(X===0)return o.tt(_),!1;U=!0;let Q=1/0;for(let Z=0;Z<X;Z++){const et=_[Z],st=(et.x-b)*(et.x-b)+(et.y-C)*(et.y-C);st<Q&&(Q=st,a.x=et.x,a.y=et.y)}o.tt(_)}else if(D.type===2)U=R.ml(E.x-F,E.y-F,E.x+E.width+F,E.y+E.height+F,b,C,k,N,a);else if(D.type===3){const $=I.X(E.x,E.y,E.width,E.height).inflate(F,F);U=this.xv($,b,C,k,N,a),I.s($)}else if(D.type===4){let $=0,K=0,_=0,G=0;const X=T.l();let Q=k-b,Z=N-C,et=Q*Q+Z*Z,st=b,ut=C;if(et>0&&E.contains(st,ut)&&(X.x=st,X.y=ut,this.containsPoint(X)))for(Q!==0&&Math.abs(Q)<.5?(Z*=.5/Q,Q=.5):Z!==0&&Math.abs(Z)<.5&&(Q*=.5/Z,Z=.5),st-=Q,ut-=Z;E.contains(st,ut);)st-=Q,ut-=Z;const mt=.6;a.x=k,a.y=N;for(let qt=0;qt<D.figures.count;qt++){const Tt=D.figures.r[qt],Ft=Tt.isFilled?st:b,Ot=Tt.isFilled?ut:C,Rt=Tt.segments;$=Tt.startX,K=Tt.startY;let ne=$,te=K;for(let At=0;At<Rt.count;At++){const Xt=Rt.r[At],Be=Xt.type;_=Xt.endX,G=Xt.endY;let re=!1;switch(Be){case 1:ne=_,te=G;break;case 2:re=this.Jb($,K,_,G,Ft,Ot,k,N,X);break;case 3:{re=R.zg($,K,Xt.point1X,Xt.point1Y,Xt.point2X,Xt.point2Y,_,G,Ft,Ot,k,N,mt,X);break}case 4:{re=R.zg($,K,$+2/3*(Xt.point1X-$),K+2/3*(Xt.point1Y-K),_+2/3*(Xt.point1X-_),G+2/3*(Xt.point1Y-G),_,G,Ft,Ot,k,N,mt,X);break}case 5:case 6:{const Dt=Xt.type===5?Xt.Mo(Tt):Xt.Eh(Tt,$,K),kt=Dt.length;if(kt===0){re=this.Jb($,K,Xt.type===5?Xt.centerX:Xt.endX,Xt.type===5?Xt.centerY:Xt.endY,Ft,Ot,k,N,X);break}let Yt=null;for(let ue=0;ue<kt;ue++){if(Yt=Dt[ue],ue===0&&this.Jb($,K,Yt[0],Yt[1],Ft,Ot,k,N,X)){const We=this.$b(Ft,Ot,X,et,a);We<et&&(et=We,U=!0)}if(R.zg(Yt[0],Yt[1],Yt[2],Yt[3],Yt[4],Yt[5],Yt[6],Yt[7],Ft,Ot,k,N,mt,X)){const We=this.$b(Ft,Ot,X,et,a);We<et&&(et=We,U=!0)}}_=Yt[6],G=Yt[7];break}default:o.o("Unknown Segment type: "+Be)}if($=_,K=G,re){const Dt=this.$b(Ft,Ot,X,et,a);Dt<et&&(et=Dt,U=!0)}if(Xt.isClosed&&(_=ne,G=te,this.Jb($,K,_,G,Ft,Ot,k,N,X))){const Dt=this.$b(Ft,Ot,X,et,a);Dt<et&&(et=Dt,U=!0)}}}let at=i-t,vt=r-n;const Nt=Math.sqrt(at*at+vt*vt);Nt!==0&&(at/=Nt,vt/=Nt),a.x-=at*F,a.y-=vt*F,T.s(X)}else o.o("Unknown Geometry type: "+D.type);return U?(this.D.xt(a),!0):!1}$b(t,n,i,r,a){const l=i.x-t,u=i.y-n,c=l*l+u*u;return c<r?(a.x=i.x,a.y=i.y,c):r}Jb(t,n,i,r,a,l,u,c,f){if(R.K(t,i)&&R.K(n,r)||R.K(a,u)&&R.K(l,c))return!1;let m=!1;const p=(a-u)*(n-r)-(l-c)*(t-i);if(p===0)return!1;if(f.x=((a*c-l*u)*(t-i)-(a-u)*(t*r-n*i))/p,f.y=((a*c-l*u)*(n-r)-(l-c)*(t*r-n*i))/p,(t>i?t-i:i-t)<(n>r?n-r:r-n)){const y=n<r?n:r,w=n<r?r:n;(f.y>y||R.K(f.y,y))&&(f.y<w||R.K(f.y,w))&&(m=!0)}else{const y=t<i?t:i,w=t<i?i:t;(f.x>y||R.K(f.x,y))&&(f.x<w||R.K(f.x,w))&&(m=!0)}return m}bv(t,n,i){return this.pickable===!1?!1:(i.ic(this.D),n?this.kv(t,i):this.containedInRect(t,i))}containedInRect(t,n){if(n===void 0)return t.containsRect(this.actualBounds);let i=this.ct;i===null&&(this.ut(1/0,1/0),i=this.ct);const r=i.bounds,a=this.strokeWidth/2;let l=!1;const u=T.l();return u.e(r.x-a,r.y-a),t.containsPoint(n.xt(u))&&(u.e(r.x-a,r.bottom+a),t.containsPoint(n.xt(u))&&(u.e(r.right+a,r.bottom+a),t.containsPoint(n.xt(u))&&(u.e(r.right+a,r.y-a),t.containsPoint(n.xt(u))&&(l=!0)))),T.s(u),l}intersectsRect(t,n){if(this.containedInRect(t,n)||n===void 0&&(n=this.D,t.containsRect(this.actualBounds)))return!0;const i=nt.l();i.set(n),i.yw();const r=t.left,a=t.right,l=t.top,u=t.bottom,c=T.l();if(c.e(r,l),i.xt(c),this.hh(c,!0)||(c.e(a,l),i.xt(c),this.hh(c,!0))||(c.e(r,u),i.xt(c),this.hh(c,!0))||(c.e(a,u),i.xt(c),this.hh(c,!0)))return T.s(c),!0;const f=T.l(),m=T.l();i.set(n),i.hC(this.D),i.yw(),f.x=a,f.y=l,f.D(i),c.x=r,c.y=l,c.D(i);let p=!1;return this.Aa(c,f,m)?p=!0:(c.x=a,c.y=u,c.D(i),this.Aa(c,f,m)?p=!0:(f.x=r,f.y=u,f.D(i),this.Aa(c,f,m)?p=!0:(c.x=r,c.y=l,c.D(i),this.Aa(c,f,m)&&(p=!0)))),T.s(c),nt.s(i),T.s(f),T.s(m),p}Aa(t,n,i){if(!this.getNearestIntersectionPoint(t,n,i))return!1;const r=t.x,a=t.y,l=n.x,u=n.y,c=i.x,f=i.y;if(r===l){let m=0,p=0;return a<u?(m=a,p=u):(m=u,p=a),f>=m&&f<=p}else{let m=0,p=0;return r<l?(m=r,p=l):(m=l,p=r),c>=m&&c<=p}}kv(t,n){if(this.containedInRect(t,n)||n===void 0&&(n=this.D,t.containsRect(this.actualBounds)))return!0;const i=t.left,r=t.right,a=t.top,l=t.bottom,u=T.l(),c=T.l(),f=T.l(),m=nt.l();m.set(n),m.hC(this.D),m.yw(),c.x=r,c.y=a,c.D(m),u.x=i,u.y=a,u.D(m);let p=!1;return this.Aa(u,c,f)?p=!0:(u.x=r,u.y=l,u.D(m),this.Aa(u,c,f)?p=!0:(c.x=i,c.y=l,c.D(m),this.Aa(u,c,f)?p=!0:(u.x=i,u.y=a,u.D(m),this.Aa(u,c,f)&&(p=!0)))),nt.s(m),T.s(u),T.s(c),T.s(f),p}_L(t,n,i){if(i&&this.fill!==null&&this.hh(t,!0))return!0;let r=t.distanceSquaredPoint(n);const a=r;this.strokeWidth>1.5&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r);let l=this.ct;if(l===null&&(this.ut(1/0,1/0),l=this.ct,l===null))return!1;if(!i){const y=l.bounds,w=y.x,b=y.y,C=y.x+y.width,k=y.y+y.height;if(T.distanceSquared(t.x,t.y,w,b)<=r&&T.distanceSquared(t.x,t.y,C,b)<=r&&T.distanceSquared(t.x,t.y,w,k)<=r&&T.distanceSquared(t.x,t.y,C,k)<=r)return!0}function u(y,w){const b=y.length;for(let C=0;C<b;C+=2)if(w.distanceSquared(y[C],y[C+1])>r)return!0;return!1}const c=l.startX,f=l.startY,m=l.endX,p=l.endY;if(l.type===1){const y=T.distanceLineSegmentSquared(t.x,t.y,c,f,m,p),w=(m-c)*(t.x-c)+(p-f)*(t.y-f),b=(c-m)*(t.x-m)+(f-p)*(t.y-p),C=w>=0&&b>=0?r:a;return y<=C}else if(l.type===2){let y=!1;return i&&(y=T.distanceLineSegmentSquared(t.x,t.y,c,f,c,p)<=r||T.distanceLineSegmentSquared(t.x,t.y,c,f,m,f)<=r||T.distanceLineSegmentSquared(t.x,t.y,m,f,m,p)<=r||T.distanceLineSegmentSquared(t.x,t.y,c,p,m,p)<=r),y}else if(l.type===3){const y=(c+m)/2,w=(f+p)/2,b=t.x-y,C=t.y-w,k=Math.abs(m-c)/2,N=Math.abs(p-f)/2;if(k===0||N===0)return T.distanceLineSegmentSquared(t.x,t.y,c,f,m,p)<=r;if(i){const F=R.vD(k,N,b,C);return F*F<=r}else return!(T.distanceSquared(b,C,-k,0)>=r||T.distanceSquared(b,C,0,-N)>=r||T.distanceSquared(b,C,0,N)>=r||T.distanceSquared(b,C,k,0)>=r)}else if(l.type===4){const y=l.bounds,w=y.x,b=y.y,C=y.x+y.width,k=y.y+y.height;if(t.x>C&&t.x<w&&t.y>k&&t.y<b&&T.distanceLineSegmentSquared(t.x,t.y,w,b,w,k)>r&&T.distanceLineSegmentSquared(t.x,t.y,w,b,C,b)>r&&T.distanceLineSegmentSquared(t.x,t.y,C,k,w,k)>r&&T.distanceLineSegmentSquared(t.x,t.y,C,k,C,b)>r)return!1;const N=Math.sqrt(r);if(i){if(this.fill===null?l.xC(t.x,t.y,N):l.Vk(t,N,!0,!1))return!0}else{const F=l.figures;for(let D=0;D<F.count;D++){const E=F.r[D];let U=E.startX,$=E.startY;if(t.distanceSquared(U,$)>r)return!1;const K=E.segments.r,_=K.length;for(let G=0;G<_;G++){const X=K[G];switch(X.type){case 1:case 2:if(U=X.endX,$=X.endY,t.distanceSquared(U,$)>r)return!1;break;case 3:{const Q=o.nt();R.Un(U,$,X.point1X,X.point1Y,X.point2X,X.point2Y,X.endX,X.endY,.8,Q);const Z=u(Q,t);if(o.tt(Q),Z||(U=X.endX,$=X.endY,t.distanceSquared(U,$)>r))return!1;break}case 4:{const Q=o.nt();R.Vg(U,$,X.point1X,X.point1Y,X.endX,X.endY,.8,Q);const Z=u(Q,t);if(o.tt(Q),Z||(U=X.endX,$=X.endY,t.distanceSquared(U,$)>r))return!1;break}case 5:case 6:{const Q=X.type===5?X.Mo(E):X.Eh(E,U,$),Z=Q.length;if(Z===0){if(U=X.type===5?X.centerX:X.endX,$=X.type===5?X.centerY:X.endY,t.distanceSquared(U,$)>r)return!1;break}let et=null;const st=o.nt();for(let ut=0;ut<Z;ut++)if(et=Q[ut],st.length=0,R.Un(et[0],et[1],et[2],et[3],et[4],et[5],et[6],et[7],.8,st),u(st,t))return o.tt(st),!1;o.tt(st),et!==null&&(U=et[6],$=et[7]);break}default:o.o("Unknown Segment type: "+X.type)}}}return!0}}return!1}xv(t,n,i,r,a,l){if(t.width===0)return R.Vn(t.x,t.y,t.x,t.y+t.height,n,i,r,a,l);if(t.height===0)return R.Vn(t.x,t.y,t.x+t.width,t.y,n,i,r,a,l);{const u=t.width/2,c=t.height/2,f=t.x+u,m=t.y+c;let p=9999;if(n!==r&&(p=(i-a)/(n-r)),Math.abs(p)<9999){const y=i-m-p*(n-f);if(u*u*(p*p)+c*c-y*y<0)return l.x=NaN,l.y=NaN,!1;const w=Math.sqrt(u*u*(p*p)+c*c-y*y),b=(-(u*u*p*y)+u*c*w)/(c*c+u*u*(p*p))+f,C=(-(u*u*p*y)-u*c*w)/(c*c+u*u*(p*p))+f,k=p*(b-f)+y+m,N=p*(C-f)+y+m,F=Math.abs((n-b)*(n-b))+Math.abs((i-k)*(i-k)),D=Math.abs((n-C)*(n-C))+Math.abs((i-N)*(i-N));F<D?(l.x=b,l.y=k):(l.x=C,l.y=N)}else{const y=c*c,w=u*u,b=n-f,C=y-y/w*(b*b);if(C<0)return l.x=NaN,l.y=NaN,!1;const k=Math.sqrt(C),N=m+k,F=m-k,D=Math.abs(N-i),E=Math.abs(F-i);D<E?(l.x=n,l.y=N):(l.x=n,l.y=F)}return!0}}cv(){return this.jo/2*this.strokeMiterLimit*this.getDocumentScale()}get geometry(){return this.ct!==null?this.ct:this.xs}set geometry(t){const n=this.ct,i=this.xs;if(n===t)return;t!==null?(this.ct=t.g(),this.xs=this.ct):(this.ct=null,this.xs=null);const r=this.part;if(r!==null&&r.ff(),this.c(),this.t("geometry",n||i,t),this.$c()){const a=this.part;a!==null&&this.ya(a,"geometryString")}}get geometryString(){return this.geometry===null?"":this.geometry.toString()}set geometryString(t){const n=rt.parse(t),i=n.normalize();this.geometry=n;const r=T.X(-i.x,-i.y);this.position=r,T.s(r)}get isGeometryPositioned(){return(this.n&1048576)!==0}set isGeometryPositioned(t){const n=(this.n&1048576)!==0;n!==t&&(this.n=this.n^1048576,this.c(),this.t("isGeometryPositioned",n,t))}ee(){this.ct=null}get fill(){return this.Ca}set fill(t){const n=this.Ca;n!==t&&(t!==null&&ve.rd(t,"Shape.fill"),t instanceof ve&&t.g(),this.Ca=t,this.C(),this.t("fill",n,t))}get stroke(){return this.Hi}set stroke(t){const n=this.Hi;n!==t&&(t!==null&&ve.rd(t,"Shape.stroke"),t instanceof ve&&t.g(),this.Hi=t,this.C(),this.t("stroke",n,t))}get strokeWidth(){return this.jo}set strokeWidth(t){const n=this.jo;if(n!==t)if(t>=0){this.jo=t,this.c();const i=this.part;i!==null&&i.ff(),this.t("strokeWidth",n,t)}else o._(t,"value >= 0",Ie,"strokeWidth:value")}x0(){return this.jo}get strokeCap(){return this.Lt!==null?this.Lt.pp:"butt"}set strokeCap(t){const n=this.strokeCap;n!==t&&(typeof t=="string"&&(t==="butt"||t==="round"||t==="square")?(this.La(),this.Lt.pp=t,this.C(),this.t("strokeCap",n,t)):o._(t,'"butt", "round", or "square"',Ie,"strokeCap"))}get strokeJoin(){return this.Lt!==null?this.Lt.yp:"miter"}set strokeJoin(t){const n=this.strokeJoin;n!==t&&(typeof t=="string"&&(t==="miter"||t==="bevel"||t==="round")?(this.La(),this.Lt.yp=t,this.C(),this.t("strokeJoin",n,t)):o._(t,'"miter", "bevel", or "round"',Ie,"strokeJoin"))}get strokeMiterLimit(){return this.Lt!==null?this.Lt.wp:10}set strokeMiterLimit(t){const n=this.strokeMiterLimit;if(n!==t&&t>=1){this.La(),this.Lt.wp=t,this.C();const i=this.part;i!==null&&i.ff(),this.t("strokeMiterLimit",n,t)}}get strokeDashArray(){return this.Xo}set strokeDashArray(t){const n=this.Xo;if(n!==t){if(t!==null&&!Array.isArray(t)&&o.we(t,"Array",Ie,"strokeDashArray:value"),t!==null){const i=t.length;let r=0;for(let a=0;a<i;a++){const l=t[a];(!(l>=0)||!isFinite(l))&&o.o("strokeDashArray:value "+l+" at index "+a+" must be a positive number or zero."),r+=l}if(r===0){if(n===null)return;t=null}}this.Xo=t,this.C(),this.t("strokeDashArray",n,t)}}get strokeDashOffset(){return this.Lt!==null?this.Lt.dh:0}set strokeDashOffset(t){const n=this.strokeDashOffset;n!==t&&t>=0&&(this.La(),this.Lt.dh=t,this.C(),this.t("strokeDashOffset",n,t))}get figure(){return this.kd}set figure(t){const n=this.kd;if(n!==t){let i=R.So[t];if(typeof i=="function"?i=t:(i=R.So[t.toLowerCase()],i||o.o("Unknown Shape.figure: "+t)),n!==i){const r=this.part;r!==null&&r.ff(),this.kd=i,this.xs=null,this.ee(),this.c(),this.t("figure",n,i)}}}get toArrow(){return this.Bt!==null?this.Bt.xp:"None"}set toArrow(t){const n=this.toArrow;if(t===!0?t="Standard":t===!1&&(t=""),n!==t){const i=Ie.AA(t);i===null?o.o("Unknown Shape.toArrow: "+t):n!==i&&(this.Bt===null&&(this.Bt=new Cr),this.Bt.xp=i,this.xs=null,this.ee(),this.c(),this.TA(i),this.t("toArrow",n,i))}}get fromArrow(){return this.Bt!==null?this.Bt.bp:"None"}set fromArrow(t){const n=this.fromArrow;if(t===!0?t="Standard":t===!1&&(t=""),n!==t){const i=Ie.AA(t);i===null?o.o("Unknown Shape.fromArrow: "+t):n!==i&&(this.Bt===null&&(this.Bt=new Cr),this.Bt.bp=i,this.xs=null,this.ee(),this.c(),this.TA(i),this.t("fromArrow",n,i))}}TA(t){const n=this.diagram;if(n!==null&&n.undoManager.isUndoingRedoing)return;this.vR();const i=z.MiddleRight;this.toArrow!=="None"?(this.segmentIndex=-1,this.alignmentFocus=i):this.fromArrow!=="None"&&(this.segmentIndex=0,this.alignmentFocus=new z(1-i.x,i.y))}get spot1(){return this.Lt!==null?this.Lt.zn:z.Default}set spot1(t){const n=this.spot1;n.equals(t)||(t=t.N(),this.La(),this.Lt.zn=t,this.c(),this.t("spot1",n,t))}get spot2(){return this.Lt!==null?this.Lt.Xn:z.Default}set spot2(t){const n=this.spot2;n.equals(t)||(t=t.N(),this.La(),this.Lt.Xn=t,this.c(),this.t("spot2",n,t))}get parameter1(){return this.Pd}set parameter1(t){const n=this.Pd;n!==t&&(this.Pd=t,this.ee(),this.c(),this.t("parameter1",n,t))}get parameter2(){return this.Sd}set parameter2(t){const n=this.Sd;n!==t&&(this.Sd=t,this.ee(),this.c(),this.t("parameter2",n,t))}get naturalBounds(){return this.zi}_R(){const t=this.desiredSize;if(!t.isReal()&&this.ct!==null){const n=this.ct.bounds;this.zi.a(n)}else this.zi.e(0,0,t.width,t.height)}get pathPattern(){return this.Lt!==null?this.Lt.kp:null}set pathPattern(t){const n=this.pathPattern;n!==t&&(this.La(),this.Lt.kp=t,this.C(),this.t("pathPattern",n,t))}get geometryStretch(){return this.Lt!==null?this.Lt.Pp:1}set geometryStretch(t){const n=this.geometryStretch;n!==t&&(this.La(),this.Lt.Pp=t,this.c(),this.t("geometryStretch",n,t))}get interval(){return this.J!==null?this.J.df:1}set interval(t){const n=this.interval;if(t=Math.round(t),n!==t&&t!==0&&isFinite(t)){this.J===null&&(this.J=new ws),this.J.df=t;const i=this.diagram;i!==null&&this.panel===i.grid&&i._l(),this.c();const r=this.panel;r!==null&&(r.ns=null),this.t("interval",n,t)}}get graduatedStart(){return this.J!==null?this.J.gf:0}set graduatedStart(t){const n=this.graduatedStart;n!==t&&(t<0?t=0:t>1&&(t=1),this.J===null&&(this.J=new ws),this.J.gf=t,this.c(),this.t("graduatedStart",n,t))}get graduatedEnd(){return this.J!==null?this.J.mf:1}set graduatedEnd(t){const n=this.graduatedEnd;n!==t&&(t<0?t=0:t>1&&(t=1),this.J===null&&(this.J=new ws),this.J.mf=t,this.c(),this.t("graduatedEnd",n,t))}get graduatedSkip(){return this.J!==null?this.J.pf:null}set graduatedSkip(t){const n=this.graduatedSkip;n!==t&&(t!==null&&o.i(t,"function",Ie,"graduatedSkip"),this.J===null&&(this.J=new ws),this.J.pf=t,this.c(),this.t("graduatedSkip",n,t))}static wv(t,n,i){let r=null;if(t.toArrow!=="None")r=Ie.no[t.toArrow];else if(t.fromArrow!=="None")r=Ie.no[t.fromArrow];else{let a=R.So[t.figure];typeof a=="string"&&(a=R.So[a]),a===void 0&&o.o("Unknown Shape.figure: "+t.figure),r=a(t,n,i),r.sc=n,r.nc=i}if(r===null){const a=R.So.Rectangle;typeof a=="function"&&(r=a(t,n,i))}return r}static getFigureGenerators(){const t=new W;for(const n in R.So){if(n===n.toLowerCase())continue;const i=R.So[n];t.set(n,i)}return t.g(),t}static defineFigureGenerator(t,n){o.i(t,"string",Ie,"defineFigureGenerator:name"),typeof n=="string"||o.i(n,"function",Ie,"defineFigureGenerator:func");const i=t.toLowerCase(),r=R.So;r[t]=n,r[i]=t}static getArrowheadGeometries(){const t=new W;for(const n in R.Yg)if(Ie.no[n]===void 0){const i=rt.parse(R.Yg[n],!1);Ie.no[n]=i;const r=n.toLowerCase();r!==n&&(Ie.no[r]=n)}for(const n in Ie.no){if(n===n.toLowerCase())continue;const i=Ie.no[n];i instanceof rt&&t.set(n,i)}return t.g(),t}static defineArrowheadGeometry(t,n){o.i(t,"string",Ie,"defineArrowheadGeometry:name");let i=null;typeof n=="string"?(o.i(n,"string",Ie,"defineArrowheadGeometry:pathstr"),i=rt.parse(n,!1)):i=n;const r=t.toLowerCase();(r==="none"||t===r)&&o.o("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);const a=Ie.no;a[t]=i,a[r]=t}static AA(t){let n=Ie.no[t];if(n===void 0){const i=t.toLowerCase();if(i==="none")return"None";if(n=Ie.no[i],n===void 0){let r=null;for(const a in R.Yg)if(a.toLowerCase()===i){r=a;break}if(r!==null){const a=rt.parse(R.Yg[r],!1);return Ie.no[r]=a,i!==r&&(Ie.no[i]=r),r}}}return typeof n=="string"?n:n instanceof rt?t:null}};v(Ie,"no",new d),v(Ie,"I2",new d);let Qt=Ie;class td{constructor(){v(this,"gi");v(this,"pp");v(this,"yp");v(this,"wp");v(this,"dh");v(this,"kp");v(this,"Pp");v(this,"zn");v(this,"Xn");this.gi=!1,this.pp="butt",this.yp="miter",this.wp=10,this.dh=0,this.kp=null,this.Pp=1,this.zn=z.Default,this.Xn=z.Default}copy(){const e=new td;return e.pp=this.pp,e.yp=this.yp,e.wp=this.wp,e.dh=this.dh,e.kp=this.kp,e.Pp=this.Pp,e.zn=this.zn.N(),e.Xn=this.Xn.N(),e}}var ed=(A=>(A[A.None=0]="None",A[A.Fit=1]="Fit",A[A.DesiredSize=2]="DesiredSize",A[A.BreakAll=3]="BreakAll",A))(ed||{}),s0=(A=>(A[A.Clip=0]="Clip",A[A.Ellipsis=1]="Ellipsis",A))(s0||{}),r0=(A=>(A[A.Trim=0]="Trim",A[A.None=1]="None",A))(r0||{});const se=class se extends Re{constructor(t,n){super();v(this,"hi");v(this,"Hi");v(this,"kn");v(this,"Ce");v(this,"mi");v(this,"b0");v(this,"Nd");v(this,"J");v(this,"W");v(this,"Tl");v(this,"oo");v(this,"Pn");v(this,"Le");v(this,"Di");v(this,"Sn");return this.n|=2097152,this.hi="",this.Hi="black",this.kn="13px sans-serif",this.Ce=0,this.mi=0,this.b0=0,this.Nd=null,this.J=null,this.W=null,this.Tl=0,this.oo=null,this.Pn=0,this.Le=null,this.Di=null,this.Sn=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),n&&Object.assign(this,n),this}cloneProtected(t){super.cloneProtected(t),t.hi=this.hi,t.Hi=this.Hi,t.kn=this.kn,t.Ce=this.Ce,t.mi=this.mi,t.b0=this.b0,t.Nd=this.Nd,this.J!==null&&(t.J=this.J.copy()),this.W!==null&&(this.W.gi?t.W=this.W:t.W=this.W.copy()),t.Tl=this.Tl,t.oo=this.oo,t.Pn=this.Pn,t.Le=this.Le,t.Di=this.Di,t.Sn=this.Sn}Mn(){this.W===null?this.W=new nd:this.W.gi&&(this.W=this.W.copy())}lh(){super.lh(),this.W!==null&&(this.W.gi=!0)}rv(t){this.n=t.n|2048|4096,this.Wt=t.opacity,this.Ct=t.background,this.ze=t.desiredSize.N(),this.minSize=t.minSize.N(),this.maxSize=t.maxSize.N(),t.bi!==null?this.bi=t.bi.copy():this.bi=null,this.et=t.scale,this.Xt=t.angle,this.stretch=t.stretch,this.$r=t.margin.N(),this.oi=t.alignment.N(),this.Wc=t.alignmentFocus.N(),this.segmentFraction=t.segmentFraction,this.segmentOffset=t.segmentOffset.N(),this.segmentOrientation=t.segmentOrientation,t.ni!==null&&(this.ni=t.ni.copy()),this.shadowVisible=t.shadowVisible,this.hi=t.hi,this.Hi=t.Hi,this.kn=t.kn,this.J!==null&&(this.J=t.J.copy()),t.W!==null&&(t.W.gi?this.W=t.W:this.W=t.W.copy()),this.Tl=t.Tl}nv(t){if(this.hi=t.text||"",this.Xt=t.labelAngle||0,this.Ce=t.lineCount||0,this.Pv(t.lines),t.naturalBounds&&(this.zi=t.naturalBounds),t.actualBounds){const n=t.actualBounds;this.zt(n.x,n.y,n.width,n.height)}}ri(t){t in ed?this.wrap=t:super.ri(t)}toString(){return this.hi.length>22?'TextBlock("'+this.hi.substring(0,20)+'"...)':'TextBlock("'+this.hi+'")'}static getEllipsis(){return se.Sp}static setEllipsis(t){se.Sp=t,se.Zb=new d,se.E2=0}static getBaseline(){return se.Qb}static setBaseline(t){se.Qb=t}static getUnderline(){return se._b}static setUnderline(t){se._b=t}c(){super.c()}get font(){return this.kn}set font(t){const n=this.kn;n!==t&&(this.kn=t,this.oo=null,this.c(),this.t("font",n,t))}static isValidFont(t){return s.CSS?s.CSS.supports("font",t):!0}get text(){return this.hi}set text(t){const n=this.hi;t!=null?t=t.toString():t="",n!==t&&(this.hi=t,this.c(),this.t("text",n,t),this.ss(!0))}get textAlign(){return this.W!==null?this.W.Mp:"start"}set textAlign(t){const n=this.textAlign;n!==t&&(t==="start"||t==="end"||t==="left"||t==="right"||t==="center")&&(this.Mn(),this.W.Mp=t,this.C(),this.t("textAlign",n,t))}get flip(){return this.W!==null?this.W.ro:0}set flip(t){const n=this.flip;n!==t&&(this.Mn(),this.W.ro=t,this.C(),this.t("flip",n,t))}get verticalAlignment(){return this.W!==null?this.W.el:z.Top}set verticalAlignment(t){const n=this.verticalAlignment;n.equals(t)||(t=t.N(),this.Mn(),this.W.el=t,this.sf(),this.t("verticalAlignment",n,t))}get naturalBounds(){if(!this.zi.isReal()){const t=B.l();this.B2(this.hi,999999,t);let n=t.width;B.s(t);let i=this.DA(n);const r=this.desiredSize;isNaN(r.width)||(n=r.width),isNaN(r.height)||(i=r.height),this.zi.En(n,i)}return this.zi}get isMultiline(){return(this.n&2097152)!==0}set isMultiline(t){const n=(this.n&2097152)!==0;n!==t&&(this.n=this.n^2097152,this.c(),this.t("isMultiline",n,t))}get isUnderline(){return(this.n&4194304)!==0}set isUnderline(t){const n=(this.n&4194304)!==0;n!==t&&(this.n=this.n^4194304,this.ss(!0),this.C(),this.t("isUnderline",n,t))}get isStrikethrough(){return(this.n&8388608)!==0}set isStrikethrough(t){const n=(this.n&8388608)!==0;n!==t&&(this.n=this.n^8388608,this.ss(!0),this.C(),this.t("isStrikethrough",n,t))}get wrap(){return this.W!==null?this.W.Np:2}set wrap(t){const n=this.wrap;n!==t&&(this.Mn(),this.W.Np=t,this.c(),this.t("wrap",n,t))}get overflow(){return this.W!==null?this.W.Cp:0}set overflow(t){const n=this.overflow;n!==t&&(this.Mn(),this.W.Cp=t,this.c(),this.t("overflow",n,t))}get isOverflowed(){return(this.n&16777216)!==0}U2(t){t?this.n|=16777216:this.n&=-16777217}get stroke(){return this.Hi}set stroke(t){const n=this.Hi;n!==t&&(t!==null&&ve.rd(t,"TextBlock.stroke"),t instanceof ve&&t.g(),this.Hi=t,this.C(),this.t("stroke",n,t))}get lineCount(){return this.Ce}get lineHeight(){return this.Lp()}get editable(){return(this.n&1048576)!==0}set editable(t){const n=(this.n&1048576)!==0;n!==t&&(this.n=this.n^1048576,this.t("editable",n,t))}get L2(){return(this.n&33554432)!==0}set L2(t){this.n=this.n^33554432}get textEditor(){return this.W!==null?this.W.Ap:null}set textEditor(t){const n=this.textEditor;n!==t&&(this.Mn(),this.W.Ap=t,this.t("textEditor",n,t))}get errorFunction(){return this.W!==null?this.W.os:null}set errorFunction(t){const n=this.errorFunction;n!==t&&(t!==null&&o.i(t,"function",se,"errorFunction"),this.Mn(),this.W.os=t,this.t("errorFunction",n,t))}get interval(){return this.J!==null?this.J.df:1}set interval(t){const n=this.interval;if(t=Math.round(t),n!==t&&t!==0&&isFinite(t)){this.J===null&&(this.J=new ws),this.J.df=t,this.c();const i=this.panel;i!==null&&(i.ns=null),this.t("interval",n,t)}}get graduatedStart(){return this.J!==null?this.J.gf:0}set graduatedStart(t){const n=this.graduatedStart;n!==t&&(t<0?t=0:t>1&&(t=1),this.J===null&&(this.J=new ws),this.J.gf=t,this.c(),this.t("graduatedStart",n,t))}get graduatedEnd(){return this.J!==null?this.J.mf:1}set graduatedEnd(t){const n=this.graduatedEnd;n!==t&&(t<0?t=0:t>1&&(t=1),this.J===null&&(this.J=new ws),this.J.mf=t,this.c(),this.t("graduatedEnd",n,t))}get graduatedFunction(){return this.J!==null?this.J.Tp:null}set graduatedFunction(t){const n=this.graduatedFunction;n!==t&&(t!==null&&o.i(t,"function",se,"graduatedFunction"),this.J===null&&(this.J=new ws),this.J.Tp=t,this.c(),this.t("graduatedFunction",n,t))}get graduatedSkip(){return this.J!==null?this.J.pf:null}set graduatedSkip(t){const n=this.graduatedSkip;n!==t&&(t!==null&&o.i(t,"function",se,"graduatedSkip"),this.J===null&&(this.J=new ws),this.J.pf=t,this.c(),this.t("graduatedSkip",n,t))}fh(t,n){if(this.Hi===null||this.hi.length===0||this.kn===null)return;const i=this.naturalBounds,r=this.actualBounds,a=i.width,l=i.height,u=this.Lp();let c=t.textAlign=this.textAlign;const f=n.Yu;c==="start"?c=f?"right":"left":c==="end"&&(c=f?"left":"right");const m=this.isUnderline,p=this.isStrikethrough;this.dn(t,this.Hi,!0,!1,i,r),(m||p)&&this.dn(t,this.Hi,!1,!1,i,r);const y=0;let w=0;const b=a;let C=!1;n.Zt===t&&!(n.Zt instanceof Pe)&&!this.L2&&n.getRenderingHint("textGreeking")===!0&&u*this.ca*n.scale<3&&(C=!0);const k=this.spacingAbove,N=this.spacingBelow;switch(this.flip){case 0:break;case 2:t.translate(a,0),t.scale(-1,1);break;case 1:t.translate(0,l),t.scale(1,-1);break;case 3:t.translate(a,l),t.scale(-1,-1);break}t.commitTransform();const F=this.Ce,D=(k+u+N)*F;if(l>D){const E=this.verticalAlignment;w=E.y*l-E.y*D+E.offsetY}if(F===1&&this.Sn!==null){let E=this.mi;E>b&&(E=b),w+=k,this.FA(this.Sn,t,y,w,b,u,E,C,c,m,p)}else if(this.Le!==null&&this.Di!==null)for(let E=0;E<F;E++){let U=this.Le[E];U>b&&(U=b),w+=k,this.FA(this.Di[E],t,y,w,b,u,U,C,c,m,p),w+=u+N}switch(this.flip){case 0:break;case 2:t.scale(-1,1),t.translate(-a,0);break;case 1:t.scale(1,-1),t.translate(0,-l);break;case 3:t.scale(-1,-1),t.translate(-a,-l);break}}FA(t,n,i,r,a,l,u,c,f,m,p){let y=0;if(c){f==="left"?y=0:f==="right"?y=a-u:f==="center"&&(y=(a-u)/2);const C=n.globalAlpha;n.globalAlpha=C/2,n.fillRect(i+y,r+l/4,u,l/2),n.globalAlpha=C;return}f==="left"?y=0:f==="right"?y=a:f==="center"&&(y=a/2);const w=se.Qb!==null?se.Qb(this,l):l*.75;n.fillText(t,i+y,r+w);let b=l/20|0;if(b===0&&(b=1),f==="right"?y-=u:f==="center"&&(y-=u/2),m){const C=se._b!==null?se._b(this,l):l*.8;this.RA(i+y,r+C,i+y+u,r+C,b,n),n instanceof Pe&&n.lastCreatedElement.classList.add("gojs-td")}if(p){let C=r+l-l/2.2|0;b%2!==0&&(C+=.5),this.RA(i+y,C,i+y+u,C,b,n),n instanceof Pe&&n.lastCreatedElement.classList.add("gojs-td")}}RA(t,n,i,r,a,l){l.beginPath(),l.lineWidth=a,l.moveTo(t,n),l.lineTo(i,r),l.stroke(),l.endPath()}_c(t,n,i){if(!super._c(t,n,i))return!1;if(this.dn(t,this.Hi,!0,!1,this.naturalBounds,this.actualBounds),i){if(this.svg.getElementsByTagName("text").length===0)return!0;const r=this.svg.getElementsByClassName("gojs-td");for(let a=0;a<r.length;a++)t.setFillOrStrokeInPlace(r[a],!1)}else this.Sv(this.svg,this.text,t);return!0}Sv(t,n,i){t.innerHTML=n,i.setFillOrStrokeInPlace(t,!0)}sd(t){return this.lineCount>1||this.isUnderline||this.isStrikethrough?!0:super.sd(t)}l2(t,n){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",n);else{const i=t.getElementsByTagName("text");for(let r=0;r<i.length;r++)i[r].setAttributeNS(null,"filter",n)}}Mv(){this.Pn=0,this.mi=0,this.oo=null,this.Le=null,this.Di=null,this.Sn=null}td(t,n,i,r){const a=this.Ce;this.Tl=t,this.U2(!1);const l=this.kn;se.tl!==null&&se.vA!==l&&(se.tl.font=l,se.vA=l),this.Mv();let u=0,c=0;isNaN(this.desiredSize.width)?(u=this.Nv(),u=Math.min(u,t/this.scale)):u=this.desiredSize.width,this.panel!==null&&(u=Math.min(u,this.panel.maxSize.width)),c=this.DA(u),isNaN(this.desiredSize.height)?c=Math.min(c,n/this.scale):c=this.desiredSize.height,this.Cv(t,c),(this.wrap===1||isNaN(this.desiredSize.width))&&(u=isNaN(t)?this.mi:Math.min(t,this.mi)),u=Math.max(i,u),c=Math.max(r,c),this.zi.En(u,c),this.Qn(0,0,u,c),this.svg!==null&&a!==this.Ce&&this.ss(!0)}ah(t,n,i,r){this.commonArrange(t,n,i,r)}Nn(t,n){this.Sn===null?(this.Sn=t,this.mi=n):((this.Di===null||this.Le===null)&&(this.Di=[],this.Le=[],this.Di.push(this.Sn),this.Le.push(this.mi)),this.Di.push(t),this.Le.push(n),this.Di.length>this.maxLines&&(this.n|=16777216))}B2(t,n,i){const r=this.formatting===0;r&&(t=t.trim());let a=0,l=0,u=0;const c=this.kn,f=this.spacingAbove+this.spacingBelow,m=Math.max(0,this.Lp()+f),p=this.overflow===1?this.OA(c):0;if(this.Ce>=this.maxLines){i!==null&&i.e(0,m);return}let y=t;if(this.wrap===0){if(this.Pn=1,l=this.getStringWidth(t),p===0||l<=n){this.mi=Math.max(this.mi,l),this.Nn(t,this.mi),i!==null&&i.e(l,m);return}let b=this.Cd(y);y=y.substring(b.length);let C=this.Cd(y);for(l=this.getStringWidth(b+C),u=0;C.length>0&&l<=n;){b+=C,y=y.substring(C.length),C=this.Cd(y),u=l;let k=b+C;r&&(k=k.trim()),l=this.getStringWidth(k)}for(r&&(C=C.trim()),b+=C,n=Math.max(1,n-p);this.getStringWidth(b)>n&&b.length>1;)b=b.substring(0,b.length-1);this.U2(!0),b+=se.Sp,u=this.getStringWidth(b),this.mi=u,this.Nn(b,u),i!==null&&i.e(u,m);return}let w=0;for(y.length===0&&(w=1,this.Nn(y,0));y.length>0;){let b=this.Cd(y);for(y=y.substring(b.length);this.getStringWidth(b)>n;){let N=1;for(l=this.getStringWidth(b.substring(0,N)),u=0;l<=n;)N++,u=l,l=this.getStringWidth(b.substring(0,N));let F=0;N===1?(F=l,a=Math.max(a,l)):(F=u,a=Math.max(a,u)),N--,N<1&&(N=1);const D=b.substring(0,N);if(this.Nn(D,F),w++,b=b.substring(N),this.Ce+w>this.maxLines)break}let C=this.Cd(y);for(l=this.getStringWidth(b+C),u=0;C.length>0&&l<=n;){b+=C,y=y.substring(C.length),C=this.Cd(y),u=l;let N=b+C;r&&(N=N.trim()),l=this.getStringWidth(N)}if(r&&(b=b.trim()),b==="")continue;b[b.length-1]==="­"&&(b=b.substring(0,b.length-1)+"‐");let k=0;if(C.length===0?(k=l,a=Math.max(a,l)):(u=this.getStringWidth(b),k=u,a=Math.max(a,u)),this.Nn(b,k),w++,this.Ce+w>this.maxLines)break}this.Pn=Math.min(this.maxLines,w),this.mi=Math.max(this.mi,a),i!==null&&i.e(this.mi,m*this.Pn)}Cv(t,n){if(this.mi===0||this.Le===null||this.Di===null||this.overflow!==1)return;const i=this.kn,r=this.overflow===1?this.OA(i):0,a=this.spacingAbove+this.spacingBelow,l=Math.max(0,this.Lp()+a),u=Math.min(this.maxLines-1,Math.max(Math.floor(n/l+.01)-1,0));if(u+1>=this.Di.length)return;this.U2(!0);let c=this.Di[u];const f=Math.max(1,t-r);for(;this.getStringWidth(c)>f&&c.length>1;)c=c.substring(0,c.length-1);c+=se.Sp;const m=this.getStringWidth(c);this.Di[u]=c,this.Di=this.Di.slice(0,u+1),this.Le[u]=m,this.Le=this.Le.slice(0,u+1),this.Pn=this.Di.length,this.mi=Math.max(this.mi,m),this.Ce=this.Pn,this.Ce===1&&(this.Sn=this.Di[0])}Cd(t){if(this.wrap===3)return t.substring(0,1);let n=t.length,i=0;const r=se.Lv;for(;i<n&&!r.test(t.charAt(i));)i++;for(this.formatting===1&&(n=Math.min(n,i+1));i<n&&r.test(t.charAt(i));)i++;return i>=t.length?t:t.substring(0,i)}getStringWidth(t){return se.tl===null?t.length*8:se.tl.measureText(t).width}Lp(){if(this.oo!==null)return this.oo;const t=this.kn;let n=0;return se.tl===null?(n=16,this.oo=n,n):(se.V2[t]!==void 0&&se.IA<5e3?n=se.V2[t]:(n=se.tl.measureText("M").width*1.3,se.V2[t]=n,se.IA++),this.oo=n,n)}OA(t){if(se.tl===null)return 6;let n=0;return se.Zb[t]!==void 0&&se.E2<5e3?n=se.Zb[t]:(n=se.tl.measureText(se.Sp).width,se.Zb[t]=n,se.E2++),n}t1(t,n){return t.indexOf(`
`,n)}DA(t){let n=this.hi.replace(/\r\n/g,`
`).replace(/\r/g,`
`);const i=this.spacingAbove+this.spacingBelow,r=Math.max(0,this.Lp()+i);if(n.length===0)return this.mi=0,this.Ce=1,r;if(!this.isMultiline){const f=this.t1(n,0);f>=0&&(n=n.substring(0,f))}let a=0;this.Ce=0;let l=0,u=-1,c=!1;for(;!c;){if(u=this.t1(n,l),u===-1&&(u=n.length,c=!0),l<=u){const f=n.substring(l,u);if(this.wrap!==0){this.Pn=0;const m=B.l();this.B2(f,t,m),a+=m.height,B.s(m),this.Ce+=this.Pn}else this.B2(f,t,null),a+=r,this.Ce++;this.Ce===this.maxLines&&(c=!0)}l=u+1}return this.b0=a,a}Nv(){let t=this.hi.replace(/\r\n/g,`
`).replace(/\r/g,`
`);if(t.length===0)return 8;if(this.isMultiline){let n=0,i=0,r=!1;for(;!r;){let a=this.t1(t,i);a===-1&&(a=t.length,r=!0);let l=t.substring(i,a);this.formatting===0&&(l=l.trim()),n=Math.max(n,this.getStringWidth(l)),i=a+1}return n}else{const n=this.t1(t,0);return n>=0&&(t=t.substring(0,n)),this.getStringWidth(t)}}get textValidation(){return this.W!==null?this.W.Al:null}set textValidation(t){const n=this.textValidation;n!==t&&(t!==null&&o.i(t,"function",se,"textValidation"),this.Mn(),this.W.Al=t,this.t("textValidation",n,t))}get textEdited(){return this.W!==null?this.W.Dp:null}set textEdited(t){const n=this.textEdited;n!==t&&(t!==null&&o.i(t,"function",se,"textEdited"),this.Mn(),this.W.Dp=t,this.t("textEdited",n,t))}get spacingAbove(){return this.W!==null?this.W.Fp:0}set spacingAbove(t){const n=this.spacingAbove;n!==t&&(this.Mn(),this.W.Fp=t,this.c(),this.t("spacingAbove",n,t))}get spacingBelow(){return this.W!==null?this.W.Rp:0}set spacingBelow(t){const n=this.spacingBelow;n!==t&&(this.Mn(),this.W.Rp=t,this.c(),this.t("spacingBelow",n,t))}get formatting(){return this.W!==null?this.W.vp:0}set formatting(t){const n=this.formatting;n!==t&&(this.Mn(),this.W.vp=t,this.c(),this.t("formatting",n,t))}get maxLines(){return this.W!==null?this.W.Op:1/0}set maxLines(t){const n=this.maxLines;n!==t&&(t=Math.floor(t),t<=0&&o._(t,"> 0",se,"maxLines"),this.Mn(),this.W.Op=t,this.c(),this.t("maxLines",n,t))}getMetrics(){return[this.mi,this.Tl,this.oo,this.Pn,this.Le,this.Di,this.Sn]}Pv(t){t!==void 0&&(this.mi=t[0],this.Tl=t[1],this.oo=t[2],this.Pn=t[3],this.Le=t[4],this.Di=t[5],this.Sn=t[6])}get metrics(){return{arrSize:this.Le!==null?this.Le:[this.mi],arrText:this.Di!==null?this.Di:[this.Sn],maxLineWidth:this.mi,fontHeight:this.oo}}get choices(){return this.Nd}set choices(t){const n=this.Nd;n!==t&&(this.Nd=t,this.t("choices",n,t))}};v(se,"Qb",null),v(se,"_b",null),v(se,"None",0),v(se,"WrapFit",1),v(se,"WrapDesiredSize",2),v(se,"WrapBreakAll",3),v(se,"OverflowClip",0),v(se,"OverflowEllipsis",1),v(se,"FormatTrim",0),v(se,"FormatNone",1),v(se,"Lv",new RegExp("[ ​­]")),v(se,"V2",new d),v(se,"IA",0),v(se,"Zb",new d),v(se,"E2",0),v(se,"Sp","..."),v(se,"vA",""),v(se,"tl",le.isUsingDOM()?new wn(null).ai:null);let Je=se;class nd{constructor(){v(this,"gi");v(this,"os");v(this,"ro");v(this,"vp");v(this,"Op");v(this,"Cp");v(this,"Fp");v(this,"Rp");v(this,"Mp");v(this,"Dp");v(this,"Ap");v(this,"Al");v(this,"el");v(this,"Np");this.gi=!1,this.os=null,this.ro=0,this.vp=0,this.Op=1/0,this.Cp=0,this.Fp=0,this.Rp=0,this.Mp="start",this.Dp=null,this.Ap=null,this.Al=null,this.el=z.Top,this.Np=2}copy(){const e=new nd;return e.os=this.os,e.ro=this.ro,e.vp=this.vp,e.Op=this.Op,e.Cp=this.Cp,e.Fp=this.Fp,e.Rp=this.Rp,e.Mp=this.Mp,e.Dp=this.Dp,e.Ap=this.Ap,e.Al=this.Al,e.el=this.el,e.Np=this.Np,e}}class ws{constructor(){v(this,"df");v(this,"gf");v(this,"mf");v(this,"Tp");v(this,"pf");this.df=1,this.gf=0,this.mf=1,this.Tp=null,this.pf=null}copy(){const e=new ws;return e.df=this.df,e.gf=this.gf,e.mf=this.mf,e.Tp=this.Tp,e.pf=this.pf,e}}var id=(A=>(A[A.None=0]="None",A[A.Fill=2]="Fill",A[A.Uniform=6]="Uniform",A[A.UniformToFill=7]="UniformToFill",A))(id||{});const sn=class sn extends Re{constructor(t,n){super();v(this,"sl");v(this,"yt");v(this,"nl");v(this,"yf");v(this,"os");v(this,"ol");v(this,"wf");v(this,"ro");v(this,"xf");v(this,"bf");v(this,"Ib");this.n|=2097152,this.sl=null,this.yt="",this.nl=I.AD,this.yf=2,this.os=null,this.ol=null,this.wf=z.Center,this.ro=0,this.xf=null,this.bf=null,this.Ib=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),n&&Object.assign(this,n)}cloneProtected(t){super.cloneProtected(t),t.yt=this.yt,t.element=this.sl,t.nl=this.nl.N(),t.yf=this.yf,t.ro=this.ro,t.os=this.os,t.ol=this.ol,t.wf=this.wf.N(),t.bf=this.bf}ri(t){t in id?this.imageStretch=t:super.ri(t)}toString(){return"Picture("+this.source+")#"+L.as(this)}get kf(){return(this.n&1048576)!==0}set kf(t){this.kf!==t&&(this.n=this.n^1048576)}get Ip(){return(this.n&2097152)!==0}set Ip(t){this.Ip!==t&&(this.n=this.n^2097152)}get mn(){return(this.n&4194304)!==0}set mn(t){this.mn!==t&&(this.n=this.n^4194304)}static clearCache(t){t===void 0&&(t=""),o.i(t,"string",sn,"clearCache:url"),t!==""?sn.Ep[t]&&(delete sn.Ep[t],sn.i1--):(sn.Ep=new d,sn.i1=0)}static OL(t,n){n.EA||(n.e1=i=>{sn.Av(n,i),t.desiredSize.isReal()||(t.ue(!1),t.c())},n.s1=i=>sn.Tv(n,i),n.addEventListener("load",n.e1),n.addEventListener("error",n.s1),n.EA=!0)}static mR(t){t.e1&&t.removeEventListener("load",t.e1),t.s1&&t.removeEventListener("error",t.s1),delete t.e1,delete t.s1,delete t.EA}get element(){return this.sl}set element(t){const n=this.sl;if(this.ss(!0),n!==t){this.kf=t instanceof HTMLCanvasElement;const i=t instanceof HTMLImageElement;t!==null&&!(i||t instanceof HTMLVideoElement||this.kf)&&o.o("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);const r=this.diagram;r!==null&&r.DM(this),this.sl=t,t!==null&&i&&t.es===void 0&&(t.es=new L),r!==null&&i&&r.TM(this),this.t("element",n,t),this.C()}}dR(){const t=this.sl;if(t===null)return;const n=this.desiredSize.isReal();(this.kf||t.complete===!0)&&(t.f0&&(t.Bp instanceof Event&&this.os!==null?this.os(this,t.Bp):t.mn===!0&&!t.Bp&&this.ol!==null&&t.z2&&this.ol(this,t.z2)),t.mn=!0),t.mn&&n&&this.diagram!==null&&this.diagram.Ku.add(this)}Dv(){if(this.sl===null){this.xf=!1;return}const t=new wn(null).ai;try{t.drawImage(this.sl,0,0)}catch{this.Ip=!1}try{t.getImageData(0,0,1,1).data[3]&&(this.xf=!1),this.xf=!1}catch{this.xf=!0}}get source(){return this.yt}set source(t){const n=this.yt;if(n!==t){this.ss(!0),o.i(t,"string",sn,"source"),this.yt=t;let i=sn.Ep;if(!le.isUsingDOM()){this.t("source",n,t);return}let r=null;if(i[t]!==void 0)r=i[t];else if(t!==""){sn.i1>30&&(sn.clearCache(),i=sn.Ep),r=o.en("img"),r.f0=!0,sn.OL(this,r);const a=this.bf;a!==null&&(r.crossOrigin=a(this)),r.src=t,i[t]=r,sn.i1++}this.element=r,r!==null&&r.__goCache===void 0&&(r.__goCache=new cC),this.c(),this.C(),this.t("source",n,t)}}static Av(t,n){t.mn=!0,t.Bp=!1;let i;const r=t.es.copy();if(r==null)return;const a=r.iterator;for(;a.next();){const l=a.value;l.C();const u=t.getAttribute("src")||"",c=l.Wl.get(u);if(c===null)continue;const f=c.length;for(let m=0;m<f;m++)i=c[m],i.desiredSize.isReal()||l.Ku.add(i),i.ss(!0),l.requestUpdate(),t.f0&&(t.z2===void 0&&(t.z2=n),i.ol!==null&&i.ol(i,n))}t.es.clear()}static Tv(t,n){t.Bp=n;let i;const r=t.es.copy();if(r==null)return;const a=r.iterator;for(;a.next();){const l=a.value,u=t.getAttribute("src")||"",c=l.Wl.get(u);if(c===null)continue;const f=c.length,m=o.nt();for(let p=0;p<f;p++)m.push(c[p]);if(t.f0)for(let p=0;p<f;p++)i=m[p],i.os!==null&&i.os(i,n);o.tt(m)}t.es.clear()}reloadSource(){if(this.source==="")return;sn.clearCache(this.source);const t=this.source;this.source="",this.source=t}redraw(){this.C(),this.ss(!0)}get sourceCrossOrigin(){return this.bf}set sourceCrossOrigin(t){if(this.bf!==t&&(t!==null&&o.i(t,"function",sn,"sourceCrossOrigin"),this.bf=t,this.element!==null)){const n=this.element.getAttribute("src");t===null&&typeof n=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=n}}get sourceRect(){return this.nl}set sourceRect(t){const n=this.nl;n.equals(t)||(t=t.N(),this.nl=t,this.C(),this.t("sourceRect",n,t))}get imageStretch(){return this.yf}set imageStretch(t){const n=this.yf;n!==t&&(this.yf=t,this.C(),this.t("imageStretch",n,t))}get flip(){return this.ro}set flip(t){const n=this.ro;n!==t&&(this.ro=t,this.C(),this.t("flip",n,t))}get imageAlignment(){return this.wf}set imageAlignment(t){const n=this.wf;n.equals(t)||(t=t.N(),this.wf=t,this.C(),this.t("imageAlignment",n,t))}get errorFunction(){return this.os}set errorFunction(t){const n=this.os;n!==t&&(t!==null&&o.i(t,"function",sn,"errorFunction"),this.os=t,this.t("errorFunction",n,t))}get successFunction(){return this.ol}set successFunction(t){const n=this.ol;n!==t&&(t!==null&&o.i(t,"function",sn,"successFunction"),this.ol=t,this.t("successFunction",n,t))}fh(t,n){const i=this.sl;if(i===null)return;const r=i.getAttribute("src");if(i instanceof HTMLImageElement&&(r===null||r==="")||i.Bp instanceof Event&&t instanceof Sn)return;const a=t instanceof Pe,l=this.naturalBounds;let u=0,c=0;const f=this.kf;let m=f?+i.width:i.naturalWidth,p=f?+i.height:i.naturalHeight;if(m===void 0&&i.videoWidth&&(m=i.videoWidth),p===void 0&&i.videoHeight&&(p=i.videoHeight),m===0||p===0)return;const y=m,w=p;this.sourceRect.isReal()&&(u=this.nl.x,c=this.nl.y,m=this.nl.width,p=this.nl.height);let b=m,C=p;const k=this.yf,N=this.wf;switch(k){case 0:if(this.sourceRect.isReal())break;b>=l.width&&(u=u+N.offsetX+(b*N.x-l.width*N.x)),C>=l.height&&(c=c+N.offsetY+(C*N.y-l.height*N.y)),m=Math.min(l.width,b),p=Math.min(l.height,C);break;case 2:b=l.width,C=l.height;break;case 6:case 7:let et=0;k===6?(et=Math.min(l.height/C,l.width/b),b*=et,C*=et):k===7&&(et=Math.max(l.height/C,l.width/b),b*=et,C*=et,b>=l.width&&(u=(u+N.offsetX+(b*N.x-l.width*N.x)/b)*m),C>=l.height&&(c=(c+N.offsetY+(C*N.y-l.height*N.y)/C)*p),m*=1/(b/l.width),p*=1/(C/l.height),b=l.width,C=l.height);break}const F=m*p,D=this.getDocumentScale()*n.scale,E=b*D,U=C*D,$=E*U,K=F/$,_=i.__goCache;let G=null;const X=sn.Fv;if(!a){if(i.mn&&_!==void 0&&$>4&&K>X*X){_.Ot===null&&(_.BA(4,y,w,i),_.BA(16,y,w,i));const et=_.Ot,st=et.length;for(let ut=0;ut<st&&et[ut].Ld*et[ut].Ld<K;ut++)G=et[ut]}if(!n.Xu&&(this.xf===null&&this.Dv(),this.xf))return}const Q=b<l.width?N.offsetX+(l.width*N.x-b*N.x):0,Z=C<l.height?N.offsetY+(l.height*N.y-C*N.y):0;switch(this.flip){case 0:break;case 2:t.translate(Math.min(l.width,b),0),t.scale(-1,1);break;case 1:t.translate(0,Math.min(l.height,C)),t.scale(1,-1);break;case 3:t.translate(Math.min(l.width,b),Math.min(l.height,C)),t.scale(-1,-1);break}if(t.commitTransform(),n.getRenderingHint("pictureRatioOptimization")&&!n.Qh&&_!==void 0&&G!==null&&G.Ld!==1){t.save();const et=G.Ld;try{t.drawImage(G.yt,u/et,c/et,Math.min(G.yt.width,m/et),Math.min(G.yt.height,p/et),Q,Z,Math.min(l.width,b),Math.min(l.height,C)),t instanceof Pe&&(this.Ib=[u/et,c/et,Math.min(G.yt.width,m/et),Math.min(G.yt.height,p/et),Q,Z,Math.min(l.width,b),Math.min(l.height,C)])}catch{this.Ip=!1}t.restore()}else try{t.drawImage(i,u,c,m,p,Q,Z,Math.min(l.width,b),Math.min(l.height,C)),t instanceof Pe&&(this.Ib=[u,c,m,p,Q,Z,Math.min(l.width,b),Math.min(l.height,C)])}catch{this.Ip=!1}switch(this.flip){case 0:break;case 2:t.scale(-1,1),t.translate(-Math.min(l.width,b),0);break;case 1:t.scale(1,-1),t.translate(0,-Math.min(l.height,C));break;case 3:t.scale(-1,-1),t.translate(-Math.min(l.width,b),-Math.min(l.height,C));break}}get naturalBounds(){return this.zi}td(t,n,i,r){const a=this.desiredSize,l=this.zs(!0),u=this.sl,c=this.kf;let f=0,m=0;(c||!this.mn&&u&&u.complete)&&(this.mn=!0),u===null?(isFinite(a.width)||(t=i),isFinite(a.height)||(n=r)):(f=c?+u.width:u.naturalWidth,m=c?+u.height:u.naturalHeight),!isFinite(a.width)&&l!==2&&l!==5?u!==null&&this.mn!==!1&&(this.sourceRect.isReal()?t=this.sourceRect.width:t=f):(isFinite(t)||(this.sourceRect.isReal()?t=this.sourceRect.width:u!==null&&(t=f)),i=0),!isFinite(a.height)&&l!==2&&l!==4?u!==null&&this.mn!==!1&&(this.sourceRect.isReal()?n=this.sourceRect.height:n=m):(isFinite(n)||(this.sourceRect.isReal()?n=this.sourceRect.height:u!==null&&(n=m)),r=0),isFinite(a.width)&&(t=a.width),isFinite(a.height)&&(n=a.height);const p=this.maxSize,y=this.minSize;i=Math.max(i||0,y.width),r=Math.max(r||0,y.height),t=Math.min(p.width,t),n=Math.min(p.height,n),t=Math.max(i,t),n=Math.max(r,n),u!==null&&!u.complete&&(isFinite(t)||(t=0),isFinite(n)||(n=0)),this.zi.En(t,n),this.Qn(0,0,t,n)}ah(t,n,i,r){this.commonArrange(t,n,i,r)}};v(sn,"Ep",new d),v(sn,"i1",0),v(sn,"Fv",4);let Vi=sn;class cC{constructor(){v(this,"Ot");this.Ot=null}BA(e,t,n,i){this.Ot===null&&(this.Ot=[]);const r=new wn(null),a=r.ai,l=1/e;if(r.width=t/e,r.height=n/e,r.width===0||r.height===0)return;const u=new dC(r.Ft,e);let c=i,f=1;if(this.Ot.length>0){const m=this.Ot[this.Ot.length-1];c=m.yt,f=m.Ld}a.setTransform(l*f,0,0,l*f,0,0),a.commitTransform(),a.drawImage(c,0,0),this.Ot.push(u)}}class dC{constructor(e,t){v(this,"yt");v(this,"Ld");this.yt=e,this.Ld=t}}const ro=class ro{constructor(){v(this,"Pi");v(this,"Wg");this.Wg=new rt,this.Pi=null}Ri(e){e!==null?(e.ot(),this.Wg=e,e.figures.clear()):this.Wg=new rt,this.Pi=null}uu(e,t,n,i,r,a){if(i!==void 0&&i===!0){const l=new ct(1);l.endX=e,l.endY=t,this.Pi.segments.add(l)}else this.Pi=new dt,this.Pi.startX=e,this.Pi.startY=t,this.Pi.isFilled=n,this.Pi.isEvenOdd=a||!1,this.Wg.figures.add(this.Pi);r!==void 0&&(this.Pi.isShadowed=r)}UD(){const e=this.Pi.segments.length;e>0&&this.Pi.segments.elt(e-1).close()}VD(){this.Pi.segments.length>0&&(this.Pi.isFilled=!0)}zD(e){this.Pi.isShadowed=e}gE(e){this.Pi.isEvenOdd=e}ID(e,t,n){n===void 0&&(n=!1);const i=new ct(1);i.endX=e,i.endY=t,n&&i.close(),this.Pi.segments.add(i)}ur(e,t,n){n===void 0&&(n=!1);const i=new ct(2);i.endX=e,i.endY=t,n&&i.close(),this.Pi.segments.add(i)}dr(e,t,n,i,r,a,l){l===void 0&&(l=!1);const u=new ct(3);u.point1X=e,u.point1Y=t,u.point2X=n,u.point2Y=i,u.endX=r,u.endY=a,l&&u.close(),this.Pi.segments.add(u)}Mw(e,t,n,i,r){r===void 0&&(r=!1);const a=new ct(4);a.point1X=e,a.point1Y=t,a.endX=n,a.endY=i,r&&a.close(),this.Pi.segments.add(a)}ED(e,t,n,i,r,a,l){a===void 0&&(a=0),l===void 0&&(l=!1);const u=new ct(5);u.startAngle=e,u.sweepAngle=t,u.centerX=n,u.centerY=i,u.radiusX=r,a!==0?u.radiusY=a:u.radiusY=r,l&&u.close(),this.Pi.segments.add(u)}BD(e,t,n,i,r,a,l,u){u===void 0&&(u=!1);const c=new ct(6,a,l,e,t,n,i,r);u&&c.close(),this.Pi.segments.add(c)}static mC(e){const t=ro.X2;if(t!==null)return ro.X2=null,t.Ri(e),t;{const n=new ro;return n.Ri(e),n}}static pC(e){ro.X2=e}};v(ro,"X2",null);let Ro=ro;{const A=function(r,a){const l=r.toLowerCase(),u=R.So;u[r]=a,u[l]=r};A("Rectangle",(r,a,l)=>{const u="r"+a+","+l;let c=R.cr[u];return c!==void 0||(c=new rt(2),c.endX=a,c.endY=l,R.fr<R.Gg&&(R.cr[u]=c,R.fr++)),c}),A("Square",(r,a,l)=>{const u="s"+a+","+l;let c=R.cr[u];return c!==void 0||(c=new rt(2),c.endX=a,c.endY=l,c.defaultStretch=6,R.fr<R.Gg&&(R.cr[u]=c,R.fr++)),c});const e=(r,a,l,u,c)=>{(isNaN(u)||u<0)&&(u=5),isNaN(c)&&(c=15);const f="rr"+a+","+l+","+u+","+c;let m=R.cr[f];if(m!==void 0)return m;let p=u;(c&1)===1?(p=Math.min(p,(c&2)===2?a/3:a),p=Math.min(p,(c&8)===8?l/3:l)):p=0;const y=new dt(p,0,!0);m=new rt().add(y);const w=z.TopLeft.copy(),b=z.BottomRight.copy();if((c&2)===2){let C=u;C=Math.min(C,(c&1)===1?a/3:a),C=Math.min(C,(c&4)===4?l/3:l);const k=C*R.Bn;y.add(new ct(2,a-C,0)).add(new ct(3,a,C,a-k,0,a,k)),w.offsetY=k,b.offsetX=-k}else y.add(new ct(2,a,0));if((c&4)===4){let C=u;C=Math.min(C,(c&8)===8?a/3:a),C=Math.min(C,(c&2)===2?l/3:l);const k=C*R.Bn;y.add(new ct(2,a,l-C)).add(new ct(3,a-C,l,a,l-k,a-k,l)),b.offsetX=-k,b.offsetY=-k}else y.add(new ct(2,a,l));if((c&8)===8){let C=u;C=Math.min(C,(c&4)===4?a/3:a),C=Math.min(C,(c&1)===1?l/3:l);const k=C*R.Bn;y.add(new ct(2,C,l)).add(new ct(3,0,l-C,k,l,0,l-k)),w.offsetX=k,b.offsetY=-k}else y.add(new ct(2,0,l));if((c&1)===1){const C=p*R.Bn;y.add(new ct(2,0,p)).add(new ct(3,p,0,0,C,C,0).close()),w.offsetX=C,w.offsetY=C}else y.add(new ct(2,0,0).close());return m.spot1=w,m.spot2=b,R.fr<R.Gg&&(R.cr[f]=m,R.fr++),m};A("RoundedRectangle",(r,a,l)=>{const u=r?r.parameter1:NaN,c=r?r.parameter2:NaN;return e(r,a,l,u,c)}),A("Border","RoundedRectangle"),A("RoundedTopRectangle",(r,a,l)=>{const u=r?r.parameter1:NaN;return e(r,a,l,u,3)}),A("RoundedBottomRectangle",(r,a,l)=>{const u=r?r.parameter1:NaN;return e(r,a,l,u,12)}),A("RoundedLeftRectangle",(r,a,l)=>{const u=r?r.parameter1:NaN;return e(r,a,l,u,9)}),A("RoundedRightRectangle",(r,a,l)=>{const u=r?r.parameter1:NaN;return e(r,a,l,u,6)}),A("Ellipse",(r,a,l)=>{const u="e"+a+","+l;let c=R.cr[u];return c!==void 0||(c=new rt(3),c.endX=a,c.endY=l,c.spot1=z.Rk,c.spot2=z.vk,R.fr<R.Gg&&(R.cr[u]=c,R.fr++)),c}),A("Circle",(r,a,l)=>{const u="c"+a+","+l;let c=R.cr[u];return c!==void 0||(c=new rt(3),c.endX=a,c.endY=l,c.spot1=z.Rk,c.spot2=z.vk,c.defaultStretch=6,R.fr<R.Gg&&(R.cr[u]=c,R.fr++)),c}),A("TriangleRight",(r,a,l)=>new rt().add(new dt(0,0).add(new ct(2,a,.5*l)).add(new ct(2,0,l).close())).setSpots(0,.25,.5,.75)),A("TriangleDown",(r,a,l)=>new rt().add(new dt(0,0).add(new ct(2,a,0)).add(new ct(2,.5*a,l).close())).setSpots(.25,0,.75,.5)),A("TriangleLeft",(r,a,l)=>new rt().add(new dt(a,l).add(new ct(2,0,.5*l)).add(new ct(2,a,0).close())).setSpots(.5,.25,1,.75)),A("TriangleUp",(r,a,l)=>new rt().add(new dt(a,l).add(new ct(2,0,l)).add(new ct(2,.5*a,0).close())).setSpots(.25,.5,.75,1)),A("Triangle","TriangleUp"),A("Diamond",(r,a,l)=>new rt().add(new dt(.5*a,0).add(new ct(2,0,.5*l)).add(new ct(2,.5*a,l)).add(new ct(2,a,.5*l).close())).setSpots(.25,.25,.75,.75)),A("LineH",(r,a,l)=>{const u=new rt(1);return u.startX=0,u.startY=l/2,u.endX=a,u.endY=l/2,u}),A("LineV",(r,a,l)=>{const u=new rt(1);return u.startX=a/2,u.startY=0,u.endX=a/2,u.endY=l,u}),A("None","Rectangle"),A("BarH","Rectangle"),A("BarV","Rectangle"),A("MinusLine","LineH"),A("PlusLine",(r,a,l)=>new rt().add(new dt(0,l/2,!1).add(new ct(2,a,l/2)).add(new ct(1,a/2,0)).add(new ct(2,a/2,l)))),A("XLine",(r,a,l)=>new rt().add(new dt(0,l,!1).add(new ct(2,a,0)).add(new ct(1,0,0)).add(new ct(2,a,l)))),A("LineRight",(r,a,l)=>new rt().add(new dt(.25*a,0,!1).add(new ct(2,.75*a,.5*l)).add(new ct(2,.25*a,l)))),A("LineDown",(r,a,l)=>new rt().add(new dt(0,.25*l,!1).add(new ct(2,.5*a,.75*l)).add(new ct(2,a,.25*l)))),A("LineLeft",(r,a,l)=>new rt().add(new dt(.75*a,0,!1).add(new ct(2,.25*a,.5*l)).add(new ct(2,.75*a,l)))),A("LineUp",(r,a,l)=>new rt().add(new dt(0,.75*l,!1).add(new ct(2,.5*a,.25*l)).add(new ct(2,a,.75*l)))),A("Capsule",(r,a,l)=>{const u=new rt;if(a<l){const c=a/2,f=new dt(0,c,!0);u.add(f),f.add(new ct(5,180,180,c,c,c,c)),f.add(new ct(2,a,l-c)),f.add(new ct(5,0,180,c,l-c,c,c)),f.add(new ct(2,0,c));const m=isFinite(r.parameter1)?r.parameter1:a*.156;return u.spot1=new z(0,0,0,m),u.spot2=new z(1,1,0,-m),u}else if(a>l){const c=l/2,f=new dt(c,0,!0);u.add(f),f.add(new ct(2,a-c,0)),f.add(new ct(5,270,180,a-c,c,c,c)),f.add(new ct(2,c,l)),f.add(new ct(5,90,180,c,c,c,c));const m=isFinite(r.parameter1)?r.parameter1:l*.156;return u.spot1=new z(0,0,m,0),u.spot2=new z(1,1,-m,0),u}else return u.type=3,u.endX=a,u.endY=l,u.spot1=z.Rk,u.spot2=z.vk,u});const t=(r,a)=>new dt(r,a,!1,!1),n=(r,a,l)=>r.add(new ct(2,a,l)),i=(r,a,l)=>r.add(new ct(1,a,l));A("Borders",(r,a,l)=>{let u=r?r.parameter1:NaN;isNaN(u)?u=10:u=u&15;const c=new rt;let f;return u===10?(f=t(a,0),n(f,a,l),i(f,0,l),n(f,0,0)):u===5?(f=t(0,0),n(f,a,0),i(f,a,l),n(f,0,l)):u===1?(f=t(0,0),n(f,a,0),i(f,a,l)):u===2?(f=t(a,0),n(f,a,l)):u===4?(f=t(a,l),n(f,0,l)):u===8?(f=t(0,l),n(f,0,0),i(f,a,l)):u===3?(f=t(0,0),n(f,a,0),n(f,a,l)):u===6?(f=t(a,0),n(f,a,l),n(f,0,l)):u===12?(f=t(a,l),n(f,0,l),n(f,0,0)):u===9?(f=t(0,l),n(f,0,0),n(f,a,0)):u===7?(f=t(0,0),n(f,a,0),n(f,a,l),n(f,0,l)):u===14?(f=t(a,0),n(f,a,l),n(f,0,l),n(f,0,0)):u===13?(f=t(a,l),n(f,0,l),n(f,0,0),n(f,a,0)):u===11?(f=t(0,l),n(f,0,0),n(f,a,0),n(f,a,l)):u===15?(f=t(0,0),n(f,a,0),n(f,a,l),n(f,0,l),f.add(new ct(2,0,0).close())):(f=t(0,0),i(f,a,l)),c.add(f),c})}R.Yg={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};var o0=(A=>(A[A.None=0]="None",A[A.Added=1]="Added",A[A.Removed=2]="Removed",A[A.Shown=4]="Shown",A[A.Hidden=8]="Hidden",A[A.NodeSized=16]="NodeSized",A[A.GroupLayout=32]="GroupLayout",A[A.NodeReplaced=64]="NodeReplaced",A[A.Standard=127]="Standard",A[A.All=16777215]="All",A))(o0||{});const Ye=class Ye extends Kt{constructor(t,n){let i;t===void 0||t instanceof de||typeof t=="string"?i=t:t&&(n=t);super(i);v(this,"P");v(this,"Ho");v(this,"F");v(this,"rl");v(this,"ll");v(this,"qo");v(this,"hi");v(this,"Wo");v(this,"ph");v(this,"js");v(this,"Jo");v(this,"Ad");v(this,"BS");v(this,"UA");v(this,"Up");v(this,"Vp");this.P=2408959,this.Ho="",this.F=null,this.rl="",this.ll=null,this.qo=null,this.hi="",this.Wo=null,this.ph=null,this.js=new T(NaN,NaN).g(),this.Jo=null,this.Ad=NaN,this.BS=-1,this.UA=new I,this.Up=null,this.Vp=NaN,n&&Object.assign(this,n)}cloneProtected(t){super.cloneProtected(t),t.P=this.P&-4097|16384|32768,t.Ho=this.Ho,this.F!==null&&(this.F.gi?t.F=this.F:t.F=this.F.copy()),t.rl=this.rl,t.qo=null,t.hi=this.hi,t.js.a(this.js),t.Ad=this.Ad}Vo(t){super.Vo(t),t.ch(),t.ll=null,t.Jo=null,t.Up=null}toString(){let t=o.sn(this.constructor)+"#"+L.as(this);return this.data!==null&&(t+="("+o.toString(this.data)+")"),t}qi(){this.F===null?this.F=new sd:this.F.gi&&(this.F=this.F.copy())}lh(){super.lh(),this.F!==null&&(this.F.gi=!0)}Jc(t,n,i,r,a,l,u){const c=this.diagram;c!==null&&(t===3&&n==="elements"?a instanceof Kt?a.Hr(f=>{c.partManager.SM(f,c)}):a instanceof Vi&&c.TM(a):t===4&&n==="elements"&&(a instanceof Kt?a.Hr(f=>c.partManager.MM(f,c)):a instanceof Vi&&c.DM(a)),c.raiseChangedEvent(t,n,i,r,a,l,u))}updateTargetBindings(t){if(super.updateTargetBindings(t),this.data===null)return;const n=this.L.r,i=n.length;for(let a=0;a<i;a++){const l=n[a];l instanceof Kt&&l.Hr(u=>{u.data!==null&&u.updateTargetBindings()})}const r=this.adornments;for(;r.next();)r.value.updateTargetBindings(t)}Io(){if(super.Io(),this.d2()){const n=this.L.r,i=n.length;for(let r=0;r<i;r++){const a=n[r];a instanceof Kt&&a.Hr(l=>l.Io())}}const t=this.adornments;for(;t.next();)t.value.Io()}updateRelationshipsFromData(){var t;this.data!==null&&((t=this.diagram)==null||t.partManager.updateRelationshipsFromData(this))}get key(){const t=this.diagram;if(t!==null)return t.model.getKeyForNodeData(this.data)}get adornments(){return this.qo===null?g.instance:this.qo.iteratorValues}findAdornment(t){const n=this.qo;return n===null?null:n.get(t)}addAdornment(t,n){if(n===null)return;let i=null,r=this.qo;if(r!==null&&(i=r.get(t)),i!==n){if(i!==null){const l=i.diagram;l!==null&&l.remove(i)}r===null&&(r=new W,this.qo=r),n.Ho!==t&&(n.category=t),r.set(t,n);const a=this.diagram;if(a!==null){a.add(n);const l=n.adornedObject;if(l!==null){const u=l.findBindingPanel();u!==null&&(n.data=u.data)}}}}removeAdornment(t){const n=this.qo;if(n===null)return;const i=n.get(t);if(i!==null){const r=i.diagram;r!==null&&(r.remove(i),i.data=null)}n.delete(t),n.count===0&&(this.qo=null)}clearAdornments(){const t=this.qo;if(t===null)return;const n=o.nt(),i=t.iterator;for(;i.next();){const a=i.key;n.push(a)}const r=n.length;for(let a=0;a<r;a++)this.removeAdornment(n[a]);o.tt(n)}updateAdornments(){const t=this.diagram;if(t===null)return;this.Rv(t),this.vv(t);let n=this.adornments;for(;n.next();){const i=n.value;i.c(),i.hasPlaceholder()&&i.placeholder.c()}for(n=this.adornments;n.next();)n.value.updateTargetBindings()}invalidateAdornments(){const t=this.diagram;t!==null&&(t.Ql(),this.VA()!==!0&&this.zA(!0))}US(){this.VA()!==!1&&(this.updateAdornments(),this.zA(!1))}Rv(t){const n="Selection";if(this.isSelected&&this.selectionAdorned){const i=this.selectionObject;if(i!==null&&this.actualBounds.isReal()&&this.isVisible()&&i.isVisibleObject()&&i.actualBounds.isReal()){let r=this.findAdornment(n);if(r===null){let a=this.selectionAdornmentTemplate;if(a===null&&(this.Nl()?a=t.linkSelectionAdornmentTemplate:this instanceof Vt?a=t.groupSelectionAdornmentTemplate:a=t.nodeSelectionAdornmentTemplate),!(a instanceof ie))return;a.li(),r=a.copy(),r!==null&&(this.Nl()&&this.selectionObject===this.path&&(r.type=Kt.Link),r.adornedObject=i)}if(r!==null){r.type===Kt.Link&&r.c(),this.addAdornment(n,r);return}}}this.removeAdornment(n)}vv(t){const n=this;t.toolManager.mouseDownTools.each(i=>{i.isEnabled&&i.updateAdornments(n)}),t.toolManager.updateAdornments(n)}IS(t){this.Wo=t,t===null&&this.DR()}get layer(){return this.Wo}get diagram(){const t=this.Wo;return t==null?null:t.diagram}get layerName(){return this.rl}set layerName(t){const n=this.rl;if(n===t)return;o.i(t,"string",Ye,"layerName");let i=this.diagram;if(i!==null&&(i.findLayer(t)===null||i.partManager.addsToTemporaryLayer))return;this.rl=t,i!==null&&i.invalidateDocumentBounds(),this.t("layerName",n,t);const r=this.layer;if(r===null||r.name===t||(i=r.diagram,i===null))return;const a=i.findLayer(t);if(a===null||a===r)return;let l=r.te(-1,this,!0);l>=0&&i.raiseChangedEvent(4,"parts",r,this,null,l,!0),l=a.qh(99999999,this,!0),r.visible!==a.visible&&this.Ei(a.visible),l>=0&&i.raiseChangedEvent(3,"parts",a,null,this,!0,l);const u=this.layerChanged;if(u===null)return;const c=i.Y;i.Y=!0,u(this,r,a),i.Y=c}get layerChanged(){return this.F!==null?this.F.zp:null}set layerChanged(t){const n=this.layerChanged;n!==t&&(t!==null&&o.i(t,"function",Ye,"layerChanged"),this.qi(),this.F.zp=t,this.t("layerChanged",n,t))}get zOrder(){return this.Ad}set zOrder(t){const n=this.Ad;if(n===t)return;o.i(t,"number",Ye,"zOrder"),this.Ad=t;const i=this.layer;i!==null&&i.yx(-1,this),this.t("zOrder",n,t);const r=this.diagram;r!==null&&r.C()}Ov(){const t=this.layer;t!==null&&t.yx(-1,this)}o1(){if(this.th()!==!1)return;this.K2(!0),this.Qc();const t=this.diagram;t!==null&&(t.r0(this),t.requestUpdate())}XA(){if(this.P|=2097152,this.th()===!1)return;const t=this.position,n=this.location;(!n.isReal()||!t.isReal())&&this.KA(t,n);const i=this.Li,r=I.l().a(i);i.ot(),i.x=t.x,i.y=t.y,i.g(),this.ed(r,i),I.s(r),this.K2(!1),this.Qc()}Qn(t,n,i,r){const a=this.se;a.e(t,n,i,r),this.bi===null&&(this.bi=new nt);const l=this.bi;l.Ri(),this.y0(l,t,n,i,r),this.bi=l,l.Ok()||l.xw(a)}y0(t,n,i,r,a){if(this.et!==1&&t.et(this.et),this.Xt===0)return;let l=z.Center;this.locationSpot.isSpot()&&(l=this.locationSpot);const u=T.l();if(this.locationObject!==this){const c=this.locationObject,f=c.naturalBounds;u.setSpot(f.x,f.y,f.width,f.height,l),c.bi!==null&&c.bi.xt(u),u.offset(-c.measuredBounds.x,-c.measuredBounds.y);let m=c.panel;for(;m!==null&&m!==this;)m.bi!==null&&m.bi.xt(u),u.offset(-m.measuredBounds.x,-m.measuredBounds.y),m=m.panel}else u.setSpot(n,i,r,a,l);t.cs(this.Xt,u.x,u.y),T.s(u)}get locationObject(){if(this.Jo===null)if(this instanceof ie&&this.type!==Kt.Link&&this.hasPlaceholder())this.Jo=this.placeholder;else{const t=this.locationObjectName;if(t!==""){const n=this.findObject(t);n!==null?this.Jo=n:this.Jo=this}else this.Jo=this}return this.Jo.visible?this.Jo:this}get minLocation(){return this.F!==null?this.F.Xp:T.$N}set minLocation(t){const n=this.minLocation;n.equals(t)||(t=t.N(),this.qi(),this.F.Xp=t,this.t("minLocation",n,t))}get maxLocation(){return this.F!==null?this.F.Kp:T.ZN}set maxLocation(t){const n=this.maxLocation;n.equals(t)||(t=t.N(),this.qi(),this.F.Kp=t,this.t("maxLocation",n,t))}get locationObjectName(){return this.F!==null?this.F.Yp:""}set locationObjectName(t){const n=this.locationObjectName;n!==t&&(this.qi(),this.F.Yp=t,this.Jo=null,this.c(),this.t("locationObjectName",n,t))}get locationSpot(){return this.F!==null?this.F.Gp:z.TopLeft}set locationSpot(t){const n=this.locationSpot;n.equals(t)||(t=t.N(),this.qi(),this.F.Gp=t,this.c(),this.t("locationSpot",n,t))}move(t,n){n===!0?this.location=t:this.position=t}moveTo(t,n,i){const r=T.X(t,n);this.move(r,i),T.s(r)}isVisible(){if(!this.visible)return!1;const t=this.layer;if(t!==null){if(!t.visible)return!1;const i=t.diagram;if(i!==null&&i.animationManager.nx(this))return!0}const n=this.containingGroup;return!(n!==null&&(!n.isSubGraphExpanded||!n.isVisible()))}Ei(t){const n=this.diagram;t?(this.invalidateLayout(4),this.invalidateAdornments(),n!==null&&n.r0(this)):(this.invalidateLayout(8),this.clearAdornments()),this.ch(),n!==null&&(n.invalidateDocumentBounds(),n.C())}findObject(t){if(this.name===t)return this;let n=this.Up;if(n===null&&(this.Up=n=new W),n.get(t)!==null)return n.get(t);const i=super.findObject(t);return i!==null?(n.set(t,i),i):(n.set(t,null),null)}D0(){this.Up=null}getRelativePoint(t,n,i){i===void 0&&(i=new T);const r=n.isNoSpot()?z.Center:n,a=t.naturalBounds;if(i.e(a.width*r.x+r.offsetX,a.height*r.y+r.offsetY),t===null||t===this)return i;t.D.xt(i);let l=t.panel;for(;l!==null&&l!==this;)l.D.xt(i),l=l.panel;return this.bi!==null&&this.bi.xt(i),i.offset(-this.se.x,-this.se.y),i}getDocumentBounds(t){return t===void 0&&(t=new I),t.a(this.actualBounds)}ensureBounds(){this.ut(1/0,1/0),this.zt()}pA(t){const n=this.locationSpot,i=this.locationObject;let r=i.naturalBounds;r.isReal()||(r=I.pw);const a=i instanceof Qt?i.strokeWidth:0;if(t.setSpot(0,0,r.width+a,r.height+a,n),i!==this){t.offset(-a/2,-a/2),i.D.xt(t);let l=i.panel;for(;l!==null&&l!==this;)l.D.xt(t),l=l.panel}return this.bi!==null&&this.bi.xt(t),t.offset(-this.se.x,-this.se.y),t}Hh(t,n){const i=n===void 0?this.UA:n,r=this.Iv(),a=r*2;if(!this.isShadowed)return i.e(t.x-1-r,t.y-1-r,t.width+2+a,t.height+2+a),i;let l=t.x,u=t.y,c=t.width,f=t.height;const m=this.shadowBlur,p=this.shadowOffset;return c+=m,f+=m,l-=m/2,u-=m/2,p.x>0?c+=p.x:(l+=p.x,c-=p.x),p.y>0?f+=p.y:(u+=p.y,f-=p.y),i.e(l-1,u-1,c+2,f+2),i}yv(){return this.type===Kt.Link&&this instanceof ie&&this.category==="Selection"&&this.adornedObject instanceof Qt&&this.adornedPart.findMainElement()===this.adornedObject?this.adornedObject.strokeWidth:0}Iv(){return isNaN(this.Vp)&&(this.Vp=this.SA()),this.Vp}ff(){this.Vp=NaN}zt(){if(this.is()===!1){this.XA();return}this._n(!1);const t=this.Li,n=I.l();n.a(t);const i=this.Ml();this.ah(0,0,this.se.width,this.se.height);const r=this.position;this.KA(r,this.location),t.ot(),t.x=r.x,t.y=r.y,t.g(),this.ed(n,t),n.equals(t)?this.Bs(i):this.Pe()&&(!R.u(n.width,t.width)||!R.u(n.height,t.height))&&this.BS>=0&&this.invalidateLayout(16),I.s(n),this.K2(!1)}ed(t,n){const i=this.diagram;if(i===null)return;let r=!1;if(i.Zh===!1&&t.isReal()){const a=I.l();a.a(i.documentBounds),a.subtractMargin(i.padding),t.x>a.x&&t.y>a.y&&t.right<a.right&&t.bottom<a.bottom&&n.x>a.x&&n.y>a.y&&n.right<a.right&&n.bottom<a.bottom&&(r=!0),I.s(a)}(this.Ev()===!0||!t.equals(n))&&this.ML(r,i),i.C(),!(!t.isReal()&&!n.isReal()||t.equalsApproxClose(n))&&(this instanceof It&&!i.undoManager.isUndoingRedoing&&this.invalidateConnectedLinks(),this.ch())}get location(){return this.js}set location(t){const n=t.x,i=t.y,r=this.js;(r.x!==n&&(!isNaN(r.x)||!isNaN(n))||r.y!==i&&(!isNaN(r.y)||!isNaN(i)))&&(t=t.copy(),this.Bv(t,r)&&this.t("location",r,t.copy()))}Bv(t,n){if(this.Nl())return!1;if(this.js=t,this.P|=2097152,this.is()===!1){this.o1();const i=this.at;if(i.isReal()){const r=this.diagram;if(r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing){const a=i.copy();i.e(i.x+(t.x-n.x),i.y+(t.y-n.y)),this.YA(r,i,a.x,a.y),this.t("position",a,i.copy())}}}return!0}c2(t,n,i){if(this.Nl()||!t.isReal())return!1;const r=this.diagram;if(r!==null&&this.YA(r,t,n,i),this.at=t,this.P&=-2097153,this.js.isReal()&&(r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing)){const a=this.js;this.js=new T(a.x+(t.x-n),a.y+(t.y-i)),this.t("location",a,this.js.copy())}return this.th()===!1&&this.is()===!1&&(this.o1(),this.XA()),!0}YA(t,n,i,r){if(t===null||this instanceof ie)return;const a=t.animationManager;a.wi&&a.qC(this,new T(i,r),n,!1)}bc(t,n,i){const r=this.js,a=this.at;if(i){if(r.x===t&&r.y===n)return;this.th()||this.is()?a.e(NaN,NaN):a.e(a.x+t-r.x,a.y+n-r.y),r.e(t,n)}else{if(a.x===t&&a.y===n)return;r.e(r.x+t-a.x,r.y+n-a.y),a.e(t,n)}this.o1()}f2(){this.P&=-2097153,this.o1()}KA(t,n){const i=this.pA(T.l()),r=this.diagram,a=n.isReal(),l=t.isReal();a&&l?this.P&2097152?this.GA(t,n,r,i):this.jA(t,n,r,i):a?this.GA(t,n,r,i):l&&this.jA(t,n,r,i),this.P|=2097152,T.s(i),this.Qc()}GA(t,n,i,r){const a=t.x,l=t.y;if(t.e(n.x-r.x,n.y-r.y),i!==null){const u=i.animationManager,c=u.defaultAnimation.isAnimating;!c&&u.wi&&!(this instanceof ie)&&u.qC(this,new T(a,l),t,!1),!c&&!(t.x===a&&t.y===l)&&this.t("position",new T(a,l),t.copy())}}jA(t,n,i,r){const a=n.copy();n.e(t.x+r.x,t.y+r.y),!n.equals(a)&&i!==null&&this.t("location",a,n.copy())}ML(t,n){this.s2(!1),this instanceof It&&n.EM(this),!this.layer.isTemporary&&!t&&n.invalidateDocumentBounds();const i=this.Li,r=n.viewportBounds;r.isReal()?this.Ml()?(i.intersectsRectPlus(r,10)||this.Bs(!1),this.updateAdornments()):this.isVisible()&&i.intersectsRect(r)?(this.Bs(!0),this.updateAdornments()):this.invalidateAdornments():n.Ec=!0}jr(){return!0}Pe(){return!0}Nl(){return!1}Xs(){return!0}hasPlaceholder(){return!1}get category(){return this.Ho}set category(t){const n=this.Ho;if(n===t)return;this.svg!==null&&(this.svg.remove(),this.ss(!0)),o.i(t,"string",Ye,"category");const i=this.diagram,r=this.data;let a=null;if(i!==null&&r!==null&&!(this instanceof ie)){const l=i.model.undoManager;l.isEnabled&&!l.isUndoingRedoing&&(a=this.clone(),a.L.addAll(this.L))}if(this.Ho=t,this.t("category",n,t),i!==null&&r!==null&&!(this instanceof ie)){const l=i.model;if(l.undoManager.isUndoingRedoing)return;if(this.Nl()){i.partManager.setLinkCategoryForData(r,t);const u=i.partManager.findLinkTemplateForCategory(t);if(u!==null){u.li();const c=u.copy();c!==null&&this.Y2(c,n,t)}}else{l!==null&&l.setCategoryForNodeData(r,t);const u=i.partManager.findTemplateForNodeData(r,t);if(u!==null){u.li();const c=u.copy();if(c!==null&&!(c instanceof Gt)){const f=this.location.copy();this.Y2(c,n,t),this.location.isReal()||(this.location=f)}}}if(a!==null){const u=this.clone();u.L.addAll(this.L),this.t("self",a,u)}}else if(this instanceof ie){const l=this.adornedPart;if(l!==null){const u=l.qo;u!==null&&u.delete(n),l.addAdornment(this.category,this)}}}get self(){return this}set self(t){this.Y2(t,this.category,t.category)}Y2(t,n,i){t.constructor!==this.constructor&&(Ye.HA||(Ye.HA=!0,o.ii('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),o.ii("  Old class: "+o.sn(this.constructor)+", new class: "+o.sn(t.constructor)+", part: "+this.toString()))),this.clearAdornments();const r=this.data,a=this.layerName,l=this.isSelected,u=this.isHighlighted;let c=!0,f=!0,m=!1;this instanceof It&&(c=this.isTreeLeaf,f=this.isTreeExpanded,m=this.wasTreeExpanded),t.Vo(this),t.cloneProtected(this),this.Ho=i,this.svg!==null&&(this.svg.remove(),this.svg=null,this.ss(!0)),this.c(),this.C();const p=this.diagram;let y=!0;p!==null&&(y=p.skipsUndoManager,p.skipsUndoManager=!0),this.Qt=r,this.P=l?this.P|4096:this.P&-4097,this.P=u?this.P|524288:this.P&-524289,this instanceof It&&(this.E=c?this.E|4:this.E&-5,this.E=f?this.E|1:this.E&-2,this.E=m?this.E|2:this.E&-3),r!==null&&this.updateTargetBindings();const w=this.layerName;w!==a&&(this.rl=a,this.layerName=w),p!==null&&(p.skipsUndoManager=y),this.Pe()&&this.invalidateLayout(64)}canCopy(){if(!this.copyable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowCopy)return!1;const n=t.diagram;return n===null?!0:!!n.allowCopy}canDelete(){if(!this.deletable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowDelete)return!1;const n=t.diagram;return n===null?!0:!!n.allowDelete}canEdit(){if(!this.textEditable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowTextEdit)return!1;const n=t.diagram;return n===null?!0:!!n.allowTextEdit}canGroup(){if(!this.groupable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowGroup)return!1;const n=t.diagram;return n===null?!0:!!n.allowGroup}canMove(){if(!this.movable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowMove)return!1;const n=t.diagram;return n===null?!0:!!n.allowMove}canReshape(){if(!this.reshapable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowReshape)return!1;const n=t.diagram;return n===null?!0:!!n.allowReshape}canResize(){if(!this.resizable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowResize)return!1;const n=t.diagram;return n===null?!0:!!n.allowResize}canRotate(){if(!this.rotatable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowRotate)return!1;const n=t.diagram;return n===null?!0:!!n.allowRotate}canSelect(){if(!this.selectable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowSelect)return!1;const n=t.diagram;return n===null?!0:!!n.allowSelect}get copyable(){return(this.P&1)!==0}set copyable(t){const n=(this.P&1)!==0;n!==t&&(this.P=this.P^1,this.t("copyable",n,t))}get deletable(){return(this.P&2)!==0}set deletable(t){const n=(this.P&2)!==0;n!==t&&(this.P=this.P^2,this.t("deletable",n,t))}get textEditable(){return(this.P&4)!==0}set textEditable(t){const n=(this.P&4)!==0;n!==t&&(this.P=this.P^4,this.t("textEditable",n,t),this.invalidateAdornments())}get groupable(){return(this.P&8)!==0}set groupable(t){const n=(this.P&8)!==0;n!==t&&(this.P=this.P^8,this.t("groupable",n,t))}get movable(){return(this.P&16)!==0}set movable(t){const n=(this.P&16)!==0;n!==t&&(this.P=this.P^16,this.t("movable",n,t))}get selectionAdorned(){return(this.P&32)!==0}set selectionAdorned(t){const n=(this.P&32)!==0;n!==t&&(this.P=this.P^32,this.t("selectionAdorned",n,t),this.invalidateAdornments())}get isInDocumentBounds(){return(this.P&64)!==0}set isInDocumentBounds(t){const n=(this.P&64)!==0;if(n!==t){this.P=this.P^64;const i=this.diagram;i!==null&&i.invalidateDocumentBounds(),this.t("isInDocumentBounds",n,t)}}get isLayoutPositioned(){return(this.P&128)!==0}set isLayoutPositioned(t){const n=(this.P&128)!==0;n!==t&&(this.P=this.P^128,this.t("isLayoutPositioned",n,t),this.invalidateLayout(t?4:8))}get selectable(){return(this.P&256)!==0}set selectable(t){const n=(this.P&256)!==0;n!==t&&(this.P=this.P^256,this.t("selectable",n,t),this.invalidateAdornments())}get reshapable(){return(this.P&512)!==0}set reshapable(t){const n=(this.P&512)!==0;n!==t&&(this.P=this.P^512,this.t("reshapable",n,t),this.invalidateAdornments())}get resizable(){return(this.P&1024)!==0}set resizable(t){const n=(this.P&1024)!==0;n!==t&&(this.P=this.P^1024,this.t("resizable",n,t),this.invalidateAdornments())}get rotatable(){return(this.P&2048)!==0}set rotatable(t){const n=(this.P&2048)!==0;n!==t&&(this.P=this.P^2048,this.t("rotatable",n,t),this.invalidateAdornments())}get isSelected(){return(this.P&4096)!==0}set isSelected(t){const n=(this.P&4096)!==0;if(n!==t){const i=this.diagram;if(t){if(!this.canSelect())return;if(i!==null){const l=i.maxSelectionCount;if(i.selection.count>=l)return}}this.P=this.P^4096;let r=!1;if(i!==null){r=i.skipsUndoManager,i.skipsUndoManager=!0;const l=i.selection;l.ot(),t?l.add(this):l.delete(this),l.g()}this.t("isSelected",n,t),this.invalidateAdornments();const a=this.selectionChanged;a!==null&&a(this),i!==null&&(i.requestUpdate(),i.skipsUndoManager=r)}}get isHighlighted(){return(this.P&524288)!==0}set isHighlighted(t){const n=(this.P&524288)!==0;if(n!==t){this.P=this.P^524288;const i=this.diagram;if(i!==null){const a=i.highlighteds;a.ot(),t?a.add(this):a.delete(this),a.g()}this.t("isHighlighted",n,t),this.C();const r=this.highlightedChanged;r!==null&&r(this)}}get isShadowed(){return(this.P&8192)!==0}set isShadowed(t){const n=(this.P&8192)!==0;n!==t&&(this.P=this.P^8192,this.ss(!0),this.t("isShadowed",n,t),this.C())}VA(){return(this.P&16384)!==0}zA(t){t?this.P|=16384:this.P&=-16385}th(){return(this.P&32768)!==0}K2(t){t?this.P|=32768:this.P&=-32769}Ev(){return(this.P&65536)!==0}s2(t){t?this.P|=65536:this.P&=-65537}Ml(){return(this.P&131072)!==0}Bs(t){t?this.P|=131072:this.P&=-131073}qA(){return(this.P&1048576)!==0}l1(t){t?this.P|=1048576:this.P&=-1048577}get isAnimated(){return(this.P&262144)!==0}set isAnimated(t){const n=(this.P&262144)!==0;n!==t&&(this.P=this.P^262144,this.t("isAnimated",n,t))}get highlightedChanged(){return this.F!==null?this.F.jp:null}set highlightedChanged(t){const n=this.highlightedChanged;n!==t&&(t!==null&&o.i(t,"function",Ye,"highlightedChanged"),this.qi(),this.F.jp=t,this.t("highlightedChanged",n,t))}get selectionObjectName(){return this.F!==null?this.F.Hp:""}set selectionObjectName(t){const n=this.selectionObjectName;n!==t&&(this.qi(),this.F.Hp=t,this.ll=null,this.t("selectionObjectName",n,t))}get selectionAdornmentTemplate(){return this.F!==null?this.F.qp:null}set selectionAdornmentTemplate(t){const n=this.selectionAdornmentTemplate;n!==t&&(this.qi(),this.F.qp=t,this.t("selectionAdornmentTemplate",n,t))}get selectionObject(){if(this.ll===null){const t=this.selectionObjectName;if(t!==null&&t!==""){const n=this.findObject(t);n!==null?this.ll=n:this.ll=this}else if(this instanceof Gt){const n=this.path;n!==null?this.ll=n:this.ll=this}else this.ll=this}return this.ll}get selectionChanged(){return this.F!==null?this.F.Wp:null}set selectionChanged(t){const n=this.selectionChanged;n!==t&&(t!==null&&o.i(t,"function",Ye,"selectionChanged"),this.qi(),this.F.Wp=t,this.t("selectionChanged",n,t))}get resizeAdornmentTemplate(){return this.F!==null?this.F.Jp:null}set resizeAdornmentTemplate(t){const n=this.resizeAdornmentTemplate;n!==t&&(this.qi(),this.F.Jp=t,this.t("resizeAdornmentTemplate",n,t))}get resizeObjectName(){return this.F!==null?this.F.$p:""}set resizeObjectName(t){const n=this.resizeObjectName;n!==t&&(this.qi(),this.F.$p=t,this.t("resizeObjectName",n,t))}get resizeObject(){const t=this.resizeObjectName;if(t!==""){const n=this.findObject(t);if(n!==null)return n}return this}get resizeCellSize(){return this.F!==null?this.F.Zp:B.gw}set resizeCellSize(t){const n=this.resizeCellSize;n.equals(t)||(t=t.N(),this.qi(),this.F.Zp=t,this.t("resizeCellSize",n,t))}get rotateAdornmentTemplate(){return this.F!==null?this.F.Qp:null}set rotateAdornmentTemplate(t){const n=this.rotateAdornmentTemplate;n!==t&&(this.qi(),this.F.Qp=t,this.t("rotateAdornmentTemplate",n,t))}get rotateObjectName(){return this.F!==null?this.F._p:""}set rotateObjectName(t){const n=this.rotateObjectName;n!==t&&(this.qi(),this.F._p=t,this.t("rotateObjectName",n,t))}get rotateObject(){const t=this.rotateObjectName;if(t!==""){const n=this.findObject(t);if(n!==null)return n}return this}get rotationSpot(){return this.F!==null?this.F.ty:z.Default}set rotationSpot(t){const n=this.rotationSpot;n.equals(t)||(t=t.N(),this.qi(),this.F.ty=t,this.t("rotationSpot",n,t))}get text(){return this.hi}set text(t){const n=this.hi;n!==t&&(this.hi=t,this.t("text",n,t))}get containingGroup(){return this.ph}set containingGroup(t){if(this.Pe()){const n=this.ph;if(n!==t){t!==null&&(this===t||t.isMemberOf(this))&&(this===t&&o.o("Cannot make a Group a member of itself: "+this.toString()),o.o("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.invalidateLayout(2);const i=this.diagram;if(n!==null?n.G2(this):this instanceof Vt&&i!==null&&i.Yr.delete(this),this.ph=t,t!==null?t.j2(this):this instanceof Vt&&i!==null&&i.Yr.add(this),this.invalidateLayout(1),i!==null&&i.Y){const a=this.data,l=i.model;if(a!==null&&l.qc()){const u=t!==null?t.data:null;l.setGroupForData(a,l.getKeyForNodeData(u))}}const r=this.containingGroupChanged;if(r!==null){let a=!0;i!==null&&(a=i.Y,i.Y=!0),r(this,n,t),i!==null&&(i.Y=a)}if(this instanceof Vt){const a=new L;Ye.sh(a,this,!0,0,!0);const l=a.iterator;for(;l.next();){const u=l.value;if(u instanceof It){const c=u.linksConnected;for(;c.next();)c.value.Td()}}}if(this instanceof It){const a=this.linksConnected;for(;a.next();)a.value.Td();const l=this.labeledLink;l!==null&&l.Td()}this.t("containingGroup",n,t),t!==null&&t.Ov()}}else o.o("cannot set the Part.containingGroup of a Link or Adornment")}ch(){const t=this.containingGroup;t!==null&&(t.hasPlaceholder()&&t.placeholder.c(),t.c(),t.invalidateConnectedLinks())}C(){const t=this.diagram;t!==null&&!this.is()&&!this.th()&&this.isVisible()&&this.Li.isReal()&&t.C(this.Hh(this.Li))}c(){if(this.Oo())return;super.c();const t=this.diagram;t!==null&&(t.r0(this),this instanceof It&&this.labeledLink!==null&&this.labeledLink.sf(),t.requestUpdate(!0))}sf(t){if(this.is())return;const n=this.diagram;n!==null&&(n.r0(this),this instanceof It&&this.invalidateConnectedLinks(),n.requestUpdate()),this._n(!0)}Um(t){if(!t){const n=this.ph;n!==null&&n.j2(this)}}Vm(t){if(!t){const n=this.ph;n!==null&&n.G2(this)}}Kc(){const t=this.data;if(t!==null){const n=this.diagram;if(n!==null){const i=n.model;i!==null&&i.removeNodeData(t)}}}get containingGroupChanged(){return this.F!==null?this.F.iy:null}set containingGroupChanged(t){const n=this.containingGroupChanged;n!==t&&(t!==null&&o.i(t,"function",Ye,"containingGroupChanged"),this.qi(),this.F.iy=t,this.t("containingGroupChanged",n,t))}findSubGraphLevel(){return this.H2(this)}H2(t){const n=t.containingGroup;if(n!==null)return 1+this.H2(n);if(t instanceof It){const i=t.labeledLink;if(i!==null)return this.H2(i)}return 0}findTopLevelPart(){return this.q2(this)}q2(t){const n=t.containingGroup;if(n!==null)return this.q2(n);if(t instanceof It){const i=t.labeledLink;if(i!==null)return this.q2(i)}return t}get isTopLevel(){return!(this.containingGroup!==null||this instanceof It&&this.labeledLink!==null)}isMemberOf(t){return t instanceof Vt?this.W2(this,t):!1}W2(t,n){if(t===n||n===null)return!1;const i=t.containingGroup;if(i!==null&&(i===n||this.W2(i,n)))return!0;if(t instanceof It){const r=t.labeledLink;if(r!==null)return this.W2(r,n)}return!1}findCommonContainingGroup(t){if(t===null)return null;if(this===t)return this.containingGroup;let n=this;for(;n!==null;){if(n instanceof Vt&&n.l1(!0),n instanceof It){const r=n.labeledLink;r!==null&&(n=r)}n=n.containingGroup}let i=null;for(n=t;n!==null;){if(n.qA()){i=n;break}if(n instanceof It){const r=n.labeledLink;r!==null&&(n=r)}n=n.containingGroup}for(n=this;n!==null;){if(n instanceof Vt&&n.l1(!1),n instanceof It){const r=n.labeledLink;r!==null&&(n=r)}n=n.containingGroup}return i}get layoutConditions(){return this.F!==null?this.F.ey:127}set layoutConditions(t){const n=this.layoutConditions;n!==t&&(this.qi(),this.F.ey=t,this.t("layoutConditions",n,t))}canLayout(){if(!this.isLayoutPositioned||!this.isVisible())return!1;const t=this.layer;return!(t!==null&&t.isTemporary||this instanceof It&&this.isLinkLabel)}Uv(t){if(!this.isLayoutPositioned||!(t&this.layoutConditions))return!1;const n=this.layer;if(n!==null&&n.isTemporary||this instanceof It&&this.isLinkLabel)return!1;const i=this.diagram;return!(i!==null&&i.undoManager.isUndoingRedoing)}invalidateLayout(t){if(t===void 0&&(t=16777215),!this.Uv(t))return;const n=this.ph;if(n!==null){const i=n.layout;i!==null?i.invalidateLayout():n.invalidateLayout(t)}else{const i=this.diagram;if(i!==null){const r=i.layout;r!==null&&r.invalidateLayout()}}}NL(){if(!this.isVisible())return!1;const t=this.layer;return!(t!==null&&t.isTemporary)}static sh(t,n,i,r,a,l){if(l===void 0&&(l=null),!t.has(n)&&!(l!==null&&!l(n))&&!(n instanceof ie)){if(t.add(n),n instanceof It){if(i&&n instanceof Vt){const u=n.memberParts;for(;u.next();){const c=u.value;Ye.sh(t,c,i,r,a,l)}}if(a!==!1){const u=n.linksConnected;for(;u.next();){const c=u.value;if(t.has(c))continue;const f=c.fromNode,m=c.toNode,p=f===null||t.has(f),y=m===null||t.has(m);(a?p&&y:p||y)&&Ye.sh(t,c,i,r,a,l)}}if(r>1){const u=n.findTreeChildrenNodes();for(;u.next();){const c=u.value;Ye.sh(t,c,i,r-1,a,l)}}}else if(n instanceof Gt){const u=n.labelNodes;for(;u.next();){const c=u.value;Ye.sh(t,c,i,r,a,l)}}}}get dragComputation(){return this.F!==null?this.F.sy:null}set dragComputation(t){const n=this.dragComputation;n!==t&&(t!==null&&o.i(t,"function",Ye,"dragComputation"),this.qi(),this.F.sy=t,this.t("dragComputation",n,t))}get shadowOffset(){return this.F!==null?this.F.ny:T.QN}set shadowOffset(t){const n=this.shadowOffset;n.equals(t)||(t=t.N(),this.qi(),this.F.ny=t,this.C(),this.t("shadowOffset",n,t))}get shadowColor(){return this.F!==null?this.F.oy:"gray"}set shadowColor(t){const n=this.shadowColor;n!==t&&(this.qi(),this.F.oy=t,this.C(),this.t("shadowColor",n,t))}get shadowBlur(){return this.F!==null?this.F.xn:4}set shadowBlur(t){const n=this.shadowBlur;n!==t&&(this.qi(),this.F.xn=t,this.C(),this.t("shadowBlur",n,t))}};v(Ye,"LayoutNone",0),v(Ye,"LayoutAdded",1),v(Ye,"LayoutRemoved",2),v(Ye,"LayoutShown",4),v(Ye,"LayoutHidden",8),v(Ye,"LayoutNodeSized",16),v(Ye,"LayoutGroupLayout",32),v(Ye,"LayoutNodeReplaced",64),v(Ye,"LayoutStandard",127),v(Ye,"LayoutAll",16777215),v(Ye,"HA",!1);let xe=Ye;class sd{constructor(){v(this,"gi");v(this,"zp");v(this,"iy");v(this,"qp");v(this,"Hp");v(this,"Wp");v(this,"jp");v(this,"Jp");v(this,"$p");v(this,"Zp");v(this,"Qp");v(this,"_p");v(this,"ty");v(this,"Yp");v(this,"Gp");v(this,"Xp");v(this,"Kp");v(this,"sy");v(this,"ey");v(this,"ny");v(this,"oy");v(this,"xn");this.gi=!1,this.zp=null,this.iy=null,this.qp=null,this.Hp="",this.Wp=null,this.jp=null,this.Jp=null,this.$p="",this.Zp=B.gw,this.Qp=null,this._p="",this.ty=z.Default,this.Yp="",this.Gp=z.TopLeft,this.Xp=T.$N,this.Kp=T.ZN,this.sy=null,this.ey=127,this.ny=T.QN,this.oy="gray",this.xn=4}copy(){const e=new sd;return e.zp=this.zp,e.iy=this.iy,e.qp=this.qp,e.Hp=this.Hp,e.Wp=this.Wp,e.jp=this.jp,e.Jp=this.Jp,e.$p=this.$p,e.Zp=this.Zp.N(),e.Qp=this.Qp,e._p=this._p,e.ty=this.ty.N(),e.Yp=this.Yp,e.Gp=this.Gp.N(),e.Xp=this.Xp.N(),e.Kp=this.Kp.N(),e.sy=this.sy,e.ey=this.ey,e.ny=this.ny.N(),e.oy=this.oy,e.xn=this.xn,e}}class ie extends xe{constructor(t,n){let i;t===void 0||t instanceof de||typeof t=="string"?i=t:t&&(n=t);super(i);v(this,"us");v(this,"It");v(this,"JP");v(this,"$P");v(this,"af");this.P&=-257,this.rl="Adornment",this.us=null,this.JP=0,this.$P=!1,this.It=null,this.af=null,n&&Object.assign(this,n)}toString(){const t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")}updateRelationshipsFromData(){}cd(t){const n=this.adornedObject,i=n==null?void 0:n.part;if(!(i instanceof Gt)||!(n instanceof Qt))return;const r=i.path;let a=r.geometry;i.cd(t),a=r.geometry;const l=this.L.r,u=l.length;for(let c=0;c<u;c++){const f=l[c];f.isPanelMain&&f instanceof Qt&&(f.ct=a)}}hasPlaceholder(){return this.It!==null&&this.It.isVisibleObject()}get placeholder(){return this.It}get adornedObject(){return this.us}set adornedObject(t){const n=this.adornedPart;let i=null;t!==null&&(i=t.part),n!==null&&(t===null||n!==i)&&n.removeAdornment(this.category),this.us=t,i!==null&&i.addAdornment(this.category,this)}get adornedPart(){const t=this.us;return t!==null?t.part:null}jr(){const t=this.us;if(t===null)return!0;const n=t.part;return n===null||!n.is()}Pe(){return!1}get containingGroup(){return null}Jc(t,n,i,r,a,l,u){if(t===3&&n==="elements"){if(a instanceof $i)this.It===null&&(this.It=a);else if(a instanceof Kt){const c=a.findInVisualTree(f=>f instanceof $i);c instanceof $i&&this.It===null&&(this.It=c)}}else t===4&&n==="elements"&&this.It!==null&&(r===this.It?this.It=null:r instanceof Kt&&this.It.isContainedBy(r)&&(this.It=null));super.Jc(t,n,i,r,a,l,u)}updateAdornments(){}Kc(){}}var a0=(A=>(A[A.None=0]="None",A[A.Evenly=1]="Evenly",A[A.Packed=2]="Packed",A))(a0||{});const Ss=class Ss extends xe{constructor(t,n){let i;t===void 0||t instanceof de||typeof t=="string"?i=t:t&&(n=t);super(i);v(this,"E");v(this,"gt");v(this,"Pf");v(this,"hl");v(this,"yh");v(this,"ne");v(this,"_t");this.E=13,this.gt=null,this._t=new M,this.Pf=null,this.hl=null,this.ne=null,this.yh=!1,n&&Object.assign(this,n)}cloneProtected(t){super.cloneProtected(t),t.E=this.E,this.gt!==null&&(this.gt.gi?t.gt=this.gt:t.gt=this.gt.copy())}Vo(t){super.Vo(t),t.invalidateConnectedLinks(),t.hl=this.hl,t.ne=null}al(){this.gt===null?this.gt=new rd:this.gt.gi&&(this.gt=this.gt.copy())}lh(){super.lh(),this.gt!==null&&(this.gt.gi=!0)}WA(t){t!==null&&(this.hl===null&&(this.hl=new L),this.hl.add(t))}JA(t){t!==null&&this.hl!==null&&this.hl.delete(t)}$A(t,n,i){if(t===null||this.hl===null)return null;const r=this.hl.iterator;for(;r.next();){const a=r.value;if(a.ry===this&&a.h1===t&&a.J2===n&&a.$2===i||a.ry===t&&a.h1===this&&a.J2===i&&a.$2===n)return a}return null}invalidateLinkBundle(t,n,i){n==null&&(n=""),i==null&&(i="");const r=this.$A(t,n,i);r!==null&&r.Dd()}Jc(t,n,i,r,a,l,u){t===3&&n==="elements"?this.ne=null:t===4&&n==="elements"&&(this.ne=null),super.Jc(t,n,i,r,a,l,u)}invalidateConnectedLinks(t){const n=this.linksConnected;for(;n.next();){const i=n.value;t!==void 0&&t.has(i)||(this.Wi(i.fromPort),this.Wi(i.toPort),i.invalidateRoute())}}tA(t){const n=this.linksConnected;for(;n.next();){const i=n.value;i.fromPort!==t&&i.toPort!==t||(this.Wi(i.fromPort),this.Wi(i.toPort),i.invalidateRoute())}}Wi(t){if(t===null)return;const n=t.Zu;n!==null&&n.Dd();const i=t.part,r=i.containingGroup;r!==null&&!i.isVisible()&&r.Wi(r.port)}jr(){return!0}get portSpreading(){return this.gt!==null?this.gt.ly:1}set portSpreading(t){const n=this.portSpreading;if(n!==t){this.al(),this.gt.ly=t,this.t("portSpreading",n,t);const i=this.diagram;if(i!==null&&i.undoManager.isUndoingRedoing)return;this.invalidateConnectedLinks()}}get avoidable(){return(this.E&8)!==0}set avoidable(t){const n=(this.E&8)!==0;if(n!==t){this.E=this.E^8;const i=this.diagram;i!==null&&i.EM(this),this.t("avoidable",n,t)}}get avoidableMargin(){return this.gt!==null?this.gt.hy:tt.oC}set avoidableMargin(t){typeof t=="number"&&(t=new tt(t));const n=this.avoidableMargin;if(!n.equals(t)){t=t.N(),this.al(),this.gt.hy=t;const i=this.diagram;i!==null&&i.EM(this),this.t("avoidableMargin",n,t)}}canAvoid(){return this.avoidable&&!this.isLinkLabel}getAvoidableRect(t){return t.set(this.actualBounds),t.addMargin(this.avoidableMargin),t}findVisibleNode(){let t=this;for(;t!==null&&!t.isVisible();)t=t.containingGroup;return t}isVisible(){if(!super.isVisible())return!1;let t=!0,n=1;const i=this.diagram;if(i!==null){if(i.animationManager.nx(this))return!0;t=i.isTreePathToChildren,n=i.treeCollapsePolicy}if(n===1){const a=this.findTreeParentNode();if(a!==null&&!a.isTreeExpanded)return!1}else if(n===2){const a=t?this.findLinksInto():this.findLinksOutOf();let l=!1,u=!1;for(;a.next();){const c=a.value;if(c.isTreeLink){l=!0;const f=t?c.fromNode:c.toNode;if(f&&f.isTreeExpanded){u=!0;break}}}if(l&&!u)return!1}else if(n===3){const a=t?this.findLinksInto():this.findLinksOutOf();let l=!1,u=!1;for(;a.next();){const c=a.value;if(c.isTreeLink){l=!0;const f=t?c.fromNode:c.toNode;if(f&&!f.isTreeExpanded){u=!0;break}}}if(l&&u)return!1}const r=this.labeledLink;return r!==null?r.isVisible():!0}Ei(t){super.Ei(t);const n=this.linksConnected;for(;n.next();){const i=n.value;if(t&&this.containingGroup!==null){const r=i.getOtherNode(this);r!==null&&!r.isMemberOf(this.containingGroup)&&i.invalidateRoute()}i.Ei(t)}}get linksConnected(){return this._t.iterator}findExternalTreeLinksConnected(){const t=new L,n=new L;return this.ZA(this,t,n),n.iterator}ZA(t,n,i){if(t===null||n.has(t))return;n.add(t);let r=!0;const a=this.diagram;a!==null&&(r=a.isTreePathToChildren),t.linksConnected.each(l=>{l.isTreeLink?(r?l.fromNode===t:l.toNode===t)&&this.ZA(r?l.toNode:l.fromNode,n,i):i.add(l)})}findLinksConnected(t){if(t===void 0&&(t=null),t===null)return this._t.iterator;const n=new S(this._t),i=this;return n.predicate=r=>r.fromNode===i&&r.fromPortId===t||r.toNode===i&&r.toPortId===t,n}findLinksOutOf(t){t===void 0&&(t=null);const n=new S(this._t),i=this;return n.predicate=r=>r.fromNode!==i?!1:t===null?!0:r.fromPortId===t,n}findLinksInto(t){t===void 0&&(t=null);const n=new S(this._t),i=this;return n.predicate=r=>r.toNode!==i?!1:t===null?!0:r.toPortId===t,n}findNodesConnected(t){t===void 0&&(t=null);let n=null,i=null;const r=this._t.iterator;for(;r.next();){const a=r.value;if(a.fromNode===this){if(t===null||a.fromPortId===t){const l=a.toNode;n!==null?n.add(l):i!==null&&i!==l?(n=new L,n.add(i),n.add(l)):i=l}}else if(a.toNode===this&&(t===null||a.toPortId===t)){const l=a.fromNode;n!==null?n.add(l):i!==null&&i!==l?(n=new L,n.add(i),n.add(l)):i=l}}return n!==null?n.iterator:i!==null?new x(i):g.instance}findNodesOutOf(t){t===void 0&&(t=null);let n=null,i=null;const r=this._t.iterator;for(;r.next();){const a=r.value;if(a.fromNode===this&&(t===null||a.fromPortId===t)){const l=a.toNode;n!==null?n.add(l):i!==null&&i!==l?(n=new L,n.add(i),n.add(l)):i=l}}return n!==null?n.iterator:i!==null?new x(i):g.instance}findNodesInto(t){t===void 0&&(t=null);let n=null,i=null;const r=this._t.iterator;for(;r.next();){const a=r.value;if(a.toNode===this&&(t===null||a.toPortId===t)){const l=a.fromNode;n!==null?n.add(l):i!==null&&i!==l?(n=new L,n.add(i),n.add(l)):i=l}}return n!==null?n.iterator:i!==null?new x(i):g.instance}findLinksBetween(t,n,i){n===void 0&&(n=null),i===void 0&&(i=null);const r=new S(this._t),a=this;return r.predicate=l=>l.fromNode===a&&l.toNode===t&&(n===null||l.fromPortId===n)&&(i===null||l.toPortId===i)||l.fromNode===t&&l.toNode===a&&(i===null||l.fromPortId===i)&&(n===null||l.toPortId===n),r}findLinksTo(t,n,i){n===void 0&&(n=null),i===void 0&&(i=null);const r=new S(this._t),a=this;return r.predicate=l=>!(l.fromNode!==a||l.toNode!==t||n!==null&&l.fromPortId!==n||i!==null&&l.toPortId!==i),r}get linkConnected(){return this.gt!==null?this.gt.ay:null}set linkConnected(t){const n=this.linkConnected;n!==t&&(t!==null&&o.i(t,"function",Ss,"linkConnected"),this.al(),this.gt.ay=t,this.t("linkConnected",n,t))}get linkDisconnected(){return this.gt!==null?this.gt.cy:null}set linkDisconnected(t){const n=this.linkDisconnected;n!==t&&(t!==null&&o.i(t,"function",Ss,"linkDisconnected"),this.al(),this.gt.cy=t,this.t("linkDisconnected",n,t))}get linkValidation(){return this.gt!==null?this.gt.Sl:null}set linkValidation(t){const n=this.linkValidation;n!==t&&(t!==null&&o.i(t,"function",Ss,"linkValidation"),this.al(),this.gt.Sl=t,this.t("linkValidation",n,t))}a1(t,n){this.Wi(n);const i=this._t.has(t);if(i||this._t.add(t),!i||t.fromNode===t.toNode){const r=this.linkConnected;if(r!==null){let a=!0;const l=this.diagram;l!==null&&(a=l.Y,l.Y=!0),r(this,t,n),l!==null&&(l.Y=a)}}if(!i){if(!t.isTreeLink)return;const r=t.fromNode,a=t.toNode;if(r!==null&&a!==null&&r!==a){let l=!0;const u=this.diagram;u!==null&&(l=u.isTreePathToChildren);const c=l?a:r,f=l?r:a;if(c.yh||(c.yh=f),f.isTreeLeaf){if(u!==null&&u.undoManager.isUndoingRedoing)return;l?r===f&&(f.isTreeLeaf=!1):a===f&&(f.isTreeLeaf=!1)}}}}c1(t,n){this.Wi(n);const i=this._t.delete(t);let r=null;if(i||t.toNode===t.fromNode){const a=this.linkDisconnected;if(r=this.diagram,a!==null){let l=!0;r!==null&&(l=r.Y,r.Y=!0),a(this,t,n),r!==null&&(r.Y=l)}}if(i){if(!t.isTreeLink)return;let a=!0;r!==null&&(a=r.isTreePathToChildren);const l=a?t.toNode:t.fromNode,u=a?t.fromNode:t.toNode;if(l!==null&&(l.yh=!1),u!==null&&!u.isTreeLeaf)if(u._t.count===0){if(u.yh=null,r!==null&&r.undoManager.isUndoingRedoing)return;u.isTreeLeaf=!0}else u.u0()}}u0(){if(this.yh=!1,this._t.count===0)return;let t=!0;const n=this.diagram;if(n!==null&&n.undoManager.isUndoingRedoing)return;n!==null&&(t=n.isTreePathToChildren);const i=this._t.iterator;for(;i.next();){const r=i.value;if(r.isTreeLink){if(t){if(r.fromNode===this){this.isTreeLeaf=!1;return}}else if(r.toNode===this){this.isTreeLeaf=!1;return}}}this.isTreeLeaf=!0}updateRelationshipsFromData(){const t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}Um(t){if(super.Um(t),!t){this.u0();const n=this.Pf;n!==null&&n.QA(this)}}Vm(t){if(super.Vm(t),!t){const n=this.Pf;n!==null&&n._A(this)}}Kc(){if(this._t.count>0){const t=this.diagram;if(t!==null){const n=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,i=this._t.copy().iterator;for(;i.next();){const r=i.value;n?t.remove(r):(r.fromNode===this&&(r.fromNode=null),r.toNode===this&&(r.toNode=null))}}}this.labeledLink=null,super.Kc()}get isLinkLabel(){return this.Pf!==null}get labeledLink(){return this.Pf}set labeledLink(t){const n=this.Pf;if(n!==t){const i=this.diagram,r=this.data;if(n!==null){if(n._A(this),i!==null&&r!==null&&!i.undoManager.isUndoingRedoing){const a=n.data,l=i.model;if(a!==null&&l.Ta()){const u=l.getKeyForNodeData(r);u!==void 0&&l.removeLabelKeyForLinkData(a,u)}}this.containingGroup=null}if(this.Pf=t,t!==null){if(t.QA(this),i!==null&&r!==null&&!i.undoManager.isUndoingRedoing){const a=t.data,l=i.model;if(a!==null&&l.Ta()){const u=l.getKeyForNodeData(r);u!==void 0&&l.addLabelKeyForLinkData(a,u)}}this.containingGroup=t.containingGroup}this.sf(),this.t("labeledLink",n,t)}}findVisiblePort(t){let n=t;for(;n!==null&&(!n.actualBounds.isReal()||!n.isVisibleObject());)n=n.panel;return n===null?this.port:n}findPort(t){if(this.ne===null){if(t===""&&this.wn===!1)return this;this.tT()}let n=this.ne.get(t);return n!==null||t!==""&&(n=this.ne.get(""),n!==null)?n:this}get port(){return this.findPort("")}get ports(){return this.ne===null&&this.tT(),this.ne.iteratorValues}tT(){this.ne===null?this.ne=new W:this.ne.clear(),this.walkVisualTreeFrom(this,(t,n)=>t.hA(n)),this.ne.count===0&&this.ne.set("",this)}hA(t){const n=t.portId;n!==null&&this.ne!==null&&this.ne.set(n,t)}u2(t,n){const i=t.portId;if(i!==null){this.ne!==null&&this.ne.delete(i);const r=this.diagram;if(r!==null&&n){let a=null;const l=this.findLinksConnected(i);for(;l.next();){const u=l.value;a===null&&(a=o.nt()),a.push(u)}if(a!==null){for(let u=0;u<a.length;u++){const c=a[u];r.remove(c)}o.tt(a)}}}}isInTreeOf(t){if(t===null||t===this)return!1;let n=!0;const i=this.diagram;i!==null&&(n=i.isTreePathToChildren);let r=this;const a=t;let l;if(n)for(;r!==a;){l=null;const u=r._t.iterator;for(;u.next();){const c=u.value;if(c.isTreeLink&&(l=c.fromNode,l!==r&&l!==this))break}if(l===this||l===null||l===r)return!1;r=l}else for(;r!==a;){l=null;const u=r._t.iterator;for(;u.next();){const c=u.value;if(c.isTreeLink&&(l=c.toNode,l!==r&&l!==this))break}if(l===this||l===null||l===r)return!1;r=l}return!0}findTreeRoot(){let t=!0;const n=this.diagram;n!==null&&(t=n.isTreePathToChildren);let i=this,r;if(t)for(;;){r=null;const a=i._t.iterator;for(;a.next();){const l=a.value;if(l.isTreeLink&&(r=l.fromNode,r!==i&&r!==this))break}if(r===this)return this;if(r===null||r===i)return i;i=r}else for(;;){r=null;const a=i._t.iterator;for(;a.next();){const l=a.value;if(l.isTreeLink&&(r=l.toNode,r!==i&&r!==this))break}if(r===this)return this;if(r===null||r===i)return i;i=r}}findCommonTreeParent(t){if(t===null)return null;if(this===t)return this;let n=this;for(;n!==null;)n.l1(!0),n=n.findTreeParentNode();let i=null;for(n=t;n!==null;){if(n.qA()){i=n;break}n=n.findTreeParentNode()}for(n=this;n!==null;)n.l1(!1),n=n.findTreeParentNode();return i}findTreeParentLink(){let t=!0;const n=this.diagram;n!==null&&(t=n.isTreePathToChildren);const i=this._t.iterator;if(t)for(;i.next();){const r=i.value;if(r.isTreeLink&&r.fromNode!==this)return r}else for(;i.next();){const r=i.value;if(r.isTreeLink&&r.toNode!==this)return r}return null}findTreeParentNode(){const t=this.yh;if(t===null)return null;if(t instanceof Ss)return t;const n=this.diagram,i=n!==null?n.isTreePathToChildren:!0,r=this._t.iterator;for(;r.next();){const a=r.value;if(!a.isTreeLink)continue;const l=i?a.fromNode:a.toNode;if(l!==this)return this.yh=l,l}return this.yh=null,null}findTreeParentChain(){function t(i,r){r.add(i);const a=i.findTreeParentLink();if(a!==null){r.add(a);const l=i.findTreeParentNode();if(l===null)return;t(l,r)}}const n=new L;return t(this,n),n}findTreeLevel(){return this.Vv(this)}Vv(t){let n=0,i=t.findTreeParentNode();for(;i!==null&&i!==t;)i=i.findTreeParentNode(),n++;return n}findTreeChildrenLinks(){let t=!0;const n=this.diagram;n!==null&&(t=n.isTreePathToChildren);const i=new S(this._t),r=this;return t?i.predicate=a=>!(!a.isTreeLink||a.fromNode!==r):i.predicate=a=>!(!a.isTreeLink||a.toNode!==r),i}findTreeChildrenNodes(){let t=!0;const n=this.diagram;n!==null&&(t=n.isTreePathToChildren);let i=null,r=null;const a=this._t.iterator;if(t)for(;a.next();){const l=a.value;if(l.isTreeLink&&l.fromNode===this){const u=l.toNode;i!==null?i.add(u):r!==null&&r!==u?(i=new M,i.add(r),i.add(u)):r=u}}else for(;a.next();){const l=a.value;if(l.isTreeLink&&l.toNode===this){const u=l.fromNode;i!==null?i.add(u):r!==null&&r!==u?(i=new M,i.add(r),i.add(u)):r=u}}return i!==null?i.iterator:r!==null?new x(r):g.instance}findTreeParts(t){t===void 0&&(t=1/0),o.i(t,"number",Ss,"findTreeParts:level");const n=new L;return xe.sh(n,this,!1,t,!0),n}collapseTree(t){t===void 0&&(t=1),t<1&&(t=1);const n=this.diagram;if(n===null||n.isCollapsingExpanding)return;n.isCollapsingExpanding=!0;const i=new L;i.add(this),this.iT(i,n.isTreePathToChildren,t,n,this,n.treeCollapsePolicy===1),n.isCollapsingExpanding=!1}iT(t,n,i,r,a,l){if(i>1){const u=n?this.findLinksOutOf():this.findLinksInto();for(;u.next();){const c=u.value;if(!c.isTreeLink)continue;const f=c.getOtherNode(this);f!==null&&f!==this&&!t.has(f)&&(t.add(f),f.iT(t,n,i-1,r,a,l))}}else this.eT(t,n,r,a,l)}eT(t,n,i,r,a){const l=r===this?!0:this.isTreeExpanded,u=n?this.findLinksOutOf():this.findLinksInto();for(;u.next();){const c=u.value;if(!c.isTreeLink)continue;const f=c.getOtherNode(this);if(f!==null&&f!==this){const m=t.has(f);if(m||t.add(f),l){const p=n?f.findNodesInto():f.findNodesOutOf(),y=this;p.all(w=>w===y||!w.isTreeExpanded)&&i.Lc(f,r),f.ch(),f.Ei(!1)}f.isTreeExpanded&&(f.wasTreeExpanded=f.isTreeExpanded,m||f.eT(t,n,i,r,a))}}this.isTreeExpanded=!1}expandTree(t){t===void 0&&(t=2),t<2&&(t=2);const n=this.diagram;if(n===null||n.isCollapsingExpanding)return;n.isCollapsingExpanding=!0;const i=new L;i.add(this),this.sT(i,n.isTreePathToChildren,t,n,this,n.treeCollapsePolicy===1),n.isCollapsingExpanding=!1}sT(t,n,i,r,a,l){const u=a===this?!1:this.isTreeExpanded,c=n?this.findLinksOutOf():this.findLinksInto();for(;c.next();){const f=c.value;if(!f.isTreeLink)continue;u||f.Me||f.invalidateRoute();const m=f.getOtherNode(this);if(m!==null&&m!==this&&!t.has(m)){if(t.add(m),!u){m.Ei(!0),m.ch();const p=n?m.findNodesInto():m.findNodesOutOf(),y=this;p.all(w=>w===y||!w.isTreeExpanded)&&r.Cc(m,a)}(i>2||m.wasTreeExpanded)&&(m.wasTreeExpanded=!1,m.sT(t,n,i-1,r,a,l))}}this.isTreeExpanded=!0}get isTreeExpanded(){return(this.E&1)!==0}set isTreeExpanded(t){const n=(this.E&1)!==0;if(n!==t){this.E=this.E^1;const i=this.diagram;this.t("isTreeExpanded",n,t);const r=this.treeExpandedChanged;if(r!==null){let a=!0;i!==null&&(a=i.Y,i.Y=!0),r(this),i!==null&&(i.Y=a)}if(i!==null&&i.undoManager.isUndoingRedoing){this.Ei(t);return}t?this.expandTree():this.collapseTree()}}get wasTreeExpanded(){return(this.E&2)!==0}set wasTreeExpanded(t){const n=(this.E&2)!==0;n!==t&&(this.E=this.E^2,this.t("wasTreeExpanded",n,t))}get treeExpandedChanged(){return this.gt!==null?this.gt.fy:null}set treeExpandedChanged(t){const n=this.treeExpandedChanged;n!==t&&(t!==null&&o.i(t,"function",Ss,"treeExpandedChanged"),this.al(),this.gt.fy=t,this.t("treeExpandedChanged",n,t))}get isTreeLeaf(){return(this.E&4)!==0}set isTreeLeaf(t){const n=(this.E&4)!==0;n!==t&&(this.E=this.E^4,this.t("isTreeLeaf",n,t))}get isTreeRoot(){return this.findTreeParentLink()===null}};v(Ss,"SpreadingNone",0),v(Ss,"SpreadingEvenly",1),v(Ss,"SpreadingPacked",2);let It=Ss;class rd{constructor(){v(this,"gi");v(this,"ay");v(this,"cy");v(this,"Sl");v(this,"fy");v(this,"hy");v(this,"ly");v(this,"uy");v(this,"gy");v(this,"eh");v(this,"my");this.gi=!1,this.ay=null,this.cy=null,this.Sl=null,this.fy=null,this.hy=tt.oC,this.ly=1,this.uy=null,this.gy=null,this.eh=null,this.my=null}copy(){const e=new rd;return e.ay=this.ay,e.cy=this.cy,e.Sl=this.Sl,e.fy=this.fy,e.hy=this.hy.N(),e.ly=this.ly,e.uy=this.uy,e.gy=this.gy,e.eh=this.eh,e.my=this.my,e}}var od=(A=>(A[A.None=0]="None",A[A.End=17]="End",A[A.Scale=18]="Scale",A[A.Stretch=19]="Stretch",A))(od||{}),ad=(A=>(A[A.Normal=1]="Normal",A[A.Orthogonal=2]="Orthogonal",A[A.AvoidsNodes=6]="AvoidsNodes",A[A.AvoidsNodesStraight=7]="AvoidsNodesStraight",A))(ad||{}),ld=(A=>(A[A.None=0]="None",A[A.Bezier=9]="Bezier",A[A.JumpGap=10]="JumpGap",A[A.JumpOver=11]="JumpOver",A))(ld||{});const oe=class oe extends xe{constructor(t){super(Kt.Link);v(this,"Nt");v(this,"lo");v(this,"ho");v(this,"Fd");v(this,"ao");v(this,"co");v(this,"Rd");v(this,"Sf");v(this,"vd");v(this,"Od");v(this,"Id");v(this,"Da");v(this,"Ed");v(this,"Hs");v(this,"ki");v(this,"cl");v(this,"Sr");v(this,"Mf");v(this,"$o");v(this,"Z2");v(this,"Q2");v(this,"f1");v(this,"_2");v(this,"tN");v(this,"py");v(this,"u1");v(this,"ct");v(this,"Zo");v(this,"af");v(this,"iN");v(this,"eN");this.Nt=8,this.lo=null,this.ho="",this.Fd=null,this.ao=null,this.co="",this.Rd=null,this.Sf=0,this.vd=0,this.Od=0,this.Id=NaN,this.Da=1,this.Ed=.5,this.Hs=null,this.ki=new M().g(),this.cl=null,this.Sr=null,this.Mf=new I,this.ct=new rt,this.$o=null,this.Zo=null,this.Z2=null,this.Q2=null,this.iN=0,this.eN=0,this.f1=new T,this._2=null,this.tN=null,this.py=null,this.u1=NaN,this.q=null,this.af=[],t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Nt=this.Nt&-113,t.ho=this.ho,t.Fd=this.Fd,t.co=this.co,t.Rd=this.Rd,t.Sf=this.Sf,t.vd=this.vd,t.Od=this.Od,t.Id=this.Id,t.Da=this.Da,t.Ed=this.Ed,this.q!==null&&(t.q=this.q.copy())}Vo(t){super.Vo(t),this.ho=t.ho,this.co=t.co,t.cl=null,t.invalidateRoute(),t.Zo=this.Zo;const n=t.fromPort;n!==null&&t.fromNode.Wi(n);const i=t.toPort;i!==null&&t.toNode.Wi(i)}ri(t){t in ad||t in ld||t in od?oe.sN(t)?this.routing=t:t===9||t===10||t===11?this.curve=t:t===17||t===18||t===19?this.adjusting=t:t===1||t===0||o.o("Unknown Link enum value for a Link property: "+t):super.ri(t)}Xe(){this.q===null&&(this.q=new vh)}QR(t,n,i){const r=t.segmentIndex,a=t.segmentFraction;let l=t.alignmentFocus;const u=t.segmentOrientation,c=t.segmentOffset;let f=0,m=0,p=0,y=0;if(isNaN(r)){const G=this.ct,X=o.nt();G.getPointAndAngleAlongPath(a,X);const Q=T.X(X[0],X[1]);if(Q.add(this.getPoint(0)),G.type===1)Q.offset(-G.startX,-G.startY);else{const Z=G.figures.first();Q.offset(-Z.startX,-Z.startY)}y=X[2],u!==0&&(p=this.computeAngle(t,u,y),t.angle=p),f=Q.x,m=Q.y,T.s(Q),o.tt(X)}else if(r<-n||r>=n){const G=T.l();this.mA(G),y=this.midAngle,u!==0&&(p=this.computeAngle(t,u,y),t.angle=p),f=G.x,m=G.y,T.s(G)}else{let G,X,Q=0;if(r>=0?(G=i.r[r],X=r<n-1?i.r[r+1]:G):(Q=n+r,G=i.r[Q],X=Q>0?i.r[Q-1]:G),G.equalsApprox(X)){let Z,et;r>=0?(Z=r>0?i.r[r-1]:G,et=r<n-2?i.r[r+2]:X):(Z=Q<n-1?i.r[Q+1]:G,et=Q>1?i.r[Q-2]:X);const st=Z.distanceSquaredPoint(G),ut=X.distanceSquaredPoint(et);st>ut+10?y=r>=0?Z.directionPoint(G):G.directionPoint(Z):ut>st+10?y=r>=0?X.directionPoint(et):et.directionPoint(X):y=r>=0?Z.directionPoint(et):et.directionPoint(Z)}else y=r>=0?G.directionPoint(X):X.directionPoint(G);u!==0&&(p=this.computeAngle(t,u,y),t.angle=p),f=G.x+(X.x-G.x)*a,m=G.y+(X.y-G.y)*a}if(l.isNone()){t.location=new T(f,m);return}else l.isNoSpot()&&(l=z.Center);const w=nt.l();w.Ri(),w.et(t.scale,t.scale),w.cs(t.angle,0,0);const b=t.naturalBounds,C=I.X(0,0,b.width,b.height),k=T.l();k.setRectSpot(C,l),w.xt(k);let N=-k.x,F=-k.y;const D=b.width,E=b.height,U=T.l();U.a(c);const $=isNaN(c.x),K=isNaN(c.y);if($||K){const G=D/2+3,X=E/2+3,Q=y>=45&&y<=135,Z=y>=225&&y<=315;u===0&&(Q||Z)?(U.x=K?G:c.y,U.y=$?X:c.x,Q?r>=0||isNaN(r)&&a<.5||$&&(U.y=-X):Z&&((r>=0||isNaN(r)&&a<.5)&&$&&(U.y=-X),K&&(U.x=-G))):($&&(r>=0||isNaN(r)&&a<.5?U.x=G:U.x=-G),K&&(U.y=-X),U.rotate(y))}else U.rotate(y);f+=U.x,m+=U.y,w.xw(C),N+=C.x,F+=C.y;const _=T.X(f+N,m+F);t.move(_),T.s(_),T.s(U),T.s(k),I.s(C),nt.s(w)}jr(){let t=this.fromNode;if(t!==null){const i=t.findVisibleNode();if(i!==null&&(t=i),t.is()||t.th())return!1}let n=this.toNode;if(n!==null){const i=n.findVisibleNode();if(i!==null&&(n=i),n.is()||n.th())return!1}return!0}c2(t,n,i){return!1}f2(){}Pe(){return!1}computeAngle(t,n,i){return oe.computeAngle(n,i)}static computeAngle(t,n){let i=0;switch(t){default:case 0:i=0;break;case 21:i=n;break;case 22:i=n+90;break;case 23:i=n-90;break;case 24:i=n+180;break;case 25:i=R.Kg(n),i>90&&i<270&&(i-=180);break;case 26:i=R.Kg(n+90),i>90&&i<270&&(i-=180);break;case 27:i=R.Kg(n-90),i>90&&i<270&&(i-=180);break;case 28:if(i=R.Kg(n),i>45&&i<135||i>225&&i<315)return 0;i>90&&i<270&&(i-=180);break}return R.Kg(i)}get fromNode(){return this.lo}set fromNode(t){const n=this.lo;if(n!==t){const i=this.fromPort;n!==null&&(this.ao!==n&&n.c1(this,i),this.yy(),this.invalidateLayout(2)),this.lo=t,t!==null&&this.Ei(t.isVisible()),this.$o=null,this.invalidateRoute();const r=this.diagram;r!==null&&r.Y&&r.partManager.setFromNodeForLink(this,t,n);const a=this.fromPort,l=this.fromPortChanged;if(l!==null){let u=!0;r!==null&&(u=r.Y,r.Y=!0),l(this,i,a),r!==null&&(r.Y=u)}t!==null&&(this.ao!==t&&t.a1(this,a),this.wy(),this.invalidateLayout(1)),this.t("fromNode",n,t),this.Td()}}get fromPortId(){return this.ho}set fromPortId(t){const n=this.ho;if(n!==t){const i=this.fromPort;i!==null&&this.fromNode.Wi(i),this.yy(),this.ho=t;const r=this.fromPort;r!==null&&this.fromNode.Wi(r);const a=this.diagram;if(a!==null){const l=this.data,u=a.model;l!==null&&u.Ta()&&u.setFromPortIdForLinkData(l,t)}if(i!==r){this.$o=null,this.invalidateRoute();const l=this.fromPortChanged;if(l!==null){let u=!0;a!==null&&(u=a.Y,a.Y=!0),l(this,i,r),a!==null&&(a.Y=u)}}this.wy(),this.t("fromPortId",n,t)}}get fromPort(){const t=this.lo;if(t===null)return null;const n=this.ho;return t.findPort(n)}get fromPortChanged(){return this.Fd}set fromPortChanged(t){const n=this.Fd;n!==t&&(t!==null&&o.i(t,"function",oe,"fromPortChanged"),this.Fd=t,this.t("fromPortChanged",n,t))}get toNode(){return this.ao}set toNode(t){const n=this.ao;if(n!==t){const i=this.toPort;n!==null&&(this.lo!==n&&n.c1(this,i),this.yy(),this.invalidateLayout(2)),this.ao=t,t!==null&&this.Ei(t.isVisible()),this.$o=null,this.invalidateRoute();const r=this.diagram;r!==null&&r.Y&&r.partManager.setToNodeForLink(this,t,n);const a=this.toPort,l=this.toPortChanged;if(l!==null){let u=!0;r!==null&&(u=r.Y,r.Y=!0),l(this,i,a),r!==null&&(r.Y=u)}t!==null&&(this.lo!==t&&t.a1(this,a),this.wy(),this.invalidateLayout(1)),this.t("toNode",n,t),this.Td()}}get toPortId(){return this.co}set toPortId(t){const n=this.co;if(n!==t){const i=this.toPort;i!==null&&this.toNode.Wi(i),this.yy(),this.co=t;const r=this.toPort;r!==null&&this.toNode.Wi(r);const a=this.diagram;if(a!==null){const l=this.data,u=a.model;l!==null&&u.Ta()&&u.setToPortIdForLinkData(l,t)}if(i!==r){this.$o=null,this.invalidateRoute();const l=this.toPortChanged;if(l!==null){let u=!0;a!==null&&(u=a.Y,a.Y=!0),l(this,i,r),a!==null&&(a.Y=u)}}this.wy(),this.t("toPortId",n,t)}}get toPort(){const t=this.ao;if(t===null)return null;const n=this.co;return t.findPort(n)}get toPortChanged(){return this.Rd}set toPortChanged(t){const n=this.Rd;n!==t&&(t!==null&&o.i(t,"function",oe,"toPortChanged"),this.Rd=t,this.t("toPortChanged",n,t))}get fromSpot(){return this.q!==null?this.q.fa:z.Default}set fromSpot(t){const n=this.fromSpot;if(!n.equals(t)){if(t=t.N(),this.Xe(),this.q.fa=t,this.t("fromSpot",n,t),n.isSide()||t.isSide()){const i=this.fromNode;i!==null&&i.Wi(this.fromPort)}this.invalidateRoute()}}get fromEndSegmentLength(){return this.q!==null?this.q.da:NaN}set fromEndSegmentLength(t){const n=this.fromEndSegmentLength;if(n!==t){if(t<0&&o._(t,">= 0",oe,"fromEndSegmentLength"),this.Xe(),this.q.da=t,this.t("fromEndSegmentLength",n,t),this.computeSpot(!0,this.fromPort).isSide()){const i=this.fromNode;i!==null&&i.Wi(this.fromPort)}this.invalidateRoute()}}get fromShortLength(){return this.q!==null?this.q.ma:NaN}set fromShortLength(t){const n=this.fromShortLength;n!==t&&(this.Xe(),this.q.ma=t,this.ee(),this.t("fromShortLength",n,t))}get toSpot(){return this.q!==null?this.q.ua:z.Default}set toSpot(t){const n=this.toSpot;if(!n.equals(t)){if(t=t.N(),this.Xe(),this.q.ua=t,this.t("toSpot",n,t),n.isSide()||t.isSide()){const i=this.toNode;i!==null&&i.Wi(this.toPort)}this.invalidateRoute()}}get toEndSegmentLength(){return this.q!==null?this.q.ga:NaN}set toEndSegmentLength(t){const n=this.toEndSegmentLength;if(n!==t){if(t<0&&o._(t,">= 0",oe,"toEndSegmentLength"),this.Xe(),this.q.ga=t,this.t("toEndSegmentLength",n,t),this.computeSpot(!1,this.toPort).isSide()){const i=this.toNode;i!==null&&i.Wi(this.toPort)}this.invalidateRoute()}}get toShortLength(){return this.q!==null?this.q.pa:NaN}set toShortLength(t){const n=this.toShortLength;n!==t&&(this.Xe(),this.q.pa=t,this.ee(),this.t("toShortLength",n,t))}Td(){const t=this.fromNode,n=this.toNode;let i=null;if(t!==null?n!==null?i=t.findCommonContainingGroup(n):i=t.containingGroup:n!==null?i=n.containingGroup:i=null,this.Yv(i),this.isLabeledLink){const r=this.labelNodes;for(;r.next();){const a=r.value;a.containingGroup=i}}}Yv(t){const n=this.ph;if(n!==t){n!==null&&n.G2(this),this.ph=t,t!==null&&t.j2(this);const i=this.containingGroupChanged;if(i!==null){let r=!0;const a=this.diagram;a!==null&&(r=a.Y,a.Y=!0),i(this,n,t),a!==null&&(a.Y=r)}this.Me&&(this._2===n||this.tN===n)&&this.invalidateRoute()}}ch(){const t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&super.ch()}getOtherNode(t){const n=this.fromNode;return t===n?this.toNode:n}getOtherPort(t){const n=this.fromPort;return t===n?this.toPort:n}get isLabeledLink(){return this.Hs===null?!1:this.Hs.count>0}get labelNodes(){return this.Hs===null?g.instance:this.Hs.iterator}QA(t){this.Hs===null&&(this.Hs=new L),this.Hs.add(t),this.c()}_A(t){this.Hs!==null&&(this.Hs.delete(t),this.c())}Um(t){if(super.Um(t),this.Oa()&&this.invalidateOtherJumpOvers(this.actualBounds),!t){const n=this.lo;let i=null;n!==null&&(i=this.fromPort,n.a1(this,i));const r=this.ao;let a=null;r!==null&&(a=this.toPort,(r!==n||a!==i)&&r.a1(this,a)),this.wy()}}Vm(t){if(super.Vm(t),this.Oa()&&this.invalidateOtherJumpOvers(this.actualBounds),!t){const n=this.lo;let i=null;n!==null&&(i=this.fromPort,n.c1(this,i));const r=this.ao;let a=null;r!==null&&(a=this.toPort,(r!==n||a!==i)&&r.c1(this,a)),this.yy()}}Kc(){if(this.Me=!0,this.Hs!==null){const t=this.diagram;if(t!==null){const n=this.Hs.copy().iterator;for(;n.next();){const i=n.value;t.remove(i)}}}if(this.data!==null){const t=this.diagram;t!==null&&t.partManager.nN(this)}}updateRelationshipsFromData(){if(this.data===null)return;const t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}move(t,n){const i=n?this.location:this.position;let r=i.x;isNaN(r)&&(r=0);let a=i.y;isNaN(a)&&(a=0);const l=t.x-r,u=t.y-a;if(n===!0)super.move(t,!1);else{const f=T.X(i.x+l,i.y+u);super.move(f,!1),T.s(f)}this.pr(l,u);const c=this.labelNodes;for(;c.next();){const f=c.value,m=f.position;f.moveTo(m.x+l,m.y+u)}}get relinkableFrom(){return(this.Nt&1)!==0}set relinkableFrom(t){const n=(this.Nt&1)!==0;n!==t&&(this.Nt=this.Nt^1,this.t("relinkableFrom",n,t),this.invalidateAdornments())}get relinkableTo(){return(this.Nt&2)!==0}set relinkableTo(t){const n=(this.Nt&2)!==0;n!==t&&(this.Nt=this.Nt^2,this.t("relinkableTo",n,t),this.invalidateAdornments())}canRelinkFrom(){if(!this.relinkableFrom)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowRelink)return!1;const n=t.diagram;return!(n!==null&&!n.allowRelink)}canRelinkTo(){if(!this.relinkableTo)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowRelink)return!1;const n=t.diagram;return!(n!==null&&!n.allowRelink)}get resegmentable(){return(this.Nt&4)!==0}set resegmentable(t){const n=(this.Nt&4)!==0;n!==t&&(this.Nt=this.Nt^4,this.t("resegmentable",n,t),this.invalidateAdornments())}get isTreeLink(){return(this.Nt&8)!==0}set isTreeLink(t){const n=(this.Nt&8)!==0;n!==t&&(this.Nt=this.Nt^8,this.t("isTreeLink",n,t),this.fromNode!==null&&this.fromNode.u0(),this.toNode!==null&&this.toNode.u0())}get path(){const t=this.findMainElement();return t instanceof Qt?t:null}get routeBounds(){return this.updateRoute(),this.Gv(this.Mf)}Gv(t){let n=1/0,i=1/0;const r=this.pointsCount;if(r===0)return t.e(NaN,NaN,0,0),t;if(r===1){const a=this.getPoint(0);n=Math.min(a.x,n),i=Math.min(a.y,i),t.e(a.x,a.y,0,0)}else if(r===2){const a=this.getPoint(0),l=this.getPoint(1);n=Math.min(a.x,l.x),i=Math.min(a.y,l.y),t.e(a.x,a.y,0,0),t.unionPoint(l)}else if(this.computeCurve()===9&&r>=3&&!this.isOrthogonal){let a=this.getPoint(0);if(n=a.x,i=a.y,t.e(n,i,0,0),r===3){const l=this.getPoint(1);n=Math.min(l.x,n),i=Math.min(l.y,i);const u=this.getPoint(2);n=Math.min(u.x,n),i=Math.min(u.y,i),R.au(a.x,a.y,l.x,l.y,l.x,l.y,u.x,u.y,.5,t)}else for(let l=3;l<r;l+=3){const u=this.getPoint(l-2);l+3>=r&&(l=r-1);const c=this.getPoint(l-1),f=this.getPoint(l);R.au(a.x,a.y,u.x,u.y,c.x,c.y,f.x,f.y,.5,t),n=Math.min(f.x,n),i=Math.min(f.y,i),a=f}}else{const a=this.getPoint(0),l=this.getPoint(1);n=Math.min(a.x,l.x),i=Math.min(a.y,l.y),t.e(a.x,a.y,0,0),t.unionPoint(l);for(let u=2;u<r;u++){const c=this.getPoint(u);n=Math.min(c.x,n),i=Math.min(c.y,i),t.unionPoint(c)}}return this.f1.e(n-t.x,i-t.y),t}get midPoint(){return this.updateRoute(),this.computeMidPoint(new T)}mA(t){return this.updateRoute(),this.computeMidPoint(t)}computeMidPoint(t){const n=this.pointsCount;if(n===0)return t.a(T.Ak),t;if(n===1)return t.a(this.getPoint(0)),t;if(n===2){const m=this.getPoint(0),p=this.getPoint(1);return t.e((m.x+p.x)/2,(m.y+p.y)/2),t}if(this.isOrthogonal&&(this.computeCorner()>=15||this.computeCurve()===9)){this.ct.getPointAlongPath(.5,t),t.add(this.getPoint(0));const m=this.ct.figures.first();return t.offset(-m.startX,-m.startY),t}if(this.computeCurve()===9){if(n===3){const y=this.getPoint(0),w=this.getPoint(1),b=this.getPoint(2);return R.fC(y.x,y.y,w.x,w.y,w.x,w.y,b.x,b.y,t),t}const m=(n-1)/3|0,p=(m/2|0)*3;if(m%2===1){const y=this.getPoint(p),w=this.getPoint(p+1),b=this.getPoint(p+2),C=this.getPoint(p+3);return R.fC(y.x,y.y,w.x,w.y,b.x,b.y,C.x,C.y,t),t}else return t.a(this.getPoint(p)),t}const i=this.flattenedLengths,r=this.flattenedTotalLength;let a=0,l=0,u=0;for(;a<r/2&&l<n&&(u=i[l],!(a+u>r/2));)a+=u,l++;const c=this.getPoint(l),f=this.getPoint(l+1);if(Math.abs(c.x-f.x)<1)c.y>f.y?t.e(c.x,c.y-(r/2-a)):t.e(c.x,c.y+(r/2-a));else if(Math.abs(c.y-f.y)<1)c.x>f.x?t.e(c.x-(r/2-a),c.y):t.e(c.x+(r/2-a),c.y);else{const m=(r/2-a)/u,p=m*(f.x-c.x),y=m*(f.y-c.y);t.e(c.x+p,c.y+y)}return t}get midAngle(){return this.updateRoute(),this.computeMidAngle()}computeMidAngle(){const t=this.pointsCount;if(t<2)return NaN;if(t===2){const f=this.getPoint(0),m=this.getPoint(1);return f.directionPoint(m)}if(this.isOrthogonal&&(this.computeCorner()>=15||this.computeCurve()===9))return this.ct.getAngleAlongPath(.5);if(this.computeCurve()===9&&t>=4){const f=(t-1)/3|0;let m=(f/2|0)*3;if(f%2===1){m=Math.floor(m);const p=this.getPoint(m),y=this.getPoint(m+1),w=this.getPoint(m+2),b=this.getPoint(m+3);return R.FD(p.x,p.y,y.x,y.y,w.x,w.y,b.x,b.y)}else if(m>0&&m+1<t){const p=this.getPoint(m-1),y=this.getPoint(m+1);return p.directionPoint(y)}}const n=this.flattenedLengths,i=this.flattenedTotalLength;let r=0,a=0,l=0;for(;r<i/2&&a<t&&(l=n[a],!(r+l>i/2));)r+=l,a++;const u=this.getPoint(a),c=this.getPoint(a+1);if(Math.abs(u.x-c.x)<1&&Math.abs(u.y-c.y)<1){if(a>0&&a+2<t){const f=this.getPoint(a-1),m=this.getPoint(a+2);return f.directionPoint(m)}}else{if(Math.abs(u.x-c.x)<1)return u.y>c.y?270:90;if(Math.abs(u.y-c.y)<1)return u.x>c.x?180:0}return u.directionPoint(c)}jv(){if(this.py===null){this.Me||this.d1();const t=this.py=[];this.Hv(t)}}get flattenedLengths(){return this.jv(),this.py}get flattenedTotalLength(){let t=this.u1;if(isNaN(t)){const n=this.flattenedLengths,i=n.length;t=0;for(let r=0;r<i;r++)t+=n[r];this.u1=t}return t}Hv(t){const n=this.pointsCount;for(let i=0;i<n-1;i++){let r=0;const a=this.getPoint(i),l=this.getPoint(i+1);R.K(a.x,l.x)?(r=l.y-a.y,r<0&&(r=-r),t.push(r)):R.K(a.y,l.y)?(r=l.x-a.x,r<0&&(r=-r),t.push(r)):(r=Math.sqrt(a.distanceSquaredPoint(l)),t.push(r))}}get points(){return this.ki}set points(t){const n=this.ki;if(n===t)return;let i=null;if(Array.isArray(t)){const a=t;let l=a.length%2===0;if(l){for(let u=0;u<a.length;u++)if(typeof a[u]!="number"||isNaN(a[u])){l=!1;break}}if(l){i=new M;for(let u=0;u<a.length/2;u++){const c=new T(a[u*2],a[u*2+1]).g();i.add(c)}}else{let u=!0;for(let c=0;c<a.length;c++){const f=a[c];if(!o.wt(f)||typeof f.x!="number"||isNaN(f.x)||typeof f.y!="number"||isNaN(f.y)){u=!1;break}}if(u){i=new M;for(let c=0;c<a.length;c++){const f=a[c];i.add(new T(f.x,f.y).g())}}}}else if(t instanceof M){i=t.copy();const a=i.iterator;for(;a.next();)a.value.g()}else o.o("Link.points value is not an instance of List or Array: "+t);i.g(),this.ki=i,this.ee(),this.d1();const r=this.diagram;r!==null&&(!r.Bh&&!r.undoManager.isUndoingRedoing&&r.mx.add(this),r.animationManager.wi&&r.animationManager.AS(this,i)),this.t("points",n,i)}get pointsCount(){return this.ki.count}getPoint(t){return this.ki.r[t]}setPoint(t,n){this.ki.setElt(t,n)}setPointAt(t,n,i){this.ki.setElt(t,new T(n,i))}insertPoint(t,n){this.ki.insertAt(t,n)}insertPointAt(t,n,i){this.ki.insertAt(t,new T(n,i))}addPoint(t){this.ki.add(t)}addPointAt(t,n){this.ki.add(new T(t,n))}removePoint(t){this.ki.removeAt(t)}clearPoints(){this.ki.clear()}pr(t,n){if(t===0&&n===0)return;if(this.pointsCount===0){this.defaultFromPoint&&this.defaultFromPoint.offset(t,n),this.defaultToPoint&&this.defaultToPoint.offset(t,n);return}const i=this.Me,r=new M,a=this.ki.iterator;for(;a.next();){const c=a.value;r.add(new T(c.x+t,c.y+n).g())}r.g();const l=this.ki;this.ki=r;const u=this.diagram;isNaN(t)||isNaN(n)||u!==null&&u.animationManager.wi?this.c():(this.js.e(this.js.x+t,this.js.y+n),this.at.e(this.at.x+t,this.at.y+n),this.sf()),i?this.d1():(this.defaultFromPoint&&(this.defaultFromPoint=this.getPoint(0)),this.defaultToPoint&&(this.defaultToPoint=this.getPoint(this.pointsCount-1))),u!==null&&u.animationManager.wi&&u.animationManager.AS(this,r),this.t("points",l,r)}startRoute(){this.cl===null&&(this.cl=this.ki,this.ki=this.ki.copy())}commitRoute(){if(this.cl===null)return;const t=this.cl,n=this.ki;let i=1/0,r=1/0;const a=t.r,l=a.length;for(let y=0;y<l;y++){const w=a[y];i=Math.min(w.x,i),r=Math.min(w.y,r)}let u=1/0,c=1/0;const f=n.r,m=f.length;for(let y=0;y<m;y++){const w=f[y];u=Math.min(w.x,u),c=Math.min(w.y,c),w.g()}if(n.g(),m===l)for(let y=0;y<m;y++){const w=a[y],b=f[y];if(w.x-i!==b.x-u||w.y-r!==b.y-c){this.ee();break}}else this.ee();this.cl=null;const p=this.diagram;p!==null&&p.animationManager.wi&&p.animationManager.AS(this,n),this.d1(),this.t("points",t,n)}rollbackRoute(){this.cl!==null&&(this.ki=this.cl,this.cl=null)}mF(){this.Sr!==null&&(this.points=this.Sr,this.Sr=null)}d1(){if(this.ki.count===0){this.Me=!1;return}this.Me=!0,this.py=null,this.u1=NaN,this.defaultFromPoint=this.getPoint(0),this.defaultToPoint=this.getPoint(this.pointsCount-1),this.g1(!1)}invalidateRoute(){if(this.suspendsRouting)return;const t=this.path;if(t===null)return;const n=this.diagram;if(n){if(n.mx.has(this)||n.undoManager.isUndoingRedoing)return;const i=n.animationManager;if(i.isTicking&&!i.isAnimating)return;this.Sr!==null&&!i.isTicking&&(this.Sr=null)}this.Me=!1,this.c(),t.c()}get Me(){return(this.Nt&16)!==0}set Me(t){(this.Nt&16)!==0!==t&&(this.Nt=this.Nt^16)}get suspendsRouting(){return(this.Nt&32)!==0}set suspendsRouting(t){(this.Nt&32)!==0!==t&&(this.Nt=this.Nt^32)}get xy(){return(this.Nt&64)!==0}set xy(t){(this.Nt&64)!==0!==t&&(this.Nt=this.Nt^64)}get oN(){return(this.Nt&512)!==0}set oN(t){(this.Nt&512)!==0!==t&&(this.Nt=this.Nt^512)}get defaultFromPoint(){return this.Z2}set defaultFromPoint(t){this.Z2=t.copy()}get defaultToPoint(){return this.Q2}set defaultToPoint(t){this.Q2=t.copy()}updateRoute(){if(this.Me||this.xy)return;let t=!0;try{this.xy=!0,this.startRoute(),t=this.computePoints()}catch{this.xy=!1,this.rollbackRoute()}finally{this.xy=!1,t?this.commitRoute():this.rollbackRoute()}}computePoints(){const t=this.diagram;if(t===null)return!1;let n=this.fromNode,i=null;if(n===null?(oe.Fa||(oe.Fa=new It,oe.Fa.desiredSize=B.lu,oe.Fa.ensureBounds()),this.defaultFromPoint&&(oe.Fa.location=this.defaultFromPoint,oe.Fa.ensureBounds(),n=oe.Fa,i=oe.Fa)):i=this.fromPort,i!==null&&!n.isVisible()){const C=n.findVisibleNode();C!==null&&C!==n?(n=C,i=C.port):n=C}if(this._2=n,n===null||!n.location.isReal()||(i=n.findVisiblePort(i),i===null))return!1;let r=this.toNode,a=null;if(r===null?(oe.Ra||(oe.Ra=new It,oe.Ra.desiredSize=B.lu,oe.Ra.ensureBounds()),this.defaultToPoint&&(oe.Ra.location=this.defaultToPoint,oe.Ra.ensureBounds(),r=oe.Ra,a=oe.Ra)):a=this.toPort,a!==null&&!r.isVisible()){const C=r.findVisibleNode();C!==null&&C!==r?(r=C,a=C.port):r=C}if(this.tN=r,r===null||!r.location.isReal()||(a=r.findVisiblePort(a),a===null))return!1;const l=this.pointsCount,u=this.computeSpot(!0,i),c=this.computeSpot(!1,a),f=this.Bd(u),m=this.Bd(c),p=i===a&&i!==null,y=this.isOrthogonal;let w=this.curve===9;p&&!y?(w=!0,this.$o=!0):this.$o=!1;const b=this.computeAdjusting()===0||p;if(!y&&!p&&f&&m){let C=!1;if(!b&&l>=3){let k=this.getLinkPoint(n,i,u,!0,!1,r,a),N=this.getLinkPoint(r,a,c,!1,!1,n,i);C=this.adjustPoints(0,k,l-1,N),C&&(k=this.getLinkPoint(n,i,u,!0,!1,r,a),N=this.getLinkPoint(r,a,c,!1,!1,n,i),this.adjustPoints(0,k,l-1,N))}C||(this.clearPoints(),w?this.qv(n,i,u,r,a,c):this.Wv(n,i,u,r,a,c))}else{const C=this.isAvoiding;b&&(y&&C||p)&&this.clearPoints();const k=p?this.computeCurviness():0,N=this.getLinkPoint(n,i,u,!0,y,r,a);let F=0,D=0,E=0;if(y||!f||p){let Q=this.computeEndSegmentLength(n,i,u,!0);if(E=this.getLinkDirection(n,i,N,u,!0,y,r,a),p&&(f||u.equals(c)||!y&&u.x+c.x===1&&u.y+c.y===1)&&(E-=y?90:30,k<0&&(E-=180)),E<0?E+=360:E>=360&&(E-=360),p&&(Q+=Math.abs(k)*(y?1:2)),E===0?F=Q:E===90?D=Q:E===180?F=-Q:E===270?D=-Q:(F=Q*Math.cos(E*Math.PI/180),D=Q*Math.sin(E*Math.PI/180)),u.isNoSpot()&&p){const Z=i.getDocumentPoint(z.Center,T.l()),et=T.X(Z.x+F*1e3,Z.y+D*1e3);this.getLinkPointFromPoint(n,i,Z,et,!0,N),T.s(Z),T.s(et)}}const U=this.getLinkPoint(r,a,c,!1,y,n,i);let $=0,K=0,_=0;if(y||!m||p){let Q=this.computeEndSegmentLength(r,a,c,!1);if(_=this.getLinkDirection(r,a,U,c,!1,y,n,i),p&&(m||u.equals(c)||!y&&u.x+c.x===1&&u.y+c.y===1)&&(_+=y?0:30,k<0&&(_+=180)),_<0?_+=360:_>=360&&(_-=360),p&&(Q+=Math.abs(k)*(y?1:2)),_===0?$=Q:_===90?K=Q:_===180?$=-Q:_===270?K=-Q:($=Q*Math.cos(_*Math.PI/180),K=Q*Math.sin(_*Math.PI/180)),c.isNoSpot()&&p){const Z=a.getDocumentPoint(z.Center,T.l()),et=T.X(Z.x+$*1e3,Z.y+K*1e3);this.getLinkPointFromPoint(r,a,Z,et,!1,U),T.s(Z),T.s(et)}}let G=N;(y||!f||p)&&(G=new T(N.x+F,N.y+D));let X=U;(y||!m||p)&&(X=new T(U.x+$,U.y+K)),!b&&!y&&f&&l>3&&this.adjustPoints(0,N,l-2,X)?this.setPoint(l-1,U):!b&&!y&&m&&l>3&&this.adjustPoints(1,G,l-1,U)?this.setPoint(0,N):!b&&(y?l>=6:l>4)&&this.adjustPoints(1,G,l-2,X)?(this.setPoint(0,N),this.setPoint(l-1,U)):(this.clearPoints(),this.addPoint(N),(y||!f||p)&&this.addPoint(G),y&&this.addOrthoPoints(G,E,X,_,n,r),(y||!m||p)&&this.addPoint(X),this.addPoint(U))}return t.addInvalidRoute(this),!0}rN(t,n){return Math.abs(n.x-t.x)>Math.abs(n.y-t.y)?(n.x>=t.x?n.x=t.x+9e9:n.x=t.x-9e9,n.y=t.y):(n.y>=t.y?n.y=t.y+9e9:n.y=t.y-9e9,n.x=t.x),n}getLinkPointFromPoint(t,n,i,r,a,l){if(l===void 0&&(l=new T),t===null||n===null)return l.a(i),l;if(!t.isVisible()){const w=t.findVisibleNode();w!==null&&w!==t&&(t=w,n=t.port)}let u=0,c=0,f=0,m=0,p=null,y=n.panel;if(y!==null&&!y.pn()&&(y=y.panel),y===null)u=r.x,c=r.y,f=i.x,m=i.y;else{p=y.Es;const w=1/(p.m11*p.m22-p.m12*p.m21),b=p.m22*w,C=-p.m12*w,k=-p.m21*w,N=p.m11*w,F=w*(p.m21*p.dy-p.m22*p.dx),D=w*(p.m12*p.dx-p.m11*p.dy);u=r.x*b+r.y*k+F,c=r.x*C+r.y*N+D,f=i.x*b+i.y*k+F,m=i.x*C+i.y*N+D}return n.Zc(u,c,f,m,l),p!==null&&l.D(p),l}Jv(t,n){const i=t.Zu;return i!==null?i.nT(n):null}m1(t){let n=t.Zu;return n===null&&(n=new hd,n.Qo=t,n.de=t.part,t.Zu=n),n.nT(this)}getLinkPoint(t,n,i,r,a,l,u,c){if(c===void 0&&(c=new T),i.isSpot()&&!this.Bd(i))return n.getDocumentPoint(i,c),c;if(i.isSide()){const p=this.m1(n);if(p!==null){const y=p.Ud;if(c.a(y),a&&this.routing===7){const w=this.m1(u);if(w!==null&&p.Nf<w.Nf){const b=T.l(),C=T.l(),k=new I(n.getDocumentPoint(z.TopLeft,b),n.getDocumentPoint(z.BottomRight,C)),N=this.computeSpot(!r,u),F=this.getLinkPoint(l,u,N,!r,a,t,n,C);(i.includesSide(z.LeftSide)||i.includesSide(z.RightSide))&&F.y>=k.y&&F.y<=k.y+k.height?c.y=F.y:(i.includesSide(z.TopSide)||i.includesSide(z.BottomSide))&&F.x>=k.x&&F.x<=k.x+k.width&&(c.x=F.x),T.s(b),T.s(C)}}return c}}const f=n.getDocumentPoint(this.p1(i,r),T.l());let m=null;if(this.pointsCount>(a?6:2))m=r?this.getPoint(1):this.getPoint(this.pointsCount-2),a&&(m=this.rN(f,m.copy()));else{const p=this.computeSpot(!r,u),y=T.l();m=u.getDocumentPoint(this.p1(p,!r),y),a&&(m=this.rN(f,m)),T.s(y)}return this.getLinkPointFromPoint(t,n,f,m,r,c),T.s(f),c}getLinkDirection(t,n,i,r,a,l,u,c){let f=this.$v(t,n,i,r,a,l,u,c);if(u&&r.isNoSpot()&&u.isMemberOf(t)&&(f+=180,f>=360&&(f-=360)),this.Bd(r))return f;const m=n.getDocumentAngle();return m===0||(45<=m&&m<135?f+=90:135<=m&&m<225?f+=180:225<=m&&m<315&&(f+=270),f>=360&&(f-=360)),f}$v(t,n,i,r,a,l,u,c){if(r.isSpot())return r.x>r.y?r.x>1-r.y?0:r.x<1-r.y?270:315:r.x<r.y?r.x>1-r.y?90:r.x<1-r.y?180:135:r.x<.5?225:r.x>.5?45:0;if(r.isSide()){const y=this.m1(n);if(y!==null)switch(y.me){case 1:return 270;case 2:return 180;default:case 4:return 0;case 8:return 90}}const f=n.getDocumentPoint(z.Center,T.l());let m=null;if(this.pointsCount>(l?6:2))m=a?this.getPoint(1):this.getPoint(this.pointsCount-2),l?m=this.rN(f,m.copy()):m=i;else{const y=T.l();m=c.getDocumentPoint(z.Center,y),T.s(y)}let p=0;return Math.abs(m.x-f.x)>Math.abs(m.y-f.y)?m.x>=f.x?p=0:p=180:m.y>=f.y?p=90:p=270,T.s(f),p}computeEndSegmentLength(t,n,i,r){if(n!==null&&i.isSide()){const l=this.m1(n);if(l!==null)return l.w1}let a=NaN;return r?a=this.fromEndSegmentLength:a=this.toEndSegmentLength,n!==null&&isNaN(a)&&(r?a=n.fromEndSegmentLength:a=n.toEndSegmentLength),isNaN(a)&&(a=10),a}computeSpot(t,n){return n===void 0&&(n=null),t?this.Zv(n||this.fromPort):this.Qv(n||this.toPort)}Zv(t){if(t===null)return z.Center;let n=this.fromSpot;return n.isDefault()&&(n=t.fromSpot),n===z.Default?z.None:n}Qv(t){if(t===null)return z.Center;let n=this.toSpot;return n.isDefault()&&(n=t.toSpot),n===z.Default?z.None:n}Bd(t){return t===z.None||t.x===.5&&t.y===.5}p1(t,n){return t.x===.5&&t.y===.5?t:z.Center}computeOtherPoint(t,n){if(this.computeAdjusting()!==0&&this.pointsCount>4)return this.computeMidPoint(new T);{const i=this.Jv(n,this);return i!==null?i.Ud:n.getDocumentPoint(z.Center)}}computeShortLength(t){if(t){let n=this.fromShortLength;if(isNaN(n)){const i=this.fromPort;i!==null&&(n=i.fromShortLength)}return isNaN(n)?0:n}else{let n=this.toShortLength;if(isNaN(n)){const i=this.toPort;i!==null&&(n=i.toShortLength)}return isNaN(n)?0:n}}Im(t,n,i,r,a,l){if(this.pickable===!1)return!1;n===void 0&&(n=null),i===void 0&&(i=null);let u=l;if(l===void 0&&(u=nt.l(),u.Ri()),u.ic(this.D),this.containedInRect(t,u))return this.D2(n,i,a),l===void 0&&nt.s(u),!0;if(this.intersectsRect(t,u)){let c=!1;if(!this.cf){const f=this.L.r,m=f.length;for(let p=m;p--;){const y=f[p];if(!y.visible&&y!==this.locationObject)continue;const w=y.actualBounds,b=this.naturalBounds;if(w.x>b.width||w.y>b.height||w.x+w.width<0||w.y+w.height<0)continue;const C=y,k=nt.l();if(k.set(u),C instanceof Kt?c=C.Im(t,n,i,r,a,k):this.path===C?C instanceof Qt&&(c=C.bv(t,r,k)):c=C.QL(t,r,k),c){let N=C;n!==null&&(N=n(C)),N&&(i===null||i(N))&&a.add(N)}nt.s(k)}}return l===void 0&&nt.s(u),c||this.background!==null}return l===void 0&&nt.s(u),!1}get isOrthogonal(){return(this.Da&2)===2}static sN(t){return(t&2)===2}get isAvoiding(){return(this.Da&4)===4}computeCurve(){if(this.$o===null){const t=this.fromPort,n=t!==null&&t===this.toPort,i=this.isOrthogonal;this.$o=n&&!i}return this.$o?9:this.curve}computeCorner(){if(this.curve===9)return 0;let t=this.corner;return(isNaN(t)||t<0)&&(t=10),t}findMidLabel(){const t=this.path,n=this.L.r,i=n.length;for(let a=0;a<i;a++){const l=n[a];if(!(l===t||l.isPanelMain)&&(l.segmentIndex===-1/0||isNaN(l.segmentIndex)))return l}const r=this.labelNodes;for(;r.next();){const a=r.value;if(a.segmentIndex===-1/0||isNaN(a.segmentIndex))return a}return null}computeSpacing(){if(!this.isVisible())return 0;let t=oe.Kv;t=Math.max(t,this.computeThickness());const n=this.fromPort,i=this.toPort;if(n!==null&&i!==null){const r=this.findMidLabel();if(r!==null){const a=r.naturalBounds,l=r.margin,u=isNaN(a.width)?30:a.width*r.scale+l.left+l.right,c=isNaN(a.height)?14:a.height*r.scale+l.top+l.bottom,f=r.segmentOrientation;if(f===21||f===25||f===24)t=Math.max(t,c);else if(f===23||f===27||f===22||f===26)t=Math.max(t,u);else{const m=n.getDocumentPoint(z.Center).directionPoint(i.getDocumentPoint(z.Center))/180*Math.PI;t=Math.max(t,Math.abs(Math.sin(m)*u)+Math.abs(Math.cos(m)*c)+1)}this.curve===9&&(t*=1.333)}}return t}arrangeBundledLinks(t,n){if(n)for(let i=0;i<t.length;i++){const r=t[i];r.computeAdjusting()===0&&r.invalidateRoute()}}computeCurviness(){let t=this.curviness;if(isNaN(t)){t=oe.Xv;const n=this.Zo;if(n!==null){const i=o.nt();let r=0;const a=n.qs;for(let u=0;u<a.length;u++){const c=a[u].computeSpacing();i.push(c),r+=c}let l=-r/2;for(let u=0;u<a.length;u++){if(a[u]===this){t=l+i[u]/2;break}l+=i[u]}n.ry===this.fromNode&&(t=-t),o.tt(i)}}return t}computeThickness(){if(!this.isVisible())return 0;const t=this.path;return t!==null?Math.max(t.strokeWidth,1):1}hasCurviness(){return!isNaN(this.curviness)||this.Zo!==null}Wv(t,n,i,r,a,l){const u=this.getLinkPoint(t,n,i,!0,!1,r,a),c=this.getLinkPoint(r,a,l,!1,!1,t,n);if(this.hasCurviness()){const f=c.x-u.x,m=c.y-u.y,p=this.computeCurviness(),y=p,w=u.x+f/2,b=u.y+m/2;let C=w,k=b;if(R.u(m,0))f>0?k-=y:k+=y;else{const N=-f/m;let F=Math.sqrt(y*y/(N*N+1));p<0&&(F=-F),C=(m<0?-1:1)*F+w,k=N*(C-w)+b}this.addPoint(u),this.addPointAt(C,k),this.addPoint(c)}else{this.addPoint(u),this.addPoint(c);const f=I.l();n.getDocumentBounds(f);const m=f.containsPoint(c);a.getDocumentBounds(f);const p=f.containsPoint(u);if(m||p){const y=n.getDocumentPoint(this.p1(i,!0),new T);this.setPoint(0,this.getLinkPointFromPoint(t,n,y,c,!0,y));const w=a.getDocumentPoint(this.p1(l,!1),new T);this.setPoint(1,this.getLinkPointFromPoint(r,a,w,u,!1,w))}I.s(f)}}qv(t,n,i,r,a,l){const u=this.getLinkPoint(t,n,i,!0,!1,r,a),c=this.getLinkPoint(r,a,l,!1,!1,t,n),f=c.x-u.x,m=c.y-u.y,p=this.computeCurviness();let y=0,w=0,b=u.x+f/3,C=u.y+m/3,k=b,N=C;R.u(m,0)?f>0?N-=p:N+=p:(y=-f/m,w=Math.sqrt(p*p/(y*y+1)),p<0&&(w=-w),k=(m<0?-1:1)*w+b,N=y*(k-b)+C),b=u.x+2*f/3,C=u.y+2*m/3;let F=b,D=C;R.u(m,0)?f>0?D-=p:D+=p:(F=(m<0?-1:1)*w+b,D=y*(F-b)+C),this.clearPoints(),this.addPoint(u),this.addPointAt(k,N),this.addPointAt(F,D),this.addPoint(c),this.setPoint(0,this.getLinkPoint(t,n,i,!0,!1,r,a)),this.setPoint(3,this.getLinkPoint(r,a,l,!1,!1,t,n))}adjustPoints(t,n,i,r){let a=this.computeAdjusting();if(this.isOrthogonal){if(a===18)return!1;a===19&&(a=17)}switch(a){case 18:return this._v(t,n,i,r);case 19:return this.tO(t,n,i,r);case 17:return this.iO(t,n,i,r);default:return!1}}_v(t,n,i,r){const a=this.getPoint(t),l=this.getPoint(i);if(a.equalsApprox(n)&&l.equalsApprox(r))return!0;const u=a.x,c=a.y,f=l.x,m=l.y;let p=f-u,y=m-c;const w=Math.sqrt(p*p+y*y);if(R.K(w,0))return!0;let b=0;R.K(p,0)?y<0?b=-Math.PI/2:b=Math.PI/2:(b=Math.atan(y/Math.abs(p)),p<0&&(b=Math.PI-b));const C=n.x,k=n.y,N=r.x,F=r.y,D=N-C,E=F-k,U=Math.sqrt(D*D+E*E);let $=0;R.K(D,0)?E<0?$=-Math.PI/2:$=Math.PI/2:($=Math.atan(E/Math.abs(D)),D<0&&($=Math.PI-$));const K=U/w,_=$-b;this.setPoint(t,n);for(let G=t+1;G<i;G++){const X=this.getPoint(G);p=X.x-u,y=X.y-c;const Q=Math.sqrt(p*p+y*y);if(R.K(Q,0))continue;let Z=0;R.K(p,0)?y<0?Z=-Math.PI/2:Z=Math.PI/2:(Z=Math.atan(y/Math.abs(p)),p<0&&(Z=Math.PI-Z));const et=Z+_,st=Q*K,ut=C+st*Math.cos(et),mt=k+st*Math.sin(et);this.setPointAt(G,ut,mt)}return this.setPoint(i,r),!0}tO(t,n,i,r){const a=this.getPoint(t),l=this.getPoint(i);if(a.equalsApprox(n)&&l.equalsApprox(r))return!0;const u=a.x,c=a.y,f=l.x,m=l.y,p=(f-u)*(f-u)+(m-c)*(m-c),y=n.x,w=n.y,b=r.x,C=r.y;let k=0,N=1;b-y!==0?(k=(C-w)/(b-y),N=Math.sqrt(1+1/(k*k))):k=9e9,this.setPoint(t,n);for(let F=t+1;F<i;F++){const D=this.getPoint(F),E=D.x,U=D.y;let $=.5;p!==0&&($=((u-E)*(u-f)+(c-U)*(c-m))/p);const K=u+$*(f-u),_=c+$*(m-c);let G=Math.sqrt((E-K)*(E-K)+(U-_)*(U-_));U<k*(E-K)+_&&(G=-G),k>0&&(G=-G);const X=y+$*(b-y),Q=w+$*(C-w);if(k!==0){const Z=X+G/N,et=Q-(Z-X)/k;this.setPointAt(F,Z,et)}else this.setPointAt(F,X,Q+G)}return this.setPoint(i,r),!0}iO(t,n,i,r){if(this.isOrthogonal){let a=this.getPoint(t),l=this.getPoint(t+1),u=this.getPoint(t+2),c=l.x,f=l.y;const m=c,p=f;R.u(a.y,l.y)?R.u(l.x,u.x)?f=n.y:R.u(l.y,u.y)&&(c=n.x):R.u(a.x,l.x)&&(R.u(l.y,u.y)?c=n.x:R.u(l.x,u.x)&&(f=n.y)),this.setPointAt(t+1,c,f),a=this.getPoint(i),l=this.getPoint(i-1),u=this.getPoint(i-2);let y=l.x,w=l.y;const b=y,C=w;if(R.u(a.y,l.y)?R.u(l.x,u.x)?w=r.y:R.u(l.y,u.y)&&(y=r.x):R.u(a.x,l.x)&&(R.u(l.y,u.y)?y=r.x:R.u(l.x,u.x)&&(w=r.y)),this.setPointAt(i-1,y,w),this.AL())return this.setPointAt(t+1,m,p),this.setPointAt(i-1,b,C),!1}return this.setPoint(t,n),this.setPoint(i,r),!0}addOrthoPoints(t,n,i,r,a,l){n<0?n+=360:n>=360&&(n-=360),r<0?r+=360:r>=360&&(r-=360);const u=r;n>=315||n<45?n=0:45<=n&&n<135?n=90:135<=n&&n<225?n=180:n=270,r>=315||r<45?r=0:45<=r&&r<135?r=90:135<=r&&r<225?r=180:r=270;const c=t,f=i,m=a.actualBounds.copy(),p=l.actualBounds.copy();if(!m.isReal()||!p.isReal())return;m.inflate(oe.va,oe.va),p.inflate(oe.va,oe.va),m.unionPoint(t),p.unionPoint(i);const y=T.l(),w=T.l();n===0?f.x>c.x||r===270&&f.y<c.y&&p.right>c.x||r===90&&f.y>c.y&&p.right>c.x?(y.e(f.x,c.y),w.e(f.x,(c.y+f.y)/2),r===180?(y.x=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!1),w.x=y.x,w.y=f.y):r===270&&f.y<c.y||r===90&&f.y>c.y?(c.x<p.left?y.x=this.computeMidOrthoPosition(c.x,c.y,p.left,f.y,!1):c.x<p.right&&(r===270&&c.y<p.top||r===90&&c.y>p.bottom)?y.x=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!1):y.x=p.right,w.x=y.x,w.y=f.y):r===0&&c.x<p.left&&c.y>p.top&&c.y<p.bottom&&(y.x=c.x,c.y<f.y?y.y=Math.min(f.y,p.top):y.y=Math.max(f.y,p.bottom),w.y=y.y)):(y.e(c.x,f.y),w.e((c.x+f.x)/2,f.y),(r===180||r===90&&f.y<m.top||r===270&&f.y>m.bottom)&&(r===180&&(p.containsPoint(c)||m.containsPoint(f))?y.y=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!0):f.y<c.y&&(r===180||r===90)?y.y=this.computeMidOrthoPosition(c.x,m.top,f.x,Math.max(f.y,p.bottom),!0):f.y>c.y&&(r===180||r===270)&&(y.y=this.computeMidOrthoPosition(c.x,m.bottom,f.x,Math.min(f.y,p.top),!0)),w.x=f.x,w.y=y.y),y.y>m.top&&y.y<m.bottom&&(f.x>=m.left&&f.x<=c.x||c.x<=p.right&&c.x>=f.x?(r===90||r===270)&&(y.e(Math.max((c.x+f.x)/2,c.x),c.y),w.e(y.x,f.y)):(r===270||(r===0||r===180)&&f.y<c.y?y.y=Math.min(f.y,r===0?m.top:Math.min(m.top,p.top)):y.y=Math.max(f.y,r===0?m.bottom:Math.max(m.bottom,p.bottom)),w.x=f.x,w.y=y.y))):n===180?f.x<c.x||r===270&&f.y<c.y&&p.left<c.x||r===90&&f.y>c.y&&p.left<c.x?(y.e(f.x,c.y),w.e(f.x,(c.y+f.y)/2),r===0?(y.x=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!1),w.x=y.x,w.y=f.y):r===270&&f.y<c.y||r===90&&f.y>c.y?(c.x>p.right?y.x=this.computeMidOrthoPosition(c.x,c.y,p.right,f.y,!1):c.x>p.left&&(r===270&&c.y<p.top||r===90&&c.y>p.bottom)?y.x=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!1):y.x=p.left,w.x=y.x,w.y=f.y):r===180&&c.x>p.right&&c.y>p.top&&c.y<p.bottom&&(y.x=c.x,c.y<f.y?y.y=Math.min(f.y,p.top):y.y=Math.max(f.y,p.bottom),w.y=y.y)):(y.e(c.x,f.y),w.e((c.x+f.x)/2,f.y),(r===0||r===90&&f.y<m.top||r===270&&f.y>m.bottom)&&(r===0&&(p.containsPoint(c)||m.containsPoint(f))?y.y=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!0):f.y<c.y&&(r===0||r===90)?y.y=this.computeMidOrthoPosition(c.x,m.top,f.x,Math.max(f.y,p.bottom),!0):f.y>c.y&&(r===0||r===270)&&(y.y=this.computeMidOrthoPosition(c.x,m.bottom,f.x,Math.min(f.y,p.top),!0)),w.x=f.x,w.y=y.y),y.y>m.top&&y.y<m.bottom&&(f.x<=m.right&&f.x>=c.x||c.x>=p.left&&c.x<=f.x?(r===90||r===270)&&(y.e(Math.min((c.x+f.x)/2,c.x),c.y),w.e(y.x,f.y)):(r===270||(r===0||r===180)&&f.y<c.y?y.y=Math.min(f.y,r===180?m.top:Math.min(m.top,p.top)):y.y=Math.max(f.y,r===180?m.bottom:Math.max(m.bottom,p.bottom)),w.x=f.x,w.y=y.y))):n===90?f.y>c.y||r===180&&f.x<c.x&&p.bottom>c.y||r===0&&f.x>c.x&&p.bottom>c.y?(y.e(c.x,f.y),w.e((c.x+f.x)/2,f.y),r===270?(y.y=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!0),w.x=f.x,w.y=y.y):r===180&&f.x<c.x||r===0&&f.x>c.x?(c.y<p.top?y.y=this.computeMidOrthoPosition(c.x,c.y,f.x,p.top,!0):c.y<p.bottom&&(r===180&&c.x<p.left||r===0&&c.x>p.right)?y.y=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!0):y.y=p.bottom,w.x=f.x,w.y=y.y):r===90&&c.y<p.top&&c.x>p.left&&c.x<p.right&&(c.x<f.x?y.x=Math.min(f.x,p.left):y.x=Math.max(f.x,p.right),y.y=c.y,w.x=y.x)):(y.e(f.x,c.y),w.e(f.x,(c.y+f.y)/2),(r===270||r===0&&f.x<m.left||r===180&&f.x>m.right)&&(r===270&&(p.containsPoint(c)||m.containsPoint(f))?y.x=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!1):f.x<c.x&&(r===270||r===0)?y.x=this.computeMidOrthoPosition(m.left,c.y,Math.max(f.x,p.right),f.y,!1):f.x>c.x&&(r===270||r===180)&&(y.x=this.computeMidOrthoPosition(m.right,c.y,Math.min(f.x,p.left),f.y,!1)),w.x=y.x,w.y=f.y),y.x>m.left&&y.x<m.right&&(f.y>=m.top&&f.y<=c.y||c.y<=p.bottom&&c.y>=f.y?(r===0||r===180)&&(y.e(c.x,Math.max((c.y+f.y)/2,c.y)),w.e(f.x,y.y)):(r===180||(r===90||r===270)&&f.x<c.x?y.x=Math.min(f.x,r===90?m.left:Math.min(m.left,p.left)):y.x=Math.max(f.x,r===90?m.right:Math.max(m.right,p.right)),w.x=y.x,w.y=f.y))):f.y<c.y||r===180&&f.x<c.x&&p.top<c.y||r===0&&f.x>c.x&&p.top<c.y?(y.e(c.x,f.y),w.e((c.x+f.x)/2,f.y),r===90?(y.y=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!0),w.x=f.x,w.y=y.y):r===180&&f.x<c.x||r===0&&f.x>=c.x?(c.y>p.bottom?y.y=this.computeMidOrthoPosition(c.x,c.y,f.x,p.bottom,!0):c.y>p.top&&(r===180&&c.x<p.left||r===0&&c.x>p.right)?y.y=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!0):y.y=p.top,w.x=f.x,w.y=y.y):r===270&&c.y>p.bottom&&c.x>p.left&&c.x<p.right&&(c.x<f.x?y.x=Math.min(f.x,p.left):y.x=Math.max(f.x,p.right),y.y=c.y,w.x=y.x)):(y.e(f.x,c.y),w.e(f.x,(c.y+f.y)/2),(r===90||r===0&&f.x<m.left||r===180&&f.x>m.right)&&(r===90&&(p.containsPoint(c)||m.containsPoint(f))?y.x=this.computeMidOrthoPosition(c.x,c.y,f.x,f.y,!1):f.x<c.x&&(r===90||r===0)?y.x=this.computeMidOrthoPosition(m.left,c.y,Math.max(f.x,p.right),f.y,!1):f.x>c.x&&(r===90||r===180)&&(y.x=this.computeMidOrthoPosition(m.right,c.y,Math.min(f.x,p.left),f.y,!1)),w.x=y.x,w.y=f.y),y.x>m.left&&y.x<m.right&&(f.y<=m.bottom&&f.y>=c.y||c.y>=p.top&&c.y<=f.y?(r===0||r===180)&&(y.e(c.x,Math.min((c.y+f.y)/2,c.y)),w.e(f.x,y.y)):(r===180||(r===90||r===270)&&f.x<c.x?y.x=Math.min(f.x,r===270?m.left:Math.min(m.left,p.left)):y.x=Math.max(f.x,r===270?m.right:Math.max(m.right,p.right)),w.x=y.x,w.y=f.y))),this.oN=r!==u,this.iN=n,this.eN=r,this.addPoint(y.copy()),this.addPoint(w.copy()),T.s(y),T.s(w)}computeMidOrthoPosition(t,n,i,r,a){let l=0;return this.hasCurviness()&&!this.computeSpot(!0,this.fromPort).isSide()&&!this.computeSpot(!1,this.toPort).isSide()&&(l=this.computeCurviness()),a?(n+r)/2+l:(t+i)/2+l}AL(){if(this.diagram===null||!this.isAvoiding||this.diagram.animationManager.isTicking)return!1;const t=this.points.r,n=t.length;if(n<4)return!1;const i=this.diagram.getPositions(!1,this.containingGroup,null);for(let r=1;r<n-2;r++){const a=t[r],l=t[r+1];if(!i.isUnoccupied(Math.min(a.x,l.x),Math.min(a.y,l.y),Math.abs(a.x-l.x),Math.abs(a.y-l.y)))return!0}return!1}findClosestSegment(t){const n=t.x,i=t.y;let r=this.getPoint(0),a=this.getPoint(1),l=T.distanceLineSegmentSquared(n,i,r.x,r.y,a.x,a.y),u=0;for(let c=1;c<this.pointsCount-1;c++){r=this.getPoint(c+1);const f=T.distanceLineSegmentSquared(n,i,a.x,a.y,r.x,r.y);a=r,f<l&&(u=c,l=f)}return u}ee(){this.wh=!1,this.c()}get wh(){return(this.Nt&128)!==0}set wh(t){(this.Nt&128)!==0!==t&&(this.Nt=this.Nt^128)}get geometry(){if(!this.wh){if(this.updateRoute(),this.pointsCount<2)return this.wh=!0,this.ct;this.ct=this.makeGeometry()}return this.ct}cd(t){if(!t){if(this.Me===!1)return;const a=this.findMainElement();if(this.wh&&(a===null||a.geometry!==null))return}this.pointsCount<2?this.wh=!0:this.ct=this.makeGeometry();const n=this.path;if(n===null)return;n.ct=this.ct;const i=this.L.r,r=i.length;for(let a=0;a<r;a++){const l=i[a];l!==n&&l.isPanelMain&&l instanceof Qt&&(l.ct=this.ct)}}eO(t){return this.Oa()&&t.Jl.has(this)&&(this.Mf.width!==0||this.Mf.height!==0)&&(t.animationManager.isAnimating||t.currentTool!==t.toolManager)}makeGeometry(){const t=this.ct,n=this.pointsCount;let i=!1;const r=this.diagram;r!==null&&this.eO(r)&&(i=!0);let a=0,l=0,u=this.getPoint(0).copy();const c=u.copy(),f=this.ki.r,m=this.computeCurve();if(m===9&&n>=3&&!R.K(this.smoothness,0))if(n===3){let p=this.getPoint(1);a=Math.min(u.x,p.x),l=Math.min(u.y,p.y),p=this.getPoint(2),a=Math.min(a,p.x),l=Math.min(l,p.y)}else if(this.isOrthogonal){for(let p=0;p<n;p++){const y=f[p];c.x=Math.min(y.x,c.x),c.y=Math.min(y.y,c.y)}a=c.x,l=c.y}else{for(let p=3;p<n;p+=3){p+3>=n&&(p=n-1);const y=this.getPoint(p);c.x=Math.min(y.x,c.x),c.y=Math.min(y.y,c.y)}a=c.x,l=c.y}else{for(let p=0;p<n;p++){const y=f[p];c.x=Math.min(y.x,c.x),c.y=Math.min(y.y,c.y)}a=c.x,l=c.y}if(a-=this.f1.x,l-=this.f1.y,u.x-=a,u.y-=l,n===2&&!this.Oa()){let p=this.getPoint(1).copy();return p.x-=a,p.y-=l,this.computeShortLength(!0)!==0&&(u=this.Cf(u,!0,c)),this.computeShortLength(!1)!==0&&(p=this.Cf(p,!1,c)),t.type=1,t.startX=u.x,t.startY=u.y,t.endX=p.x,t.endY=p.y,this.wh=!0,t}else{t.type=4;const p=Ro.mC(t);if(this.computeShortLength(!0)!==0&&(u=this.Cf(u,!0,c)),p.uu(u.x,u.y,!1,!1),m===9&&n>=3&&!R.K(this.smoothness,0))if(n===3){const y=this.getPoint(1),w=y.x-a,b=y.y-l;let C=this.getPoint(2).copy();C.x-=a,C.y-=l,this.computeShortLength(!1)!==0&&(C=this.Cf(C,!1,c)),p.dr(w,b,w,b,C.x,C.y)}else if(this.isOrthogonal){const y=T.X(a,l),w=T.l();w.a(this.getPoint(1));const b=T.X(a,l),C=T.X(a,l);let k=this.getPoint(0),N=null;const F=this.smoothness/3;for(let $=1;$<this.pointsCount-1;$++){N=this.getPoint($);const K=k,_=N,G=this.getPoint(this.lN(N,$,!1));R.K(K.x,_.x)&&R.K(_.x,G.x)||R.K(K.y,_.y)&&R.K(_.y,G.y)||(this.sO(K,_,G,F,b,C),($===1||$===2&&R.K(k.x,this.getPoint(0).x)&&R.K(k.y,this.getPoint(0).y))&&(w.x=(k.x+N.x)*.5,w.y=(k.y+N.y)*.5),p.dr(w.x-a,w.y-l,b.x-a,b.y-l,N.x-a,N.y-l),y.set(b),w.set(C),k=N)}let D=k.x,E=k.y,U=this.getPoint(this.pointsCount-1);this.computeShortLength(!1)!==0&&(U=this.Cf(U.copy(),!1,T.Po)),D=.5*(D+U.x),E=.5*(E+U.y),p.dr(C.x-a,C.y-l,D-a,E-l,U.x-a,U.y-l),T.s(y),T.s(w),T.s(b),T.s(C)}else for(let y=3;y<n;y+=3){const w=this.getPoint(y-2);y+3>=n&&(y=n-1);const b=this.getPoint(y-1);let C=this.getPoint(y);y===n-1&&this.computeShortLength(!1)!==0&&(C=this.Cf(C.copy(),!1,T.Po)),p.dr(w.x-a,w.y-l,b.x-a,b.y-l,C.x-a,C.y-l)}else{const y=T.l();y.a(this.getPoint(0));const w=T.l();w.a(y);const b=this.computeCorner();let C=1,k=0;for(;C<n;){C=this.lN(y,C,C>1);let N=this.getPoint(C);if(C>=n-1){if(!y.equals(N))this.computeShortLength(!1)!==0&&(N=this.Cf(N.copy(),!1,T.Po)),this.Nn(p,-a,-l,y,N,i);else if(k===0)for(C=1;C<n;)w.a(y),N=this.getPoint(C++),this.Nn(p,-a,-l,y,N,i),y.a(N);break}k=this.lN(N,C+1,C<n-3);const F=this.getPoint(k);this.nO(p,-a,-l,y,N,F,y,w,b,i),w.a(N),C=k}T.s(y)}return Ro.pC(p),this.wh=!0,t}}b1(t,n,i,r){let a=i-t;if(isNaN(a)||a===1/0||a===-1/0)return NaN;a<0&&(a=-a);let l=r-n;return isNaN(l)||l===1/0||l===-1/0?NaN:(l<0&&(l=-l),R.K(a,0)?l:R.K(l,0)?a:Math.sqrt(a*a+l*l))}sO(t,n,i,r,a,l){isNaN(r)&&(r=this.smoothness/3);const u=t.x,c=t.y,f=n.x,m=n.y,p=i.x,y=i.y,w=r*this.b1(u,c,f,m),b=r*this.b1(f,m,p,y);if(R.K(c,m)&&R.K(f,p)&&(f>u?y>m?(a.x=f-w,a.y=m-w,l.x=f+b,l.y=m+b):(a.x=f-w,a.y=m+w,l.x=f+b,l.y=m-b):y>m?(a.x=f+w,a.y=m-w,l.x=f-b,l.y=m+b):(a.x=f+w,a.y=m+w,l.x=f-b,l.y=m-b)),R.K(u,f)&&R.K(m,y)&&(m>c?p>f?(a.x=f-w,a.y=m-w,l.x=f+b,l.y=m+b):(a.x=f+w,a.y=m-w,l.x=f-b,l.y=m+b):p>f?(a.x=f-w,a.y=m+w,l.x=f+b,l.y=m-b):(a.x=f+w,a.y=m+w,l.x=f-b,l.y=m-b)),R.K(u,f)&&R.K(f,p)||R.K(c,m)&&R.K(m,y)){const C=.5*(u+p),k=.5*(c+y);a.x=C,a.y=k,l.x=C,l.y=k}}Cf(t,n,i){const r=this.pointsCount;if(r<2)return t;if(n){const a=this.getPoint(1),l=a.x-i.x,u=a.y-i.y,c=this.b1(t.x,t.y,l,u);if(c===0)return t;const f=r===2?c*.5:c;let m=this.computeShortLength(!0);m>f&&(m=f);const p=m*(l-t.x)/c,y=m*(u-t.y)/c;t.x+=p,t.y+=y}else{const a=this.getPoint(r-2),l=a.x-i.x,u=a.y-i.y,c=this.b1(t.x,t.y,l,u);if(c===0)return t;const f=r===2?c*.5:c;let m=this.computeShortLength(!1);m>f&&(m=f);const p=m*(t.x-l)/c,y=m*(t.y-u)/c;t.x-=p,t.y-=y}return t}lN(t,n,i){const r=this.pointsCount;let a=t;for(;R.K(t.x,a.x)&&R.K(t.y,a.y);){if(n>=r)return r-1;a=this.getPoint(n++)}if(!R.K(t.x,a.x)&&!R.K(t.y,a.y))return n-1;let l=a;for(;R.K(t.x,a.x)&&R.K(a.x,l.x)&&(!i||(t.y>=a.y?a.y>=l.y:a.y<=l.y))||R.K(t.y,a.y)&&R.K(a.y,l.y)&&(!i||(t.x>=a.x?a.x>=l.x:a.x<=l.x));){if(n>=r)return r-1;l=this.getPoint(n++)}return n-2}nO(t,n,i,r,a,l,u,c,f,m){if(R.u(r.y,a.y)&&R.u(a.x,l.x)){let p=Math.min(f,Math.abs(a.x-c.x)/2);const y=Math.min(p,Math.abs(l.y-a.y)/2);if(p=y,R.u(p,0)){this.Nn(t,n,i,r,a,m),u.a(a);return}let w=a.x;const b=a.y,C=w;let k=b;a.x>r.x?(w=a.x-p,l.y>a.y?k=a.y+y:k=a.y-y):(w=a.x+p,l.y>a.y?k=a.y+y:k=a.y-y);const N=T.X(w,b);this.Nn(t,n,i,r,N,m),T.s(N),t.Mw(a.x+n,a.y+i,C+n,k+i),u.e(C,k)}else if(R.u(r.x,a.x)&&R.u(a.y,l.y)){let p=Math.min(f,Math.abs(a.y-c.y)/2);const y=Math.min(p,Math.abs(l.x-a.x)/2);if(p=y,R.u(y,0)){this.Nn(t,n,i,r,a,m),u.a(a);return}const w=a.x;let b=a.y,C=w;const k=b;a.y>r.y?(b=a.y-p,l.x>a.x?C=a.x+y:C=a.x-y):(b=a.y+p,l.x>a.x?C=a.x+y:C=a.x-y);const N=T.X(w,b);this.Nn(t,n,i,r,N,m),T.s(N),t.Mw(a.x+n,a.y+i,C+n,k+i),u.e(C,k)}else this.Nn(t,n,i,r,a,m),u.a(a)}computeJumpLength(){return 10}Nn(t,n,i,r,a,l){if(l||!this.Oa())t.ur(a.x+n,a.y+i);else{const u=this.computeJumpLength(),c=u/2,f=[];let m=0;this.isVisible()&&(m=this.oO(r,a,f));let p=r.x,y=r.y;if(m>0){if(R.u(r.y,a.y))if(r.x<a.x){let w=0;for(;w<m;){const b=Math.max(r.x,Math.min(f[w++]-c,a.x-u));t.ur(b+n,a.y+i),p=b+n,y=a.y+i;let C=Math.min(b+u,a.x);for(;w<m;){const D=f[w];if(D<C+u)w++,C=Math.min(D+c,a.x);else break}const k=a.y-u+i,N=C+n,F=a.y+i;this.curve===10?t.uu(N,F,!1,!1):t.dr(p,k,N,k,N,F),p=N,y=F}}else{let w=m-1;for(;w>=0;){const b=Math.min(r.x,Math.max(f[w--]+c,a.x+u));t.ur(b+n,a.y+i),p=b+n,y=a.y+i;let C=Math.max(b-u,a.x);for(;w>=0;){const D=f[w];if(D>C-u)w--,C=Math.max(D-c,a.x);else break}const k=a.y-u+i,N=C+n,F=a.y+i;this.curve===10?t.uu(N,F,!1,!1):t.dr(p,k,N,k,N,F),p=N,y=F}}else if(R.u(r.x,a.x))if(r.y<a.y){let w=0;for(;w<m;){const b=Math.max(r.y,Math.min(f[w++]-c,a.y-u));t.ur(a.x+n,b+i),p=a.x+n,y=b+i;let C=Math.min(b+u,a.y);for(;w<m;){const D=f[w];if(D<C+u)w++,C=Math.min(D+c,a.y);else break}const k=a.x-u+n,N=a.x+n,F=C+i;this.curve===10?t.uu(N,F,!1,!1):t.dr(k,y,k,F,N,F),p=N,y=F}}else{let w=m-1;for(;w>=0;){const b=Math.min(r.y,Math.max(f[w--]+c,a.y+u));t.ur(a.x+n,b+i),p=a.x+n,y=b+i;let C=Math.max(b-u,a.y);for(;w>=0;){const D=f[w];if(D>C-u)w--,C=Math.max(D-c,a.y);else break}const k=a.x-u+n,N=a.x+n,F=C+i;this.curve===10?t.uu(N,F,!1,!1):t.dr(k,y,k,F,N,F),p=N,y=F}}}t.ur(a.x+n,a.y+i)}}oO(t,n,i){const r=this.diagram;if(r===null||t.equals(n))return 0;const a=r.layers;for(;a.next();){const l=a.value;if(l!==null&&l.visible){const u=l.ES(),c=u.length;for(let f=0;f<c;f++){const m=u[f];if(!(m instanceof oe))continue;if(m===this)return i.length>0&&i.sort((w,b)=>w-b),i.length;if(!m.isVisible()||!m.Oa())continue;const p=m.routeBounds;if(!p.isReal()||!this.routeBounds.intersectsRect(p)||this.usesSamePort(m))continue;const y=m.path;y!==null&&y.isVisibleObject()&&this.rO(t,n,i,m)}}}return i.length>0&&i.sort((l,u)=>l-u),i.length}rO(t,n,i,r){const a=R.u(t.y,n.y),l=r.pointsCount;let u=r.getPoint(0);const c=T.l();for(let f=1;f<l;f++){const m=r.getPoint(f);if(f<l-1){const p=r.getPoint(f+1);if(u.y===m.y&&m.y===p.y){if(m.x>u.x&&p.x>=m.x||m.x<u.x&&p.x<=m.x)continue}else if(u.x===m.x&&m.x===p.x&&(m.y>u.y&&p.y>=m.y||m.y<u.y&&p.y<=m.y))continue}this.lO(t,n,u,m,c)&&(a?i.push(c.x):i.push(c.y)),u=m}T.s(c)}lO(t,n,i,r,a){const l=t.x,u=t.y,c=n.x,f=n.y,m=i.x,p=i.y,y=r.x,w=r.y;if(R.u(l,c)){if(!R.u(u,f)&&R.u(p,w)&&Math.min(u,f)<p&&Math.max(u,f)>p&&Math.min(m,y)<l&&Math.max(m,y)>l&&!R.u(m,y))return a.x=l,a.y=p,!0}else if(R.u(u,f)&&R.u(m,y)&&Math.min(l,c)<m&&Math.max(l,c)>m&&Math.min(p,w)<u&&Math.max(p,w)>u&&!R.u(p,w))return a.x=m,a.y=u,!0;return a.x=0,a.y=0,!1}get firstPickIndex(){return this.pointsCount<=2?0:this.isOrthogonal||!this.Bd(this.computeSpot(!0))?1:0}get lastPickIndex(){const t=this.pointsCount;return t===0?0:t<=2?t-1:this.isOrthogonal||!this.Bd(this.computeSpot(!1))?t-2:t-1}Oa(){const t=this.curve;return t===11||t===10}g1(t){if(t||this.Oa()){const n=this.diagram;n!==null&&!n.animationManager.isTicking&&!n.Jl.has(this)&&(this.Mf.width!==0||this.Mf.height!==0)&&n.Jl.set(this,this.Mf.copy())}}invalidateOtherJumpOvers(t){const n=this.layer;if(n===null||!n.visible||n.isTemporary)return;const i=n.diagram;if(i===null||i.animationManager.isTicking)return;let r=!1;const a=i.layers;for(;a.next();){const l=a.value;if(l.visible){if(l===n){r=!0;let u=!1;const c=l.ES(),f=c.length;for(let m=0;m<f;m++){const p=c[m];p instanceof oe&&(p===this?u=!0:u&&this.oT(p,t))}}else if(r){const u=l.ES(),c=u.length;for(let f=0;f<c;f++){const m=u[f];m instanceof oe&&this.oT(m,t)}}}}}oT(t,n){if(t===null||!t.wh||!t.Me||!t.Oa())return;const i=t.routeBounds;i.isReal()&&(!this.routeBounds.intersectsRect(i)&&!n.intersectsRect(i)||this.usesSamePort(t)||t.ee())}usesSamePort(t){const n=this.pointsCount,i=t.pointsCount;if(n>0&&i>0){const r=this.getPoint(0),a=t.getPoint(0);if(r.equalsApprox(a))return!0;const l=this.getPoint(n-1),u=t.getPoint(i-1);if(l.equalsApprox(u)||r.equalsApprox(u)||l.equalsApprox(a))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1}isVisible(){if(!super.isVisible())return!1;const t=this.containingGroup;let n=!0;const i=this.diagram;i!==null&&(n=i.isTreePathToChildren);const r=this.fromNode;if(r!==null){if(this.isTreeLink&&n&&!r.isTreeExpanded)return!1;if(r===t)return!0;let l=r;for(;l!==null;){if(l.labeledLink===this)return!0;l=l.containingGroup}const u=r.findVisibleNode();if(u===null||u===t)return!1}const a=this.toNode;if(a!==null){if(this.isTreeLink&&!n&&!a.isTreeExpanded)return!1;if(a===t)return!0;let l=a;for(;l!==null;){if(l.labeledLink===this)return!0;l=l.containingGroup}const u=a.findVisibleNode();if(u===null||u===t)return!1}return!0}Ei(t){if(super.Ei(t),t&&this.g1(!1),this.Zo!==null&&this.Zo.Dd(),this.Hs!==null){const n=this.Hs.iterator;for(;n.next();)n.value.Ei(t)}}get adjusting(){return this.Sf}set adjusting(t){const n=this.Sf;n!==t&&(this.Sf=t,this.t("adjusting",n,t))}computeAdjusting(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?17:this.Sf}get corner(){return this.vd}set corner(t){const n=this.vd;n!==t&&(this.vd=t,this.ee(),this.t("corner",n,t))}get curve(){return this.Od}set curve(t){const n=this.Od;n!==t&&(this.Od=t,this.invalidateRoute(),this.ee(),this.g1(n===10||n===11||t===10||t===11),this.t("curve",n,t))}get curviness(){return this.Id}set curviness(t){const n=this.Id;n!==t&&(this.Id=t,this.invalidateRoute(),this.ee(),this.t("curviness",n,t))}get routing(){return this.Da}set routing(t){const n=this.Da;n!==t&&(this.Da=t,this.isAvoiding&&this.diagram!==null&&(this.diagram.jm=!0),this.$o=null,this.invalidateRoute(),this.g1(oe.sN(n)||oe.sN(t)),this.t("routing",n,t))}get smoothness(){return this.Ed}set smoothness(t){const n=this.Ed;n!==t&&(this.Ed=t,this.ee(),this.t("smoothness",n,t))}wy(){const t=this.lo;if(t===null)return;const n=this.ao;if(n===null||!isNaN(this.curviness))return;const i=this.ho,r=this.co;let a=null,l=null;const u=t._t.r,c=u.length;for(let f=0;f<c;f++){const m=u[f];!(m.lo===t&&m.ho===i&&m.ao===n&&m.co===r)&&!(m.lo===n&&m.ho===r&&m.ao===t&&m.co===i)||(l===null?l=m:(a===null&&(a=[],a.push(l)),a.push(m)))}if(a!==null){let f=t.$A(n,i,r);f===null&&(f=new fC(t,i,n,r),t.WA(f),n.WA(f)),f.qs=a;for(let m=0;m<a.length;m++){const p=a[m];p.Zo=f}f.Dd()}}yy(){const t=this.Zo;if(t!==null){if(!isNaN(this.curviness))return;this.Zo=null;const n=t.qs.indexOf(this);n>=0&&(o.tc(t.qs,n),t.Dd())}}Nl(){return!0}get key(){const t=this.diagram;if(!(t===null||!t.model.Ta()))return t.model.getKeyForLinkData(this.data)}};v(oe,"Fa",null),v(oe,"Ra",null),v(oe,"Normal",1),v(oe,"Orthogonal",2),v(oe,"AvoidsNodes",6),v(oe,"AvoidsNodesStraight",7),v(oe,"None",0),v(oe,"Bezier",9),v(oe,"JumpGap",10),v(oe,"JumpOver",11),v(oe,"End",17),v(oe,"Scale",18),v(oe,"Stretch",19),v(oe,"OrientAlong",21),v(oe,"OrientPlus90",22),v(oe,"OrientMinus90",23),v(oe,"OrientOpposite",24),v(oe,"OrientUpright",25),v(oe,"OrientPlus90Upright",26),v(oe,"OrientMinus90Upright",27),v(oe,"OrientUpright45",28),v(oe,"zv",8),v(oe,"Xv",16),v(oe,"Kv",14),v(oe,"va",8);let Gt=oe;class fC{constructor(e,t,n,i){v(this,"Eo");v(this,"Os");v(this,"ry");v(this,"J2");v(this,"h1");v(this,"$2");v(this,"qs");L.Gi(this),this.Eo=!1,this.Os=!1,this.ry=e,this.J2=t,this.h1=n,this.$2=i,this.qs=[]}Dd(){if(!this.Eo){const e=this.qs;if(e.length>0){const t=e[0].diagram;t!==null&&(t.lM.add(this),this.Os=t.undoManager.isUndoingRedoing)}}this.Eo=!0}bM(){if(this.Eo){this.Eo=!1;const e=this.qs;if(e.length>0){const t=e[0],n=t.diagram,i=n===null||n.Bh&&!this.Os;this.Os=!1,t.arrangeBundledLinks(e,i),e.length===1&&(t.Zo=null,e.length=0)}e.length===0&&(this.ry.JA(this),this.h1.JA(this))}}}const Ae=class Ae{constructor(e){v(this,"oe");v(this,"re");v(this,"Ia");v(this,"Ea");v(this,"pi");v(this,"yi");v(this,"Ot");v(this,"xh");v(this,"bh");v(this,"ha");v(this,"RM");v(this,"Eo");v(this,"by");v(this,"Gc");v(this,"vM");v(this,"OM");L.Gi(this),this.ha=null,this.RM=null,this.Eo=!0,this.by=!1,this.oe=1,this.re=1,this.Ia=-1,this.Ea=-1,this.pi=e.width,this.yi=e.height,this.Ot=null,this.xh=0,this.bh=0,this.Gc=11,this.vM=this.Gc*2,this.OM=this.Gc*2}kb(e){if(e.width<=0||e.height<=0)return;const t=e.x,n=e.y,i=e.x+e.width,r=e.y+e.height;this.oe=Math.floor((t-this.pi)/this.pi)*this.pi,this.re=Math.floor((n-this.yi)/this.yi)*this.yi,this.Ia=Math.ceil((i+2*this.pi)/this.pi)*this.pi,this.Ea=Math.ceil((r+2*this.yi)/this.yi)*this.yi;const a=1+(Math.ceil((this.Ia-this.oe)/this.pi)|0),l=1+(Math.ceil((this.Ea-this.re)/this.yi)|0);if(this.Ot===null||this.xh<a-1||this.bh<l-1){const u=[];for(let c=0;c<=a;c++)u[c]=new Uint32Array(l);this.Ot=u,this.xh=a-1,this.bh=l-1}this.hO(Ae.hN)}get bounds(){return new I(this.oe,this.re,this.Ia-this.oe,this.Ea-this.re)}get cellWidth(){return this.pi}set cellWidth(e){e>0&&e!==this.pi&&(this.pi=e,this.kb(this.bounds))}get cellHeight(){return this.yi}set cellHeight(e){e>0&&e!==this.yi&&(this.yi=e,this.kb(this.bounds))}zd(e,t){return this.oe<=e&&e<=this.Ia&&this.re<=t&&t<=this.Ea}fo(e,t){if(!this.zd(e,t))return Ae.hN;e-=this.oe,e/=this.pi,t-=this.re,t/=this.yi;const n=e|0,i=t|0;return this.Ot[n][i]}pR(e,t,n,i){if(!this.zd(e,t))return;const r=(e-this.oe)/this.pi|0,a=(t-this.re)/this.yi|0,l=(e+n-this.oe)/this.pi|0,u=(t+i-this.re)/this.yi|0,c=Math.min(l,this.xh),f=Math.min(u,this.bh);for(let m=r;m<=c;m++){const p=this.Ot[m];if(p.fill)p.fill(Ae.Ws,a,f+1);else for(let y=a;y<=f;y++)p[y]=Ae.Ws}}hO(e){if(this.Ot!==null)for(let t=0;t<=this.xh;t++){const n=this.Ot[t];if(n.fill)n.fill(e);else for(let i=0;i<=this.bh;i++)n[i]=e}}zL(){if(this.Ot!==null)for(let e=0;e<=this.xh;e++){const t=this.Ot[e];for(let n=0;n<=this.bh;n++)t[n]>=Ae.Ba&&(t[n]=Ae.hN)}}aO(e,t){return this.fo(e,t)===Ae.Ws}isUnoccupied(e,t,n,i){if(e>this.Ia||e+n<this.oe||t>this.Ea||t+i<this.re)return!0;let r=(e-this.oe)/this.pi|0,a=(t-this.re)/this.yi|0,l=Math.max(0,n)/this.pi+1|0,u=Math.max(0,i)/this.yi+1|0;if(r<0&&(l+=r,r=0),a<0&&(u+=a,a=0),l<0||u<0)return!0;const c=Math.min(r+l-1,this.xh)|0,f=Math.min(a+u-1,this.bh)|0;for(let m=r;m<=c;m++){const p=this.Ot[m];for(let y=a;y<=f;y++)if(p[y]===Ae.Ws)return!1}return!0}maxAvoidsLinksSpaceH(e,t,n,i){if(e>this.Ia||t<this.oe||n>this.Ea||n<this.re)return 0;const r=(e-this.oe)/this.pi|0,a=(t-this.oe)/this.pi|0,l=(n-this.re)/this.yi|0,u=i/this.yi+1|0;let c;for(c=0;c<u/2;c++){let f=!1;for(let m=r;m<=a;m++)if(this.Ot[m][l+c]===Ae.Ws||this.Ot[m][l-c]===Ae.Ws){f=!0;break}if(f)return Math.max(0,(2*c-1)*this.yi)}return i}maxAvoidsLinksSpaceV(e,t,n,i){if(e>this.Ea||t<this.re||n>this.Ia||n<this.oe)return 0;const r=(e-this.re)/this.yi|0,a=(t-this.re)/this.yi|0,l=(n-this.oe)/this.pi|0,u=i/this.pi+1|0;let c;for(c=0;c<u/2;c++){let f=!1;for(let m=r;m<=a;m++)if(this.Ot[l+c][m]===Ae.Ws||this.Ot[l-c][m]===Ae.Ws){f=!0;break}if(f)return Math.max(0,(2*c-1)*this.pi)}return i}cO(e,t,n,i,r,a,l,u){e=e|0,t=t|0;let c=this.Ot[e][t];if(c>=Ae.Ba&&c<Ae.Vd)for(i?t+=n:e+=n,c+=1;r<=e&&e<=a&&l<=t&&t<=u;){const f=this.Ot[e][t];if(c>=f)break;this.Ot[e][t]=c,c+=1,i?t+=n:e+=n}return i?t:e}uo(e,t,n,i,r,a,l,u){if(e<r||e>a||t<l||t>u)return;const c=this.cO(e,t,n,i,r,a,l,u);if(i)if(n>0)for(let f=t+n;f<c;f+=n)this.uo(e,f,1,!i,r,a,l,u),this.uo(e,f,-1,!i,r,a,l,u);else for(let f=t+n;f>c;f+=n)this.uo(e,f,1,!i,r,a,l,u),this.uo(e,f,-1,!i,r,a,l,u);else if(n>0)for(let f=e+n;f<c;f+=n)this.uo(f,t,1,!i,r,a,l,u),this.uo(f,t,-1,!i,r,a,l,u);else for(let f=e+n;f>c;f+=n)this.uo(f,t,1,!i,r,a,l,u),this.uo(f,t,-1,!i,r,a,l,u)}k1(e,t,n,i,r,a,l,u,c,f){let m=e|0,p=t|0,y=Ae.Ws,w=Ae.Ba;for(this.Ot[m][p]=w;y===Ae.Ws&&m>l&&m<u&&p>c&&p<f;)w+=1,this.Ot[m][p]=w,a?p+=r:m+=r,y=this.Ot[m][p];return a?p:m}P1(e,t,n,i,r,a,l,u,c,f){let m=n|0,p=i|0,y=Ae.Ws;const w=Ae.Vd;for(this.Ot[m][p]=w;y===Ae.Ws&&m>l&&m<u&&p>c&&p<f;)this.Ot[m][p]=w,a?p+=r:m+=r,y=this.Ot[m][p]}rT(e,t,n,i,r,a){if(this.Ot===null)return;this.by=!1;let l=e.x,u=e.y;if(!this.zd(l,u))return;l-=this.oe,l/=this.pi,u-=this.re,u/=this.yi;let c=n.x,f=n.y;if(!this.zd(c,f))return;if(c-=this.oe,c/=this.pi,f-=this.re,f/=this.yi,Math.abs(l-c)<=1&&Math.abs(u-f)<=1){this.by=!0;return}let m=r.x,p=r.y,y=r.x+r.width,w=r.y+r.height;m-=this.oe,m/=this.pi,p-=this.re,p/=this.yi,y-=this.oe,y/=this.pi,w-=this.re,w/=this.yi;const b=Math.max(0,Math.min(this.xh,m|0)),C=Math.min(this.xh,Math.max(0,y|0)),k=Math.max(0,Math.min(this.bh,p|0)),N=Math.min(this.bh,Math.max(0,w|0)),F=0,D=90,E=270,U=this.Ot,$=l|0,K=u|0,_=c|0,G=f|0,X=t===F||t===D?1:-1,Q=t===D||t===E;U[$][K]===Ae.Ws?(this.k1($,K,_,G,X,Q,b,C,k,N),this.k1($,K,_,G,1,!Q,b,C,k,N),this.k1($,K,_,G,-1,!Q,b,C,k,N)):this.k1($,K,_,G,X,Q,$,K,$,K),U[_][G]===Ae.Ws?(this.P1($,K,_,G,i===F||i===D?1:-1,i===D||i===E,b,C,k,N),this.P1($,K,_,G,1,!(i===D||i===E),b,C,k,N),this.P1($,K,_,G,-1,!(i===D||i===E),b,C,k,N)):this.P1($,K,_,G,X,Q,_,G,_,G);const Z=o.nt();if(a&&this.lT(_,G,i,$,K,Z)){(Z[0]!==_||Z[1]!==G)&&(Z.unshift(G),Z.unshift(_)),(Z[Z.length-2]!==$||Z[Z.length-1]!==K)&&(Z.push($),Z.push(K));let et=Ae.Ba,st=Z[Z.length-2],ut=Z[Z.length-1];U[st][ut]=et++;for(let mt=Z.length-4;mt>=0;mt-=2){st=Z[mt+2],ut=Z[mt+3];const at=Z[mt],vt=Z[mt+1];for(;at>st?st++:at<st?st--:vt>ut?ut++:vt<ut&&ut--,U[st][ut]=et++,!(st===at&&ut===vt););}}else this.uo($,K,1,!1,b,C,k,N),this.uo($,K,-1,!1,b,C,k,N),this.uo($,K,1,!0,b,C,k,N),this.uo($,K,-1,!0,b,C,k,N);o.tt(Z)}lT(e,t,n,i,r,a){const l=this.Ot;let u=e,c=t;for(;;){if(u===i&&c===r)return!0;let f=u,m=c;if(n===0)if(f<i)f++;else break;else if(n===90)if(m<r)m++;else break;else if(n===180)if(f>i)f--;else break;else if(m>r)m--;else break;const p=l[f][m];if(p===0||p===Ae.aN)break;u=f,c=m}for(;;){let f=n,m=u,p=c;n===0?p<r?(f=90,p++):p>r&&(f=270,p--):n===90?m<i?(f=0,m++):m>i&&(f=180,m--):n===180?p<r?(f=90,p++):p>r&&(f=270,p--):m<i?(f=0,m++):m>i&&(f=180,m--);const y=l[m][p];if(f!==n&&y!==0&&y!==Ae.aN){if(a.push(u),a.push(c),this.lT(u,c,f,i,r,a))return!0;a.pop(),a.pop()}if(l[u][c]=Ae.aN,n===0){if(u===e)return!1;u--}else if(n===90){if(c===t)return!1;c--}else if(n===180){if(u===e)return!1;u++}else{if(c===t)return!1;c++}}}};v(Ae,"Ws",0),v(Ae,"Ba",1),v(Ae,"Vd",999999),v(Ae,"hN",Ae.Vd+1),v(Ae,"aN",Ae.Vd+2);let sr=Ae;class hd{constructor(){v(this,"de");v(this,"Qo");v(this,"rs");v(this,"Xd");L.Gi(this),this.de=null,this.Qo=null,this.rs=[],this.Xd=!1}toString(){const e=this.rs;let t=this.de.toString()+" "+e.length.toString()+":";for(let n=0;n<e.length;n++){const i=e[n];i!==null&&(t+=`
  `+i.toString())}return t}fO(e,t,n,i){const r=t.offsetY;switch(r){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}let a=n;switch(r){case 9:return a>180?270:90;case 6:return a>90&&a<=270?180:0}const l=Math.atan2(e.height,e.width)*180/Math.PI;switch(r){case 3:return a>l&&a<=180+l?180:270;case 5:return a>180-l&&a<=360-l?270:0;case 12:return a>l&&a<=180+l?90:0;case 10:return a>180-l&&a<=360-l?180:90;case 7:return a>90&&a<=180+l?180:a>180+l&&a<=360-l?270:0;case 13:return a>180&&a<=360-l?270:a>l&&a<=180?90:0;case 14:return a>l&&a<=180-l?90:a>180-l&&a<=270?180:0;case 11:return a>180-l&&a<=180+l?180:a>180+l?270:90}return i&&r!==15&&(a-=15,a<0&&(a+=360)),a>l&&a<180-l?90:a>=180-l&&a<=180+l?180:a>180+l&&a<360-l?270:0}Dd(){this.rs.length=0}nT(e){let t=this.rs;t.length===0&&(this.uO(),t=this.rs);for(let n=0;n<t.length;n++){const i=t[n];if(i!==null&&i.He===e)return i}return null}uO(){if(!this.Xd){const e=this.Xd;this.Xd=!0;let t,n=null;const i=this.de,r=i instanceof Vt?i:null;if(r!==null&&!r.isSubGraphExpanded){if(!r.actualBounds.isReal())return this.Xd=e,this.rs;n=r,t=n.findExternalLinksConnected()}else i.isTreeExpanded?t=i.findLinksConnected(this.Qo.portId):t=i.findExternalTreeLinksConnected();this.rs.length=0;let a=0;const l=this.Qo.getDocumentPoint(z.TopLeft,T.l()),u=this.Qo.getDocumentPoint(z.BottomRight,T.l()),c=I.X(l.x,l.y,0,0);c.unionPoint(u),T.s(l),T.s(u);const f=T.X(c.x+c.width/2,c.y+c.height/2),m=this.Qo.getDocumentAngle(),p=t.iterator;for(;p.next();){const C=p.value;if(!C.isVisible()||C.fromPort===C.toPort)continue;const k=C.fromPort===this.Qo||C.fromNode!==null&&C.fromNode.isMemberOf(n),N=C.computeSpot(k,this.Qo);if(!N.isSide())continue;let F;if(k?F=C.toPort:F=C.fromPort,F===null)continue;let D=F.part;if(D===null)continue;const E=D.findVisibleNode();E!==null&&E!==D&&(D=E,F=D.port);const U=C.computeOtherPoint(D,F);let $=f.directionPoint(U);$-=m,$<0?$+=360:$>=360&&($-=360);const K=this.fO(c,N,$,C.isOrthogonal);let _=0;K===0?(_=4,$>180&&($-=360)):K===90?(_=8,$>270&&($-=360)):K===180?_=2:(_=1,$<90&&($+=360));let G=this.rs[a];G===void 0?(G=new gC(C,$,_),this.rs[a]=G):(G.He=C,G.Xt=$,G.me=_),G.S1.set(U),a++}T.s(f),this.dO();const y=this.rs.length;let w=-1,b=0;for(a=0;a<y;a++){const C=this.rs[a];C!==void 0&&(C.me!==w&&(w=C.me,b=0),C.Kd=b,b++)}for(w=-1,b=0,a=y-1;a>=0;a--){const C=this.rs[a];C!==void 0&&(C.me!==w&&(w=C.me,b=C.Kd+1),C.Nf=b)}this.gO(this.rs),this.mO(this.rs),this.Xd=e,I.s(c)}return this.rs}pO(e,t){return e===t?0:e===null?-1:t===null?1:e.me<t.me?-1:e.me>t.me?1:e.Xt<t.Xt?-1:e.Xt>t.Xt?1:0}dO(){this.rs.sort(hd.prototype.pO)}gO(e){const t=this.Qo,n=this.de.portSpreading,i=T.l(),r=T.l(),a=T.l(),l=T.l();t.getDocumentPoint(z.TopLeft,i),t.getDocumentPoint(z.TopRight,r),t.getDocumentPoint(z.BottomRight,a),t.getDocumentPoint(z.BottomLeft,l);let u=0,c=0,f=0,m=0;if(n===2)for(let F=0;F<e.length;F++){const D=e[F];if(D===null)continue;const E=D.He.computeThickness();switch(D.me){case 8:f+=E;break;case 2:m+=E;break;case 1:u+=E;break;default:case 4:c+=E;break}}let p=0,y=0,w=1,b,C,k=0,N=0;for(let F=0;F<e.length;F++){const D=e[F];if(D===null)continue;if(p!==D.me){switch(p=D.me,p){case 8:b=a,C=l;break;case 2:b=l,C=i;break;case 1:b=i,C=r;break;default:case 4:b=r,C=a;break}switch(k=C.x-b.x,N=C.y-b.y,p){case 8:f>Math.abs(k)?(w=Math.abs(k)/f,f=Math.abs(k)):w=1;break;case 2:m>Math.abs(N)?(w=Math.abs(N)/m,m=Math.abs(N)):w=1;break;case 1:u>Math.abs(k)?(w=Math.abs(k)/u,u=Math.abs(k)):w=1;break;default:case 4:c>Math.abs(N)?(w=Math.abs(N)/c,c=Math.abs(N)):w=1;break}y=0}const E=D.Ud;if(n===2){let U=D.He.computeThickness();switch(U*=w,E.set(b),p){case 8:E.x=b.x+k/2+f/2-y-U/2;break;case 2:E.y=b.y+N/2+m/2-y-U/2;break;case 1:E.x=b.x+k/2-u/2+y+U/2;break;default:case 4:E.y=b.y+N/2-c/2+y+U/2;break}y+=U}else{let U=.5;n===1&&(U=(D.Kd+1)/(D.Nf+1)),E.x=b.x+k*U,E.y=b.y+N*U}}T.s(i),T.s(r),T.s(a),T.s(l)}mO(e){for(let t=0;t<e.length;t++){const n=e[t];n!==null&&(n.w1=this.yO(n))}}yO(e){const t=e.He,n=t.fromPort===this.Qo,i=t.computeEndSegmentLength(this.de,this.Qo,z.None,n);let r=e.Kd;if(r<0)return i;const a=e.Nf;if(a<=1||!t.isOrthogonal)return i;const l=e.S1,u=e.Ud;(e.me===2||e.me===8)&&(r=a-1-r);const c=Gt.zv,f=e.me===2||e.me===4;return(f?l.y<u.y:l.x<u.x)?i+r*c:(f?l.y===u.y:l.x===u.x)?i:i+(a-1-r)*c}}class gC{constructor(e,t,n){v(this,"He");v(this,"Xt");v(this,"me");v(this,"S1");v(this,"Kd");v(this,"Nf");v(this,"Ud");v(this,"w1");this.He=e,this.Xt=t,this.me=n,this.S1=new T,this.Kd=0,this.Nf=0,this.Ud=new T,this.w1=0}toString(){return this.He.toString()+" "+this.Xt.toString()+" "+this.me.toString()+":"+this.Kd.toString()+"/"+this.Nf.toString()+" "+this.Ud.toString()+" "+this.w1.toString()+" "+this.S1.toString()}}class vh{constructor(){v(this,"fa");v(this,"ua");v(this,"da");v(this,"ga");v(this,"ma");v(this,"pa");v(this,"E0");v(this,"O0");v(this,"B0");v(this,"I0");this.fa=z.Default,this.ua=z.Default,this.da=NaN,this.ga=NaN,this.ma=NaN,this.pa=NaN,this.E0=null,this.O0=null,this.B0=1/0,this.I0=1/0}copy(){const e=new vh;return e.fa=this.fa.N(),e.ua=this.ua.N(),e.da=this.da,e.ga=this.ga,e.ma=this.ma,e.pa=this.pa,e.E0=this.E0,e.O0=this.O0,e.B0=this.B0,e.I0=this.I0,e}}class Cr{constructor(){v(this,"L0");v(this,"A0");v(this,"T0");v(this,"C0");v(this,"xp");v(this,"bp");this.L0=-1/0,this.A0=0,this.T0=T.Po,this.C0=0,this.xp="None",this.bp="None"}copy(){const e=new Cr;return e.L0=this.L0,e.A0=this.A0,e.T0=this.T0.N(),e.C0=this.C0,e.xp=this.xp,e.bp=this.bp,e}}class Vt extends It{constructor(t,n){let i;t===void 0||t instanceof de||typeof t=="string"?i=t:t&&(n=t);super(i);v(this,"Yd");v(this,"It");v(this,"la");v(this,"d0");v(this,"ni");v(this,"ie");this.E=this.E|4608,this.Yd=new L,this.It=null,this.ie=new Yn,this.ie.group=this,this.la=new L,this.d0=null,this.ni=null,n&&Object.assign(this,n)}cloneProtected(t){super.cloneProtected(t),this.E=this.E&-32769;const n=t.findInVisualTree(i=>i instanceof $i);n instanceof $i?t.It=n:t.It=null,this.ie!==null?(t.ie=this.ie.copy(),t.ie.group=t):(t.ie!==null&&(t.ie.group=null),t.ie=null),this.ni!==null&&(t.ni=this.ni.copy())}Vo(t){super.Vo(t);const n=t.findSubGraphParts(),i=t.memberParts;for(;i.next();){const r=i.value;if(r.c(),r.invalidateLayout(8),r.clearAdornments(),r instanceof It)r.invalidateConnectedLinks(n);else if(r instanceof Gt){const a=r.labelNodes;for(;a.next();)a.value.invalidateConnectedLinks(n)}}}Jc(t,n,i,r,a,l,u){if(t===3&&n==="elements"){if(a instanceof $i)this.It===null?this.It=a:this.It!==a&&o.o("Cannot insert a second Placeholder into the visual tree of a Group.");else if(a instanceof Kt){const c=a.findInVisualTree(f=>f instanceof $i);c instanceof $i&&(this.It===null?this.It=c:this.It!==c&&o.o("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===4&&n==="elements"&&this.It!==null&&(r===this.It?this.It=null:r instanceof Kt&&this.It.isContainedBy(r)&&(this.It=null));super.Jc(t,n,i,r,a,l,u)}ed(t,n){if(super.ed(t,n),this.isClipping&&this.type!==Kt.Spot&&this.isSubGraphExpanded){let i=this.resizeObject;i instanceof Kt&&(i=i.findMainElement()),this.ni===null&&(this.ni=new I),i.getDocumentBounds(this.ni),i instanceof Qt&&this.ni.inflate(-i.strokeWidth,-i.strokeWidth)}}ah(t,n,i,r){this.hasPlaceholder()&&(this.Jo=this.placeholder),super.ah(t,n,i,r)}ensureBounds(){this.isSubGraphExpanded&&this.memberParts.each(t=>{t.ensureBounds()}),super.ensureBounds()}jr(){if(!super.jr())return!1;const t=this.memberParts;for(;t.next();){const n=t.value;if(n instanceof It){if(!n.isVisible())continue;if(n.is())return!1}else if(n instanceof Gt){if(!n.isVisible())continue;if(n.is()&&n.fromNode!==this&&n.toNode!==this)return!1}}return!0}hasPlaceholder(){return this.It!==null&&this.It.isVisibleObject()&&this.isSubGraphExpanded}get placeholder(){return this.It}get computesBoundsAfterDrag(){return(this.E&2048)!==0}set computesBoundsAfterDrag(t){const n=(this.E&2048)!==0;n!==t&&(o.i(t,"boolean",Vt,"computesBoundsAfterDrag"),this.E=this.E^2048,this.t("computesBoundsAfterDrag",n,t))}get computesBoundsIncludingLinks(){return(this.E&4096)!==0}set computesBoundsIncludingLinks(t){o.i(t,"boolean",Vt,"computesBoundsIncludingLinks");const n=(this.E&4096)!==0;n!==t&&(this.E=this.E^4096,this.t("computesBoundsIncludingLinks",n,t))}get computesBoundsIncludingLocation(){return(this.E&8192)!==0}set computesBoundsIncludingLocation(t){o.i(t,"boolean",Vt,"computesBoundsIncludingLocation");const n=(this.E&8192)!==0;n!==t&&(this.E=this.E^8192,this.t("computesBoundsIncludingLocation",n,t))}get handlesDragDropForMembers(){return(this.E&16384)!==0}set handlesDragDropForMembers(t){o.i(t,"boolean",Vt,"handlesDragDropForMembers");const n=(this.E&16384)!==0;n!==t&&(this.E=this.E^16384,this.t("handlesDragDropForMembers",n,t))}get avoidableMembers(){return(this.E&131072)!==0}set avoidableMembers(t){o.i(t,"boolean",Vt,"avoidableMembers");const n=(this.E&131072)!==0;n!==t&&(this.E=this.E^131072,this.t("avoidableMembers",n,t))}get memberParts(){return this.Yd.iterator}j2(t){if(this.Yd.add(t)){t instanceof Vt&&this.la.add(t);const i=this.memberAdded;if(i!==null){let r=!0;const a=this.diagram;a!==null&&(r=a.Y,a.Y=!0),i(this,t),a!==null&&(a.Y=r)}(!this.isVisible()||!this.isSubGraphExpanded)&&t.Ei(!1)}if(t instanceof Gt&&!this.computesBoundsIncludingLinks)return;let n=this.It;n===null&&(n=this),n.c()}G2(t){if(this.Yd.delete(t)){t instanceof Vt&&this.la.delete(t);const i=this.memberRemoved;if(i!==null){let r=!0;const a=this.diagram;a!==null&&(r=a.Y,a.Y=!0),i(this,t),a!==null&&(a.Y=r)}(!this.isVisible()||!this.isSubGraphExpanded)&&t.Ei(!0)}if(t instanceof Gt&&!this.computesBoundsIncludingLinks)return;let n=this.It;n===null&&(n=this),n.c()}Kc(){if(this.Yd.count>0){const t=this.diagram;if(t!==null){const n=this.Yd.copy().iterator;for(;n.next();){const i=n.value;t.remove(i)}}}super.Kc()}get layout(){return this.ie}set layout(t){const n=this.ie;if(n!==t){t!==null&&t.diagram!==null&&t.diagram.layout===t&&o.o("A layout cannot be both the Diagram.layout and a Group.layout: "+t),n!==null&&(n.diagram=null,n.group=null),this.ie=t;const i=this.diagram;t!==null&&(t.diagram=i,t.group=this),i!==null&&(i.Kr=!0),this.t("layout",n,t),i!==null&&i.requestUpdate()}}get memberAdded(){return this.gt!==null?this.gt.uy:null}set memberAdded(t){const n=this.memberAdded;n!==t&&(t!==null&&o.i(t,"function",Vt,"memberAdded"),this.al(),this.gt.uy=t,this.t("memberAdded",n,t))}get memberRemoved(){return this.gt!==null?this.gt.gy:null}set memberRemoved(t){const n=this.memberRemoved;n!==t&&(t!==null&&o.i(t,"function",Vt,"memberRemoved"),this.al(),this.gt.gy=t,this.t("memberRemoved",n,t))}get memberValidation(){return this.gt!==null?this.gt.eh:null}set memberValidation(t){const n=this.memberValidation;n!==t&&(t!==null&&o.i(t,"function",Vt,"memberValidation"),this.al(),this.gt.eh=t,this.t("memberValidation",n,t))}canAddMembers(t){const n=this.diagram;if(n===null)return!1;const i=n.commandHandler,r=i.i2(t).iterator;for(;r.next();){const a=r.value;if(!i.isValidMember(this,a))return!1}return!0}addMembers(t,n){const i=this.diagram;if(i===null)return!1;const r=i.commandHandler,a=r.i2(t);let l=!0;const u=a.iterator;for(;u.next();){const c=u.value;!n||r.isValidMember(this,c)?c.containingGroup=this:l=!1}return l}get ungroupable(){return(this.E&256)!==0}set ungroupable(t){const n=(this.E&256)!==0;n!==t&&(o.i(t,"boolean",Vt,"ungroupable"),this.E=this.E^256,this.t("ungroupable",n,t))}canUngroup(){if(!this.ungroupable)return!1;const t=this.layer;if(t===null||!t.allowUngroup)return!1;const n=t.diagram;return!(n!==null&&!n.allowUngroup)}invalidateConnectedLinks(t){const n=this.wO();if(super.invalidateConnectedLinks(t),n)return;this.kL(!0);const i=this.findExternalLinksConnected();for(;i.next();){const r=i.value;if(t!==void 0&&t.has(r))continue;const a=r.fromNode;if(a!==null&&a!==this&&a.isMemberOf(this)&&!a.isVisible())a.Wi(r.fromPort),a.Wi(r.toPort),r.invalidateRoute();else{const l=r.toNode;l!==null&&l!==this&&l.isMemberOf(this)&&!l.isVisible()&&(l.Wi(r.fromPort),l.Wi(r.toPort),r.invalidateRoute())}}}findExternalLinksConnected(){const t=this.diagram!==null&&this.diagram.dM;if(t&&this.d0!==null)return this.d0.iterator;const n=this.findSubGraphParts();n.add(this);const i=new L,r=n.iterator;for(;r.next();){const a=r.value;if(!(a instanceof It))continue;const l=a.linksConnected;for(;l.next();){const u=l.value;n.has(u)||i.add(u)}}return t&&(this.d0=i),i.iterator}findExternalNodesConnected(){const t=this.findSubGraphParts();t.add(this);const n=new L,i=t.iterator;for(;i.next();){const r=i.value;if(!(r instanceof It))continue;const a=r.linksConnected;for(;a.next();){const l=a.value,u=l.fromNode;u!==null&&(!t.has(u)||u===this)&&n.add(u);const c=l.toNode;c!==null&&(!t.has(c)||c===this)&&n.add(c)}}return n.iterator}mE(){function t(i,r){i!==null&&(r.add(i),t(i.containingGroup,r))}const n=new L;return t(this,n),n}findSubGraphParts(){const t=new L;return xe.sh(t,this,!0,0,!0),t.delete(this),t}Ei(t){super.Ei(t);const n=this.memberParts;for(;n.next();)n.value.Ei(t)}collapseSubGraph(){const t=this.diagram;if(t===null||t.isCollapsingExpanding)return;t.isCollapsingExpanding=!0;const n=this.findSubGraphParts();this.hT(n,t,this),t.isCollapsingExpanding=!1}hT(t,n,i){const r=this.memberParts;for(;r.next();){const a=r.value;if(a.Ei(!1),a instanceof Vt&&a.isSubGraphExpanded&&(a.wasSubGraphExpanded=a.isSubGraphExpanded,a.hT(t,n,i)),a instanceof It)a.invalidateConnectedLinks(t),n.Lc(a,i);else if(a instanceof Gt){const l=a.labelNodes;for(;l.next();)l.value.invalidateConnectedLinks(t)}}this.isSubGraphExpanded=!1}expandSubGraph(){const t=this.diagram;if(t===null||t.isCollapsingExpanding)return;t.isCollapsingExpanding=!0;const n=this.findSubGraphParts();this.aT(n,t,this),t.isCollapsingExpanding=!1}aT(t,n,i){const r=this.memberParts;for(;r.next();){const a=r.value;if(a.Ei(!0),a instanceof Vt&&a.wasSubGraphExpanded&&(a.wasSubGraphExpanded=!1,a.aT(t,n,i)),a instanceof It)a.invalidateConnectedLinks(t);else if(a instanceof Gt){const l=a.labelNodes;for(;l.next();)l.value.invalidateConnectedLinks(t)}}this.isSubGraphExpanded=!0}get isSubGraphExpanded(){return(this.E&512)!==0}set isSubGraphExpanded(t){const n=(this.E&512)!==0;if(n!==t){o.i(t,"boolean",Vt,"isSubGraphExpanded"),this.E=this.E^512;const i=this.diagram;this.t("isSubGraphExpanded",n,t);const r=this.subGraphExpandedChanged;if(r!==null){let a=!0;i!==null&&(a=i.Y,i.Y=!0),r(this),i!==null&&(i.Y=a)}if(i!==null&&i.undoManager.isUndoingRedoing){this.It!==null&&this.It.c(),this.memberParts.each(a=>a.updateAdornments());return}t?this.expandSubGraph():this.collapseSubGraph()}}get wasSubGraphExpanded(){return(this.E&1024)!==0}set wasSubGraphExpanded(t){const n=(this.E&1024)!==0;n!==t&&(o.i(t,"boolean",Vt,"wasSubGraphExpanded"),this.E=this.E^1024,this.t("wasSubGraphExpanded",n,t))}get subGraphExpandedChanged(){return this.gt!==null?this.gt.my:null}set subGraphExpandedChanged(t){const n=this.subGraphExpandedChanged;n!==t&&(t!==null&&o.i(t,"function",Vt,"subGraphExpandedChanged"),this.al(),this.gt.my=t,this.t("subGraphExpandedChanged",n,t))}move(t,n){n===void 0&&(n=!1);const i=n?this.location:this.position,r=i.x,a=i.y,l=t.x,u=t.y;if((r===l||isNaN(r)&&isNaN(l))&&(a===u||isNaN(a)&&isNaN(u)))return;const c=l-(isNaN(r)?0:r),f=u-(isNaN(a)?0:a),m=T.l();super.move(t,n);const p=new L,y=this.findSubGraphParts().iterator;for(;y.next();){const w=y.value;w instanceof Gt&&(w.suspendsRouting&&p.add(w),!(!w.Me&&(w.fromNode===this||w.toNode===this))&&(w.suspendsRouting=!0))}for(y.reset();y.next();){const w=y.value;if(w.Nl()||w instanceof It&&w.isLinkLabel)continue;const b=w.position,C=w.location;b.isReal()?(m.x=b.x+c,m.y=b.y+f,w.position=m):C.isReal()&&(m.x=C.x+c,m.y=C.y+f,w.location=m)}for(y.reset();y.next();){const w=y.value;if(!(w instanceof Gt)||(w.suspendsRouting=p.has(w),!w.Me&&(w.fromNode===this||w.toNode===this)))continue;const b=w.position;m.x=b.x+c,m.y=b.y+f,m.isReal()?w.move(m):w.invalidateRoute()}T.s(m)}wO(){return(this.E&65536)!==0}kL(t){(this.E&65536)!==0!==t&&(this.E=this.E^65536)}get Wr(){return(this.E&32768)!==0}set Wr(t){(this.E&32768)!==0!==t&&(this.E=this.E^32768)}}class $i extends Re{constructor(t){super();v(this,"$t");v(this,"Gd");this.$t=tt.Ug,this.Gd=new I(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.$t=this.$t.N(),t.Gd=this.Gd.copy()}hh(t){if(this.background===null)return!1;const n=this.naturalBounds;return I.contains(0,0,n.width,n.height,t.x,t.y)}td(t,n,i,r){const a=this.part;if((a===null||!(a instanceof Vt)&&!(a instanceof ie))&&o.o("Placeholder is not inside a Group or Adornment."),a instanceof Vt){const l=this.computeBorder(this.Gd),u=this.minSize,c=isFinite(u.width)?Math.max(u.width,l.width):l.width,f=isFinite(u.height)?Math.max(u.height,l.height):l.height,m=this.zi;m.En(c||0,f||0),this.Qn(0,0,m.width,m.height);const p=a.memberParts;let y=!1;for(;p.next();)if(p.value.isVisible()){y=!0;break}const w=a.diagram;if(y&&w!==null&&!w.animationManager.CS(a)&&!isNaN(l.x)&&!isNaN(l.y)){const b=T.l();b.setRectSpot(l,a.locationSpot),a.location=b,T.s(b)}}else{const l=a,u=this.zi,c=this.$t,f=c.left+c.right,m=c.top+c.bottom,p=l.adornedObject,y=p.getDocumentAngle();l.angle=y;let w=0;p instanceof Qt&&(w=p.strokeWidth);const b=p.getDocumentScale(),C=p.naturalBounds,k=(C.width+w)*b,N=(C.height+w)*b;if(l.type!==Kt.Link){const F=l.category==="Selection"?z.TopLeft:l.locationSpot,D=p.getDocumentPoint(F,T.l());l.location=D,T.s(D)}if(!isNaN(k)&&!isNaN(N))u.En(k+f||0,N+m||0),this.Qn(-c.left,-c.top,u.width,u.height);else{const F=p.getDocumentPoint(z.TopLeft,T.l()),D=I.X(F.x,F.y,0,0);D.unionPoint(p.getDocumentPoint(z.BottomRight,F)),D.unionPoint(p.getDocumentPoint(z.TopRight,F)),D.unionPoint(p.getDocumentPoint(z.BottomLeft,F)),u.En(D.width+f||0,D.height+m||0),this.Qn(-c.left,-c.top,u.width,u.height),T.s(F),I.s(D)}}}ah(t,n,i,r){this.actualBounds.e(t,n,i,r)}computeBorder(t){const n=this.part,i=n.diagram,r=i===null||!i.animationManager.isAnimating;if(i!==null&&n instanceof Vt&&!n.layer.isTemporary&&n.computesBoundsAfterDrag&&this.Gd.isReal()){const c=i.toolManager.findTool("Dragging");if(c===i.currentTool){const f=c.computeBorder(n,this.Gd,t);if(f!==null)return f}}const a=I.l(),l=this.computeMemberBounds(a),u=this.$t;return n instanceof Vt&&!n.isSubGraphExpanded?t.e(l.x-u.left,l.y-u.top,0,0):t.e(l.x-u.left,l.y-u.top,Math.max(l.width+u.left+u.right,0),Math.max(l.height+u.top+u.bottom,0)),I.s(a),r&&n instanceof Vt&&n.computesBoundsIncludingLocation&&n.location.isReal()&&t.unionPoint(n.location),t}computeMemberBounds(t){if(!(this.part instanceof Vt))return t.e(0,0,0,0),t;const n=this.part;let i=1/0,r=1/0,a=-1/0,l=-1/0;const u=n.memberParts;for(;u.next();){const c=u.value;if(!c.isVisible()||c instanceof Gt&&(!n.computesBoundsIncludingLinks||c.Oo()||c.fromNode===n||c.toNode===n))continue;const f=c.actualBounds;f.left<i&&(i=f.left),f.top<r&&(r=f.top),f.right>a&&(a=f.right),f.bottom>l&&(l=f.bottom)}if(!isFinite(i)||!isFinite(r)){const c=n.location;t.e(c.x,c.y,0,0)}else t.e(i,r,a-i,l-r);return t}get padding(){return this.$t}set padding(t){typeof t=="number"&&(t=new tt(t));const n=this.$t;n.equals(t)||(t=t.N(),this.$t=t,this.t("padding",n,t),this.c())}}class Yn{constructor(e){v(this,"p");v(this,"ha");v(this,"jd");v(this,"kr");v(this,"Hd");v(this,"qd");v(this,"Fo");v(this,"fl");v(this,"Wd");v(this,"Jd");v(this,"go");L.Gi(this),this.p=null,this.ha=null,this.jd=!0,this.kr=!0,this.Hd=!1,this.qd=new T(0,0).g(),this.Fo=!0,this.fl=null,this.Wd=null,this.Jd=!1,this.go=null,e&&Object.assign(this,e)}cloneProtected(e){e.jd=this.jd,e.kr=this.kr,e.Hd=this.Hd,e.qd.a(this.qd),e.Fo=this.Fo,e.fl=this.fl,e.Wd=this.Wd,e.Jd=!0}copy(){const e=new this.constructor;return this.cloneProtected(e),e}ri(e){}toString(){let e=o.sn(this.constructor);return e+="(",this.group!==null&&(e+=" in "+this.group),this.diagram!==null&&(e+=" for "+this.diagram),e+=")",e}get diagram(){return this.p}set diagram(e){this.p=e}get group(){return this.ha}set group(e){this.ha!==e&&(this.ha=e,e!==null&&(this.p=e.diagram))}get isOngoing(){return this.jd}set isOngoing(e){this.jd!==e&&(o.i(e,"boolean",Yn,"isOngoing"),this.jd=e)}get isInitial(){return this.kr}set isInitial(e){o.i(e,"boolean",Yn,"isInitial"),this.kr=e,e||(this.Jd=!0)}get isViewportSized(){return this.Hd}set isViewportSized(e){this.Hd!==e&&(o.i(e,"boolean",Yn,"isViewportSized"),this.Hd=e,e&&this.invalidateLayout())}get isRouting(){return this.Fo}set isRouting(e){this.Fo!==e&&(o.i(e,"boolean",Yn,"isRouting"),this.Fo=e)}get isRealtime(){return this.fl}set isRealtime(e){this.fl!==e&&(e!==null&&o.i(e,"boolean",Yn,"isRealtime"),this.fl=e)}get isValidLayout(){return this.Jd}set isValidLayout(e){if(this.Jd!==e&&(o.i(e,"boolean",Yn,"isValidLayout"),this.Jd=e,!e)){const t=this.diagram;t!==null&&(t.Kr=!0)}}invalidateLayout(){if(this.isValidLayout){const e=this.diagram;if(e===null||e.undoManager.isUndoingRedoing)return;const t=e.animationManager;if(t.isTicking)return;t.defaultAnimation.isAnimating&&t.stopAnimation(),(this.isOngoing&&e.Bh||this.isInitial&&!e.Bh)&&(this.isValidLayout=!1,e.requestUpdate())}}get network(){return this.go}set network(e){this.go!==e&&(this.go=e,e!==null&&(e.layout=this))}createNetwork(){return new kr(this)}makeNetwork(e){const t=this.createNetwork();return e instanceof le?(t.addParts(e.nodes,!0),t.addParts(e.links,!0)):e instanceof Vt?t.addParts(e.memberParts):t.addParts(e.iterator),t}updateParts(){this.isValidLayout=!0;let e=this.diagram;if(e===null&&this.network!==null){const t=this.network.vertexes.iterator;for(;t.next();){const n=t.value.node;if(n!==null&&(e=n.diagram,e!==null))break}}try{e!==null&&e.startTransaction("Layout"),this.commitLayout()}finally{e!==null&&e.commitTransaction("Layout")}}commitLayout(){if(this.network===null)return;const e=this.network.vertexes.iterator;for(;e.next();)e.value.commit();if(this.isRouting){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}}doLayout(e){const t=new L;if(e instanceof le?(this.kh(t,e.nodes,!0,this.Wr,!0,!1,!0),this.kh(t,e.parts,!0,this.Wr,!0,!1,!0)):e instanceof Vt?this.kh(t,e.memberParts,!1,this.Wr,!0,!1,!0):t.addAll(e.iterator),t.count>0){const n=this.diagram;n!==null&&n.startTransaction("Layout"),this.doMinimalNoNetworkLayout(t),n!==null&&n.commitTransaction("Layout")}this.isValidLayout=!0}doMinimalNoNetworkLayout(e){const t=e.count,n=Math.ceil(Math.sqrt(t));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const i=this.arrangementOrigin.x,r=this.arrangementOrigin.y;let a=i,l=r,u=0,c=0;const f=e.iterator;for(;f.next();){const m=f.value;m.ensureBounds();const p=m.measuredBounds,y=p.width,w=p.height;m.moveTo(a,l),m instanceof Vt&&(m.Wr=!1),a+=Math.max(y,50)+20,c=Math.max(c,Math.max(w,50)),u>=n-1?(u=0,a=i,l+=c+20,c=0):u++}}doMinimalNetworkLayout(){const e=this.network.vertexes.count,t=Math.ceil(Math.sqrt(e));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const n=this.arrangementOrigin.x,i=this.arrangementOrigin.y;let r=n,a=i,l=0,u=0;const c=this.network.vertexes.iterator;for(;c.next();){const f=c.value.node;if(f===null||f instanceof Gt||(f.ensureBounds(),!this.Wr(f)))continue;const m=f.measuredBounds,p=m.width,y=m.height;f.moveTo(r,a),f instanceof Vt&&(f.Wr=!1),r+=Math.max(p,50)+20,u=Math.max(u,Math.max(y,50)),l>=t-1?(l=0,r=n,a+=u+20,u=0):l++}}Wr(e){return!!(!e.location.isReal()&&!e.position.isReal()||e instanceof Vt&&e.Wr)}kh(e,t,n,i,r,a,l){const u=t.iterator;for(;u.next();){const c=u.value;if(!(n&&!c.isTopLevel)&&!(i!==null&&!i(c))&&c.canLayout())if(r&&c instanceof It){if(c.isLinkLabel)continue;c instanceof Vt&&c.layout===null?this.kh(e,c.memberParts,!1,i,r,a,l):(c.ensureBounds(),e.add(c))}else a&&c instanceof Gt?e.add(c):l&&c.Pe()&&!(c instanceof It)&&(c.ensureBounds(),e.add(c))}}getLayoutBounds(e,t){const n=this.boundsComputation;return n!==null?(t||(t=new I),n(e,this,t)):!t&&e.margin.equalTo(0,0,0,0)?e.actualBounds:(t||(t=new I),t.set(e.actualBounds),t.addMargin(e.margin),t)}get boundsComputation(){return this.Wd}set boundsComputation(e){this.Wd!==e&&(e!==null&&o.i(e,"function",Yn,"boundsComputation"),this.Wd=e,this.invalidateLayout())}collectParts(e){const t=new L;return e instanceof le?(this.kh(t,e.nodes,!0,null,!0,!0,!0),this.kh(t,e.links,!0,null,!0,!0,!0),this.kh(t,e.parts,!0,null,!0,!0,!0)):e instanceof Vt?this.kh(t,e.memberParts,!1,null,!0,!0,!0):this.kh(t,e.iterator,!1,null,!0,!0,!0),t}get arrangementOrigin(){return this.qd}set arrangementOrigin(e){this.qd.equals(e)||(this.qd.a(e),this.invalidateLayout())}initialOrigin(e){const t=this.group;if(t!==null)if(t.hasPlaceholder()){const n=t.placeholder,i=n.getDocumentPoint(z.TopLeft);(isNaN(i.x)||isNaN(i.y))&&i.set(e);const r=n.padding;return i.x+=r.left,i.y+=r.top,i}else{const n=t.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(e),n}return e}}class kr{constructor(e){v(this,"ie");v(this,"mo");v(this,"Cn");v(this,"ky");v(this,"Py");L.Gi(this),this.ie=e,this.mo=new L,this.Cn=new L,this.ky=new W,this.Py=new W}clear(){if(this.mo){const e=this.mo.iterator;for(;e.next();)e.value.clear()}if(this.Cn){const e=this.Cn.iterator;for(;e.next();)e.value.clear()}this.mo=new L,this.Cn=new L,this.ky=new W,this.Py=new W}toString(e){e===void 0&&(e=0);let t="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(e<=0)return t;if(t+=" vertexes: "+this.mo.count+" edges: "+this.Cn.count,e>1){const n=this.mo.iterator;for(;n.next();){const r=n.value;t+=`
    `+r.toString(e-1)}const i=this.Cn.iterator;for(;i.next();){const r=i.value;t+=`
    `+r.toString(e-1)}}return t}get layout(){return this.ie}set layout(e){e!==null&&(this.ie=e)}get vertexes(){return this.mo}get edges(){return this.Cn}createVertex(){return new Pr(this)}createEdge(){return new Io(this)}addParts(e,t,n){if(e===null)return;t===void 0&&(t=!1),o.i(t,"boolean",kr,"addParts:toplevelonly"),n===void 0&&(n=null),n===null&&(n=r=>{if(r instanceof It)return!r.isLinkLabel;if(r instanceof Gt){const a=r.fromNode;if(a===null||a.isLinkLabel)return!1;const l=r.toNode;return!(l===null||l.isLinkLabel)}return!1});const i=e.iterator;for(;i.next();){const r=i.value;if(r instanceof It&&!(t&&!r.isTopLevel)&&r.canLayout()&&n(r))if(r instanceof Vt&&r.layout===null)this.addParts(r.memberParts,!1);else{if(this.findVertex(r)!==null)continue;const a=this.createVertex();a.node=r,this.addVertex(a)}}for(i.reset();i.next();){const r=i.value;if(!(r instanceof Gt)||t&&!r.isTopLevel||!r.canLayout()||!n(r)||this.findEdge(r)!==null)continue;const a=r.fromNode,l=r.toNode;if(a===null||l===null||a===l)continue;const u=this.findGroupVertex(a),c=this.findGroupVertex(l);this.linkVertexes(u,c,r)}}findGroupVertex(e){if(e===null)return null;const t=e.findVisibleNode();if(t===null)return null;let n=this.findVertex(t);if(n!==null)return n;let i=t.containingGroup;for(;i!==null;){if(n=this.findVertex(i),n!==null)return n;i=i.containingGroup}return null}addVertex(e){if(e===null)return;this.mo.add(e);const t=e.node;t!==null&&this.ky.set(t,e),e.network=this}addNode(e){if(e===null)return null;let t=this.findVertex(e);return t===null&&(t=this.createVertex(),t.node=e,this.addVertex(t)),t}deleteVertex(e){if(e!==null&&this.cT(e)){let t=e._o;for(let n=t.count-1;n>=0;n--){const i=t.elt(n);this.deleteEdge(i)}t=e.tr;for(let n=t.count-1;n>=0;n--){const i=t.elt(n);this.deleteEdge(i)}}}cT(e){if(e===null)return!1;const t=this.mo.delete(e);if(t){const n=e.node;n!==null&&this.ky.delete(n)}return t}deleteNode(e){if(e===null)return;const t=this.findVertex(e);t!==null&&this.deleteVertex(t)}findVertex(e){return e===null?null:this.ky.get(e)}addEdge(e){if(e===null)return;this.cN(e);const t=e.toVertex;t!==null&&t.addSourceEdge(e);const n=e.fromVertex;n!==null&&n.addDestinationEdge(e)}cN(e){if(e===null)return;this.Cn.add(e);const t=e.link;t!==null&&this.findEdge(t)===null&&this.Py.set(t,e),e.network=this}addLink(e){if(e===null)return null;const t=e.fromNode,n=e.toNode;let i=this.findEdge(e);return i===null?(i=this.createEdge(),i.link=e,t!==null&&(i.fromVertex=this.addNode(t)),n!==null&&(i.toVertex=this.addNode(n)),this.addEdge(i)):(t!==null?i.fromVertex=this.addNode(t):i.fromVertex=null,n!==null?i.toVertex=this.addNode(n):i.toVertex=null),i}deleteEdge(e){if(e===null)return;const t=e.toVertex;t!==null&&t.deleteSourceEdge(e);const n=e.fromVertex;n!==null&&n.deleteDestinationEdge(e),this.fN(e)}fN(e){if(e===null)return!1;const t=this.Cn.delete(e);if(t){const n=e.link;n!==null&&this.Py.delete(n)}return t}deleteLink(e){if(e===null)return;const t=this.findEdge(e);t!==null&&this.deleteEdge(t)}findEdge(e){return e===null?null:this.Py.get(e)}linkVertexes(e,t,n){if(e===null||t===null)return null;if(e.network===this&&t.network===this){const i=this.createEdge();return i.link=n,i.fromVertex=e,i.toVertex=t,this.addEdge(i),i}return null}reverseEdge(e){if(e===null)return;const t=e.fromVertex,n=e.toVertex;t===null||n===null||(t.deleteDestinationEdge(e),n.deleteSourceEdge(e),e.reverseEdge(),t.addSourceEdge(e),n.addDestinationEdge(e))}deleteSelfEdges(){const e=o.nt(),t=this.Cn.iterator;for(;t.next();){const i=t.value;i.fromVertex===i.toVertex&&e.push(i)}const n=e.length;for(let i=0;i<n;i++)this.deleteEdge(e[i]);o.tt(e)}deleteArtificialVertexes(){const e=o.nt(),t=this.mo.iterator;for(;t.next();){const a=t.value;a.node===null&&a.data===null&&e.push(a)}let n=e.length;for(let a=0;a<n;a++)this.deleteVertex(e[a]);const i=o.nt(),r=this.Cn.iterator;for(;r.next();){const a=r.value;a.link===null&&a.data===null&&i.push(a)}n=i.length;for(let a=0;a<n;a++)this.deleteEdge(i[a]);o.tt(e),o.tt(i)}deleteUselessEdges(){const e=o.nt(),t=this.Cn.iterator;for(;t.next();){const i=t.value;(i.fromVertex===null||i.toVertex===null)&&e.push(i)}const n=e.length;for(let i=0;i<n;i++)this.deleteEdge(e[i]);o.tt(e)}isSingleton(e){return!(e._o.count>0||e.tr.count>0)}splitIntoSubNetworks(e){e===void 0&&(e=!0),e&&(this.deleteArtificialVertexes(),this.deleteUselessEdges(),this.deleteSelfEdges());const t=new M;let n=!0;for(;n;){n=!1;const i=this.mo.iterator;for(;i.next();){const r=i.value;if(this.isSingleton(r))continue;const a=this.layout.createNetwork();t.add(a),this.xO(a,r),n=!0;break}}return t.sort((i,r)=>i===null||r===null||i===r?0:r.vertexes.count-i.vertexes.count),t}xO(e,t){if(t===null)return;const n=new M;for(n.add(t);n.count>0;){const i=n.first();if(n.removeAt(0),i.network===e)continue;this.cT(i),e.addVertex(i);let r=i.sourceEdges;for(;r.next();){const a=r.value;a.network!==e&&(this.fN(a),e.cN(a),n.add(a.fromVertex))}for(r=i.destinationEdges;r.next();){const a=r.value;a.network!==e&&(this.fN(a),e.cN(a),n.add(a.toVertex))}}}findAllParts(){const e=new L,t=this.mo.iterator;for(;t.next();){const i=t.value;e.add(i.node)}const n=this.Cn.iterator;for(;n.next();){const i=n.value;e.add(i.link)}return e}}class Pr{constructor(e){v(this,"go");v(this,"Qt");v(this,"de");v(this,"Ae");v(this,"qe");v(this,"_o");v(this,"tr");L.Gi(this),this.go=e,this.Ae=new I(0,0,10,10).g(),this.qe=new T(5,5).g(),this.Qt=null,this.de=null,this._o=new M,this.tr=new M}clear(){this.Qt=null,this.de=null,this._o=new M,this.tr=new M}toString(e){e===void 0&&(e=0);let t="LayoutVertex#"+L.as(this);if(e>0&&(t+=this.node!==null?"("+this.node.toString()+")":"",e>1)){let n="",i=!0,r=this._o.iterator;for(;r.next();){const l=r.value;i?i=!1:n+=",",n+=l.toString(0)}let a="";for(i=!0,r=this.tr.iterator;r.next();){const l=r.value;i?i=!1:a+=",",a+=l.toString(0)}t+=" sources: "+n+" destinations: "+a}return t}get po(){return this._o.WN}get ir(){return this.tr.WN}get data(){return this.Qt}set data(e){if(this.Qt=e,e!==null&&e.bounds){const t=e.bounds,n=t.x,i=t.y,r=t.width,a=t.height;this.qe.e(r/2,a/2),this.Ae.e(n,i,r,a)}}get node(){return this.de}set node(e){if(this.de!==e){this.de=e,e.ensureBounds();const t=this.network.layout,n=I.l(),i=t.getLayoutBounds(e,n);let r=i.x,a=i.y;const l=i.width,u=i.height;if(isNaN(r)&&(r=0),isNaN(a)&&(a=0),this.Ae.e(r,a,l,u),I.s(n),!(e instanceof Vt)){const c=e.locationObject.getDocumentPoint(z.Center);if(c.isReal()){this.qe.e(c.x-r,c.y-a);return}}this.qe.e(l/2,u/2)}}get bounds(){return this.Ae}set bounds(e){this.Ae.equals(e)||this.Ae.a(e)}get focus(){return this.qe}set focus(e){this.qe.equals(e)||this.qe.a(e)}get centerX(){return this.Ae.x+this.qe.x}set centerX(e){const t=this.Ae;t.x+this.qe.x!==e&&(t.ot(),t.x=e-this.qe.x,t.g())}get centerY(){return this.Ae.y+this.qe.y}set centerY(e){const t=this.Ae;t.y+this.qe.y!==e&&(t.ot(),t.y=e-this.qe.y,t.g())}get focusX(){return this.qe.x}set focusX(e){const t=this.qe;t.x!==e&&(t.ot(),t.x=e,t.g())}get focusY(){return this.qe.y}set focusY(e){const t=this.qe;t.y!==e&&(t.ot(),t.y=e,t.g())}get x(){return this.Ae.x}set x(e){const t=this.Ae;t.x!==e&&(t.ot(),t.x=e,t.g())}get y(){return this.Ae.y}set y(e){const t=this.Ae;t.y!==e&&(t.ot(),t.y=e,t.g())}get width(){return this.Ae.width}set width(e){const t=this.Ae;t.width!==e&&(t.ot(),t.width=e,t.g())}get height(){return this.Ae.height}set height(e){const t=this.Ae;t.height!==e&&(t.ot(),t.height=e,t.g())}commit(){const e=this.Qt;if(e!==null){const n=this.bounds,i=e.bounds;o.wt(i)?(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height):e.bounds=n.copy();return}const t=this.node;if(t!==null){const n=this.bounds;if(!(t instanceof Vt)){const i=I.l();t.ensureBounds();const r=this.network.layout.getLayoutBounds(t,i),a=t.locationObject.getDocumentPoint(z.Center);if(r.isReal()&&a.isReal()){t.moveTo(n.x+this.focusX-(a.x-r.x)+t.margin.left,n.y+this.focusY-(a.y-r.y+t.margin.top)),I.s(i);return}I.s(i)}t.moveTo(n.x+t.margin.left,n.y+t.margin.top)}}addSourceEdge(e){e!==null&&(this._o.has(e)||this._o.add(e))}deleteSourceEdge(e){e!==null&&this._o.delete(e)}addDestinationEdge(e){e!==null&&(this.tr.has(e)||this.tr.add(e))}deleteDestinationEdge(e){e!==null&&this.tr.delete(e)}get network(){return this.go}set network(e){this.go=e}get sourceVertexes(){const e=new L,t=this.sourceEdges;for(;t.next();){const n=t.value;e.add(n.fromVertex)}return e.iterator}get destinationVertexes(){const e=new L,t=this.destinationEdges;for(;t.next();){const n=t.value;e.add(n.toVertex)}return e.iterator}get vertexes(){const e=new L;let t=this.sourceEdges;for(;t.next();){const n=t.value;e.add(n.fromVertex)}for(t=this.destinationEdges;t.next();){const n=t.value;e.add(n.toVertex)}return e.iterator}get sourceEdges(){return this._o.iterator}get destinationEdges(){return this.tr.iterator}get edges(){const e=new M;let t=this.sourceEdges;for(;t.next();){const n=t.value;e.add(n)}for(t=this.destinationEdges;t.next();){const n=t.value;e.add(n)}return e.iterator}get edgesCount(){return this._o.count+this.tr.count}static standardComparer(e,t){const n=e.de,i=t.de;if(n)if(i){const r=n.text,a=i.text;return r<a?-1:r>a?1:0}else return 1;else return i!==null?-1:0}static smartComparer(e,t){if(e!==null)if(t!==null){const n=e.de,i=t.de;if(n!==null)if(i!==null){const r=n.text.toLocaleLowerCase(),a=i.text.toLocaleLowerCase(),l=r.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),u=a.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);let c=0;for(;c<l.length;c++)if(u[c]!==""&&u[c]!==void 0){const f=parseFloat(l[c]),m=parseFloat(u[c]);if(isNaN(f))if(isNaN(m)){if(l[c].localeCompare(u[c])!==0)return l[c].localeCompare(u[c]);continue}else return 1;else{if(isNaN(m))return-1;if(f-m!==0)return f-m;continue}}else{if(l[c]==="")continue;return 1}return u[c]!==""&&u[c]!==void 0?-1:0}else return 1;else return i!==null?-1:0}else return 1;else return t!==null?-1:0}}class Io{constructor(e){v(this,"go");v(this,"Qt");v(this,"He");v(this,"We");v(this,"Je");L.Gi(this),this.go=e,this.Qt=null,this.He=null,this.We=null,this.Je=null}clear(){this.Qt=null,this.He=null,this.We=null,this.Je=null}toString(e){e===void 0&&(e=0);let t="LayoutEdge#"+L.as(this);return e>0&&(t+=this.He!==null?"("+this.He.toString()+")":"",e>1&&(t+=" "+(this.We?this.We.toString():"null")+" --> "+(this.Je?this.Je.toString():"null"))),t}reverseEdge(){const e=this.We;this.We=this.Je,this.Je=e}commit(){}getOtherVertex(e){return this.Je===e?this.We:this.We===e?this.Je:null}get network(){return this.go}set network(e){this.go=e}get data(){return this.Qt}set data(e){this.Qt!==e&&(this.Qt=e)}get link(){return this.He}set link(e){this.He!==e&&(this.He=e)}get fromVertex(){return this.We}set fromVertex(e){this.We!==e&&(this.We=e)}get toVertex(){return this.Je}set toVertex(e){this.Je!==e&&(this.Je=e)}}var ud=(A=>(A[A.Position=0]="Position",A[A.Location=1]="Location",A))(ud||{}),cd=(A=>(A[A.LeftToRight=10]="LeftToRight",A[A.RightToLeft=11]="RightToLeft",A))(cd||{}),dd=(A=>(A[A.Forwards=20]="Forwards",A[A.Reverse=21]="Reverse",A[A.Ascending=22]="Ascending",A[A.Descending=23]="Descending",A))(dd||{});const Cs=class Cs extends Yn{constructor(t){super();v(this,"$d");v(this,"Zd");v(this,"Lo");v(this,"Ln");v(this,"oi");v(this,"Xi");v(this,"pe");v(this,"ye");this.isViewportSized=!0,this.$d=NaN,this.Zd=NaN,this.Lo=new B(NaN,NaN).g(),this.Ln=new B(10,10).g(),this.oi=1,this.Xi=10,this.pe=22,this.ye=Cs.standardComparer,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.$d=this.$d,t.Zd=this.Zd,t.Lo.a(this.Lo),t.Ln.a(this.Ln),t.oi=this.oi,t.Xi=this.Xi,t.pe=this.pe,t.ye=this.ye}ri(t){t in dd?this.sorting=t:t in cd?this.arrangement=t:t in ud?this.alignment=t:super.ri(t)}doLayout(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const n=this.collectParts(t),i=this.diagram,r=n.copy().iterator;for(;r.next();){const b=r.value;if(b.Nl()&&(b.fromNode!==null||b.toNode!==null)){n.delete(b);continue}if(b.ensureBounds(),b instanceof Vt){const C=b.memberParts;for(;C.next();){const k=C.value;n.delete(k)}}}const a=n.toArray();if(a.length===0)return;switch(this.sorting){case 20:break;case 21:a.reverse();break;case 22:a.sort(this.comparer);break;case 23:a.sort(this.comparer),a.reverse();break}let l=this.wrappingColumn;isNaN(l)&&(l=0);let u=this.wrappingWidth;if(isNaN(u)&&i!==null){const b=i.viewportBounds,C=i.padding;u=Math.max(b.width-C.left-C.right,0)}else u=Math.max(this.wrappingWidth,0);l<=0&&u<=0&&(l=1);let c=this.spacing.width;isFinite(c)||(c=0);let f=this.spacing.height;isFinite(f)||(f=0),i!==null&&i.startTransaction("Layout");const m=[];switch(this.alignment){case 0:this.bO(a,u,l,c,f,m);break;case 1:this.kO(a,u,l,c,f,m);break}let p=0,y=0,w=0;for(let b=0;b<m.length;b++){const C=m[b];p=Math.min(p,C.x),y=Math.min(y,C.y),w=Math.max(w,C.x+C.width)}this.arrangement===11?this.commitLayers(m,new T(p+c/2-(w+p),y-f/2)):this.commitLayers(m,new T(p-c/2,y-f/2)),i!==null&&i.commitTransaction("Layout"),this.isValidLayout=!0}bO(t,n,i,r,a,l){const u=I.l();let c=Math.max(this.cellSize.width,1);if(!isFinite(c)){c=0;for(let N=0;N<t.length;N++){const F=t[N],D=this.getLayoutBounds(F,u);c=Math.max(c,D.width)}}c+=r,c=Math.max(c,1);let f=Math.max(this.cellSize.height,1);if(!isFinite(f)){f=0;for(let N=0;N<t.length;N++){const F=t[N],D=this.getLayoutBounds(F,u);f=Math.max(f,D.height)}}f+=a,f=Math.max(f,1);const m=this.arrangement,p=this.arrangementOrigin.x,y=this.arrangementOrigin.y;let w=p,b=y,C=0,k=0;for(let N=0;N<t.length;N++){const F=t[N],D=this.getLayoutBounds(F,u),E=Math.ceil((D.width+r)/c),U=Math.ceil((D.height+a)/f),$=E*c,K=U*f;let _=0;switch(m){case 11:_=Math.abs(w-D.width);break;default:_=w+D.width;break}(i>0&&C>i-1||n>0&&C>0&&_-p>n)&&(l.push(new I(0,b,n+r,k)),C=0,w=p,b+=k,k=0),k=Math.max(k,K);let G=0;switch(m){case 11:G=-D.width;break;default:G=0;break}switch(F.moveTo(w+G+F.margin.left,b+F.margin.top),m){case 11:w-=$;break;default:w+=$;break}C++}l.push(new I(0,b,n+r,k)),I.s(u)}kO(t,n,i,r,a,l){const u=I.l();let c=Math.max(this.cellSize.width,1),f=0,m=0,p=0;const y=T.l();for(let G=0;G<t.length;G++){const X=t[G],Q=this.getLayoutBounds(X,u),Z=X.getRelativePoint(X.locationObject,X.locationSpot,y);f=Math.max(f,Z.x),m=Math.max(m,Q.width-Z.x),p=Math.max(p,Z.y)}const w=this.arrangement;switch(w){case 11:f+=r;break;default:m+=r;break}isFinite(c)?c=Math.max(c+r,1):c=Math.max(f+m,1);const b=this.arrangementOrigin.x,C=this.arrangementOrigin.y;let k=b,N=C,F=0;n>=f&&(n-=f);let D=0,E=0;const U=Math.max(this.cellSize.height,1);p=0;let $=0,K=!0;const _=T.l();for(let G=0;G<t.length;G++){const X=t[G],Q=this.getLayoutBounds(X,u),Z=X.getRelativePoint(X.locationObject,X.locationSpot,y);if(F>0)switch(w){case 11:{let st=(k-b-(Q.width-Z.x))/c;R.K(Math.round(st),st)?st=Math.round(st):st=Math.floor(st),k=st*c+b;break}default:{let st=(k-b+Z.x)/c;R.K(Math.round(st),st)?st=Math.round(st):st=Math.ceil(st),k=st*c+b;break}}else switch(w){case 11:D=k+Z.x+Q.width;break;default:D=k-Z.x;break}let et=0;switch(w){case 11:et=-(k+Z.x)+D;break;default:et=k+Q.width-Z.x-D;break}if(i>0&&F>i-1||n>0&&F>0&&et>n){l.push(new I(0,K?N-p:N,n+r,$+p+a));for(let st=0;st<F&&G!==F;st++){const ut=t[G-F+st],mt=ut.getRelativePoint(ut.locationObject,ut.locationSpot,_);ut.moveTo(ut.position.x,ut.position.y+p-mt.y)}$+=a,K?N+=$:N+=$+p,p=0,$=0,F=0,k=b,K=!1}switch(k===b&&(w===11?E=Math.max(E,Q.width-Z.x):E=Math.min(E,-Z.x)),p=Math.max(p,Z.y),$=Math.max($,Q.height-Z.y),isFinite(U)&&($=Math.max($,Math.max(Q.height,U)-Z.y)),K?X.moveTo(k-Z.x,N-Z.y):X.moveTo(k-Z.x,N),w){case 11:k-=Z.x+r;break;default:k+=Q.width-Z.x+r;break}F++}if(l.push(new I(0,N,n+r,(K?$:$+p)+a)),t.length!==F)for(let G=0;G<F;G++){const X=t[t.length-F+G],Q=X.getRelativePoint(X.locationObject,X.locationSpot,y);X.moveTo(X.position.x,X.position.y+p-Q.y)}if(T.s(y),T.s(_),w===11)for(let G=0;G<l.length;G++){const X=l[G];X.width+=E,X.x-=E}else for(let G=0;G<l.length;G++){const X=l[G];X.x>E&&(X.width+=X.x-E,X.x=E)}I.s(u)}commitLayers(t,n){}get wrappingWidth(){return this.$d}set wrappingWidth(t){this.$d!==t&&(t>0||isNaN(t))&&(this.$d=t,this.isViewportSized=isNaN(t),this.invalidateLayout())}get wrappingColumn(){return this.Zd}set wrappingColumn(t){this.Zd!==t&&(t>0||isNaN(t))&&(this.Zd=t,this.invalidateLayout())}get cellSize(){return this.Lo}set cellSize(t){this.Lo.equals(t)||(this.Lo.a(t),this.invalidateLayout())}get spacing(){return this.Ln}set spacing(t){this.Ln.equals(t)||(this.Ln.a(t),this.invalidateLayout())}get alignment(){return this.oi}set alignment(t){this.oi!==t&&(t===1||t===0)&&(this.oi=t,this.invalidateLayout())}get arrangement(){return this.Xi}set arrangement(t){this.Xi!==t&&(t===10||t===11)&&(this.Xi=t,this.invalidateLayout())}get sorting(){return this.pe}set sorting(t){this.pe!==t&&(t===20||t===21||t===22||t===23)&&(this.pe=t,this.invalidateLayout())}get comparer(){return this.ye}set comparer(t){this.ye!==t&&(this.ye=t,this.invalidateLayout())}static standardComparer(t,n){const i=t.text,r=n.text;return i<r?-1:i>r?1:0}static smartComparer(t,n){if(t!==null)if(n!==null){const i=t.text.toLocaleLowerCase(),r=n.text.toLocaleLowerCase(),a=i.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),l=r.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);let u=0;for(;u<a.length;u++)if(l[u]!==""&&l[u]!==void 0){const c=parseFloat(a[u]),f=parseFloat(l[u]);if(isNaN(c))if(isNaN(f)){if(a[u].localeCompare(l[u])!==0)return a[u].localeCompare(l[u]);continue}else return 1;else{if(isNaN(f))return-1;if(c-f!==0)return c-f;continue}}else{if(a[u]==="")continue;return 1}return l[u]!==""&&l[u]!==void 0?-1:0}else return 1;else return n!==null?-1:0}};v(Cs,"Position",0),v(Cs,"Location",1),v(Cs,"LeftToRight",10),v(Cs,"RightToLeft",11),v(Cs,"Forward",20),v(Cs,"Reverse",21),v(Cs,"Ascending",22),v(Cs,"Descending",23);let xh=Cs;const ks=class ks{constructor(){v(this,"Qd");v(this,"qs");v(this,"At");v(this,"Ua");v(this,"p");v(this,"Sy");v(this,"yo");v(this,"ul");v(this,"uN");this.Qd=new L,this.qs=new L,this.At=new L,this.yo=new W,this.ul=new W,this.Ua=new W,this.p=null,this.Sy=!1,this.uN=!0}clear(){this.Qd.clear(),this.qs.clear(),this.At.clear(),this.yo.clear(),this.ul.clear(),this.Ua.clear()}To(e){this.p=e}qh(e){if(e instanceof It){if(this.Qd.add(e),e instanceof Vt){const n=e.containingGroup;n===null?this.p.Yr.add(e):n.la.add(e);const i=e.layout;i!==null&&(i.diagram=this.p)}}else e instanceof Gt?(this.qs.add(e),e.isAvoiding&&(this.p.jm=!0)):e instanceof ie||this.At.add(e);const t=e.data;t!==null&&(e instanceof ie||(e instanceof Gt?this.fT(t,e):this.yo.set(t,e)))}te(e){if(e.clearAdornments(),e instanceof It){if(this.Qd.delete(e),e instanceof Vt){const n=e.containingGroup;n===null?this.p.Yr.delete(e):n.la.delete(e);const i=e.layout;i!==null&&(i.diagram=null)}}else e instanceof Gt?this.qs.delete(e):e instanceof ie||this.At.delete(e);const t=e.data;t!==null&&(e instanceof ie||(e instanceof Gt?this.uT(t,e):this.yo.delete(t)))}fT(e,t){this.ul.set(e,t)}uT(e,t){this.ul.delete(e)}rebuildParts(){const e=this.p;if(e===null)return;const t=e.nodeTemplateMap.iterator;for(;t.next();){const f=t.value,m=t.key;(!f.Pe()||f instanceof Vt)&&o.o(`Invalid node template in Diagram.nodeTemplateMap: template for "${m}" must be a Node or a simple Part, not a Group or Link: ${f}`)}const n=e.groupTemplateMap.iterator;for(;n.next();){const f=n.value,m=n.key;f instanceof Vt||o.o(`Invalid group template in Diagram.groupTemplateMap: template for "${m}" must be a Group, not a normal Node or Link: ${f}`)}const i=e.linkTemplateMap.iterator;for(;i.next();){const f=i.value,m=i.key;f instanceof Gt||o.o(`Invalid link template in Diagram.linkTemplateMap: template for "${m}" must be a Link, not a normal Node or simple Part: ${f}`)}const r=o.nt(),a=e.selection.iterator;for(;a.next();){const f=a.value.data;f&&r.push(f)}const l=o.nt(),u=e.highlighteds.iterator;for(;u.next();){const f=u.value.data;f&&l.push(f)}const c=o.nt();if(this.preservesRebuildLocations){const f=this.nodes.iterator;for(;f.next();){const y=f.value;y.data!==null&&(c.push(y.data),c.push(y.location))}const m=this.links.iterator;for(;m.next();){const y=m.value;y.data!==null&&(c.push(y.data),c.push(y.location))}const p=this.parts.iterator;for(;p.next();){const y=p.value;y.data!==null&&(c.push(y.data),c.push(y.location))}}this.dT(),this.LM();for(let f=0;f<r.length;f++){const m=this.findPartForData(r[f]);m!==null&&(m.isSelected=!0)}for(let f=0;f<l.length;f++){const m=this.findPartForData(l[f]);m!==null&&(m.isHighlighted=!0)}if(this.preservesRebuildLocations)for(let f=0;f<c.length;f+=2){const m=this.findPartForData(c[f]);m!==null&&(m.location=c[f+1])}o.tt(r),o.tt(l),o.tt(c)}LM(){const e=this.diagram.model;this.My(e.nodeDataArray)}My(e,t){const n=this.diagram.model;e.forEach(i=>{n.containsNodeData(i)&&this.gT(i,!1)}),e.forEach(i=>{n.containsNodeData(i)&&this.M1(i)}),t!==!1&&this.diagram.bb(!1)}gT(e,t){if(e==null||this.diagram.undoManager.isUndoingRedoing||this.yo.has(e))return null;t===void 0&&(t=!0);const n=this.PO(e);return n!==null&&t&&this.M1(e),n}PO(e){if(e==null||this.p.undoManager.isUndoingRedoing||this.yo.has(e))return null;const t=this.SO(e),n=this.findTemplateForNodeData(e,t);if(n!==null){n.li();const i=n.copy();if(i!==null){const r=this.diagram.fe;return this.diagram.fe=!0,i.Ho=t,i.Qt=e,this.Sy&&(i.rl="Tool"),this.diagram.add(i),i.Qt=null,i.data=e,this.diagram.fe=r,i}}return null}insertLink(e,t,n,i){return null}M1(e){}SO(e){return this.p.model.getCategoryForNodeData(e)}findTemplateForNodeData(e,t){const n=this.p,i=n.model,r=i.qc()&&i.isGroupForData(e);let a=null;return r?(a=n.groupTemplateMap.get(t),a===null&&(a=n.groupTemplateMap.get(""),a===null&&(ks.pT||(ks.pT=!0,o.ii('No Group template found for category "'+t+'"'),o.ii("  Using default group template")),a=n.rM))):(a=n.nodeTemplateMap.get(t),a===null&&(a=n.nodeTemplateMap.get(""),a===null&&(ks.mT||(ks.mT=!0,o.ii('No Node template found for category "'+t+'"'),o.ii("  Using default node template")),a=n.sM))),a}getLinkCategoryForData(e){return""}setLinkCategoryForData(e,t){}setFromNodeForLink(e,t,n){}setToNodeForLink(e,t,n){}findLinkTemplateForCategory(e){const t=this.p;let n=t.linkTemplateMap.get(e);return n===null&&(n=t.linkTemplateMap.get(""),n===null&&(ks.yT||(ks.yT=!0,o.ii('No Link template found for category "'+e+'"'),o.ii("  Using default link template")),n=t.nM)),n}fv(e,t,n){e instanceof Gt?(t!==null&&this.uT(t,e),n!==null&&this.fT(n,e)):e instanceof xe&&(t!==null&&this.yo.delete(t),n!==null&&this.yo.set(n,e))}dT(){const e=this.diagram.model;this.dN(e.nodeDataArray)}dN(e){e.forEach(t=>{this.N1(t)})}N1(e){const t=this.findPartForData(e);t!==null&&(this.diagram.NM(t,!1),this.gN(t))}gN(e){}nN(e){}findPartForKey(e){if(e==null)return null;const t=this.p.model.findNodeDataForKey(e);return t!==null?this.yo.get(t):null}findNodeForKey(e){if(e==null)return null;const t=this.p.model.findNodeDataForKey(e);if(t===null)return null;const n=this.yo.get(t);return n instanceof It?n:null}findLinkForKey(e){return null}findPartForData(e){if(e===null)return null;let t=this.yo.get(e);return t!==null||(t=this.ul.get(e)),t}findNodeForData(e){if(e===null)return null;const t=this.yo.get(e);return t instanceof It?t:null}findLinkForData(e,t){return e===null?null:this.ul.get(e)}findNodesByExample(...e){const t=new L,n=this.Qd.iterator;for(;n.next();){const i=n.value,r=i.data;if(r!==null)for(let a=0;a<arguments.length;a++){const l=arguments[a];if(o.wt(l)&&this.mN(r,l)){t.add(i);break}}}return t.iterator}findLinksByExample(...e){const t=new L,n=this.qs.iterator;for(;n.next();){const i=n.value,r=i.data;if(r!==null)for(let a=0;a<arguments.length;a++){const l=arguments[a];if(o.wt(l)&&this.mN(r,l)){t.add(i);break}}}return t.iterator}mN(e,t){for(const n in t){const i=e[n],r=t[n];if(Array.isArray(r)){if(!Array.isArray(i))return!1;const a=i,l=r;if(a.length<l.length)return!1;for(let u=0;u<a.length;u++){const c=a[u],f=l[u];if(f!==void 0&&!this.wT(c,f))return!1}}else if(!this.wT(i,r))return!1}return!0}wT(e,t){if(typeof t=="function"){if(!t(e))return!1}else if(t instanceof RegExp){if(!e||!t.test(e.toString()))return!1}else if(o.wt(e)&&o.wt(t)){if(!this.mN(e,t))return!1}else if(e!==t)return!1;return!0}doModelDataChanged(e){if(e.model===this.diagram.model&&this.diagram.Y){this.diagram.Y=!1;try{const t=e.change;e.modelChange===""&&t===2&&this.Ny(e.object,e.propertyName)}finally{this.diagram.Y=!0}}}doModelChanged(e){if(!this.p)return;const t=this.p;if(e.model!==t.model)return;const n=e.change;if(t.uR(e),!!t.Y){t.Y=!1;try{const i=e.modelChange;if(i!=="")if(n===2){if(i==="nodeCategory"){const r=e.object,a=this.findPartForData(r),l=e.newValue;a!==null&&typeof l=="string"&&(a.category=l)}else if(i==="nodeDataArray"){const r=e.oldValue;this.dN(r);const a=e.newValue;this.My(a)}t.isModified=!0}else if(n===3){const r=e.newValue;i==="nodeDataArray"&&o.wt(r)&&this.gT(r),t.isModified=!0}else if(n===4){const r=e.oldValue;i==="nodeDataArray"&&o.wt(r)&&this.N1(r),t.isModified=!0}else n===1&&(i==="SourceChanged"?e.object!==null?this.Ny(e.object,e.propertyName):(this.updateAllRelationshipsFromData(),this.updateAllTargetBindings()):i==="ModelDisplaced"&&this.rebuildParts());else if(n===2){const r=e.propertyName,a=e.object,l=t.model;a===l?(r==="nodeKeyProperty"||r==="nodeCategoryProperty")&&(t.undoManager.isUndoingRedoing||this.rebuildParts()):this.Ny(a,r),t.isModified=!0}else(n===3||n===4)&&(this.MO(e),t.isModified=!0)}finally{t.Y=!0}}}updateAllTargetBindings(e){e===void 0&&(e="");let t=this.parts.iterator;for(;t.next();)t.value.updateTargetBindings(e);for(t=this.nodes.iterator;t.next();)t.value.updateTargetBindings(e);for(t=this.links.iterator;t.next();)t.value.updateTargetBindings(e)}updateAllThemeBindings(){let e=this.parts.iterator;for(;e.next();)e.value.Io();for(e=this.nodes.iterator;e.next();)e.value.Io();for(e=this.links.iterator;e.next();)e.value.Io()}updateAllRelationshipsFromData(){const e=this.p.model,t=new L,n=e.nodeDataArray;for(let a=0;a<n.length;a++){const l=n[a];t.add(l)}const i=[];this.nodes.each(a=>{a.data!==null&&!t.has(a.data)&&i.push(a.data)}),this.parts.each(a=>{a.data!==null&&!t.has(a.data)&&i.push(a.data)}),i.forEach(a=>e.xT(a,!1));for(let a=0;a<n.length;a++){const l=n[a];this.findPartForData(l)===null&&e.bT(l,!1)}this.kT();let r=this.parts.iterator;for(;r.next();)r.value.updateRelationshipsFromData();for(r=this.nodes.iterator;r.next();)r.value.updateRelationshipsFromData();for(r=this.links.iterator;r.next();)r.value.updateRelationshipsFromData()}kT(){}updateRelationshipsFromData(e){}Ny(e,t){if(typeof t=="string"){const n=this.findPartForData(e);if(n!==null)n.updateTargetBindings(t);else{const i=this.NO(e);if(i!==null&&i.length>0){for(let a=0;a<i.length;a++)i[a].updateTargetBindings(t);const r=i[0].part;if(r!==null){const a=r.adornments;for(;a.next();)a.value.updateTargetBindings(t)}o.tt(i)}}e===this.diagram.model.modelData&&this.updateAllTargetBindings(t)}}NO(e){let t=null;const n=this.Ua.iterator;for(;n.next();){const i=n.value;for(let r=0;r<i.length;r++){const a=i[r].findItemPanelForData(e);a!==null&&(t===null&&(t=o.nt()),t.push(a))}if(t!==null)break}return t}MO(e){const t=e.object,n=e.change===3,i=n?e.newParam:e.oldParam,r=n?e.newValue:e.oldValue,a=this.Ua.get(t);if(Array.isArray(a))for(let l=0;l<a.length;l++){const u=a[l];n?u.Wb(r,i,!0):u.dv(i)}}SM(e,t){t!==null&&e.Hr(i=>t.SL(i));const n=e.mh;if(Array.isArray(n)){const i=this.Ua.get(n);if(i===null){const r=[];r.push(e),this.Ua.set(n,r)}else{for(let r=0;r<i.length;r++)if(i[r]===e)return;i.push(e)}}}MM(e,t){e.Hr(i=>t.gR(i));const n=e.mh;if(Array.isArray(n)){const i=this.Ua.get(n);if(i!==null){for(let r=0;r<i.length;r++)if(i[r]===e){i.splice(r,1),i.length===0&&this.Ua.delete(n);return}}}}copyParts(e,t,n){n===void 0&&(n=!1);const i=new W;if(Array.isArray(e))for(let a=0;a<e.length;a++)this.C1(e[a],t,i,n);else{const a=e.iterator;for(;a.next();)this.C1(a.value,t,i,n)}if(t!==null){const a=t.model,l=t.c0().dragsLink,u=new L,c=new W,f=i.iterator;for(;f.next();){const m=f.value;if(m instanceof Gt)!l&&(m.fromNode===null||m.toNode===null)&&u.add(m);else if(m instanceof It&&m.data!==null){if(a.pc()){const p=m,y=f.key,w=y.findTreeParentNode();if(w!==null){const b=i.get(w);if(b!==null){a.setParentKeyForNodeData(p.data,a.getKeyForNodeData(b.data));const C=t.findLinkForData(p.data),k=y.findTreeParentLink();k!==null&&C!==null&&c.set(k,C)}else a.setParentKeyForNodeData(p.data,void 0)}}else if(a.qu()){const p=m,y=f.key,w=a.isRelatedKeysPathTo?y.findNodesOutOf():y.findNodesInto();for(;w.next();){const b=w.value,C=i.get(b);if(C!==null){a.addRelatedKeyForNodeData(p.data,C.key);const k=t.partManager.findLinkForData(p.data,C.key),N=this.findLinkForData(y.data,b.key);N!==null&&k!==null&&c.set(N,k)}else a.removeRelatedKeyForNodeData(p.data,b.key)}}}}if(u.count>0&&t.removeParts(u,!1),c.count>0){const m=c.iterator;for(;m.next();){const p=m.key,y=m.value;i.set(p,y)}}}if(t!==null&&this.p!==null){const a=t.model,l=a.afterCopyFunction;if(l!==null){const u=new W;i.each(f=>{f.key.data!==null&&u.set(f.key.data,f.value.data)});const c=this.p.model;l(u,a,c)}}const r=i.iterator;for(;r.next();)r.value.updateTargetBindings();return i}C1(e,t,n,i){if(e===null||i&&!e.canCopy())return null;if(n.has(e))return n.get(e);const r=this.pN(e,t);if(!(r instanceof xe))return null;if(r.isSelected=!1,r.isHighlighted=!1,n.set(e,r),e instanceof It){const a=e.linksConnected;for(;a.next();){const l=a.value;if(l.fromNode===e){const u=n.get(l);u!==null&&(u.fromNode=r)}if(l.toNode===e){const u=n.get(l);u!==null&&(u.toNode=r)}}if(e instanceof Vt&&r instanceof Vt){const l=e.memberParts;for(;l.next();){const u=l.value,c=this.C1(u,t,n,i);c instanceof Gt||c!==null&&(c.containingGroup=r)}}}else if(e instanceof Gt&&r instanceof Gt){const a=e.fromNode;if(a!==null){const c=n.get(a);c!==null&&(r.fromNode=c)}const l=e.toNode;if(l!==null){const c=n.get(l);c!==null&&(r.toNode=c)}const u=e.labelNodes;for(;u.next();){const c=u.value,f=this.C1(c,t,n,i);f!==null&&f instanceof It&&(f.labeledLink=r)}}return r}pN(e,t){let n=null;const i=e.data;if(i!==null&&t!==null){const r=t.model;if(!(e instanceof Gt)){const a=r.copyNodeData(i);o.wt(a)&&(r.addNodeData(a),n=t.findPartForData(a))}}else if(e.li(),n=e.copy(),n!==null){const r=this.p;if(t!==null)t.add(n);else if(i!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData){const a=r.model;let l=null;n instanceof Gt||(l=a.copyNodeData(i)),o.wt(l)&&(n.data=l)}}return n}get nodes(){return this.Qd}get links(){return this.qs}get parts(){return this.At}get diagram(){return this.p}get addsToTemporaryLayer(){return this.Sy}set addsToTemporaryLayer(e){this.Sy=e}get preservesRebuildLocations(){return this.uN}set preservesRebuildLocations(e){this.uN=e}};v(ks,"mT",!1),v(ks,"pT",!1),v(ks,"yT",!1);let io=ks;class mC extends io{LM(){const e=this.diagram.model;this.My(e.nodeDataArray),this.PT(e.linkDataArray)}My(e){super.My(e,!1);const t=this.links.iterator;for(;t.next();)t.value.Td();this.diagram.bb(!1)}PT(e){e.forEach(t=>{this.ST(t)}),this.diagram.bb(!1)}ST(e){if(e==null||this.diagram.undoManager.isUndoingRedoing||this.ul.has(e))return null;const t=this.getLinkCategoryForData(e),n=this.findLinkTemplateForCategory(t);if(n!==null){n.li();const i=n.copy();if(i!==null){const r=this.diagram.fe;this.diagram.fe=!0,i.Ho=t,i.Qt=e;const a=this.diagram.model,l=a.L1(e,!0);l!==""&&(i.fromPortId=l);const u=a.Te(e,!0);if(u!==void 0){const p=this.findNodeForKey(u);p instanceof It&&(i.fromNode=p)}const c=a.L1(e,!1);c!==""&&(i.toPortId=c);const f=a.Te(e,!1);if(f!==void 0){const p=this.findNodeForKey(f);p instanceof It&&(i.toNode=p)}const m=a.getLabelKeysForLinkData(e);return Array.isArray(m)&&m.forEach(p=>{const y=this.findNodeForKey(p);y!==null&&(y.labeledLink=i)}),this.Sy&&(i.rl="Tool"),this.diagram.add(i),i.Qt=null,i.data=e,this.diagram.fe=r,i}}return null}dT(){const e=this.diagram.model;this.MT(e.linkDataArray),this.dN(e.nodeDataArray)}MT(e){e.forEach(t=>{this.N1(t)})}getLinkCategoryForData(e){return this.diagram.model.getCategoryForLinkData(e)}setLinkCategoryForData(e,t){return this.diagram.model.setCategoryForLinkData(e,t)}setFromNodeForLink(e,t){const n=this.diagram.model,i=t!==null?t.data:null;n.setFromKeyForLinkData(e.data,n.getKeyForNodeData(i))}setToNodeForLink(e,t){const n=this.diagram.model,i=t!==null?t.data:null;n.setToKeyForLinkData(e.data,n.getKeyForNodeData(i))}nN(e){this.diagram.model.removeLinkData(e.data)}findPartForKey(e){const t=super.findPartForKey(e);if(t===null){const n=this.diagram.model.findLinkDataForKey(e);if(n!==null)return this.ul.get(n)}return t}findLinkForKey(e){if(e==null)return null;const t=this.diagram.model.findLinkDataForKey(e);return t!==null?this.ul.get(t):null}doModelChanged(e){if(super.doModelChanged(e),!this.diagram)return;const t=this.diagram;if(e.model!==t.model)return;const n=e.change;if(t.Y){t.Y=!1;try{const i=e.modelChange;if(i!==""){if(n===2){if(i==="linkFromKey"){const r=e.object,a=this.findLinkForData(r);if(a!==null){const l=e.newValue,u=this.findNodeForKey(l);a.fromNode=u}}else if(i==="linkToKey"){const r=e.object,a=this.findLinkForData(r);if(a!==null){const l=e.newValue,u=this.findNodeForKey(l);a.toNode=u}}else if(i==="linkFromPortId"){const r=e.object,a=this.findLinkForData(r);if(a!==null){const l=e.newValue;typeof l=="string"&&(a.fromPortId=l)}}else if(i==="linkToPortId"){const r=e.object,a=this.findLinkForData(r);if(a!==null){const l=e.newValue;typeof l=="string"&&(a.toPortId=l)}}else if(i==="nodeGroupKey"){const r=e.object,a=this.findPartForData(r);if(a!==null){const l=e.newValue;if(l!==void 0){const u=this.findNodeForKey(l);u instanceof Vt?a.containingGroup=u:a.containingGroup=null}else a.containingGroup=null}}else if(i==="linkLabelKeys"){const r=e.object,a=this.findLinkForData(r);if(a!==null){const l=e.oldValue,u=e.newValue;Array.isArray(l)&&l.forEach(c=>{if(u.indexOf(c)>=0)return;const f=this.findNodeForKey(c);f!==null&&(f.labeledLink=null)}),Array.isArray(u)&&u.forEach(c=>{const f=this.findNodeForKey(c);f!==null&&(f.labeledLink=a)})}}else if(i==="linkCategory"){const r=e.object,a=this.findLinkForData(r),l=e.newValue;a!==null&&typeof l=="string"&&(a.category=l)}else if(i==="linkDataArray"){const r=e.oldValue;this.MT(r);const a=e.newValue;this.PT(a)}t.isModified=!0}else if(n===3){const r=e.newValue;if(i==="linkDataArray"&&typeof r=="object"&&r!==null)this.ST(r);else if(i==="linkLabelKeys"&&e.model.isKeyType(r)){const a=e.object,l=this.findLinkForData(a),u=this.findNodeForKey(r);l!==null&&u!==null&&(u.labeledLink=l)}t.isModified=!0}else if(n===4){const r=e.oldValue;if(i==="linkDataArray"&&typeof r=="object"&&r!==null)this.N1(r);else if(i==="linkLabelKeys"&&e.model.isKeyType(r)){const a=this.findNodeForKey(r);a!==null&&(a.labeledLink=null)}t.isModified=!0}}else if(n===2){const r=e.propertyName,a=e.object,l=t.model;a===l&&(r==="linkFromKeyProperty"||r==="linkToKeyProperty"||r==="linkFromPortIdProperty"||r==="linkToPortIdProperty"||r==="linkLabelKeysProperty"||r==="nodeIsGroupProperty"||r==="nodeGroupKeyProperty"||r==="linkCategoryProperty")&&(t.undoManager.isUndoingRedoing||this.rebuildParts()),t.isModified=!0}}finally{t.Y=!0}}}kT(){const e=this.diagram.model,t=new L,n=e.linkDataArray;n.forEach(r=>{t.add(r)});const i=[];this.links.each(r=>{r.data!==null&&!t.has(r.data)&&i.push(r.data)}),i.forEach(r=>{e.NT(r,!1)}),n.forEach(r=>{this.findLinkForData(r)===null&&e.CT(r,!1)})}updateRelationshipsFromData(e){const t=e.data;if(t===null)return;const n=e.diagram;if(n===null)return;const i=n.model;if(e instanceof Gt){let r=i.Te(t,!0),a=n.findNodeForKey(r);e.fromNode=a,r=i.Te(t,!1),a=n.findNodeForKey(r),e.toNode=a;const l=i.getLabelKeysForLinkData(t);if(l.length>0||e.labelNodes.count>0){if(l.length===1&&e.labelNodes.count===1){const p=l[0],y=e.labelNodes.first();if(i.getKeyForNodeData(y.data)===p)return}const u=new L().addAll(l),c=new L;e.labelNodes.each(p=>{if(p.data!==null){const y=i.getKeyForNodeData(p.data);y!==void 0&&c.add(y)}});const f=c.copy();f.removeAll(u);const m=u.copy();if(m.removeAll(c),f.count>0||m.count>0){const p=e;f.each(y=>{const w=n.findNodeForKey(y);w!==null&&w.labeledLink===p&&(w.labeledLink=null)}),m.each(y=>{const w=n.findNodeForKey(y);w!==null&&w.labeledLink!==p&&(w.labeledLink=p)})}}}else if(!(e instanceof ie)){const r=i.getGroupKeyForNodeData(t),a=n.findPartForKey(r);(a===null||a instanceof Vt)&&(e.containingGroup=a)}}M1(e){const t=this.diagram.model,n=t.getKeyForNodeData(e);if(n!==void 0){const i=t.Cy(n),r=this.findPartForData(e);if(i!==null&&r!==null){const l=i.iterator;for(;l.next();){const u=l.value;if(t.containsNodeData(u)){if(r instanceof Vt&&t.getGroupKeyForNodeData(u)===n){const c=this.findPartForData(u);c!==null&&(c.containingGroup=r)}}else{const c=this.findLinkForData(u);if(c!==null&&r instanceof It){t.Te(u,!0)===n&&(c.fromNode=r),t.Te(u,!1)===n&&(c.toNode=r);const f=t.getLabelKeysForLinkData(u);Array.isArray(f)&&f.some(m=>m===n?(r.labeledLink=c,!0):!1)}}}t.Js(n)}const a=t.getGroupKeyForNodeData(e);if(a!==void 0){const l=this.findNodeForKey(a);l instanceof Vt&&(r.containingGroup=l)}}}gN(e){const t=this.diagram.model;if(e instanceof It){const n=t.getKeyForNodeData(e.data);if(n!==void 0){const i=e.linksConnected;for(;i.next();){const r=i.value;t.$s(n,r.data)}if(e.isLinkLabel){const r=e.labeledLink;r!==null&&t.$s(n,r.data)}if(e instanceof Vt){const r=e.memberParts;for(;r.next();){const a=r.value.data;t.containsNodeData(a)&&t.$s(n,a)}}}}}pN(e,t){let n=super.pN(e,t);if(e instanceof Gt){const i=e.data;if(i!==null&&t!==null){const r=t.model,a=r.copyLinkData(i);typeof a=="object"&&a!==null&&(r.addLinkData(a),n=t.findLinkForData(a))}else if(n!==null){const r=this.diagram;if(i!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData){const a=r.model.copyLinkData(i);typeof a=="object"&&a!==null&&(n.data=a)}}}return n}insertLink(e,t,n,i){const r=this.diagram,a=r.model,l=r.toolManager.findTool("Linking");let u="";e!==null&&(t===null&&(t=e),u=t.portId,u===null&&(u=""));let c="";n!==null&&(i===null&&(i=n),c=i.portId,c===null&&(c=""));const f=l.archetypeLinkData;if(f instanceof Gt){f.li();const m=f.copy();if(m!==null){m.fromNode=e,m.fromPortId=u,m.toNode=n,m.toPortId=c,r.add(m);const p=l.archetypeLabelNodeData;if(p instanceof It){p.li();const y=p.copy();y!==null&&(y.labeledLink=m,r.add(y))}return m}}else if(f!==null){const m=a.copyLinkData(f);if(typeof m=="object"&&m!==null){e!==null&&a._d(m,a.getKeyForNodeData(e.data),!0),a.tg(m,u,!0),n!==null&&a._d(m,a.getKeyForNodeData(n.data),!1),a.tg(m,c,!1),a.addLinkData(m);const p=l.archetypeLabelNodeData;if(p!==null&&!(p instanceof It)){const y=a.copyNodeData(p);if(typeof y=="object"&&y!==null){a.addNodeData(y);const w=a.getKeyForNodeData(y);w!==void 0&&a.addLabelKeyForLinkData(m,w)}}return r.findLinkForData(m)}}return null}}class pC extends io{constructor(){super(...arguments);v(this,"Ph",null)}A1(t,n){if(t===null||n===null||n.findTreeParentLink()!==null)return null;const i=this.diagram.toolManager.findTool("Linking");let r=t,a=n;if(this.diagram.isTreePathToChildren){if(i!==null&&i.bu(r,a,null,!0))return null}else if(r=n,a=t,i!==null&&i.bu(r,a,null,!0))return null;const l=this.getLinkCategoryForData(n.data),u=this.findLinkTemplateForCategory(l);if(u!==null){u.li();const c=u.copy();if(c!==null){const f=this.diagram.fe;return this.diagram.fe=!0,c.Ho=l,c.Qt=n.data,c.fromNode=r,c.toNode=a,this.diagram.add(c),c.Qt=null,c.data=n.data,this.diagram.fe=f,c}}return null}getLinkCategoryForData(t){return this.diagram.model.getParentLinkCategoryForNodeData(t)}setLinkCategoryForData(t,n){this.diagram.model.setParentLinkCategoryForNodeData(t,n)}setFromNodeForLink(t,n,i){const r=this.diagram.model;i===void 0&&(i=null);const a=n!==null?n.data:null;if(this.diagram.isTreePathToChildren)r.setParentKeyForNodeData(t.data,r.getKeyForNodeData(a));else{const l=this.Ph;this.Ph=t,i!==null&&r.setParentKeyForNodeData(i.data,void 0);const u=t.toNode!==null?t.toNode.data:null;r.setParentKeyForNodeData(a,r.getKeyForNodeData(u)),this.Ph=l}}setToNodeForLink(t,n,i){const r=this.diagram.model;i===void 0&&(i=null);const a=n!==null?n.data:null;if(this.diagram.isTreePathToChildren){const l=this.Ph;this.Ph=t,i!==null&&r.setParentKeyForNodeData(i.data,void 0);const u=t.fromNode!==null?t.fromNode.data:null;r.setParentKeyForNodeData(a,r.getKeyForNodeData(u)),this.Ph=l}else r.setParentKeyForNodeData(t.data,r.getKeyForNodeData(a))}nN(t){this.diagram.model.setParentKeyForNodeData(t.data,void 0)}findLinkForKey(t){if(t==null)return null;const n=this.diagram.model.findNodeDataForKey(t);return n!==null?this.ul.get(n):null}doModelChanged(t){if(super.doModelChanged(t),!this.diagram)return;const n=this.diagram;if(t.model!==n.model)return;const i=t.change;if(n.Y){n.Y=!1;try{const r=t.modelChange;if(r!==""){if(i===2){if(r==="nodeParentKey"){const a=t.object,l=t.newValue,u=this.findNodeForKey(l),c=this.findNodeForData(a);if(this.Ph!==null)u!==null&&(this.Ph.data=a,this.Ph.category=this.getLinkCategoryForData(a));else if(c!==null){const f=c.findTreeParentLink();f!==null?u===null?n.remove(f):n.isTreePathToChildren?f.fromNode=u:f.toNode=u:this.A1(u,c)}}else if(r==="parentLinkCategory"){const a=t.object,l=this.findNodeForData(a),u=t.newValue;if(l!==null&&typeof u=="string"){const c=l.findTreeParentLink();c!==null&&(c.category=u)}}n.isModified=!0}}else if(i===2){const a=t.propertyName,l=t.object,u=n.model;l===u&&a==="nodeParentKeyProperty"&&(n.undoManager.isUndoingRedoing||this.rebuildParts()),n.isModified=!0}}finally{n.Y=!0}}}updateRelationshipsFromData(t){const n=t.data;if(n===null)return;const i=t.diagram;if(i===null)return;const r=i.model;if(t instanceof It){const a=r.getParentKeyForNodeData(n),l=i.findNodeForKey(a),u=t.findTreeParentNode();if(l!==u){const c=t.findTreeParentLink();l!==null?c!==null?i.isTreePathToChildren?c.fromNode=l:c.toNode=l:this.A1(l,t):c!==null&&i.NM(c,!1)}}}Ny(t,n){if(super.Ny(t,n),typeof n=="string"&&this.findPartForData(t)!==null){const i=this.findLinkForData(t);i!==null&&i.updateTargetBindings(n)}}M1(t){const n=this.diagram.model,i=n.getKeyForNodeData(t);if(i!==void 0){const r=n.Cy(i),a=this.findPartForData(t);if(r!==null&&a!==null){const u=r.iterator;for(;u.next();){const c=u.value;if(n.containsNodeData(c)&&a instanceof It&&n.getParentKeyForNodeData(c)===i){const f=this.findNodeForData(c);this.A1(a,f)}}n.Js(i)}const l=n.getParentKeyForNodeData(t);if(l!==void 0&&a instanceof It){const u=this.findNodeForKey(l);this.A1(u,a)}}}gN(t){const n=this.diagram.model;if(t instanceof It){const i=n.getKeyForNodeData(t.data),r=this.findLinkForData(t.data);if(r!==null){r.isSelected=!1,r.isHighlighted=!1;const u=r.layer;if(u!==null){const c=u.te(-1,r,!1);c>=0&&this.diagram.raiseChangedEvent(4,"parts",u,r,null,c,null);const f=r.layerChanged;f!==null&&f(r,u,null)}}const a=this.diagram.isTreePathToChildren,l=t.linksConnected;for(;l.next();){const u=l.value,c=(a?u.toNode:u.fromNode).data;n.containsNodeData(c)&&n.$s(i,c)}}}insertLink(t,n,i,r){const a=this.diagram.model;let l=t,u=i;if(this.diagram.isTreePathToChildren||(l=i,u=t),l!==null&&u!==null){const c=l.data,f=u.data;return a.setParentKeyForNodeData(f,a.getKeyForNodeData(c)),u.findTreeParentLink()}return null}}var bh=(A=>(A[A.OneWay=1]="OneWay",A[A.TwoWay=2]="TwoWay",A))(bh||{});const yi=class yi{constructor(e,t,n,i){v(this,"n");v(this,"yN");v(this,"Va");v(this,"Lf");v(this,"Sh");v(this,"Af");v(this,"Tf");v(this,"Df");v(this,"T1");v(this,"ke");v(this,"pd");v(this,"uf");L.Gi(this),e===void 0?e="":o.i(e,"string",yi,"constructor:targetprop"),t===void 0?t=e:o.i(t,"string",yi,"constructor:sourceprop"),n===void 0?n=null:n!==null&&o.i(n,"function",yi,"constructor:conv"),this.yN=-1,this.ke=null,this.Va=e,this.pd=0,this.uf=0,this.Lf=null,this.Sh=t,this.Af=n,i===void 0?(this.Tf=1,this.Df=null):(this.Tf=2,this.Df=i),this.T1=new L,this.n=2}copy(){const e=new this.constructor;return this.cloneProtected(e),e}cloneProtected(e){e.Va=this.Va,e.pd=this.pd,e.uf=this.uf,e.Lf=this.Lf,e.Sh=this.Sh,e.Af=this.Af,e.Tf=this.Tf,e.Df=this.Df,e.n=this.n&-2}static parseEnum(e,t){return o.i(e,"function",yi,"parseEnum:ctor"),n=>{let i=parseInt(n);return isNaN(i)&&(i=o.Ih(e,n),i===null)?t:i}}ri(e){e in bh?this.mode=e:o.lr(this,e)}static toString(e){return o.toString(e)}toString(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.targetId!==-1?" "+this.targetId:"")+" "+bh[this.mode]+")"}g(){return this.n=this.n|1,this}ot(){return this.n=this.n&-2,this}get targetId(){return this.yN}set targetId(e){this.h&&o.T(this),o.i(e,"number",yi,"targetId"),this.yN=e}get targetProperty(){return this.Va}set targetProperty(e){this.h&&o.T(this),o.i(e,"string",yi,"targetProperty"),this.Va=e}get sourceProperty(){return this.Sh}set sourceProperty(e){this.h&&o.T(this),o.i(e,"string",yi,"sourceProperty"),this.Sh=e}get h(){return(this.n&1)!==0}get isToData(){return(this.n&2)!==0}get isToObject(){return(this.n&4)!==0}get isToModel(){return(this.n&8)!==0}get isToTheme(){return(this.n&16)!==0}get wN(){return this.isToTheme&&!(this.isToData||this.isToObject||this.isToModel)}_u(){return!1}get sourceName(){return this.Lf}set sourceName(e){this.h&&o.T(this),e!==null&&o.i(e,"string",yi,"sourceName"),this.Lf=e,e!==null?this.n=this.n&-3|4:this.n=this.n|2}get converter(){return this.Af}set converter(e){this.h&&o.T(this),e!==null&&o.i(e,"function",yi,"converter"),this.Af=e}get backConverter(){return this.Df}set backConverter(e){this.h&&o.T(this),e!==null&&o.i(e,"function",yi,"backConverter"),this.Df=e}get mode(){return this.Tf}set mode(e){this.h&&o.T(this),this.isToTheme&&e===2&&o.o("Theme Bindings cannot be TwoWay."),this.Tf=e}makeTwoWay(e){return this.isToTheme&&o.o("Theme Bindings cannot be TwoWay."),this.mode=2,e&&(o.i(e,"function",yi,"makeTwoWay"),this.backConverter=e),this}ofObject(e){return this.h&&o.T(this),e===void 0&&(e=""),this.sourceName=e,this}ofModel(){return this.h&&o.T(this),this.n=this.n&-3&-5|8,this.Lf=null,this}ZL(e,t){const n=this.sourceName;let i=null;return n===null||n===""?i=e:n==="/"?i=t.part:n==="."?i=t:n===".."?i=t.panel:i=e.findObject(n),i}check(e){const t=this.Va,n=this.Sh,i=this.Af;(this._u()&&i===null&&this.Mh===null&&t===""||i===null&&t==="")&&o.ii("Binding error: target property is the empty string: "+this.toString()),this._u()&&this.wN&&n===""&&i===null&&this.Mh===null&&o.ii("Binding error: theme bindings require a source property when not using a converter: "+this.toString()),e&&typeof t=="string"&&(typeof e.setAttribute!="function"&&t.length>0&&t[0]!=="_"&&!o.fw(e,t)?o.ii("Binding error: undefined target property: "+t+" on "+e.toString()):t==="name"&&e instanceof Re&&o.ii("Binding error: cannot modify GraphObject.name on "+e.toString()))}updateTarget(e,t,n){var c,f,m;const i=this.Sh;if(n!==void 0&&i!==""&&i!==n)return;const r=this.Va,a=this.Af;let l=t;if(i!==""&&!this.wN&&(l=Wt.vt(t,i)),l===void 0)return;const u=((c=e.diagram)==null?void 0:c.themeManager)??((m=(f=e.panel)==null?void 0:f.diagram)==null?void 0:m.themeManager);if(a===null){if(r!==""){if(this._u()&&(l=this.LT(u,l,e,r),l===void 0))return;Wt.rt(e,r,l)}}else try{if(r!==""){let p=a(l,e);if(this._u()&&(p=this.LT(u,p,e,r),p===void 0))return;Wt.rt(e,r,p)}else a(l,e)}catch{}}updateSource(e,t,n,i){if(this.Tf!==2)return;const r=this.Va;if(n!==void 0&&r!==n)return;const a=this.Sh,l=this.Df;let u=e;if(r!==""&&(u=Wt.vt(e,r)),u!==void 0&&!this.T1.has(e))try{this.T1.add(e);const c=i!==null?i.diagram:null,f=c!==null?c.model:null;if(l===null){if(a!=="")f!==null?f.setDataProperty(t,a,u):Wt.rt(t,a,u);else if(f!==null&&i!==null&&i.itemIndex>=0&&i.panel!==null&&Array.isArray(i.panel.itemArray)){const m=i.itemIndex,p=i.panel.itemArray;f.removeArrayItem(p,m),f.insertArrayItem(p,m,u)}}else try{if(a!==""){const m=l(u,t,f);f!==null?f.setDataProperty(t,a,m):Wt.rt(t,a,m)}else{const m=l(u,t,f);if(m!==void 0&&f!==null&&i!==null&&i.itemIndex>=0&&i.panel!==null&&Array.isArray(i.panel.itemArray)){const p=i.itemIndex,y=i.panel.itemArray;f.removeArrayItem(y,p),f.insertArrayItem(y,p,m)}}}catch{}}finally{this.T1.delete(e)}}};v(yi,"OneWay",1),v(yi,"TwoWay",2);let rr=yi;class Bo extends rr{constructor(t,n,i,r,a){super(t,n,r);v(this,"Ly");v(this,"Mh");v(this,"za");i==null&&(i=""),a===void 0&&(a=null),this.Ly=i,this.Mh=a,this.za=null,this.n=16}cloneProtected(t){super.cloneProtected(t),t.Ly=this.Ly,t.Mh=this.Mh,t.za=this.za}_u(){return!0}get themeSource(){return this.Ly}set themeSource(t){this.h&&o.T(this),t!==null&&o.i(t,"string",Bo,"themeSource"),this.Ly=t,this.za=null,t!==null?this.n=this.n|16:this.n=this.n&-17}get themeConverter(){return this.Mh}set themeConverter(t){this.h&&o.T(this),t!==null&&o.i(t,"function",Bo,"themeConverter"),this.Mh=t}ofData(){return this.h&&o.T(this),this.n=this.n|2,this.Lf=null,this}LT(t,n,i,r){if(!t||(this.wN&&(n=this.Sh),!n&&n!==0))return;let a=this.themeSource;this.za!==null?a=this.za:typeof a=="string"&&a.includes(".")&&(this.za=a.split("."),a=this.za);let l=t.findValue(n,a,r);return l===void 0&&o.ii(`Theme warning: ${n} could not be found when setting target property ${r}.`),typeof this.Mh=="function"&&(l=this.Mh(l,i)),l}}const _t=class _t{constructor(e,t){v(this,"Mt");v(this,"ig");v(this,"vo");v(this,"D1");v(this,"De");v(this,"Ff");v(this,"Rf");v(this,"eg");v(this,"sg");v(this,"ng");v(this,"og");v(this,"Xa");v(this,"er");v(this,"F1");v(this,"Ro");v(this,"R1");v(this,"ti");v(this,"Nh");v(this,"rg",new L);v(this,"lg",new L);v(this,"Ay");v(this,"vT",`,
  "insertedNodeKeys": `);v(this,"CO",`,
  "modifiedNodeData": `);v(this,"OT",`,
  "removedNodeKeys": `);v(this,"Ka",null);if(L.Gi(this),this.Mt="",this.ig="",this.vo=!1,this.D1={},this.De=[],this.ti=new W,this.Nh="key",this.Ff=null,this.Rf=null,this.eg=!1,this.sg=!1,this.ng=!1,this.og=null,this.Xa="category",this.er=new W,this.Ay=100,this.F1=new M,this.Ro=!1,this.R1=null,this.undoManager=new gt,e!==void 0&&(Array.isArray(e)?this.nodeDataArray=e:t=e),t){Object.assign(this,t);const n=t.Changed;n&&(delete this.Changed,this.addChangedListener(n))}}cloneProtected(e){e.Mt=this.Mt,e.ig=this.ig,e.vo=this.vo,e.Nh=this.Nh,e.Ff=this.Ff,e.Rf=this.Rf,e.eg=this.eg,e.sg=this.sg,e.ng=this.ng,e.Ay=this.Ay,e.og=this.og,e.Xa=this.Xa}copy(){const e=new this.constructor;return this.cloneProtected(e),e}clear(){this.De=[],this.ti.clear(),this.er.clear(),this.undoManager.clear()}toString(e){if(e===void 0&&(e=0),e>1)return this.toJson();{let t=(this.name!==""?this.name:"")+" Model";if(e>0){t+=`
 node data:`;const n=this.nodeDataArray,i=n.length;for(let r=0;r<i;r++){const a=n[r];t+=" "+this.getKeyForNodeData(a)+":"+o.toString(a)}}return t}}toIncrementalData(e){e.change!==1&&o.o("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+e.toString());const t=e.object;if(!e.isTransactionFinished||!(t instanceof ht))return null;this.AT(t);const n=this.xN(t,e.propertyName==="FinishedUndo");return this.Ka=null,n}xN(e,t){const n=this;let i=!1;const r=new L,a=new L,l=new L,u=this.Ka;e.changes.each(y=>{if(y.model===n){if(y.modelChange==="nodeDataArray")y.change===3?r.add(y.newValue):y.change===4&&l.add(y.oldValue);else if(n.containsNodeData(y.object))a.add(y.object);else if(y.change===2&&(n.modelData===y.object||y.propertyName==="modelData"))i=!0;else if(y.object!==null)if(u&&u.has(y.object))u.get(y.object).each(w=>{n.containsNodeData(w)&&a.add(w)});else{if(y.object instanceof _t||n.Ta()&&n.containsLinkData(y.object))return;n.TT(y.object).each(w=>{a.add(w)})}}});const c=this.lg;c.clear(),r.each(y=>{c.add(n.getKeyForNodeData(y)),t||a.add(y)});const f=this.rg;f.clear(),l.each(y=>{f.add(n.getKeyForNodeData(y)),t&&a.add(y)});const m=n.cloneDeep(a.toArray());let p=null;return i&&(p===null&&(p={}),p.modelData=this.cloneDeep(this.modelData)),c.count>0&&(p===null&&(p={}),t?p.removedNodeKeys=c.toArray():p.insertedNodeKeys=c.toArray()),m.length>0&&(p===null&&(p={}),p.modifiedNodeData=m),f.count>0&&(p===null&&(p={}),t?p.insertedNodeKeys=f.toArray():p.removedNodeKeys=f.toArray()),f.clear(),c.clear(),p}cloneDeep(e){return this.hg(e,!0)}hg(e,t,n,i,r){if(!o.wt(e))return e;r||(r=[]);const a=Object.isExtensible(e);if(n||(n=new W),a){const c=n.get(e);if(c)return c}else{i||(i=new W);const c=i.iterator;for(;c.next();){const f=c.key;if(c.value===e){const m=n.get(f);if(m)return m}}}function l(c,f){if(a)c.__gohashid===void 0&&r.push(c),n.set(c,f);else{const m=L.nu++;n.set(m,f),i.set(m,e)}}let u;if(Array.isArray(e)){u=[],l(e,u);for(let c=0;c<e.length;c++){const f=e[c];u.push(this.hg(f,!1,n,i,r))}}else if(e instanceof T||e instanceof B||e instanceof I||e instanceof tt||e instanceof z)u=e.copy(),l(e,u);else{if(e instanceof ve||e instanceof rt)return e;if(e instanceof M)u=new M().addAll(this.hg(e.toArray(),!1,n,i,r)),l(e,u);else if(e instanceof L)u=new L().addAll(this.hg(e.toArray(),!1,n,i,r)),l(e,u);else if(e instanceof W)u=new W().addAll(this.hg(e.toArray(),!1,n,i,r)),l(e,u);else if(e instanceof Date)u=new Date(e.getTime()),l(e,u);else if(e instanceof RegExp)u=new RegExp(e),l(e,u),u.lastIndex=e.lastIndex;else if(typeof e.copy=="function")u=e.copy(),l(e,u);else{u={},l(e,u);for(const c in e){if(c==="__gohashid")continue;const f=e[c];u[c]=this.hg(f,!1,n,i,r)}}}return t&&r.forEach(c=>{delete c.__gohashid}),u}Fe(e){return JSON.stringify(e).replace(/[\u007F-\uFFFF]/g,t=>{const n="0000"+t.charCodeAt(0).toString(16);return"\\u"+n.substring(n.length-4)})}ag(){let e="";return this.name!==""&&(e+=`,
  "name": `+this.Fe(this.name)),this.dataFormat!==""&&(e+=`,
  "dataFormat": `+this.Fe(this.dataFormat)),this.isReadOnly&&(e+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(e+=`,
  "nodeKeyProperty": `+this.Fe(this.nodeKeyProperty)),this.copiesArrays&&(e+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(e+=`,
  "copiesArrayObjects": true`),this.copiesKey&&(e+=`,
  "copiesKey": true`),this.pointsDigits!==100&&(e+=`,
  "pointsDigits": `+this.pointsDigits.toString()),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(e+=`,
  "nodeCategoryProperty": `+this.Fe(this.nodeCategoryProperty)),e}Ty(e){e.name&&(this.name=e.name),e.dataFormat&&(this.dataFormat=e.dataFormat),e.isReadOnly&&(this.isReadOnly=!0),e.nodeKeyProperty&&(this.nodeKeyProperty=e.nodeKeyProperty),e.copiesArrays&&(this.copiesArrays=!0),e.copiesArrayObjects&&(this.copiesArrayObjects=!0),e.copiesKey!==void 0&&(this.copiesKey=e.copiesKey),e.pointsDigits!==void 0&&(this.pointsDigits=parseInt(e.pointsDigits)),e.nodeCategoryProperty&&(this.nodeCategoryProperty=e.nodeCategoryProperty)}DT(){const e=this.modelData;return`,
  "modelData": `+this.FT(e)}RT(e){const t=e.modelData;o.wt(t)&&(this.replaceJsonObjects(t),this.modelData=t)}bN(){const e=this.modelData;let t=!1;for(const i in e)if(!this.v1(e,i,e[i])){t=!0;break}let n="";return t&&(n=this.DT()),n+`,
  "nodeDataArray": `+this.Ch(this.nodeDataArray,!0)}kN(e){this.RT(e);const t=e.nodeDataArray;Array.isArray(t)&&(this.replaceJsonObjects(t),this.nodeDataArray=t)}PN(e,t,n){if(e===t)return!0;if(typeof e!=typeof t||typeof e=="function"||typeof t=="function")return!1;if(Array.isArray(e)&&Array.isArray(t)){if(n.get(e)===t)return!0;if(n.set(e,t),e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!this.PN(e[i],t[i],n))return!1;return!0}else if(o.wt(e)&&o.wt(t)){if(n.get(e)===t)return!0;n.set(e,t);for(const i in e){const r=e[i];if(this.v1(e,i,r))continue;const a=t[i];if(a===void 0||!this.PN(r,a,n))return!1}for(const i in t){const r=t[i];if(this.v1(t,i,r))continue;const a=e[i];if(a===void 0||!this.PN(a,r,n))return!1}return!0}return!1}AT(e){let t=this.Ka;const n=(i,r)=>{const a=r.part;if(!a)return;const l=a.data;if(i===l)return;let u=t.get(i);u===null?(u=new L,u.add(l),t.set(i,u)):u.add(l)};t===null&&(t=new W,e.changes.each(i=>{if(i.diagram!==null){const r=i.change;if(r===2){const a=i.object.panel;if(a){const l=a.data;l&&n(l,a)}}else if(r===3||r===4){const a=i.object,l=a.itemArray;l&&n(l,a)}}}),this.Ka=t)}TT(e){const t=new L;for(let n=0;n<this.nodeDataArray.length;n++){const i=this.nodeDataArray[n];this.O1(e,i,i,t)}return t}O1(e,t,n,i){if(Array.isArray(t))for(let r=0;r<t.length;r++){const a=t[r];if(a===e)return i.add(n),!0;if(this.O1(e,a,n,i))return!0}else if(o.wt(t)&&Object.getPrototypeOf(t)===Object.prototype)for(const r in t){const a=t[r];if(a===e)return i.add(n),!0;if(this.O1(e,a,n,i))return!0}return!1}SN(e,t){const n=this;let i=!1;const r=new L,a=new L,l=new L,u=this.Ka;e.changes.each(p=>{if(p.model===n){if(p.modelChange==="nodeDataArray")p.change===3?r.add(p.newValue):p.change===4&&l.add(p.oldValue);else if(n.containsNodeData(p.object))a.add(p.object);else if(p.change===2&&(n.modelData===p.object||p.propertyName==="modelData"))i=!0;else if(p.object!==null)if(u&&u.has(p.object))u.get(p.object).each(y=>{n.containsNodeData(y)&&a.add(y)});else{if(p.object instanceof _t||n.Ta()&&n.containsLinkData(p.object))return;n.TT(p.object).each(y=>{a.add(y)})}}});const c=this.lg;c.clear(),r.each(p=>{c.add(n.getKeyForNodeData(p)),t||a.add(p)});const f=this.rg;f.clear(),l.each(p=>{f.add(n.getKeyForNodeData(p)),t&&a.add(p)});let m="";return i&&(m+=this.DT()),c.count>0&&(m+=(t?this.OT:this.vT)+this.Ch(c.toArray(),!0)),a.count>0&&(m+=this.CO+this.Ch(a.toArray(),!0)),f.count>0&&(m+=(t?this.vT:this.OT)+this.Ch(f.toArray(),!0)),f.clear(),c.clear(),m}Dy(e){(e.name!==void 0&&e.name!==this.name||e.dataFormat!==void 0&&e.dataFormat!==this.dataFormat||e.isReadOnly!==void 0&&e.isReadOnly!==this.isReadOnly||e.nodeKeyProperty!==void 0&&e.nodeKeyProperty!==this.nodeKeyProperty||e.copiesArrays!==void 0&&e.copiesArrays!==this.copiesArrays||e.copiesArrayObjects!==void 0&&e.copiesArrayObjects!==this.copiesArrayObjects||e.copiesKey!==void 0&&e.copiesKey!==this.copiesKey||e.nodeCategoryProperty!==void 0&&e.nodeCategoryProperty!==this.nodeCategoryProperty)&&o.o("applyIncrementalJson cannot change Model properties"),this.RT(e);const t=e.insertedNodeKeys,n=e.modifiedNodeData,i=new W;if(Array.isArray(n))for(let a=0;a<n.length;a++){const l=n[a],u=this.getKeyForNodeData(l);u!=null&&i.set(u,l)}if(Array.isArray(t)){const a=t.length;for(let l=0;l<a;l++){const u=t[l];let c=this.findNodeDataForKey(u);c===null&&(c=i.get(u)||this.copyNodeData({}),this.setKeyForNodeData(c,u),this.addNodeData(c))}}if(Array.isArray(n)){const a=n.length;for(let l=0;l<a;l++){const u=n[l],c=this.getKeyForNodeData(u),f=this.findNodeDataForKey(c);if(f!==null){for(const m in u)m==="__gohashid"||m===this.nodeKeyProperty||(this.gc()||this.qu())&&m===this.nodeIsGroupProperty||this.setDataProperty(f,m,u[m]);this.cg(u,f)}}}const r=e.removedNodeKeys;if(Array.isArray(r)){const a=r.length;for(let l=0;l<a;l++){const u=r[l],c=this.findNodeDataForKey(u);c!==null&&this.removeNodeData(c)}}}toIncrementalJson(e,t){e.change!==1&&o.o("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+e.toString());const n=e.object;if(!e.isTransactionFinished||!(n instanceof ht))return'{ "incremental": 0 }';t===void 0&&(t=o.sn(this)),this.AT(n);const i=this.SN(n,e.propertyName==="FinishedUndo");return this.Ka=null,t==="2"?'{ "incremental": 2'+i+"}":'{ "class": '+this.Fe(t)+', "incremental": 1'+this.ag()+i+"}"}toIncrementalJSON(e,t){return this.toIncrementalJson(e,t)}toJson(e){return e===void 0&&(e=o.sn(this)),'{ "class": '+this.Fe(e)+this.ag()+this.bN()+"}"}toJSON(e){return this.toJson(e)}applyIncrementalJson(e){let t=null;if(typeof e=="string")try{t=s.JSON.parse(e)}catch{}else typeof e=="object"?t=e:o.o("Unable to modify a Model from: "+e);const n=t.incremental;typeof n!="number"&&o.o("Unable to apply non-incremental changes to Model: "+e),n!==0&&(this.startTransaction("applyIncrementalJson"),this.Dy(t),this.commitTransaction("applyIncrementalJson"))}applyIncrementalJSON(e){return this.applyIncrementalJson(e)}static fromJson(e,t){t===void 0&&(t=null);let n=null;if(typeof e=="string")try{n=s.JSON.parse(e)}catch{}else typeof e=="object"?n=e:o.o("Unable to construct a Model from: "+e);if(t===null){const i=_t.LO(n);i===null||i instanceof _t?t=i:o.o("Unable to construct a Model of declared class: "+n.class)}return t===null&&(t=_t.constructGraphLinksModel()),t.Ty(n),t.kN(n),t}static fromJSON(e,t){return this.fromJson(e,t)}static constructGraphLinksModel(){return new _t}static LO(e){let t=null,n=e.class;if(typeof n=="string")try{let i=null;n.indexOf("go.")===0?(n=n.substring(3),i=_t.I1(n)):(i=_t.I1(n),i===null&&(i=s[n])),typeof i=="function"&&(t=new i)}catch{}return t}replaceJsonObjects(e){if(Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++){const i=e[n];o.wt(i)&&(e[n]=this.replaceJsonObjects(i))}}else if(o.wt(e)){for(const t in e){const n=e[t];if(o.wt(n)){const i=this.replaceJsonObjects(n);if(e[t]=i,t==="points"&&Array.isArray(i)){let r=i.length%2===0;for(let a=0;a<i.length;a++)if(typeof i[a]!="number"){r=!1;break}if(r){const a=new M;for(let l=0;l<i.length/2;l++)a.add(new T(i[l*2],i[l*2+1]));a.g(),e[t]=a}}}}return this.AO(e)}return e}writeJsonValue(e){return e===void 0?"undefined":e===null?"null":e===!0?"true":e===!1?"false":typeof e=="string"?this.Fe(e):typeof e=="number"?e===1/0?"9e9999":e===-1/0?"-9e9999":isNaN(e)?'{"class":"NaN"}':e.toString():e instanceof Date?'{"class":"Date", "value":"'+e.toJSON()+'"}':e instanceof Number?this.writeJsonValue(e.valueOf()):Array.isArray(e)?this.Ch(e):o.wt(e)?this.FT(e):typeof e=="function"?"null":e.toString()}Ch(e,t){t===void 0&&(t=!1);const n=e.length;if(n<=0)return"[]";const i=new h;i.add("["),t&&n>1&&i.add(`
`);for(let r=0;r<n;r++){const a=e[r];a!==void 0&&(r>0&&(i.add(","),t&&i.add(`
`)),i.add(this.writeJsonValue(a)))}return t&&n>1&&i.add(`
`),i.add("]"),i.toString()}v1(e,t,n){return n===void 0||t==="__gohashid"||t[0]==="_"||typeof n=="function"}Ki(e){return isNaN(e)?"NaN":e===1/0?"9e9999":e===-1/0?"-9e9999":e}FT(e){const t=e;if(t instanceof T)e={class:"go.Point",x:this.Ki(t.x),y:this.Ki(t.y)};else if(t instanceof B)e={class:"go.Size",width:this.Ki(t.width),height:this.Ki(t.height)};else if(t instanceof I)e={class:"go.Rect",x:this.Ki(t.x),y:this.Ki(t.y),width:this.Ki(t.width),height:this.Ki(t.height)};else if(t instanceof tt)e={class:"go.Margin",top:this.Ki(t.top),right:this.Ki(t.right),bottom:this.Ki(t.bottom),left:this.Ki(t.left)};else if(t instanceof z)t.isSpot()?e={class:"go.Spot",x:this.Ki(t.x),y:this.Ki(t.y),offsetX:this.Ki(t.offsetX),offsetY:this.Ki(t.offsetY)}:e={class:"go.Spot",enum:t.toString()};else if(t instanceof ve){if(e={class:"go.Brush",type:Xn[t.type]},t.type===1?e.color=t.color:(t.type===2||t.type===3)&&(e.start=t.start,e.end=t.end,t.type===3&&(t.startRadius!==0&&(e.startRadius=this.Ki(t.startRadius)),isNaN(t.endRadius)||(e.endRadius=this.Ki(t.endRadius)))),t.colorStops!==null){const r={},a=t.colorStops.iterator;for(;a.next();){const l=a.key,u=a.value;r[l]=u}e.colorStops=r}}else if(t instanceof rt)e={class:"go.Geometry",type:ot[t.type]},t.startX!==0&&(e.startX=this.Ki(t.startX)),t.startY!==0&&(e.startY=this.Ki(t.startY)),t.endX!==0&&(e.endX=this.Ki(t.endX)),t.endY!==0&&(e.endY=this.Ki(t.endY)),t.spot1.equals(z.TopLeft)||(e.spot1=t.spot1),t.spot2.equals(z.BottomRight)||(e.spot2=t.spot2),t.type===4&&(e.path=rt.stringify(t));else if(_t.I1(o.sn(t))!==null)return o.ii("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager or other unknown data type into JSON text: "+t.toString()),"{}";let n="{",i=!0;for(const r in e){const a=_t.vt(e,r);if(!this.v1(e,r,a))if(i?i=!1:n+=",",n+=this.Fe(r)+":",r==="points"&&a instanceof M){const l=a;let u="[";const c=l.iterator;for(;c.next();){const f=c.value;u.length>1&&(u+=","),u+=this.IT(f.x),u+=",",u+=this.IT(f.y)}u+="]",n+=u}else n+=this.writeJsonValue(a)}return n+="}",n}IT(e){if(e===1/0)return"9e9999";if(e===-1/0)return"-9e9999";if(isNaN(e))return"0";const t=this.pointsDigits;return t>16?e.toString():e.toFixed(t)}get pointsDigits(){return this.Ay}set pointsDigits(e){e<0?e=0:e>100&&(e=100),this.Ay=e}Yi(e){return typeof e=="number"?e:e==="NaN"?NaN:e==="9e9999"?1/0:e==="-9e9999"?-1/0:parseFloat(e)}AO(e){if(typeof e!="object")return e;let t=e.class||"";if(typeof t!="string"||t==="")return e;if(t==="NaN")return NaN;if(t==="Date")return new Date(e.value);if(t.indexOf("go.")!==0)return e;t=t.substring(3);let n=e;if(t==="Point")n=new T(this.Yi(e.x),this.Yi(e.y));else if(t==="Size")n=new B(this.Yi(e.width),this.Yi(e.height));else if(t==="Rect")n=new I(this.Yi(e.x),this.Yi(e.y),this.Yi(e.width),this.Yi(e.height));else if(t==="Margin")n=new tt(this.Yi(e.top),this.Yi(e.right),this.Yi(e.bottom),this.Yi(e.left));else if(t==="Spot")typeof e.enum=="string"?n=z.parse(e.enum):n=new z(this.Yi(e.x),this.Yi(e.y),this.Yi(e.offsetX),this.Yi(e.offsetY));else if(t==="Brush"){const i=new ve;i.type=o.Ih(Xn,e.type)??1,typeof e.color=="string"&&(i.color=e.color),e.start instanceof z&&(i.start=e.start),e.end instanceof z&&(i.end=e.end),typeof e.startRadius=="number"&&(i.startRadius=this.Yi(e.startRadius)),typeof e.endRadius=="number"&&(i.endRadius=this.Yi(e.endRadius));const r=e.colorStops;if(o.wt(r))for(const a in r){const l=parseFloat(a);i.addColorStop(l,r[a])}n=i}else if(t==="Geometry"){let i=null;typeof e.path=="string"?i=rt.parse(e.path):i=new rt,i.type=o.Ih(ot,e.type)??1,typeof e.startX=="number"&&(i.startX=this.Yi(e.startX)),typeof e.startY=="number"&&(i.startY=this.Yi(e.startY)),typeof e.endX=="number"&&(i.endX=this.Yi(e.endX)),typeof e.endY=="number"&&(i.endY=this.Yi(e.endY)),e.spot1 instanceof z&&(i.spot1=e.spot1),e.spot2 instanceof z&&(i.spot2=e.spot2),n=i}else if(t==="EnumValue"){let i=e.classType;i.indexOf("go.")===0&&(i=i.substring(3));const r=_t.I1(i);typeof r=="function"&&(n=o.Ih(r,e.name))}return n}get name(){return this.Mt}set name(e){const t=this.Mt;t!==e&&(o.i(e,"string",_t,"name"),this.Mt=e,this.t("name",t,e))}get dataFormat(){return this.ig}set dataFormat(e){const t=this.ig;t!==e&&(o.i(e,"string",_t,"dataFormat"),this.ig=e,this.t("dataFormat",t,e))}get isReadOnly(){return this.vo}set isReadOnly(e){const t=this.vo;t!==e&&(o.i(e,"boolean",_t,"isReadOnly"),this.vo=e,this.t("isReadOnly",t,e))}get modelData(){return this.D1}set modelData(e){const t=this.D1;t!==e&&(o.i(e,"object",_t,"modelData"),this.D1=e,this.t("modelData",t,e),this.updateTargetBindings(e))}addChangedListener(e){return o.i(e,"function",_t,"addChangedListener:listener"),this.F1.add(e),this}removeChangedListener(e){o.i(e,"function",_t,"removeChangedListener:listener"),this.F1.delete(e)}Ew(e){this.skipsUndoManager||this.undoManager.handleChanged(e);const t=this.F1,n=t.length;for(let i=0;i<n;i++)t.elt(i)(e)}raiseChangedEvent(e,t,n,i,r,a,l){this.Et("",e,t,n,i,r,a,l)}raiseChanged(e,t,n,i,r){this.Et("",2,e,this,t,n,i,r)}t(e,t,n,i,r){this.Et("",2,e,this,t,n,i,r)}raiseDataChanged(e,t,n,i,r,a){this.Et("",2,t,e,n,i,r,a)}Et(e,t,n,i,r,a,l,u){l===void 0&&(l=null),u===void 0&&(u=null);const c=new ft;c.model=this,c.change=t,c.modelChange=e,c.propertyName=n,c.object=i,c.oldValue=r,c.oldParam=l,c.newValue=a,c.newParam=u,this.Ew(c)}get undoManager(){return this.R1}set undoManager(e){const t=this.R1;t!==e&&(t!==null&&t.removeModel(this),this.R1=e,e!==null&&e.addModel(this))}get skipsUndoManager(){return this.Ro}set skipsUndoManager(e){o.i(e,"boolean",_t,"skipsUndoManager"),this.Ro=e}changeState(e,t){if(e!==null&&e.model===this)if(e.change===2){const n=e.object,i=e.propertyName,r=e.getValue(t);if(i===this.nodeKeyProperty&&this.containsNodeData(n)){const a=e.getValue(!t);a!==void 0&&this.ti.delete(a),r!==void 0&&this.ti.set(r,n)}_t.rt(n,i,r)}else if(e.change===3){const n=e.newParam;if(e.modelChange==="nodeDataArray"){const i=e.newValue;if(o.wt(i)&&typeof n=="number"){const r=this.getKeyForNodeData(i);t?(this.De[n]===i&&o.tc(this.De,n),r!==void 0&&this.ti.delete(r)):(this.De[n]!==i&&o.su(this.De,n,i),r!==void 0&&this.ti.set(r,i))}}else if(e.modelChange===""){let i=e.object;if(i&&!Array.isArray(i)&&e.propertyName&&(i=_t.vt(e.object,e.propertyName)),Array.isArray(i)&&typeof n=="number"){const r=e.newValue;t?o.tc(i,n):o.su(i,n,r)}}else o.o("unknown ChangeType.Insert modelChange: "+e.toString())}else if(e.change===4){const n=e.oldParam;if(e.modelChange==="nodeDataArray"){const i=e.oldValue;if(o.wt(i)&&typeof n=="number"){const r=this.getKeyForNodeData(i);t?(this.De[n]!==i&&o.su(this.De,n,i),r!==void 0&&this.ti.set(r,i)):(this.De[n]===i&&o.tc(this.De,n),r!==void 0&&this.ti.delete(r))}}else if(e.modelChange===""){let i=e.object;if(i&&!Array.isArray(i)&&e.propertyName&&(i=_t.vt(e.object,e.propertyName)),Array.isArray(i)&&typeof n=="number"){const r=e.oldValue;t?o.su(i,n,r):o.tc(i,n)}}else o.o("unknown ChangeType.Remove modelChange: "+e.toString())}else e.change===1||o.o("unknown ChangedEvent: "+e.toString())}startTransaction(e){return this.undoManager.startTransaction(e)}commitTransaction(e){return this.undoManager.commitTransaction(e)}rollbackTransaction(){return this.undoManager.rollbackTransaction()}commit(e,t){let n=t;n===void 0&&(n="");const i=this.skipsUndoManager;n===null&&(this.skipsUndoManager=!0,n=""),this.undoManager.startTransaction(n);let r=!1;try{e(this),r=!0}finally{r?this.undoManager.commitTransaction(n):this.undoManager.rollbackTransaction(),this.skipsUndoManager=i}}updateTargetBindings(e,t){t===void 0&&(t=""),this.Et("SourceChanged",1,t,e,null,null)}get nodeKeyProperty(){return this.Nh}set nodeKeyProperty(e){const t=this.Nh;t!==e&&(this.An(e,_t,"nodeKeyProperty"),e===""&&o.o("Model.nodeKeyProperty may not be the empty string"),this.ti.count>0&&o.o("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Nh=e,this.t("nodeKeyProperty",t,e))}An(e,t,n){}getKeyForNodeData(e){if(e===null)return;const t=this.Nh;if(t==="")return;const n=_t.vt(e,t);if(n!==void 0){if(this.isKeyType(n))return n;o.o("Key value for node data "+e+" is not a number or a string: "+n)}}setKeyForNodeData(e,t){if((t==null||!this.isKeyType(t))&&o.we(t,"number or string",_t,"setKeyForNodeData:key"),e===null)return;const n=this.Nh;if(n==="")return;if(!this.containsNodeData(e)){_t.rt(e,n,t);return}const i=_t.vt(e,n);if(i!==t){if(this.findNodeDataForKey(t)!==null)return;_t.rt(e,n,t),i!==void 0&&this.ti.delete(i),this.ti.set(t,e),this.Et("nodeKey",2,n,e,i,t),typeof n=="string"&&this.updateTargetBindings(e,n),this.Fy(i,t)}}get makeUniqueKeyFunction(){return this.Ff}set makeUniqueKeyFunction(e){const t=this.Ff;t!==e&&(e!==null&&o.i(e,"function",_t,"makeUniqueKeyFunction"),this.Ff=e,this.t("makeUniqueKeyFunction",t,e))}isKeyType(e){return typeof e=="number"||typeof e=="string"}containsNodeData(e){if(e===null)return!1;const t=this.getKeyForNodeData(e);return t===void 0?!1:this.ti.get(t)===e}findNodeDataForKey(e){return e===null&&o.o("Model.findNodeDataForKey:key must not be null"),e===void 0||!this.isKeyType(e)?null:this.ti.get(e)}get nodeDataArray(){return this.De}set nodeDataArray(e){const t=this.De;if(t!==e){this.ti.clear(),this.MN();const n=e.length;for(let a=0;a<n;a++){const l=e[a];o.wt(l)||o.o("Model.nodeDataArray must only contain Objects, not: "+l)}this.De=e;const i=new M;for(let a=0;a<n;a++){const l=e[a],u=this.getKeyForNodeData(l);u===void 0||this.ti.get(u)!==null?i.add(l):this.ti.set(u,l)}const r=i.iterator;for(;r.next();){const a=r.value;this.makeNodeDataKeyUnique(a);const l=this.getKeyForNodeData(a);l!==void 0&&this.ti.set(l,a)}this.Et("nodeDataArray",2,"nodeDataArray",this,t,e);for(let a=0;a<n;a++){const l=e[a];this.fg(l),this.ug(l)}}}makeNodeDataKeyUnique(e){if(e===null)return;const t=this.Nh;if(t==="")return;let n=this.getKeyForNodeData(e);if(n!==void 0&&!this.ti.has(n))return;const i=this.Ff;if(i!==null&&(n=i(this,e),n!=null&&!this.ti.has(n))){_t.rt(e,t,n);return}if(typeof n=="string"){let r=2;for(;this.ti.has(n+r);)r++;_t.rt(e,t,n+r)}else if(n===void 0||typeof n=="number"){let r=-this.ti.count-1;for(;this.ti.has(r);)r--;_t.rt(e,t,r)}}addNodeData(e){e!==null&&(this.containsNodeData(e)||this.bT(e,!0))}bT(e,t){let n=this.getKeyForNodeData(e);if(n===void 0)this.makeNodeDataKeyUnique(e),n=this.getKeyForNodeData(e);else{if(this.ti.get(n)===e)return;this.makeNodeDataKeyUnique(e),n=this.getKeyForNodeData(e)}n===void 0&&o.o("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),this.ti.set(n,e);let i=null;t&&(i=this.De.length,o.su(this.De,i,e)),this.Et("nodeDataArray",3,"nodeDataArray",this,null,e,null,i),this.fg(e),this.ug(e)}addNodeDataCollection(e){if(Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++)this.addNodeData(e[n])}else{const t=e.iterator;for(;t.next();){const n=t.value;this.addNodeData(n)}}}removeNodeData(e){e!==null&&this.xT(e,!0)}xT(e,t){const n=this.getKeyForNodeData(e);n!==void 0&&this.ti.delete(n);let i=null;if(t){if(i=this.De.indexOf(e),i<0)return;o.tc(this.De,i)}this.Et("nodeDataArray",4,"nodeDataArray",this,e,null,i,null),this.Ry(e)}removeNodeDataCollection(e){if(Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++)this.removeNodeData(e[n])}else{const t=e.iterator;for(;t.next();){const n=t.value;this.removeNodeData(n)}}}mergeNodeDataArray(e){if(e!==this.nodeDataArray&&Array.isArray(e)){const t=this.rg;t.clear(),t.addAll(this.ti.iteratorKeys);const n=this.lg;n.clear();const i=e.length;for(let a=0;a<i;a++){const l=e[a],u=this.getKeyForNodeData(l);if(u!==void 0){n.add(u);const c=this.findNodeDataForKey(u);if(c===l)continue;if(c!==null)this.assignAllDataProperties(c,l),this.cg(l,c);else{const f=this.cloneDeep(l);this.setKeyForNodeData(f,u),this.addNodeData(f)}}else{const c=this.cloneDeep(l);this.addNodeData(c),n.add(this.getKeyForNodeData(c))}}const r=t.iterator;for(;r.next();){const a=r.value;if(!n.has(a)){const l=this.findNodeDataForKey(a);l&&this.removeNodeData(l)}}t.clear(),n.clear()}}Fy(e,t){if(t===void 0)return;const n=this.Cy(e);n instanceof L&&this.er.set(t,n)}MN(){}fg(e){}ug(e){}Ry(e){}$s(e,t){if(e===void 0)return;let n=this.er.get(e);n===null&&(n=new L,this.er.set(e,n)),n.add(t)}Js(e,t){if(e===void 0)return;const n=this.er.get(e);n instanceof L&&(t==null?this.er.delete(e):(n.delete(t),n.count===0&&this.er.delete(e)))}Cy(e){if(e===void 0)return null;const t=this.er.get(e);return t instanceof L?t:null}pE(e){e===void 0?this.er.clear():this.er.delete(e)}get copyNodeDataFunction(){return this.Rf}set copyNodeDataFunction(e){const t=this.Rf;t!==e&&(e!==null&&o.i(e,"function",_t,"copyNodeDataFunction"),this.Rf=e,this.t("copyNodeDataFunction",t,e))}get copiesArrays(){return this.eg}set copiesArrays(e){const t=this.eg;t!==e&&(e!==null&&o.i(e,"boolean",_t,"copiesArrays"),this.eg=e,this.t("copiesArrays",t,e))}get copiesArrayObjects(){return this.sg}set copiesArrayObjects(e){const t=this.sg;t!==e&&(e!==null&&o.i(e,"boolean",_t,"copiesArrayObjects"),this.sg=e,this.t("copiesArrayObjects",t,e))}get copiesKey(){return this.ng}set copiesKey(e){const t=this.ng;t!==e&&(e!==null&&o.i(e,"boolean",_t,"copiesKey"),this.ng=e,this.t("copiesKey",t,e))}copyNodeData(e){if(e===null)return null;let t=null;const n=this.Rf;return n!==null?t=n(e,this):t=this.E1(e,!0),t}E1(e,t){if(this.copiesArrays&&Array.isArray(e)){const n=e,i=[];for(let r=0;r<n.length;r++){const a=n[r],l=this.E1(a,this.copiesArrayObjects);i.push(l)}return i}else if(t&&o.wt(e)){const n=e,i=n.constructor,r=i?new i:{},a=!this.copiesKey&&typeof this.nodeKeyProperty=="string"?this.nodeKeyProperty:null;for(const l in n){if(l==="__gohashid"){r.__gohashid=void 0;continue}if(l===a){r[a]=void 0;continue}const u=_t.vt(n,l);if(this.TO(n,l,u))_t.rt(r,l,u);else{const c=this.E1(u,!1);_t.rt(r,l,c)}}return r}else return e instanceof T||e instanceof B||e instanceof I||e instanceof z||e instanceof tt?e.copy():e}get afterCopyFunction(){return this.og}set afterCopyFunction(e){const t=this.og;t!==e&&(e!==null&&o.i(e,"function",_t,"afterCopyFunction"),this.og=e,this.t("afterCopyFunction",t,e))}TO(e,t,n){const i=o.sn(n);return i==="GraphObject"||i==="Diagram"||i==="Layer"||i==="RowColumnDefinition"||i==="AnimationManager"||i==="Tool"||i==="CommandHandler"||i==="Layout"||i==="InputEvent"||i==="DiagramEvent"?!0:n instanceof _t||n instanceof gt||n instanceof ht||n instanceof ft}setDataProperty(e,t,n){if(this.containsNodeData(e)){if(t===this.nodeKeyProperty){this.setKeyForNodeData(e,n);return}else if(t===this.nodeCategoryProperty){this.setCategoryForNodeData(e,n);return}}else!_t.ET&&e instanceof Re&&(_t.ET=!0,o.ii('Model.setDataProperty is modifying a GraphObject, "'+e.toString()+'"'),o.ii("  Is that really your intent?"));const i=_t.vt(e,t);i!==n&&(_t.rt(e,t,n),this.raiseDataChanged(e,t,i,n))}set(e,t,n){this.setDataProperty(e,t,n)}assignAllDataProperties(e,t){if(!t)return;const n=this.containsNodeData(e);for(const i in t)i!=="__gohashid"&&(n&&i===this.nodeKeyProperty||this.setDataProperty(e,i,t[i]))}addArrayItem(e,t){this.insertArrayItem(e,-1,t)}insertArrayItem(e,t,n){t<0&&(t=e.length),o.su(e,t,n),this.Et("",3,"",e,null,n,null,t)}removeArrayItem(e,t){t===void 0&&(t=-1),e===this.De&&o.o("Model.removeArrayItem should not be called on the Model.nodeDataArray"),t===-1&&(t=e.length-1);const n=e[t];o.tc(e,t),this.Et("",4,"",e,n,null,t,null)}get nodeCategoryProperty(){return this.Xa}set nodeCategoryProperty(e){const t=this.Xa;t!==e&&(this.An(e,_t,"nodeCategoryProperty"),this.Xa=e,this.t("nodeCategoryProperty",t,e))}getCategoryForNodeData(e){if(e===null)return"";const t=this.Xa;if(t==="")return"";const n=_t.vt(e,t);if(n===void 0)return"";if(typeof n=="string")return n;o.o("getCategoryForNodeData found a non-string category for "+e+": "+n)}setCategoryForNodeData(e,t){if(o.i(t,"string",_t,"setCategoryForNodeData:cat"),e===null)return;const n=this.Xa;if(n==="")return;if(!this.containsNodeData(e)){_t.rt(e,n,t);return}let i=_t.vt(e,n);i===void 0&&(i=""),i!==t&&(_t.rt(e,n,t),this.Et("nodeCategory",2,n,e,i,t))}cg(e,t){this.setCategoryForNodeData(t,this.getCategoryForNodeData(e))}get type(){return"Model"}pc(){return!1}gc(){return!1}qu(){return!1}Ta(){return!1}Xw(){return!1}qc(){return!1}static initDiagramModel(){return new _t}static I1(e){return _t.classMap[e]?_t.classMap[e]:s.go!==void 0&&s.go[e]?s.go[e]:null}static registerClass(e,t){_t.classMap[t]=e}static vt(e,t){if(!e||!t)return null;let n;try{typeof t=="function"?n=t(e):typeof e.getAttribute=="function"?(n=e.getAttribute(t),n===null&&(n=void 0)):n=e[t]}catch{}return n}static rt(e,t,n){if(!(!e||!t))try{typeof t=="function"?t(e,n):typeof e.setAttribute=="function"?e.setAttribute(t,n):e[t]=n}catch{}}};v(_t,"ET",!1),v(_t,"classMap",{}),_t.registerClass(ve,"Brush"),_t.registerClass(ft,"ChangedEvent"),_t.registerClass(rt,"Geometry"),_t.registerClass(tt,"Margin"),_t.registerClass(Kt,"Panel"),_t.registerClass(T,"Point"),_t.registerClass(I,"Rect"),_t.registerClass(B,"Size"),_t.registerClass(z,"Spot"),_t.registerClass(ht,"Transaction"),_t.registerClass(gt,"UndoManager");let Wt=_t;Wt.fromJSON=Wt.fromJson=Wt.fromJson;const Tn=class Tn extends Wt{constructor(t,n,i){super();v(this,"$e");v(this,"sr");v(this,"fi");v(this,"Lh");v(this,"vf");v(this,"Of");v(this,"Cl");v(this,"wo");v(this,"xo");v(this,"Ya");v(this,"Ga");v(this,"ja");v(this,"Zs");v(this,"If");v(this,"Tn");v(this,"dg");v(this,"UT",`,
  "insertedLinkKeys": `);v(this,"DO",`,
  "modifiedLinkData": `);v(this,"VT",`,
  "removedLinkKeys": `);if(this.$e=[],this.sr=new L,this.fi=new W,this.Lh="",this.vf=null,this.Of=null,this.Cl=null,this.wo="from",this.xo="to",this.Ya="",this.Ga="",this.ja="category",this.Zs="",this.If="isGroup",this.Tn="group",this.dg=!1,n!==void 0&&(this.linkDataArray=n),t!==void 0&&(Array.isArray(t)?this.nodeDataArray=t:i=t),i){Object.assign(this,i);const r=i.Changed;r&&(delete this.Changed,this.addChangedListener(r))}}cloneProtected(t){super.cloneProtected(t),t.Lh=this.Lh,t.vf=this.vf,t.Of=this.Of,t.wo=this.wo,t.xo=this.xo,t.Ya=this.Ya,t.Ga=this.Ga,t.ja=this.ja,t.Zs=this.Zs,t.If=this.If,t.Tn=this.Tn,t.dg=this.dg}clear(){super.clear(),this.$e=[],this.fi.clear(),this.sr.clear()}toString(t){if(t===void 0&&(t=0),t>=2)return this.toJson();{let n=(this.name!==""?this.name:"")+" GraphLinksModel";if(t>0){n+=`
 node data:`;let i=this.nodeDataArray,r=i.length,a=0;for(a=0;a<r;a++){const l=i[a];n+=" "+this.getKeyForNodeData(l)+":"+rr.toString(l)}for(n+=`
 link data:`,i=this.linkDataArray,r=i.length,a=0;a<r;a++){const l=i[a];n+=" "+this.Te(l,!0)+"-->"+this.Te(l,!1)}}return n}}xN(t,n){if(this.linkKeyProperty===""){const y=this.skipsUndoManager;this.skipsUndoManager=!0,this.linkKeyProperty="key",this.skipsUndoManager=y}let i=super.xN(t,n);const r=this,a=new L,l=new L,u=new L,c=this.Ka;t.changes.each(y=>{if(y.model===r){if(y.modelChange==="linkDataArray")y.change===3?a.add(y.newValue):y.change===4&&u.add(y.oldValue);else if(r.containsLinkData(y.object))l.add(y.object);else if(y.object!==null)if(y.object!==null&&c&&c.has(y.object))c.get(y.object).each(w=>{r.containsLinkData(w)&&l.add(w)});else{if(y.object instanceof Wt||r.containsNodeData(y.object))return;r.BT(y.object).each(w=>l.add(w))}}});const f=this.lg;f.clear(),a.each(y=>{f.add(r.getKeyForLinkData(y)),n||l.add(y)});const m=this.rg;m.clear(),u.each(y=>{m.add(r.getKeyForLinkData(y)),n&&l.add(y)});const p=r.cloneDeep(l.toArray());return f.count>0&&(i===null&&(i={}),n?i.removedLinkKeys=f.toArray():i.insertedLinkKeys=f.toArray()),p.length>0&&(i===null&&(i={}),i.modifiedLinkData=p),m.count>0&&(i===null&&(i={}),n?i.insertedLinkKeys=m.toArray():i.removedLinkKeys=m.toArray()),m.clear(),f.clear(),i}ag(){const t=super.ag();let n="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(n+=`,
  "linkCategoryProperty": `+this.Fe(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(n+=`,
  "linkKeyProperty": `+this.Fe(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(n+=`,
  "linkFromKeyProperty": `+this.Fe(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(n+=`,
  "linkToKeyProperty": `+this.Fe(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(n+=`,
  "linkFromPortIdProperty": `+this.Fe(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(n+=`,
  "linkToPortIdProperty": `+this.Fe(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(n+=`,
  "linkLabelKeysProperty": `+this.Fe(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(n+=`,
  "nodeIsGroupProperty": `+this.Fe(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(n+=`,
  "nodeGroupKeyProperty": `+this.Fe(this.nodeGroupKeyProperty)),t+n}Ty(t){super.Ty(t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)}bN(){const t=super.bN(),n=`,
  "linkDataArray": `+this.Ch(this.linkDataArray,!0);return t+n}kN(t){super.kN(t);const n=t.linkDataArray;Array.isArray(n)&&(this.replaceJsonObjects(n),this.linkDataArray=n)}BT(t){const n=new L;for(let i=0;i<this.linkDataArray.length;i++){const r=this.linkDataArray[i];this.O1(t,r,r,n)}return n}SN(t,n){if(this.linkKeyProperty===""){const y=this.skipsUndoManager;this.skipsUndoManager=!0,this.linkKeyProperty="key",this.skipsUndoManager=y}const i=super.SN(t,n),r=this,a=new L,l=new L,u=new L,c=this.Ka;t.changes.each(y=>{if(y.model===r){if(y.modelChange==="linkDataArray")y.change===3?a.add(y.newValue):y.change===4&&u.add(y.oldValue);else if(r.containsLinkData(y.object))l.add(y.object);else if(y.object!==null)if(y.object!==null&&c&&c.has(y.object))c.get(y.object).each(w=>{r.containsLinkData(w)&&l.add(w)});else{if(y.object instanceof Wt||r.containsNodeData(y.object))return;r.BT(y.object).each(w=>l.add(w))}}});const f=this.lg;f.clear(),a.each(y=>{f.add(r.getKeyForLinkData(y)),n||l.add(y)});const m=this.rg;m.clear(),u.each(y=>{m.add(r.getKeyForLinkData(y)),n&&l.add(y)});let p=i;return f.count>0&&(p+=(n?this.VT:this.UT)+this.Ch(f.toArray(),!0)),l.count>0&&(p+=this.DO+this.Ch(l.toArray(),!0)),m.count>0&&(p+=(n?this.UT:this.VT)+this.Ch(m.toArray(),!0)),m.clear(),f.clear(),p}Dy(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&o.o("applyIncrementalJson cannot change Model properties"),super.Dy(t);const n=t.insertedLinkKeys;if(Array.isArray(n)){const a=n.length;for(let l=0;l<a;l++){const u=n[l];let c=this.findLinkDataForKey(u);c===null&&(c=this.copyLinkData({}),this.setKeyForLinkData(c,u),this.addLinkData(c))}}const i=t.modifiedLinkData;if(Array.isArray(i)){const a=i.length;for(let l=0;l<a;l++){const u=i[l],c=this.getKeyForLinkData(u),f=this.findLinkDataForKey(c);if(f!==null){for(const m in u)m==="__gohashid"||m===this.linkKeyProperty||this.setDataProperty(f,m,u[m]);this.zT(u,f)}}}const r=t.removedLinkKeys;if(Array.isArray(r)){const a=r.length;for(let l=0;l<a;l++){const u=r[l],c=this.findLinkDataForKey(u);c!==null&&this.removeLinkData(c)}}}changeState(t,n){if(!(t===null||t.model!==this)){if(t.change===2){const i=t.object,r=t.propertyName;if(r===this.linkKeyProperty&&this.containsLinkData(i)){const a=t.getValue(n),l=t.getValue(!n);l!==void 0&&this.fi.delete(l),a!==void 0&&this.fi.set(a,i),Wt.rt(i,r,a);return}}else if(t.change===3){let i=t.newParam;if(t.modelChange==="linkDataArray"){const r=t.newValue;if(o.wt(r)&&typeof i=="number"){const a=this.getKeyForLinkData(r);n?(this.sr.delete(r),this.$e[i]===r&&this.$e.splice(i,1),a!==void 0&&this.fi.delete(a)):(this.sr.add(r),this.$e[i]!==r&&this.$e.splice(i,0,r),a!==void 0&&this.fi.set(a,r))}return}else if(t.modelChange==="linkLabelKeys"){const r=this.getLabelKeysForLinkData(t.object);Array.isArray(r)&&typeof i=="number"&&(n?(i=r.indexOf(t.newValue),i>=0&&r.splice(i,1)):r.indexOf(t.newValue)<0&&r.splice(i,0,t.newValue));return}}else if(t.change===4){let i=t.oldParam;if(t.modelChange==="linkDataArray"){const r=t.oldValue;if(o.wt(r)&&typeof i=="number"){const a=this.getKeyForLinkData(r);n?(this.sr.add(r),this.$e[i]!==r&&this.$e.splice(i,0,r),a!==void 0&&this.fi.set(a,r)):(this.sr.delete(r),this.$e[i]===r&&this.$e.splice(i,1),a!==void 0&&this.fi.delete(a))}return}else if(t.modelChange==="linkLabelKeys"){const r=this.getLabelKeysForLinkData(t.object);Array.isArray(r)&&typeof i=="number"&&(n?r.indexOf(t.newValue)<0&&r.splice(i,0,t.newValue):(i=r.indexOf(t.newValue),i>=0&&r.splice(i,1)));return}}super.changeState(t,n)}}get archetypeNodeData(){return this.Cl}set archetypeNodeData(t){const n=this.Cl;n!==t&&(this.Cl=t,this.t("archetypeNodeData",n,t))}NN(t){if(t===void 0)return;const n=this.Cl;if(n!==null){let i=this.findNodeDataForKey(t);i===null&&(i=this.copyNodeData(n),Wt.rt(i,this.nodeKeyProperty,t),this.addNodeData(i))}return t}get linkFromKeyProperty(){return this.wo}set linkFromKeyProperty(t){const n=this.wo;n!==t&&(this.An(t,Tn,"linkFromKeyProperty"),this.wo=t,this.t("linkFromKeyProperty",n,t))}getFromKeyForLinkData(t){return this.Te(t,!0)}setFromKeyForLinkData(t,n){this._d(t,n,!0)}get linkToKeyProperty(){return this.xo}set linkToKeyProperty(t){const n=this.xo;n!==t&&(this.An(t,Tn,"linkToKeyProperty"),this.xo=t,this.t("linkToKeyProperty",n,t))}getToKeyForLinkData(t){return this.Te(t,!1)}setToKeyForLinkData(t,n){this._d(t,n,!1)}Te(t,n){if(t===null)return;const i=n?this.wo:this.xo;if(i==="")return;const r=Wt.vt(t,i);if(r!==void 0){if(this.isKeyType(r))return r;o.o((n?"FromKey":"ToKey")+" value for link data "+t+" is not a number or a string: "+r)}}_d(t,n,i){if(n===null&&(n=void 0),n!==void 0&&!this.isKeyType(n)&&o.we(n,"number or string",Tn,i?"setFromKeyForLinkData:key":"setToKeyForLinkData:key"),t===null)return;const r=i?this.wo:this.xo;if(r==="")return;if(n=this.NN(n),!this.containsLinkData(t)){Wt.rt(t,r,n);return}const a=Wt.vt(t,r);a!==n&&(this.Js(a,t),Wt.rt(t,r,n),this.findNodeDataForKey(n)===null&&this.$s(n,t),this.Et(i?"linkFromKey":"linkToKey",2,r,t,a,n),typeof r=="string"&&this.updateTargetBindings(t,r))}get linkFromPortIdProperty(){return this.Ya}set linkFromPortIdProperty(t){const n=this.Ya;n!==t&&(this.An(t,Tn,"linkFromPortIdProperty"),this.Ya=t,this.t("linkFromPortIdProperty",n,t))}getFromPortIdForLinkData(t){return this.L1(t,!0)}setFromPortIdForLinkData(t,n){this.tg(t,n,!0)}get linkToPortIdProperty(){return this.Ga}set linkToPortIdProperty(t){const n=this.Ga;n!==t&&(this.An(t,Tn,"linkToPortIdProperty"),this.Ga=t,this.t("linkToPortIdProperty",n,t))}getToPortIdForLinkData(t){return this.L1(t,!1)}setToPortIdForLinkData(t,n){this.tg(t,n,!1)}L1(t,n){if(t===null)return"";const i=n?this.Ya:this.Ga;if(i==="")return"";const r=Wt.vt(t,i);return r===void 0?"":r}tg(t,n,i){if(t===null)return;const r=i?this.Ya:this.Ga;if(r==="")return;if(!this.containsLinkData(t)){Wt.rt(t,r,n);return}let a=Wt.vt(t,r);a===void 0&&(a=""),a!==n&&(Wt.rt(t,r,n),this.Et(i?"linkFromPortId":"linkToPortId",2,r,t,a,n),typeof r=="string"&&this.updateTargetBindings(t,r))}get linkLabelKeysProperty(){return this.Zs}set linkLabelKeysProperty(t){const n=this.Zs;n!==t&&(this.An(t,Tn,"linkLabelKeysProperty"),this.Zs=t,this.t("linkLabelKeysProperty",n,t))}getLabelKeysForLinkData(t){if(t===null)return Tn.EmptyArray;const n=this.Zs;if(n==="")return Tn.EmptyArray;const i=Wt.vt(t,n);return i===void 0?Tn.EmptyArray:i}setLabelKeysForLinkData(t,n){if(t===null)return;const i=this.Zs;if(i==="")return;if(!this.containsLinkData(t)){Wt.rt(t,i,n);return}let r=Wt.vt(t,i);if(r===void 0&&(r=Tn.EmptyArray),r!==n){if(Array.isArray(r)){const l=r.length;for(let u=0;u<l;u++){const c=r[u];this.Js(c,t)}}Wt.rt(t,i,n);const a=n.length;for(let l=0;l<a;l++){const u=n[l];this.findNodeDataForKey(u)===null&&this.$s(u,t)}this.Et("linkLabelKeys",2,i,t,r,n),typeof i=="string"&&this.updateTargetBindings(t,i)}}addLabelKeyForLinkData(t,n){if(n==null||(this.isKeyType(n)||o.we(n,"number or string",Tn,"addLabelKeyForLinkData:key"),t===null))return;const i=this.Zs;if(i==="")return;const r=Wt.vt(t,i);if(r===void 0){const a=[];a.push(n),this.setLabelKeysForLinkData(t,a)}else if(Array.isArray(r)){let a=r.indexOf(n);if(a>=0)return;a=r.length,r.push(n),this.containsLinkData(t)&&(this.findNodeDataForKey(n)===null&&this.$s(n,t),this.Et("linkLabelKeys",3,i,t,null,n,null,a))}else o.o(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}removeLabelKeyForLinkData(t,n){if(n==null||(this.isKeyType(n)||o.we(n,"number or string",Tn,"removeLabelKeyForLinkData:key"),t===null))return;const i=this.Zs;if(i==="")return;const r=Wt.vt(t,i);if(Array.isArray(r)){const a=r.indexOf(n);if(a<0)return;r.splice(a,1),this.containsLinkData(t)&&(this.Js(n,t),this.Et("linkLabelKeys",4,i,t,n,null,a,null))}else r!==void 0&&o.o(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}get linkDataArray(){return this.$e}set linkDataArray(t){const n=this.$e;if(n!==t){this.fi.clear();const i=t.length;for(let a=0;a<i;a++){const l=t[a];o.wt(l)||o.o("GraphLinksModel.linkDataArray must only contain Objects, not: "+l)}if(this.$e=t,this.linkKeyProperty!==""){const a=new M;for(let u=0;u<i;u++){const c=t[u],f=this.getKeyForLinkData(c);f===void 0||this.fi.get(f)!==null?a.add(c):this.fi.set(f,c)}const l=a.iterator;for(;l.next();){const u=l.value;this.makeLinkDataKeyUnique(u);const c=this.getKeyForLinkData(u);c!==void 0&&this.fi.set(c,u)}}const r=new L;for(let a=0;a<i;a++){const l=t[a];r.add(l)}this.sr=r,this.Et("linkDataArray",2,"linkDataArray",this,n,t);for(let a=0;a<i;a++){const l=t[a];this.CN(l)}}}get linkKeyProperty(){return this.Lh}set linkKeyProperty(t){const n=this.Lh;if(n!==t){this.An(t,Tn,"linkKeyProperty"),this.Lh=t,this.fi.clear();const i=this.linkDataArray.length;for(let r=0;r<i;r++){const a=this.linkDataArray[r];let l=this.getKeyForLinkData(a);l===void 0&&(this.makeLinkDataKeyUnique(a),l=this.getKeyForLinkData(a)),l!==void 0&&this.fi.set(l,a)}this.t("linkKeyProperty",n,t)}}getKeyForLinkData(t){if(t===null)return;const n=this.Lh;if(n==="")return;const i=Wt.vt(t,n);if(i!==void 0){if(this.isKeyType(i))return i;o.o("Key value for link data "+t+" is not a number or a string: "+i)}}setKeyForLinkData(t,n){if((n==null||!this.isKeyType(n))&&o.we(n,"number or string",Tn,"setKeyForLinkData:key"),t===null)return;const i=this.Lh;if(i==="")return;if(!this.containsLinkData(t)){Wt.rt(t,i,n);return}const r=Wt.vt(t,i);if(r!==n){if(this.findLinkDataForKey(n)!==null)return;Wt.rt(t,i,n),r!==void 0&&this.fi.delete(r),this.fi.set(n,t),this.Et("linkKey",2,i,t,r,n),typeof i=="string"&&this.updateTargetBindings(t,i)}}get makeUniqueLinkKeyFunction(){return this.vf}set makeUniqueLinkKeyFunction(t){const n=this.vf;n!==t&&(this.vf=t,this.t("makeUniqueLinkKeyFunction",n,t))}findLinkDataForKey(t){return t===null&&o.o("GraphLinksModel.findLinkDataForKey:key must not be null"),t===void 0||!this.isKeyType(t)?null:this.fi.get(t)}makeLinkDataKeyUnique(t){if(t===null)return;const n=this.Lh;if(n==="")return;let i=this.getKeyForLinkData(t);if(i!==void 0&&!this.fi.has(i))return;const r=this.vf;if(r!==null&&(i=r(this,t),i!=null&&!this.fi.has(i))){Wt.rt(t,n,i);return}if(typeof i=="string"){let a=2;for(;this.fi.has(i+a);)a++;Wt.rt(t,n,i+a)}else if(i===void 0||typeof i=="number"){let a=-this.fi.count-1;for(;this.fi.has(a);)a--;Wt.rt(t,n,a)}}containsLinkData(t){return t===null?!1:this.sr.has(t)}addLinkData(t){t!==null&&(this.containsLinkData(t)||this.CT(t,!0))}CT(t,n){if(this.linkKeyProperty!==""){let r=this.getKeyForLinkData(t);if(r===void 0)this.makeLinkDataKeyUnique(t),r=this.getKeyForLinkData(t);else{if(this.fi.get(r)===t)return;this.makeLinkDataKeyUnique(t),r=this.getKeyForLinkData(t)}r===void 0&&o.o("GraphLinksModel.makeLinkDataKeyUnique failed on "+t+". Data not added to model."),this.fi.set(r,t)}this.sr.add(t);let i=null;n&&(i=this.$e.length,this.$e.splice(i,0,t)),this.Et("linkDataArray",3,"linkDataArray",this,null,t,null,i),this.CN(t)}addLinkDataCollection(t){if(Array.isArray(t)){const n=t.length;for(let i=0;i<n;i++)this.addLinkData(t[i])}else{const n=t.iterator;for(;n.next();){const i=n.value;this.addLinkData(i)}}}removeLinkData(t){t!==null&&this.NT(t,!0)}NT(t,n){this.sr.delete(t);const i=this.getKeyForLinkData(t);i!==void 0&&this.fi.delete(i);let r=null;if(n){if(r=this.$e.indexOf(t),r<0)return;this.$e.splice(r,1)}this.Et("linkDataArray",4,"linkDataArray",this,t,null,r,null),this.FO(t)}removeLinkDataCollection(t){if(Array.isArray(t)){const n=t.length;for(let i=0;i<n;i++)this.removeLinkData(t[i])}else{const n=t.iterator;for(;n.next();){const i=n.value;this.removeLinkData(i)}}}mergeLinkDataArray(t){if(this.linkKeyProperty===""&&o.o("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Array.isArray(t)){const n=this.rg;n.clear(),n.addAll(this.fi.iteratorKeys);const i=this.lg;i.clear();const r=t.length;for(let l=0;l<r;l++){const u=t[l],c=this.getKeyForLinkData(u);if(c!==void 0){i.add(c);const f=this.findLinkDataForKey(c);if(f===u)continue;if(f!==null)this.assignAllDataProperties(f,u),this.zT(u,f);else{const m=this.cloneDeep(u);this.setKeyForLinkData(m,c),this.addLinkData(m)}}else{const f=this.cloneDeep(u);this.addLinkData(f),i.add(this.getKeyForLinkData(f))}}const a=n.iterator;for(;a.next();){const l=a.value;if(!i.has(l)){const u=this.findLinkDataForKey(l);u&&this.removeLinkData(u)}}n.clear(),i.clear()}}CN(t){let n=this.Te(t,!0);n=this.NN(n),this.findNodeDataForKey(n)===null&&this.$s(n,t),n=this.Te(t,!1),n=this.NN(n),this.findNodeDataForKey(n)===null&&this.$s(n,t);const i=this.getLabelKeysForLinkData(t);if(Array.isArray(i)){const r=i.length;for(let a=0;a<r;a++)n=i[a],this.findNodeDataForKey(n)===null&&this.$s(n,t)}}FO(t){let n=this.Te(t,!0);this.Js(n,t),n=this.Te(t,!1),this.Js(n,t);const i=this.getLabelKeysForLinkData(t);if(Array.isArray(i)){const r=i.length;for(let a=0;a<r;a++)n=i[a],this.Js(n,t)}}get copyLinkDataFunction(){return this.Of}set copyLinkDataFunction(t){const n=this.Of;n!==t&&(this.Of=t,this.t("copyLinkDataFunction",n,t))}copyLinkData(t){if(t===null)return null;let n=null;const i=this.Of;return i!==null?n=i(t,this):n=this.E1(t,!0),o.wt(n)&&(this.wo!==""&&Wt.rt(n,this.wo,void 0),this.xo!==""&&Wt.rt(n,this.xo,void 0),this.Zs!==""&&Wt.rt(n,this.Zs,[])),n}get nodeIsGroupProperty(){return this.If}set nodeIsGroupProperty(t){const n=this.If;n!==t&&(this.An(t,Tn,"nodeIsGroupProperty"),this.If=t,this.t("nodeIsGroupProperty",n,t))}isGroupForNodeData(t){if(t===null)return!1;const n=this.If;return n===""?!1:!!Wt.vt(t,n)}isGroupForData(t){return this.isGroupForNodeData(t)}get nodeGroupKeyProperty(){return this.Tn}set nodeGroupKeyProperty(t){const n=this.Tn;n!==t&&(this.An(t,Tn,"nodeGroupKeyProperty"),this.Tn=t,this.t("nodeGroupKeyProperty",n,t))}get copiesGroupKeyOfNodeData(){return this.dg}set copiesGroupKeyOfNodeData(t){this.dg!==t&&(this.dg=t)}getGroupKeyForNodeData(t){if(t===null)return;const n=this.Tn;if(n==="")return;const i=Wt.vt(t,n);if(i!==void 0){if(this.isKeyType(i))return i;o.o("GroupKey value for node data "+t+" is not a number or a string: "+i)}}getGroupForData(t){return this.getGroupKeyForNodeData(t)}setGroupKeyForNodeData(t,n){if(n===null&&(n=void 0),n!==void 0&&!this.isKeyType(n)&&o.we(n,"number or string",Tn,"setGroupKeyForNodeData:key"),t===null)return;const i=this.Tn;if(i==="")return;if(!this.containsNodeData(t)){Wt.rt(t,i,n);return}const r=Wt.vt(t,i);r!==n&&(this.Js(r,t),Wt.rt(t,i,n),this.findNodeDataForKey(n)===null&&this.$s(n,t),this.Et("nodeGroupKey",2,i,t,r,n),typeof i=="string"&&this.updateTargetBindings(t,i))}setGroupForData(t,n){this.setGroupKeyForNodeData(t,n)}copyNodeData(t){if(t===null)return null;const n=super.copyNodeData(t);return!this.copiesGroupKeyOfNodeData&&this.Tn!==""&&Wt.vt(n,this.Tn)!==void 0&&Wt.rt(n,this.Tn,void 0),n}setDataProperty(t,n,i){if(this.containsNodeData(t)){if(n===this.nodeKeyProperty){this.setKeyForNodeData(t,i);return}else if(n===this.nodeCategoryProperty){this.setCategoryForNodeData(t,i);return}else if(n===this.nodeGroupKeyProperty){this.setGroupKeyForNodeData(t,i);return}}else if(this.containsLinkData(t)){if(n===this.linkFromKeyProperty){this._d(t,i,!0);return}else if(n===this.linkToKeyProperty){this._d(t,i,!1);return}else if(n===this.linkFromPortIdProperty){this.tg(t,i,!0);return}else if(n===this.linkToPortIdProperty){this.tg(t,i,!1);return}else if(n===this.linkKeyProperty){this.setKeyForLinkData(t,i);return}else if(n===this.linkCategoryProperty){this.setCategoryForLinkData(t,i);return}else if(n===this.linkLabelKeysProperty){this.setLabelKeysForLinkData(t,i);return}}const r=Wt.vt(t,n);r!==i&&(Wt.rt(t,n,i),this.raiseDataChanged(t,n,r,i))}assignAllDataProperties(t,n){if(!n)return;const i=this.containsNodeData(t),r=this.containsLinkData(t);for(const a in n)if(a!=="__gohashid"&&!(i&&a===this.nodeKeyProperty)){if(i&&a===this.nodeIsGroupProperty&&Wt.vt(t,a)===n[a]||r&&a===this.linkKeyProperty)continue;this.setDataProperty(t,a,n[a])}}Fy(t,n){super.Fy(t,n);const i=this.ti.iterator;for(;i.next();){const a=i.value;this.LN(a,t,n)}const r=this.sr.iterator;for(;r.next();){const a=r.value;this.RO(a,t,n)}}LN(t,n,i){if(this.getGroupKeyForNodeData(t)===n){const r=this.Tn;Wt.rt(t,r,i),this.Et("nodeGroupKey",2,r,t,n,i),typeof r=="string"&&this.updateTargetBindings(t,r)}}RO(t,n,i){if(this.Te(t,!0)===n){const a=this.wo;Wt.rt(t,a,i),this.Et("linkFromKey",2,a,t,n,i),typeof a=="string"&&this.updateTargetBindings(t,a)}if(this.Te(t,!1)===n){const a=this.xo;Wt.rt(t,a,i),this.Et("linkToKey",2,a,t,n,i),typeof a=="string"&&this.updateTargetBindings(t,a)}const r=this.getLabelKeysForLinkData(t);if(Array.isArray(r)){const a=r.length,l=this.Zs;for(let u=0;u<a;u++)r[u]===n&&(r[u]=i,this.Et("linkLabelKeys",3,l,t,n,i,u,u))}}MN(){super.MN();const t=this.linkDataArray,n=t.length;for(let i=0;i<n;i++){const r=t[i];this.CN(r)}}fg(t){super.fg(t);const n=this.getKeyForNodeData(t),i=this.Cy(n);if(i!==null){const r=o.nt(),a=i.iterator;for(;a.next();){const l=a.value;if(this.containsNodeData(l)){if(this.getGroupKeyForNodeData(l)===n){const u=this.Tn;this.Et("nodeGroupKey",2,u,l,n,n),typeof u=="string"&&this.updateTargetBindings(l,u),r.push(l)}}else{if(this.Te(l,!0)===n){const c=this.wo;this.Et("linkFromKey",2,c,l,n,n),typeof c=="string"&&this.updateTargetBindings(l,c),r.push(l)}if(this.Te(l,!1)===n){const c=this.xo;this.Et("linkToKey",2,c,l,n,n),typeof c=="string"&&this.updateTargetBindings(l,c),r.push(l)}const u=this.getLabelKeysForLinkData(l);if(Array.isArray(u)){const c=u.length,f=this.Zs;for(let m=0;m<c;m++)u[m]===n&&(this.Et("linkLabelKeys",3,f,l,n,n,m,m),r.push(l))}}}for(let l=0;l<r.length;l++)this.Js(n,r[l]);o.tt(r)}}ug(t){super.ug(t);const n=this.getGroupKeyForNodeData(t);this.findNodeDataForKey(n)===null&&this.$s(n,t)}Ry(t){super.Ry(t);const n=this.getGroupKeyForNodeData(t);this.Js(n,t)}get linkCategoryProperty(){return this.ja}set linkCategoryProperty(t){const n=this.ja;n!==t&&(this.An(t,Tn,"linkCategoryProperty"),this.ja=t,this.t("linkCategoryProperty",n,t))}getCategoryForLinkData(t){if(t===null)return"";const n=this.ja;if(n==="")return"";const i=Wt.vt(t,n);if(i===void 0)return"";if(typeof i=="string")return i;o.o("getCategoryForLinkData found a non-string category for "+t+": "+i)}getLinkCategoryForData(t){return this.getCategoryForLinkData(t)}setCategoryForLinkData(t,n){if(t===null)return;const i=this.ja;if(i==="")return;if(!this.containsLinkData(t)){Wt.rt(t,i,n);return}let r=Wt.vt(t,i);r===void 0&&(r=""),r!==n&&(Wt.rt(t,i,n),this.Et("linkCategory",2,i,t,r,n),typeof i=="string"&&this.updateTargetBindings(t,i))}setLinkCategoryForData(t,n){this.setCategoryForLinkData(t,n)}cg(t,n){super.cg(t,n),this.setGroupKeyForNodeData(n,this.getGroupKeyForNodeData(t))}zT(t,n){this.setCategoryForLinkData(n,this.getCategoryForLinkData(t)),this.setFromKeyForLinkData(n,this.getFromKeyForLinkData(t)),this.setToKeyForLinkData(n,this.getToKeyForLinkData(t)),this.setLabelKeysForLinkData(n,this.getLabelKeysForLinkData(t)),this.setFromPortIdForLinkData(n,this.getFromPortIdForLinkData(t)),this.setToPortIdForLinkData(n,this.getToPortIdForLinkData(t))}get type(){return"GraphLinksModel"}gc(){return!0}Ta(){return!0}Xw(){return!0}qc(){return!0}};v(Tn,"EmptyArray",Object.freeze([]));let jo=Tn;Wt.registerClass(jo,"GraphLinksModel"),Wt.constructGraphLinksModel=Wt.constructGraphLinksModel=()=>new jo,Wt.initDiagramModel=Wt.initDiagramModel=()=>new jo;class zo extends Wt{constructor(t,n){super();v(this,"Dn");v(this,"gg");v(this,"Ha");if(this.Dn="parent",this.gg=!1,this.Ha="parentLinkCategory",t!==void 0&&(Array.isArray(t)?this.nodeDataArray=t:n=t),n){Object.assign(this,n);const i=n.Changed;i&&(delete this.Changed,this.addChangedListener(i))}}cloneProtected(t){super.cloneProtected(t),t.Dn=this.Dn,t.gg=this.gg,t.Ha=this.Ha}toString(t){if(t===void 0&&(t=0),t>=2)return this.toJson();{let n=(this.name!==""?this.name:"")+" TreeModel";if(t>0){n+=`
 node data:`;const i=this.nodeDataArray,r=i.length;for(let a=0;a<r;a++){const l=i[a];n+=" "+this.getKeyForNodeData(l)+":"+rr.toString(l)}}return n}}ag(){const t=super.ag();let n="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(n+=`,
  "nodeParentKeyProperty": `+this.Fe(this.nodeParentKeyProperty)),t+n}Ty(t){super.Ty(t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)}Dy(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&o.o("applyIncrementalJson cannot change Model properties"),super.Dy(t)}maybeEnsureLinkReference(t){return t}get nodeParentKeyProperty(){return this.Dn}set nodeParentKeyProperty(t){const n=this.Dn;n!==t&&(this.An(t,zo,"nodeParentKeyProperty"),this.Dn=t,this.t("nodeParentKeyProperty",n,t))}get copiesParentKeyOfNodeData(){return this.gg}set copiesParentKeyOfNodeData(t){this.gg!==t&&(this.gg=t)}getParentKeyForNodeData(t){if(t===null)return;const n=this.Dn;if(n==="")return;const i=Wt.vt(t,n);if(i!==void 0){if(this.isKeyType(i))return i;o.o("ParentKey value for node data "+t+" is not a number or a string: "+i)}}setParentKeyForNodeData(t,n){if(n===null&&(n=void 0),n!==void 0&&!this.isKeyType(n)&&o.we(n,"number or string",zo,"setParentKeyForNodeData:key"),t===null)return;const i=this.Dn;if(i==="")return;if(n=this.maybeEnsureLinkReference(n),!this.containsNodeData(t)){Wt.rt(t,i,n);return}const r=Wt.vt(t,i);r!==n&&(this.Js(r,t),Wt.rt(t,i,n),this.findNodeDataForKey(n)===null&&this.$s(n,t),this.Et("nodeParentKey",2,i,t,r,n),typeof i=="string"&&this.updateTargetBindings(t,i))}get parentLinkCategoryProperty(){return this.Ha}set parentLinkCategoryProperty(t){const n=this.Ha;n!==t&&(this.An(t,zo,"parentLinkCategoryProperty"),this.Ha=t,this.t("parentLinkCategoryProperty",n,t))}get linkCategoryProperty(){return this.parentLinkCategoryProperty}set linkCategoryProperty(t){this.parentLinkCategoryProperty=t}getParentLinkCategoryForNodeData(t){if(t===null)return"";const n=this.Ha;if(n==="")return"";const i=Wt.vt(t,n);if(i===void 0)return"";if(typeof i=="string")return i;o.o("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+i)}getLinkCategoryForData(t){return this.getParentLinkCategoryForNodeData(t)}setParentLinkCategoryForNodeData(t,n){if(t===null)return;const i=this.Ha;if(i==="")return;if(!this.containsNodeData(t)){Wt.rt(t,i,n);return}let r=Wt.vt(t,i);r===void 0&&(r=""),r!==n&&(Wt.rt(t,i,n),this.Et("parentLinkCategory",2,i,t,r,n),typeof i=="string"&&this.updateTargetBindings(t,i))}setLinkCategoryForData(t,n){this.setParentLinkCategoryForNodeData(t,n)}copyNodeData(t){if(t===null)return null;const n=super.copyNodeData(t);return!this.copiesParentKeyOfNodeData&&this.Dn!==""&&Wt.vt(n,this.Dn)!==void 0&&Wt.rt(n,this.Dn,void 0),n}setDataProperty(t,n,i){if(this.containsNodeData(t)){if(n===this.nodeKeyProperty){this.setKeyForNodeData(t,i);return}else if(n===this.nodeCategoryProperty){this.setCategoryForNodeData(t,i);return}else if(n===this.nodeParentKeyProperty){this.setParentKeyForNodeData(t,i);return}else if(n===this.parentLinkCategoryProperty){this.setParentLinkCategoryForNodeData(t,i);return}}const r=Wt.vt(t,n);r!==i&&(Wt.rt(t,n,i),this.raiseDataChanged(t,n,r,i))}Fy(t,n){super.Fy(t,n);const i=this.ti.iterator;for(;i.next();){const r=i.value;this.LN(r,t,n)}}LN(t,n,i){if(this.getParentKeyForNodeData(t)===n){const r=this.Dn;Wt.rt(t,r,i),this.Et("nodeParentKey",2,r,t,n,i),typeof r=="string"&&this.updateTargetBindings(t,r)}}fg(t){super.fg(t);const n=this.getKeyForNodeData(t),i=this.Cy(n);if(i!==null){const r=o.nt(),a=i.iterator;for(;a.next();){const l=a.value;if(this.containsNodeData(l)&&this.getParentKeyForNodeData(l)===n){const u=this.Dn;this.Et("nodeParentKey",2,u,l,n,n),typeof u=="string"&&this.updateTargetBindings(l,u),r.push(l)}}for(let l=0;l<r.length;l++)this.Js(n,r[l]);o.tt(r)}}ug(t){super.ug(t);let n=this.getParentKeyForNodeData(t);n=this.maybeEnsureLinkReference(n),this.findNodeDataForKey(n)===null&&this.$s(n,t)}Ry(t){super.Ry(t);const n=this.getParentKeyForNodeData(t);this.Js(n,t)}cg(t,n){super.cg(t,n),this.setParentLinkCategoryForNodeData(n,this.getParentLinkCategoryForNodeData(t)),this.setParentKeyForNodeData(n,this.getParentKeyForNodeData(t))}get type(){return"TreeModel"}pc(){return!0}Xw(){return!0}}Wt.registerClass(zo,"TreeModel");var fd=(A=>(A[A.ConstantSpacing=0]="ConstantSpacing",A[A.ConstantDistance=1]="ConstantDistance",A[A.ConstantAngle=2]="ConstantAngle",A[A.Packed=3]="Packed",A))(fd||{}),gd=(A=>(A[A.Clockwise=10]="Clockwise",A[A.Counterclockwise=11]="Counterclockwise",A[A.BidirectionalLeft=12]="BidirectionalLeft",A[A.BidirectionalRight=13]="BidirectionalRight",A))(gd||{}),md=(A=>(A[A.Forwards=20]="Forwards",A[A.Reverse=21]="Reverse",A[A.Ascending=22]="Ascending",A[A.Descending=23]="Descending",A[A.Optimized=24]="Optimized",A))(md||{}),pd=(A=>(A[A.Pythagorean=30]="Pythagorean",A[A.Circular=31]="Circular",A))(pd||{});class ci extends Yn{constructor(t){super();v(this,"le");v(this,"Ef");v(this,"B1");v(this,"mg");v(this,"U1");v(this,"Ah");v(this,"AN");v(this,"TN");v(this,"DN");v(this,"bs");v(this,"vy");v(this,"Oy");v(this,"qa");v(this,"Iy");v(this,"XT");v(this,"pg");v(this,"yg");v(this,"wg");v(this,"Bf");v(this,"Xi");v(this,"S");v(this,"pe");v(this,"ye");v(this,"Ln");v(this,"xg");this.le=0,this.Ef=0,this.B1=0,this.mg=360,this.U1=0,this.Ah=0,this.AN=new T,this.TN=30,this.DN=0,this.bs=0,this.vy=0,this.Oy=new l0,this.qa=0,this.Iy=0,this.XT=600,this.pg=NaN,this.yg=1,this.wg=0,this.Bf=360,this.Xi=0,this.S=10,this.pe=24,this.ye=Pr.standardComparer,this.Ln=6,this.xg=30,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.pg=this.pg,t.yg=this.yg,t.wg=this.wg,t.Bf=this.Bf,t.Xi=this.Xi,t.S=this.S,t.pe=this.pe,t.ye=this.ye,t.Ln=this.Ln,t.xg=this.xg}ri(t){t in md?this.sorting=t:t in gd?this.direction=t:t in fd?this.arrangement=t:t in pd?this.nodeDiameterFormula=t:super.ri(t)}createNetwork(){return new h0(this)}vO(t,n,i){t=this.OO(t);let r=this.U1,a=this.TN,l=this.le,u=this.Ef,c=this.B1,f=this.mg,m=this.Ah,p=this.DN,y=this.bs,w=this.vy;if(r=this.arrangement,a=this.nodeDiameterFormula,l=this.radius,(!isFinite(l)||l<=0)&&(l=NaN),u=this.aspectRatio,(!isFinite(u)||u<=0)&&(u=1),c=this.startAngle,isFinite(c)||(c=0),f=this.sweepAngle,(!isFinite(f)||f>360||f<1)&&(f=360),m=this.spacing,isFinite(m)||(m=NaN),r===3&&a===31?r=0:r===3&&a!==31&&(a=31,r=this.arrangement),(this.direction===12||this.direction===13)&&this.sorting!==24){for(let k=0;!(k>=t.length||(n.add(t.elt(k)),k+1>=t.length));k+=2)i.add(t.elt(k+1));this.direction===12?(this.arrangement===3&&n.reverse(),t=new M,t.addAll(n),t.addAll(i)):(this.arrangement===3&&i.reverse(),t=new M,t.addAll(i),t.addAll(n))}const b=t.length;p=0;let C=0;for(let k=0;k<t.length;k++){const N=c+f*C*(this.direction===10?1:-1)/b;let F=t.elt(k).diameter;isNaN(F)&&(F=t.elt(k).Th(N)),f<360&&(k===0||k===t.length-1)&&(F/=2),p+=F,C++}if(isNaN(l)||r===3){if(isNaN(m)&&(m=6),r!==0&&r!==3){let k=-1/0;for(let N=0;N<b;N++){const F=t.elt(N),D=t.elt(N===b-1?0:N+1);isNaN(F.diameter)&&F.Th(0),isNaN(D.diameter)&&D.Th(0),k=Math.max(k,(F.diameter+D.diameter)/2)}if(w=k+m,r===2){const N=2*Math.PI/b,F=(k+m)/N;u>1?(l=F,y=l*u):(y=F,l=y)}else l=this.V1(w*(f>=360?b:b-1),u,c*Math.PI/180,f*Math.PI/180)}else l=this.V1(p+(f>=360?b:b-1)*(r!==3?m:m*1.6),u,c*Math.PI/180,f*Math.PI/180);y=l*u}else{y=l*u;const k=this.FN(l,y,c*Math.PI/180,f*Math.PI/180);if(isNaN(m))r===0&&(m=(k-p)/(f>=360?b:b-1));else if(r===0){const N=(k-p)/(f>=360?b:b-1);N<m?(l=this.V1(p+m*(f>=360?b:b-1),u,c*Math.PI/180,f*Math.PI/180),y=l*u):m=N}else{let N=-1/0;for(let E=0;E<b;E++){const U=t.elt(E),$=t.elt(E===b-1?0:E+1);isNaN(U.diameter)&&U.Th(0),isNaN($.diameter)&&$.Th(0),N=Math.max(N,(U.diameter+$.diameter)/2)}const F=N+m,D=this.V1(F*(f>=360?b:b-1),u,c*Math.PI/180,f*Math.PI/180);D>l?(l=D,y=l*u,w=F):w=k/(f>=360?b:b-1)}}return this.U1=r,this.TN=a,this.le=l,this.Ef=u,this.B1=c,this.mg=f,this.Ah=m,this.DN=p,this.bs=y,this.vy=w,t}doLayout(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const n=this.network.vertexes;if(n.count<=1){if(n.count===1){const w=n.first();w.centerX=0,w.centerY=0}this.updateParts(),this.network=null,this.isValidLayout=!0;return}let i=new M;i.addAll(n.iterator);const r=new M,a=new M;i=this.vO(i,r,a);const l=this.U1,u=this.le,c=this.B1,f=this.mg,m=this.Ah,p=this.bs,y=this.vy;if((this.direction===12||this.direction===13)&&l===3)this.KT(i,f,c-f/2,10);else if(this.direction===12||this.direction===13){let w=0;switch(l){case 1:w=this.z1(u,p,c,y)*180/Math.PI;break;case 0:{let b=0,C=0;const k=r.first();k!==null&&(b=k.Th(Math.PI/2));const N=a.first();N!==null&&(C=N.Th(Math.PI/2)),w=this.z1(u,p,c,m+(b+C)/2)*180/Math.PI;break}case 2:w=f/i.length;break}if(this.direction===12){switch(l){case 1:this.Ey(r,f/2,c,11);break;case 0:this.By(r,f/2,c,11);break;case 2:this.Uy(r,f/2,c,11);break}switch(l){case 1:this.Ey(a,f/2,c+w,10);break;case 0:this.By(a,f/2,c+w,10);break;case 2:this.Uy(a,f/2,c+w,10);break}}else{switch(l){case 1:this.Ey(a,f/2,c,11);break;case 0:this.By(a,f/2,c,11);break;case 2:this.Uy(a,f/2,c,11);break}switch(l){case 1:this.Ey(r,f/2,c+w,10);break;case 0:this.By(r,f/2,c+w,10);break;case 2:this.Uy(r,f/2,c+w,10);break}}}else switch(l){case 1:this.Ey(i,f,c,this.direction);break;case 0:this.By(i,f,c,this.direction);break;case 2:this.Uy(i,f,c,this.direction);break;case 3:this.KT(i,f,c,this.direction);break}this.updateParts(),this.network=null,this.isValidLayout=!0}Uy(t,n,i,r){const a=this.mg,l=this.le,u=this.bs,c=i*Math.PI/180,f=n*Math.PI/180,m=t.length;for(let p=0;p<m;p++){const y=c+(r===10?p*f/(a>=360?m:m-1):-(p*f)/m),w=t.elt(p),b=l*Math.tan(y)/u,C=Math.sqrt((l*l+u*u*b*b)/(1+b*b));w.centerX=C*Math.cos(y),w.centerY=C*Math.sin(y),w.actualAngle=y*180/Math.PI}}By(t,n,i,r){const a=this.le,l=this.bs,u=this.Ah;let c=i*Math.PI/180;const f=t.length;for(let m=0;m<f;m++){const p=t.elt(m),y=t.elt(m===f-1?0:m+1),w=a*Math.cos(c),b=l*Math.sin(c);p.centerX=w,p.centerY=b,p.actualAngle=c*180/Math.PI,isNaN(p.diameter)&&p.Th(0),isNaN(y.diameter)&&y.Th(0);const C=(p.diameter+y.diameter)/2,k=this.z1(a,l,r===10?c:-c,C+u);c+=r===10?k:-k}}Ey(t,n,i,r){const a=this.le,l=this.bs,u=this.vy;let c=i*Math.PI/180;const f=t.length;for(let m=0;m<f;m++){const p=t.elt(m);p.centerX=a*Math.cos(c),p.centerY=l*Math.sin(c),p.actualAngle=c*180/Math.PI;const y=this.z1(a,l,r===10?c:-c,u);c+=r===10?y:-y}}KT(t,n,i,r){let a=this.Iy;const l=this.mg;if(this.qa=0,this.Oy=new l0,n<360){for(a=i+(r===10?l:-l);a<0;)a+=360;a%=360,a>180&&(a-=360),a*=Math.PI/180,this.Iy=a,this.YT(t,n,i,r)}else this.GT(t,n,i,r);this.Oy.commit(t)}GT(t,n,i,r){const a=this.le,l=this.bs,u=this.Ah,c=this.Ef;let f=a*Math.cos(i*Math.PI/180),m=l*Math.sin(i*Math.PI/180);const p=t.toArray();if(p.length===3){p[0].centerX=a,p[0].centerY=0,p[1].centerX=p[0].centerX-p[0].width/2-p[1].width/2-u,p[1].y=p[0].y,p[2].centerX=(p[0].centerX+p[1].centerX)/2,p[2].y=p[0].y-p[2].height-u;return}else if(p.length===4){p[0].centerX=a,p[0].centerY=0,p[2].centerX=-p[0].centerX,p[2].centerY=p[0].centerY,p[1].centerX=0,p[1].y=Math.min(p[0].y,p[2].y)-p[1].height-u,p[3].centerX=0,p[3].y=Math.max(p[0].y+p[0].height+u,p[2].y+p[2].height+u);return}const y=T.l();for(let U=0;U<p.length&&(p[U].centerX=f,p[U].centerY=m,!(U>=p.length-1));U++)this.jT(f,m,p,U,r,y)||this.HT(f,m,p,U,r,y),f=y.x,m=y.y;if(T.s(y),this.qa++,this.qa>23)return;const w=p[0].centerX,b=p[0].centerY,C=p[p.length-1].centerX,k=p[p.length-1].centerY;let N=Math.abs(w-C)-((p[0].width+p[p.length-1].width)/2+u);const F=Math.abs(b-k)-((p[0].height+p[p.length-1].height)/2+u);let D=0;if(Math.abs(F)<1){const U=Math.abs(w-C),$=(p[0].width+p[p.length-1].width)/2;U<$&&(D=0),N=U-$}else F>0?D=F:Math.abs(N)<1?D=0:D=N;let E=!1;Math.abs(C)>Math.abs(k)?E=C>0!=b>k:E=k>0!=w<C,E=r===10?E:!E,E&&(D=-Math.abs(D),D=Math.min(D,-p[p.length-1].width),D=Math.min(D,-p[p.length-1].height)),this.Oy.IO(D,p),Math.abs(D)>1&&(this.qa<8?this.le-=D/(2*Math.PI):p.length<5&&D>10?this.le/=2:this.le-=D>0?1.7:-2.3,this.bs=this.le*c,this.GT(t,n,i,r))}YT(t,n,i,r){const a=this.le,l=this.bs,u=this.Ef;let c=a*Math.cos(i*Math.PI/180),f=l*Math.sin(i*Math.PI/180);const m=T.l(),p=t.toArray();for(let C=0;C<p.length&&(p[C].centerX=c,p[C].centerY=f,!(C>=p.length-1));C++)this.jT(c,f,p,C,r,m)||this.HT(c,f,p,C,r,m),c=m.x,f=m.y;if(T.s(m),this.qa++,this.qa>23)return;const y=Math.atan2(f,c);let w=r===10?this.Iy-y:y-this.Iy;w=Math.abs(w)<Math.abs(w-2*Math.PI)?w:w-2*Math.PI;const b=w*(a+l)/2;this.Oy.EO(b,p),Math.abs(b)>1&&(this.qa<8?this.le-=b/(2*Math.PI):this.le-=b>0?1.7:-2.3,this.bs=this.le*u,this.YT(t,n,i,r))}jT(t,n,i,r,a,l){const u=this.Ah,c=this.le,f=this.bs;let m=0,p=0;const y=(i[r].width+i[r+1].width)/2+u;let w=!1;if(n>=0!=(a===10)){if(m=t+y,m>c){if(m=t-y,m<-c)return l.x=m,l.y=p,!1;w=!0}}else if(m=t-y,m<-c){if(m=t+y,m>c)return l.x=m,l.y=p,!1;w=!0}return p=Math.sqrt(1-Math.min(1,m*m/(c*c)))*f,n<0!==w&&(p=-p),Math.abs(n-p)>(i[r].height+i[r+1].height)/2?(l.x=m,l.y=p,!1):(l.x=m,l.y=p,!0)}HT(t,n,i,r,a,l){const u=this.Ah,c=this.le,f=this.bs;let m=0,p=0;const y=(i[r].height+i[r+1].height)/2+u;let w=!1;if(t>=0!=(a===10)){if(p=n-y,p<-f){if(p=n+y,p>f)return l.x=m,l.y=p,!1;w=!0}}else if(p=n+y,p>f){if(p=n-y,p<-f)return l.x=m,l.y=p,!1;w=!0}return m=Math.sqrt(1-Math.min(1,p*p/(f*f)))*c,t<0!==w&&(m=-m),Math.abs(t-m)>(i[r].width+i[r+1].width)/2?(l.x=m,l.y=p,!1):(l.x=m,l.y=p,!0)}commitLayout(){this.commitNodes(),this.isRouting&&this.commitLinks()}commitNodes(){const t=this.group!==null&&this.group.hasPlaceholder(),n=t?this.group.location.copy():null;let i=this.actualCenter;t?i=new T(0,0):(i.x=this.arrangementOrigin.x+this.le,i.y=this.arrangementOrigin.y+this.bs);const r=this.network.vertexes.iterator;for(;r.next();){const a=r.value;a.x+=i.x,a.y+=i.y,a.commit()}if(t){this.group.ensureBounds();const a=this.group.position.copy(),l=this.group.location.copy(),u=n.subtract(l.subtract(a));this.group.move(u),this.AN=u.subtract(a)}}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}FN(t,n,i,r){const a=this.XT;if(Math.abs(this.Ef-1)<.001)return i!==void 0&&r!==void 0?r*t:2*Math.PI*t;const l=t>n?Math.sqrt(t*t-n*n)/t:Math.sqrt(n*n-t*t)/n;let u=0,c=0;i!==void 0&&r!==void 0?c=r/(a+1):c=Math.PI/(2*(a+1));let f=0;for(let m=0;m<=a;m++){i!==void 0&&r!==void 0?f=i+m*r/a:f=m*Math.PI/(2*a);const p=Math.sin(f);u+=Math.sqrt(1-l*l*p*p)*c}return i!==void 0&&r!==void 0?(t>n?t:n)*u:4*(t>n?t:n)*u}V1(t,n,i,r){let a=0;return i!==void 0&&r!==void 0?a=this.FN(1,n,i,r):a=this.FN(1,n),t/a}z1(t,n,i,r){if(Math.abs(this.Ef-1)<.001)return r/t;const a=t>n?Math.sqrt(t*t-n*n)/t:Math.sqrt(n*n-t*t)/n;let l=0;const u=2*Math.PI/(this.network.vertexes.count*700);t>n&&(i+=Math.PI/2);for(let c=0;;c++){const f=i+c*u,m=Math.sin(f);if(l+=(t>n?t:n)*Math.sqrt(1-a*a*m*m)*u,l>=r)return c*u}}OO(t){switch(this.sorting){case 20:break;case 21:t.reverse();break;case 22:t.sort(this.comparer);break;case 23:t.sort(this.comparer),t.reverse();break;case 24:return this.BO(this.UO(t));default:o.o("Invalid sorting type.")}return t}UO(t){const n=[];for(let r=0;r<t.length;r++)n.push(0);const i=new M;for(let r=0;r<t.length;r++){let a=-1,l=-1;if(r===0)for(let p=0;p<t.length;p++){const y=t.elt(p).edgesCount;y>a&&(a=y,l=p)}else for(let p=0;p<t.length;p++){const y=n[p];y>a&&(a=y,l=p)}i.add(t.elt(l)),n[l]=-1;const u=t.elt(l);let c=0;const f=u.sourceEdges;for(;f.next();){const p=f.value.fromVertex;c=t.indexOf(p),!(c<0)&&n[c]>=0&&n[c]++}const m=u.destinationEdges;for(;m.next();){const p=m.value.toVertex;c=t.indexOf(p),!(c<0)&&n[c]>=0&&n[c]++}}return i}BO(t){const n=[];for(let y=0;y<t.length;y++){const w=t.elt(y);n[y]=[];let b=0;const C=w.destinationEdges;for(;C.next();){const N=C.value.toVertex;b=t.indexOf(N),b!==y&&n[y].indexOf(b)<0&&n[y].push(b)}const k=w.sourceEdges;for(;k.next();){const N=k.value.fromVertex;b=t.indexOf(N),b!==y&&n[y].indexOf(b)<0&&n[y].push(b)}}const i=[];for(let y=0;y<n.length;y++)i[y]=0;const r=[],a=[],l=[],u=[],c=new M;let f=0;for(let y=0;y<n.length;y++){const w=n[y].length;if(w===1){u.push(y);continue}if(w===0){c.add(t.elt(y));continue}if(f===0){r.push(y),f++;continue}let b=1/0,C=1/0,k=-1;const N=[];for(let F=0;F<r.length;F++)n[r[F]].indexOf(r[F===r.length-1?0:F+1])<0&&N.push(F===r.length-1?0:F+1);if(N.length===0)for(let F=0;F<r.length;F++)N.push(F);for(let F=0;F<N.length;F++){const D=N[F],E=this.VO(n[y],a,l,i,D,r);let U=0;for(let $=0;$<n[y].length;$++){const K=n[y][$],_=r.indexOf(K);if(_>=0){const G=Math.abs(D-(_>=D?_+1:_));U+=G<r.length+1-G?G:r.length+1-G}}for(let $=0;$<a.length;$++){let K=i[a[$]],_=i[l[$]];if(K>=D&&K++,_>=D&&_++,K>_){const G=_;_=K,K=G}_-K<(r.length+2)/2==(K<D&&D<=_)&&U++}(E<b||E===b&&U<C)&&(b=E,C=U,k=D)}r.splice(k,0,y);for(let F=0;F<r.length;F++)i[r[F]]=F;for(let F=0;F<n[y].length;F++){const D=n[y][F];r.indexOf(D)>=0&&(a.push(y),l.push(D))}f++}let m=!1;const p=r.length;for(;;){m=!0;for(let y=0;y<u.length;y++){const w=u[y],b=n[w][0],C=r.indexOf(b);if(C>=0){let k=0;for(let N=0;N<n[b].length;N++){const F=n[b][N],D=r.indexOf(F);if(D<0||D===C)continue;const E=D>C?D-C:C-D,U=p-E;k+=D<C!=E>U?1:-1}r.splice(k<0?C:C+1,0,w),u.splice(y,1),y--}else m=!1}if(m)break;r.push(u[0]),u.splice(0,1)}for(let y=0;y<r.length;y++){const w=r[y];c.add(t.elt(w))}return c}VO(t,n,i,r,a,l){let u=0;for(let c=0;c<n.length;c++){const f=n[c],m=i[c],p=r[f],y=r[m];let w=0,b=0;if(p<y?(w=p,b=y):(w=y,b=p),w<a&&a<=b)for(let C=0;C<t.length;C++){const k=t[C];l.indexOf(k)<0||w<r[k]&&r[k]<b||w===r[k]||b===r[k]||u++}else for(let C=0;C<t.length;C++){const k=t[C];l.indexOf(k)<0||!(w<r[k]&&r[k]<b)||w===r[k]||b===r[k]||u++}}return u}get radius(){return this.pg}set radius(t){this.pg!==t&&(t>0||isNaN(t))&&(this.pg=t,this.invalidateLayout())}get aspectRatio(){return this.yg}set aspectRatio(t){this.yg!==t&&t>0&&(this.yg=t,this.invalidateLayout())}get startAngle(){return this.wg}set startAngle(t){this.wg!==t&&(this.wg=t,this.invalidateLayout())}get sweepAngle(){return this.Bf}set sweepAngle(t){this.Bf!==t&&(t>0&&t<=360?this.Bf=t:this.Bf=360,this.invalidateLayout())}get arrangement(){return this.Xi}set arrangement(t){this.Xi!==t&&(t===3||t===0||t===1||t===2)&&(this.Xi=t,this.invalidateLayout())}get direction(){return this.S}set direction(t){this.S!==t&&(t===10||t===11||t===12||t===13)&&(this.S=t,this.invalidateLayout())}get sorting(){return this.pe}set sorting(t){this.pe!==t&&(this.pe=t,this.invalidateLayout())}get comparer(){return this.ye}set comparer(t){this.ye!==t&&(this.ye=t,this.invalidateLayout())}get spacing(){return this.Ln}set spacing(t){this.Ln!==t&&(this.Ln=t,this.invalidateLayout())}get nodeDiameterFormula(){return this.xg}set nodeDiameterFormula(t){this.xg!==t&&(t===30||t===31)&&(this.xg=t,this.invalidateLayout())}get actualXRadius(){return this.le}get actualYRadius(){return this.bs}get actualSpacing(){return this.Ah}get actualCenter(){return this.AN}}v(ci,"ConstantSpacing",0),v(ci,"ConstantDistance",1),v(ci,"ConstantAngle",2),v(ci,"Packed",3),v(ci,"Clockwise",10),v(ci,"Counterclockwise",11),v(ci,"BidirectionalLeft",12),v(ci,"BidirectionalRight",13),v(ci,"Forwards",20),v(ci,"Reverse",21),v(ci,"Ascending",22),v(ci,"Descending",23),v(ci,"Optimized",24),v(ci,"Pythagorean",30),v(ci,"Circular",31);class l0{constructor(){v(this,"Uf");v(this,"Wa");v(this,"Vf");this.Uf=-1/0,this.Wa=null,this.Vf=null}IO(e,t){if(e>0&&this.Uf<0||Math.abs(e)<Math.abs(this.Uf)&&!(e<0&&this.Uf>0)){this.Uf=e,this.Wa=[],this.Vf=[];for(let n=0;n<t.length;n++)this.Wa[n]=t[n].bounds.x,this.Vf[n]=t[n].bounds.y}}EO(e,t){if(Math.abs(e)<Math.abs(this.Uf)){this.Uf=e,this.Wa=[],this.Vf=[];for(let n=0;n<t.length;n++)this.Wa[n]=t[n].bounds.x,this.Vf[n]=t[n].bounds.y}}commit(e){if(!(this.Wa===null||this.Vf===null))for(let t=0;t<this.Wa.length;t++){const n=e.elt(t);n.x=this.Wa[t],n.y=this.Vf[t]}}}class h0 extends kr{constructor(e){super(e)}createVertex(){return new u0(this)}createEdge(){return new c0(this)}}class u0 extends Pr{constructor(t){super(t);v(this,"bo");v(this,"X1");this.bo=NaN,this.X1=NaN}Th(t){const n=this.network;if(n===null)return NaN;const i=n.layout;if(i===null)return NaN;if(i.arrangement===3){if(i.nodeDiameterFormula===31)return this.bo=Math.max(this.width,this.height),this.bo;{const r=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));return r===0?this.width:a===0?this.height:(this.bo=Math.min(this.height/r,this.width/a),this.bo)}}else return i.nodeDiameterFormula===31?(this.bo=Math.max(this.width,this.height),this.bo):(this.bo=Math.sqrt(this.width*this.width+this.height*this.height),this.bo)}get diameter(){return this.bo}set diameter(t){this.bo!==t&&(this.bo=t)}get actualAngle(){return this.X1}set actualAngle(t){this.X1!==t&&(this.X1=t)}}class c0 extends Io{constructor(e){super(e)}}class yC extends Yn{constructor(t){super();v(this,"Vy");v(this,"Dh");v(this,"ks");v(this,"bg");v(this,"Fn");v(this,"Re");v(this,"kg");v(this,"Pg");v(this,"Sg");v(this,"zf");v(this,"Mg");v(this,"Ng");v(this,"Xf");v(this,"Kf");v(this,"Yf");v(this,"Gf");v(this,"Cg");v(this,"Lg");v(this,"jf");v(this,"Ja");this.Vy=0,this.Dh=0,this.ks=new B(100,100).g(),this.bg=!1,this.Fn=!0,this.Re=!1,this.kg=100,this.Pg=300,this.Sg=1,this.zf=1e3,this.Mg=10,this.Ng=Math,this.Xf=.05,this.Kf=50,this.Yf=150,this.Gf=0,this.Cg=10,this.Lg=5,this.jf=NaN,this.Ja=10,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.ks.a(this.ks),t.bg=this.bg,t.Fn=this.Fn,t.Re=this.Re,t.kg=this.kg,t.Pg=this.Pg,t.Sg=this.Sg,t.zf=this.zf,t.Mg=this.Mg,t.Ng=this.Ng,t.Xf=this.Xf,t.Kf=this.Kf,t.Yf=this.Yf,t.Gf=this.Gf,t.Cg=this.Cg,t.Lg=this.Lg,t.jf=this.jf,t.Ja=this.Ja}createNetwork(){return new d0(this)}doLayout(t){this.network=this.makeNetwork(t);let n=this.network.vertexes.iterator;const i=this.maxIterations;if(this.network.vertexes.count>0){for(this.network.deleteSelfEdges(),n=this.network.vertexes.iterator;n.next();){const a=n.value;a.charge=this.electricalCharge(a),a.mass=this.gravitationalMass(a)}const r=this.network.edges.iterator;for(;r.next();){const a=r.value;a.stiffness=this.springStiffness(a),a.length=this.springLength(a)}if(this.RN(),this.Dh=0,this.needsPrelayout()){const a=this.network,l=a.splitIntoSubNetworks(!1);let u=l.iterator;for(;u.next();){const c=u.value;this.doConnectedSubnetLayout(c)}for(u=l.iterator,this.zO(u,a),u=l.iterator;u.next();){const c=u.value,f=c.vertexes.iterator;for(;f.next();){const p=f.value;a.addVertex(p)}const m=c.edges.iterator;for(;m.next();){const p=m.value;a.addEdge(p)}}}else this.qT(this.network,this.maxIterations);this.updateParts()}this.maxIterations=i,this.isValidLayout=!0}needsPrelayout(){if(this.network.vertexes.count<3)return!1;let t=0,n=0;const i=this.network.vertexes.first().bounds,r=this.network.vertexes.iterator;for(;r.next();){const a=r.value,l=a.bounds;if(isNaN(a.x)||isNaN(a.y)||l.intersectsRect(i)&&(t++,t>2))return!0;if(n>10)return!1;n++}return!1}doConnectedSubnetLayout(t){let n=t.vertexes.iterator;for(;n.next();){const c=n.value;c.hierarchicalVertexes.add(c)}let i=t,r=this.jf;if(isNaN(r)&&(r=t.edges.count/t.vertexes.count),r<t.vertexes.count)for(;i.vertexes.count>Math.max(100,Math.sqrt(r*t.vertexes.count));)i=this.coarsenNetwork(i);let a=0;n=i.vertexes.iterator;let l=this.randomNumberGenerator;for(l===null&&(this.randomNumberGenerator=l=new m0(0));n.next();){n.value.idInCluster=a++;const c=10*(l.random()-.5),f=10*(l.random()-.5);this.isFixed(n.value)||(n.value.x=c,n.value.y=f);const m=n.value.hierarchicalVertexes.iterator;for(;m.next();)this.isFixed(m.value)||(m.value.x=c,m.value.y=f)}const u=this.computePairwiseDistances(i);this.XO(i,u,this.maxPrelayoutIterations,t.vertexes.count),this.qT(t,this.maxIterations)}computePairwiseDistances(t){const n=t.vertexes.count,i=new Array(n);for(let u=0;u<n;u++)i[u]=new Array(n).fill(-1),i[u][u]=0;const r=t.vertexes.iterator;let a=new Map,l=[];for(;r.next();){const u=r.value;for(l=[u],a=new Map,a.set(u.idInCluster,0);l.length>0;){const c=l.shift(),f=c.vertexes.iterator;for(;f.next();){const m=f.value;a.has(m.idInCluster)||(a.set(m.idInCluster,a.get(c.idInCluster)+1),l.push(m))}}for(let c=0;c<n;c++){const f=Math.min(i[u.idInCluster][c],i[c][u.idInCluster]),m=a.get(c);(f<0||m<f)&&(i[u.idInCluster][c]=m,i[c][u.idInCluster]=m)}}return i}coarsenNetwork(t){const n=this.createNetwork(),i=new Map;let r=0,a=t.vertexes.iterator;for(;a.next();)a.value.idInCluster=r++;for(a=t.vertexes.iterator;a.next();){const u=a.value;if(i.has(u.idInCluster))continue;let c=Number.MAX_SAFE_INTEGER,f=null;const m=u.vertexes.iterator;for(;m.next();){const y=m.value;i.has(y.idInCluster)||y.hierarchicalVertexes.length<c&&(c=y.hierarchicalVertexes.length,f=y)}const p=n.createVertex();p.hierarchicalVertexes.addAll(u.hierarchicalVertexes),f!=null&&p.hierarchicalVertexes.addAll(f.hierarchicalVertexes),i.set(u.idInCluster,p),f!=null&&i.set(f.idInCluster,p),n.addVertex(p)}const l=t.edges.iterator;for(;l.next();){const u=l.value,c=i.get(u.fromVertex.idInCluster),f=i.get(u.toVertex.idInCluster);if(c===f)continue;const m=n.createEdge();m.fromVertex=c,m.toVertex=f,n.addEdge(m)}return n}Nw(t,n){let i=!0;const r=t.vertexes.iterator;for(;r.next();){const a=r.value;i?(i=!1,n.set(a.bounds)):n.unionRect(a.bounds)}return n}zO(t,n){const i=this.arrangementSpacing,r=t.count;let a=!0,l=0,u=0;const c=o.nt();for(let y=0;y<r+n.vertexes.count+2;y++)c[y]=null;let f=0;t.reset();const m=I.l();let p;for(;t.next();){const y=t.value;if(this.Nw(y,m),a)a=!1,l=m.x+m.width/2,u=m.y+m.height/2,c[0]=new T(m.x+m.width+i.width,m.y),c[1]=new T(m.x,m.y+m.height+i.height),f=2;else{const w=this.WT(c,f,l,u,m.width,m.height,i),b=c[w],C=new T(b.x+m.width+i.width,b.y),k=new T(b.x,b.y+m.height+i.height);w+1<f&&c.splice(w+1,0,null),c[w]=C,c[w+1]=k,f++;const N=b.x-m.x,F=b.y-m.y;for(p=y.vertexes.iterator;p.next();){const D=p.value;this.isFixed(D)||(D.centerX+=N,D.centerY+=F)}}}for(I.s(m),p=n.vertexes.iterator;p.next();){const y=p.value,w=y.bounds;if(f<2){l=w.x+w.width/2,u=w.y+w.height/2,c[0]=new T(w.x+w.width+i.width,w.y),c[1]=new T(w.x,w.y+w.height+i.height),f=2;continue}const b=this.WT(c,f,l,u,w.width,w.height,i),C=c[b],k=new T(C.x+w.width+i.width,C.y),N=new T(C.x,C.y+w.height+i.height);b+1<f&&c.splice(b+1,0,null),c[b]=k,c[b+1]=N,f++,this.isFixed(y)||(y.centerX=C.x+y.width/2,y.centerY=C.y+y.height/2)}o.tt(c)}WT(t,n,i,r,a,l,u){let c=9e19,f=-1;t:for(let m=0;m<n;m++){const p=t[m],y=p.x-i,w=p.y-r,b=y*y+w*w;if(b<c){for(let C=m-1;C>=0;C--)if(t[C].y>p.y&&t[C].x-p.x<a+u.width)continue t;for(let C=m+1;C<n;C++)if(t[C].x>p.x&&t[C].y-p.y<l+u.height)continue t;f=m,c=b}}return f}RN(){if(!this.comments)return;const t=this.network.vertexes.iterator;for(;t.next();){const n=t.value;this.addComments(n)}}addComments(t){const n=t.node;if(n!==null){const i=n.findNodesConnected();for(;i.next();){const r=i.value;if(r.category!=="Comment"||!r.isVisible())continue;let a=this.network.findVertex(r);a===null&&(a=this.network.addNode(r)),a.charge=this.defaultCommentElectricalCharge;let l=null;const u=a.destinationEdges;for(;u.next();){const c=u.value;if(c.toVertex===t){l=c;break}}if(l===null){const c=a.sourceEdges;for(;c.next();){const f=c.value;if(f.fromVertex===t){l=f;break}}}l===null&&(l=this.network.linkVertexes(t,a,null)),l.length=this.defaultCommentSpringLength}}}vN(t,n){const i=t.bounds,r=i.x,a=i.y,l=i.width,u=i.height,c=n.bounds,f=c.x,m=c.y,p=c.width,y=c.height;if(r+l<f)if(a>m+y){const w=r+l-f,b=a-m-y;return R.bw(w*w+b*b)}else if(a+u<m){const w=r+l-f,b=a+u-m;return R.bw(w*w+b*b)}else return f-(r+l);else if(r>f+p)if(a>m+y){const w=r-f-p,b=a-m-y;return R.bw(w*w+b*b)}else if(a+u<m){const w=r-f-p,b=a+u-m;return R.bw(w*w+b*b)}else return r-(f+p);else return a>m+y?a-(m+y):a+u<m?m-(a+u):.1}qT(t,n){const i=this.Dh+n;for(;this.Dh<i&&(this.Dh++,!!this.KO(t)););}KO(t){const n=t.vertexes.toArray();if(n.length<=0)return!1;const i=n[0];i.forceX=0,i.forceY=0;let r=i.centerX,a=r,l=i.centerY,u=l;for(let C=1;C<n.length;C++){const k=n[C];k.forceX=0,k.forceY=0;const N=k.centerX,F=k.centerY;r=Math.min(r,N),a=Math.max(a,N),l=Math.min(l,F),u=Math.max(u,F)}const c=a-r>u-l;c?n.sort((C,k)=>C===null||k===null||C===k?0:C.centerX-k.centerX):n.sort((C,k)=>C===null||k===null||C===k?0:C.centerY-k.centerY);const f=this.zf;let m=0,p=0,y=0;for(let C=0;C<n.length;C++){const k=n[C],N=k.bounds,F=k.focus,D=N.x+F.x,E=N.y+F.y;p=k.charge*this.electricalFieldX(D,E),y=k.charge*this.electricalFieldY(D,E),p+=k.mass*this.gravitationalFieldX(D,E),y+=k.mass*this.gravitationalFieldY(D,E),k.forceX+=p,k.forceY+=y;for(let U=C+1;U<n.length;U++){const $=n[U];if(!this.shouldInteract(k,$)||U===C)continue;const K=$.bounds,_=$.focus,G=K.x+_.x,X=K.y+_.y;if(D-G>f||G-D>f){if(c)break;continue}if(E-X>f||X-E>f){if(!c)break;continue}const Q=this.vN(k,$),Z=2*k.charge,et=2*$.charge;if(Q>1)m=Z*et/(Q*Q),p=m*(D-G)/Q,y=m*(E-X)/Q;else{let st=this.randomNumberGenerator;st===null&&(this.randomNumberGenerator=st=new m0(0));const ut=st.random(),mt=st.random();if(D>G)p=Math.abs($.bounds.right-k.bounds.x),p=Z*et*(1+p)*ut;else if(D<G)p=Math.abs($.bounds.x-k.bounds.right),p=-(Z*et)*(1+p)*ut;else{const at=Math.max($.width,k.width);p=Z*et*((1+at)*ut-at/2)}if(E>X)y=Math.abs($.bounds.bottom-k.bounds.y),y=Z*et*(1+y)*mt;else if(D<G)y=Math.abs($.bounds.y-k.bounds.bottom),y=-(Z*et)*(1+y)*mt;else{const at=Math.max($.height,k.height);y=Z*et*((1+at)*mt-at/2)}}k.forceX+=p,k.forceY+=y,$.forceX-=p,$.forceY-=y}}const w=t.edges.iterator;for(;w.next();){const C=w.value,k=C.fromVertex,N=C.toVertex,F=k.bounds,D=k.focus,E=F.x+D.x,U=F.y+D.y,$=N.bounds,K=N.focus,_=$.x+K.x,G=$.y+K.y,X=this.vN(k,N);X>1&&(m=.1*C.stiffness*(X-C.length),p=m*.5*(k.width+N.height)*(E-_)/X,y=m*.5*(k.width+N.height)*(U-G)/X),k.forceX-=p,k.forceY-=y,N.forceX+=p,N.forceY+=y}let b=0;for(let C=0;C<n.length;C++){const k=n[C];this.isFixed(k)?this.moveFixedVertex(k):b=Math.max(b,this.moveVertex(k)||0)}return b>this.epsilonDistance*this.epsilonDistance}XO(t,n,i,r){const a=this.Dh+i,l=Math.sqrt(r);this.Vy=this.Ja*t.vertexes.count;const u=t.vertexes.toArray();let c=0,f=0,m=0;for(;this.Dh<a;){this.Dh++,f=c,c=0;for(let p=0;p<u.length;p++){u[p].forceX=0,u[p].forceY=0;for(let w=0;w<u.length;w++){if(p===w)continue;const b=this.vN(u[p],u[w]),C=n[u[p].idInCluster][u[w].idInCluster],k=(b-this.Ja*l*C)/b;u[p].forceX+=k*(u[w].x-u[p].x),u[p].forceY+=k*(u[w].y-u[p].y)}const y=Math.sqrt(u[p].forceX*u[p].forceX+u[p].forceY*u[p].forceY);if(y>0){u[p].forceX=this.Vy*u[p].forceX/y,u[p].forceY=this.Vy*u[p].forceY/y,this.isFixed(u[p])||(u[p].x+=u[p].forceX,u[p].y+=u[p].forceY);const w=u[p].hierarchicalVertexes.iterator;for(;w.next();){const b=w.value;this.isFixed(b)||(b.centerX+=u[p].forceX,b.centerY+=u[p].forceY)}}c+=y*y}if(c>=f){if(m++,m>=5)break}else m=0;this.Vy*=.95}}moveVertex(t){let n=t.forceX,i=t.forceY;const r=this.moveLimit;return n<-r?n=-r:n>r&&(n=r),i<-r?i=-r:i>r&&(i=r),t.centerX+=n,t.centerY+=i,n*n+i*i}shouldInteract(t,n){return!0}moveFixedVertex(t){}commitLayout(){this.zy(),this.commitNodes(),this.isRouting&&this.commitLinks()}zy(){if(!this.setsPortSpots)return;const t=this.network.edges.iterator;for(;t.next();){const n=t.value.link;n!==null&&(n.fromSpot=z.Default,n.toSpot=z.Default)}}commitNodes(){let t=0,n=0;if(this.arrangesToOrigin){const a=I.l();this.Nw(this.network,a);const l=this.arrangementOrigin;t=l.x-a.x,n=l.y-a.y,I.s(a)}const i=I.l(),r=this.network.vertexes.iterator;for(;r.next();){const a=r.value;(t!==0||n!==0)&&(i.a(a.bounds),i.x+=t,i.y+=n,a.bounds=i),a.commit()}I.s(i)}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}springStiffness(t){const n=t.stiffness;return isNaN(n)?this.Xf:n}springLength(t){const n=t.length;return isNaN(n)?this.Kf:n}electricalCharge(t){const n=t.charge;return isNaN(n)?this.Yf:n}electricalFieldX(t,n){return 0}electricalFieldY(t,n){return 0}gravitationalMass(t){const n=t.mass;return isNaN(n)?this.Gf:n}gravitationalFieldX(t,n){return 0}gravitationalFieldY(t,n){return 0}isFixed(t){return t.isFixed}get currentIteration(){return this.Dh}get arrangementSpacing(){return this.ks}set arrangementSpacing(t){this.ks.equals(t)||(this.ks.a(t),this.invalidateLayout())}get arrangesToOrigin(){return this.bg}set arrangesToOrigin(t){this.bg!==t&&(this.bg=t,this.invalidateLayout())}get setsPortSpots(){return this.Fn}set setsPortSpots(t){this.Fn!==t&&(this.Fn=t,this.invalidateLayout())}get comments(){return this.Re}set comments(t){this.Re!==t&&(this.Re=t,this.invalidateLayout())}get maxPrelayoutIterations(){return this.kg}set maxPrelayoutIterations(t){this.kg!==t&&t>=0&&(this.kg=t,this.invalidateLayout())}get maxIterations(){return this.Pg}set maxIterations(t){this.Pg!==t&&t>=0&&(this.Pg=t,this.invalidateLayout())}get epsilonDistance(){return this.Sg}set epsilonDistance(t){this.Sg!==t&&t>0&&(this.Sg=t,this.invalidateLayout())}get infinityDistance(){return this.zf}set infinityDistance(t){this.zf!==t&&t>1&&(this.zf=t,this.invalidateLayout())}get moveLimit(){return this.Mg}set moveLimit(t){this.Mg!==t&&(this.Mg=t,this.invalidateLayout())}get randomNumberGenerator(){return this.Ng}set randomNumberGenerator(t){this.Ng!==t&&(t!==null&&typeof t.random!="function"&&o.o('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Ng=t)}get defaultSpringStiffness(){return this.Xf}set defaultSpringStiffness(t){this.Xf!==t&&(this.Xf=t,this.invalidateLayout())}get defaultSpringLength(){return this.Kf}set defaultSpringLength(t){this.Kf!==t&&(this.Kf=t,this.invalidateLayout())}get defaultElectricalCharge(){return this.Yf}set defaultElectricalCharge(t){this.Yf!==t&&(this.Yf=t,this.invalidateLayout())}get defaultGravitationalMass(){return this.Gf}set defaultGravitationalMass(t){this.Gf!==t&&(this.Gf=t,this.invalidateLayout())}get defaultCommentSpringLength(){return this.Cg}set defaultCommentSpringLength(t){this.Cg!==t&&(this.Cg=t,this.invalidateLayout())}get defaultCommentElectricalCharge(){return this.Lg}set defaultCommentElectricalCharge(t){this.Lg!==t&&(this.Lg=t,this.invalidateLayout())}get prelayoutQuality(){return this.jf}set prelayoutQuality(t){this.jf!==t&&(this.jf=t,this.invalidateLayout())}get prelayoutSpread(){return this.Ja}set prelayoutSpread(t){this.Ja!==t&&(this.Ja=t,this.invalidateLayout())}}class d0 extends kr{constructor(e){super(e)}createVertex(){return new f0(this)}createEdge(){return new g0(this)}}class f0 extends Pr{constructor(t){super(t);v(this,"K1");v(this,"Y1");v(this,"G1");v(this,"j1");v(this,"H1");v(this,"hierarchicalVertexes");v(this,"idInCluster");this.K1=!1,this.Y1=NaN,this.G1=NaN,this.j1=0,this.H1=0,this.hierarchicalVertexes=new M,this.idInCluster=-1}get isFixed(){return this.K1}set isFixed(t){this.K1!==t&&(this.K1=t)}get charge(){return this.Y1}set charge(t){this.Y1!==t&&(this.Y1=t)}get mass(){return this.G1}set mass(t){this.G1!==t&&(this.G1=t)}get forceX(){return this.j1}set forceX(t){this.j1!==t&&(this.j1=t)}get forceY(){return this.H1}set forceY(t){this.H1!==t&&(this.H1=t)}}class g0 extends Io{constructor(t){super(t);v(this,"q1");v(this,"W1");this.q1=NaN,this.W1=NaN}get stiffness(){return this.q1}set stiffness(t){this.q1!==t&&(this.q1=t)}get length(){return this.W1}set length(t){this.W1!==t&&(this.W1=t)}}class m0{constructor(e){v(this,"I");v(this,"R");v(this,"Q");v(this,"M");v(this,"A");v(this,"seed");e===void 0&&(e=42),this.seed=e,this.A=48271,this.M=2147483647,this.Q=this.M/this.A,this.R=this.M%this.A,this.I=1/this.M,this.random()}random(){const e=this.seed/this.Q,t=this.seed%this.Q,n=this.A*t-this.R*e;return n>0?this.seed=n:this.seed=n+this.M,this.seed*this.I}}var yd=(A=>(A[A.DepthFirst=0]="DepthFirst",A[A.Greedy=1]="Greedy",A[A.FromLayers=2]="FromLayers",A))(yd||{}),vd=(A=>(A[A.OptimalLinkLength=10]="OptimalLinkLength",A[A.LongestPathSink=11]="LongestPathSink",A[A.LongestPathSource=12]="LongestPathSource",A))(vd||{}),xd=(A=>(A[A.DepthFirstOut=20]="DepthFirstOut",A[A.DepthFirstIn=21]="DepthFirstIn",A[A.Naive=22]="Naive",A))(xd||{}),bd=(A=>(A[A.None=30]="None",A[A.Less=31]="Less",A[A.More=32]="More",A))(bd||{}),p0=(A=>(A[A.None=0]="None",A[A.Expand=1]="Expand",A[A.Straighten=2]="Straighten",A[A.Median=4]="Median",A[A.MaybeExpand=8]="MaybeExpand",A[A.All=15]="All",A))(p0||{}),y0=(A=>(A[A.None=0]="None",A[A.UpperLeft=1]="UpperLeft",A[A.UpperRight=2]="UpperRight",A[A.LowerLeft=4]="LowerLeft",A[A.LowerRight=8]="LowerRight",A[A.All=15]="All",A))(y0||{});class hn extends Yn{constructor(t){super();v(this,"Ps");v(this,"Ji");v(this,"S");v(this,"Hf");v(this,"qf");v(this,"Wf");v(this,"$a");v(this,"Jf");v(this,"nr");v(this,"$f");v(this,"Fn");v(this,"St");v(this,"Xy");v(this,"Kt");v(this,"Ag");v(this,"Ss");v(this,"ui");v(this,"Qs");v(this,"Ms");v(this,"Ns");v(this,"Ut");v(this,"Tg");v(this,"Za");v(this,"Dg");v(this,"_s");v(this,"Zf");v(this,"or");v(this,"Rn");v(this,"vn");v(this,"ON");this.Ps=25,this.Ji=25,this.S=0,this.Hf=0,this.qf=10,this.Wf=20,this.$a=4,this.Jf=31,this.nr=15,this.$f=10,this.Fn=!0,this.St=-1,this.Xy=-1,this.Kt=-1,this.Ag=0,this.Ss=0,this.ui=null,this.Qs=null,this.Ms=null,this.Ns=null,this.Ut=null,this.Tg=0,this.Za=null,this.Dg=null,this._s=0,this.Zf=null,this.or=new T,this.Rn=[],this.Rn.length=100,this.vn=15,this.ON=0,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Ps=this.Ps,t.Ji=this.Ji,t.S=this.S,t.Hf=this.Hf,t.qf=this.qf,t.Wf=this.Wf,t.$a=this.$a,t.Jf=this.Jf,t.nr=this.nr,t.$f=this.$f,t.Fn=this.Fn,t.vn=this.vn}ri(t){t in bd?this.aggressiveOption=t:t in yd?this.cycleRemoveOption=t:t in xd?this.initializeOption=t:t in vd?this.layeringOption=t:super.ri(t)}createNetwork(){return new v0(this)}doLayout(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.YO(),this.network.vertexes.count>0&&(this.network.deleteSelfEdges(),this.cycleRemoveOption!==2&&this.removeCycles(),this.GO(),this.cycleRemoveOption===2&&this.removeCycles(),this.jO(),this.HO(),this.qO(),this.reduceCrossings(),this.straightenAndPack(),this.updateParts()),this.network=null,this.isValidLayout=!0}linkMinLength(t){return 1}linkLengthWeight(t){return 1}linkStraightenWeight(t){const n=t.fromVertex.node||t.fromVertex.data,i=t.toVertex.node||t.toVertex.data;return n===null&&i===null?8:n===null||i===null?4:1}nodeMinLayerSpace(t,n){return t.node===null&&t.data===null?0:this.S===90||this.S===270?n?t.focus.y+10:t.bounds.height-t.focus.y+10:n?t.focus.x+10:t.bounds.width-t.focus.x+10}nodeMinColumnSpace(t,n){if(t.node===null&&t.data===null)return 0;const i=n?t.J1:t.$1;if(i!==null)return i;const r=this.S;return r===90||r===270?n?t.J1=t.focus.x/this.Ji+1|0:t.$1=(t.bounds.width-t.focus.x)/this.Ji+1|0:n?t.J1=t.focus.y/this.Ji+1|0:t.$1=(t.bounds.height-t.focus.y)/this.Ji+1|0}$i(){this.Za===null&&(this.Za=[]);let t=0;const n=this.network.vertexes.iterator;for(;n.next();){const i=n.value;this.Za[t]=i.layer,t++,this.Za[t]=i.column,t++,this.Za[t]=i.index,t++}return this.Za}Ze(t){let n=0;const i=this.network.vertexes.iterator;for(;i.next();){const r=i.value;r.layer=t[n],n++,r.column=t[n],n++,r.index=t[n],n++}}JT(t,n){const i=this.Fh(t),r=this.ui[t];(this.Dg===null||this.Dg.length<r*r)&&(this.Dg=[]);const a=this.Dg;for(let l=0;l<r;l++){let u=0;const c=i[l],f=c.near;let m=0;f!==null&&f!==c&&f.layer===c.layer&&(u+=Math.max(0,Math.abs(f.index-c.index)-1));let p,y=0,w,b=0,C=0,k=0,N,F=0,D,E=0,U=0,$=0,K;if(n>=0){for(p=i[l].po,y=0;y<p.length;y++)if(w=p[y],w.valid&&w.fromVertex.layer!==t)for(b=w.fromVertex.index,C=w.portToPos,k=w.portFromPos,F=y+1;F<p.length;F++)D=p[F],D.valid&&D.fromVertex.layer!==t&&(E=D.fromVertex.index,U=D.portToPos,$=D.portFromPos,C<U&&(b>E||b===E&&k>$)&&u++,U<C&&(E>b||E===b&&$>k)&&u++)}if(n<=0){for(p=i[l].ir,y=0;y<p.length;y++)if(w=p[y],w.valid&&w.toVertex.layer!==t)for(b=w.toVertex.index,C=w.portToPos,k=w.portFromPos,F=y+1;F<p.length;F++)D=p[F],D.valid&&D.toVertex.layer!==t&&(E=D.toVertex.index,U=D.portToPos,$=D.portFromPos,k<$&&(b>E||b===E&&C>U)&&u++,$<k&&(E>b||E===b&&U>C)&&u++)}for(a[l*r+l]=u,m=l+1;m<r;m++){let _=0,G=0;if(n>=0){for(N=i[l].po,K=i[m].po,y=0;y<N.length;y++)if(w=N[y],w.valid&&w.fromVertex.layer!==t)for(b=w.fromVertex.index,C=w.portToPos,k=w.portFromPos,F=0;F<K.length;F++)D=K[F],D.valid&&D.fromVertex.layer!==t&&(E=D.fromVertex.index,U=D.portToPos,$=D.portFromPos,(b<E||b===E&&k<$)&&G++,(E<b||E===b&&$<k)&&_++)}if(n<=0){for(N=i[l].ir,K=i[m].ir,y=0;y<N.length;y++)if(w=N[y],w.valid&&w.toVertex.layer!==t)for(b=w.toVertex.index,C=w.portToPos,k=w.portFromPos,F=0;F<K.length;F++)D=K[F],D.valid&&D.toVertex.layer!==t&&(E=D.toVertex.index,U=D.portToPos,$=D.portFromPos,(b<E||b===E&&C<U)&&G++,(E<b||E===b&&U<C)&&_++)}a[l*r+m]=_,a[m*r+l]=G}}return this.Rh(t,i),a}countCrossings(){let t=0;for(let n=0;n<=this.St;n++){const i=this.JT(n,1),r=this.ui[n];for(let a=0;a<r;a++)for(let l=a;l<r;l++)t+=i[a*r+l]}return t}WO(t,n,i){const r=this.Fh(t),a=this.ui[t];let l=0;for(let u=0;u<a;u++){let c=null;n<=0&&(c=r[u].po);let f=null;n>=0&&(f=r[u].ir);let m,p=0,y=0;if(c!==null)for(let w=0;w<c.length;w++)m=c[w],m.valid&&m.fromVertex.layer!==t&&(p=m.fromVertex.column+m.portFromColOffset,y=m.toVertex.column+m.portToColOffset,i?l+=Math.abs(p-y)*this.linkStraightenWeight(m):l+=Math.abs(p-y));if(f!==null)for(let w=0;w<f.length;w++)m=f[w],m.valid&&m.toVertex.layer!==t&&(p=m.fromVertex.column+m.portFromColOffset,y=m.toVertex.column+m.portToColOffset,i?l+=(Math.abs(p-y)+1)*this.linkStraightenWeight(m):l+=Math.abs(p-y))}return this.Rh(t,r),l}Z1(t){let n=0;for(let i=0;i<=this.St;i++)n+=this.WO(i,1,t);return n}Ky(){let t=1/0;this.Kt=-1;const n=this.network.vertexes.iterator;for(;n.next();){const i=n.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Kt=Math.max(this.Kt,i.column+this.nodeMinColumnSpace(i,!1))}for(n.reset();n.next();){const i=n.value;i.column-=t}this.Kt-=t}Yy(t,n){const i=this.Fh(t),r=this.ui[t],a=[];for(let l=0;l<r;l++){const u=i[l];let c=null;n<=0&&(c=u.po);let f=null;n>=0&&(f=u.ir);let m=0,p=0;const y=u.near;y!==null&&y.layer===u.layer&&(m+=y.column-1,p++);let w;if(c!==null)for(let b=0;b<c.length;b++){w=c[b];const C=w.fromVertex;w.valid&&!w.rev&&C.layer!==t&&(m+=C.column,p++)}if(f!==null)for(let b=0;b<f.length;b++){w=f[b];const C=w.toVertex;w.valid&&!w.rev&&C.layer!==t&&(m+=C.column,p++)}p===0?a[l]=-1:a[l]=m/p}return this.Rh(t,i),a}$T(t,n){const i=this.Fh(t),r=this.ui[t],a=[];for(let l=0;l<r;l++){const u=i[l];let c=null;n<=0&&(c=u.po);let f=null;n>=0&&(f=u.ir);let m=0;const p=[],y=u.near;y!==null&&y.layer===u.layer&&(p[m]=y.column-1,m++);let w;if(c!==null)for(let b=0;b<c.length;b++){w=c[b];const C=w.fromVertex;w.valid&&!w.rev&&C.layer!==t&&(p[m]=C.column+w.portFromColOffset,m++)}if(f!==null)for(let b=0;b<f.length;b++){w=f[b];const C=w.toVertex;w.valid&&!w.rev&&C.layer!==t&&(p[m]=C.column+w.portToColOffset,m++)}if(m===0)a[l]=-1;else{p.sort((C,k)=>C-k);const b=m>>1;m&1?a[l]=p[b]:a[l]=p[b-1]+p[b]>>1}}return this.Rh(t,i),a}Gy(t,n,i,r,a){if(t.component===i){t.component=n;let l=0,u=0;if(r){const c=t.destinationEdges;for(;c.next();){const f=c.value,m=f.toVertex;l=t.layer-m.layer,u=this.linkMinLength(f),l===u&&this.Gy(m,n,i,r,a)}}if(a){const c=t.sourceEdges;for(;c.next();){const f=c.value,m=f.fromVertex;l=m.layer-t.layer,u=this.linkMinLength(f),l===u&&this.Gy(m,n,i,r,a)}}}}IN(t,n,i,r,a){if(t.component===i){if(t.component=n,r){const l=t.destinationEdges;for(;l.next();){const u=l.value.toVertex;this.IN(u,n,i,r,a)}}if(a){const l=t.sourceEdges;for(;l.next();){const u=l.value.fromVertex;this.IN(u,n,i,r,a)}}}}removeCycles(){const t=this.network.edges.iterator;for(;t.next();){const n=t.value;n.rev=!1}switch(this.Hf){default:case 1:this.JO();break;case 0:this.$O();break;case 2:this.ZO();break}}ZO(){const t=this.network,n=t.vertexes.iterator;let i=1/0;for(;n.next();){const r=n.value;i=Math.min(i,r.layer)}if(i<1/0){if(i<0)for(n.reset();n.next();){const u=n.value;u.layer-=i}const r=[];for(n.reset();n.next();){const u=n.value,c=r[u.layer];c===void 0?r[u.layer]=[u]:c.push(u)}let a=0;for(let u=0;u<r.length;u++){const c=r[u];if(!c||c.length===0)a++;else if(u>0)for(let f=0;f<c.length;f++){const m=c[f];m.layer-=a}}const l=t.edges.iterator;for(;l.next();){const u=l.value,c=u.fromVertex,f=u.toVertex;c.layer<f.layer&&(t.reverseEdge(u),u.rev=!0)}}}JO(){const t=this.network;let n=0,i=t.vertexes.count-1;const r=[];r.length=i+1;const a=t.vertexes.iterator;for(;a.next();){const u=a.value;u.Zi=!0}for(;this.QO(t)!==null;){let u;for(u=this.ZT(t);u!==null;)r[i]=u,i--,u.Zi=!1,u=this.ZT(t);for(u=this.QT(t);u!==null;)r[n]=u,n++,u.Zi=!1,u=this.QT(t);u=this._O(t),u!==null&&(r[n]=u,n++,u.Zi=!1)}for(let u=0;u<t.vertexes.count;u++)r[u].index=u;const l=t.edges.iterator;for(;l.next();){const u=l.value,c=u.fromVertex,f=u.toVertex;c.index>f.index&&(t.reverseEdge(u),u.rev=!0)}}QO(t){const n=t.vertexes.iterator;for(;n.next();){const i=n.value;if(i.Zi)return i}return null}ZT(t){const n=t.vertexes.iterator;for(;n.next();){const i=n.value;if(i.Zi){let r=!0;const a=i.destinationEdges;for(;a.next();)if(a.value.toVertex.Zi){r=!1;break}if(r)return i}}return null}QT(t){const n=t.vertexes.iterator;for(;n.next();){const i=n.value;if(i.Zi){let r=!0;const a=i.sourceEdges;for(;a.next();)if(a.value.fromVertex.Zi){r=!1;break}if(r)return i}}return null}_O(t){let n=null,i=0;const r=this.network.vertexes.iterator;for(;r.next();){const a=r.value;if(a.Zi){let l=0;const u=a.destinationEdges;for(;u.next();)u.value.toVertex.Zi&&l++;let c=0;const f=a.sourceEdges;for(;f.next();)f.value.fromVertex.Zi&&c++;(n===null||i<l-c)&&(n=a,i=l-c)}}return n}$O(){const t=this.network.vertexes.iterator;for(;t.next();){const i=t.value;i.Qf=-1,i.jn=-1}const n=this.network.edges.iterator;for(;n.next();){const i=n.value;i.forest=!1}for(this.Tg=0,t.reset();t.next();){const i=t.value;i.sourceEdges.count===0&&this.EN(i)}for(t.reset();t.next();){const i=t.value;i.Qf===-1&&this.EN(i)}for(n.reset();n.next();){const i=n.value;if(!i.forest){const r=i.fromVertex,a=r.Qf,l=r.jn,u=i.toVertex,c=u.Qf,f=u.jn;c<a&&l<f&&(this.network.reverseEdge(i),i.rev=!0)}}}EN(t){t.Qf=this.Tg,this.Tg++;const n=t.destinationEdges;for(;n.next();){const i=n.value,r=i.toVertex;r.Qf===-1&&(i.forest=!0,this.EN(r))}t.jn=this.Tg,this.Tg++}GO(){const t=this.network.vertexes.iterator;for(;t.next();){const n=t.value;n.layer=-1}for(this.St=-1,this.assignLayers(),t.reset();t.next();){const n=t.value;this.St=Math.max(this.St,n.layer)}}assignLayers(){switch(this.qf){case 11:this._T();break;case 12:this.tI();break;default:case 10:this.iI();break}}_T(){const t=this.network.vertexes.iterator;for(;t.next();){const n=t.value,i=this.tD(n);this.St=Math.max(i,this.St)}}tD(t){let n=0;if(t.layer===-1){const i=t.destinationEdges;for(;i.next();){const r=i.value,a=r.toVertex,l=this.linkMinLength(r);n=Math.max(n,this.tD(a)+l)}t.layer=n}else n=t.layer;return n}tI(){let t=0;const n=this.network.vertexes.iterator;for(;n.next();){const i=n.value;t=this.iD(i),this.St=Math.max(t,this.St)}for(n.reset();n.next();){const i=n.value;i.layer=this.St-i.layer}}iD(t){let n=0;if(t.layer===-1){const i=t.sourceEdges;for(;i.next();){const r=i.value,a=r.fromVertex,l=this.linkMinLength(r);n=Math.max(n,this.iD(a)+l)}t.layer=n}else n=t.layer;return n}iI(){this._T();const t=this.network.vertexes.iterator;for(;t.next();){const i=t.value;i.Zi=!1}for(t.reset();t.next();){const i=t.value;i.sourceEdges.count===0&&this.eD(i)}let n=1/0;for(t.reset();t.next();){const i=t.value;n=Math.min(n,i.layer)}for(this.St=-1,t.reset();t.next();){const i=t.value;i.layer-=n,this.St=Math.max(this.St,i.layer)}}eD(t){if(!t.Zi){t.Zi=!0;const n=t.destinationEdges;for(;n.next();){const i=n.value.toVertex;this.eD(i)}this.eI(t),this.sI(t)}}eI(t){const n=this.network.vertexes.iterator;for(;n.next();){const u=n.value;u.component=-1}const i=0,r=1,a=t.po;let l=a.length;for(let u=0;u<l;u++){const c=a[u],f=c.fromVertex,m=c.toVertex,p=this.linkMinLength(c);f.layer-m.layer>p&&this.Gy(f,i,-1,!0,!1)}for(this.Gy(t,r,-1,!0,!0);t.component!==i;){let u=0,c=1/0,f=0,m=null;const p=this.network.vertexes.iterator;for(;p.next();){const y=p.value;if(y.component===r){let w=0,b=!1;const C=y.po;l=C.length;for(let N=0;N<l;N++){const F=C[N],D=F.fromVertex;if(w+=this.linkLengthWeight(F),D.component!==r){u+=this.linkLengthWeight(F);const E=D.layer-y.layer,U=this.linkMinLength(F);c=Math.min(c,E-U)}}const k=y.ir;l=k.length;for(let N=0;N<l;N++){const F=k[N],D=F.toVertex;w-=this.linkLengthWeight(F),D.component!==r?u-=this.linkLengthWeight(F):b=!0}(m===null||w<f)&&!b&&(m=y,f=w)}}if(u>0){for(n.reset();n.next();){const y=n.value;y.component===r&&(y.layer+=c)}t.component=i}else m.component=i}}sI(t){const n=this.network.vertexes.iterator;for(;n.next();){const a=n.value;a.component=-1}const i=0,r=1;for(this.Gy(t,r,-1,!0,!1);t.component!==i;){let a=0,l=1/0,u=0,c=null;const f=this.network.vertexes.iterator;for(;f.next();){const m=f.value;if(m.component===r){let p=0,y=!1;const w=m.po;let b=w.length;for(let k=0;k<b;k++){const N=w[k],F=N.fromVertex;p+=this.linkLengthWeight(N),F.component!==r?a+=this.linkLengthWeight(N):y=!0}const C=m.ir;b=C.length;for(let k=0;k<b;k++){const N=C[k],F=N.toVertex;if(p-=this.linkLengthWeight(N),F.component!==r){a-=this.linkLengthWeight(N);const D=m.layer-F.layer,E=this.linkMinLength(N);l=Math.min(l,D-E)}}(c===null||p>u)&&!y&&(c=m,u=p)}}if(a<0){for(n.reset();n.next();){const m=n.value;m.component===r&&(m.layer-=l)}t.component=i}else c.component=i}}jO(){const t=this.network,n=[],i=t.edges.iterator;for(;i.next();){const r=i.value;r.valid=!1,n.push(r)}for(let r=0;r<n.length;r++){const a=n[r];let l=a.fromVertex;const u=a.toVertex;if(a.valid||(l.node===null&&l.data===null||u.node===null&&u.data===null)&&l.layer===u.layer)continue;let c=0,f=0,m=0,p=0;if(a.link!==null){const $=a.link;if($===null)continue;const K=l.node,_=u.node;if(K===null||_===null)continue;let G=$.fromNode,X=$.toNode,Q=$.fromPort;for(;Q!==null&&!Q.isVisibleObject();)Q=Q.panel;let Z=$.toPort;for(;Z!==null&&!Z.isVisibleObject();)Z=Z.panel;if(a.rev){const Nt=G,qt=Q;G=X,Q=Z,X=Nt,Z=qt}const et=l.focus,st=u.focus,ut=a.rev?u.bounds:l.bounds,mt=T.l();K!==G?ut.isReal()&&G.isVisible()?G.actualBounds.isReal()?(G.getRelativePoint(Q,z.Center,mt),mt.x+=G.actualBounds.x-ut.x,mt.y+=G.actualBounds.y-ut.y):(G.getRelativePoint(Q,z.Center,mt),mt.isReal()||mt.a(et)):mt.a(et):ut.isReal()?(G.getRelativePoint(Q,z.Center,mt),mt.isReal()||mt.a(et)):mt.a(et);const at=a.rev?l.bounds:u.bounds,vt=T.l();_!==X?at.isReal()&&X.isVisible()?X.actualBounds.isReal()?(X.getRelativePoint(Z,z.Center,vt),vt.x+=X.actualBounds.x-at.x,vt.y+=X.actualBounds.y-at.y):(X.getRelativePoint(Z,z.Center,vt),vt.isReal()||vt.a(st)):vt.a(st):at.isReal()?(X.getRelativePoint(Z,z.Center,vt),vt.isReal()||vt.a(st)):vt.a(st),this.S===90||this.S===270?(c=Math.round((mt.x-et.x)/this.Ji),m=mt.x,f=Math.round((vt.x-st.x)/this.Ji),p=vt.x):(c=Math.round((mt.y-et.y)/this.Ji),m=mt.y,f=Math.round((vt.y-st.y)/this.Ji),p=vt.y),T.s(mt),T.s(vt),a.portFromColOffset=c,a.portFromPos=m,a.portToColOffset=f,a.portToPos=p}else a.portFromColOffset=0,a.portFromPos=0,a.portToColOffset=0,a.portToPos=0;let y=l.layer;const w=u.layer,b=this.nI(a),C=b===1||b===3,k=b===2||b===3;let N,F,D=null,E;k&&(D=this.oI(l,u),E=1,F=t.createVertex(),F.node=null,F.Q1=1,F.layer=y,F.near=l,t.addVertex(F),N=t.linkVertexes(l,F,a.link),N.valid=!1,N.rev=a.rev,N.portFromColOffset=c,N.portToColOffset=0,N.portFromPos=m,N.portToPos=0,l=F);let U=1;if(C&&U--,y-w>U&&y>0){for(a.valid=!1,F=t.createVertex(),F.node=null,F.Q1=2,F.layer=y-1,D&&E<D.length&&F.layer===D[E].layer&&(F.near=D[E++]),t.addVertex(F),N=t.linkVertexes(l,F,a.link),N.valid=!0,N.rev=a.rev,N.portFromColOffset=k?0:c,N.portToColOffset=0,N.portFromPos=k?0:m,N.portToPos=0,l=F,y--;y-w>U&&y>0;)F=t.createVertex(),F.node=null,F.Q1=3,F.layer=y-1,D&&E<D.length&&F.layer===D[E].layer&&(F.near=D[E++]),t.addVertex(F),N=t.linkVertexes(l,F,a.link),N.valid=!0,N.rev=a.rev,N.portFromColOffset=0,N.portToColOffset=0,N.portFromPos=0,N.portToPos=0,l=F,y--;N=t.linkVertexes(F,u,a.link),N.valid=!C,C&&(F.near=u),N.rev=a.rev,N.portFromColOffset=0,N.portToColOffset=f,N.portFromPos=0,N.portToPos=p}else a.valid=!0}}nI(t){let n=0;const i=t.link;if(i!==null){const r=i.fromPort,a=i.toPort;if(r!==null&&a!==null){const l=i.fromNode,u=i.toNode;if(l!==null&&u!==null){const c=this._1(!0),f=this._1(!1),m=this.setsPortSpots?c:i.computeSpot(!0,r),p=this.setsPortSpots?f:i.computeSpot(!1,a),y=i.isOrthogonal;if(m.isSide()&&m.includesSide(f)&&p.isSide()&&p.includesSide(c))return 0;const w=i.getLinkPoint(l,r,m,!0,y,u,a,T.l()),b=i.getLinkDirection(l,r,w,m,!0,y,u,a);T.s(w),(!m.isNone()&&b===this.sD(t,!0)||this.setsPortSpots&&l!==null&&l.ports.count===1&&t.rev)&&(n+=1);const C=i.getLinkPoint(u,a,p,!1,y,l,r,T.l()),k=i.getLinkDirection(u,a,C,p,!1,y,l,r);T.s(C),(!p.isNone()&&k===this.sD(t,!1)||this.setsPortSpots&&u!==null&&u.ports.count===1&&t.rev)&&(n+=2)}}}return n}sD(t,n){return this.S===90?n&&!t.rev||!n&&t.rev?270:90:this.S===180?n&&!t.rev||!n&&t.rev?0:180:this.S===270?n&&!t.rev||!n&&t.rev?90:270:n&&!t.rev||!n&&t.rev?180:0}oI(t,n){const i=[];return i.push(n),this.nD(t,i)?i.reverse():[]}nD(t,n){const i=n[n.length-1].sourceEdges.iterator;for(;i.next();){const r=i.value;if(r.rev||!r.valid)continue;const a=r.fromVertex;if(n.push(a),a===t||this.nD(t,n))return!0;n.pop()}return!1}HO(){const t=this.ui=[];for(let i=0;i<=this.St;i++)t[i]=0;const n=this.network.vertexes.iterator;for(;n.next();){const i=n.value;i.index=-1}this.initializeIndices(),this.Xy=-1,this.Ag=0,this.Ss=0;for(let i=0;i<=this.St;i++)t[i]>t[this.Ss]&&(this.Xy=t[i]-1,this.Ss=i),t[i]<t[this.Ag]&&(this.Ag=i);this.Zf=[];for(let i=0;i<t.length;i++)this.Zf[i]=[];for(n.reset();n.next();){const i=n.value,r=i.layer,a=this.Zf[r];a[i.index]=i}}initializeIndices(){switch(this.Wf){default:case 22:this.rI();break;case 20:this.lI();break;case 21:this.hI();break}}rI(){let t=null;const n=this.network.vertexes.iterator;for(;n.next();){const i=n.value;if(i.near&&(t===null&&(t=new Map),i.layer===i.near.layer)){const r=t.get(i.near)||[];r.push(i),t.set(i.near,r)}}for(n.reset();n.next();){const i=n.value;if(i.near)continue;const r=i.layer;if(i.index=this.ui[r],this.ui[r]++,!t)continue;const a=t.get(i);Array.isArray(a)&&a.forEach(l=>{l.index=this.ui[r],this.ui[r]++})}}lI(){let t=null;const n=this.network.vertexes.iterator;for(;n.next();){const i=n.value;if(i.near&&(t===null&&(t=new Map),i.layer===i.near.layer)){const r=t.get(i.near)||[];r.push(i),t.set(i.near,r)}}for(let i=this.St;i>=0;i--)for(n.reset();n.next();){const r=n.value;r.layer===i&&r.index===-1&&this.oD(r,t)}}oD(t,n){if(t.near)return;const i=t.layer;if(t.index=this.ui[i],this.ui[i]++,n){const l=n.get(t);Array.isArray(l)&&l.forEach(u=>{u.index=this.ui[i],this.ui[i]++})}const r=t.ir;let a=!0;for(;a;){a=!1;for(let l=0;l<r.length-1;l++){const u=r[l],c=r[l+1];u.portFromColOffset>c.portFromColOffset&&(a=!0,r[l]=c,r[l+1]=u)}}for(let l=0;l<r.length;l++){const u=r[l];if(u.valid){const c=u.toVertex;c.index===-1&&this.oD(c,n)}}}hI(){let t=null;const n=this.network.vertexes.iterator;for(;n.next();){const i=n.value;if(i.near&&(t===null&&(t=new Map),i.layer===i.near.layer)){const r=t.get(i.near)||[];r.push(i),t.set(i.near,r)}}for(let i=0;i<=this.St;i++)for(n.reset();n.next();){const r=n.value;r.layer===i&&r.index===-1&&this.rD(r,t)}}rD(t,n){if(t.near)return;const i=t.layer;if(t.index=this.ui[i],this.ui[i]++,n){const f=n.get(t);Array.isArray(f)&&f.forEach(m=>{m.index=this.ui[i],this.ui[i]++})}const r=t.po;let a=!0,l=0;for(;a;)for(a=!1,l=0;l<r.length-1;l++){const f=r[l],m=r[l+1];f.portToColOffset>m.portToColOffset&&(a=!0,r[l]=m,r[l+1]=f)}let u,c;for(l=0;l<r.length;l++)c=r[l],c.valid&&(u=c.fromVertex,u.index===-1&&this.rD(u,n))}qO(){this.Kt=-1;for(let t=0;t<=this.St;t++){const n=this.Fh(t);let i=0;const r=this.ui[t];for(let a=0;a<r;a++){const l=n[a];i+=this.nodeMinColumnSpace(l,!0),l.column=i,i+=1,i+=this.nodeMinColumnSpace(l,!1)}this.Kt=Math.max(this.Kt,i-1),this.Rh(t,n)}}reduceCrossings(){let t=this.countCrossings(),n=this.$i(),i=0,r=0,a=0;for(i=0;i<this.$a;i++){for(r=0;r<=this.St;r++)this.tk(r,1),this.ls(r,1,!1,1);for(a=this.countCrossings(),a<t&&(t=a,n=this.$i()),r=this.St;r>=0;r--)this.tk(r,-1),this.ls(r,-1,!1,-1);a=this.countCrossings(),a<t&&(t=a,n=this.$i())}for(this.Ze(n),i=0;i<this.$a;i++){for(r=0;r<=this.St;r++)this.tk(r,0),this.ls(r,0,!1,0);for(a=this.countCrossings(),a<t&&(t=a,n=this.$i()),r=this.St;r>=0;r--)this.tk(r,0),this.ls(r,0,!1,0);a=this.countCrossings(),a<t&&(t=a,n=this.$i())}this.Ze(n);let l=!1,u=0,c=0,f=0,m=0;switch(this.Jf){case 30:break;case 32:for(f=t+1;(m=this.countCrossings())<f;)for(f=m,u=this.St;u>=0;u--)for(c=0;c<=u;c++){for(l=!0;l;)for(l=!1,r=u;r>=c;r--)l=this.ls(r,-1,!1,-1)||l;for(a=this.countCrossings(),a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=u;r>=c;r--)l=this.ls(r,1,!1,1)||l;for(a=this.countCrossings(),a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=c;r<=u;r++)l=this.ls(r,1,!1,1)||l;for(a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=c;r<=u;r++)l=this.ls(r,-1,!1,-1)||l;for(a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=u;r>=c;r--)l=this.ls(r,0,!1,0)||l;for(a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=c;r<=u;r++)l=this.ls(r,0,!1,0)||l;a>=t?this.Ze(n):(t=a,n=this.$i())}break;default:case 31:for(u=this.St,c=0,f=t+1;(m=this.countCrossings())<f;){for(f=m,l=!0;l;)for(l=!1,r=u;r>=c;r--)l=this.ls(r,-1,!1,-1)||l;for(a=this.countCrossings(),a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=u;r>=c;r--)l=this.ls(r,1,!1,1)||l;for(a=this.countCrossings(),a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=c;r<=u;r++)l=this.ls(r,1,!1,1)||l;for(a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=c;r<=u;r++)l=this.ls(r,-1,!1,-1)||l;for(a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=u;r>=c;r--)l=this.ls(r,0,!1,0)||l;for(a>=t?this.Ze(n):(t=a,n=this.$i()),l=!0;l;)for(l=!1,r=c;r<=u;r++)l=this.ls(r,0,!1,0)||l;a>=t?this.Ze(n):(t=a,n=this.$i())}break}this.Ze(n)}tk(t,n){let i=0,r=!1;const a=this.Fh(t),l=this.ui[t],u=this.$T(t,n),c=this.Yy(t,n);for(i=0;i<l;i++)c[i]===-1&&(c[i]=a[i].column),u[i]===-1&&(u[i]=a[i].column);let f=!0,m;for(;f;)for(f=!1,i=0;i<l-1;i++)if(u[i+1]<u[i]||u[i+1]===u[i]&&c[i+1]<c[i]){r=!0,f=!0;const y=u[i];u[i]=u[i+1],u[i+1]=y;const w=c[i];c[i]=c[i+1],c[i+1]=w,m=a[i],a[i]=a[i+1],a[i+1]=m}let p=0;for(i=0;i<l;i++)m=a[i],m.index=i,p+=this.nodeMinColumnSpace(m,!0),m.column=p,p+=1,p+=this.nodeMinColumnSpace(m,!1);return this.Rh(t,a),r}ls(t,n,i,r){const a=this.Fh(t),l=this.ui[t],u=this.JT(t,n);let c=0,f;if(!i||r>0)for(f=[],c=0;c<l;c++)f[c]=-1;else f=this.Yy(t,-1);let m;if(!i||r<0)for(m=[],c=0;c<l;c++)m[c]=-1;else m=this.Yy(t,1);let p=!1,y=!0;for(;y;)for(y=!1,c=0;c<l-1;c++){const w=u[a[c].index*l+a[c+1].index],b=u[a[c+1].index*l+a[c].index];let C=0,k=0;const N=a[c].column,F=a[c+1].column,D=this.nodeMinColumnSpace(a[c],!0),E=this.nodeMinColumnSpace(a[c],!1),U=this.nodeMinColumnSpace(a[c+1],!0),$=this.nodeMinColumnSpace(a[c+1],!1),K=N-D+U,_=F-E+$;let G=0,X=0,Q=0,Z=0,et=0,st=0,ut=0,mt,at=0,vt,Nt=0;const qt=a[c].sourceEdges.iterator;if(i&&r<=0)for(;qt.next();){const re=qt.value;mt=re.fromVertex,re.valid&&mt.layer!==t&&(Q=this.linkStraightenWeight(re),Z=re.portFromColOffset,et=re.portToColOffset,st=mt.column,G+=(Math.abs(N+et-(st+Z))+1)*Q,X+=(Math.abs(_+et-(st+Z))+1)*Q)}for(qt.reset();qt.next();){const re=qt.value;if(mt=re.fromVertex,re.valid&&mt.layer===t){for(at=0;at<a.length&&a[at]!==mt;)at++;at<c&&(C+=2*(c-at),k+=2*(c+1-at)),at===c+1&&(C+=1),at>c+1&&(C+=4*(at-c),k+=4*(at-(c+1)))}}const Tt=a[c].destinationEdges.iterator;if(i&&r>=0)for(;Tt.next();){const re=Tt.value;vt=re.toVertex,re.valid&&vt.layer!==t&&(Q=this.linkStraightenWeight(re),Z=re.portFromColOffset,et=re.portToColOffset,ut=vt.column,G+=(Math.abs(N+Z-(ut+et))+1)*Q,X+=(Math.abs(_+Z-(ut+et))+1)*Q)}for(Tt.reset();Tt.next();){const re=Tt.value;if(vt=re.toVertex,re.valid&&vt.layer===t){for(Nt=0;Nt<a.length&&a[Nt]!==vt;)Nt++;Nt===c+1&&(k+=1)}}const Ft=a[c+1].sourceEdges.iterator;if(i&&r<=0)for(;Ft.next();){const re=Ft.value;mt=re.fromVertex,re.valid&&mt.layer!==t&&(Q=this.linkStraightenWeight(re),Z=re.portFromColOffset,et=re.portToColOffset,st=mt.column,G+=(Math.abs(F+et-(st+Z))+1)*Q,X+=(Math.abs(K+et-(st+Z))+1)*Q)}for(Ft.reset();Ft.next();){const re=Ft.value;if(mt=re.fromVertex,re.valid&&mt.layer===t){for(at=0;at<a.length&&a[at]!==mt;)at++;at<c&&(C+=2*(c+1-at),k+=2*(c-at)),at===c&&(k+=1),at>c+1&&(C+=4*(at-(c+1)),k+=4*(at-c))}}const Ot=a[c+1].destinationEdges.iterator;if(i&&r>=0)for(;Ot.next();){const re=Ot.value;vt=re.toVertex,re.valid&&vt.layer!==t&&(Q=this.linkStraightenWeight(re),Z=re.portFromColOffset,et=re.portToColOffset,ut=vt.column,G+=(Math.abs(F+Z-(ut+et))+1)*Q,X+=(Math.abs(K+Z-(ut+et))+1)*Q)}for(Ot.reset();Ot.next();){const re=Ot.value;if(vt=re.toVertex,re.valid&&vt.layer===t){for(Nt=0;Nt<a.length&&a[Nt]!==vt;)Nt++;Nt===c&&(C+=1)}}let Rt=0,ne=0;const te=f[a[c].index],At=m[a[c].index],Xt=f[a[c+1].index],Be=m[a[c+1].index];if(te!==-1&&(Rt+=Math.abs(te-N),ne+=Math.abs(te-_)),At!==-1&&(Rt+=Math.abs(At-N),ne+=Math.abs(At-_)),Xt!==-1&&(Rt+=Math.abs(Xt-F),ne+=Math.abs(Xt-K)),Be!==-1&&(Rt+=Math.abs(Be-F),ne+=Math.abs(Be-K)),k<C-.5||k===C&&b<w-.5||k===C&&b===w&&X<G-.5||k===C&&b===w&&X===G&&ne<Rt-.5){p=!0,y=!0,a[c].column=_,a[c+1].column=K;const re=a[c];a[c]=a[c+1],a[c+1]=re}}for(c=0;c<l;c++)a[c].index=c;return this.Rh(t,a),p}straightenAndPack(){if(this.vn!==0){this.aI();return}let t=0,n=!1,i=(this.nr&1)!==0;const r=(this.nr&8)!==0;if(this.network.edges.count>1e3&&r&&(i=!1),i){const a=[];let l=0;for(l=0;l<=this.St;l++)a[l]=0;let u=0;const c=this.network.vertexes.iterator;for(;c.next();){const m=c.value;t=m.layer,u=m.column;const p=this.nodeMinColumnSpace(m,!1);a[t]=Math.max(a[t],u+p)}const f=8;for(c.reset();c.next();){const m=c.value;t=m.layer,u=m.column,m.column=((this.Kt-a[t])*f>>1)+u*f}this.Kt*=f}if(this.nr&2){n=!0;let a=0;for(;n&&a<this.$f;){for(n=!1,t=this.Ss+1;t<=this.St;t++)n=this.Fg(t,1)||n;for(t=this.Ss-1;t>=0;t--)n=this.Fg(t,-1)||n;n=this.Fg(this.Ss,0)||n,a++}}if(this.nr&4){for(t=this.Ss+1;t<=this.St;t++)this.BN(t,1);for(t=this.Ss-1;t>=0;t--)this.BN(t,-1);this.BN(this.Ss,0)}if(i&&(this.lD(-1),this.lD(1)),this.nr&2){n=!0;let a=0;for(;n&&a<this.$f;){for(n=!1,n=this.Fg(this.Ss,0)||n,t=this.Ss+1;t<=this.St;t++)n=this.Fg(t,0)||n;for(t=this.Ss-1;t>=0;t--)n=this.Fg(t,0)||n;a++}}}Fg(t,n){let i=!1;for(;this.cI(t,n);)i=!0;return i}cI(t,n){let i=0;const r=this.Fh(t),a=this.ui[t],l=this.Yy(t,-1);if(n>0)for(i=0;i<a;i++)l[i]=-1;const u=this.Yy(t,1);if(n<0)for(i=0;i<a;i++)u[i]=-1;let c=!1,f=!0;for(;f;)for(f=!1,i=0;i<a;i++){const m=r[i].column,p=this.nodeMinColumnSpace(r[i],!0),y=this.nodeMinColumnSpace(r[i],!1);let w=0;i-1<0||m-r[i-1].column-1>p+this.nodeMinColumnSpace(r[i-1],!1)?w=m-1:w=m;let b=0;i+1>=a||r[i+1].column-m-1>y+this.nodeMinColumnSpace(r[i+1],!0)?b=m+1:b=m;let C=0,k=0,N=0,F=0,D=0,E=0;if(n<=0){const X=r[i].sourceEdges.iterator;for(;X.next();){const Q=X.value,Z=Q.fromVertex;if(Q.valid&&Z.layer!==t){F=this.linkStraightenWeight(Q),D=Q.portFromColOffset,E=Q.portToColOffset;const et=Z.column;C+=(Math.abs(m+E-(et+D))+1)*F,k+=(Math.abs(w+E-(et+D))+1)*F,N+=(Math.abs(b+E-(et+D))+1)*F}}}if(n>=0){const X=r[i].destinationEdges.iterator;for(;X.next();){const Q=X.value,Z=Q.toVertex;if(Q.valid&&Z.layer!==t){F=this.linkStraightenWeight(Q),D=Q.portFromColOffset,E=Q.portToColOffset;const et=Z.column;C+=(Math.abs(m+D-(et+E))+1)*F,k+=(Math.abs(w+D-(et+E))+1)*F,N+=(Math.abs(b+D-(et+E))+1)*F}}}let U=0,$=0,K=0;const _=l[r[i].index],G=u[r[i].index];_!==-1&&(U+=Math.abs(_-m),$+=Math.abs(_-w),K+=Math.abs(_-b)),G!==-1&&(U+=Math.abs(G-m),$+=Math.abs(G-w),K+=Math.abs(G-b)),k<C||k===C&&$<U?(c=!0,f=!0,r[i].column=w):(N<C||N===C&&K<U)&&(c=!0,f=!0,r[i].column=b)}return this.Rh(t,r),this.Ky(),c}BN(t,n){let i=0;const r=this.Fh(t),a=this.ui[t],l=this.$T(t,n),u=[];for(i=0;i<a;i++)u[i]=l[i];let c=!1,f=!0;for(;f;)for(f=!1,i=0;i<a;i++){const m=r[i].column,p=this.nodeMinColumnSpace(r[i],!0),y=this.nodeMinColumnSpace(r[i],!1);let w=0,b=0,C=0,k=0,N=0;u[i]===-1?i===0&&i===a-1?w=m:i===0?(b=r[i+1].column,b-m===y+this.nodeMinColumnSpace(r[i+1],!0)?w=m-1:w=m):i===a-1?(C=r[i-1].column,m-C===p+this.nodeMinColumnSpace(r[i-1],!1)?w=m+1:w=m):(C=r[i-1].column,N=C+this.nodeMinColumnSpace(r[i-1],!1)+p+1,b=r[i+1].column,k=b-this.nodeMinColumnSpace(r[i+1],!0)-y-1,w=(N+k)/2|0):i===0&&i===a-1?w=u[i]:i===0?(b=r[i+1].column,k=b-this.nodeMinColumnSpace(r[i+1],!0)-y-1,w=Math.min(u[i],k)):i===a-1?(C=r[i-1].column,N=C+this.nodeMinColumnSpace(r[i-1],!1)+p+1,w=Math.max(u[i],N)):(C=r[i-1].column,N=C+this.nodeMinColumnSpace(r[i-1],!1)+p+1,b=r[i+1].column,k=b-this.nodeMinColumnSpace(r[i+1],!0)-y-1,N<u[i]&&u[i]<k?w=u[i]:N>=u[i]?w=N:k<=u[i]&&(w=k)),w!==m&&(c=!0,f=!0,r[i].column=w)}return this.Rh(t,r),this.Ky(),c}fI(){for(let t=0;t<=this.Kt;t++)for(;this.uI(t,1););this.Ky()}uI(t,n){let i=!0;const r=this.network.vertexes.iterator;for(;r.next();){const l=r.value,u=this.nodeMinColumnSpace(l,!0),c=this.nodeMinColumnSpace(l,!1);if(l.column-u<=t&&l.column+c>=t){i=!1;break}}let a=!1;if(i){if(n>0)for(r.reset();r.next();){const l=r.value;l.column>t&&(l.column-=1,a=!0)}if(n<0)for(r.reset();r.next();){const l=r.value;l.column<t&&(l.column+=1,a=!0)}}return a}dI(){this.fI();for(let t=0;t<this.Kt;t++)for(;this.gI(t,1););this.Ky()}gI(t,n){let i=t;n>0&&(i=t+1),n<0&&(i=t-1);let r=0;const a=[],l=[];for(r=0;r<=this.St;r++)a[r]=!1,l[r]=!1;const u=this.network.vertexes.iterator;for(;u.next();){const m=u.value,p=m.column-this.nodeMinColumnSpace(m,!0),y=m.column+this.nodeMinColumnSpace(m,!1);p<=t&&y>=t&&(a[m.layer]=!0),p<=i&&y>=i&&(l[m.layer]=!0)}let c=!0,f=!1;for(r=0;r<=this.St;r++)c=c&&!(a[r]&&l[r]);if(c){if(n>0)for(u.reset();u.next();){const m=u.value;m.column>t&&(m.column-=1,f=!0)}if(n<0)for(u.reset();u.next();){const m=u.value;m.column<t&&(m.column+=1,f=!0)}}return f}lD(t){this.dI();let n=0,i,r=0,a=0,l=0;if(t>0)for(n=0;n<=this.Kt;n++)for(i=this.$i(),r=this.Z1(!0),a=r+1;r<a;)a=r,this.hD(n,1),l=this.Z1(!0),l>r?this.Ze(i):l<r&&(r=l,i=this.$i());if(t<0)for(n=this.Kt;n>=0;n--)for(i=this.$i(),r=this.Z1(!0),a=r+1;r<a;)a=r,this.hD(n,-1),l=this.Z1(!0),l>r?this.Ze(i):l<r&&(r=l,i=this.$i());this.Ky()}hD(t,n){this._s=0;const i=this.network.vertexes.iterator;for(;i.next();){const p=i.value;p.component=-1}if(n>0)for(i.reset();i.next();){const p=i.value;p.column-this.nodeMinColumnSpace(p,!0)<=t&&(p.component=this._s)}if(n<0)for(i.reset();i.next();){const p=i.value;p.column+this.nodeMinColumnSpace(p,!1)>=t&&(p.component=this._s)}for(this._s++,i.reset();i.next();){const p=i.value;p.component===-1&&(this.IN(p,this._s,-1,!0,!0),this._s++)}let r=0;const a=[];for(r=0;r<this._s*this._s;r++)a[r]=!1;const l=[];for(r=0;r<(this.St+1)*(this.Kt+1);r++)l[r]=-1;for(i.reset();i.next();){const p=i.value,y=p.layer,w=Math.max(0,p.column-this.nodeMinColumnSpace(p,!0)),b=Math.min(this.Kt,p.column+this.nodeMinColumnSpace(p,!1));for(let C=w;C<=b;C++)l[y*(this.Kt+1)+C]=p.component}for(let p=0;p<=this.St;p++){if(n>0)for(let y=0;y<this.Kt;y++)l[p*(this.Kt+1)+y]!==-1&&l[p*(this.Kt+1)+y+1]!==-1&&l[p*(this.Kt+1)+y]!==l[p*(this.Kt+1)+y+1]&&(a[l[p*(this.Kt+1)+y]*this._s+l[p*(this.Kt+1)+y+1]]=!0);if(n<0)for(let y=this.Kt;y>0;y--)l[p*(this.Kt+1)+y]!==-1&&l[p*(this.Kt+1)+y-1]!==-1&&l[p*(this.Kt+1)+y]!==l[p*(this.Kt+1)+y-1]&&(a[l[p*(this.Kt+1)+y]*this._s+l[p*(this.Kt+1)+y-1]]=!0)}const u=[];for(r=0;r<this._s;r++)u[r]=!0;const c=[];c.push(0);let f=0;for(;c.length!==0;)if(f=c[c.length-1],c.pop(),u[f])for(u[f]=!1,r=0;r<this._s;r++)a[f*this._s+r]&&c.splice(0,0,r);let m=!1;if(n>0)for(i.reset();i.next();){const p=i.value;u[p.component]&&(p.column-=1,m=!0)}if(n<0)for(i.reset();i.next();){const p=i.value;u[p.component]&&(p.column+=1,m=!0)}return m}aI(){const t=o.nt(),n=this.Zf.length;for(let w=0;w<=n;w++)t[w]=[];const i=this.network.vertexes.iterator;for(;i.next();){const w=i.value,b=n-w.layer,C=t[b];C[w.index]=w}const r=new L;this.mI(t,r);let a=null,l=null,u=null,c=null;const f=(this.vn&1)!==0,m=(this.vn&2)!==0,p=(this.vn&4)!==0,y=(this.vn&8)!==0;f&&(this.el(t,r,!0),a=this.ik(t,!0,!1)),t.reverse(),p&&(this.el(t,r,!1),u=this.ik(t,!1,!1));for(const w of t)w.reverse();y&&(this.el(t,r,!1),c=this.ik(t,!1,!0)),t.reverse(),m&&(this.el(t,r,!0),l=this.ik(t,!0,!0)),o.tt(t),this.pI(a,l,u,c),this.network.vertexes.each(w=>{const b=w,C=o.nt();f&&C.push(a.get(b)),m&&C.push(l.get(b)),p&&C.push(u.get(b)),y&&C.push(c.get(b)),C.sort((E,U)=>E-U);const k=C.length,N=Math.floor((k-1)/2),F=Math.ceil((k-1)/2),D=(C[N]+C[F])/2;o.tt(C),b.he=D})}mI(t,n){const i=t.length;for(let r=1;r<i-1;r++){let a=0,l=0;const u=t[r],c=t[r+1];for(let f=0;l<c.length;f++){const m=c[f],p=this.yI(m);if(f===c.length-1||p){let y=u.length-1;for(p&&(y=m.getProperSourceVertexes()[0].index);l<=f;){const w=c[l].getProperSourceEdges();for(const b of w){const C=b.fromVertex.index;(C<a||C>y)&&n.add(b)}l++}a=y}}}}yI(t){if(t.node===null){const n=t.getProperSourceVertexes();if(n.length>0)return n[0].node===null}return!1}el(t,n,i){this.wI(t);for(const r of t){let a=-1;for(const l of r){const u=i?l.getProperSourceVertexes():l.getProperDestinationVertexes(),c=u.length;if(c>0){u.sort((m,p)=>m.vh-p.vh);const f=(c-1)/2;for(let m=Math.floor(f),p=Math.ceil(f);m<=p;m++)if(l.On===l){const y=u[m];let w;i?w=y.getDestinationEdge(l):w=l.getDestinationEdge(y),!n.has(w)&&a<y.vh&&(y.On=l,l.Qa=y.Qa,l.On=y.Qa,a=y.vh)}}}}}wI(t){for(let n=0;n<t.length;n++){const i=t[n];for(let r=0;r<i.length;r++){const a=i[r];a.Qa=a,a.On=a,a.aD=n,a.vh=r}}}ik(t,n,i){const r=this.S===90||this.S===270;for(const l of t)for(const u of l)u.Qe=u,u._f=1/0,u.he=NaN,u.In=0;this.xI(t,n,i);for(const l of t)for(const u of l)u.Qa===u&&this.cD(u,t);for(let l=0;l<t.length;l++){if(t[l].length<=0)continue;const u=t[l][0];if(u.Qe===u){u.Qe._f===1/0&&(u.Qe._f=0);let c=l,f=0,m;do{for(m=t[c][f];m.On!==m.Qa;)if(m=m.On,c++,m.vh>0){const p=this.fD(m,t),y=r?p.width:p.height,w=m.Qe._f+m.he+m.In-(p.he+p.In+y+this.columnSpacing);p.Qe._f=Math.min(p.Qe._f,w)}f=m.vh+1}while(c<t.length&&f<t[c].length&&m.Qe===t[c][f].Qe)}}const a=new W;for(const l of t)for(const u of l){u.he=u.he+u.Qe._f+u.In;const c=r?u.width:u.height;a.set(u,i?-u.he-c:u.he)}return a}xI(t,n,i){const r=this.S===90||this.S===270;for(const a of t)for(const l of a)if(l.Qa===l){let u=0,c=l;for(;c.On!==l;){const f=c.On,m=r?c.width:c.height,p=r?f.width:f.height;let y,w,b,C;n?(b=c.getDestinationEdge(f),y=b.portFromPos,w=b.portToPos,b.link!==null&&(c.node&&c.node!==b.link.fromNode&&(y=r?c.focusX:c.focusY),f.node&&f.node!==b.link.toNode&&(w=r?f.focusX:f.focusY)),i?C=c.In+(m-y)-(p-w):C=c.In+y-w):(b=f.getDestinationEdge(c),y=b.portToPos,w=b.portFromPos,b.link!==null&&(c.node&&c.node!==b.link.toNode&&(y=r?c.focusX:c.focusY),f.node&&f.node!==b.link.fromNode&&(w=r?f.focusX:f.focusY)),i?C=c.In+(m-y)-(p-w):C=c.In+y-w),f.In=C,u=Math.min(u,C),c=c.On}c=l;do c.In=c.In-u,c=c.On;while(c!==l)}}cD(t,n){if(!isNaN(t.he))return;t.he=0;let i=t;do{if(i.vh>0){const r=this.fD(i,n),a=r.Qa;this.cD(a,n),t.Qe===t&&(t.Qe=a.Qe);const l=this.S===90||this.S===270?r.width:r.height;if(t.Qe===a.Qe){const u=a.he+r.In+l-i.In+this.columnSpacing;t.he=Math.max(t.he,u)}}i=i.On}while(i!==t);for(;i.On!==t;)i=i.On,i.he=t.he,i.Qe=t.Qe}fD(t,n){const i=t.aD,r=t.vh;return r<1&&o.o("Could not determine previous vertex in layer"),n[i][r-1]}pI(...t){let n=-1;const i=o.nt(),r=o.nt();let a=1/0;for(let l=0;l<4;l++){if(!t[l])continue;const u=this.bI(t[l],i,r,l);u<a&&(n=l,a=u)}for(let l=0;l<4;l++){const u=t[l];if(!u)continue;const c=l===0||l===2?i[n]-i[l]:r[n]-r[l];c!==0&&u.each(f=>{u.set(f.key,f.value+c)})}o.tt(i),o.tt(r)}bI(t,n,i,r){if(!t||t.count===0)return n[r]=0,i[r]=0,1/0;let a=1/0,l=-1/0;return t.each(u=>{const c=u.key,f=u.value,m=this.S===90||this.S===270?c.width:c.height;f<a&&(a=f),f+m>l&&(l=f+m)}),n[r]=a,i[r]=l,l-a}commitLayout(){this.zy(),this.commitNodes(),this.UN(),this.isRouting&&this.commitLinks()}zy(){if(!this.setsPortSpots)return;const t=this._1(!0),n=this._1(!1),i=this.network.edges.iterator;for(;i.next();){const r=i.value.link;r!==null&&(r.fromSpot=t,r.toSpot=n)}}_1(t){return this.S===270?t?z.MiddleTop:z.MiddleBottom:this.S===90?t?z.MiddleBottom:z.MiddleTop:this.S===180?t?z.MiddleLeft:z.MiddleRight:t?z.MiddleRight:z.MiddleLeft}commitNodes(){this.Qs=[],this.Ms=[],this.Ns=[],this.Ut=[];for(let b=0;b<=this.St;b++)this.Qs[b]=0,this.Ms[b]=0,this.Ns[b]=0,this.Ut[b]=0;const t=this.network.vertexes.iterator;for(;t.next();){const b=t.value,C=b.layer;this.Qs[C]=Math.max(this.Qs[C],this.nodeMinLayerSpace(b,!0)),this.Ms[C]=Math.max(this.Ms[C],this.nodeMinLayerSpace(b,!1))}let n=0;const i=this.Ps;for(let b=0;b<=this.St;b++){let C=i;this.Qs[b]+this.Ms[b]<=0&&(C=0),b>0&&(n+=C/2),this.S===90||this.S===0?(n+=this.Ms[b],this.Ns[b]=n,n+=this.Qs[b]):(n+=this.Qs[b],this.Ns[b]=n,n+=this.Ms[b]),b<this.St&&(n+=C/2),this.Ut[b]=n}const r=n,a=this.arrangementOrigin;for(let b=0;b<=this.St;b++)this.S===270?this.Ns[b]=a.y+this.Ns[b]:this.S===90?(this.Ns[b]=a.y+r-this.Ns[b],this.Ut[b]=r-this.Ut[b]):this.S===180?this.Ns[b]=a.x+this.Ns[b]:(this.Ns[b]=a.x+r-this.Ns[b],this.Ut[b]=r-this.Ut[b]);const l=this.vn!==0;t.reset();const u=this.S===270||this.S===90;let c=1/0,f=1/0,m=1/0,p=-1/0;for(;t.next();){const b=t.value,C=b.layer,k=b.column|0;let N=0,F=0;u?(N=a.x+this.Ji*k,F=this.Ns[C]):(N=this.Ns[C],F=a.y+this.Ji*k),b.centerX=N,b.centerY=F,l&&isFinite(b.he)&&(u?b.node?b.x=a.x+b.he:b.centerX=a.x+b.he:b.node?b.y=a.y+b.he:b.centerY=a.y+b.he),c=Math.min(b.x,c),f=Math.min(b.y,f),u?(m=c,p=Math.max(p,b.bounds.right)):(m=f,p=Math.max(p,b.bounds.bottom))}this.ON=p-m;const y=a.x-c,w=a.y-f;for(this.or=new T(l&&u?0:y,l&&!u?0:w),t.reset();t.next();){const b=t.value;b.x+=y,b.y+=w,b.commit()}}UN(){let t=0;const n=this.Ps;for(let a=0;a<=this.St;a++)t+=this.Qs[a],t+=this.Ms[a];t+=this.St*n;const i=[],r=this.vn!==0?this.ON:this.Ji*this.Kt;for(let a=this.maxLayer;a>=0;a--)this.S===270?a===0?i.push(new I(0,0,r,Math.abs(this.Ut[0]))):i.push(new I(0,this.Ut[a-1],r,Math.abs(this.Ut[a-1]-this.Ut[a]))):this.S===90?a===0?i.push(new I(0,this.Ut[0],r,Math.abs(this.Ut[0]-t))):i.push(new I(0,this.Ut[a],r,Math.abs(this.Ut[a-1]-this.Ut[a]))):this.S===180?a===0?i.push(new I(0,0,Math.abs(this.Ut[0]),r)):i.push(new I(this.Ut[a-1],0,Math.abs(this.Ut[a-1]-this.Ut[a]),r)):a===0?i.push(new I(this.Ut[0],0,Math.abs(this.Ut[0]-t),r)):i.push(new I(this.Ut[a],0,Math.abs(this.Ut[a-1]-this.Ut[a]),r));this.commitLayers(i,this.or)}commitLayers(t,n){}commitLinks(){const t=this.network.edges.iterator;let n;for(;t.next();)n=t.value.link,n!==null&&(n.startRoute(),n.clearPoints(),n.commitRoute());for(t.reset();t.next();)n=t.value.link,n!==null&&n.updateRoute();for(t.reset();t.next();){const i=t.value;if(n=i.link,n===null||n.pointsCount===0)continue;n.startRoute();const r=n;let a=r.fromNode,l=r.toNode,u=r.fromPort,c=r.toPort;if(a!==null){const Q=a.findVisibleNode();Q!==null&&Q!==a&&(a=Q,u=Q.port)}if(l!==null){const Q=l.findVisibleNode();Q!==null&&Q!==l&&(l=Q,c=Q.port)}const f=n.computeSpot(!0,u),m=n.computeSpot(!1,c);let p=i.fromVertex,y=i.toVertex;if(i.valid){if(n.curve===9&&n.pointsCount===4)if(p.column===y.column&&this.alignOption===0){const Q=n.getLinkPoint(a,u,f,!0,!1,l,c),Z=n.getLinkPoint(l,c,m,!1,!1,a,u);Q.isReal()||Q.set(a.actualBounds.center),Z.isReal()||Z.set(l.actualBounds.center),n.clearPoints(),n.addPointAt(Q.x,Q.y),n.addPointAt((2*Q.x+Z.x)/3,(2*Q.y+Z.y)/3),n.addPointAt((Q.x+2*Z.x)/3,(Q.y+2*Z.y)/3),n.addPointAt(Z.x,Z.y)}else{let Q=!1,Z=!1;if(u!==null&&f===z.None&&(Q=!0),c!==null&&m===z.None&&(Z=!0),Q||Z){let et=null;Q&&(et=n.getLinkPointFromPoint(a,u,u.getDocumentPoint(z.Center),n.getPoint(3),!0),et.isReal()||et.set(a.actualBounds.center),n.setPointAt(0,et.x,et.y));let st=null;if(Z&&(st=n.getLinkPointFromPoint(l,c,c.getDocumentPoint(z.Center),n.getPoint(0),!1),st.isReal()||st.set(l.actualBounds.center),n.setPointAt(3,st.x,st.y)),et){const ut=n.getPoint(2);n.setPointAt(1,(et.x*2+ut.x)/3,(et.y*2+ut.y)/3)}if(st){const ut=n.getPoint(1);n.setPointAt(2,(st.x*2+ut.x)/3,(st.y*2+ut.y)/3)}}}n.commitRoute();continue}if(p.layer===y.layer){n.commitRoute();continue}let w=!1,b=!1;const C=this.Ps;let k=0,N=n.firstPickIndex+1;if(n.isOrthogonal)b=!0,k=n.pointsCount,k>4&&n.points.removeRange(2,k-3);else if(n.curve===9)w=!0,k=n.pointsCount,k>4&&n.points.removeRange(2,k-3),k===4&&(N=2);else{k=n.pointsCount;const Q=f===z.None,Z=m===z.None;k>2&&Q&&Z?n.points.removeRange(1,k-2):k>3&&Q&&!Z?n.points.removeRange(1,k-3):k>3&&!Q&&Z?n.points.removeRange(2,k-2):k>4&&!Q&&!Z&&n.points.removeRange(2,k-3)}let F,D,E=0,U=0,$=0,K=0,_=0,G=0,X=0;if(i.rev){let Q=0;for(;y!==null&&p!==y;){F=null,D=null;const Z=y.sourceEdges.iterator;for(;Z.next();){const et=Z.value;if(et.link===i.link&&(F=et.fromVertex,D=et.toVertex,F.node===null))break}if(F===null)break;if(F!==p)if(E=n.getPoint(N-1).x,U=n.getPoint(N-1).y,$=F.centerX,K=F.centerY,b)this.S===180||this.S===0?N===n.firstPickIndex+1?(n.insertPointAt(N++,E,U),n.insertPointAt(N++,E,K)):(D!==null?D.centerY:U)!==K&&(_=this.Ut[F.layer-1]+this.or.x,n.insertPointAt(N++,_,U),n.insertPointAt(N++,_,K)):N===n.firstPickIndex+1?(n.insertPointAt(N++,E,U),n.insertPointAt(N++,$,U)):(D!==null?D.centerX:E)!==$&&(_=this.Ut[F.layer-1]+this.or.y,n.insertPointAt(N++,E,_),n.insertPointAt(N++,$,_));else if(N===n.firstPickIndex+1)if(G=Math.max(10,this.Qs[y.layer]),X=Math.max(10,this.Ms[y.layer]),w)this.S===180?$<=y.bounds.x?(Q=y.bounds.x,n.insertPointAt(N++,Q-G,K),n.insertPointAt(N++,Q,K),n.insertPointAt(N++,Q+X,K)):(n.insertPointAt(N++,$-G,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$+X,K)):this.S===90?K>=y.bounds.bottom?(Q=y.bounds.y+y.bounds.height,n.insertPointAt(N++,$,Q+X),n.insertPointAt(N++,$,Q),n.insertPointAt(N++,$,Q-G)):(n.insertPointAt(N++,$,K+X),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K-G)):this.S===270?K<=y.bounds.y?(Q=y.bounds.y,n.insertPointAt(N++,$,Q-G),n.insertPointAt(N++,$,Q),n.insertPointAt(N++,$,Q+X)):(n.insertPointAt(N++,$,K-G),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K+X)):this.S===0&&($>=y.bounds.right?(Q=y.bounds.x+y.bounds.width,n.insertPointAt(N++,Q+X,K),n.insertPointAt(N++,Q,K),n.insertPointAt(N++,Q-G,K)):(n.insertPointAt(N++,$+X,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$-G,K)));else{n.insertPointAt(N++,E,U);let et=0;this.S===180||this.S===0?((this.S===180?$>=y.bounds.right:$<=y.bounds.x)&&(et=(this.S===0?-G:X)/2),n.insertPointAt(N++,E+et,K)):((this.S===270?K>=y.bounds.bottom:K<=y.bounds.y)&&(et=(this.S===90?-G:X)/2),n.insertPointAt(N++,$,U+et)),n.insertPointAt(N++,$,K)}else G=Math.max(10,this.Qs[F.layer]),X=Math.max(10,this.Ms[F.layer]),w?this.S===180?(n.insertPointAt(N++,$-G-C,K),n.insertPointAt(N++,Math.min($-G+C/2,$),K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,Math.max($+X-C/2,$),K),n.insertPointAt(N++,$+X+C,K)):this.S===90?(n.insertPointAt(N++,$,K+X+C),n.insertPointAt(N++,$,Math.max(K+X-C/2,K)),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,Math.min(K-G+C/2,K)),n.insertPointAt(N++,$,K-G-C)):this.S===270?(n.insertPointAt(N++,$,K-G-C),n.insertPointAt(N++,$,Math.min(K-G+C/2,K)),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,Math.max(K+X-C/2,K)),n.insertPointAt(N++,$,K+X+C)):(n.insertPointAt(N++,$+X+C,K),n.insertPointAt(N++,Math.max($+X-C/2,$),K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,Math.min($-G+C/2,$),K),n.insertPointAt(N++,$-G-C,K)):(this.S===180||this.S===90||this.S,n.insertPointAt(N++,$,K));y=F}if(c===null||f!==z.None||b)if(E=n.getPoint(N-1).x,U=n.getPoint(N-1).y,$=n.getPoint(N).x,K=n.getPoint(N).y,b){const Z=this.Ms[p.layer];let et=0;this.S===180||this.S===0?(et=U,et>=p.bounds.y&&et<=p.bounds.bottom&&(this.S===180?$>=p.bounds.x:$<=p.bounds.right)&&(Q=p.centerX+(this.S===180?-Z:Z),et<p.bounds.y+p.bounds.height/2?et=p.bounds.y-this.Ji/2:et=p.bounds.bottom+this.Ji/2,n.insertPointAt(N++,Q,U),n.insertPointAt(N++,Q,et)),n.insertPointAt(N++,$,et),n.insertPointAt(N++,$,K)):(et=E,et>=p.bounds.x&&et<=p.bounds.right&&(this.S===270?K>=p.bounds.y:K<=p.bounds.bottom)&&(Q=p.centerY+(this.S===270?-Z:Z),et<p.bounds.x+p.bounds.width/2?et=p.bounds.x-this.Ji/2:et=p.bounds.right+this.Ji/2,n.insertPointAt(N++,E,Q),n.insertPointAt(N++,et,Q)),n.insertPointAt(N++,et,K),n.insertPointAt(N++,$,K))}else if(w)G=Math.max(10,this.Qs[p.layer]),X=Math.max(10,this.Ms[p.layer]),this.S===180&&$>=p.bounds.x?(Q=p.bounds.x+p.bounds.width,n.setPointAt(N-2,Q,U),n.setPointAt(N-1,Q+X,U)):this.S===90&&K<=p.bounds.bottom?(Q=p.bounds.y,n.setPointAt(N-2,E,Q),n.setPointAt(N-1,E,Q-G)):this.S===270&&K>=p.bounds.y?(Q=p.bounds.y+p.bounds.height,n.setPointAt(N-2,E,Q),n.setPointAt(N-1,E,Q+X)):this.S===0&&$<=p.bounds.right&&(Q=p.bounds.x,n.setPointAt(N-2,Q,U),n.setPointAt(N-1,Q-G,U));else{G=Math.max(10,this.Qs[p.layer]),X=Math.max(10,this.Ms[p.layer]);let Z=0;this.S===180||this.S===0?((this.S===180?$<=p.bounds.x:$>=p.bounds.right)&&(Z=(this.S===0?X:-G)/2),n.insertPointAt(N++,$+Z,U)):((this.S===270?K<=p.bounds.y:K>=p.bounds.bottom)&&(Z=(this.S===90?X:-G)/2),n.insertPointAt(N++,E,K+Z)),n.insertPointAt(N++,$,K)}}else{for(;p!==null&&p!==y;){F=null,D=null;const Q=p.destinationEdges.iterator;for(;Q.next();){const Z=Q.value;if(Z.link===i.link&&(F=Z.toVertex,D=Z.fromVertex,D.node!==null&&(D=null),F.node===null))break}if(F===null)break;F!==y&&(E=n.getPoint(N-1).x,U=n.getPoint(N-1).y,$=F.centerX,K=F.centerY,b?this.S===180||this.S===0?(D!==null?D.centerY:U)!==K&&(_=this.Ut[F.layer]+this.or.x,N===n.firstPickIndex+1&&(this.S===0?_=Math.max(_,E):_=Math.min(_,E)),n.insertPointAt(N++,_,U),n.insertPointAt(N++,_,K)):(D!==null?D.centerX:E)!==$&&(_=this.Ut[F.layer]+this.or.y,N===n.firstPickIndex+1&&(this.S===90?_=Math.max(_,U):_=Math.min(_,U)),n.insertPointAt(N++,E,_),n.insertPointAt(N++,$,_)):(G=Math.max(10,this.Qs[F.layer]),X=Math.max(10,this.Ms[F.layer]),w?this.S===180?(n.insertPointAt(N++,$+X+C,K),n.insertPointAt(N++,Math.max($+X-C/2,$),K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,Math.min($-G+C/2,$),K),n.insertPointAt(N++,$-G-C,K)):this.S===90?(n.insertPointAt(N++,$,K-G-C),n.insertPointAt(N++,$,Math.min(K-G+C/2,K)),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,Math.max(K+X-C/2,K)),n.insertPointAt(N++,$,K+X+C)):this.S===270?(n.insertPointAt(N++,$,K+X+C),n.insertPointAt(N++,$,Math.max(K+X-C/2,K)),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,Math.min(K-G+C/2,K)),n.insertPointAt(N++,$,K-G-C)):(n.insertPointAt(N++,$-G-C,K),n.insertPointAt(N++,Math.min($-G+C/2,$),K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,$,K),n.insertPointAt(N++,Math.max($+X-C/2,$),K),n.insertPointAt(N++,$+X+C,K)):this.S===180?(n.insertPointAt(N++,$+X,K),n.insertPointAt(N++,$-G,K)):this.S===90?(n.insertPointAt(N++,$,K-G),n.insertPointAt(N++,$,K+X)):this.S===270?(n.insertPointAt(N++,$,K+X),n.insertPointAt(N++,$,K-G)):(n.insertPointAt(N++,$-G,K),n.insertPointAt(N++,$+X,K)))),p=F}b&&(E=n.getPoint(N-1).x,U=n.getPoint(N-1).y,$=n.getPoint(N).x,K=n.getPoint(N).y,this.S===180||this.S===0?U!==K&&(this.S===0?_=Math.min(Math.max(($+E)/2,this.Ut[y.layer]+this.or.x),$):_=Math.max(Math.min(($+E)/2,this.Ut[y.layer]+this.or.x),$),n.insertPointAt(N++,_,U),n.insertPointAt(N++,_,K)):E!==$&&(this.S===90?_=Math.min(Math.max((K+U)/2,this.Ut[y.layer]+this.or.y),K):_=Math.max(Math.min((K+U)/2,this.Ut[y.layer]+this.or.y),K),n.insertPointAt(N++,E,_),n.insertPointAt(N++,$,_)))}if(r!==null&&w&&n.pointsCount>=4){if(u!==null){const Q=f===z.None?n.getLinkPointFromPoint(a,u,u.getDocumentPoint(z.Center),n.getPoint(3),!0):n.getPoint(0);if(f===z.None){const Z=n.getPoint(2),et=n.getPoint(3);this.direction===90||this.direction===270?(n.setPointAt(1,(Q.x+Z.x)/2,Z.y),n.setPointAt(2,et.x,(Z.y+et.y)/2)):(n.setPointAt(1,Z.x,(Q.y+Z.y)/2),n.setPointAt(2,(Z.x+et.x)/2,et.y))}Q.isReal()||Q.set(a.actualBounds.center),n.setPointAt(0,Q.x,Q.y)}if(c!==null){const Q=m===z.None?n.getLinkPointFromPoint(l,c,c.getDocumentPoint(z.Center),n.getPoint(n.pointsCount-4),!1):n.getPoint(n.pointsCount-1);if(m===z.None){const Z=n.getPoint(n.pointsCount-3),et=n.getPoint(n.pointsCount-4);this.direction===90||this.direction===270?(n.setPointAt(n.pointsCount-2,(Q.x+Z.x)/2,Z.y),n.setPointAt(n.pointsCount-2,et.x,(Z.y+et.y)/2)):(n.setPointAt(n.pointsCount-2,Z.x,(Q.y+Z.y)/2),n.setPointAt(n.pointsCount-3,(Z.x+et.x)/2,et.y))}Q.isReal()||Q.set(l.actualBounds.center),n.setPointAt(n.pointsCount-1,Q.x,Q.y)}}n.commitRoute(),i.commit()}}YO(){this.Xy=-1,this.Ag=0,this.Ss=0,this.Za=null,this.Dg=null,this.Zf=null;for(let t=0;t<this.Rn.length;t++)this.Rn[t]=null}Fh(t){let n;const i=this.ui[t];if(i>=this.Rn.length){const a=[];for(let l=0;l<this.Rn.length;l++)a[l]=this.Rn[l];this.Rn=a}this.Rn[i]===void 0||this.Rn[i]===null?n=[]:(n=this.Rn[i],this.Rn[i]=null);const r=this.Zf[t];for(let a=0;a<r.length;a++){const l=r[a];n[l.index]=l}return n}Rh(t,n){this.Rn[this.ui[t]]=n}get layerSpacing(){return this.Ps}set layerSpacing(t){this.Ps!==t&&t>=0&&(this.Ps=t,this.invalidateLayout())}get columnSpacing(){return this.Ji}set columnSpacing(t){this.Ji!==t&&t>0&&(this.Ji=t,this.invalidateLayout())}get direction(){return this.S}set direction(t){this.S!==t&&(t===0||t===90||t===180||t===270?(this.S=t,this.invalidateLayout()):o.o("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}get cycleRemoveOption(){return this.Hf}set cycleRemoveOption(t){this.Hf!==t&&(t===1||t===0||t===2)&&(this.Hf=t,this.invalidateLayout())}get layeringOption(){return this.qf}set layeringOption(t){this.qf!==t&&(t===10||t===11||t===12)&&(this.qf=t,this.invalidateLayout())}get initializeOption(){return this.Wf}set initializeOption(t){this.Wf!==t&&(t===20||t===21||t===22)&&(this.Wf=t,this.invalidateLayout())}get iterations(){return this.$a}set iterations(t){this.$a!==t&&t>=0&&(this.$a=t,this.invalidateLayout())}get aggressiveOption(){return this.Jf}set aggressiveOption(t){this.Jf!==t&&(t===30||t===31||t===32)&&(this.Jf=t,this.invalidateLayout())}get packOption(){return this.nr}set packOption(t){this.nr!==t&&t>=0&&t<8&&(this.nr=t,this.invalidateLayout())}get packIterations(){return this.$f}set packIterations(t){this.$f=t}get alignOption(){return this.vn}set alignOption(t){this.vn!==t&&t>=0&&t<16&&(this.vn=t,this.invalidateLayout())}get setsPortSpots(){return this.Fn}set setsPortSpots(t){this.Fn!==t&&(this.Fn=t,this.invalidateLayout())}get maxLayer(){return this.St}get maxIndex(){return this.Xy}get maxColumn(){return this.Kt}get minIndexLayer(){return this.Ag}get maxIndexLayer(){return this.Ss}}v(hn,"CycleDepthFirst",0),v(hn,"CycleGreedy",1),v(hn,"CycleFromLayers",2),v(hn,"LayerOptimalLinkLength",10),v(hn,"LayerLongestPathSink",11),v(hn,"LayerLongestPathSource",12),v(hn,"InitDepthFirstOut",20),v(hn,"InitDepthFirstIn",21),v(hn,"InitNaive",22),v(hn,"AggressiveNone",30),v(hn,"AggressiveLess",31),v(hn,"AggressiveMore",32),v(hn,"PackNone",0),v(hn,"PackExpand",1),v(hn,"PackStraighten",2),v(hn,"PackMedian",4),v(hn,"PackAll",15),v(hn,"AlignNone",0),v(hn,"AlignUpperLeft",1),v(hn,"AlignUpperRight",2),v(hn,"AlignLowerLeft",4),v(hn,"AlignLowerRight",8),v(hn,"AlignAll",15);class v0 extends kr{constructor(e){super(e)}createVertex(){return new Ha(this)}createEdge(){return new x0(this)}}class Ha extends Pr{constructor(t){super(t);v(this,"Wo");v(this,"Uo");v(this,"Dt");v(this,"ek");v(this,"sk");v(this,"Zi");v(this,"Qf");v(this,"jn");v(this,"Q1");v(this,"J1");v(this,"$1");v(this,"Qa");v(this,"On");v(this,"aD");v(this,"vh");v(this,"Qe");v(this,"_f");v(this,"he");v(this,"In");v(this,"jy",null);v(this,"Hy",null);v(this,"qy",null);v(this,"Wy",null);this.Wo=-1,this.Uo=-1,this.Dt=-1,this.ek=NaN,this.sk=null,this.Zi=!1,this.Qf=NaN,this.jn=NaN,this.Q1=0,this.J1=null,this.$1=null}static uD(t,n){return t.index-n.index}getProperSourceEdges(){if(!this.qy){const t=[];for(const n of this.po){const i=n;i.valid&&t.push(i)}this.qy=t}return this.qy}getProperDestinationEdges(){if(!this.Wy){const t=[];for(const n of this.ir){const i=n;i.valid&&t.push(i)}this.Wy=t}return this.Wy}getDestinationEdge(t){const n=this.getProperDestinationEdges();for(const i of n)if(i.toVertex===t)return i;o.o("Unable to find destination edge to given vertex")}getProperSourceVertexes(){if(!this.jy){const t=[];for(const n of this.po){const i=n;!i.valid||i.fromVertex.layer<=i.toVertex.layer||t.push(i.fromVertex)}t.sort(Ha.uD),this.jy=t}return this.jy}getProperDestinationVertexes(){if(!this.Hy){const t=[];for(const n of this.ir){const i=n;!i.valid||i.fromVertex.layer<=i.toVertex.layer||t.push(i.toVertex)}t.sort(Ha.uD),this.Hy=t}return this.Hy}addSourceEdge(t){super.addSourceEdge(t),this.jy=null,this.qy=null}deleteSourceEdge(t){super.deleteSourceEdge(t),this.jy=null,this.qy=null}addDestinationEdge(t){super.addDestinationEdge(t),this.Hy=null,this.Wy=null}deleteDestinationEdge(t){super.deleteDestinationEdge(t),this.Hy=null,this.Wy=null}get layer(){return this.Wo}set layer(t){this.Wo!==t&&(this.Wo=t)}get column(){return this.Uo}set column(t){this.Uo!==t&&(this.Uo=t)}get index(){return this.Dt}set index(t){this.Dt!==t&&(this.Dt=t)}get component(){return this.ek}set component(t){this.ek!==t&&(this.ek=t)}get near(){return this.sk}set near(t){this.sk!==t&&(this.sk=t)}}class x0 extends Io{constructor(t){super(t);v(this,"Zi");v(this,"nk");v(this,"ok");v(this,"rk");v(this,"lk");v(this,"hk");v(this,"ak");this.Zi=!1,this.nk=!1,this.ok=!1,this.rk=NaN,this.lk=NaN,this.hk=0,this.ak=0}get fromVertex(){return this.We}set fromVertex(t){this.We!==t&&(this.We=t)}get toVertex(){return this.Je}set toVertex(t){this.Je!==t&&(this.Je=t)}get valid(){return this.Zi}set valid(t){this.Zi!==t&&(this.Zi=t)}get rev(){return this.nk}set rev(t){this.nk!==t&&(this.nk=t)}get forest(){return this.ok}set forest(t){this.ok!==t&&(this.ok=t)}get portFromPos(){return this.rk}set portFromPos(t){this.rk!==t&&(this.rk=t)}get portToPos(){return this.lk}set portToPos(t){this.lk!==t&&(this.lk=t)}get portFromColOffset(){return this.hk}set portFromColOffset(t){this.hk!==t&&(this.hk=t)}get portToColOffset(){return this.ak}set portToColOffset(t){this.ak!==t&&(this.ak=t)}}var wd=(A=>(A[A.Default=0]="Default",A[A.Destination=1]="Destination",A[A.Source=2]="Source",A))(wd||{}),Sd=(A=>(A[A.Forwards=10]="Forwards",A[A.Reverse=11]="Reverse",A[A.Ascending=12]="Ascending",A[A.Descending=13]="Descending",A))(Sd||{}),Cd=(A=>(A[A.CenterSubtrees=20]="CenterSubtrees",A[A.CenterChildren=21]="CenterChildren",A[A.Start=22]="Start",A[A.End=23]="End",A[A.Bus=24]="Bus",A[A.BusBranching=25]="BusBranching",A[A.TopLeftBus=26]="TopLeftBus",A[A.BottomRightBus=27]="BottomRightBus",A[A.Custom=28]="Custom",A))(Cd||{}),kd=(A=>(A[A.None=30]="None",A[A.Block=31]="Block",A))(kd||{}),Pd=(A=>(A[A.Layered=40]="Layered",A[A.LastParents=41]="LastParents",A[A.Alternating=42]="Alternating",A[A.RootOnly=43]="RootOnly",A))(Pd||{}),Md=(A=>(A[A.Vertical=50]="Vertical",A[A.Horizontal=51]="Horizontal",A[A.FixedRoots=52]="FixedRoots",A))(Md||{}),b0=(A=>(A[A.Individual=60]="Individual",A[A.Siblings=61]="Siblings",A[A.Uniform=62]="Uniform",A))(b0||{});class Ge extends Yn{constructor(t){super();v(this,"Fi");v(this,"Ti");v(this,"tu");v(this,"Rg");v(this,"VN");v(this,"Re");v(this,"Xi");v(this,"ks");v(this,"V");v(this,"z");v(this,"ck");v(this,"hs");this.Fi=new L,this.Ti=0,this.hs=1,this.tu=40,this.Rg=60,this.VN=[],this.Re=!0,this.Xi=50,this.ks=new B(10,10).g();const n=new Nd(this);this.V=new is(n),this.z=new is(n),this.ck=[],t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Ti=this.Ti,t.tu=this.tu,t.Rg=this.Rg,t.Re=this.Re,t.Xi=this.Xi,t.ks.a(this.ks),t.V.copyInheritedPropertiesFrom(this.V),t.z.copyInheritedPropertiesFrom(this.z)}ri(t){t in Cd?this.alignment=t:t in Md?this.arrangement=t:t in kd?this.compaction=t:t in wd?this.path=t:t in Sd?this.sorting=t:t in Pd?this.treeStyle=t:super.ri(t)}createNetwork(){return new Nd(this)}makeNetwork(t){const n=this.createNetwork(),i=r=>{if(r instanceof It)return!r.isLinkLabel&&r.category!=="Comment";if(r instanceof Gt){const a=r.fromNode;if(a===null||a.isLinkLabel||a.category==="Comment")return!1;const l=r.toNode;return!(l===null||l.isLinkLabel||l.category==="Comment")}return!1};return t instanceof le?(n.addParts(t.nodes,!0,i),n.addParts(t.links,!0,i)):t instanceof Vt?n.addParts(t.memberParts,!1,i):n.addParts(t.iterator,!1,i),n}doLayout(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==52&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));let n=this.diagram;n===null&&t instanceof le&&(n=t),this.path===0&&n!==null?this.hs=n.isTreePathToChildren?1:2:this.hs=this.path===0?1:this.path,this.network.vertexes.count>0&&(this.CI(),this.LI(),this.AI(),this.TI(),this.RN(),this.DI(),this.arrangeTrees(),this.updateParts()),this.network=null,this.Fi=new L,this.isValidLayout=!0}CI(){this.network.deleteSelfEdges();const t=this.network.vertexes.iterator;for(;t.next();){const a=t.value;a.initialized=!1,a.level=0,a.parent=null,a.children=[]}if(this.Fi.count>0){const a=new L,l=this.Fi.iterator;for(;l.next();){const u=l.value;if(u instanceof It){const c=this.network.findVertex(u);c!==null&&a.add(c)}else u instanceof is&&a.add(u)}this.Fi=a}this.Fi.count===0&&this.findRoots();const n=this.Fi.copy().iterator;for(;n.next();){const a=n.value;a.initialized||(a.initialized=!0,this.zN(a))}let i=this.network.vertexes,r=null;for(;r=this.FI(i),r.count>0;){const a=this.dD(r);a!==null&&this.Fi.add(a),a.initialized=!0,this.zN(a),i=r}}FI(t){const n=new L,i=t.iterator;for(;i.next();){const r=i.value;r.initialized||n.add(r)}return n}findRoots(){const t=this.network.vertexes,n=t.iterator;for(;n.next();){const i=n.value;switch(this.hs){case 1:i.sourceEdges.count===0&&this.Fi.add(i);break;case 2:i.destinationEdges.count===0&&this.Fi.add(i);break;default:o.o("Unhandled path value "+this.hs.toString())}}if(this.Fi.count===0){const i=this.dD(t);i!==null&&this.Fi.add(i)}}dD(t){let n=999999,i=null;const r=t.iterator;for(;r.next();){const a=r.value;switch(this.hs){case 1:a.sourceEdges.count<n&&(n=a.sourceEdges.count,i=a);break;case 2:a.destinationEdges.count<n&&(n=a.destinationEdges.count,i=a);break;default:o.o("Unhandled path value "+this.hs.toString())}}return i}zN(t){if(t===null)return;switch(this.hs){case 1:if(t.destinationEdges.count>0){const r=new M,a=t.destinationVertexes;for(;a.next();){const l=a.value;this.gD(t,l)&&r.add(l)}r.count>0&&(t.children=r.toArray())}break;case 2:if(t.sourceEdges.count>0){const r=new M,a=t.sourceVertexes;for(;a.next();){const l=a.value;this.gD(t,l)&&r.add(l)}r.count>0&&(t.children=r.toArray())}break;default:o.o("Unhandled path value"+this.hs.toString())}const n=t.children,i=n.length;for(let r=0;r<i;r++){const a=n[r];a.initialized=!0,a.level=t.level+1,a.parent=t,this.Fi.delete(a)}for(let r=0;r<i;r++){const a=n[r];this.zN(a)}}gD(t,n){return n.initialized?this.RI(n,t)||n.level>t.level?!1:(this.vI(n.parent,n),!0):!0}RI(t,n){if(n===null)return!1;let i=n.parent;for(;i!==null&&i!==t;)i=i.parent;return i===t}vI(t,n){if(t===null||n===null)return;const i=t.children;let r=0;for(let a=0;a<i.length;a++)i[a]===n&&r++;if(r>0){const a=new Array(i.length-r);let l=0;for(let u=0;u<i.length;u++)i[u]!==n&&(a[l++]=i[u]);t.children=a}}LI(){const t=this.Fi.iterator;for(;t.next();){const n=t.value;n instanceof is&&this.mD(n)}}mD(t){if(t===null)return;this.initializeTreeVertexValues(t),t.alignment===25&&this.sortTreeVertexChildren(t);let n=0,i=t.childrenCount,r=0;const a=t.children,l=a.length;for(let u=0;u<l;u++){const c=a[u];this.mD(c),n+=c.descendantCount+1,i=Math.max(i,c.maxChildrenCount),r=Math.max(r,c.maxGenerationCount)}t.descendantCount=n,t.maxChildrenCount=i,t.maxGenerationCount=i>0?r+1:0}OI(t){switch(this.tu){default:case 40:return t.parent!==null?t.parent:this.V;case 43:return t.parent===null?this.V:t.parent.parent===null?this.z:t.parent;case 42:return t.parent!==null?t.parent.parent!==null?t.parent.parent:this.z:this.V;case 41:{let n=!0;if(t.childrenCount===0)n=!1;else{const i=t.children,r=i.length;for(let a=0;a<r;a++)if(i[a].childrenCount>0){n=!1;break}}return n&&t.parent!==null?this.z:t.parent!==null?t.parent:this.V}}}initializeTreeVertexValues(t){const n=this.OI(t);if(t.copyInheritedPropertiesFrom(n),t.parent!==null&&t.parent.alignment===25){let i=t.angle;const r=t.parent.children;let a=0;for(;a<r.length&&t!==r[a];)a++;a%2===0?a!==r.length-1&&(i===90?i=180:i===180?i=270:i===270?i=180:i=270):i===90?i=0:i===180?i=90:i===270?i=0:i=90,t.angle=i}t.initialized=!0}AI(){const t=this.Fi.iterator;for(;t.next();){const n=t.value;n instanceof is&&this.pD(n)}}pD(t){if(t===null)return;this.assignTreeVertexValues(t);const n=t.children,i=n.length;for(let r=0;r<i;r++){const a=n[r];this.pD(a)}}assignTreeVertexValues(t){}TI(){const t=this.Fi.iterator;for(;t.next();){const n=t.value;n instanceof is&&this.yD(n)}}yD(t){if(t===null)return;t.alignment!==25&&this.sortTreeVertexChildren(t);const n=t.children,i=n.length;for(let r=0;r<i;r++){const a=n[r];this.yD(a)}}sortTreeVertexChildren(t){switch(t.sorting){default:case 10:break;case 11:t.children.reverse();break;case 12:t.children.sort(t.comparer);break;case 13:t.children.sort(t.comparer),t.children.reverse();break}}RN(){if(!this.comments)return;const t=this.network.vertexes.iterator;for(;t.next();){const n=t.value;this.addComments(n)}}addComments(t){const n=t.angle,i=t.parent;let r=0,a=21,l=!1;i!==null&&(r=i.angle,a=i.alignment,l=this.isBusAlignment(a));const u=n===90||n===270,c=r===90||r===270,f=t.childrenCount===0;let m=0,p=0,y=0;const w=t.commentSpacing;if(t.node!==null){const b=t.node.findNodesConnected();for(;b.next();){const C=b.value;if(C.category!=="Comment"||!C.canLayout())continue;t.comments===null&&(t.comments=[]),t.comments.push(C),C.ensureBounds();const k=C.measuredBounds;u&&!f||!l&&!c&&f||l&&c&&f?(m=Math.max(m,k.width),p+=k.height+Math.abs(y)):(m+=k.width+Math.abs(y),p=Math.max(p,k.height)),y=w}}if(t.comments!==null){u&&!f||!l&&!c&&f||l&&c&&f?(m+=Math.abs(t.commentMargin),p=Math.max(0,p-t.height)):(p+=Math.abs(t.commentMargin),m=Math.max(0,m-t.width));const b=I.X(0,0,t.bounds.width+m,t.bounds.height+p);t.bounds=b,I.s(b)}}isBusAlignment(t){return t===24||t===25||t===26||t===27}Jy(t){return t===24||t===25}XN(t){const n=t.parent;if(n!==null){const i=n.alignment;if(this.isBusAlignment(i))if(this.Jy(i)){const r=n.children;let a=0;for(;a<r.length&&t!==r[a];)a++;return a%2===0}else return i===26}return!1}layoutComments(t){if(t.comments!==null){const n=t.node.measuredBounds,i=t.parent,r=t.angle;let a=0,l=21,u=!1;i!==null&&(a=i.angle,l=i.alignment,u=this.isBusAlignment(l));const c=r===90||r===270,f=a===90||a===270,m=t.childrenCount===0,p=this.XN(t);let y=0;const w=t.comments,b=w.length,C=T.l();for(let N=0;N<b;N++){const F=w[N],D=F.measuredBounds;if(c&&!m||!u&&!f&&m||u&&f&&m){if(a>135&&!u||f&&p)if(t.commentMargin>=0){C.e(t.bounds.x-t.commentMargin-D.width,t.bounds.y+y),F.move(C);const E=F.findLinksInto();for(;E.next();){const U=E.value;U.fromSpot=z.MiddleLeft,U.toSpot=z.MiddleRight}}else{C.e(t.bounds.x+t.focus.x*2-t.commentMargin,t.bounds.y+y),F.move(C);const E=F.findLinksInto();for(;E.next();){const U=E.value;U.fromSpot=z.MiddleRight,U.toSpot=z.MiddleLeft}}else if(t.commentMargin>=0){C.e(t.bounds.x+t.focus.x*2+t.commentMargin,t.bounds.y+y),F.move(C);const E=F.findLinksInto();for(;E.next();){const U=E.value;U.fromSpot=z.MiddleRight,U.toSpot=z.MiddleLeft}}else{C.e(t.bounds.x+t.commentMargin-D.width,t.bounds.y+y),F.move(C);const E=F.findLinksInto();for(;E.next();){const U=E.value;U.fromSpot=z.MiddleLeft,U.toSpot=z.MiddleRight}}t.commentSpacing>=0?y+=D.height+t.commentSpacing:y+=t.commentSpacing-D.height}else{if(a>135&&!u||!f&&p)if(t.commentMargin>=0){C.e(t.bounds.x+y,t.bounds.y-t.commentMargin-D.height),F.move(C);const E=F.findLinksInto();for(;E.next();){const U=E.value;U.fromSpot=z.MiddleTop,U.toSpot=z.MiddleBottom}}else{C.e(t.bounds.x+y,t.bounds.y+t.focus.y*2-t.commentMargin),F.move(C);const E=F.findLinksInto();for(;E.next();){const U=E.value;U.fromSpot=z.MiddleBottom,U.toSpot=z.MiddleTop}}else if(t.commentMargin>=0){C.e(t.bounds.x+y,t.bounds.y+t.focus.y*2+t.commentMargin),F.move(C);const E=F.findLinksInto();for(;E.next();){const U=E.value;U.fromSpot=z.MiddleBottom,U.toSpot=z.MiddleTop}}else{C.e(t.bounds.x+y,t.bounds.y+t.commentMargin-D.height),F.move(C);const E=F.findLinksInto();for(;E.next();){const U=E.value;U.fromSpot=z.MiddleTop,U.toSpot=z.MiddleBottom}}t.commentSpacing>=0?y+=D.width+t.commentSpacing:y+=t.commentSpacing-D.width}}T.s(C);const k=y-t.commentSpacing-(c?n.height:n.width);if(this.hs===1){const N=t.destinationEdges;for(;N.next();){const F=N.value.link;F!==null&&!F.isAvoiding&&(F.fromEndSegmentLength=k>0?k:NaN)}}else{const N=t.sourceEdges;for(;N.next();){const F=N.value.link;F!==null&&!F.isAvoiding&&(F.toEndSegmentLength=k>0?k:NaN)}}}}DI(){if(this.layerStyle===62){const n=[];let i=this.network.vertexes.iterator;for(;i.next();){const r=i.value;let a=r.parent;a===null&&(a=r);const l=a.angle===0||a.angle===180;let u=n[r.level];u===void 0&&(u=0),n[r.level]=Math.max(u,l?r.width:r.height)}for(let r=0;r<n.length;r++)n[r]===void 0&&(n[r]=0);for(this.VN=n,i=this.network.vertexes.iterator;i.next();){const r=i.value;let a=r.parent;a===null&&(a=r),a.angle===0||a.angle===180?(a.angle===180&&(r.focusX+=n[r.level]-r.width),r.width=n[r.level]):(a.angle===270&&(r.focusY+=n[r.level]-r.height),r.height=n[r.level])}}else if(this.layerStyle===61){const n=this.network.vertexes.iterator;for(;n.next();){const i=n.value,r=i.angle===0||i.angle===180;let a=-1;for(let l=0;l<i.children.length;l++){const u=i.children[l];a=Math.max(a,r?u.width:u.height)}if(a>=0)for(let l=0;l<i.children.length;l++){const u=i.children[l];r?(i.angle===180&&(u.focusX+=a-u.width),u.width=a):(i.angle===270&&(u.focusY+=a-u.height),u.height=a)}}}const t=this.Fi.iterator;for(;t.next();){const n=t.value;n instanceof is&&this.layoutTree(n)}}layoutTree(t){if(t===null)return;const n=t.children,i=n.length;for(let r=0;r<i;r++){const a=n[r];this.layoutTree(a)}switch(t.compaction){case 30:this.wD(t);break;default:case 31:t.alignment===25?this.wD(t):this.II(t);break}}wD(t){if(t.childrenCount===0){let mt=!1,at=0,vt=21;t.parent!==null&&(at=t.parent.angle,vt=t.parent.alignment,mt=this.isBusAlignment(vt));const Nt=this.XN(t);t.B.e(0,0),t.mt.e(t.width,t.height),t.parent!==null&&t.comments!==null&&((at===180||at===270)&&!mt||Nt)?at===180&&!mt||(at===90||at===270)&&Nt?t.ft.e(t.width-t.focus.x*2,0):t.ft.e(0,t.height-t.focus.y*2):t.ft.e(0,0);return}const n=this.orthoAngle(t),i=n===90||n===270;let r=0;const a=t.children,l=a.length;for(let mt=0;mt<l;mt++){const at=a[mt];r=Math.max(r,i?at.mt.width:at.mt.height)}const u=t.alignment,c=u===22,f=u===23,m=this.isBusAlignment(u),p=Math.max(0,t.breadthLimit),y=this.computeLayerSpacing(t),w=t.nodeSpacing,b=this.computeNodeIndent(t),C=c||f?0:b/2,k=t.rowSpacing;let N=0;(c||f)&&(N=Math.max(0,t.rowIndent));const F=t.width,D=t.height;let E=0,U=0,$=0,K=0,_=0,G=0,X=0,Q=0,Z=0,et=0;if(m&&!this.Jy(u)&&n>135&&a.reverse(),this.Jy(u))if(l>1)for(let mt=0;mt<l;mt++){const at=a[mt],vt=at.mt;mt%2===0&&mt!==l-1?Z=Math.max(Z,(i?vt.width:vt.height)+this.computeBusNodeSpacing(at)-w):mt%2!==0&&(et=Math.max(et,(i?vt.width:vt.height)+this.computeBusNodeSpacing(at)-w))}else l===1&&(Z=i?a[0].mt.width:a[0].mt.height);if(m)switch(u){case 24:case 25:let mt;n<135?mt=this.xD(t,a,Z,et,E,U):mt=this.bD(t,a,Z,et,E,U),Z=mt.x,E=mt.width,U=mt.height;break;case 26:for(let at=0;at<l;at++){const vt=a[at],Nt=vt.mt,qt=X===0?0:k;i?(vt.B.e(r-Nt.width,_+qt),E=Math.max(E,Nt.width),U=Math.max(U,_+qt+Nt.height),_+=qt+Nt.height):(vt.B.e(K+qt,r-Nt.height),E=Math.max(E,K+qt+Nt.width),U=Math.max(U,Nt.height),K+=qt+Nt.width),X++}break;case 27:for(let at=0;at<l;at++){const vt=a[at],Nt=vt.mt,qt=X===0?0:k;i?(vt.B.e(w/2+t.focus.x,_+qt),E=Math.max(E,Nt.width),U=Math.max(U,_+qt+Nt.height),_+=qt+Nt.height):(vt.B.e(K+qt,w/2+t.focus.y),E=Math.max(E,K+qt+Nt.width),U=Math.max(U,Nt.height),K+=qt+Nt.width),X++}break}else for(let mt=0;mt<l;mt++){const at=a[mt],vt=at.mt;if(i){p>0&&X>0&&K+w+vt.width>p&&(K<r&&this._a(t,u,r-K,0,Q,mt-1),G++,X=0,Q=mt,$=U,K=0,_=n>135?-U-k:U+k);const Nt=X===0?C:w;this.fk(at,0,_),at.B.e(K+Nt,_),E=Math.max(E,K+Nt+vt.width),U=Math.max(U,$+(G===0?0:k)+vt.height),K+=Nt+vt.width}else{p>0&&X>0&&_+w+vt.height>p&&(_<r&&this._a(t,u,0,r-_,Q,mt-1),G++,X=0,Q=mt,$=E,_=0,K=n>135?-E-k:E+k);const Nt=X===0?C:w;this.fk(at,K,0),at.B.e(K,_+Nt),U=Math.max(U,_+Nt+vt.height),E=Math.max(E,$+(G===0?0:k)+vt.width),_+=Nt+vt.height}X++}G>0&&(i?(U+=Math.max(0,y),K<E&&this._a(t,u,E-K,0,Q,l-1),N>0&&(f||this.iu(t,N,0,0,l-1),E+=N)):(E+=Math.max(0,y),_<U&&this._a(t,u,0,U-_,Q,l-1),N>0&&(f||this.iu(t,0,N,0,l-1),U+=N)));let st=0,ut=0;switch(u){case 20:i?st+=E/2-t.focus.x-b/2:ut+=U/2-t.focus.y-b/2;break;default:case 21:if(G>0)i?st+=E/2-t.focus.x-b/2:ut+=U/2-t.focus.y-b/2;else{const at=l;if(i){const vt=a[0].B.x+a[0].ft.x,Nt=a[at-1].B.x+a[at-1].ft.x+a[at-1].focus.x*2;st+=vt+(Nt-vt)/2-t.focus.x-b/2}else{const vt=a[0].B.y+a[0].ft.y,Nt=a[at-1].B.y+a[at-1].ft.y+a[at-1].focus.y*2;ut+=vt+(Nt-vt)/2-t.focus.y-b/2}}break;case 22:i?(st-=b,E+=b):(ut-=b,U+=b);break;case 23:i?(st+=E-t.width+b,E+=b):(ut+=U-t.height+b,U+=b);break;case 24:case 25:i?l>1?st+=Z+w/2-t.focus.x:st+=a[0].focus.x-t.focus.x+a[0].ft.x:l>1?ut+=Z+w/2-t.focus.y:ut+=a[0].focus.y-t.focus.y+a[0].ft.y;break;case 26:i?st+=E+w/2-t.focus.x:ut+=U+w/2-t.focus.y;break;case 27:break;case 28:const mt=this.customAlignment(t,st,ut,E,U);st=mt[0],ut=mt[1],E=mt[2],U=mt[3];break}for(let mt=0;mt<l;mt++){const at=a[mt];i?at.B.e(at.B.x+at.ft.x-st,at.B.y+(n>135?(m?-U:-at.mt.height)+at.ft.y-y:D+y+at.ft.y)):at.B.e(at.B.x+(n>135?(m?-E:-at.mt.width)+at.ft.x-y:F+y+at.ft.x),at.B.y+at.ft.y-ut)}i?(E=this.KN(t,E,st),st<0&&(st=0),n>135&&(ut+=U+y),U=Math.max(Math.max(U,D),U+D+y)):(n>135&&(st+=E+y),E=Math.max(Math.max(E,F),E+F+y),U=this.YN(t,U,ut),ut<0&&(ut=0)),t.ft.e(st,ut),t.mt.e(E,U)}customAlignment(t,n,i,r,a){return[n,i,r,a]}xD(t,n,i,r,a,l){const u=n.length;if(u===0)return new I(i,0,a,l);if(u===1){const k=n[0];return a=k.mt.width,l=k.mt.height,new I(i,0,a,l)}const c=t.nodeSpacing,f=t.rowSpacing,m=this.orthoAngle(t)===90;let p=0,y=0,w=0;for(let k=0;k<u;k++){if(k%2!==0||u>1&&k===u-1)continue;const N=n[k],F=N.mt,D=p===0?0:f;if(m){const E=this.computeBusNodeSpacing(N)-c;N.B.e(i-(F.width+E),w+D),a=Math.max(a,F.width+E),l=Math.max(l,w+D+F.height),w+=D+F.height}else{const E=this.computeBusNodeSpacing(N)-c;N.B.e(y+D,i-(F.height+E)),l=Math.max(l,F.height+E),a=Math.max(a,y+D+F.width),y+=D+F.width}p++}p=0;const b=y,C=w;m?(y=i+c,w=0):(y=0,w=i+c);for(let k=0;k<u;k++){if(k%2===0)continue;const N=n[k],F=N.mt,D=p===0?0:f;if(m){const E=this.computeBusNodeSpacing(N)-c;N.B.e(y+E,w+D),a=Math.max(a,y+F.width+E),l=Math.max(l,w+D+F.height),w+=D+F.height}else{const E=this.computeBusNodeSpacing(N)-c;N.B.e(y+D,w+E),a=Math.max(a,y+D+F.width),l=Math.max(l,w+F.height+E),y+=D+F.width}p++}if(u>1&&u%2===1){const k=n[u-1],N=k.mt,F=this.computeBusLastRowSpacing(k,m?Math.max(Math.abs(C),Math.abs(w)):Math.max(Math.abs(b),Math.abs(y)));if(m){k.B.e(i+c/2-k.focus.x-k.ft.x,l+F);const D=i+c/2-k.focus.x-k.ft.x;a=Math.max(a,D+N.width),D<0&&(a-=D),l=Math.max(l,Math.max(C,w)+F+N.height),k.B.x<0&&(i=this.uk(t,k.B.x,!1,i,c))}else{k.B.e(a+F,i+c/2-k.focus.y-k.ft.y),a=Math.max(a,Math.max(b,y)+F+N.width);const D=i+c/2-k.focus.y-k.ft.y;l=Math.max(l,D+N.height),D<0&&(l-=D),k.B.y<0&&(i=this.uk(t,k.B.y,!0,i,c))}}return new I(i,0,a,l)}bD(t,n,i,r,a,l){const u=n.length;if(u===0)return new I(i,0,a,l);if(u===1){const k=n[0];return a=k.mt.width,l=k.mt.height,new I(i,0,a,l)}const c=t.nodeSpacing,f=t.rowSpacing,m=this.orthoAngle(t)===270;let p=0,y=0,w=0;for(let k=0;k<u;k++){if(k%2!==0||u>1&&k===u-1)continue;const N=n[k],F=N.mt,D=p===0?0:f;if(m){const E=this.computeBusNodeSpacing(N)-c;w-=D+F.height,N.B.e(i-(F.width+E),w),a=Math.max(a,F.width+E),l=Math.max(l,Math.abs(w))}else{const E=this.computeBusNodeSpacing(N)-c;y-=D+F.width,N.B.e(y,i-(F.height+E)),l=Math.max(l,F.height+E),a=Math.max(a,Math.abs(y))}p++}p=0;const b=y,C=w;m?(y=i+c,w=0):(y=0,w=i+c);for(let k=0;k<u;k++){if(k%2===0)continue;const N=n[k],F=N.mt,D=p===0?0:f;if(m){const E=this.computeBusNodeSpacing(N)-c;w-=D+F.height,N.B.e(y+E,w),a=Math.max(a,y+F.width+E),l=Math.max(l,Math.abs(w))}else{const E=this.computeBusNodeSpacing(N)-c;y-=D+F.width,N.B.e(y,w+E),l=Math.max(l,w+F.height+E),a=Math.max(a,Math.abs(y))}p++}if(u>1&&u%2===1){const k=n[u-1],N=k.mt,F=this.computeBusLastRowSpacing(k,m?Math.max(Math.abs(C),Math.abs(w)):Math.max(Math.abs(b),Math.abs(y)));if(m){k.B.e(i+c/2-k.focus.x-k.ft.x,-l-N.height-F);const D=i+c/2-k.focus.x-k.ft.x;a=Math.max(a,D+N.width),D<0&&(a-=D),l=Math.max(l,Math.abs(Math.min(C,w))+F+N.height),k.B.x<0&&(i=this.uk(t,k.B.x,!1,i,c))}else{k.B.e(-a-N.width-F,i+c/2-k.focus.y-k.ft.y),a=Math.max(a,Math.abs(Math.min(b,y))+F+N.width);const D=i+c/2-k.focus.y-k.ft.y;l=Math.max(l,D+N.height),D<0&&(l-=D),k.B.y<0&&(i=this.uk(t,k.B.y,!0,i,c))}}for(let k=0;k<u;k++){const N=n[k];m?N.B.e(N.B.x,N.B.y+l):N.B.e(N.B.x+a,N.B.y)}return new I(i,0,a,l)}computeBusNodeSpacing(t){return t.parent===null?0:t.parent.nodeSpacing}computeBusLastRowSpacing(t,n){return t.parent===null?0:t.parent.rowSpacing}uk(t,n,i,r,a){const l=t.children,u=l.length;for(let f=0;f<u;f++)i?l[f].B.e(l[f].B.x,l[f].B.y-n):l[f].B.e(l[f].B.x-n,l[f].B.y);const c=l[u-1];return Math.max(r,i?c.ft.y+c.focus.y-a/2:c.ft.x+c.focus.x-a/2)}KN(t,n,i){switch(t.alignment){case 21:case 20:let r=n;return i+t.width>r&&(r=i+t.width),i<0&&(r-=i),r;case 22:return t.width>n?t.width:n;case 23:return t.focus.x*2>n?t.width:n+t.width-t.focus.x*2;case 24:case 25:const a=Math.min(0,i),l=Math.max(n,i+t.width);return Math.max(t.width,l-a);case 26:return t.width-t.focus.x+t.nodeSpacing/2+n;case 27:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+n);default:return n}}YN(t,n,i){switch(t.alignment){case 21:case 20:let r=n;return i+t.height>r&&(r=i+t.height),i<0&&(r-=i),r;case 22:return t.height>n?t.height:n;case 23:return t.focus.y*2>n?t.height:n+t.height-t.focus.y*2;case 24:case 25:const a=Math.min(0,i),l=Math.max(n,i+t.height);return Math.max(t.height,l-a);case 26:return t.height-t.focus.y+t.nodeSpacing/2+n;case 27:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+n);default:return n}}GN(t,n,i){switch(t){case 20:n/=2,i/=2;break;case 21:n/=2,i/=2;break;case 22:n=0,i=0;break;case 23:break;default:o.o("Unhandled alignment value "+t.toString())}return new T(n,i)}_a(t,n,i,r,a,l){const u=this.GN(n,i,r);this.iu(t,u.x,u.y,a,l)}iu(t,n,i,r,a){if(n===0&&i===0)return;const l=t.children;for(let u=r;u<=a;u++){const c=l[u].B;c.x+=n,c.y+=i}}fk(t,n,i){const r=t.parent;switch(this.hs){case 1:{const a=t.sourceEdges;for(;a.next();){const l=a.value;l.fromVertex===r&&l.relativePoint.e(n,i)}break}case 2:{const a=t.destinationEdges;for(;a.next();){const l=a.value;l.toVertex===r&&l.relativePoint.e(n,i)}break}default:o.o("Unhandled path value "+this.hs.toString())}}II(t){if(t.childrenCount===0){const Ot=t.parent;let Rt=!1,ne=0,te=21;Ot!==null&&(ne=Ot.angle,te=Ot.alignment,Rt=this.isBusAlignment(te));const At=this.XN(t);t.B.e(0,0),t.mt.e(t.width,t.height),t.parent!==null&&t.comments!==null&&((ne===180||ne===270)&&!Rt||At)?ne===180&&!Rt||(ne===90||ne===270)&&At?t.ft.e(t.width-t.focus.x*2,0):t.ft.e(0,t.height-t.focus.y*2):t.ft.e(0,0),t.vg=null,t.Og=null;return}const n=this.orthoAngle(t),i=n===90||n===270;let r=0;const a=t.children,l=a.length;for(let Ot=0;Ot<l;Ot++){const Rt=a[Ot];r=Math.max(r,i?Rt.mt.width:Rt.mt.height)}const u=t.alignment,c=u===22,f=u===23,m=this.isBusAlignment(u),p=Math.max(0,t.breadthLimit),y=this.computeLayerSpacing(t),w=t.nodeSpacing,b=this.computeNodeIndent(t),C=t.rowSpacing;let k=0;(c||f)&&(k=Math.max(0,t.rowIndent));const N=t.width,F=t.height;let D=0,E=0,U=0,$=null,K=null,_=0,G=0,X=0,Q=0,Z=0,et=0,st=0,ut=0,mt=0;if(m&&!this.Jy(u)&&n>135&&a.reverse(),this.Jy(u))if(l>1)for(let Ot=0;Ot<l;Ot++)Ot%2===0&&Ot!==l-1?ut=Math.max(ut,i?a[Ot].mt.width:a[Ot].mt.height):Ot%2!==0&&(mt=Math.max(mt,i?a[Ot].mt.width:a[Ot].mt.height));else l===1&&(ut=i?a[0].mt.width:a[0].mt.height);if(m){switch(u){case 24:let Ot;n<135?Ot=this.xD(t,a,ut,mt,D,E):Ot=this.bD(t,a,ut,mt,D,E),ut=Ot.x,D=Ot.width,E=Ot.height;break;case 26:for(let Rt=0;Rt<l;Rt++){const ne=a[Rt],te=ne.mt,At=et===0?0:C;i?(ne.B.e(r-te.width,Q+At),D=Math.max(D,te.width),E=Math.max(E,Q+At+te.height),Q+=At+te.height):(ne.B.e(X+At,r-te.height),D=Math.max(D,X+At+te.width),E=Math.max(E,te.height),X+=At+te.width),et++}break;case 27:for(let Rt=0;Rt<l;Rt++){const ne=a[Rt],te=ne.mt,At=et===0?0:C;i?(ne.B.e(w/2+t.focus.x,Q+At),D=Math.max(D,te.width),E=Math.max(E,Q+At+te.height),Q+=At+te.height):(ne.B.e(X+At,w/2+t.focus.y),D=Math.max(D,X+At+te.width),E=Math.max(E,te.height),X+=At+te.width),et++}break}$=this.ae(2),K=this.ae(2),i?($[0].e(0,0),$[1].e(0,E),K[0].e(D,0),K[1].e(D,E)):($[0].e(0,0),$[1].e(D,0),K[0].e(0,E),K[1].e(D,E))}else for(let Ot=0;Ot<l;Ot++){const Rt=a[Ot],ne=Rt.mt;if(i){p>0&&et>0&&X+w+ne.width>p&&(X<r&&this._a(t,u,r-X,0,st,Ot-1),Z++,et=0,st=Ot,U=E,X=0,Q=n>135?-E-C:E+C),this.fk(Rt,0,Q);let te=0;if(et===0)$=Rt.vg,K=Rt.Og,_=ne.width,G=ne.height,($===null||K===null||n!==this.orthoAngle(Rt))&&($=this.ae(2),K=this.ae(2),$[0].e(0,0),$[1].e(0,G),K[0].e(_,0),K[1].e(_,G));else{const At=o.nt(),Xt=this.kD(t,Rt,$,K,_,G,At);te=Xt.x,$=At[0],K=At[1],_=Xt.width,G=Xt.height,o.tt(At),X<ne.width&&te<0&&(this.iu(t,-te,0,st,Ot-1),this.dk($,-te,0),this.dk(K,-te,0),te=0)}Rt.B.e(te,Q),D=Math.max(D,_),E=Math.max(E,U+(Z===0?0:C)+ne.height),X=_}else{p>0&&et>0&&Q+w+ne.height>p&&(Q<r&&this._a(t,u,0,r-Q,st,Ot-1),Z++,et=0,st=Ot,U=D,Q=0,X=n>135?-D-C:D+C),this.fk(Rt,X,0);let te=0;if(et===0)$=Rt.vg,K=Rt.Og,_=ne.width,G=ne.height,($===null||K===null||n!==this.orthoAngle(Rt))&&($=this.ae(2),K=this.ae(2),$[0].e(0,0),$[1].e(_,0),K[0].e(0,G),K[1].e(_,G));else{const At=o.nt(),Xt=this.kD(t,Rt,$,K,_,G,At);te=Xt.x,$=At[0],K=At[1],_=Xt.width,G=Xt.height,o.tt(At),Q<ne.height&&te<0&&(this.iu(t,0,-te,st,Ot-1),this.dk($,0,-te),this.dk(K,0,-te),te=0)}Rt.B.e(X,te),E=Math.max(E,G),D=Math.max(D,U+(Z===0?0:C)+ne.width),Q=G}et++}Z>0&&(i?(E+=Math.max(0,y),X<D&&this._a(t,u,D-X,0,st,l-1),k>0&&(f||this.iu(t,k,0,0,l-1),D+=k)):(D+=Math.max(0,y),Q<E&&this._a(t,u,0,E-Q,st,l-1),k>0&&(f||this.iu(t,0,k,0,l-1),E+=k)));let at=0,vt=0;switch(u){case 20:i?at+=D/2-t.focus.x-b/2:vt+=E/2-t.focus.y-b/2;break;default:case 21:if(Z>0)i?at+=D/2-t.focus.x-b/2:vt+=E/2-t.focus.y-b/2;else{const Rt=l;if(i){const ne=a[0].B.x+a[0].ft.x,te=a[Rt-1].B.x+a[Rt-1].ft.x+a[Rt-1].focus.x*2;at+=ne+(te-ne)/2-t.focus.x-b/2}else{const ne=a[0].B.y+a[0].ft.y,te=a[Rt-1].B.y+a[Rt-1].ft.y+a[Rt-1].focus.y*2;vt+=ne+(te-ne)/2-t.focus.y-b/2}}break;case 22:i?(at-=b,D+=b):(vt-=b,E+=b);break;case 23:i?(at+=D-t.width+b,D+=b):(vt+=E-t.height+b,E+=b);break;case 24:i?l>1?at+=ut+w/2-t.focus.x:at+=a[0].focus.x-t.focus.x+a[0].ft.x:l>1?vt+=ut+w/2-t.focus.y:vt+=a[0].focus.y-t.focus.y+a[0].ft.y;break;case 26:i?at+=D+w/2-t.focus.x:vt+=E+w/2-t.focus.y;break;case 27:break;case 28:const Ot=this.customAlignment(t,at,vt,D,E);at=Ot[0],vt=Ot[1],D=Ot[2],E=Ot[3];break}for(let Ot=0;Ot<l;Ot++){const Rt=a[Ot];i?Rt.B.e(Rt.B.x+Rt.ft.x-at,Rt.B.y+(n>135?(m?-E:-Rt.mt.height)+Rt.ft.y-y:F+y+Rt.ft.y)):Rt.B.e(Rt.B.x+(n>135?(m?-D:-Rt.mt.width)+Rt.ft.x-y:N+y+Rt.ft.x),Rt.B.y+Rt.ft.y-vt)}let Nt=0,qt=0;if(m)i?(D=this.KN(t,D,at),at<0&&(at=0),n>135&&(vt+=E+y),E+=F+y,u===27&&(Nt+=w/2+t.focus.x),qt+=F+y):(n>135&&(at+=D+y),D+=N+y,E=this.YN(t,E,vt),vt<0&&(vt=0),u===27&&(qt+=w/2+t.focus.y),Nt+=N+y);else if(i){if(t.comments===null){if(N>D){const Ot=this.GN(u,N-D,0);Nt=Ot.x,qt=Ot.y,D=N,at=0}}else D=this.KN(t,D,at);at<0&&(Nt-=at,at=0),n>135&&(vt+=E+y),E=Math.max(Math.max(E,F),E+F+y),qt+=F+y}else{if(n>135&&(at+=D+y),D=Math.max(Math.max(D,N),D+N+y),t.comments===null){if(F>E){const Ot=this.GN(u,0,F-E);Nt=Ot.x,qt=Ot.y,E=F,vt=0}}else E=this.YN(t,E,vt);vt<0&&(qt-=vt,vt=0),Nt+=N+y}let Tt,Ft;if(Z>0)Tt=this.ae(4),Ft=this.ae(4),i?(Tt[2].e(0,F+y),Tt[3].e(Tt[2].x,E),Ft[2].e(D,Tt[2].y),Ft[3].e(Ft[2].x,Tt[3].y)):(Tt[2].e(N+y,0),Tt[3].e(D,Tt[2].y),Ft[2].e(Tt[2].x,E),Ft[3].e(Tt[3].x,Ft[2].y));else{Tt=this.ae($.length+2),Ft=this.ae(K.length+2);for(let Ot=0;Ot<$.length;Ot++){const Rt=$[Ot];Tt[Ot+2].e(Rt.x+Nt,Rt.y+qt)}for(let Ot=0;Ot<K.length;Ot++){const Rt=K[Ot];Ft[Ot+2].e(Rt.x+Nt,Rt.y+qt)}}i?(Tt[0].e(at,0),Tt[1].e(Tt[0].x,F),Tt[2].y<Tt[1].y&&(Tt[2].x>Tt[0].x?Tt[2].a(Tt[1]):Tt[1].a(Tt[2])),Tt[3].y<Tt[2].y&&(Tt[3].x>Tt[0].x?Tt[3].a(Tt[2]):Tt[2].a(Tt[3])),Ft[0].e(at+N,0),Ft[1].e(Ft[0].x,F),Ft[2].y<Ft[1].y&&(Ft[2].x<Ft[0].x?Ft[2].a(Ft[1]):Ft[1].a(Ft[2])),Ft[3].y<Ft[2].y&&(Ft[3].x<Ft[0].x?Ft[3].a(Ft[2]):Ft[2].a(Ft[3])),Tt[2].y-=y/2,Ft[2].y-=y/2):(Tt[0].e(0,vt),Tt[1].e(N,Tt[0].y),Tt[2].x<Tt[1].x&&(Tt[2].y>Tt[0].y?Tt[2].a(Tt[1]):Tt[1].a(Tt[2])),Tt[3].x<Tt[2].x&&(Tt[3].y>Tt[0].y?Tt[3].a(Tt[2]):Tt[2].a(Tt[3])),Ft[0].e(0,vt+F),Ft[1].e(N,Ft[0].y),Ft[2].x<Ft[1].x&&(Ft[2].y<Ft[0].y?Ft[2].a(Ft[1]):Ft[1].a(Ft[2])),Ft[3].x<Ft[2].x&&(Ft[3].y<Ft[0].y?Ft[3].a(Ft[2]):Ft[2].a(Ft[3])),Tt[2].x-=y/2,Ft[2].x-=y/2),this.tn($),this.tn(K),t.vg=Tt,t.Og=Ft,t.ft.e(at,vt),t.mt.e(D,E)}dk(t,n,i){for(let r=0;r<t.length;r++){const a=t[r];a.x+=n,a.y+=i}}kD(t,n,i,r,a,l,u){const c=this.orthoAngle(t),f=c===90||c===270,m=t.nodeSpacing,p=i,y=r,w=a,b=l;let C=n.vg,k=n.Og;const N=n.mt,F=f?Math.max(b,N.height):Math.max(w,N.width);if((C===null||c!==this.orthoAngle(n))&&(C=this.ae(2),k=this.ae(2),f?(C[0].e(0,0),C[1].e(0,N.height),k[0].e(N.width,0),k[1].e(k[0].x,C[1].y)):(C[0].e(0,0),C[1].e(N.width,0),k[0].e(0,N.height),k[1].e(C[1].x,k[0].y))),f){const D=w;let E=D-this.EI(y,C,D);return E+=m,i=this.BI(p,C,E),r=this.UI(y,k,E),a=Math.max(0,E)+N.width,l=F,this.tn(p),this.tn(C),this.tn(y),this.tn(k),u[0]=i,u[1]=r,new I(E,0,a,l)}else{const D=b;let E=D-this.VI(y,C,D);return E+=m,i=this.zI(p,C,E),r=this.XI(y,k,E),a=F,l=Math.max(0,E)+N.height,this.tn(p),this.tn(C),this.tn(y),this.tn(k),u[0]=i,u[1]=r,new I(E,0,a,l)}}zI(t,n,i){if(t===null||t.length<2||n===null||n.length<2)return null;const r=this.ae(t.length+n.length);let a=0,l=0,u=0;for(;l<n.length&&n[l].x<t[0].x;){const m=n[l++];r[u++].e(m.x,m.y+i)}for(;a<t.length;){const m=t[a++];r[u++].e(m.x,m.y)}const c=t[t.length-1].x;for(;l<n.length&&n[l].x<=c;)l++;for(;l<n.length&&n[l].x>c;){const m=n[l++];r[u++].e(m.x,m.y+i)}const f=this.ae(u);for(a=0;a<u;a++)f[a].a(r[a]);return this.tn(r),f}BI(t,n,i){if(t===null||t.length<2||n===null||n.length<2)return null;const r=this.ae(t.length+n.length);let a=0,l=0,u=0;for(;l<n.length&&n[l].y<t[0].y;){const m=n[l++];r[u++].e(m.x+i,m.y)}for(;a<t.length;){const m=t[a++];r[u++].e(m.x,m.y)}const c=t[t.length-1].y;for(;l<n.length&&n[l].y<=c;)l++;for(;l<n.length&&n[l].y>c;){const m=n[l++];r[u++].e(m.x+i,m.y)}const f=this.ae(u);for(a=0;a<u;a++)f[a].a(r[a]);return this.tn(r),f}XI(t,n,i){if(t===null||t.length<2||n===null||n.length<2)return null;const r=this.ae(t.length+n.length);let a=0,l=0,u=0;for(;a<t.length&&t[a].x<n[0].x;){const m=t[a++];r[u++].e(m.x,m.y)}for(;l<n.length;){const m=n[l++];r[u++].e(m.x,m.y+i)}const c=n[n.length-1].x;for(;a<t.length&&t[a].x<=c;)a++;for(;a<t.length&&t[a].x>c;){const m=t[a++];r[u++].e(m.x,m.y)}const f=this.ae(u);for(a=0;a<u;a++)f[a].a(r[a]);return this.tn(r),f}UI(t,n,i){if(t===null||t.length<2||n===null||n.length<2)return null;const r=this.ae(t.length+n.length);let a=0,l=0,u=0;for(;a<t.length&&t[a].y<n[0].y;){const m=t[a++];r[u++].e(m.x,m.y)}for(;l<n.length;){const m=n[l++];r[u++].e(m.x+i,m.y)}const c=n[n.length-1].y;for(;a<t.length&&t[a].y<=c;)a++;for(;a<t.length&&t[a].y>c;){const m=t[a++];r[u++].e(m.x,m.y)}const f=this.ae(u);for(a=0;a<u;a++)f[a].a(r[a]);return this.tn(r),f}VI(t,n,i){let r=9999999;if(t===null||t.length<2||n===null||n.length<2)return r;let a=0,l=0;for(;a<t.length&&l<n.length;){const u=t[a],c=n[l],f=c.x;let m=c.y;m+=i;let p=u;a+1<t.length&&(p=t[a+1]);let y=c,w=y.x,b=y.y;l+1<n.length&&(y=n[l+1],w=y.x,b=y.y,b+=i);let C=r;u.x===f?C=m-u.y:u.x>f&&u.x<w?C=m+(u.x-f)/(w-f)*(b-m)-u.y:f>u.x&&f<p.x&&(C=m-(u.y+(f-u.x)/(p.x-u.x)*(p.y-u.y))),C<r&&(r=C),p.x<=u.x?a++:w<=f?l++:(p.x<=w&&a++,w<=p.x&&l++)}return r}EI(t,n,i){let r=9999999;if(t===null||t.length<2||n===null||n.length<2)return r;let a=0,l=0;for(;a<t.length&&l<n.length;){const u=t[a],c=n[l];let f=c.x;const m=c.y;f+=i;let p=u;a+1<t.length&&(p=t[a+1]);let y=c,w=y.x,b=y.y;l+1<n.length&&(y=n[l+1],w=y.x,b=y.y,w+=i);let C=r;u.y===m?C=f-u.x:u.y>m&&u.y<b?C=f+(u.y-m)/(b-m)*(w-f)-u.x:m>u.y&&m<p.y&&(C=f-(u.x+(m-u.y)/(p.y-u.y)*(p.x-u.x))),C<r&&(r=C),p.y<=u.y?a++:b<=m?l++:(p.y<=b&&a++,b<=p.y&&l++)}return r}ae(t){const n=this.ck[t];if(n!==void 0){const r=n.pop();if(r!==void 0)return r}const i=[];for(let r=0;r<t;r++)i[r]=new T;return i}tn(t){const n=t.length;let i=this.ck[n];i===void 0&&(i=[],this.ck[n]=i),i.push(t)}arrangeTrees(){if(this.Xi===52){const t=this.Fi.iterator;for(;t.next();){const n=t.value;if(!(n instanceof is))continue;const i=n.node;if(i===null)continue;const r=i.position;let a=r.x,l=r.y;isFinite(a)||(a=0),isFinite(l)||(l=0),this.jN(n,a,l)}}else{const t=[],n=this.Fi.iterator;for(;n.next();){const l=n.value;l instanceof is&&t.push(l)}switch(this.sorting){default:case 10:break;case 11:t.reverse();break;case 12:t.sort(this.comparer);break;case 13:t.sort(this.comparer),t.reverse();break}const i=this.arrangementOrigin;let r=i.x,a=i.y;for(let l=0;l<t.length;l++){const u=t[l];switch(this.jN(u,r+u.ft.x,a+u.ft.y),this.Xi){case 50:a+=u.mt.height+this.ks.height;break;default:case 51:r+=u.mt.width+this.ks.width;break}}}}jN(t,n,i){if(t===null)return;t.x=n,t.y=i;const r=t.children,a=r.length;for(let l=0;l<a;l++){const u=r[l];this.jN(u,n+u.B.x,i+u.B.y)}}commitLayout(){this.zy(),this.commitNodes(),this.UN(),this.isRouting&&this.commitLinks()}commitNodes(){const t=this.network.vertexes.iterator;for(;t.next();)t.value.commit();for(t.reset();t.next();){const n=t.value;this.layoutComments(n)}}UN(){if(this.layerStyle!==62)return;const t=this.VN,n=[];let i=null;const r=this.network.vertexes.iterator;for(;r.next();){const f=r.value;i===null?i=f.bounds.copy():i.unionRect(f.bounds);let m=n[f.level];m===void 0?m=this.computeLayerSpacing(f):m=Math.max(m,this.computeLayerSpacing(f)),n[f.level]=m}for(let f=0;f<n.length;f++)n[f]===void 0&&(n[f]=0);let a;this.angle===90||this.angle===270?(i.inflate(this.nodeSpacing/2,this.layerSpacing),a=new T(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.inflate(this.layerSpacing,this.nodeSpacing/2),a=new T(-this.layerSpacing/2,-this.nodeSpacing/2));const l=[],u=this.angle===90||this.angle===270?i.width:i.height;let c=0;if(this.angle===180||this.angle===270)for(let f=0;f<t.length;f++)c+=t[f]+n[f];for(let f=0;f<t.length;f++){const m=t[f]+n[f];this.angle===270?(c-=m,l.push(new I(0,c,u,m))):this.angle===90?(l.push(new I(0,c,u,m)),c+=m):this.angle===180?(c-=m,l.push(new I(c,0,m,u))):(l.push(new I(c,0,m,u)),c+=m)}this.commitLayers(l,a)}commitLayers(t,n){}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}zy(){const t=this.Fi.iterator;for(;t.next();){const n=t.value;n instanceof is&&this.PD(n)}}PD(t){if(t===null)return;this.setPortSpots(t);const n=t.children,i=n.length;for(let r=0;r<i;r++){const a=n[r];this.PD(a)}}setPortSpots(t){const n=t.alignment;if(this.isBusAlignment(n))this.KI(t,n);else{const i=this.orthoAngle(t);if(this.hs===1){const r=t.destinationEdges;for(;r.next();){const a=r.value.link;if(a!==null){if(t.setsPortSpot)if(t.portSpot.isDefault())switch(i){case 0:a.fromSpot=z.MiddleRight;break;case 90:a.fromSpot=z.MiddleBottom;break;case 180:a.fromSpot=z.MiddleLeft;break;default:a.fromSpot=z.MiddleTop;break}else a.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.isDefault())switch(i){case 0:a.toSpot=z.MiddleLeft;break;case 90:a.toSpot=z.MiddleTop;break;case 180:a.toSpot=z.MiddleRight;break;default:a.toSpot=z.MiddleBottom;break}else a.toSpot=t.childPortSpot}}}else{const r=t.sourceEdges;for(;r.next();){const a=r.value.link;if(a!==null){if(t.setsPortSpot)if(t.portSpot.isDefault())switch(i){case 0:a.toSpot=z.MiddleRight;break;case 90:a.toSpot=z.MiddleBottom;break;case 180:a.toSpot=z.MiddleLeft;break;default:a.toSpot=z.MiddleTop;break}else a.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.isDefault())switch(i){case 0:a.fromSpot=z.MiddleLeft;break;case 90:a.fromSpot=z.MiddleTop;break;case 180:a.fromSpot=z.MiddleRight;break;default:a.fromSpot=z.MiddleBottom;break}else a.fromSpot=t.childPortSpot}}}}}KI(t,n){const i=this.hs===1,r=this.orthoAngle(t);let a;switch(r){case 0:a=z.MiddleRight;break;case 90:a=z.MiddleBottom;break;case 180:a=z.MiddleLeft;break;default:a=z.MiddleTop;break}const l=t.children,u=l.length;switch(n){case 24:case 25:{for(let c=0;c<u;c++){const f=l[c],m=(i?f.sourceEdges:f.destinationEdges).first();if(m===null)continue;const p=m.link;if(p!==null){let y=r===90||r===270?z.MiddleLeft:z.MiddleTop;if(u===1||c===u-1&&u%2===1)switch(r){case 0:y=z.MiddleLeft;break;case 90:y=z.MiddleTop;break;case 180:y=z.MiddleRight;break;default:y=z.MiddleBottom;break}else c%2===0&&(y=r===90||r===270?z.MiddleRight:z.MiddleBottom);i?(t.setsPortSpot&&(p.fromSpot=a),t.setsChildPortSpot&&(p.toSpot=y)):(t.setsPortSpot&&(p.fromSpot=y),t.setsChildPortSpot&&(p.toSpot=a))}}break}case 26:{const c=r===90||r===270?z.MiddleRight:z.MiddleBottom,f=i?t.destinationEdges:t.sourceEdges;for(;f.next();){const m=f.value.link;m!==null&&(i?(t.setsPortSpot&&(m.fromSpot=a),t.setsChildPortSpot&&(m.toSpot=c)):(t.setsPortSpot&&(m.fromSpot=c),t.setsChildPortSpot&&(m.toSpot=a)))}break}case 27:{const c=r===90||r===270?z.MiddleLeft:z.MiddleTop,f=i?t.destinationEdges:t.sourceEdges;for(;f.next();){const m=f.value.link;m!==null&&(i?(t.setsPortSpot&&(m.fromSpot=a),t.setsChildPortSpot&&(m.toSpot=c)):(t.setsPortSpot&&(m.fromSpot=c),t.setsChildPortSpot&&(m.toSpot=a)))}break}}}orthoAngle(t){const n=t.angle;return n<=45?0:n<=135?90:n<=225?180:n<=315?270:0}computeLayerSpacing(t){const n=this.orthoAngle(t),i=n===90||n===270;let r=t.layerSpacing;if(t.layerSpacingParentOverlap>0){const a=Math.min(1,t.layerSpacingParentOverlap);r-=i?t.height*a:t.width*a}return r<(i?-t.height:-t.width)&&(r=i?-t.height:-t.width),r}computeNodeIndent(t){const n=this.orthoAngle(t),i=n===90||n===270;let r=t.nodeIndent;if(t.nodeIndentPastParent>0){const a=Math.min(1,t.nodeIndentPastParent);r+=i?t.width*a:t.height*a}return r=Math.max(0,r),r}get roots(){return this.Fi}set roots(t){this.Fi!==t&&(this.Fi=t,this.invalidateLayout())}get path(){return this.Ti}set path(t){this.Ti!==t&&(this.Ti=t,this.invalidateLayout())}get treeStyle(){return this.tu}set treeStyle(t){this.tu!==t&&(t===40||t===42||t===41||t===43)&&(this.tu=t,this.invalidateLayout())}get layerStyle(){return this.Rg}set layerStyle(t){this.Rg!==t&&(t===60||t===61||t===62)&&(this.Rg=t,this.invalidateLayout())}get comments(){return this.Re}set comments(t){this.Re!==t&&(this.Re=t,this.invalidateLayout())}get arrangement(){return this.Xi}set arrangement(t){this.Xi!==t&&(t===50||t===51||t===52)&&(this.Xi=t,this.invalidateLayout())}get arrangementSpacing(){return this.ks}set arrangementSpacing(t){this.ks.equals(t)||(this.ks.a(t),this.invalidateLayout())}get rootDefaults(){return this.V}set rootDefaults(t){this.V!==t&&(this.V=t,this.invalidateLayout())}get alternateDefaults(){return this.z}set alternateDefaults(t){this.z!==t&&(this.z=t,this.invalidateLayout())}get sorting(){return this.V.sorting}set sorting(t){this.V.sorting!==t&&(this.V.sorting=t,this.invalidateLayout())}get comparer(){return this.V.comparer}set comparer(t){this.V.comparer!==t&&(this.V.comparer=t,this.invalidateLayout())}get angle(){return this.V.angle}set angle(t){this.V.angle!==t&&(t===0||t===90||t===180||t===270?(this.V.angle=t,this.invalidateLayout()):o.o("TreeLayout.angle must be 0, 90, 180, or 270"))}get alignment(){return this.V.alignment}set alignment(t){this.V.alignment!==t&&(this.V.alignment=t,this.invalidateLayout())}get nodeIndent(){return this.V.nodeIndent}set nodeIndent(t){this.V.nodeIndent!==t&&t>=0&&(this.V.nodeIndent=t,this.invalidateLayout())}get nodeIndentPastParent(){return this.V.nodeIndentPastParent}set nodeIndentPastParent(t){this.V.nodeIndentPastParent!==t&&t>=0&&t<=1&&(this.V.nodeIndentPastParent=t,this.invalidateLayout())}get nodeSpacing(){return this.V.nodeSpacing}set nodeSpacing(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.invalidateLayout())}get layerSpacing(){return this.V.layerSpacing}set layerSpacing(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.invalidateLayout())}get layerSpacingParentOverlap(){return this.V.layerSpacingParentOverlap}set layerSpacingParentOverlap(t){this.V.layerSpacingParentOverlap!==t&&t>=0&&t<=1&&(this.V.layerSpacingParentOverlap=t,this.invalidateLayout())}get compaction(){return this.V.compaction}set compaction(t){this.V.compaction!==t&&(t===30||t===31)&&(this.V.compaction=t,this.invalidateLayout())}get breadthLimit(){return this.V.breadthLimit}set breadthLimit(t){this.V.breadthLimit!==t&&t>=0&&(this.V.breadthLimit=t,this.invalidateLayout())}get rowSpacing(){return this.V.rowSpacing}set rowSpacing(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.invalidateLayout())}get rowIndent(){return this.V.rowIndent}set rowIndent(t){this.V.rowIndent!==t&&t>=0&&(this.V.rowIndent=t,this.invalidateLayout())}get commentSpacing(){return this.V.commentSpacing}set commentSpacing(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.invalidateLayout())}get commentMargin(){return this.V.commentMargin}set commentMargin(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.invalidateLayout())}get setsPortSpot(){return this.V.setsPortSpot}set setsPortSpot(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.invalidateLayout())}get portSpot(){return this.V.portSpot}set portSpot(t){this.V.portSpot.equals(t)||(this.V.portSpot=t,this.invalidateLayout())}get setsChildPortSpot(){return this.V.setsChildPortSpot}set setsChildPortSpot(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.invalidateLayout())}get childPortSpot(){return this.V.childPortSpot}set childPortSpot(t){this.V.childPortSpot.equals(t)||(this.V.childPortSpot=t,this.invalidateLayout())}get alternateSorting(){return this.z.sorting}set alternateSorting(t){this.z.sorting!==t&&(this.z.sorting=t,this.invalidateLayout())}get alternateComparer(){return this.z.comparer}set alternateComparer(t){this.z.comparer!==t&&(this.z.comparer=t,this.invalidateLayout())}get alternateAngle(){return this.z.angle}set alternateAngle(t){this.z.angle!==t&&(t===0||t===90||t===180||t===270)&&(this.z.angle=t,this.invalidateLayout())}get alternateAlignment(){return this.z.alignment}set alternateAlignment(t){this.z.alignment!==t&&(this.z.alignment=t,this.invalidateLayout())}get alternateNodeIndent(){return this.z.nodeIndent}set alternateNodeIndent(t){this.z.nodeIndent!==t&&t>=0&&(this.z.nodeIndent=t,this.invalidateLayout())}get alternateNodeIndentPastParent(){return this.z.nodeIndentPastParent}set alternateNodeIndentPastParent(t){this.z.nodeIndentPastParent!==t&&t>=0&&t<=1&&(this.z.nodeIndentPastParent=t,this.invalidateLayout())}get alternateNodeSpacing(){return this.z.nodeSpacing}set alternateNodeSpacing(t){this.z.nodeSpacing!==t&&(this.z.nodeSpacing=t,this.invalidateLayout())}get alternateLayerSpacing(){return this.z.layerSpacing}set alternateLayerSpacing(t){this.z.layerSpacing!==t&&(this.z.layerSpacing=t,this.invalidateLayout())}get alternateLayerSpacingParentOverlap(){return this.z.layerSpacingParentOverlap}set alternateLayerSpacingParentOverlap(t){this.z.layerSpacingParentOverlap!==t&&t>=0&&t<=1&&(this.z.layerSpacingParentOverlap=t,this.invalidateLayout())}get alternateCompaction(){return this.z.compaction}set alternateCompaction(t){this.z.compaction!==t&&(t===30||t===31)&&(this.z.compaction=t,this.invalidateLayout())}get alternateBreadthLimit(){return this.z.breadthLimit}set alternateBreadthLimit(t){this.z.breadthLimit!==t&&t>=0&&(this.z.breadthLimit=t,this.invalidateLayout())}get alternateRowSpacing(){return this.z.rowSpacing}set alternateRowSpacing(t){this.z.rowSpacing!==t&&(this.z.rowSpacing=t,this.invalidateLayout())}get alternateRowIndent(){return this.z.rowIndent}set alternateRowIndent(t){this.z.rowIndent!==t&&t>=0&&(this.z.rowIndent=t,this.invalidateLayout())}get alternateCommentSpacing(){return this.z.commentSpacing}set alternateCommentSpacing(t){this.z.commentSpacing!==t&&(this.z.commentSpacing=t,this.invalidateLayout())}get alternateCommentMargin(){return this.z.commentMargin}set alternateCommentMargin(t){this.z.commentMargin!==t&&(this.z.commentMargin=t,this.invalidateLayout())}get alternateSetsPortSpot(){return this.z.setsPortSpot}set alternateSetsPortSpot(t){this.z.setsPortSpot!==t&&(this.z.setsPortSpot=t,this.invalidateLayout())}get alternatePortSpot(){return this.z.portSpot}set alternatePortSpot(t){this.z.portSpot.equals(t)||(this.z.portSpot=t,this.invalidateLayout())}get alternateSetsChildPortSpot(){return this.z.setsChildPortSpot}set alternateSetsChildPortSpot(t){this.z.setsChildPortSpot!==t&&(this.z.setsChildPortSpot=t,this.invalidateLayout())}get alternateChildPortSpot(){return this.z.childPortSpot}set alternateChildPortSpot(t){this.z.childPortSpot.equals(t)||(this.z.childPortSpot=t,this.invalidateLayout())}}v(Ge,"PathDefault",0),v(Ge,"PathDestination",1),v(Ge,"PathSource",2),v(Ge,"SortingForwards",10),v(Ge,"SortingReverse",11),v(Ge,"SortingAscending",12),v(Ge,"SortingDescending",13),v(Ge,"AlignmentCenterSubtrees",20),v(Ge,"AlignmentCenterChildren",21),v(Ge,"AlignmentStart",22),v(Ge,"AlignmentEnd",23),v(Ge,"AlignmentBus",24),v(Ge,"AlignmentBusBranching",25),v(Ge,"AlignmentTopLeftBus",26),v(Ge,"AlignmentBottomRightBus",27),v(Ge,"CompactionNone",30),v(Ge,"CompactionBlock",31),v(Ge,"StyleLayered",40),v(Ge,"StyleLastParents",41),v(Ge,"StyleAlternating",42),v(Ge,"StyleRootOnly",43),v(Ge,"ArrangementVertical",50),v(Ge,"ArrangementHorizontal",51),v(Ge,"ArrangementFixedRoots",52),v(Ge,"LayerIndividual",60),v(Ge,"LayerSiblings",61),v(Ge,"LayerUniform",62);class Nd extends kr{constructor(e){super(e)}createVertex(){return new is(this)}createEdge(){return new w0(this)}}class is extends Pr{constructor(t){super(t);v(this,"B");v(this,"mt");v(this,"ft");v(this,"gk");v(this,"mk");v(this,"pk");v(this,"yk");v(this,"wk");v(this,"xk");v(this,"bk");v(this,"Re");v(this,"vg");v(this,"Og");v(this,"pe");v(this,"ye");v(this,"Xt");v(this,"oi");v(this,"$y");v(this,"Zy");v(this,"Qy");v(this,"Ps");v(this,"_y");v(this,"tw");v(this,"iw");v(this,"ew");v(this,"sw");v(this,"nw");v(this,"ow");v(this,"rw");v(this,"lw");v(this,"hw");v(this,"aw");this.gk=!1,this.mk=null,this.pk=[],this.yk=0,this.wk=0,this.xk=0,this.bk=0,this.Re=null,this.B=new T(0,0),this.mt=new B(0,0),this.ft=new T(0,0),this.vg=null,this.Og=null,this.pe=10,this.ye=Pr.standardComparer,this.Xt=0,this.oi=21,this.$y=0,this.Zy=0,this.Qy=20,this.Ps=50,this._y=0,this.tw=31,this.iw=0,this.ew=25,this.sw=10,this.nw=10,this.ow=20,this.rw=!0,this.lw=z.Default,this.hw=!0,this.aw=z.Default}copyInheritedPropertiesFrom(t){t!==null&&(this.pe=t.sorting,this.ye=t.comparer,this.Xt=t.angle,this.oi=t.alignment,this.$y=t.nodeIndent,this.Zy=t.nodeIndentPastParent,this.Qy=t.nodeSpacing,this.Ps=t.layerSpacing,this._y=t.layerSpacingParentOverlap,this.tw=t.compaction,this.iw=t.breadthLimit,this.ew=t.rowSpacing,this.sw=t.rowIndent,this.nw=t.commentSpacing,this.ow=t.commentMargin,this.rw=t.setsPortSpot,this.lw=t.portSpot,this.hw=t.setsChildPortSpot,this.aw=t.childPortSpot)}get initialized(){return this.gk}set initialized(t){this.gk!==t&&(this.gk=t)}get parent(){return this.mk}set parent(t){this.mk!==t&&(this.mk=t)}get children(){return this.pk}set children(t){if(this.pk!==t){if(t!==null){const n=t.length;for(let i=0;i<n;i++)t[i]}this.pk=t}}get level(){return this.yk}set level(t){this.yk!==t&&(this.yk=t)}get descendantCount(){return this.wk}set descendantCount(t){this.wk!==t&&(this.wk=t)}get maxChildrenCount(){return this.xk}set maxChildrenCount(t){this.xk!==t&&(this.xk=t)}get maxGenerationCount(){return this.bk}set maxGenerationCount(t){this.bk!==t&&(this.bk=t)}get comments(){return this.Re}set comments(t){if(this.Re!==t){if(t!==null){const n=t.length;for(let i=0;i<n;i++)t[i]}this.Re=t}}get sorting(){return this.pe}set sorting(t){this.pe!==t&&(this.pe=t)}get comparer(){return this.ye}set comparer(t){this.ye!==t&&(this.ye=t)}get angle(){return this.Xt}set angle(t){this.Xt!==t&&(this.Xt=t)}get alignment(){return this.oi}set alignment(t){this.oi!==t&&(this.oi=t)}get nodeIndent(){return this.$y}set nodeIndent(t){this.$y!==t&&(this.$y=t)}get nodeIndentPastParent(){return this.Zy}set nodeIndentPastParent(t){this.Zy!==t&&(this.Zy=t)}get nodeSpacing(){return this.Qy}set nodeSpacing(t){this.Qy!==t&&(this.Qy=t)}get layerSpacing(){return this.Ps}set layerSpacing(t){this.Ps!==t&&(this.Ps=t)}get layerSpacingParentOverlap(){return this._y}set layerSpacingParentOverlap(t){this._y!==t&&(this._y=t)}get compaction(){return this.tw}set compaction(t){this.tw!==t&&(this.tw=t)}get breadthLimit(){return this.iw}set breadthLimit(t){this.iw!==t&&(this.iw=t)}get rowSpacing(){return this.ew}set rowSpacing(t){this.ew!==t&&(this.ew=t)}get rowIndent(){return this.sw}set rowIndent(t){this.sw!==t&&(this.sw=t)}get commentSpacing(){return this.nw}set commentSpacing(t){this.nw!==t&&(this.nw=t)}get commentMargin(){return this.ow}set commentMargin(t){this.ow!==t&&(this.ow=t)}get setsPortSpot(){return this.rw}set setsPortSpot(t){this.rw!==t&&(this.rw=t)}get portSpot(){return this.lw}set portSpot(t){this.lw.equals(t)||(this.lw=t)}get setsChildPortSpot(){return this.hw}set setsChildPortSpot(t){this.hw!==t&&(this.hw=t)}get childPortSpot(){return this.aw}set childPortSpot(t){this.aw.equals(t)||(this.aw=t)}get childrenCount(){return this.children.length}get relativePosition(){return this.B}set relativePosition(t){this.B.set(t)}get subtreeSize(){return this.mt}set subtreeSize(t){this.mt.set(t)}get subtreeOffset(){return this.ft}set subtreeOffset(t){this.ft.set(t)}}class w0 extends Io{constructor(t){super(t);v(this,"kk");this.kk=new T(0,0)}commit(){const t=this.link;if(t===null||t.isAvoiding)return;const n=this.network.layout;let i=null,r=null;switch(n.hs){case 1:i=this.fromVertex,r=this.toVertex;break;case 2:i=this.toVertex,r=this.fromVertex;break;default:o.o("Unhandled path value "+n.hs.toString())}if(i===null||r===null)return;const a=this.kk;if(a.x===0&&a.y===0){this.YI(i,r);return}const l=i.bounds,u=n.orthoAngle(i),c=n.computeLayerSpacing(i),f=i.rowSpacing;t.updateRoute();const m=t.curve===9,p=t.isOrthogonal;let y=0,w,b;if(t.startRoute(),p||m){for(y=2;t.pointsCount>4;)t.removePoint(2);w=t.getPoint(1),b=t.getPoint(2)}else{for(y=1;t.pointsCount>3;)t.removePoint(1);w=t.getPoint(0),b=t.getPoint(t.pointsCount-1)}const C=t.getPoint(t.pointsCount-1);let k=0;u===0?(i.alignment===23?(k=l.bottom+a.y,a.y===0&&w.y>C.y+i.rowIndent&&(k=Math.min(k,Math.max(w.y,k-n.computeNodeIndent(i))))):i.alignment===22?(k=l.top+a.y,a.y===0&&w.y<C.y-i.rowIndent&&(k=Math.max(k,Math.min(w.y,k+n.computeNodeIndent(i))))):k=l.y+l.height/2+a.y,m?(t.insertPointAt(y,w.x,k),y++,t.insertPointAt(y,l.right+c,k),y++,t.insertPointAt(y,l.right+c+(a.x-f)/3,k),y++,t.insertPointAt(y,l.right+c+(a.x-f)*2/3,k),y++,t.insertPointAt(y,l.right+c+(a.x-f),k),y++,t.insertPointAt(y,b.x,k),y++):(p&&(t.insertPointAt(y,l.right+c/2,w.y),y++),t.insertPointAt(y,l.right+c/2,k),y++,t.insertPointAt(y,l.right+c+a.x-(p?f/2:f),k),y++,p&&(t.insertPointAt(y,t.getPoint(y-1).x,b.y),y++))):u===90?(i.alignment===23?(k=l.right+a.x,a.x===0&&w.x>C.x+i.rowIndent&&(k=Math.min(k,Math.max(w.x,k-n.computeNodeIndent(i))))):i.alignment===22?(k=l.left+a.x,a.x===0&&w.x<C.x-i.rowIndent&&(k=Math.max(k,Math.min(w.x,k+n.computeNodeIndent(i))))):k=l.x+l.width/2+a.x,m?(t.insertPointAt(y,k,w.y),y++,t.insertPointAt(y,k,l.bottom+c),y++,t.insertPointAt(y,k,l.bottom+c+(a.y-f)/3),y++,t.insertPointAt(y,k,l.bottom+c+(a.y-f)*2/3),y++,t.insertPointAt(y,k,l.bottom+c+(a.y-f)),y++,t.insertPointAt(y,k,b.y),y++):(p&&(t.insertPointAt(y,w.x,l.bottom+c/2),y++),t.insertPointAt(y,k,l.bottom+c/2),y++,t.insertPointAt(y,k,l.bottom+c+a.y-(p?f/2:f)),y++,p&&(t.insertPointAt(y,b.x,t.getPoint(y-1).y),y++))):u===180?(i.alignment===23?(k=l.bottom+a.y,a.y===0&&w.y>C.y+i.rowIndent&&(k=Math.min(k,Math.max(w.y,k-n.computeNodeIndent(i))))):i.alignment===22?(k=l.top+a.y,a.y===0&&w.y<C.y-i.rowIndent&&(k=Math.max(k,Math.min(w.y,k+n.computeNodeIndent(i))))):k=l.y+l.height/2+a.y,m?(t.insertPointAt(y,w.x,k),y++,t.insertPointAt(y,l.left-c,k),y++,t.insertPointAt(y,l.left-c+(a.x+f)/3,k),y++,t.insertPointAt(y,l.left-c+(a.x+f)*2/3,k),y++,t.insertPointAt(y,l.left-c+(a.x+f),k),y++,t.insertPointAt(y,b.x,k),y++):(p&&(t.insertPointAt(y,l.left-c/2,w.y),y++),t.insertPointAt(y,l.left-c/2,k),y++,t.insertPointAt(y,l.left-c+a.x+(p?f/2:f),k),y++,p&&(t.insertPointAt(y,t.getPoint(y-1).x,b.y),y++))):u===270?(i.alignment===23?(k=l.right+a.x,a.x===0&&w.x>C.x+i.rowIndent&&(k=Math.min(k,Math.max(w.x,k-n.computeNodeIndent(i))))):i.alignment===22?(k=l.left+a.x,a.x===0&&w.x<C.x-i.rowIndent&&(k=Math.max(k,Math.min(w.x,k+n.computeNodeIndent(i))))):k=l.x+l.width/2+a.x,m?(t.insertPointAt(y,k,w.y),y++,t.insertPointAt(y,k,l.top-c),y++,t.insertPointAt(y,k,l.top-c+(a.y+f)/3),y++,t.insertPointAt(y,k,l.top-c+(a.y+f)*2/3),y++,t.insertPointAt(y,k,l.top-c+(a.y+f)),y++,t.insertPointAt(y,k,b.y),y++):(p&&(t.insertPointAt(y,w.x,l.top-c/2),y++),t.insertPointAt(y,k,l.top-c/2),y++,t.insertPointAt(y,k,l.top-c+a.y+(p?f/2:f)),y++,p&&(t.insertPointAt(y,b.x,t.getPoint(y-1).y),y++))):o.o("Invalid angle "+u),t.commitRoute()}YI(t,n){const i=this.link,r=this.network.layout,a=r.orthoAngle(t),l=r.orthoAngle(n);if(a===l)return;const u=r.computeLayerSpacing(t),c=t.bounds,f=n.bounds;if(a===0&&f.left-c.right<u+1||a===90&&f.top-c.bottom<u+1||a===180&&c.left-f.right<u+1||a===270&&c.top-f.bottom<u+1)return;i.updateRoute();const m=i.curve===9,p=i.isOrthogonal,y=this.fromVertex,w=r.isBusAlignment(y.alignment);if(i.startRoute(),a===0){const b=c.right+u/2;if(m){if(i.pointsCount===4){const C=i.getPoint(3).y;i.setPointAt(1,b-20,i.getPoint(1).y),i.insertPointAt(2,b-20,C),i.insertPointAt(3,b,C),i.insertPointAt(4,b+20,C),i.setPointAt(5,i.getPoint(5).x,C)}}else p?w?i.setPointAt(3,i.getPoint(2).x,i.getPoint(4).y):i.pointsCount===6&&(i.setPointAt(2,b,i.getPoint(2).y),i.setPointAt(3,b,i.getPoint(3).y)):i.pointsCount===4?i.insertPointAt(2,b,i.getPoint(2).y):i.pointsCount===3?i.setPointAt(1,b,i.getPoint(2).y):i.pointsCount===2&&i.insertPointAt(1,b,i.getPoint(1).y)}else if(a===90){const b=c.bottom+u/2;if(m){if(i.pointsCount===4){const C=i.getPoint(3).x;i.setPointAt(1,i.getPoint(1).x,b-20),i.insertPointAt(2,C,b-20),i.insertPointAt(3,C,b),i.insertPointAt(4,C,b+20),i.setPointAt(5,C,i.getPoint(5).y)}}else p?w?i.setPointAt(3,i.getPoint(2).x,i.getPoint(4).y):i.pointsCount===6&&(i.setPointAt(2,i.getPoint(2).x,b),i.setPointAt(3,i.getPoint(3).x,b)):i.pointsCount===4?i.insertPointAt(2,i.getPoint(2).x,b):i.pointsCount===3?i.setPointAt(1,i.getPoint(2).x,b):i.pointsCount===2&&i.insertPointAt(1,i.getPoint(1).x,b)}else if(a===180){const b=c.left-u/2;if(m){if(i.pointsCount===4){const C=i.getPoint(3).y;i.setPointAt(1,b+20,i.getPoint(1).y),i.insertPointAt(2,b+20,C),i.insertPointAt(3,b,C),i.insertPointAt(4,b-20,C),i.setPointAt(5,i.getPoint(5).x,C)}}else p?w?i.setPointAt(3,i.getPoint(2).x,i.getPoint(4).y):i.pointsCount===6&&(i.setPointAt(2,b,i.getPoint(2).y),i.setPointAt(3,b,i.getPoint(3).y)):i.pointsCount===4?i.insertPointAt(2,b,i.getPoint(2).y):i.pointsCount===3?i.setPointAt(1,b,i.getPoint(2).y):i.pointsCount===2&&i.insertPointAt(1,b,i.getPoint(1).y)}else if(a===270){const b=c.top-u/2;if(m){if(i.pointsCount===4){const C=i.getPoint(3).x;i.setPointAt(1,i.getPoint(1).x,b+20),i.insertPointAt(2,C,b+20),i.insertPointAt(3,C,b),i.insertPointAt(4,C,b-20),i.setPointAt(5,C,i.getPoint(5).y)}}else p?w?i.setPointAt(3,i.getPoint(2).x,i.getPoint(4).y):i.pointsCount===6&&(i.setPointAt(2,i.getPoint(2).x,b),i.setPointAt(3,i.getPoint(3).x,b)):i.pointsCount===4?i.insertPointAt(2,i.getPoint(2).x,b):i.pointsCount===3?i.setPointAt(1,i.getPoint(2).x,b):i.pointsCount===2&&i.insertPointAt(1,i.getPoint(1).x,b)}i.commitRoute()}get fromVertex(){return this.We}set fromVertex(t){this.We!==t&&(this.We=t)}get toVertex(){return this.Je}set toVertex(t){this.Je!==t&&(this.Je=t)}get relativePoint(){return this.kk}set relativePoint(t){this.kk.set(t)}}class Hi{constructor(){}}v(Hi,"Light",{colors:{text:"#0a0a0a",comment:"#ca8a04",link:"#0a0a0a",group:"#a3a3a344",outline:"#a3a3a3",selection:"#0ea5e9",div:"#fff",gridMinor:"#e5e5e5",gridMajor:"#a3a3a3",overviewBox:"#c026d3",tempLink:"#2563eb",tempPort:"#c026d3",adornmentFill:"#0ea5e9",adornmentStroke:"#1e40af",dragSelect:"#c026d3"},fonts:{normal:"10pt sans-serif",bold:"bold 12pt sans-serif"},numbers:{group:1,selection:3},margins:{group:new tt(5)},arrowheads:{toArrow:"Standard"}}),v(Hi,"Dark",{colors:{text:"#f5f5f5",comment:"#facc15",link:"#f5f5f5",group:"#a3a3a388",outline:"#a3a3a3",selection:"#38bdf8",div:"#171717",gridMinor:"#262626",gridMajor:"#404040",overviewBox:"#e879f9",tempLink:"#60a5fa",tempPort:"#e879f9",adornmentFill:"#38bdf8",adornmentStroke:"#2563eb",dragSelect:"#e879f9"},fonts:{normal:"10pt sans-serif",bold:"bold 12pt sans-serif"},numbers:{group:1,selection:3},margins:{group:new tt(5)},arrowheads:{toArrow:"Standard"}});const $o=class $o{constructor(e){v(this,"es",new Set);v(this,"eu",new W);v(this,"Pk","light");v(this,"Sk","light");v(this,"Mk",!1);v(this,"Ig","light");v(this,"SD",e=>{const t=e.matches?"dark":"light";t!==this.Ig&&(this.Ig=t,this.Sk==="system"&&this.cw())});e&&Object.assign(this,e),e!=null&&e.themeMap||(this.eu.set("light",{colors:{...Hi.Light.colors},fonts:{...Hi.Light.fonts},numbers:{...Hi.Light.numbers},margins:{...Hi.Light.margins},arrowheads:{...Hi.Light.arrowheads}}),this.eu.set("dark",{colors:{...Hi.Dark.colors},fonts:{...Hi.Dark.fonts},numbers:{...Hi.Dark.numbers},margins:{...Hi.Dark.margins},arrowheads:{...Hi.Dark.arrowheads}})),s.matchMedia&&(this.Ig=s.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}get themeMap(){return this.eu}set themeMap(e){this.eu!==e&&(this.eu=e,this.cw())}get defaultTheme(){return this.Pk}set defaultTheme(e){this.Pk!==e&&(o.i(e,"string",$o,"defaultTheme"),this.Pk=e,this.cw())}get currentTheme(){return this.Sk}set currentTheme(e){this.Sk!==e&&(o.i(e,"string",$o,"currentTheme"),this.Sk=e,this.cw())}get changesDivBackground(){return this.Mk}set changesDivBackground(e){if(this.Mk!==e&&(this.Mk=e,e))for(const t of this.es)t.setDivBackground(this.findValue("div","","fill")),t.v("ThemeChanged",this)}get preferredColorScheme(){return this.Ig}addDiagram(e){return this.es.add(e),this.HN(e),this}removeDiagram(e){return this.es.delete(e),this.HN(e),this}VF(){var e;this.es.size===0&&s.matchMedia&&((e=s.matchMedia("(prefers-color-scheme: dark)"))==null||e.addEventListener("change",this.SD))}zF(){var e;this.es.size===0&&s.matchMedia&&((e=s.matchMedia("(prefers-color-scheme: dark)"))==null||e.removeEventListener("change",this.SD))}set(e,t){e===""&&(e=this.Pk),e==="system"&&(e=this.Ig);let n=this.eu.get(e);return n?n=this.MD(n,t):n=t,this.eu.set(e,n),this.cw(),this}findValue(e,t,n){return this.getValue(this.findTheme(this.currentTheme),e,t,n)||this.getValue(this.findTheme(this.defaultTheme),e,t,n)}getValue(e,t,n,i){var u;if(!e)return;n==null&&(n="");let r=e;const a=c=>{if(r===void 0||c==="")return;if(typeof c=="number"||!(Array.isArray(c)||c.includes(".")))return r[c];const f=Array.isArray(c)?c:c.split(".");for(let m=0;m<f.length;m++){const p=f[m];if(p!==""&&(r=r[p],r===void 0))return}return r},l=()=>{if(!(n!==""&&(r=a(n),r===void 0)))return Array.isArray(r)&&typeof t=="number"?r=r[t%r.length]:r=a(t),r};if(r=l(),r===void 0&&typeof i=="string"&&i.length>0){let c=(u=e.targetPropertyMap)==null?void 0:u.get(i);if(c?r=e[c]:(c=$o.GI.get(i),r=c?e[c]:e.colors),r=l(),r!==void 0)return r}return r}findTheme(e){return this.themeMap.get(e==="system"?this.Ig:e)}HN(e){const t=e.skipsUndoManager;e.skipsUndoManager=!0,e.updateAllThemeBindings(),this.Mk&&e.setDivBackground(this.findValue("div","","fill")),e.skipsUndoManager=t,e.v("ThemeChanged",this)}cw(){for(const e of this.es)this.HN(e)}MD(e,t){for(const n in t)if(o.fw(t,n))try{t[n].constructor===Object?e[n]=this.MD(e[n]??{},t[n]):e[n]=t[n]}catch{delete e[n]}return e}};v($o,"GI",new Map([["background","colors"],["defaultColumnSeparatorStroke","colors"],["defaultRowSeparatorStroke","colors"],["shadowColor","colors"],["fill","colors"],["stroke","colors"],["font","fonts"],["angle","numbers"],["fromEndSegmentLength","numbers"],["fromShortLength","numbers"],["height","numbers"],["opacity","numbers"],["scale","numbers"],["toEndSegmentLength","numbers"],["toShortLength","numbers"],["width","numbers"],["defaultColumnSeparatorStrokeWidth","numbers"],["defaultRowSeparatorStrokeWidth","numbers"],["shadowBlur","numbers"],["corner","numbers"],["curviness","numbers"],["smoothness","numbers"],["parameter1","numbers"],["parameter2","numbers"],["strokeWidth","numbers"],["strokeDashOffset","numbers"],["maxLines","numbers"],["spacingAbove","numbers"],["spacingBelow","numbers"],["position","points"],["shadowOffset","points"],["desiredSize","sizes"],["maxSize","sizes"],["minSize","sizes"],["margin","margins"],["defaultSeparatorPadding","margins"],["padding","margins"],["alignment","spots"],["alignmentFocus","spots"],["fromSpot","spots"],["toSpot","spots"],["defaultAlignment","spots"],["spot1","spots"],["spot2","spots"],["verticalAlignment","spots"],["imageAlignment","spots"],["fromArrow","arrowheads"],["toArrow","arrowheads"]]));let Ua=$o;class S0{constructor(){v(this,"Mt");v(this,"p");v(this,"Oi");v(this,"fl");this.p=le.ym(),this.Mt="",this.Oi=!0,this.fl=!0}get name(){return this.Mt}set name(e){this.Mt=e}get isEnabled(){return this.Oi}set isEnabled(e){this.Oi=e}get isRealtime(){return this.fl}set isRealtime(e){this.fl=e}get diagram(){return this.p}set diagram(e){this.p!==e&&(this.p=e,e.xl=!0,e.requestUpdate())}invalidateRouter(){this.p!==null&&(this.p.xl=!0,this.p.requestUpdate())}canRoute(e){if(!this.isEnabled)return!1;const t=this.diagram;return!(t&&(!this.isRealtime&&t.yu||t.animationManager.isTicking))}routeLinks(e,t){}toString(){return this.name!==""?this.name+" Router":o.sn(this.constructor)}}class vC extends S0{constructor(e){super(),this.name="AvoidsNodes",e&&Object.assign(this,e)}canRoute(e){return(e instanceof le?e.jm:e.diagram.jm)?super.canRoute(e):!1}routeLinks(e,t){t=t instanceof le?null:t;const n=e.iterator,i=this.diagram.getPositions(!0,t,null);for(;n.next();){const r=n.value;if(!r.isAvoiding||t&&r.containingGroup!==t||r.toNode===null||r.fromNode===null||r.pointsCount<4)continue;r.startRoute();const a=r.pointsCount,l=r.getPoint(1),u=r.getPoint(a-2),c=r.fromNode.actualBounds.copy();c.inflate(Gt.va,Gt.va),c.unionPoint(r.getPoint(0));const f=r.toNode.actualBounds.copy();f.inflate(Gt.va,Gt.va),f.unionPoint(r.getPoint(a-1)),this.jI(r,c,f,i)&&this.HI(r,l,r.iN,u,r.eN,c,f,i),r.commitRoute()}}jI(e,t,n,i){const r=e.diagram,a=e.pointsCount;if(r===null||e.fromNode===e.toNode||e.layer.isTemporary||t.containsPoint(e.getPoint(a-1))&&!e.toNode.isMemberOf(e.fromNode)||n.containsPoint(e.getPoint(0))&&!e.fromNode.isMemberOf(e.toNode)||!e.isOrthogonal)return!1;if(e.segmentIndex===17)return!0;const l=e.getPoint(1),u=e.getPoint(a-2),c=e.getPoint(2);if(!i.isUnoccupied(Math.min(l.x,c.x),Math.min(l.y,c.y),Math.abs(l.x-c.x),Math.abs(l.y-c.y)))return!0;for(let m=2;m<a-3;m++){const p=e.getPoint(m),y=e.getPoint(m+1);if(!i.isUnoccupied(Math.min(p.x,y.x),Math.min(p.y,y.y),Math.abs(p.x-y.x),Math.abs(p.y-y.y)))return!0}const f=e.getPoint(a-3);return!i.isUnoccupied(Math.min(f.x,u.x),Math.min(f.y,u.y),Math.abs(f.x-u.x),Math.abs(f.y-u.y))}HI(e,t,n,i,r,a,l,u){const c=e.diagram,f=t,m=i;let p=null,y=null;if(c.isVirtualized){const C=u.bounds.copy(),k=e.getPoint(2),N=e.getPoint(e.pointsCount-3);C.inflate(-u.cellWidth,-u.cellHeight);const F=T.l();u.zd(t.x,t.y)||(R.ml(C.x,C.y,C.x+C.width,C.y+C.height,t.x,t.y,k.x,k.y,F)?(p=t=F.copy(),n=F.directionPoint(k)):R.ml(C.x,C.y,C.x+C.width,C.y+C.height,k.x,k.y,N.x,N.y,F)?(p=t=F.copy(),n=F.directionPoint(N)):R.ml(C.x,C.y,C.x+C.width,C.y+C.height,N.x,N.y,i.x,i.y,F)&&(p=t=F.copy(),n=F.directionPoint(i))),u.zd(i.x,i.y)||(R.ml(C.x,C.y,C.x+C.width,C.y+C.height,i.x,i.y,N.x,N.y,F)?(y=i=F.copy(),r=N.directionPoint(F)):R.ml(C.x,C.y,C.x+C.width,C.y+C.height,N.x,N.y,k.x,k.y,F)?(y=i=F.copy(),r=k.directionPoint(F)):R.ml(C.x,C.y,C.x+C.width,C.y+C.height,k.x,k.y,t.x,t.y,F)&&(y=i=F.copy(),r=t.directionPoint(F))),T.s(F)}const w=a.copy().unionRect(l);w.inflate(u.cellWidth*u.Gc,u.cellHeight*u.Gc),u.rT(t,n,i,r,w,!0);let b=u.fo(i.x,i.y);if(!u.by&&b>=sr.Vd&&(u.zL(),w.inflate(u.cellWidth*u.vM,u.cellHeight*u.OM),u.rT(t,n,i,r,w,!1),b=u.fo(i.x,i.y)),!u.by&&b<sr.Vd&&!u.aO(i.x,i.y)){e.points.removeRange(2,e.pointsCount-3),this.qN(e,u,i.x,i.y,r,!0);const C=0,k=90,N=180,F=270,D=e.getPoint(2);if(e.pointsCount<4)n===C||n===N?(D.x=t.x,D.y=i.y):(D.x=i.x,D.y=t.y),e.setPointAt(2,D.x,D.y),e.insertPointAt(3,D.x,D.y);else{const E=e.getPoint(3);if(n===C||n===N)if(R.u(D.x,E.x)){const U=n===C?Math.max(D.x,t.x):Math.min(D.x,t.x);e.setPointAt(2,U,t.y),e.setPointAt(3,U,E.y)}else R.u(D.y,E.y)?(Math.abs(t.y-D.y)<=u.cellHeight/2&&(e.setPointAt(2,D.x,t.y),e.setPointAt(3,E.x,t.y)),e.insertPointAt(2,D.x,t.y)):e.setPointAt(2,t.x,D.y);else if(n===k||n===F)if(R.u(D.y,E.y)){const U=n===k?Math.max(D.y,t.y):Math.min(D.y,t.y);e.setPointAt(2,t.x,U),e.setPointAt(3,E.x,U)}else R.u(D.x,E.x)?(Math.abs(t.x-D.x)<=u.cellWidth/2&&(e.setPointAt(2,t.x,D.y),e.setPointAt(3,t.x,E.y)),e.insertPointAt(2,t.x,D.y)):e.setPointAt(2,D.x,t.y)}if(p!==null){const E=e.getPoint(1),U=e.getPoint(2);E.x!==U.x&&E.y!==U.y?n===C||n===N?e.insertPointAt(2,E.x,U.y):e.insertPointAt(2,U.x,E.y):n===C||n===N?e.insertPointAt(2,f.x,p.y):e.insertPointAt(2,p.x,f.y)}y!==null&&(r===C||r===N?e.insertPointAt(e.pointsCount-2,m.x,y.y):e.insertPointAt(e.pointsCount-2,y.x,m.y))}}qN(e,t,n,i,r,a){const l=t.cellWidth,u=t.cellHeight;let c=t.fo(n,i),f=n,m=i,p=f,y=m;for(r===0?p+=l:r===90?y+=u:r===180?p-=l:y-=u,e.oN&&c>sr.Ba&&t.fo(p,y)!==c-1&&(t.fo(f-l,m)===c-1?(r=180,p=f-l,y=m):t.fo(f+l,m)===c-1?(r=0,p=f+l,y=m):t.fo(f,m-u)===c-1?(r=270,p=f,y=m-u):t.fo(f,m+u)===c-1&&(r=90,p=f,y=m+u));c>sr.Ba&&t.fo(p,y)===c-1;)f=p,m=y,r===0?p+=l:r===90?y+=u:r===180?p-=l:y-=u,c-=1;if(a?c>sr.Ba&&(r===180||r===0?f=Math.floor(f/l)*l+l/2:(r===90||r===270)&&(m=Math.floor(m/u)*u+u/2)):(f=Math.floor(f/l)*l+l/2,m=Math.floor(m/u)*u+u/2),c>sr.Ba){let w=r,b=f,C=m;if(r===0?(w=90,C+=u):r===90?(w=180,b-=l):r===180?(w=270,C-=u):r===270&&(w=0,b+=l),t.fo(b,C)===c-1)this.qN(e,t,b,C,w,!1);else{let k=f,N=m;r===0?(w=270,N-=u):r===90?(w=0,k+=l):r===180?(w=90,N+=u):r===270&&(w=180,k-=l),t.fo(k,N)===c-1&&this.qN(e,t,k,N,w,!1)}}e.insertPointAt(e.pointsCount-2,f,m)}}Ht.prototype.initializeStandardTools=function(){this.Jt("Action",new Ze,this.mouseDownTools),this.Jt("Relinking",new je,this.mouseDownTools),this.Jt("LinkReshaping",new pe,this.mouseDownTools),this.Jt("Rotating",new Ve,this.mouseDownTools),this.Jt("Resizing",new Mn,this.mouseDownTools),this.Jt("Linking",new me,this.mouseMoveTools),this.Jt("Dragging",new Ut,this.mouseMoveTools),this.Jt("DragSelecting",new Qe,this.mouseMoveTools),this.Jt("Panning",new xs,this.mouseMoveTools),this.Jt("ContextMenu",new De,this.mouseUpTools),this.Jt("TextEditing",new ti,this.mouseUpTools),this.Jt("ClickCreating",new Le,this.mouseUpTools),this.Jt("ClickSelecting",new Bn,this.mouseUpTools)},le.gM("GraphLinksModel",mC),le.gM("TreeModel",pC);const wh=s.go,Ka={get version(){return le.version},Group:Vt,List:M,Set:L,Map:W,Point:T,Size:B,Rect:I,Margin:tt,Spot:z,Geometry:rt,PathFigure:dt,PathSegment:ct,InputEvent:Et,DiagramEvent:Zt,ChangedEvent:ft,Model:Wt,GraphLinksModel:jo,TreeModel:zo,Binding:rr,ThemeBinding:Bo,Transaction:ht,UndoManager:gt,CommandHandler:_e,Tool:St,DraggingTool:Ut,DraggingInfo:bs,DraggingOptions:wr,LinkingBaseTool:ge,LinkingTool:me,RelinkingTool:je,LinkReshapingTool:pe,ResizingTool:Mn,RotatingTool:Ve,ClickSelectingTool:Bn,ActionTool:Ze,ClickCreatingTool:Le,HTMLInfo:Dn,ContextMenuTool:De,DragSelectingTool:Qe,PanningTool:xs,TextEditingTool:ti,ToolManager:Ht,Animation:ei,AnimationManager:ns,AnimationTrigger:Pi,Layer:we,Diagram:le,Palette:xn,Overview:ln,Brush:ve,GraphObject:Re,Panel:Kt,RowColumnDefinition:ui,Shape:Qt,TextBlock:Je,Picture:Vi,Part:xe,Adornment:ie,Node:It,Link:Gt,Placeholder:$i,Layout:Yn,LayoutNetwork:kr,LayoutVertex:Pr,LayoutEdge:Io,GridLayout:xh,PanelLayout:de,CircularLayout:ci,CircularNetwork:h0,CircularVertex:u0,CircularEdge:c0,ForceDirectedLayout:yC,ForceDirectedNetwork:d0,ForceDirectedVertex:f0,ForceDirectedEdge:g0,LayeredDigraphLayout:hn,LayeredDigraphNetwork:v0,LayeredDigraphVertex:Ha,LayeredDigraphEdge:x0,TreeLayout:Ge,TreeNetwork:Nd,TreeVertex:is,TreeEdge:w0,Themes:Hi,ThemeManager:Ua,Router:S0,AnimationStyle:nr,AutoScale:Gn,CycleMode:Us,Flip:Fn,TextFormat:r0,ImageStretch:id,LayoutConditions:o0,LinkAdjusting:od,Curve:ld,Routing:ad,Orientation:bn,TextOverflow:s0,PortSpreading:a0,ScrollMode:Do,CollapsePolicy:no,Sizing:_c,TriggerStart:Ii,Stretch:On,ViewboxStretch:i0,Wrap:ed,BrushType:Xn,ColorSpace:Sr,GeometryStretch:lt,GeometryType:ot,SegmentType:Pt,BindingMode:bh,ChangeType:wt,CircularArrangement:fd,CircularDirection:gd,CircularNodeDiameterFormula:pd,CircularSorting:md,GridAlignment:ud,GridArrangement:cd,GridSorting:dd,LayeredDigraphAggressive:bd,LayeredDigraphAlign:y0,LayeredDigraphCycleRemove:yd,LayeredDigraphInit:xd,LayeredDigraphLayering:vd,LayeredDigraphPack:p0,TreeAlignment:Cd,TreeArrangement:Md,TreeCompaction:kd,TreeLayerStyle:b0,TreePath:wd,TreeSorting:Sd,TreeStyle:Pd,GestureMode:Bt,LinkingDirection:ae,ReshapingBehavior:Fe,TextEditingAccept:$e,TextEditingStarting:vn,TextEditingState:li,WheelMode:Ct};for(let A in Ka){let e=Ka[A];typeof e=="function"&&(e.className=A)}typeof wh=="object"&&wh.version&&o.ii("WARNING: a `go` object on the root object is already defined.  "+("Debug"in wh?"debug ":"")+"version: "+wh.version+", replaced with version: "+Ka.version),le.prototype.go=Ka,s.go=Ka})();const bt=typeof global<"u"?global.go:self.go;bt.Group;bt.List;bt.Set;bt.Map;const Dy=bt.Point,el=bt.Size;bt.Rect;const Y2=bt.Margin,As=bt.Spot;bt.Geometry;bt.PathFigure;bt.PathSegment;bt.InputEvent;bt.DiagramEvent;bt.ChangedEvent;const Ng=bt.Model,W2=bt.GraphLinksModel;bt.TreeModel;bt.Binding;bt.ThemeBinding;bt.Transaction;bt.UndoManager;bt.CommandHandler;bt.Tool;bt.DraggingTool;bt.DraggingInfo;bt.DraggingOptions;bt.LinkingBaseTool;bt.LinkingTool;bt.RelinkingTool;bt.LinkReshapingTool;bt.ResizingTool;bt.RotatingTool;bt.ClickSelectingTool;bt.ActionTool;bt.ClickCreatingTool;bt.HTMLInfo;bt.ContextMenuTool;bt.DragSelectingTool;bt.PanningTool;bt.TextEditingTool;bt.ToolManager;bt.Animation;bt.AnimationManager;bt.AnimationTrigger;bt.Layer;const q2=bt.Diagram,J2=bt.Palette;bt.Overview;const Z2=bt.Brush;bt.GraphObject;const Q2=bt.Panel;bt.RowColumnDefinition;const Ys=bt.Shape,oo=bt.TextBlock;bt.Picture;bt.Part;bt.Adornment;const Uo=bt.Node,_2=bt.Link;bt.Placeholder;bt.Layout;bt.LayoutNetwork;bt.LayoutVertex;bt.LayoutEdge;bt.GridLayout;bt.PanelLayout;bt.CircularLayout;bt.CircularNetwork;bt.CircularVertex;bt.CircularEdge;bt.ForceDirectedLayout;bt.ForceDirectedNetwork;bt.ForceDirectedVertex;bt.ForceDirectedEdge;bt.LayeredDigraphLayout;bt.LayeredDigraphNetwork;bt.LayeredDigraphVertex;bt.LayeredDigraphEdge;bt.TreeLayout;bt.TreeNetwork;bt.TreeVertex;bt.TreeEdge;bt.Themes;bt.ThemeManager;bt.Router;bt.version;bt.AnimationStyle;bt.AutoScale;const tP=bt.Curve;bt.CycleMode;bt.Flip;bt.ImageStretch;bt.LayoutConditions;bt.LinkAdjusting;bt.Orientation;bt.PortSpreading;const tf=bt.Routing;bt.ScrollMode;bt.CollapsePolicy;bt.Sizing;bt.TriggerStart;bt.Stretch;bt.TextFormat;bt.TextOverflow;bt.ViewboxStretch;const nl=bt.Wrap;bt.BrushType;bt.ColorSpace;bt.GeometryStretch;bt.GeometryType;bt.SegmentType;bt.BindingMode;bt.ChangeType;bt.CircularArrangement;bt.CircularDirection;bt.CircularNodeDiameterFormula;bt.CircularSorting;bt.GridAlignment;bt.GridArrangement;bt.GridSorting;bt.LayeredDigraphAggressive;bt.LayeredDigraphAlign;bt.LayeredDigraphCycleRemove;bt.LayeredDigraphInit;bt.LayeredDigraphLayering;bt.LayeredDigraphPack;bt.TreeAlignment;bt.TreeArrangement;bt.TreeCompaction;bt.TreeLayerStyle;bt.TreePath;bt.TreeSorting;bt.TreeStyle;bt.GestureMode;bt.LinkingDirection;bt.ReshapingBehavior;bt.TextEditingAccept;bt.TextEditingStarting;bt.TextEditingState;bt.WheelMode;var Eb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var o={}.hasOwnProperty;function h(){for(var x="",S=0;S<arguments.length;S++){var P=arguments[S];P&&(x=g(x,d(P)))}return x}function d(x){if(typeof x=="string"||typeof x=="number")return x;if(typeof x!="object")return"";if(Array.isArray(x))return h.apply(null,x);if(x.toString!==Object.prototype.toString&&!x.toString.toString().includes("[native code]"))return x.toString();var S="";for(var P in x)o.call(x,P)&&x[P]&&(S=g(S,P));return S}function g(x,S){return S?x?x+" "+S:x+S:x}s.exports?(h.default=h,s.exports=h):window.classNames=h})()})(Eb);var eP=Eb.exports;const Ce=Nm(eP);function En(){return En=Object.assign?Object.assign.bind():function(s){for(var o=1;o<arguments.length;o++){var h=arguments[o];for(var d in h)({}).hasOwnProperty.call(h,d)&&(s[d]=h[d])}return s},En.apply(null,arguments)}var Db={exports:{}},Ke={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp=Symbol.for("react.element"),Cp=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),Pc=Symbol.for("react.strict_mode"),Mc=Symbol.for("react.profiler"),Nc=Symbol.for("react.provider"),Tc=Symbol.for("react.context"),nP=Symbol.for("react.server_context"),Ac=Symbol.for("react.forward_ref"),Lc=Symbol.for("react.suspense"),Ec=Symbol.for("react.suspense_list"),Dc=Symbol.for("react.memo"),Oc=Symbol.for("react.lazy"),iP=Symbol.for("react.offscreen"),Ob;Ob=Symbol.for("react.module.reference");function vs(s){if(typeof s=="object"&&s!==null){var o=s.$$typeof;switch(o){case Sp:switch(s=s.type,s){case kc:case Mc:case Pc:case Lc:case Ec:return s;default:switch(s=s&&s.$$typeof,s){case nP:case Tc:case Ac:case Oc:case Dc:case Nc:return s;default:return o}}case Cp:return o}}}Ke.ContextConsumer=Tc;Ke.ContextProvider=Nc;Ke.Element=Sp;Ke.ForwardRef=Ac;Ke.Fragment=kc;Ke.Lazy=Oc;Ke.Memo=Dc;Ke.Portal=Cp;Ke.Profiler=Mc;Ke.StrictMode=Pc;Ke.Suspense=Lc;Ke.SuspenseList=Ec;Ke.isAsyncMode=function(){return!1};Ke.isConcurrentMode=function(){return!1};Ke.isContextConsumer=function(s){return vs(s)===Tc};Ke.isContextProvider=function(s){return vs(s)===Nc};Ke.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===Sp};Ke.isForwardRef=function(s){return vs(s)===Ac};Ke.isFragment=function(s){return vs(s)===kc};Ke.isLazy=function(s){return vs(s)===Oc};Ke.isMemo=function(s){return vs(s)===Dc};Ke.isPortal=function(s){return vs(s)===Cp};Ke.isProfiler=function(s){return vs(s)===Mc};Ke.isStrictMode=function(s){return vs(s)===Pc};Ke.isSuspense=function(s){return vs(s)===Lc};Ke.isSuspenseList=function(s){return vs(s)===Ec};Ke.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===kc||s===Mc||s===Pc||s===Lc||s===Ec||s===iP||typeof s=="object"&&s!==null&&(s.$$typeof===Oc||s.$$typeof===Dc||s.$$typeof===Nc||s.$$typeof===Tc||s.$$typeof===Ac||s.$$typeof===Ob||s.getModuleId!==void 0)};Ke.typeOf=vs;Db.exports=Ke;var xl=Db.exports;function Tg(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=[];return zt.Children.forEach(s,function(d){d==null&&!o.keepEmpty||(Array.isArray(d)?h=h.concat(Tg(d)):xl.isFragment(d)&&d.props?h=h.concat(Tg(d.props.children,o)):h.push(d))}),h}var Ag={},sP=function(o){};function rP(s,o){}function oP(s,o){}function aP(){Ag={}}function Fb(s,o,h){!o&&!Ag[h]&&(s(!1,h),Ag[h]=!0)}function Zi(s,o){Fb(rP,s,o)}function lP(s,o){Fb(oP,s,o)}Zi.preMessage=sP;Zi.resetWarned=aP;Zi.noteOnce=lP;function ye(s){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ye(s)}function hP(s,o){if(ye(s)!="object"||!s)return s;var h=s[Symbol.toPrimitive];if(h!==void 0){var d=h.call(s,o||"default");if(ye(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}function Rb(s){var o=hP(s,"string");return ye(o)=="symbol"?o:o+""}function pt(s,o,h){return(o=Rb(o))in s?Object.defineProperty(s,o,{value:h,enumerable:!0,configurable:!0,writable:!0}):s[o]=h,s}function Oy(s,o){var h=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);o&&(d=d.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),h.push.apply(h,d)}return h}function Mt(s){for(var o=1;o<arguments.length;o++){var h=arguments[o]!=null?arguments[o]:{};o%2?Oy(Object(h),!0).forEach(function(d){pt(s,d,h[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(h)):Oy(Object(h)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(h,d))})}return s}function Fy(s){return s instanceof HTMLElement||s instanceof SVGElement}function uP(s){return s&&ye(s)==="object"&&Fy(s.nativeElement)?s.nativeElement:Fy(s)?s:null}function cP(s){var o=uP(s);if(o)return o;if(s instanceof zt.Component){var h;return(h=Mg.findDOMNode)===null||h===void 0?void 0:h.call(Mg,s)}return null}function kp(s,o,h){var d=H.useRef({});return(!("value"in d.current)||h(d.current.condition,o))&&(d.current.value=s(),d.current.condition=o),d.current.value}var Ib=function(o,h){typeof o=="function"?o(h):ye(o)==="object"&&o&&"current"in o&&(o.current=h)},Fc=function(){for(var o=arguments.length,h=new Array(o),d=0;d<o;d++)h[d]=arguments[d];var g=h.filter(Boolean);return g.length<=1?g[0]:function(x){h.forEach(function(S){Ib(S,x)})}},Bb=function(){for(var o=arguments.length,h=new Array(o),d=0;d<o;d++)h[d]=arguments[d];return kp(function(){return Fc.apply(void 0,h)},h,function(g,x){return g.length!==x.length||g.every(function(S,P){return S!==x[P]})})},Pp=function(o){var h,d,g=xl.isMemo(o)?o.type.type:o.type;return!(typeof g=="function"&&!((h=g.prototype)!==null&&h!==void 0&&h.render)&&g.$$typeof!==xl.ForwardRef||typeof o=="function"&&!((d=o.prototype)!==null&&d!==void 0&&d.render)&&o.$$typeof!==xl.ForwardRef)};function Ry(s){return H.isValidElement(s)&&!xl.isFragment(s)}Number(H.version.split(".")[0])>=19;function oi(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function Iy(s,o){for(var h=0;h<o.length;h++){var d=o[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,Rb(d.key),d)}}function ai(s,o,h){return o&&Iy(s.prototype,o),h&&Iy(s,h),Object.defineProperty(s,"prototype",{writable:!1}),s}function Ul(s,o){return Ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,d){return h.__proto__=d,h},Ul(s,o)}function Ao(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Ul(s,o)}function Kl(s){return Kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},Kl(s)}function Mp(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mp=function(){return!!s})()}function ke(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function dP(s,o){if(o&&(ye(o)=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ke(s)}function Lo(s){var o=Mp();return function(){var h,d=Kl(s);if(o){var g=Kl(this).constructor;h=Reflect.construct(d,arguments,g)}else h=d.apply(this,arguments);return dP(this,h)}}function Rc(s,o){var h=Object.assign({},s);return Array.isArray(o)&&o.forEach(function(d){delete h[d]}),h}function Lg(s,o){(o==null||o>s.length)&&(o=s.length);for(var h=0,d=Array(o);h<o;h++)d[h]=s[h];return d}function fP(s){if(Array.isArray(s))return Lg(s)}function jb(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Np(s,o){if(s){if(typeof s=="string")return Lg(s,o);var h={}.toString.call(s).slice(8,-1);return h==="Object"&&s.constructor&&(h=s.constructor.name),h==="Map"||h==="Set"?Array.from(s):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?Lg(s,o):void 0}}function gP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(s){return fP(s)||jb(s)||Np(s)||gP()}var zb=function(o){return+setTimeout(o,16)},Vb=function(o){return clearTimeout(o)};typeof window<"u"&&"requestAnimationFrame"in window&&(zb=function(o){return window.requestAnimationFrame(o)},Vb=function(o){return window.cancelAnimationFrame(o)});var By=0,Tp=new Map;function $b(s){Tp.delete(s)}var Po=function(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;By+=1;var d=By;function g(x){if(x===0)$b(d),o();else{var S=zb(function(){g(x-1)});Tp.set(d,S)}}return g(h),d};Po.cancel=function(s){var o=Tp.get(s);return $b(s),Vb(o)};function Hb(s){if(Array.isArray(s))return s}function mP(s,o){var h=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(h!=null){var d,g,x,S,P=[],M=!0,O=!1;try{if(x=(h=h.call(s)).next,o===0){if(Object(h)!==h)return;M=!1}else for(;!(M=(d=x.call(h)).done)&&(P.push(d.value),P.length!==o);M=!0);}catch(L){O=!0,g=L}finally{try{if(!M&&h.return!=null&&(S=h.return(),Object(S)!==S))return}finally{if(O)throw g}}return P}}function Ub(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(s,o){return Hb(s)||mP(s,o)||Np(s,o)||Ub()}function Gl(s){for(var o=0,h,d=0,g=s.length;g>=4;++d,g-=4)h=s.charCodeAt(d)&255|(s.charCodeAt(++d)&255)<<8|(s.charCodeAt(++d)&255)<<16|(s.charCodeAt(++d)&255)<<24,h=(h&65535)*1540483477+((h>>>16)*59797<<16),h^=h>>>24,o=(h&65535)*1540483477+((h>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch(g){case 3:o^=(s.charCodeAt(d+2)&255)<<16;case 2:o^=(s.charCodeAt(d+1)&255)<<8;case 1:o^=s.charCodeAt(d)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}function Oi(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Eg(s,o){if(!s)return!1;if(s.contains)return s.contains(o);for(var h=o;h;){if(h===s)return!0;h=h.parentNode}return!1}var jy="data-rc-order",zy="data-rc-priority",pP="rc-util-key",Dg=new Map;function Kb(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=s.mark;return o?o.startsWith("data-")?o:"data-".concat(o):pP}function Ic(s){if(s.attachTo)return s.attachTo;var o=document.querySelector("head");return o||document.body}function yP(s){return s==="queue"?"prependQueue":s?"prepend":"append"}function Ap(s){return Array.from((Dg.get(s)||s).children).filter(function(o){return o.tagName==="STYLE"})}function Gb(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Oi())return null;var h=o.csp,d=o.prepend,g=o.priority,x=g===void 0?0:g,S=yP(d),P=S==="prependQueue",M=document.createElement("style");M.setAttribute(jy,S),P&&x&&M.setAttribute(zy,"".concat(x)),h!=null&&h.nonce&&(M.nonce=h==null?void 0:h.nonce),M.innerHTML=s;var O=Ic(o),L=O.firstChild;if(d){if(P){var j=(o.styles||Ap(O)).filter(function(V){if(!["prepend","prependQueue"].includes(V.getAttribute(jy)))return!1;var q=Number(V.getAttribute(zy)||0);return x>=q});if(j.length)return O.insertBefore(M,j[j.length-1].nextSibling),M}O.insertBefore(M,L)}else O.appendChild(M);return M}function Xb(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=Ic(o);return(o.styles||Ap(h)).find(function(d){return d.getAttribute(Kb(o))===s})}function Xl(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=Xb(s,o);if(h){var d=Ic(o);d.removeChild(h)}}function vP(s,o){var h=Dg.get(s);if(!h||!Eg(document,h)){var d=Gb("",o),g=d.parentNode;Dg.set(s,g),s.removeChild(d)}}function gr(s,o){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=Ic(h),g=Ap(d),x=Mt(Mt({},h),{},{styles:g});vP(d,x);var S=Xb(o,x);if(S){var P,M;if((P=x.csp)!==null&&P!==void 0&&P.nonce&&S.nonce!==((M=x.csp)===null||M===void 0?void 0:M.nonce)){var O;S.nonce=(O=x.csp)===null||O===void 0?void 0:O.nonce}return S.innerHTML!==s&&(S.innerHTML=s),S}var L=Gb(s,x);return L.setAttribute(Kb(x),o),L}function xP(s,o){if(s==null)return{};var h={};for(var d in s)if({}.hasOwnProperty.call(s,d)){if(o.includes(d))continue;h[d]=s[d]}return h}function er(s,o){if(s==null)return{};var h,d,g=xP(s,o);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(s);for(d=0;d<x.length;d++)h=x[d],o.includes(h)||{}.propertyIsEnumerable.call(s,h)&&(g[h]=s[h])}return g}function Og(s,o){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=new Set;function g(x,S){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=d.has(x);if(Zi(!M,"Warning: There may be circular references"),M)return!1;if(x===S)return!0;if(h&&P>1)return!1;d.add(x);var O=P+1;if(Array.isArray(x)){if(!Array.isArray(S)||x.length!==S.length)return!1;for(var L=0;L<x.length;L++)if(!g(x[L],S[L],O))return!1;return!0}if(x&&S&&ye(x)==="object"&&ye(S)==="object"){var j=Object.keys(x);return j.length!==Object.keys(S).length?!1:j.every(function(V){return g(x[V],S[V],O)})}return!1}return g(s,o)}var bP="%";function Fg(s){return s.join(bP)}var wP=function(){function s(o){oi(this,s),pt(this,"instanceId",void 0),pt(this,"cache",new Map),this.instanceId=o}return ai(s,[{key:"get",value:function(h){return this.opGet(Fg(h))}},{key:"opGet",value:function(h){return this.cache.get(h)||null}},{key:"update",value:function(h,d){return this.opUpdate(Fg(h),d)}},{key:"opUpdate",value:function(h,d){var g=this.cache.get(h),x=d(g);x===null?this.cache.delete(h):this.cache.set(h,x)}}]),s}(),Pa="data-token-hash",js="data-css-hash",Br="__cssinjs_instance__";function SP(){var s=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var o=document.body.querySelectorAll("style[".concat(js,"]"))||[],h=document.head.firstChild;Array.from(o).forEach(function(g){g[Br]=g[Br]||s,g[Br]===s&&document.head.insertBefore(g,h)});var d={};Array.from(document.querySelectorAll("style[".concat(js,"]"))).forEach(function(g){var x=g.getAttribute(js);if(d[x]){if(g[Br]===s){var S;(S=g.parentNode)===null||S===void 0||S.removeChild(g)}}else d[x]=!0})}return new wP(s)}var Bc=H.createContext({hashPriority:"low",cache:SP(),defaultCache:!0});function CP(s,o){if(s.length!==o.length)return!1;for(var h=0;h<s.length;h++)if(s[h]!==o[h])return!1;return!0}var Lp=function(){function s(){oi(this,s),pt(this,"cache",void 0),pt(this,"keys",void 0),pt(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return ai(s,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(h){var d,g,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S={map:this.cache};return h.forEach(function(P){if(!S)S=void 0;else{var M;S=(M=S)===null||M===void 0||(M=M.map)===null||M===void 0?void 0:M.get(P)}}),(d=S)!==null&&d!==void 0&&d.value&&x&&(S.value[1]=this.cacheCallTimes++),(g=S)===null||g===void 0?void 0:g.value}},{key:"get",value:function(h){var d;return(d=this.internalGet(h,!0))===null||d===void 0?void 0:d[0]}},{key:"has",value:function(h){return!!this.internalGet(h)}},{key:"set",value:function(h,d){var g=this;if(!this.has(h)){if(this.size()+1>s.MAX_CACHE_SIZE+s.MAX_CACHE_OFFSET){var x=this.keys.reduce(function(O,L){var j=ce(O,2),V=j[1];return g.internalGet(L)[1]<V?[L,g.internalGet(L)[1]]:O},[this.keys[0],this.cacheCallTimes]),S=ce(x,1),P=S[0];this.delete(P)}this.keys.push(h)}var M=this.cache;h.forEach(function(O,L){if(L===h.length-1)M.set(O,{value:[d,g.cacheCallTimes++]});else{var j=M.get(O);j?j.map||(j.map=new Map):M.set(O,{map:new Map}),M=M.get(O).map}})}},{key:"deleteByPath",value:function(h,d){var g=h.get(d[0]);if(d.length===1){var x;return g.map?h.set(d[0],{map:g.map}):h.delete(d[0]),(x=g.value)===null||x===void 0?void 0:x[0]}var S=this.deleteByPath(g.map,d.slice(1));return(!g.map||g.map.size===0)&&!g.value&&h.delete(d[0]),S}},{key:"delete",value:function(h){if(this.has(h))return this.keys=this.keys.filter(function(d){return!CP(d,h)}),this.deleteByPath(this.cache,h)}}]),s}();pt(Lp,"MAX_CACHE_SIZE",20);pt(Lp,"MAX_CACHE_OFFSET",5);var Vy=0,Yb=function(){function s(o){oi(this,s),pt(this,"derivatives",void 0),pt(this,"id",void 0),this.derivatives=Array.isArray(o)?o:[o],this.id=Vy,o.length===0&&(o.length>0,void 0),Vy+=1}return ai(s,[{key:"getDerivativeToken",value:function(h){return this.derivatives.reduce(function(d,g){return g(h,d)},void 0)}}]),s}(),ef=new Lp;function Rg(s){var o=Array.isArray(s)?s:[s];return ef.has(o)||ef.set(o,new Yb(o)),ef.get(o)}var kP=new WeakMap,nf={};function PP(s,o){for(var h=kP,d=0;d<o.length;d+=1){var g=o[d];h.has(g)||h.set(g,new WeakMap),h=h.get(g)}return h.has(nf)||h.set(nf,s()),h.get(nf)}var $y=new WeakMap;function bl(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h=$y.get(s)||"";return h||(Object.keys(s).forEach(function(d){var g=s[d];h+=d,g instanceof Yb?h+=g.id:g&&ye(g)==="object"?h+=bl(g,o):h+=g}),o&&(h=Gl(h)),$y.set(s,h)),h}function Hy(s,o){return Gl("".concat(o,"_").concat(bl(s,!0)))}var Ig=Oi();function He(s){return typeof s=="number"?"".concat(s,"px"):s}function Yu(s,o,h){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(g)return s;var x=Mt(Mt({},d),{},pt(pt({},Pa,o),js,h)),S=Object.keys(x).map(function(P){var M=x[P];return M?"".concat(P,'="').concat(M,'"'):null}).filter(function(P){return P}).join(" ");return"<style ".concat(S,">").concat(s,"</style>")}var fu=function(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(h?"".concat(h,"-"):"").concat(o).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},MP=function(o,h,d){return Object.keys(o).length?".".concat(h).concat(d!=null&&d.scope?".".concat(d.scope):"","{").concat(Object.entries(o).map(function(g){var x=ce(g,2),S=x[0],P=x[1];return"".concat(S,":").concat(P,";")}).join(""),"}"):""},Wb=function(o,h,d){var g={},x={};return Object.entries(o).forEach(function(S){var P,M,O=ce(S,2),L=O[0],j=O[1];if(d!=null&&(P=d.preserve)!==null&&P!==void 0&&P[L])x[L]=j;else if((typeof j=="string"||typeof j=="number")&&!(d!=null&&(M=d.ignore)!==null&&M!==void 0&&M[L])){var V,q=fu(L,d==null?void 0:d.prefix);g[q]=typeof j=="number"&&!(d!=null&&(V=d.unitless)!==null&&V!==void 0&&V[L])?"".concat(j,"px"):String(j),x[L]="var(".concat(q,")")}}),[x,MP(g,h,{scope:d==null?void 0:d.scope})]},Uy=Oi()?H.useLayoutEffect:H.useEffect,Wu=function(o,h){var d=H.useRef(!0);Uy(function(){return o(d.current)},h),Uy(function(){return d.current=!1,function(){d.current=!0}},[])},NP=Mt({},lc),Ky=NP.useInsertionEffect,TP=function(o,h,d){H.useMemo(o,d),Wu(function(){return h(!0)},d)},AP=Ky?function(s,o,h){return Ky(function(){return s(),o()},h)}:TP,LP=Mt({},lc),EP=LP.useInsertionEffect,DP=function(o){var h=[],d=!1;function g(x){d||h.push(x)}return H.useEffect(function(){return d=!1,function(){d=!0,h.length&&h.forEach(function(x){return x()})}},o),g},OP=function(){return function(o){o()}},FP=typeof EP<"u"?DP:OP;function Ep(s,o,h,d,g){var x=H.useContext(Bc),S=x.cache,P=[s].concat(he(o)),M=Fg(P),O=FP([M]),L=function(J){S.opUpdate(M,function(Y){var W=Y||[void 0,void 0],T=ce(W,2),B=T[0],I=B===void 0?0:B,tt=T[1],z=tt,nt=z||h(),R=[I,nt];return J?J(R):R})};H.useMemo(function(){L()},[M]);var j=S.opGet(M),V=j[1];return AP(function(){g==null||g(V)},function(q){return L(function(J){var Y=ce(J,2),W=Y[0],T=Y[1];return q&&W===0&&(g==null||g(V)),[W+1,T]}),function(){S.opUpdate(M,function(J){var Y=J||[],W=ce(Y,2),T=W[0],B=T===void 0?0:T,I=W[1],tt=B-1;return tt===0?(O(function(){(q||!S.opGet(M))&&(d==null||d(I,!1))}),null):[B-1,I]})}},[M]),V}var RP={},IP="css",ho=new Map;function BP(s){ho.set(s,(ho.get(s)||0)+1)}function jP(s,o){if(typeof document<"u"){var h=document.querySelectorAll("style[".concat(Pa,'="').concat(s,'"]'));h.forEach(function(d){if(d[Br]===o){var g;(g=d.parentNode)===null||g===void 0||g.removeChild(d)}})}}var zP=0;function VP(s,o){ho.set(s,(ho.get(s)||0)-1);var h=Array.from(ho.keys()),d=h.filter(function(g){var x=ho.get(g)||0;return x<=0});h.length-d.length>zP&&d.forEach(function(g){jP(g,o),ho.delete(g)})}var $P=function(o,h,d,g){var x=d.getDerivativeToken(o),S=Mt(Mt({},x),h);return g&&(S=g(S)),S},qb="token";function HP(s,o){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=H.useContext(Bc),g=d.cache.instanceId,x=d.container,S=h.salt,P=S===void 0?"":S,M=h.override,O=M===void 0?RP:M,L=h.formatToken,j=h.getComputedToken,V=h.cssVar,q=PP(function(){return Object.assign.apply(Object,[{}].concat(he(o)))},o),J=bl(q),Y=bl(O),W=V?bl(V):"",T=Ep(qb,[P,s.id,J,Y,W],function(){var B,I=j?j(q,O,s):$P(q,O,s,L),tt=Mt({},I),z="";if(V){var nt=Wb(I,V.key,{prefix:V.prefix,ignore:V.ignore,unitless:V.unitless,preserve:V.preserve}),R=ce(nt,2);I=R[0],z=R[1]}var ot=Hy(I,P);I._tokenKey=ot,tt._tokenKey=Hy(tt,P);var lt=(B=V==null?void 0:V.key)!==null&&B!==void 0?B:ot;I._themeKey=lt,BP(lt);var rt="".concat(IP,"-").concat(Gl(ot));return I._hashId=rt,[I,rt,tt,z,(V==null?void 0:V.key)||""]},function(B){VP(B[0]._themeKey,g)},function(B){var I=ce(B,4),tt=I[0],z=I[3];if(V&&z){var nt=gr(z,Gl("css-variables-".concat(tt._themeKey)),{mark:js,prepend:"queue",attachTo:x,priority:-999});nt[Br]=g,nt.setAttribute(Pa,tt._themeKey)}});return T}var UP=function(o,h,d){var g=ce(o,5),x=g[2],S=g[3],P=g[4],M=d||{},O=M.plain;if(!S)return null;var L=x._tokenKey,j=-999,V={"data-rc-order":"prependQueue","data-rc-priority":"".concat(j)},q=Yu(S,P,L,V,O);return[j,L,q]},KP={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Jb="comm",Zb="rule",Qb="decl",GP="@import",XP="@keyframes",YP="@layer",_b=Math.abs,Dp=String.fromCharCode;function tw(s){return s.trim()}function gu(s,o,h){return s.replace(o,h)}function WP(s,o,h){return s.indexOf(o,h)}function Yl(s,o){return s.charCodeAt(o)|0}function Ma(s,o,h){return s.slice(o,h)}function qs(s){return s.length}function qP(s){return s.length}function Hh(s,o){return o.push(s),s}var jc=1,Na=1,ew=0,ys=0,Rn=0,Fa="";function Op(s,o,h,d,g,x,S,P){return{value:s,root:o,parent:h,type:d,props:g,children:x,line:jc,column:Na,length:S,return:"",siblings:P}}function JP(){return Rn}function ZP(){return Rn=ys>0?Yl(Fa,--ys):0,Na--,Rn===10&&(Na=1,jc--),Rn}function zs(){return Rn=ys<ew?Yl(Fa,ys++):0,Na++,Rn===10&&(Na=1,jc++),Rn}function jr(){return Yl(Fa,ys)}function mu(){return ys}function zc(s,o){return Ma(Fa,s,o)}function Wl(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QP(s){return jc=Na=1,ew=qs(Fa=s),ys=0,[]}function _P(s){return Fa="",s}function sf(s){return tw(zc(ys-1,Bg(s===91?s+2:s===40?s+1:s)))}function tM(s){for(;(Rn=jr())&&Rn<33;)zs();return Wl(s)>2||Wl(Rn)>3?"":" "}function eM(s,o){for(;--o&&zs()&&!(Rn<48||Rn>102||Rn>57&&Rn<65||Rn>70&&Rn<97););return zc(s,mu()+(o<6&&jr()==32&&zs()==32))}function Bg(s){for(;zs();)switch(Rn){case s:return ys;case 34:case 39:s!==34&&s!==39&&Bg(Rn);break;case 40:s===41&&Bg(s);break;case 92:zs();break}return ys}function nM(s,o){for(;zs()&&s+Rn!==57;)if(s+Rn===84&&jr()===47)break;return"/*"+zc(o,ys-1)+"*"+Dp(s===47?s:zs())}function iM(s){for(;!Wl(jr());)zs();return zc(s,ys)}function sM(s){return _P(pu("",null,null,null,[""],s=QP(s),0,[0],s))}function pu(s,o,h,d,g,x,S,P,M){for(var O=0,L=0,j=S,V=0,q=0,J=0,Y=1,W=1,T=1,B=0,I="",tt=g,z=x,nt=d,R=I;W;)switch(J=B,B=zs()){case 40:if(J!=108&&Yl(R,j-1)==58){WP(R+=gu(sf(B),"&","&\f"),"&\f",_b(O?P[O-1]:0))!=-1&&(T=-1);break}case 34:case 39:case 91:R+=sf(B);break;case 9:case 10:case 13:case 32:R+=tM(J);break;case 92:R+=eM(mu()-1,7);continue;case 47:switch(jr()){case 42:case 47:Hh(rM(nM(zs(),mu()),o,h,M),M),(Wl(J||1)==5||Wl(jr()||1)==5)&&qs(R)&&Ma(R,-1,void 0)!==" "&&(R+=" ");break;default:R+="/"}break;case 123*Y:P[O++]=qs(R)*T;case 125*Y:case 59:case 0:switch(B){case 0:case 125:W=0;case 59+L:T==-1&&(R=gu(R,/\f/g,"")),q>0&&(qs(R)-j||Y===0&&J===47)&&Hh(q>32?Xy(R+";",d,h,j-1,M):Xy(gu(R," ","")+";",d,h,j-2,M),M);break;case 59:R+=";";default:if(Hh(nt=Gy(R,o,h,O,L,g,P,I,tt=[],z=[],j,x),x),B===123)if(L===0)pu(R,o,nt,nt,tt,x,j,P,z);else switch(V===99&&Yl(R,3)===110?100:V){case 100:case 108:case 109:case 115:pu(s,nt,nt,d&&Hh(Gy(s,nt,nt,0,0,g,P,I,g,tt=[],j,z),z),g,z,j,P,d?tt:z);break;default:pu(R,nt,nt,nt,[""],z,0,P,z)}}O=L=q=0,Y=T=1,I=R="",j=S;break;case 58:j=1+qs(R),q=J;default:if(Y<1){if(B==123)--Y;else if(B==125&&Y++==0&&ZP()==125)continue}switch(R+=Dp(B),B*Y){case 38:T=L>0?1:(R+="\f",-1);break;case 44:P[O++]=(qs(R)-1)*T,T=1;break;case 64:jr()===45&&(R+=sf(zs())),V=jr(),L=j=qs(I=R+=iM(mu())),B++;break;case 45:J===45&&qs(R)==2&&(Y=0)}}return x}function Gy(s,o,h,d,g,x,S,P,M,O,L,j){for(var V=g-1,q=g===0?x:[""],J=qP(q),Y=0,W=0,T=0;Y<d;++Y)for(var B=0,I=Ma(s,V+1,V=_b(W=S[Y])),tt=s;B<J;++B)(tt=tw(W>0?q[B]+" "+I:gu(I,/&\f/g,q[B])))&&(M[T++]=tt);return Op(s,o,h,g===0?Zb:P,M,O,L,j)}function rM(s,o,h,d){return Op(s,o,h,Jb,Dp(JP()),Ma(s,2,-2),0,d)}function Xy(s,o,h,d,g){return Op(s,o,h,Qb,Ma(s,0,d),Ma(s,d+1,-1),d,g)}function jg(s,o){for(var h="",d=0;d<s.length;d++)h+=o(s[d],d,s,o)||"";return h}function oM(s,o,h,d){switch(s.type){case YP:if(s.children.length)break;case GP:case Qb:return s.return=s.return||s.value;case Jb:return"";case XP:return s.return=s.value+"{"+jg(s.children,d)+"}";case Zb:if(!qs(s.value=s.props.join(",")))return""}return qs(h=jg(s.children,d))?s.return=s.value+"{"+h+"}":""}var Yy="data-ant-cssinjs-cache-path",nw="_FILE_STYLE__",xo,iw=!0;function aM(){if(!xo&&(xo={},Oi())){var s=document.createElement("div");s.className=Yy,s.style.position="fixed",s.style.visibility="hidden",s.style.top="-9999px",document.body.appendChild(s);var o=getComputedStyle(s).content||"";o=o.replace(/^"/,"").replace(/"$/,""),o.split(";").forEach(function(g){var x=g.split(":"),S=ce(x,2),P=S[0],M=S[1];xo[P]=M});var h=document.querySelector("style[".concat(Yy,"]"));if(h){var d;iw=!1,(d=h.parentNode)===null||d===void 0||d.removeChild(h)}document.body.removeChild(s)}}function lM(s){return aM(),!!xo[s]}function hM(s){var o=xo[s],h=null;if(o&&Oi())if(iw)h=nw;else{var d=document.querySelector("style[".concat(js,'="').concat(xo[s],'"]'));d?h=d.innerHTML:delete xo[s]}return[h,o]}var uM="_skip_check_",sw="_multi_value_";function yu(s){var o=jg(sM(s),oM);return o.replace(/\{%%%\:[^;];}/g,";")}function cM(s){return ye(s)==="object"&&s&&(uM in s||sw in s)}function Wy(s,o,h){if(!o)return s;var d=".".concat(o),g=h==="low"?":where(".concat(d,")"):d,x=s.split(",").map(function(S){var P,M=S.trim().split(/\s+/),O=M[0]||"",L=((P=O.match(/^\w+/))===null||P===void 0?void 0:P[0])||"";return O="".concat(L).concat(g).concat(O.slice(L.length)),[O].concat(he(M.slice(1))).join(" ")});return x.join(",")}var dM=function s(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},g=d.root,x=d.injectHash,S=d.parentSelectors,P=h.hashId,M=h.layer;h.path;var O=h.hashPriority,L=h.transformers,j=L===void 0?[]:L;h.linters;var V="",q={};function J(T){var B=T.getName(P);if(!q[B]){var I=s(T.style,h,{root:!1,parentSelectors:S}),tt=ce(I,1),z=tt[0];q[B]="@keyframes ".concat(T.getName(P)).concat(z)}}function Y(T){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return T.forEach(function(I){Array.isArray(I)?Y(I,B):I&&B.push(I)}),B}var W=Y(Array.isArray(o)?o:[o]);return W.forEach(function(T){var B=typeof T=="string"&&!g?{}:T;if(typeof B=="string")V+="".concat(B,`
`);else if(B._keyframe)J(B);else{var I=j.reduce(function(tt,z){var nt;return(z==null||(nt=z.visit)===null||nt===void 0?void 0:nt.call(z,tt))||tt},B);Object.keys(I).forEach(function(tt){var z=I[tt];if(ye(z)==="object"&&z&&(tt!=="animationName"||!z._keyframe)&&!cM(z)){var nt=!1,R=tt.trim(),ot=!1;(g||x)&&P?R.startsWith("@")?nt=!0:R==="&"?R=Wy("",P,O):R=Wy(tt,P,O):g&&!P&&(R==="&"||R==="")&&(R="",ot=!0);var lt=s(z,h,{root:ot,injectHash:nt,parentSelectors:[].concat(he(S),[R])}),rt=ce(lt,2),dt=rt[0],Pt=rt[1];q=Mt(Mt({},q),Pt),V+="".concat(R).concat(dt)}else{let Zt=function(wt,ft){var ht=wt.replace(/[A-Z]/g,function(St){return"-".concat(St.toLowerCase())}),gt=ft;!KP[wt]&&typeof gt=="number"&&gt!==0&&(gt="".concat(gt,"px")),wt==="animationName"&&ft!==null&&ft!==void 0&&ft._keyframe&&(J(ft),gt=ft.getName(P)),V+="".concat(ht,":").concat(gt,";")};var ct,Et=(ct=z==null?void 0:z.value)!==null&&ct!==void 0?ct:z;ye(z)==="object"&&z!==null&&z!==void 0&&z[sw]&&Array.isArray(Et)?Et.forEach(function(wt){Zt(tt,wt)}):Zt(tt,Et)}})}}),g?M&&(V="@layer ".concat(M.name," {").concat(V,"}"),M.dependencies&&(q["@layer ".concat(M.name)]=M.dependencies.map(function(T){return"@layer ".concat(T,", ").concat(M.name,";")}).join(`
`))):V="{".concat(V,"}"),[V,q]};function rw(s,o){return Gl("".concat(s.join("%")).concat(o))}function fM(){return null}var ow="style";function zg(s,o){var h=s.token,d=s.path,g=s.hashId,x=s.layer,S=s.nonce,P=s.clientOnly,M=s.order,O=M===void 0?0:M,L=H.useContext(Bc),j=L.autoClear;L.mock;var V=L.defaultCache,q=L.hashPriority,J=L.container,Y=L.ssrInline,W=L.transformers,T=L.linters,B=L.cache,I=L.layer,tt=h._tokenKey,z=[tt];I&&z.push("layer"),z.push.apply(z,he(d));var nt=Ig,R=Ep(ow,z,function(){var Pt=z.join("|");if(lM(Pt)){var ct=hM(Pt),Et=ce(ct,2),Zt=Et[0],wt=Et[1];if(Zt)return[Zt,tt,wt,{},P,O]}var ft=o(),ht=dM(ft,{hashId:g,hashPriority:q,layer:I?x:void 0,path:d.join("-"),transformers:W,linters:T}),gt=ce(ht,2),St=gt[0],Ct=gt[1],Bt=yu(St),Ht=rw(z,Bt);return[Bt,tt,Ht,Ct,P,O]},function(Pt,ct){var Et=ce(Pt,3),Zt=Et[2];(ct||j)&&Ig&&Xl(Zt,{mark:js})},function(Pt){var ct=ce(Pt,4),Et=ct[0];ct[1];var Zt=ct[2],wt=ct[3];if(nt&&Et!==nw){var ft={mark:js,prepend:I?!1:"queue",attachTo:J,priority:O},ht=typeof S=="function"?S():S;ht&&(ft.csp={nonce:ht});var gt=[],St=[];Object.keys(wt).forEach(function(Bt){Bt.startsWith("@layer")?gt.push(Bt):St.push(Bt)}),gt.forEach(function(Bt){gr(yu(wt[Bt]),"_layer-".concat(Bt),Mt(Mt({},ft),{},{prepend:!0}))});var Ct=gr(Et,Zt,ft);Ct[Br]=B.instanceId,Ct.setAttribute(Pa,tt),St.forEach(function(Bt){gr(yu(wt[Bt]),"_effect-".concat(Bt),ft)})}}),ot=ce(R,3),lt=ot[0],rt=ot[1],dt=ot[2];return function(Pt){var ct;return!Y||nt||!V?ct=H.createElement(fM,null):ct=H.createElement("style",En({},pt(pt({},Pa,rt),js,dt),{dangerouslySetInnerHTML:{__html:lt}})),H.createElement(H.Fragment,null,ct,Pt)}}var gM=function(o,h,d){var g=ce(o,6),x=g[0],S=g[1],P=g[2],M=g[3],O=g[4],L=g[5],j=d||{},V=j.plain;if(O)return null;var q=x,J={"data-rc-order":"prependQueue","data-rc-priority":"".concat(L)};return q=Yu(x,S,P,J,V),M&&Object.keys(M).forEach(function(Y){if(!h[Y]){h[Y]=!0;var W=yu(M[Y]),T=Yu(W,S,"_effect-".concat(Y),J,V);Y.startsWith("@layer")?q=T+q:q+=T}}),[L,P,q]},aw="cssVar",mM=function(o,h){var d=o.key,g=o.prefix,x=o.unitless,S=o.ignore,P=o.token,M=o.scope,O=M===void 0?"":M,L=H.useContext(Bc),j=L.cache.instanceId,V=L.container,q=P._tokenKey,J=[].concat(he(o.path),[d,O,q]),Y=Ep(aw,J,function(){var W=h(),T=Wb(W,d,{prefix:g,unitless:x,ignore:S,scope:O}),B=ce(T,2),I=B[0],tt=B[1],z=rw(J,tt);return[I,tt,z,d]},function(W){var T=ce(W,3),B=T[2];Ig&&Xl(B,{mark:js})},function(W){var T=ce(W,3),B=T[1],I=T[2];if(B){var tt=gr(B,I,{mark:js,prepend:"queue",attachTo:V,priority:-999});tt[Br]=j,tt.setAttribute(Pa,d)}});return Y},pM=function(o,h,d){var g=ce(o,4),x=g[1],S=g[2],P=g[3],M=d||{},O=M.plain;if(!x)return null;var L=-999,j={"data-rc-order":"prependQueue","data-rc-priority":"".concat(L)},V=Yu(x,P,S,j,O);return[L,S,V]};pt(pt(pt({},ow,gM),qb,UP),aw,pM);var ki=function(){function s(o,h){oi(this,s),pt(this,"name",void 0),pt(this,"style",void 0),pt(this,"_keyframe",!0),this.name=o,this.style=h}return ai(s,[{key:"getName",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return h?"".concat(h,"-").concat(this.name):this.name}}]),s}();function Ko(s){return s.notSplit=!0,s}Ko(["borderTop","borderBottom"]),Ko(["borderTop"]),Ko(["borderBottom"]),Ko(["borderLeft","borderRight"]),Ko(["borderLeft"]),Ko(["borderRight"]);var Fp=H.createContext({});function yM(s){return Hb(s)||jb(s)||Np(s)||Ub()}function Qs(s,o){for(var h=s,d=0;d<o.length;d+=1){if(h==null)return;h=h[o[d]]}return h}function lw(s,o,h,d){if(!o.length)return h;var g=yM(o),x=g[0],S=g.slice(1),P;return!s&&typeof x=="number"?P=[]:Array.isArray(s)?P=he(s):P=Mt({},s),d&&h===void 0&&S.length===1?delete P[x][S[0]]:P[x]=lw(P[x],S,h,d),P}function Os(s,o,h){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return o.length&&d&&h===void 0&&!Qs(s,o.slice(0,-1))?s:lw(s,o,h,d)}function vM(s){return ye(s)==="object"&&s!==null&&Object.getPrototypeOf(s)===Object.prototype}function qy(s){return Array.isArray(s)?[]:{}}var xM=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function oa(){for(var s=arguments.length,o=new Array(s),h=0;h<s;h++)o[h]=arguments[h];var d=qy(o[0]);return o.forEach(function(g){function x(S,P){var M=new Set(P),O=Qs(g,S),L=Array.isArray(O);if(L||vM(O)){if(!M.has(O)){M.add(O);var j=Qs(d,S);L?d=Os(d,S,[]):(!j||ye(j)!=="object")&&(d=Os(d,S,qy(O))),xM(O).forEach(function(V){x([].concat(he(S),[V]),M)})}}else d=Os(d,S,O)}x([])}),d}const bM=H.createContext({}),wM=H.createContext(void 0);var SM={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},CM={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},kM=Mt(Mt({},CM),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const hw={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Jy={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},kM),timePickerLocale:Object.assign({},hw)},Ki="${label} is not a valid ${type}",Mo={locale:"en",Pagination:SM,DatePicker:Jy,TimePicker:hw,Calendar:Jy,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Ki,method:Ki,array:Ki,object:Ki,number:Ki,date:Ki,boolean:Ki,integer:Ki,float:Ki,regexp:Ki,email:Ki,url:Ki,hex:Ki},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let vu=Object.assign({},Mo.Modal),xu=[];const Zy=()=>xu.reduce((s,o)=>Object.assign(Object.assign({},s),o),Mo.Modal);function PM(s){if(s){const o=Object.assign({},s);return xu.push(o),vu=Zy(),()=>{xu=xu.filter(h=>h!==o),vu=Zy()}}vu=Object.assign({},Mo.Modal)}function uw(){return vu}const Rp=H.createContext(void 0),Ip=(s,o)=>{const h=H.useContext(Rp),d=H.useMemo(()=>{var x;const S=o||Mo[s],P=(x=h==null?void 0:h[s])!==null&&x!==void 0?x:{};return Object.assign(Object.assign({},typeof S=="function"?S():S),P||{})},[s,o,h]),g=H.useMemo(()=>{const x=h==null?void 0:h.locale;return h!=null&&h.exist&&!x?Mo.locale:x},[h]);return[d,g]},MM="internalMark",NM=s=>{const{locale:o={},children:h,_ANT_MARK__:d}=s;H.useEffect(()=>PM(o==null?void 0:o.Modal),[o]);const g=H.useMemo(()=>Object.assign(Object.assign({},o),{exist:!0}),[o]);return H.createElement(Rp.Provider,{value:g},h)};function si(s,o){TM(s)&&(s="100%");var h=AM(s);return s=o===360?s:Math.min(o,Math.max(0,parseFloat(s))),h&&(s=parseInt(String(s*o),10)/100),Math.abs(s-o)<1e-6?1:(o===360?s=(s<0?s%o+o:s%o)/parseFloat(String(o)):s=s%o/parseFloat(String(o)),s)}function Uh(s){return Math.min(1,Math.max(0,s))}function TM(s){return typeof s=="string"&&s.indexOf(".")!==-1&&parseFloat(s)===1}function AM(s){return typeof s=="string"&&s.indexOf("%")!==-1}function cw(s){return s=parseFloat(s),(isNaN(s)||s<0||s>1)&&(s=1),s}function Kh(s){return s<=1?"".concat(Number(s)*100,"%"):s}function go(s){return s.length===1?"0"+s:String(s)}function LM(s,o,h){return{r:si(s,255)*255,g:si(o,255)*255,b:si(h,255)*255}}function Qy(s,o,h){s=si(s,255),o=si(o,255),h=si(h,255);var d=Math.max(s,o,h),g=Math.min(s,o,h),x=0,S=0,P=(d+g)/2;if(d===g)S=0,x=0;else{var M=d-g;switch(S=P>.5?M/(2-d-g):M/(d+g),d){case s:x=(o-h)/M+(o<h?6:0);break;case o:x=(h-s)/M+2;break;case h:x=(s-o)/M+4;break}x/=6}return{h:x,s:S,l:P}}function rf(s,o,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?s+(o-s)*(6*h):h<1/2?o:h<2/3?s+(o-s)*(2/3-h)*6:s}function EM(s,o,h){var d,g,x;if(s=si(s,360),o=si(o,100),h=si(h,100),o===0)g=h,x=h,d=h;else{var S=h<.5?h*(1+o):h+o-h*o,P=2*h-S;d=rf(P,S,s+1/3),g=rf(P,S,s),x=rf(P,S,s-1/3)}return{r:d*255,g:g*255,b:x*255}}function Vg(s,o,h){s=si(s,255),o=si(o,255),h=si(h,255);var d=Math.max(s,o,h),g=Math.min(s,o,h),x=0,S=d,P=d-g,M=d===0?0:P/d;if(d===g)x=0;else{switch(d){case s:x=(o-h)/P+(o<h?6:0);break;case o:x=(h-s)/P+2;break;case h:x=(s-o)/P+4;break}x/=6}return{h:x,s:M,v:S}}function DM(s,o,h){s=si(s,360)*6,o=si(o,100),h=si(h,100);var d=Math.floor(s),g=s-d,x=h*(1-o),S=h*(1-g*o),P=h*(1-(1-g)*o),M=d%6,O=[h,S,x,x,P,h][M],L=[P,h,h,S,x,x][M],j=[x,x,P,h,h,S][M];return{r:O*255,g:L*255,b:j*255}}function $g(s,o,h,d){var g=[go(Math.round(s).toString(16)),go(Math.round(o).toString(16)),go(Math.round(h).toString(16))];return d&&g[0].startsWith(g[0].charAt(1))&&g[1].startsWith(g[1].charAt(1))&&g[2].startsWith(g[2].charAt(1))?g[0].charAt(0)+g[1].charAt(0)+g[2].charAt(0):g.join("")}function OM(s,o,h,d,g){var x=[go(Math.round(s).toString(16)),go(Math.round(o).toString(16)),go(Math.round(h).toString(16)),go(FM(d))];return g&&x[0].startsWith(x[0].charAt(1))&&x[1].startsWith(x[1].charAt(1))&&x[2].startsWith(x[2].charAt(1))&&x[3].startsWith(x[3].charAt(1))?x[0].charAt(0)+x[1].charAt(0)+x[2].charAt(0)+x[3].charAt(0):x.join("")}function FM(s){return Math.round(parseFloat(s)*255).toString(16)}function _y(s){return Xi(s)/255}function Xi(s){return parseInt(s,16)}function RM(s){return{r:s>>16,g:(s&65280)>>8,b:s&255}}var Hg={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Yo(s){var o={r:0,g:0,b:0},h=1,d=null,g=null,x=null,S=!1,P=!1;return typeof s=="string"&&(s=jM(s)),typeof s=="object"&&(lr(s.r)&&lr(s.g)&&lr(s.b)?(o=LM(s.r,s.g,s.b),S=!0,P=String(s.r).substr(-1)==="%"?"prgb":"rgb"):lr(s.h)&&lr(s.s)&&lr(s.v)?(d=Kh(s.s),g=Kh(s.v),o=DM(s.h,d,g),S=!0,P="hsv"):lr(s.h)&&lr(s.s)&&lr(s.l)&&(d=Kh(s.s),x=Kh(s.l),o=EM(s.h,d,x),S=!0,P="hsl"),Object.prototype.hasOwnProperty.call(s,"a")&&(h=s.a)),h=cw(h),{ok:S,format:s.format||P,r:Math.min(255,Math.max(o.r,0)),g:Math.min(255,Math.max(o.g,0)),b:Math.min(255,Math.max(o.b,0)),a:h}}var IM="[-\\+]?\\d+%?",BM="[-\\+]?\\d*\\.\\d+%?",zr="(?:".concat(BM,")|(?:").concat(IM,")"),of="[\\s|\\(]+(".concat(zr,")[,|\\s]+(").concat(zr,")[,|\\s]+(").concat(zr,")\\s*\\)?"),af="[\\s|\\(]+(".concat(zr,")[,|\\s]+(").concat(zr,")[,|\\s]+(").concat(zr,")[,|\\s]+(").concat(zr,")\\s*\\)?"),Ls={CSS_UNIT:new RegExp(zr),rgb:new RegExp("rgb"+of),rgba:new RegExp("rgba"+af),hsl:new RegExp("hsl"+of),hsla:new RegExp("hsla"+af),hsv:new RegExp("hsv"+of),hsva:new RegExp("hsva"+af),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function jM(s){if(s=s.trim().toLowerCase(),s.length===0)return!1;var o=!1;if(Hg[s])s=Hg[s],o=!0;else if(s==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var h=Ls.rgb.exec(s);return h?{r:h[1],g:h[2],b:h[3]}:(h=Ls.rgba.exec(s),h?{r:h[1],g:h[2],b:h[3],a:h[4]}:(h=Ls.hsl.exec(s),h?{h:h[1],s:h[2],l:h[3]}:(h=Ls.hsla.exec(s),h?{h:h[1],s:h[2],l:h[3],a:h[4]}:(h=Ls.hsv.exec(s),h?{h:h[1],s:h[2],v:h[3]}:(h=Ls.hsva.exec(s),h?{h:h[1],s:h[2],v:h[3],a:h[4]}:(h=Ls.hex8.exec(s),h?{r:Xi(h[1]),g:Xi(h[2]),b:Xi(h[3]),a:_y(h[4]),format:o?"name":"hex8"}:(h=Ls.hex6.exec(s),h?{r:Xi(h[1]),g:Xi(h[2]),b:Xi(h[3]),format:o?"name":"hex"}:(h=Ls.hex4.exec(s),h?{r:Xi(h[1]+h[1]),g:Xi(h[2]+h[2]),b:Xi(h[3]+h[3]),a:_y(h[4]+h[4]),format:o?"name":"hex8"}:(h=Ls.hex3.exec(s),h?{r:Xi(h[1]+h[1]),g:Xi(h[2]+h[2]),b:Xi(h[3]+h[3]),format:o?"name":"hex"}:!1)))))))))}function lr(s){return!!Ls.CSS_UNIT.exec(String(s))}var xi=function(){function s(o,h){o===void 0&&(o=""),h===void 0&&(h={});var d;if(o instanceof s)return o;typeof o=="number"&&(o=RM(o)),this.originalInput=o;var g=Yo(o);this.originalInput=o,this.r=g.r,this.g=g.g,this.b=g.b,this.a=g.a,this.roundA=Math.round(100*this.a)/100,this.format=(d=h.format)!==null&&d!==void 0?d:g.format,this.gradientType=h.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=g.ok}return s.prototype.isDark=function(){return this.getBrightness()<128},s.prototype.isLight=function(){return!this.isDark()},s.prototype.getBrightness=function(){var o=this.toRgb();return(o.r*299+o.g*587+o.b*114)/1e3},s.prototype.getLuminance=function(){var o=this.toRgb(),h,d,g,x=o.r/255,S=o.g/255,P=o.b/255;return x<=.03928?h=x/12.92:h=Math.pow((x+.055)/1.055,2.4),S<=.03928?d=S/12.92:d=Math.pow((S+.055)/1.055,2.4),P<=.03928?g=P/12.92:g=Math.pow((P+.055)/1.055,2.4),.2126*h+.7152*d+.0722*g},s.prototype.getAlpha=function(){return this.a},s.prototype.setAlpha=function(o){return this.a=cw(o),this.roundA=Math.round(100*this.a)/100,this},s.prototype.isMonochrome=function(){var o=this.toHsl().s;return o===0},s.prototype.toHsv=function(){var o=Vg(this.r,this.g,this.b);return{h:o.h*360,s:o.s,v:o.v,a:this.a}},s.prototype.toHsvString=function(){var o=Vg(this.r,this.g,this.b),h=Math.round(o.h*360),d=Math.round(o.s*100),g=Math.round(o.v*100);return this.a===1?"hsv(".concat(h,", ").concat(d,"%, ").concat(g,"%)"):"hsva(".concat(h,", ").concat(d,"%, ").concat(g,"%, ").concat(this.roundA,")")},s.prototype.toHsl=function(){var o=Qy(this.r,this.g,this.b);return{h:o.h*360,s:o.s,l:o.l,a:this.a}},s.prototype.toHslString=function(){var o=Qy(this.r,this.g,this.b),h=Math.round(o.h*360),d=Math.round(o.s*100),g=Math.round(o.l*100);return this.a===1?"hsl(".concat(h,", ").concat(d,"%, ").concat(g,"%)"):"hsla(".concat(h,", ").concat(d,"%, ").concat(g,"%, ").concat(this.roundA,")")},s.prototype.toHex=function(o){return o===void 0&&(o=!1),$g(this.r,this.g,this.b,o)},s.prototype.toHexString=function(o){return o===void 0&&(o=!1),"#"+this.toHex(o)},s.prototype.toHex8=function(o){return o===void 0&&(o=!1),OM(this.r,this.g,this.b,this.a,o)},s.prototype.toHex8String=function(o){return o===void 0&&(o=!1),"#"+this.toHex8(o)},s.prototype.toHexShortString=function(o){return o===void 0&&(o=!1),this.a===1?this.toHexString(o):this.toHex8String(o)},s.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},s.prototype.toRgbString=function(){var o=Math.round(this.r),h=Math.round(this.g),d=Math.round(this.b);return this.a===1?"rgb(".concat(o,", ").concat(h,", ").concat(d,")"):"rgba(".concat(o,", ").concat(h,", ").concat(d,", ").concat(this.roundA,")")},s.prototype.toPercentageRgb=function(){var o=function(h){return"".concat(Math.round(si(h,255)*100),"%")};return{r:o(this.r),g:o(this.g),b:o(this.b),a:this.a}},s.prototype.toPercentageRgbString=function(){var o=function(h){return Math.round(si(h,255)*100)};return this.a===1?"rgb(".concat(o(this.r),"%, ").concat(o(this.g),"%, ").concat(o(this.b),"%)"):"rgba(".concat(o(this.r),"%, ").concat(o(this.g),"%, ").concat(o(this.b),"%, ").concat(this.roundA,")")},s.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var o="#"+$g(this.r,this.g,this.b,!1),h=0,d=Object.entries(Hg);h<d.length;h++){var g=d[h],x=g[0],S=g[1];if(o===S)return x}return!1},s.prototype.toString=function(o){var h=!!o;o=o??this.format;var d=!1,g=this.a<1&&this.a>=0,x=!h&&g&&(o.startsWith("hex")||o==="name");return x?o==="name"&&this.a===0?this.toName():this.toRgbString():(o==="rgb"&&(d=this.toRgbString()),o==="prgb"&&(d=this.toPercentageRgbString()),(o==="hex"||o==="hex6")&&(d=this.toHexString()),o==="hex3"&&(d=this.toHexString(!0)),o==="hex4"&&(d=this.toHex8String(!0)),o==="hex8"&&(d=this.toHex8String()),o==="name"&&(d=this.toName()),o==="hsl"&&(d=this.toHslString()),o==="hsv"&&(d=this.toHsvString()),d||this.toHexString())},s.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},s.prototype.clone=function(){return new s(this.toString())},s.prototype.lighten=function(o){o===void 0&&(o=10);var h=this.toHsl();return h.l+=o/100,h.l=Uh(h.l),new s(h)},s.prototype.brighten=function(o){o===void 0&&(o=10);var h=this.toRgb();return h.r=Math.max(0,Math.min(255,h.r-Math.round(255*-(o/100)))),h.g=Math.max(0,Math.min(255,h.g-Math.round(255*-(o/100)))),h.b=Math.max(0,Math.min(255,h.b-Math.round(255*-(o/100)))),new s(h)},s.prototype.darken=function(o){o===void 0&&(o=10);var h=this.toHsl();return h.l-=o/100,h.l=Uh(h.l),new s(h)},s.prototype.tint=function(o){return o===void 0&&(o=10),this.mix("white",o)},s.prototype.shade=function(o){return o===void 0&&(o=10),this.mix("black",o)},s.prototype.desaturate=function(o){o===void 0&&(o=10);var h=this.toHsl();return h.s-=o/100,h.s=Uh(h.s),new s(h)},s.prototype.saturate=function(o){o===void 0&&(o=10);var h=this.toHsl();return h.s+=o/100,h.s=Uh(h.s),new s(h)},s.prototype.greyscale=function(){return this.desaturate(100)},s.prototype.spin=function(o){var h=this.toHsl(),d=(h.h+o)%360;return h.h=d<0?360+d:d,new s(h)},s.prototype.mix=function(o,h){h===void 0&&(h=50);var d=this.toRgb(),g=new s(o).toRgb(),x=h/100,S={r:(g.r-d.r)*x+d.r,g:(g.g-d.g)*x+d.g,b:(g.b-d.b)*x+d.b,a:(g.a-d.a)*x+d.a};return new s(S)},s.prototype.analogous=function(o,h){o===void 0&&(o=6),h===void 0&&(h=30);var d=this.toHsl(),g=360/h,x=[this];for(d.h=(d.h-(g*o>>1)+720)%360;--o;)d.h=(d.h+g)%360,x.push(new s(d));return x},s.prototype.complement=function(){var o=this.toHsl();return o.h=(o.h+180)%360,new s(o)},s.prototype.monochromatic=function(o){o===void 0&&(o=6);for(var h=this.toHsv(),d=h.h,g=h.s,x=h.v,S=[],P=1/o;o--;)S.push(new s({h:d,s:g,v:x})),x=(x+P)%1;return S},s.prototype.splitcomplement=function(){var o=this.toHsl(),h=o.h;return[this,new s({h:(h+72)%360,s:o.s,l:o.l}),new s({h:(h+216)%360,s:o.s,l:o.l})]},s.prototype.onBackground=function(o){var h=this.toRgb(),d=new s(o).toRgb(),g=h.a+d.a*(1-h.a);return new s({r:(h.r*h.a+d.r*d.a*(1-h.a))/g,g:(h.g*h.a+d.g*d.a*(1-h.a))/g,b:(h.b*h.a+d.b*d.a*(1-h.a))/g,a:g})},s.prototype.triad=function(){return this.polyad(3)},s.prototype.tetrad=function(){return this.polyad(4)},s.prototype.polyad=function(o){for(var h=this.toHsl(),d=h.h,g=[this],x=360/o,S=1;S<o;S++)g.push(new s({h:(d+S*x)%360,s:h.s,l:h.l}));return g},s.prototype.equals=function(o){return this.toRgbString()===new s(o).toRgbString()},s}(),Gh=2,tv=.16,zM=.05,VM=.05,$M=.15,dw=5,fw=4,HM=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ev(s){var o=s.r,h=s.g,d=s.b,g=Vg(o,h,d);return{h:g.h*360,s:g.s,v:g.v}}function Xh(s){var o=s.r,h=s.g,d=s.b;return"#".concat($g(o,h,d,!1))}function UM(s,o,h){var d=h/100,g={r:(o.r-s.r)*d+s.r,g:(o.g-s.g)*d+s.g,b:(o.b-s.b)*d+s.b};return g}function nv(s,o,h){var d;return Math.round(s.h)>=60&&Math.round(s.h)<=240?d=h?Math.round(s.h)-Gh*o:Math.round(s.h)+Gh*o:d=h?Math.round(s.h)+Gh*o:Math.round(s.h)-Gh*o,d<0?d+=360:d>=360&&(d-=360),d}function iv(s,o,h){if(s.h===0&&s.s===0)return s.s;var d;return h?d=s.s-tv*o:o===fw?d=s.s+tv:d=s.s+zM*o,d>1&&(d=1),h&&o===dw&&d>.1&&(d=.1),d<.06&&(d=.06),Number(d.toFixed(2))}function sv(s,o,h){var d;return h?d=s.v+VM*o:d=s.v-$M*o,d>1&&(d=1),Number(d.toFixed(2))}function ql(s){for(var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=[],d=Yo(s),g=dw;g>0;g-=1){var x=ev(d),S=Xh(Yo({h:nv(x,g,!0),s:iv(x,g,!0),v:sv(x,g,!0)}));h.push(S)}h.push(Xh(d));for(var P=1;P<=fw;P+=1){var M=ev(d),O=Xh(Yo({h:nv(M,P),s:iv(M,P),v:sv(M,P)}));h.push(O)}return o.theme==="dark"?HM.map(function(L){var j=L.index,V=L.opacity,q=Xh(UM(Yo(o.backgroundColor||"#141414"),Yo(h[j]),V*100));return q}):h}var lf={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ug=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];Ug.primary=Ug[5];var Kg=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];Kg.primary=Kg[5];var Gg=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Gg.primary=Gg[5];var Xg=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];Xg.primary=Xg[5];var Yg=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Yg.primary=Yg[5];var Wg=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];Wg.primary=Wg[5];var qg=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];qg.primary=qg[5];var Jg=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];Jg.primary=Jg[5];var qu=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];qu.primary=qu[5];var Zg=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];Zg.primary=Zg[5];var Qg=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Qg.primary=Qg[5];var _g=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];_g.primary=_g[5];var tm=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];tm.primary=tm[5];var hf={red:Ug,volcano:Kg,orange:Gg,gold:Xg,yellow:Yg,lime:Wg,green:qg,cyan:Jg,blue:qu,geekblue:Zg,purple:Qg,magenta:_g,grey:tm};const gw={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Jl=Object.assign(Object.assign({},gw),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function KM(s,o){let{generateColorPalettes:h,generateNeutralColorPalettes:d}=o;const{colorSuccess:g,colorWarning:x,colorError:S,colorInfo:P,colorPrimary:M,colorBgBase:O,colorTextBase:L}=s,j=h(M),V=h(g),q=h(x),J=h(S),Y=h(P),W=d(O,L),T=s.colorLink||s.colorInfo,B=h(T),I=new xi(J[1]).mix(new xi(J[3]),50).toHexString();return Object.assign(Object.assign({},W),{colorPrimaryBg:j[1],colorPrimaryBgHover:j[2],colorPrimaryBorder:j[3],colorPrimaryBorderHover:j[4],colorPrimaryHover:j[5],colorPrimary:j[6],colorPrimaryActive:j[7],colorPrimaryTextHover:j[8],colorPrimaryText:j[9],colorPrimaryTextActive:j[10],colorSuccessBg:V[1],colorSuccessBgHover:V[2],colorSuccessBorder:V[3],colorSuccessBorderHover:V[4],colorSuccessHover:V[4],colorSuccess:V[6],colorSuccessActive:V[7],colorSuccessTextHover:V[8],colorSuccessText:V[9],colorSuccessTextActive:V[10],colorErrorBg:J[1],colorErrorBgHover:J[2],colorErrorBgFilledHover:I,colorErrorBgActive:J[3],colorErrorBorder:J[3],colorErrorBorderHover:J[4],colorErrorHover:J[5],colorError:J[6],colorErrorActive:J[7],colorErrorTextHover:J[8],colorErrorText:J[9],colorErrorTextActive:J[10],colorWarningBg:q[1],colorWarningBgHover:q[2],colorWarningBorder:q[3],colorWarningBorderHover:q[4],colorWarningHover:q[4],colorWarning:q[6],colorWarningActive:q[7],colorWarningTextHover:q[8],colorWarningText:q[9],colorWarningTextActive:q[10],colorInfoBg:Y[1],colorInfoBgHover:Y[2],colorInfoBorder:Y[3],colorInfoBorderHover:Y[4],colorInfoHover:Y[4],colorInfo:Y[6],colorInfoActive:Y[7],colorInfoTextHover:Y[8],colorInfoText:Y[9],colorInfoTextActive:Y[10],colorLinkHover:B[4],colorLink:B[6],colorLinkActive:B[7],colorBgMask:new xi("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const GM=s=>{let o=s,h=s,d=s,g=s;return s<6&&s>=5?o=s+1:s<16&&s>=6?o=s+2:s>=16&&(o=16),s<7&&s>=5?h=4:s<8&&s>=7?h=5:s<14&&s>=8?h=6:s<16&&s>=14?h=7:s>=16&&(h=8),s<6&&s>=2?d=1:s>=6&&(d=2),s>4&&s<8?g=4:s>=8&&(g=6),{borderRadius:s,borderRadiusXS:d,borderRadiusSM:h,borderRadiusLG:o,borderRadiusOuter:g}};function XM(s){const{motionUnit:o,motionBase:h,borderRadius:d,lineWidth:g}=s;return Object.assign({motionDurationFast:`${(h+o).toFixed(1)}s`,motionDurationMid:`${(h+o*2).toFixed(1)}s`,motionDurationSlow:`${(h+o*3).toFixed(1)}s`,lineWidthBold:g+1},GM(d))}const YM=s=>{const{controlHeight:o}=s;return{controlHeightSM:o*.75,controlHeightXS:o*.5,controlHeightLG:o*1.25}};function bu(s){return(s+8)/s}function WM(s){const o=new Array(10).fill(null).map((h,d)=>{const g=d-1,x=s*Math.pow(Math.E,g/5),S=d>1?Math.floor(x):Math.ceil(x);return Math.floor(S/2)*2});return o[1]=s,o.map(h=>({size:h,lineHeight:bu(h)}))}const qM=s=>{const o=WM(s),h=o.map(L=>L.size),d=o.map(L=>L.lineHeight),g=h[1],x=h[0],S=h[2],P=d[1],M=d[0],O=d[2];return{fontSizeSM:x,fontSize:g,fontSizeLG:S,fontSizeXL:h[3],fontSizeHeading1:h[6],fontSizeHeading2:h[5],fontSizeHeading3:h[4],fontSizeHeading4:h[3],fontSizeHeading5:h[2],lineHeight:P,lineHeightLG:O,lineHeightSM:M,fontHeight:Math.round(P*g),fontHeightLG:Math.round(O*S),fontHeightSM:Math.round(M*x),lineHeightHeading1:d[6],lineHeightHeading2:d[5],lineHeightHeading3:d[4],lineHeightHeading4:d[3],lineHeightHeading5:d[2]}};function JM(s){const{sizeUnit:o,sizeStep:h}=s;return{sizeXXL:o*(h+8),sizeXL:o*(h+4),sizeLG:o*(h+2),sizeMD:o*(h+1),sizeMS:o*h,size:o*h,sizeSM:o*(h-1),sizeXS:o*(h-2),sizeXXS:o*(h-3)}}const ls=(s,o)=>new xi(s).setAlpha(o).toRgbString(),il=(s,o)=>new xi(s).darken(o).toHexString(),ZM=s=>{const o=ql(s);return{1:o[0],2:o[1],3:o[2],4:o[3],5:o[4],6:o[5],7:o[6],8:o[4],9:o[5],10:o[6]}},QM=(s,o)=>{const h=s||"#fff",d=o||"#000";return{colorBgBase:h,colorTextBase:d,colorText:ls(d,.88),colorTextSecondary:ls(d,.65),colorTextTertiary:ls(d,.45),colorTextQuaternary:ls(d,.25),colorFill:ls(d,.15),colorFillSecondary:ls(d,.06),colorFillTertiary:ls(d,.04),colorFillQuaternary:ls(d,.02),colorBgSolid:ls(d,1),colorBgSolidHover:ls(d,.75),colorBgSolidActive:ls(d,.95),colorBgLayout:il(h,4),colorBgContainer:il(h,0),colorBgElevated:il(h,0),colorBgSpotlight:ls(d,.85),colorBgBlur:"transparent",colorBorder:il(h,15),colorBorderSecondary:il(h,6)}};function _M(s){lf.pink=lf.magenta,hf.pink=hf.magenta;const o=Object.keys(gw).map(h=>{const d=s[h]===lf[h]?hf[h]:ql(s[h]);return new Array(10).fill(1).reduce((g,x,S)=>(g[`${h}-${S+1}`]=d[S],g[`${h}${S+1}`]=d[S],g),{})}).reduce((h,d)=>(h=Object.assign(Object.assign({},h),d),h),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s),o),KM(s,{generateColorPalettes:ZM,generateNeutralColorPalettes:QM})),qM(s.fontSize)),JM(s)),YM(s)),XM(s))}const mw=Rg(_M),em={token:Jl,override:{override:Jl},hashed:!0},pw=zt.createContext(em),Ju="ant",Bp="anticon",tN=(s,o)=>o||(s?`${Ju}-${s}`:Ju),Un=H.createContext({getPrefixCls:tN,iconPrefixCls:Bp}),eN=`-ant-${Date.now()}-${Math.random()}`;function nN(s,o){const h={},d=(S,P)=>{let M=S.clone();return M=(P==null?void 0:P(M))||M,M.toRgbString()},g=(S,P)=>{const M=new xi(S),O=ql(M.toRgbString());h[`${P}-color`]=d(M),h[`${P}-color-disabled`]=O[1],h[`${P}-color-hover`]=O[4],h[`${P}-color-active`]=O[6],h[`${P}-color-outline`]=M.clone().setAlpha(.2).toRgbString(),h[`${P}-color-deprecated-bg`]=O[0],h[`${P}-color-deprecated-border`]=O[2]};if(o.primaryColor){g(o.primaryColor,"primary");const S=new xi(o.primaryColor),P=ql(S.toRgbString());P.forEach((O,L)=>{h[`primary-${L+1}`]=O}),h["primary-color-deprecated-l-35"]=d(S,O=>O.lighten(35)),h["primary-color-deprecated-l-20"]=d(S,O=>O.lighten(20)),h["primary-color-deprecated-t-20"]=d(S,O=>O.tint(20)),h["primary-color-deprecated-t-50"]=d(S,O=>O.tint(50)),h["primary-color-deprecated-f-12"]=d(S,O=>O.setAlpha(O.getAlpha()*.12));const M=new xi(P[0]);h["primary-color-active-deprecated-f-30"]=d(M,O=>O.setAlpha(O.getAlpha()*.3)),h["primary-color-active-deprecated-d-02"]=d(M,O=>O.darken(2))}return o.successColor&&g(o.successColor,"success"),o.warningColor&&g(o.warningColor,"warning"),o.errorColor&&g(o.errorColor,"error"),o.infoColor&&g(o.infoColor,"info"),`
  :root {
    ${Object.keys(h).map(S=>`--${s}-${S}: ${h[S]};`).join(`
`)}
  }
  `.trim()}function iN(s,o){const h=nN(s,o);Oi()&&gr(h,`${eN}-dynamic-theme`)}const Zu=H.createContext(!1),yw=s=>{let{children:o,disabled:h}=s;const d=H.useContext(Zu);return H.createElement(Zu.Provider,{value:h??d},o)},Ta=H.createContext(void 0),sN=s=>{let{children:o,size:h}=s;const d=H.useContext(Ta);return H.createElement(Ta.Provider,{value:h||d},o)};function rN(){const s=H.useContext(Zu),o=H.useContext(Ta);return{componentDisabled:s,componentSize:o}}var vw=ai(function s(){oi(this,s)}),xw="CALC_UNIT",oN=new RegExp(xw,"g");function uf(s){return typeof s=="number"?"".concat(s).concat(xw):s}var aN=function(s){Ao(h,s);var o=Lo(h);function h(d,g){var x;oi(this,h),x=o.call(this),pt(ke(x),"result",""),pt(ke(x),"unitlessCssVar",void 0),pt(ke(x),"lowPriority",void 0);var S=ye(d);return x.unitlessCssVar=g,d instanceof h?x.result="(".concat(d.result,")"):S==="number"?x.result=uf(d):S==="string"&&(x.result=d),x}return ai(h,[{key:"add",value:function(g){return g instanceof h?this.result="".concat(this.result," + ").concat(g.getResult()):(typeof g=="number"||typeof g=="string")&&(this.result="".concat(this.result," + ").concat(uf(g))),this.lowPriority=!0,this}},{key:"sub",value:function(g){return g instanceof h?this.result="".concat(this.result," - ").concat(g.getResult()):(typeof g=="number"||typeof g=="string")&&(this.result="".concat(this.result," - ").concat(uf(g))),this.lowPriority=!0,this}},{key:"mul",value:function(g){return this.lowPriority&&(this.result="(".concat(this.result,")")),g instanceof h?this.result="".concat(this.result," * ").concat(g.getResult(!0)):(typeof g=="number"||typeof g=="string")&&(this.result="".concat(this.result," * ").concat(g)),this.lowPriority=!1,this}},{key:"div",value:function(g){return this.lowPriority&&(this.result="(".concat(this.result,")")),g instanceof h?this.result="".concat(this.result," / ").concat(g.getResult(!0)):(typeof g=="number"||typeof g=="string")&&(this.result="".concat(this.result," / ").concat(g)),this.lowPriority=!1,this}},{key:"getResult",value:function(g){return this.lowPriority||g?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(g){var x=this,S=g||{},P=S.unit,M=!0;return typeof P=="boolean"?M=P:Array.from(this.unitlessCssVar).some(function(O){return x.result.includes(O)})&&(M=!1),this.result=this.result.replace(oN,M?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),h}(vw),lN=function(s){Ao(h,s);var o=Lo(h);function h(d){var g;return oi(this,h),g=o.call(this),pt(ke(g),"result",0),d instanceof h?g.result=d.result:typeof d=="number"&&(g.result=d),g}return ai(h,[{key:"add",value:function(g){return g instanceof h?this.result+=g.result:typeof g=="number"&&(this.result+=g),this}},{key:"sub",value:function(g){return g instanceof h?this.result-=g.result:typeof g=="number"&&(this.result-=g),this}},{key:"mul",value:function(g){return g instanceof h?this.result*=g.result:typeof g=="number"&&(this.result*=g),this}},{key:"div",value:function(g){return g instanceof h?this.result/=g.result:typeof g=="number"&&(this.result/=g),this}},{key:"equal",value:function(){return this.result}}]),h}(vw),hN=function(o,h){var d=o==="css"?aN:lN;return function(g){return new d(g,h)}},rv=function(o,h){return"".concat([h,o.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Zl(s){var o=H.useRef();o.current=s;var h=H.useCallback(function(){for(var d,g=arguments.length,x=new Array(g),S=0;S<g;S++)x[S]=arguments[S];return(d=o.current)===null||d===void 0?void 0:d.call.apply(d,[o].concat(x))},[]);return h}function Qu(s){var o=H.useRef(!1),h=H.useState(s),d=ce(h,2),g=d[0],x=d[1];H.useEffect(function(){return o.current=!1,function(){o.current=!0}},[]);function S(P,M){M&&o.current||x(P)}return[g,S]}function ov(s,o,h,d){var g=Mt({},o[s]);if(d!=null&&d.deprecatedTokens){var x=d.deprecatedTokens;x.forEach(function(P){var M=ce(P,2),O=M[0],L=M[1];if(g!=null&&g[O]||g!=null&&g[L]){var j;(j=g[L])!==null&&j!==void 0||(g[L]=g==null?void 0:g[O])}})}var S=Mt(Mt({},h),g);return Object.keys(S).forEach(function(P){S[P]===o[P]&&delete S[P]}),S}var bw=typeof CSSINJS_STATISTIC<"u",nm=!0;function _r(){for(var s=arguments.length,o=new Array(s),h=0;h<s;h++)o[h]=arguments[h];if(!bw)return Object.assign.apply(Object,[{}].concat(o));nm=!1;var d={};return o.forEach(function(g){if(ye(g)==="object"){var x=Object.keys(g);x.forEach(function(S){Object.defineProperty(d,S,{configurable:!0,enumerable:!0,get:function(){return g[S]}})})}}),nm=!0,d}var av={};function uN(){}var cN=function(o){var h,d=o,g=uN;return bw&&typeof Proxy<"u"&&(h=new Set,d=new Proxy(o,{get:function(S,P){if(nm){var M;(M=h)===null||M===void 0||M.add(P)}return S[P]}}),g=function(S,P){var M;av[S]={global:Array.from(h),component:Mt(Mt({},(M=av[S])===null||M===void 0?void 0:M.component),P)}}),{token:d,keys:h,flush:g}};function lv(s,o,h){if(typeof h=="function"){var d;return h(_r(o,(d=o[s])!==null&&d!==void 0?d:{}))}return h??{}}function dN(s){return s==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var h=arguments.length,d=new Array(h),g=0;g<h;g++)d[g]=arguments[g];return"max(".concat(d.map(function(x){return He(x)}).join(","),")")},min:function(){for(var h=arguments.length,d=new Array(h),g=0;g<h;g++)d[g]=arguments[g];return"min(".concat(d.map(function(x){return He(x)}).join(","),")")}}}var fN=1e3*60*10,gN=function(){function s(){oi(this,s),pt(this,"map",new Map),pt(this,"objectIDMap",new WeakMap),pt(this,"nextID",0),pt(this,"lastAccessBeat",new Map),pt(this,"accessBeat",0)}return ai(s,[{key:"set",value:function(h,d){this.clear();var g=this.getCompositeKey(h);this.map.set(g,d),this.lastAccessBeat.set(g,Date.now())}},{key:"get",value:function(h){var d=this.getCompositeKey(h),g=this.map.get(d);return this.lastAccessBeat.set(d,Date.now()),this.accessBeat+=1,g}},{key:"getCompositeKey",value:function(h){var d=this,g=h.map(function(x){return x&&ye(x)==="object"?"obj_".concat(d.getObjectID(x)):"".concat(ye(x),"_").concat(x)});return g.join("|")}},{key:"getObjectID",value:function(h){if(this.objectIDMap.has(h))return this.objectIDMap.get(h);var d=this.nextID;return this.objectIDMap.set(h,d),this.nextID+=1,d}},{key:"clear",value:function(){var h=this;if(this.accessBeat>1e4){var d=Date.now();this.lastAccessBeat.forEach(function(g,x){d-g>fN&&(h.map.delete(x),h.lastAccessBeat.delete(x))}),this.accessBeat=0}}}]),s}(),hv=new gN;function mN(s,o){return zt.useMemo(function(){var h=hv.get(o);if(h)return h;var d=s();return hv.set(o,d),d},o)}var pN=function(){return{}};function yN(s){var o=s.useCSP,h=o===void 0?pN:o,d=s.useToken,g=s.usePrefix,x=s.getResetStyles,S=s.getCommonStyle,P=s.getCompUnitless;function M(V,q,J,Y){var W=Array.isArray(V)?V[0]:V;function T(ot){return"".concat(String(W)).concat(ot.slice(0,1).toUpperCase()).concat(ot.slice(1))}var B=(Y==null?void 0:Y.unitless)||{},I=typeof P=="function"?P(V):{},tt=Mt(Mt({},I),{},pt({},T("zIndexPopup"),!0));Object.keys(B).forEach(function(ot){tt[T(ot)]=B[ot]});var z=Mt(Mt({},Y),{},{unitless:tt,prefixToken:T}),nt=L(V,q,J,z),R=O(W,J,z);return function(ot){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ot,rt=nt(ot,lt),dt=ce(rt,2),Pt=dt[1],ct=R(lt),Et=ce(ct,2),Zt=Et[0],wt=Et[1];return[Zt,Pt,wt]}}function O(V,q,J){var Y=J.unitless,W=J.injectStyle,T=W===void 0?!0:W,B=J.prefixToken,I=J.ignore,tt=function(R){var ot=R.rootCls,lt=R.cssVar,rt=lt===void 0?{}:lt,dt=d(),Pt=dt.realToken;return mM({path:[V],prefix:rt.prefix,key:rt.key,unitless:Y,ignore:I,token:Pt,scope:ot},function(){var ct=lv(V,Pt,q),Et=ov(V,Pt,ct,{deprecatedTokens:J==null?void 0:J.deprecatedTokens});return Object.keys(ct).forEach(function(Zt){Et[B(Zt)]=Et[Zt],delete Et[Zt]}),Et}),null},z=function(R){var ot=d(),lt=ot.cssVar;return[function(rt){return T&&lt?zt.createElement(zt.Fragment,null,zt.createElement(tt,{rootCls:R,cssVar:lt,component:V}),rt):rt},lt==null?void 0:lt.key]};return z}function L(V,q,J){var Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},W=Array.isArray(V)?V:[V,V],T=ce(W,1),B=T[0],I=W.join("-"),tt=s.layer||{name:"antd"};return function(z){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z,R=d(),ot=R.theme,lt=R.realToken,rt=R.hashId,dt=R.token,Pt=R.cssVar,ct=g(),Et=ct.rootPrefixCls,Zt=ct.iconPrefixCls,wt=h(),ft=Pt?"css":"js",ht=mN(function(){var Ut=new Set;return Pt&&Object.keys(Y.unitless||{}).forEach(function(ge){Ut.add(fu(ge,Pt.prefix)),Ut.add(fu(ge,rv(B,Pt.prefix)))}),hN(ft,Ut)},[ft,B,Pt==null?void 0:Pt.prefix]),gt=dN(ft),St=gt.max,Ct=gt.min,Bt={theme:ot,token:dt,hashId:rt,nonce:function(){return wt.nonce},clientOnly:Y.clientOnly,layer:tt,order:Y.order||-999};zg(Mt(Mt({},Bt),{},{clientOnly:!1,path:["Shared",Et]}),function(){return typeof x=="function"?x(dt):[]});var Ht=zg(Mt(Mt({},Bt),{},{path:[I,z,Zt]}),function(){if(Y.injectStyle===!1)return[];var Ut=cN(dt),ge=Ut.token,ae=Ut.flush,me=lv(B,lt,J),je=".".concat(z),Fe=ov(B,lt,me,{deprecatedTokens:Y.deprecatedTokens});Pt&&me&&ye(me)==="object"&&Object.keys(me).forEach(function(Bn){me[Bn]="var(".concat(fu(Bn,rv(B,Pt.prefix)),")")});var pe=_r(ge,{componentCls:je,prefixCls:z,iconCls:".".concat(Zt),antCls:".".concat(Et),calc:ht,max:St,min:Ct},Pt?me:Fe),Mn=q(pe,{hashId:rt,prefixCls:z,rootPrefixCls:Et,iconPrefixCls:Zt});ae(B,Fe);var Ve=typeof S=="function"?S(pe,z,nt,Y.resetFont):null;return[Y.resetStyle===!1?null:Ve,Mn]});return[Ht,rt]}}function j(V,q,J){var Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},W=L(V,q,J,Mt({resetStyle:!1,order:-998},Y)),T=function(I){var tt=I.prefixCls,z=I.rootCls,nt=z===void 0?tt:z;return W(tt,nt),null};return T}return{genStyleHooks:M,genSubStyleComponent:j,genComponentStyleHook:L}}const vN="5.21.6";function cf(s){return s>=0&&s<=255}function Yh(s,o){const{r:h,g:d,b:g,a:x}=new xi(s).toRgb();if(x<1)return s;const{r:S,g:P,b:M}=new xi(o).toRgb();for(let O=.01;O<=1;O+=.01){const L=Math.round((h-S*(1-O))/O),j=Math.round((d-P*(1-O))/O),V=Math.round((g-M*(1-O))/O);if(cf(L)&&cf(j)&&cf(V))return new xi({r:L,g:j,b:V,a:Math.round(O*100)/100}).toRgbString()}return new xi({r:h,g:d,b:g,a:1}).toRgbString()}var xN=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};function ww(s){const{override:o}=s,h=xN(s,["override"]),d=Object.assign({},o);Object.keys(Jl).forEach(V=>{delete d[V]});const g=Object.assign(Object.assign({},h),d),x=480,S=576,P=768,M=992,O=1200,L=1600;if(g.motion===!1){const V="0s";g.motionDurationFast=V,g.motionDurationMid=V,g.motionDurationSlow=V}return Object.assign(Object.assign(Object.assign({},g),{colorFillContent:g.colorFillSecondary,colorFillContentHover:g.colorFill,colorFillAlter:g.colorFillQuaternary,colorBgContainerDisabled:g.colorFillTertiary,colorBorderBg:g.colorBgContainer,colorSplit:Yh(g.colorBorderSecondary,g.colorBgContainer),colorTextPlaceholder:g.colorTextQuaternary,colorTextDisabled:g.colorTextQuaternary,colorTextHeading:g.colorText,colorTextLabel:g.colorTextSecondary,colorTextDescription:g.colorTextTertiary,colorTextLightSolid:g.colorWhite,colorHighlight:g.colorError,colorBgTextHover:g.colorFillSecondary,colorBgTextActive:g.colorFill,colorIcon:g.colorTextTertiary,colorIconHover:g.colorText,colorErrorOutline:Yh(g.colorErrorBg,g.colorBgContainer),colorWarningOutline:Yh(g.colorWarningBg,g.colorBgContainer),fontSizeIcon:g.fontSizeSM,lineWidthFocus:g.lineWidth*3,lineWidth:g.lineWidth,controlOutlineWidth:g.lineWidth*2,controlInteractiveSize:g.controlHeight/2,controlItemBgHover:g.colorFillTertiary,controlItemBgActive:g.colorPrimaryBg,controlItemBgActiveHover:g.colorPrimaryBgHover,controlItemBgActiveDisabled:g.colorFill,controlTmpOutline:g.colorFillQuaternary,controlOutline:Yh(g.colorPrimaryBg,g.colorBgContainer),lineType:g.lineType,borderRadius:g.borderRadius,borderRadiusXS:g.borderRadiusXS,borderRadiusSM:g.borderRadiusSM,borderRadiusLG:g.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:g.sizeXXS,paddingXS:g.sizeXS,paddingSM:g.sizeSM,padding:g.size,paddingMD:g.sizeMD,paddingLG:g.sizeLG,paddingXL:g.sizeXL,paddingContentHorizontalLG:g.sizeLG,paddingContentVerticalLG:g.sizeMS,paddingContentHorizontal:g.sizeMS,paddingContentVertical:g.sizeSM,paddingContentHorizontalSM:g.size,paddingContentVerticalSM:g.sizeXS,marginXXS:g.sizeXXS,marginXS:g.sizeXS,marginSM:g.sizeSM,margin:g.size,marginMD:g.sizeMD,marginLG:g.sizeLG,marginXL:g.sizeXL,marginXXL:g.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:x,screenXSMin:x,screenXSMax:S-1,screenSM:S,screenSMMin:S,screenSMMax:P-1,screenMD:P,screenMDMin:P,screenMDMax:M-1,screenLG:M,screenLGMin:M,screenLGMax:O-1,screenXL:O,screenXLMin:O,screenXLMax:L-1,screenXXL:L,screenXXLMin:L,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new xi("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new xi("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new xi("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),d)}var uv=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};const Sw={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},bN={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},wN={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Cw=(s,o,h)=>{const d=h.getDerivativeToken(s),{override:g}=o,x=uv(o,["override"]);let S=Object.assign(Object.assign({},d),{override:g});return S=ww(S),x&&Object.entries(x).forEach(P=>{let[M,O]=P;const{theme:L}=O,j=uv(O,["theme"]);let V=j;L&&(V=Cw(Object.assign(Object.assign({},S),j),{override:j},L)),S[M]=V}),S};function to(){const{token:s,hashed:o,theme:h,override:d,cssVar:g}=zt.useContext(pw),x=`${vN}-${o||""}`,S=h||mw,[P,M,O]=HP(S,[Jl,s],{salt:x,override:d,getComputedToken:Cw,formatToken:ww,cssVar:g&&{prefix:g.prefix,key:g.key,unitless:Sw,ignore:bN,preserve:wN}});return[S,O,o?M:"",P,g]}const SN=function(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:s.colorText,fontSize:s.fontSize,lineHeight:s.lineHeight,listStyle:"none",fontFamily:o?"inherit":s.fontFamily}},CN=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),kN=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),PN=s=>({a:{color:s.colorLink,textDecoration:s.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${s.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:s.colorLinkHover},"&:active":{color:s.colorLinkActive},"&:active, &:hover":{textDecoration:s.linkHoverDecoration,outline:0},"&:focus":{textDecoration:s.linkFocusDecoration,outline:0},"&[disabled]":{color:s.colorTextDisabled,cursor:"not-allowed"}}}),MN=(s,o,h,d)=>{const g=`[class^="${o}"], [class*=" ${o}"]`,x=h?`.${h}`:g,S={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let P={};return d!==!1&&(P={fontFamily:s.fontFamily,fontSize:s.fontSize}),{[x]:Object.assign(Object.assign(Object.assign({},P),S),{[g]:S})}},NN=s=>({outline:`${He(s.lineWidthFocus)} solid ${s.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),kw=s=>({"&:focus-visible":Object.assign({},NN(s))}),Pw=(s,o)=>{const[h,d]=to();return zg({theme:h,token:d,hashId:"",path:["ant-design-icons",s],nonce:()=>o==null?void 0:o.nonce,layer:{name:"antd"}},()=>[{[`.${s}`]:Object.assign(Object.assign({},CN()),{[`.${s} .${s}-icon`]:{display:"block"}})}])},{genStyleHooks:jp,genComponentStyleHook:TN,genSubStyleComponent:Mw}=yN({usePrefix:()=>{const{getPrefixCls:s,iconPrefixCls:o}=H.useContext(Un);return{rootPrefixCls:s(),iconPrefixCls:o}},useToken:()=>{const[s,o,h,d,g]=to();return{theme:s,realToken:o,hashId:h,token:d,cssVar:g}},useCSP:()=>{const{csp:s,iconPrefixCls:o}=H.useContext(Un);return Pw(o,s),s??{}},getResetStyles:s=>[{"&":PN(s)}],getCommonStyle:MN,getCompUnitless:()=>Sw}),AN=Object.assign({},lc),{useId:cv}=AN,LN=()=>"",EN=typeof cv>"u"?LN:cv;function DN(s,o,h){var d;const g=s||{},x=g.inherit===!1||!o?Object.assign(Object.assign({},em),{hashed:(d=o==null?void 0:o.hashed)!==null&&d!==void 0?d:em.hashed,cssVar:o==null?void 0:o.cssVar}):o,S=EN();return kp(()=>{var P,M;if(!s)return o;const O=Object.assign({},x.components);Object.keys(s.components||{}).forEach(V=>{O[V]=Object.assign(Object.assign({},O[V]),s.components[V])});const L=`css-var-${S.replace(/:/g,"")}`,j=((P=g.cssVar)!==null&&P!==void 0?P:x.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:h==null?void 0:h.prefixCls},typeof x.cssVar=="object"?x.cssVar:{}),typeof g.cssVar=="object"?g.cssVar:{}),{key:typeof g.cssVar=="object"&&((M=g.cssVar)===null||M===void 0?void 0:M.key)||L});return Object.assign(Object.assign(Object.assign({},x),g),{token:Object.assign(Object.assign({},x.token),g.token),components:O,cssVar:j})},[g,x],(P,M)=>P.some((O,L)=>{const j=M[L];return!Og(O,j,!0)}))}var ON=["children"],Nw=H.createContext({});function FN(s){var o=s.children,h=er(s,ON);return H.createElement(Nw.Provider,{value:h},o)}var RN=function(s){Ao(h,s);var o=Lo(h);function h(){return oi(this,h),o.apply(this,arguments)}return ai(h,[{key:"render",value:function(){return this.props.children}}]),h}(H.Component);function IN(s){var o=H.useReducer(function(P){return P+1},0),h=ce(o,2),d=h[1],g=H.useRef(s),x=Zl(function(){return g.current}),S=Zl(function(P){g.current=typeof P=="function"?P(g.current):P,d()});return[x,S]}var Tr="none",Wh="appear",qh="enter",Jh="leave",dv="none",Fs="prepare",aa="start",la="active",zp="end",Tw="prepared";function fv(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit".concat(s)]="webkit".concat(o),h["Moz".concat(s)]="moz".concat(o),h["ms".concat(s)]="MS".concat(o),h["O".concat(s)]="o".concat(o.toLowerCase()),h}function BN(s,o){var h={animationend:fv("Animation","AnimationEnd"),transitionend:fv("Transition","TransitionEnd")};return s&&("AnimationEvent"in o||delete h.animationend.animation,"TransitionEvent"in o||delete h.transitionend.transition),h}var jN=BN(Oi(),typeof window<"u"?window:{}),Aw={};if(Oi()){var zN=document.createElement("div");Aw=zN.style}var Zh={};function Lw(s){if(Zh[s])return Zh[s];var o=jN[s];if(o)for(var h=Object.keys(o),d=h.length,g=0;g<d;g+=1){var x=h[g];if(Object.prototype.hasOwnProperty.call(o,x)&&x in Aw)return Zh[s]=o[x],Zh[s]}return""}var Ew=Lw("animationend"),Dw=Lw("transitionend"),Ow=!!(Ew&&Dw),gv=Ew||"animationend",mv=Dw||"transitionend";function pv(s,o){if(!s)return null;if(ye(s)==="object"){var h=o.replace(/-\w/g,function(d){return d[1].toUpperCase()});return s[h]}return"".concat(s,"-").concat(o)}const VN=function(s){var o=H.useRef();function h(g){g&&(g.removeEventListener(mv,s),g.removeEventListener(gv,s))}function d(g){o.current&&o.current!==g&&h(o.current),g&&g!==o.current&&(g.addEventListener(mv,s),g.addEventListener(gv,s),o.current=g)}return H.useEffect(function(){return function(){h(o.current)}},[]),[d,h]};var Fw=Oi()?H.useLayoutEffect:H.useEffect;const $N=function(){var s=H.useRef(null);function o(){Po.cancel(s.current)}function h(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;o();var x=Po(function(){g<=1?d({isCanceled:function(){return x!==s.current}}):h(d,g-1)});s.current=x}return H.useEffect(function(){return function(){o()}},[]),[h,o]};var HN=[Fs,aa,la,zp],UN=[Fs,Tw],Rw=!1,KN=!0;function Iw(s){return s===la||s===zp}const GN=function(s,o,h){var d=Qu(dv),g=ce(d,2),x=g[0],S=g[1],P=$N(),M=ce(P,2),O=M[0],L=M[1];function j(){S(Fs,!0)}var V=o?UN:HN;return Fw(function(){if(x!==dv&&x!==zp){var q=V.indexOf(x),J=V[q+1],Y=h(x);Y===Rw?S(J,!0):J&&O(function(W){function T(){W.isCanceled()||S(J,!0)}Y===!0?T():Promise.resolve(Y).then(T)})}},[s,x]),H.useEffect(function(){return function(){L()}},[]),[j,x]};function XN(s,o,h,d){var g=d.motionEnter,x=g===void 0?!0:g,S=d.motionAppear,P=S===void 0?!0:S,M=d.motionLeave,O=M===void 0?!0:M,L=d.motionDeadline,j=d.motionLeaveImmediately,V=d.onAppearPrepare,q=d.onEnterPrepare,J=d.onLeavePrepare,Y=d.onAppearStart,W=d.onEnterStart,T=d.onLeaveStart,B=d.onAppearActive,I=d.onEnterActive,tt=d.onLeaveActive,z=d.onAppearEnd,nt=d.onEnterEnd,R=d.onLeaveEnd,ot=d.onVisibleChanged,lt=Qu(),rt=ce(lt,2),dt=rt[0],Pt=rt[1],ct=IN(Tr),Et=ce(ct,2),Zt=Et[0],wt=Et[1],ft=Qu(null),ht=ce(ft,2),gt=ht[0],St=ht[1],Ct=Zt(),Bt=H.useRef(!1),Ht=H.useRef(null);function Ut(){return h()}var ge=H.useRef(!1);function ae(){wt(Tr),St(null,!0)}var me=Zl(function(De){var $e=Zt();if($e!==Tr){var vn=Ut();if(!(De&&!De.deadline&&De.target!==vn)){var li=ge.current,ti;$e===Wh&&li?ti=z==null?void 0:z(vn,De):$e===qh&&li?ti=nt==null?void 0:nt(vn,De):$e===Jh&&li&&(ti=R==null?void 0:R(vn,De)),li&&ti!==!1&&ae()}}}),je=VN(me),Fe=ce(je,1),pe=Fe[0],Mn=function($e){switch($e){case Wh:return pt(pt(pt({},Fs,V),aa,Y),la,B);case qh:return pt(pt(pt({},Fs,q),aa,W),la,I);case Jh:return pt(pt(pt({},Fs,J),aa,T),la,tt);default:return{}}},Ve=H.useMemo(function(){return Mn(Ct)},[Ct]),Bn=GN(Ct,!s,function(De){if(De===Fs){var $e=Ve[Fs];return $e?$e(Ut()):Rw}if(Qe in Ve){var vn;St(((vn=Ve[Qe])===null||vn===void 0?void 0:vn.call(Ve,Ut(),null))||null)}return Qe===la&&Ct!==Tr&&(pe(Ut()),L>0&&(clearTimeout(Ht.current),Ht.current=setTimeout(function(){me({deadline:!0})},L))),Qe===Tw&&ae(),KN}),Ze=ce(Bn,2),Le=Ze[0],Qe=Ze[1],xs=Iw(Qe);ge.current=xs,Fw(function(){Pt(o);var De=Bt.current;Bt.current=!0;var $e;!De&&o&&P&&($e=Wh),De&&o&&x&&($e=qh),(De&&!o&&O||!De&&j&&!o&&O)&&($e=Jh);var vn=Mn($e);$e&&(s||vn[Fs])?(wt($e),Le()):wt(Tr)},[o]),H.useEffect(function(){(Ct===Wh&&!P||Ct===qh&&!x||Ct===Jh&&!O)&&wt(Tr)},[P,x,O]),H.useEffect(function(){return function(){Bt.current=!1,clearTimeout(Ht.current)}},[]);var Dn=H.useRef(!1);H.useEffect(function(){dt&&(Dn.current=!0),dt!==void 0&&Ct===Tr&&((Dn.current||dt)&&(ot==null||ot(dt)),Dn.current=!0)},[dt,Ct]);var nn=gt;return Ve[Fs]&&Qe===aa&&(nn=Mt({transition:"none"},nn)),[Ct,Qe,nn,dt??o]}function YN(s){var o=s;ye(s)==="object"&&(o=s.transitionSupport);function h(g,x){return!!(g.motionName&&o&&x!==!1)}var d=H.forwardRef(function(g,x){var S=g.visible,P=S===void 0?!0:S,M=g.removeOnLeave,O=M===void 0?!0:M,L=g.forceRender,j=g.children,V=g.motionName,q=g.leavedClassName,J=g.eventProps,Y=H.useContext(Nw),W=Y.motion,T=h(g,W),B=H.useRef(),I=H.useRef();function tt(){try{return B.current instanceof HTMLElement?B.current:cP(I.current)}catch{return null}}var z=XN(T,P,tt,g),nt=ce(z,4),R=nt[0],ot=nt[1],lt=nt[2],rt=nt[3],dt=H.useRef(rt);rt&&(dt.current=!0);var Pt=H.useCallback(function(gt){B.current=gt,Ib(x,gt)},[x]),ct,Et=Mt(Mt({},J),{},{visible:P});if(!j)ct=null;else if(R===Tr)rt?ct=j(Mt({},Et),Pt):!O&&dt.current&&q?ct=j(Mt(Mt({},Et),{},{className:q}),Pt):L||!O&&!q?ct=j(Mt(Mt({},Et),{},{style:{display:"none"}}),Pt):ct=null;else{var Zt;ot===Fs?Zt="prepare":Iw(ot)?Zt="active":ot===aa&&(Zt="start");var wt=pv(V,"".concat(R,"-").concat(Zt));ct=j(Mt(Mt({},Et),{},{className:Ce(pv(V,R),pt(pt({},wt,wt&&Zt),V,typeof V=="string")),style:lt}),Pt)}if(H.isValidElement(ct)&&Pp(ct)){var ft=ct,ht=ft.ref;ht||(ct=H.cloneElement(ct,{ref:Pt}))}return H.createElement(RN,{ref:I},ct)});return d.displayName="CSSMotion",d}const lh=YN(Ow);var im="add",sm="keep",rm="remove",df="removed";function WN(s){var o;return s&&ye(s)==="object"&&"key"in s?o=s:o={key:s},Mt(Mt({},o),{},{key:String(o.key)})}function om(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return s.map(WN)}function qN(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=[],d=0,g=o.length,x=om(s),S=om(o);x.forEach(function(O){for(var L=!1,j=d;j<g;j+=1){var V=S[j];if(V.key===O.key){d<j&&(h=h.concat(S.slice(d,j).map(function(q){return Mt(Mt({},q),{},{status:im})})),d=j),h.push(Mt(Mt({},V),{},{status:sm})),d+=1,L=!0;break}}L||h.push(Mt(Mt({},O),{},{status:rm}))}),d<g&&(h=h.concat(S.slice(d).map(function(O){return Mt(Mt({},O),{},{status:im})})));var P={};h.forEach(function(O){var L=O.key;P[L]=(P[L]||0)+1});var M=Object.keys(P).filter(function(O){return P[O]>1});return M.forEach(function(O){h=h.filter(function(L){var j=L.key,V=L.status;return j!==O||V!==rm}),h.forEach(function(L){L.key===O&&(L.status=sm)})}),h}var JN=["component","children","onVisibleChanged","onAllRemoved"],ZN=["status"],QN=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function _N(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lh,h=function(d){Ao(x,d);var g=Lo(x);function x(){var S;oi(this,x);for(var P=arguments.length,M=new Array(P),O=0;O<P;O++)M[O]=arguments[O];return S=g.call.apply(g,[this].concat(M)),pt(ke(S),"state",{keyEntities:[]}),pt(ke(S),"removeKey",function(L){S.setState(function(j){var V=j.keyEntities.map(function(q){return q.key!==L?q:Mt(Mt({},q),{},{status:df})});return{keyEntities:V}},function(){var j=S.state.keyEntities,V=j.filter(function(q){var J=q.status;return J!==df}).length;V===0&&S.props.onAllRemoved&&S.props.onAllRemoved()})}),S}return ai(x,[{key:"render",value:function(){var P=this,M=this.state.keyEntities,O=this.props,L=O.component,j=O.children,V=O.onVisibleChanged;O.onAllRemoved;var q=er(O,JN),J=L||H.Fragment,Y={};return QN.forEach(function(W){Y[W]=q[W],delete q[W]}),delete q.keys,H.createElement(J,q,M.map(function(W,T){var B=W.status,I=er(W,ZN),tt=B===im||B===sm;return H.createElement(o,En({},Y,{key:I.key,visible:tt,eventProps:I,onVisibleChanged:function(nt){V==null||V(nt,{key:I.key}),nt||P.removeKey(I.key)}}),function(z,nt){return j(Mt(Mt({},z),{},{index:T}),nt)})}))}}],[{key:"getDerivedStateFromProps",value:function(P,M){var O=P.keys,L=M.keyEntities,j=om(O),V=qN(L,j);return{keyEntities:V.filter(function(q){var J=L.find(function(Y){var W=Y.key;return q.key===W});return!(J&&J.status===df&&q.status===rm)})}}}]),x}(H.Component);return pt(h,"defaultProps",{component:"div"}),h}_N(Ow);function tT(s){const{children:o}=s,[,h]=to(),{motion:d}=h,g=H.useRef(!1);return g.current=g.current||d===!1,g.current?H.createElement(FN,{motion:d},o):o}const eT=()=>null;var nT=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};const iT=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let _u,Bw,jw,zw;function wu(){return _u||Ju}function sT(){return Bw||Bp}function rT(s){return Object.keys(s).some(o=>o.endsWith("Color"))}const oT=s=>{const{prefixCls:o,iconPrefixCls:h,theme:d,holderRender:g}=s;o!==void 0&&(_u=o),h!==void 0&&(Bw=h),"holderRender"in s&&(zw=g),d&&(rT(d)?iN(wu(),d):jw=d)},aT=()=>({getPrefixCls:(s,o)=>o||(s?`${wu()}-${s}`:wu()),getIconPrefixCls:sT,getRootPrefixCls:()=>_u||wu(),getTheme:()=>jw,holderRender:zw}),lT=s=>{const{children:o,csp:h,autoInsertSpaceInButton:d,alert:g,anchor:x,form:S,locale:P,componentSize:M,direction:O,space:L,splitter:j,virtual:V,dropdownMatchSelectWidth:q,popupMatchSelectWidth:J,popupOverflow:Y,legacyLocale:W,parentContext:T,iconPrefixCls:B,theme:I,componentDisabled:tt,segmented:z,statistic:nt,spin:R,calendar:ot,carousel:lt,cascader:rt,collapse:dt,typography:Pt,checkbox:ct,descriptions:Et,divider:Zt,drawer:wt,skeleton:ft,steps:ht,image:gt,layout:St,list:Ct,mentions:Bt,modal:Ht,progress:Ut,result:ge,slider:ae,breadcrumb:me,menu:je,pagination:Fe,input:pe,textArea:Mn,empty:Ve,badge:Bn,radio:Ze,rate:Le,switch:Qe,transfer:xs,avatar:Dn,message:nn,tag:De,table:$e,card:vn,tabs:li,timeline:ti,timePicker:nr,upload:ns,notification:ei,tree:Ri,colorPicker:Ii,datePicker:Pi,rangePicker:we,flex:Gn,wave:Us,dropdown:Do,warning:no,tour:le,floatButtonGroup:Oo,variant:bs,inputNumber:$a,treeSelect:wr}=s,xn=H.useCallback((ze,Pe)=>{const{prefixCls:wn}=s;if(Pe)return Pe;const Sn=wn||T.getPrefixCls("");return ze?`${Sn}-${ze}`:Sn},[T.getPrefixCls,s.prefixCls]),ln=B||T.iconPrefixCls||Bp,Nn=h||T.csp;Pw(ln,Nn);const _e=DN(I,T.theme,{prefixCls:xn("")}),On={csp:Nn,autoInsertSpaceInButton:d,alert:g,anchor:x,locale:P||W,direction:O,space:L,splitter:j,virtual:V,popupMatchSelectWidth:J??q,popupOverflow:Y,getPrefixCls:xn,iconPrefixCls:ln,theme:_e,segmented:z,statistic:nt,spin:R,calendar:ot,carousel:lt,cascader:rt,collapse:dt,typography:Pt,checkbox:ct,descriptions:Et,divider:Zt,drawer:wt,skeleton:ft,steps:ht,image:gt,input:pe,textArea:Mn,layout:St,list:Ct,mentions:Bt,modal:Ht,progress:Ut,result:ge,slider:ae,breadcrumb:me,menu:je,pagination:Fe,empty:Ve,badge:Bn,radio:Ze,rate:Le,switch:Qe,transfer:xs,avatar:Dn,message:nn,tag:De,table:$e,card:vn,tabs:li,timeline:ti,timePicker:nr,upload:ns,notification:ei,tree:Ri,colorPicker:Ii,datePicker:Pi,rangePicker:we,flex:Gn,wave:Us,dropdown:Do,warning:no,tour:le,floatButtonGroup:Oo,variant:bs,inputNumber:$a,treeSelect:wr},bn=Object.assign({},T);Object.keys(On).forEach(ze=>{On[ze]!==void 0&&(bn[ze]=On[ze])}),iT.forEach(ze=>{const Pe=s[ze];Pe&&(bn[ze]=Pe)}),typeof d<"u"&&(bn.button=Object.assign({autoInsertSpace:d},bn.button));const Fn=kp(()=>bn,bn,(ze,Pe)=>{const wn=Object.keys(ze),Sn=Object.keys(Pe);return wn.length!==Sn.length||wn.some(Xn=>ze[Xn]!==Pe[Xn])}),Re=H.useMemo(()=>({prefixCls:ln,csp:Nn}),[ln,Nn]);let Me=H.createElement(H.Fragment,null,H.createElement(eT,{dropdownMatchSelectWidth:q}),o);const Bi=H.useMemo(()=>{var ze,Pe,wn,Sn;return oa(((ze=Mo.Form)===null||ze===void 0?void 0:ze.defaultValidateMessages)||{},((wn=(Pe=Fn.locale)===null||Pe===void 0?void 0:Pe.Form)===null||wn===void 0?void 0:wn.defaultValidateMessages)||{},((Sn=Fn.form)===null||Sn===void 0?void 0:Sn.validateMessages)||{},(S==null?void 0:S.validateMessages)||{})},[Fn,S==null?void 0:S.validateMessages]);Object.keys(Bi).length>0&&(Me=H.createElement(wM.Provider,{value:Bi},Me)),P&&(Me=H.createElement(NM,{locale:P,_ANT_MARK__:MM},Me)),(ln||Nn)&&(Me=H.createElement(Fp.Provider,{value:Re},Me)),M&&(Me=H.createElement(sN,{size:M},Me)),Me=H.createElement(tT,null,Me);const ji=H.useMemo(()=>{const ze=_e||{},{algorithm:Pe,token:wn,components:Sn,cssVar:Xn}=ze,Sr=nT(ze,["algorithm","token","components","cssVar"]),ir=Pe&&(!Array.isArray(Pe)||Pe.length>0)?Rg(Pe):mw,ve={};Object.entries(Sn||{}).forEach(Jc=>{let[Zc,Qc]=Jc;const zi=Object.assign({},Qc);"algorithm"in zi&&(zi.algorithm===!0?zi.theme=ir:(Array.isArray(zi.algorithm)||typeof zi.algorithm=="function")&&(zi.theme=Rg(zi.algorithm)),delete zi.algorithm),ve[Zc]=zi});const de=Object.assign(Object.assign({},Jl),wn);return Object.assign(Object.assign({},Sr),{theme:ir,token:de,components:ve,override:Object.assign({override:de},ve),cssVar:Xn})},[_e]);return I&&(Me=H.createElement(pw.Provider,{value:ji},Me)),Fn.warning&&(Me=H.createElement(bM.Provider,{value:Fn.warning},Me)),tt!==void 0&&(Me=H.createElement(yw,{disabled:tt},Me)),H.createElement(Un.Provider,{value:Fn},Me)},eo=s=>{const o=H.useContext(Un),h=H.useContext(Rp);return H.createElement(lT,Object.assign({parentContext:o,legacyLocale:h},s))};eo.ConfigContext=Un;eo.SizeContext=Ta;eo.config=oT;eo.useConfig=rN;Object.defineProperty(eo,"SizeContext",{get:()=>Ta});var hT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function Vw(s){var o;return s==null||(o=s.getRootNode)===null||o===void 0?void 0:o.call(s)}function uT(s){return Vw(s)instanceof ShadowRoot}function cT(s){return uT(s)?Vw(s):null}function dT(s){return s.replace(/-(.)/g,function(o,h){return h.toUpperCase()})}function fT(s,o){Zi(s,"[@ant-design/icons] ".concat(o))}function yv(s){return ye(s)==="object"&&typeof s.name=="string"&&typeof s.theme=="string"&&(ye(s.icon)==="object"||typeof s.icon=="function")}function vv(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(s).reduce(function(o,h){var d=s[h];switch(h){case"class":o.className=d,delete o.class;break;default:delete o[h],o[dT(h)]=d}return o},{})}function am(s,o,h){return h?zt.createElement(s.tag,Mt(Mt({key:o},vv(s.attrs)),h),(s.children||[]).map(function(d,g){return am(d,"".concat(o,"-").concat(s.tag,"-").concat(g))})):zt.createElement(s.tag,Mt({key:o},vv(s.attrs)),(s.children||[]).map(function(d,g){return am(d,"".concat(o,"-").concat(s.tag,"-").concat(g))}))}function $w(s){return ql(s)[0]}function Hw(s){return s?Array.isArray(s)?s:[s]:[]}var gT=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,mT=function(o){var h=H.useContext(Fp),d=h.csp,g=h.prefixCls,x=gT;g&&(x=x.replace(/anticon/g,g)),H.useEffect(function(){var S=o.current,P=cT(S);gr(x,"@ant-design-icons",{prepend:!0,csp:d,attachTo:P})},[])},pT=["icon","className","onClick","style","primaryColor","secondaryColor"],wl={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function yT(s){var o=s.primaryColor,h=s.secondaryColor;wl.primaryColor=o,wl.secondaryColor=h||$w(o),wl.calculated=!!h}function vT(){return Mt({},wl)}var Ra=function(o){var h=o.icon,d=o.className,g=o.onClick,x=o.style,S=o.primaryColor,P=o.secondaryColor,M=er(o,pT),O=H.useRef(),L=wl;if(S&&(L={primaryColor:S,secondaryColor:P||$w(S)}),mT(O),fT(yv(h),"icon should be icon definiton, but got ".concat(h)),!yv(h))return null;var j=h;return j&&typeof j.icon=="function"&&(j=Mt(Mt({},j),{},{icon:j.icon(L.primaryColor,L.secondaryColor)})),am(j.icon,"svg-".concat(j.name),Mt(Mt({className:d,onClick:g,style:x,"data-icon":j.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},M),{},{ref:O}))};Ra.displayName="IconReact";Ra.getTwoToneColors=vT;Ra.setTwoToneColors=yT;function Uw(s){var o=Hw(s),h=ce(o,2),d=h[0],g=h[1];return Ra.setTwoToneColors({primaryColor:d,secondaryColor:g})}function xT(){var s=Ra.getTwoToneColors();return s.calculated?[s.primaryColor,s.secondaryColor]:s.primaryColor}var bT=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Uw(qu.primary);var br=H.forwardRef(function(s,o){var h=s.className,d=s.icon,g=s.spin,x=s.rotate,S=s.tabIndex,P=s.onClick,M=s.twoToneColor,O=er(s,bT),L=H.useContext(Fp),j=L.prefixCls,V=j===void 0?"anticon":j,q=L.rootClassName,J=Ce(q,V,pt(pt({},"".concat(V,"-").concat(d.name),!!d.name),"".concat(V,"-spin"),!!g||d.name==="loading"),h),Y=S;Y===void 0&&P&&(Y=-1);var W=x?{msTransform:"rotate(".concat(x,"deg)"),transform:"rotate(".concat(x,"deg)")}:void 0,T=Hw(M),B=ce(T,2),I=B[0],tt=B[1];return H.createElement("span",En({role:"img","aria-label":d.name},O,{ref:o,tabIndex:Y,onClick:P,className:J}),H.createElement(Ra,{icon:d,primaryColor:I,secondaryColor:tt,style:W}))});br.displayName="AntdIcon";br.getTwoToneColor=xT;br.setTwoToneColor=Uw;var wT=function(o,h){return H.createElement(br,En({},o,{ref:h,icon:hT}))},ST=H.forwardRef(wT),CT={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},kT=function(o,h){return H.createElement(br,En({},o,{ref:h,icon:CT}))},PT=H.forwardRef(kT),MT={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},NT=function(o,h){return H.createElement(br,En({},o,{ref:h,icon:MT}))},Vc=H.forwardRef(NT),TT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},AT=function(o,h){return H.createElement(br,En({},o,{ref:h,icon:TT}))},LT=H.forwardRef(AT),ET={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},DT=function(o,h){return H.createElement(br,En({},o,{ref:h,icon:ET}))},OT=H.forwardRef(DT),FT=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,RT=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,IT="".concat(FT," ").concat(RT).split(/[\s\n]+/),BT="aria-",jT="data-";function xv(s,o){return s.indexOf(o)===0}function Vp(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h;o===!1?h={aria:!0,data:!0,attr:!0}:o===!0?h={aria:!0}:h=Mt({},o);var d={};return Object.keys(s).forEach(function(g){(h.aria&&(g==="role"||xv(g,BT))||h.data&&xv(g,jT)||h.attr&&IT.includes(g))&&(d[g]=s[g])}),d}function zT(s){return s&&zt.isValidElement(s)&&s.type===zt.Fragment}const VT=(s,o,h)=>zt.isValidElement(s)?zt.cloneElement(s,typeof h=="function"?h(s.props||{}):h):o;function Kw(s,o){return VT(s,s,o)}const Gw=s=>{const[,,,,o]=to();return o?`${s}-css-var`:""};var fe={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(o){var h=o.keyCode;if(o.altKey&&!o.ctrlKey||o.metaKey||h>=fe.F1&&h<=fe.F12)return!1;switch(h){case fe.ALT:case fe.CAPS_LOCK:case fe.CONTEXT_MENU:case fe.CTRL:case fe.DOWN:case fe.END:case fe.ESC:case fe.HOME:case fe.INSERT:case fe.LEFT:case fe.MAC_FF_META:case fe.META:case fe.NUMLOCK:case fe.NUM_CENTER:case fe.PAGE_DOWN:case fe.PAGE_UP:case fe.PAUSE:case fe.PRINT_SCREEN:case fe.RIGHT:case fe.SHIFT:case fe.UP:case fe.WIN_KEY:case fe.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(o){if(o>=fe.ZERO&&o<=fe.NINE||o>=fe.NUM_ZERO&&o<=fe.NUM_MULTIPLY||o>=fe.A&&o<=fe.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&o===0)return!0;switch(o){case fe.SPACE:case fe.QUESTION_MARK:case fe.NUM_PLUS:case fe.NUM_MINUS:case fe.NUM_PERIOD:case fe.NUM_DIVISION:case fe.SEMICOLON:case fe.DASH:case fe.EQUALS:case fe.COMMA:case fe.PERIOD:case fe.SLASH:case fe.APOSTROPHE:case fe.SINGLE_QUOTE:case fe.OPEN_SQUARE_BRACKET:case fe.BACKSLASH:case fe.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},$T={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},HT=function(o,h){return H.createElement(br,En({},o,{ref:h,icon:$T}))},UT=H.forwardRef(HT);const Xw=zt.createContext(void 0),Ar=100,KT=10,GT=Ar*KT,Yw={Modal:Ar,Drawer:Ar,Popover:Ar,Popconfirm:Ar,Tooltip:Ar,Tour:Ar,FloatButton:Ar},XT={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function YT(s){return s in Yw}const WT=(s,o)=>{const[,h]=to(),d=zt.useContext(Xw),g=YT(s);let x;if(o!==void 0)x=[o,o];else{let S=d??0;g?S+=(d?0:h.zIndexPopupBase)+Yw[s]:S+=XT[s],x=[d===void 0?o:S,S]}return x};function qT(){const[s,o]=H.useState([]),h=H.useCallback(d=>(o(g=>[].concat(he(g),[d])),()=>{o(g=>g.filter(x=>x!==d))}),[]);return[s,h]}function wi(){wi=function(){return o};var s,o={},h=Object.prototype,d=h.hasOwnProperty,g=Object.defineProperty||function(wt,ft,ht){wt[ft]=ht.value},x=typeof Symbol=="function"?Symbol:{},S=x.iterator||"@@iterator",P=x.asyncIterator||"@@asyncIterator",M=x.toStringTag||"@@toStringTag";function O(wt,ft,ht){return Object.defineProperty(wt,ft,{value:ht,enumerable:!0,configurable:!0,writable:!0}),wt[ft]}try{O({},"")}catch{O=function(ht,gt,St){return ht[gt]=St}}function L(wt,ft,ht,gt){var St=ft&&ft.prototype instanceof T?ft:T,Ct=Object.create(St.prototype),Bt=new Et(gt||[]);return g(Ct,"_invoke",{value:rt(wt,ht,Bt)}),Ct}function j(wt,ft,ht){try{return{type:"normal",arg:wt.call(ft,ht)}}catch(gt){return{type:"throw",arg:gt}}}o.wrap=L;var V="suspendedStart",q="suspendedYield",J="executing",Y="completed",W={};function T(){}function B(){}function I(){}var tt={};O(tt,S,function(){return this});var z=Object.getPrototypeOf,nt=z&&z(z(Zt([])));nt&&nt!==h&&d.call(nt,S)&&(tt=nt);var R=I.prototype=T.prototype=Object.create(tt);function ot(wt){["next","throw","return"].forEach(function(ft){O(wt,ft,function(ht){return this._invoke(ft,ht)})})}function lt(wt,ft){function ht(St,Ct,Bt,Ht){var Ut=j(wt[St],wt,Ct);if(Ut.type!=="throw"){var ge=Ut.arg,ae=ge.value;return ae&&ye(ae)=="object"&&d.call(ae,"__await")?ft.resolve(ae.__await).then(function(me){ht("next",me,Bt,Ht)},function(me){ht("throw",me,Bt,Ht)}):ft.resolve(ae).then(function(me){ge.value=me,Bt(ge)},function(me){return ht("throw",me,Bt,Ht)})}Ht(Ut.arg)}var gt;g(this,"_invoke",{value:function(Ct,Bt){function Ht(){return new ft(function(Ut,ge){ht(Ct,Bt,Ut,ge)})}return gt=gt?gt.then(Ht,Ht):Ht()}})}function rt(wt,ft,ht){var gt=V;return function(St,Ct){if(gt===J)throw Error("Generator is already running");if(gt===Y){if(St==="throw")throw Ct;return{value:s,done:!0}}for(ht.method=St,ht.arg=Ct;;){var Bt=ht.delegate;if(Bt){var Ht=dt(Bt,ht);if(Ht){if(Ht===W)continue;return Ht}}if(ht.method==="next")ht.sent=ht._sent=ht.arg;else if(ht.method==="throw"){if(gt===V)throw gt=Y,ht.arg;ht.dispatchException(ht.arg)}else ht.method==="return"&&ht.abrupt("return",ht.arg);gt=J;var Ut=j(wt,ft,ht);if(Ut.type==="normal"){if(gt=ht.done?Y:q,Ut.arg===W)continue;return{value:Ut.arg,done:ht.done}}Ut.type==="throw"&&(gt=Y,ht.method="throw",ht.arg=Ut.arg)}}}function dt(wt,ft){var ht=ft.method,gt=wt.iterator[ht];if(gt===s)return ft.delegate=null,ht==="throw"&&wt.iterator.return&&(ft.method="return",ft.arg=s,dt(wt,ft),ft.method==="throw")||ht!=="return"&&(ft.method="throw",ft.arg=new TypeError("The iterator does not provide a '"+ht+"' method")),W;var St=j(gt,wt.iterator,ft.arg);if(St.type==="throw")return ft.method="throw",ft.arg=St.arg,ft.delegate=null,W;var Ct=St.arg;return Ct?Ct.done?(ft[wt.resultName]=Ct.value,ft.next=wt.nextLoc,ft.method!=="return"&&(ft.method="next",ft.arg=s),ft.delegate=null,W):Ct:(ft.method="throw",ft.arg=new TypeError("iterator result is not an object"),ft.delegate=null,W)}function Pt(wt){var ft={tryLoc:wt[0]};1 in wt&&(ft.catchLoc=wt[1]),2 in wt&&(ft.finallyLoc=wt[2],ft.afterLoc=wt[3]),this.tryEntries.push(ft)}function ct(wt){var ft=wt.completion||{};ft.type="normal",delete ft.arg,wt.completion=ft}function Et(wt){this.tryEntries=[{tryLoc:"root"}],wt.forEach(Pt,this),this.reset(!0)}function Zt(wt){if(wt||wt===""){var ft=wt[S];if(ft)return ft.call(wt);if(typeof wt.next=="function")return wt;if(!isNaN(wt.length)){var ht=-1,gt=function St(){for(;++ht<wt.length;)if(d.call(wt,ht))return St.value=wt[ht],St.done=!1,St;return St.value=s,St.done=!0,St};return gt.next=gt}}throw new TypeError(ye(wt)+" is not iterable")}return B.prototype=I,g(R,"constructor",{value:I,configurable:!0}),g(I,"constructor",{value:B,configurable:!0}),B.displayName=O(I,M,"GeneratorFunction"),o.isGeneratorFunction=function(wt){var ft=typeof wt=="function"&&wt.constructor;return!!ft&&(ft===B||(ft.displayName||ft.name)==="GeneratorFunction")},o.mark=function(wt){return Object.setPrototypeOf?Object.setPrototypeOf(wt,I):(wt.__proto__=I,O(wt,M,"GeneratorFunction")),wt.prototype=Object.create(R),wt},o.awrap=function(wt){return{__await:wt}},ot(lt.prototype),O(lt.prototype,P,function(){return this}),o.AsyncIterator=lt,o.async=function(wt,ft,ht,gt,St){St===void 0&&(St=Promise);var Ct=new lt(L(wt,ft,ht,gt),St);return o.isGeneratorFunction(ft)?Ct:Ct.next().then(function(Bt){return Bt.done?Bt.value:Ct.next()})},ot(R),O(R,M,"Generator"),O(R,S,function(){return this}),O(R,"toString",function(){return"[object Generator]"}),o.keys=function(wt){var ft=Object(wt),ht=[];for(var gt in ft)ht.push(gt);return ht.reverse(),function St(){for(;ht.length;){var Ct=ht.pop();if(Ct in ft)return St.value=Ct,St.done=!1,St}return St.done=!0,St}},o.values=Zt,Et.prototype={constructor:Et,reset:function(ft){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(ct),!ft)for(var ht in this)ht.charAt(0)==="t"&&d.call(this,ht)&&!isNaN(+ht.slice(1))&&(this[ht]=s)},stop:function(){this.done=!0;var ft=this.tryEntries[0].completion;if(ft.type==="throw")throw ft.arg;return this.rval},dispatchException:function(ft){if(this.done)throw ft;var ht=this;function gt(ge,ae){return Bt.type="throw",Bt.arg=ft,ht.next=ge,ae&&(ht.method="next",ht.arg=s),!!ae}for(var St=this.tryEntries.length-1;St>=0;--St){var Ct=this.tryEntries[St],Bt=Ct.completion;if(Ct.tryLoc==="root")return gt("end");if(Ct.tryLoc<=this.prev){var Ht=d.call(Ct,"catchLoc"),Ut=d.call(Ct,"finallyLoc");if(Ht&&Ut){if(this.prev<Ct.catchLoc)return gt(Ct.catchLoc,!0);if(this.prev<Ct.finallyLoc)return gt(Ct.finallyLoc)}else if(Ht){if(this.prev<Ct.catchLoc)return gt(Ct.catchLoc,!0)}else{if(!Ut)throw Error("try statement without catch or finally");if(this.prev<Ct.finallyLoc)return gt(Ct.finallyLoc)}}}},abrupt:function(ft,ht){for(var gt=this.tryEntries.length-1;gt>=0;--gt){var St=this.tryEntries[gt];if(St.tryLoc<=this.prev&&d.call(St,"finallyLoc")&&this.prev<St.finallyLoc){var Ct=St;break}}Ct&&(ft==="break"||ft==="continue")&&Ct.tryLoc<=ht&&ht<=Ct.finallyLoc&&(Ct=null);var Bt=Ct?Ct.completion:{};return Bt.type=ft,Bt.arg=ht,Ct?(this.method="next",this.next=Ct.finallyLoc,W):this.complete(Bt)},complete:function(ft,ht){if(ft.type==="throw")throw ft.arg;return ft.type==="break"||ft.type==="continue"?this.next=ft.arg:ft.type==="return"?(this.rval=this.arg=ft.arg,this.method="return",this.next="end"):ft.type==="normal"&&ht&&(this.next=ht),W},finish:function(ft){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var gt=this.tryEntries[ht];if(gt.finallyLoc===ft)return this.complete(gt.completion,gt.afterLoc),ct(gt),W}},catch:function(ft){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var gt=this.tryEntries[ht];if(gt.tryLoc===ft){var St=gt.completion;if(St.type==="throw"){var Ct=St.arg;ct(gt)}return Ct}}throw Error("illegal catch attempt")},delegateYield:function(ft,ht,gt){return this.delegate={iterator:Zt(ft),resultName:ht,nextLoc:gt},this.method==="next"&&(this.arg=s),W}},o}function bv(s,o,h,d,g,x,S){try{var P=s[x](S),M=P.value}catch(O){return void h(O)}P.done?o(M):Promise.resolve(M).then(d,g)}function Eo(s){return function(){var o=this,h=arguments;return new Promise(function(d,g){var x=s.apply(o,h);function S(M){bv(x,d,g,S,P,"next",M)}function P(M){bv(x,d,g,S,P,"throw",M)}S(void 0)})}}var hh=Mt({},X2),JT=hh.version,ZT=hh.render,QT=hh.unmountComponentAtNode,$c;try{var _T=Number((JT||"").split(".")[0]);_T>=18&&($c=hh.createRoot)}catch{}function wv(s){var o=hh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;o&&ye(o)==="object"&&(o.usingClientEntryPoint=s)}var tc="__rc_react_root__";function tA(s,o){wv(!0);var h=o[tc]||$c(o);wv(!1),h.render(s),o[tc]=h}function eA(s,o){ZT(s,o)}function Ww(s,o){if($c){tA(s,o);return}eA(s,o)}function nA(s){return lm.apply(this,arguments)}function lm(){return lm=Eo(wi().mark(function s(o){return wi().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Promise.resolve().then(function(){var g;(g=o[tc])===null||g===void 0||g.unmount(),delete o[tc]}));case 1:case"end":return d.stop()}},s)})),lm.apply(this,arguments)}function iA(s){QT(s)}function qw(s){return hm.apply(this,arguments)}function hm(){return hm=Eo(wi().mark(function s(o){return wi().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if($c===void 0){d.next=2;break}return d.abrupt("return",nA(o));case 2:iA(o);case 3:case"end":return d.stop()}},s)})),hm.apply(this,arguments)}const ec=(s,o,h)=>h!==void 0?h:`${s}-${o}`,sA=function(s){if(!s)return!1;if(s instanceof Element){if(s.offsetParent)return!0;if(s.getBBox){var o=s.getBBox(),h=o.width,d=o.height;if(h||d)return!0}if(s.getBoundingClientRect){var g=s.getBoundingClientRect(),x=g.width,S=g.height;if(x||S)return!0}}return!1},rA=s=>{const{componentCls:o,colorPrimary:h}=s;return{[o]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${h})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${s.motionEaseOutCirc}`,`opacity 2s ${s.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${s.motionDurationSlow} ${s.motionEaseInOut}`,`opacity ${s.motionDurationSlow} ${s.motionEaseInOut}`].join(",")}}}}},oA=TN("Wave",s=>[rA(s)]),Jw=`${Ju}-wave-target`;function ff(s){return s&&s!=="#fff"&&s!=="#ffffff"&&s!=="rgb(255, 255, 255)"&&s!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(s)&&s!=="transparent"}function aA(s){const{borderTopColor:o,borderColor:h,backgroundColor:d}=getComputedStyle(s);return ff(o)?o:ff(h)?h:ff(d)?d:null}function gf(s){return Number.isNaN(s)?0:s}const lA=s=>{const{className:o,target:h,component:d}=s,g=H.useRef(null),[x,S]=H.useState(null),[P,M]=H.useState([]),[O,L]=H.useState(0),[j,V]=H.useState(0),[q,J]=H.useState(0),[Y,W]=H.useState(0),[T,B]=H.useState(!1),I={left:O,top:j,width:q,height:Y,borderRadius:P.map(nt=>`${nt}px`).join(" ")};x&&(I["--wave-color"]=x);function tt(){const nt=getComputedStyle(h);S(aA(h));const R=nt.position==="static",{borderLeftWidth:ot,borderTopWidth:lt}=nt;L(R?h.offsetLeft:gf(-parseFloat(ot))),V(R?h.offsetTop:gf(-parseFloat(lt))),J(h.offsetWidth),W(h.offsetHeight);const{borderTopLeftRadius:rt,borderTopRightRadius:dt,borderBottomLeftRadius:Pt,borderBottomRightRadius:ct}=nt;M([rt,dt,ct,Pt].map(Et=>gf(parseFloat(Et))))}if(H.useEffect(()=>{if(h){const nt=Po(()=>{tt(),B(!0)});let R;return typeof ResizeObserver<"u"&&(R=new ResizeObserver(tt),R.observe(h)),()=>{Po.cancel(nt),R==null||R.disconnect()}}},[]),!T)return null;const z=(d==="Checkbox"||d==="Radio")&&(h==null?void 0:h.classList.contains(Jw));return H.createElement(lh,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(nt,R)=>{var ot;if(R.deadline||R.propertyName==="opacity"){const lt=(ot=g.current)===null||ot===void 0?void 0:ot.parentElement;qw(lt).then(()=>{lt==null||lt.remove()})}return!1}},(nt,R)=>{let{className:ot}=nt;return H.createElement("div",{ref:Fc(g,R),className:Ce(o,ot,{"wave-quick":z}),style:I})})},hA=(s,o)=>{var h;const{component:d}=o;if(d==="Checkbox"&&!(!((h=s.querySelector("input"))===null||h===void 0)&&h.checked))return;const g=document.createElement("div");g.style.position="absolute",g.style.left="0px",g.style.top="0px",s==null||s.insertBefore(g,s==null?void 0:s.firstChild),Ww(H.createElement(lA,Object.assign({},o,{target:s})),g)},uA=(s,o,h)=>{const{wave:d}=H.useContext(Un),[,g,x]=to(),S=Zl(O=>{const L=s.current;if(d!=null&&d.disabled||!L)return;const j=L.querySelector(`.${Jw}`)||L,{showEffect:V}=d||{};(V||hA)(j,{className:o,token:g,component:h,event:O,hashId:x})}),P=H.useRef();return O=>{Po.cancel(P.current),P.current=Po(()=>{S(O)})}},cA=s=>{const{children:o,disabled:h,component:d}=s,{getPrefixCls:g}=H.useContext(Un),x=H.useRef(null),S=g("wave"),[,P]=oA(S),M=uA(x,Ce(S,P),d);if(zt.useEffect(()=>{const L=x.current;if(!L||L.nodeType!==1||h)return;const j=V=>{!sA(V.target)||!L.getAttribute||L.getAttribute("disabled")||L.disabled||L.className.includes("disabled")||L.className.includes("-leave")||M(V)};return L.addEventListener("click",j,!0),()=>{L.removeEventListener("click",j,!0)}},[h]),!zt.isValidElement(o))return o??null;const O=Pp(o)?Fc(o.ref,x):x;return Kw(o,{ref:O})},dA=s=>{const o=zt.useContext(Ta);return zt.useMemo(()=>s?typeof s=="string"?s??o:s instanceof Function?s(o):o:o,[s,o])},Zw=H.createContext(null),fA=(s,o)=>{const h=H.useContext(Zw),d=H.useMemo(()=>{if(!h)return"";const{compactDirection:g,isFirstItem:x,isLastItem:S}=h,P=g==="vertical"?"-vertical-":"-";return Ce(`${s}-compact${P}item`,{[`${s}-compact${P}first-item`]:x,[`${s}-compact${P}last-item`]:S,[`${s}-compact${P}item-rtl`]:o==="rtl"})},[s,o,h]);return{compactSize:h==null?void 0:h.compactSize,compactDirection:h==null?void 0:h.compactDirection,compactItemClassnames:d}},gA=s=>{let{children:o}=s;return H.createElement(Zw.Provider,{value:null},o)};var mA=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};const Qw=H.createContext(void 0),pA=s=>{const{getPrefixCls:o,direction:h}=H.useContext(Un),{prefixCls:d,size:g,className:x}=s,S=mA(s,["prefixCls","size","className"]),P=o("btn-group",d),[,,M]=to();let O="";switch(g){case"large":O="lg";break;case"small":O="sm";break}const L=Ce(P,{[`${P}-${O}`]:O,[`${P}-rtl`]:h==="rtl"},x,M);return H.createElement(Qw.Provider,{value:g},H.createElement("div",Object.assign({},S,{className:L})))},Sv=/^[\u4E00-\u9FA5]{2}$/,um=Sv.test.bind(Sv);function _w(s){return s==="danger"?{danger:!0}:{type:s}}function Cv(s){return typeof s=="string"}function mf(s){return s==="text"||s==="link"}function yA(s,o){if(s==null)return;const h=o?" ":"";return typeof s!="string"&&typeof s!="number"&&Cv(s.type)&&um(s.props.children)?Kw(s,{children:s.props.children.split("").join(h)}):Cv(s)?um(s)?zt.createElement("span",null,s.split("").join(h)):zt.createElement("span",null,s):zT(s)?zt.createElement("span",null,s):s}function vA(s,o){let h=!1;const d=[];return zt.Children.forEach(s,g=>{const x=typeof g,S=x==="string"||x==="number";if(h&&S){const P=d.length-1,M=d[P];d[P]=`${M}${g}`}else d.push(g);h=S}),zt.Children.map(d,g=>yA(g,o))}const tS=H.forwardRef((s,o)=>{const{className:h,style:d,children:g,prefixCls:x}=s,S=Ce(`${x}-icon`,h);return zt.createElement("span",{ref:o,className:S,style:d},g)}),kv=H.forwardRef((s,o)=>{const{prefixCls:h,className:d,style:g,iconClassName:x}=s,S=Ce(`${h}-loading-icon`,d);return zt.createElement(tS,{prefixCls:h,className:S,style:g,ref:o},zt.createElement(UT,{className:x}))}),pf=()=>({width:0,opacity:0,transform:"scale(0)"}),yf=s=>({width:s.scrollWidth,opacity:1,transform:"scale(1)"}),xA=s=>{const{prefixCls:o,loading:h,existIcon:d,className:g,style:x}=s,S=!!h;return d?zt.createElement(kv,{prefixCls:o,className:g,style:x}):zt.createElement(lh,{visible:S,motionName:`${o}-loading-icon-motion`,motionLeave:S,removeOnLeave:!0,onAppearStart:pf,onAppearActive:yf,onEnterStart:pf,onEnterActive:yf,onLeaveStart:yf,onLeaveActive:pf},(P,M)=>{let{className:O,style:L}=P;return zt.createElement(kv,{prefixCls:o,className:g,style:Object.assign(Object.assign({},x),L),ref:M,iconClassName:O})})},Pv=(s,o)=>({[`> span, > ${s}`]:{"&:not(:last-child)":{[`&, & > ${s}`]:{"&:not(:disabled)":{borderInlineEndColor:o}}},"&:not(:first-child)":{[`&, & > ${s}`]:{"&:not(:disabled)":{borderInlineStartColor:o}}}}}),bA=s=>{const{componentCls:o,fontSize:h,lineWidth:d,groupBorderColor:g,colorErrorHover:x}=s;return{[`${o}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${o}`]:{"&:not(:last-child)":{[`&, & > ${o}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:s.calc(d).mul(-1).equal(),[`&, & > ${o}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[o]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${o}-icon-only`]:{fontSize:h}},Pv(`${o}-primary`,g),Pv(`${o}-danger`,x)]}},Jn=Math.round;function vf(s,o){const h=s.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],d=h.map(g=>parseFloat(g));for(let g=0;g<3;g+=1)d[g]=o(d[g]||0,h[g]||"",g);return h[3]?d[3]=h[3].includes("%")?d[3]/100:d[3]:d[3]=1,d}const Mv=(s,o,h)=>h===0?s:s/100;function sl(s,o){const h=o||255;return s>h?h:s<0?0:s}class Hc{constructor(o){pt(this,"isValid",!0),pt(this,"r",0),pt(this,"g",0),pt(this,"b",0),pt(this,"a",1),pt(this,"_h",void 0),pt(this,"_s",void 0),pt(this,"_l",void 0),pt(this,"_v",void 0),pt(this,"_max",void 0),pt(this,"_min",void 0),pt(this,"_brightness",void 0);function h(g){return g[0]in o&&g[1]in o&&g[2]in o}if(o)if(typeof o=="string"){let x=function(S){return g.startsWith(S)};var d=x;const g=o.trim();/^#?[A-F\d]{3,8}$/i.test(g)?this.fromHexString(g):x("rgb")?this.fromRgbString(g):x("hsl")?this.fromHslString(g):(x("hsv")||x("hsb"))&&this.fromHsvString(g)}else if(o instanceof Hc)this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this._h=o._h,this._s=o._s,this._l=o._l,this._v=o._v;else if(h("rgb"))this.r=sl(o.r),this.g=sl(o.g),this.b=sl(o.b),this.a=typeof o.a=="number"?sl(o.a,1):1;else if(h("hsl"))this.fromHsl(o);else if(h("hsv"))this.fromHsv(o);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(o))}setR(o){return this._sc("r",o)}setG(o){return this._sc("g",o)}setB(o){return this._sc("b",o)}setA(o){return this._sc("a",o,1)}setHue(o){const h=this.toHsv();return h.h=o,this._c(h)}getLuminance(){function o(x){const S=x/255;return S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4)}const h=o(this.r),d=o(this.g),g=o(this.b);return .2126*h+.7152*d+.0722*g}getHue(){if(typeof this._h>"u"){const o=this.getMax()-this.getMin();o===0?this._h=0:this._h=Jn(60*(this.r===this.getMax()?(this.g-this.b)/o+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/o+2:(this.r-this.g)/o+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const o=this.getMax()-this.getMin();o===0?this._s=0:this._s=o/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(o=10){const h=this.getHue(),d=this.getSaturation();let g=this.getLightness()-o/100;return g<0&&(g=0),this._c({h,s:d,l:g,a:this.a})}lighten(o=10){const h=this.getHue(),d=this.getSaturation();let g=this.getLightness()+o/100;return g>1&&(g=1),this._c({h,s:d,l:g,a:this.a})}mix(o,h=50){const d=this._c(o),g=h/100,x=P=>(d[P]-this[P])*g+this[P],S={r:Jn(x("r")),g:Jn(x("g")),b:Jn(x("b")),a:Jn(x("a")*100)/100};return this._c(S)}tint(o=10){return this.mix({r:255,g:255,b:255,a:1},o)}shade(o=10){return this.mix({r:0,g:0,b:0,a:1},o)}onBackground(o){const h=this._c(o),d=this.a+h.a*(1-this.a),g=x=>Jn((this[x]*this.a+h[x]*h.a*(1-this.a))/d);return this._c({r:g("r"),g:g("g"),b:g("b"),a:d})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(o){return this.r===o.r&&this.g===o.g&&this.b===o.b&&this.a===o.a}clone(){return this._c(this)}toHexString(){let o="#";const h=(this.r||0).toString(16);o+=h.length===2?h:"0"+h;const d=(this.g||0).toString(16);o+=d.length===2?d:"0"+d;const g=(this.b||0).toString(16);if(o+=g.length===2?g:"0"+g,typeof this.a=="number"&&this.a>=0&&this.a<1){const x=Jn(this.a*255).toString(16);o+=x.length===2?x:"0"+x}return o}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const o=this.getHue(),h=Jn(this.getSaturation()*100),d=Jn(this.getLightness()*100);return this.a!==1?`hsla(${o},${h}%,${d}%,${this.a})`:`hsl(${o},${h}%,${d}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(o,h,d){const g=this.clone();return g[o]=sl(h,d),g}_c(o){return new this.constructor(o)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(o){const h=o.replace("#","");function d(g,x){return parseInt(h[g]+h[x||g],16)}h.length<6?(this.r=d(0),this.g=d(1),this.b=d(2),this.a=h[3]?d(3)/255:1):(this.r=d(0,1),this.g=d(2,3),this.b=d(4,5),this.a=h[6]?d(6,7)/255:1)}fromHsl({h:o,s:h,l:d,a:g}){if(this._h=o%360,this._s=h,this._l=d,this.a=typeof g=="number"?g:1,h<=0){const V=Jn(d*255);this.r=V,this.g=V,this.b=V}let x=0,S=0,P=0;const M=o/60,O=(1-Math.abs(2*d-1))*h,L=O*(1-Math.abs(M%2-1));M>=0&&M<1?(x=O,S=L):M>=1&&M<2?(x=L,S=O):M>=2&&M<3?(S=O,P=L):M>=3&&M<4?(S=L,P=O):M>=4&&M<5?(x=L,P=O):M>=5&&M<6&&(x=O,P=L);const j=d-O/2;this.r=Jn((x+j)*255),this.g=Jn((S+j)*255),this.b=Jn((P+j)*255)}fromHsv({h:o,s:h,v:d,a:g}){this._h=o%360,this._s=h,this._v=d,this.a=typeof g=="number"?g:1;const x=Jn(d*255);if(this.r=x,this.g=x,this.b=x,h<=0)return;const S=o/60,P=Math.floor(S),M=S-P,O=Jn(d*(1-h)*255),L=Jn(d*(1-h*M)*255),j=Jn(d*(1-h*(1-M))*255);switch(P){case 0:this.g=j,this.b=O;break;case 1:this.r=L,this.b=O;break;case 2:this.r=O,this.b=j;break;case 3:this.r=O,this.g=L;break;case 4:this.r=j,this.g=O;break;case 5:default:this.g=O,this.b=L;break}}fromHsvString(o){const h=vf(o,Mv);this.fromHsv({h:h[0],s:h[1],v:h[2],a:h[3]})}fromHslString(o){const h=vf(o,Mv);this.fromHsl({h:h[0],s:h[1],l:h[2],a:h[3]})}fromRgbString(o){const h=vf(o,(d,g)=>g.includes("%")?Jn(d/100*255):d);this.r=h[0],this.g=h[1],this.b=h[2],this.a=h[3]}}var wA=["b"],SA=["v"],xf=function(o){return Math.round(Number(o||0))},CA=function(o){if(o instanceof Hc)return o;if(o&&ye(o)==="object"&&"h"in o&&"b"in o){var h=o,d=h.b,g=er(h,wA);return Mt(Mt({},g),{},{v:d})}return typeof o=="string"&&/hsb/.test(o)?o.replace(/hsb/,"hsv"):o},Ql=function(s){Ao(h,s);var o=Lo(h);function h(d){return oi(this,h),o.call(this,CA(d))}return ai(h,[{key:"toHsbString",value:function(){var g=this.toHsb(),x=xf(g.s*100),S=xf(g.b*100),P=xf(g.h),M=g.a,O="hsb(".concat(P,", ").concat(x,"%, ").concat(S,"%)"),L="hsba(".concat(P,", ").concat(x,"%, ").concat(S,"%, ").concat(M.toFixed(M===0?0:2),")");return M===1?O:L}},{key:"toHsb",value:function(){var g=this.toHsv(),x=g.v,S=er(g,SA);return Mt(Mt({},S),{},{b:x,a:this.a})}}]),h}(Hc),kA=function(o){return o instanceof Ql?o:new Ql(o)};kA("#1677ff");const PA=(s,o)=>(s==null?void 0:s.replace(/[^\w/]/g,"").slice(0,o?8:6))||"",MA=(s,o)=>s?PA(s,o):"";let NA=function(){function s(o){oi(this,s);var h;if(this.cleared=!1,o instanceof s){this.metaColor=o.metaColor.clone(),this.colors=(h=o.colors)===null||h===void 0?void 0:h.map(g=>({color:new s(g.color),percent:g.percent})),this.cleared=o.cleared;return}const d=Array.isArray(o);d&&o.length?(this.colors=o.map(g=>{let{color:x,percent:S}=g;return{color:new s(x),percent:S}}),this.metaColor=new Ql(this.colors[0].color.metaColor)):this.metaColor=new Ql(d?"":o),(!o||d&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return ai(s,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return MA(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:h}=this;return h?`linear-gradient(90deg, ${h.map(g=>`${g.color.toRgbString()} ${g.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(h){return!h||this.isGradient()!==h.isGradient()?!1:this.isGradient()?this.colors.length===h.colors.length&&this.colors.every((d,g)=>{const x=h.colors[g];return d.percent===x.percent&&d.color.equals(x.color)}):this.toHexString()===h.toHexString()}}])}();const TA=s=>({animationDuration:s,animationFillMode:"both"}),AA=s=>({animationDuration:s,animationFillMode:"both"}),eS=function(s,o,h,d){const x=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${x}${s}-enter,
      ${x}${s}-appear
    `]:Object.assign(Object.assign({},TA(d)),{animationPlayState:"paused"}),[`${x}${s}-leave`]:Object.assign(Object.assign({},AA(d)),{animationPlayState:"paused"}),[`
      ${x}${s}-enter${s}-enter-active,
      ${x}${s}-appear${s}-appear-active
    `]:{animationName:o,animationPlayState:"running"},[`${x}${s}-leave${s}-leave-active`]:{animationName:h,animationPlayState:"running",pointerEvents:"none"}}},LA=new ki("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),EA=new ki("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),DA=function(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:h}=s,d=`${h}-fade`,g=o?"&":"";return[eS(d,LA,EA,s.motionDurationMid,o),{[`
        ${g}${d}-enter,
        ${g}${d}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${g}${d}-leave`]:{animationTimingFunction:"linear"}}]},OA=new ki("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),FA=new ki("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),Nv=new ki("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Tv=new ki("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),RA=new ki("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),IA=new ki("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),BA=new ki("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),jA=new ki("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),zA=new ki("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),VA=new ki("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),$A=new ki("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),HA=new ki("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),UA={zoom:{inKeyframes:OA,outKeyframes:FA},"zoom-big":{inKeyframes:Nv,outKeyframes:Tv},"zoom-big-fast":{inKeyframes:Nv,outKeyframes:Tv},"zoom-left":{inKeyframes:BA,outKeyframes:jA},"zoom-right":{inKeyframes:zA,outKeyframes:VA},"zoom-up":{inKeyframes:RA,outKeyframes:IA},"zoom-down":{inKeyframes:$A,outKeyframes:HA}},KA=(s,o)=>{const{antCls:h}=s,d=`${h}-${o}`,{inKeyframes:g,outKeyframes:x}=UA[o];return[eS(d,g,x,s.motionDurationMid),{[`
        ${d}-enter,
        ${d}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:s.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${d}-leave`]:{animationTimingFunction:s.motionEaseInOutCirc}}]},GA=(s,o)=>{const{r:h,g:d,b:g,a:x}=s.toRgb(),S=new Ql(s.toRgbString()).onBackground(o).toHsv();return x<=.5?S.v>.5:h*.299+d*.587+g*.114>192},nS=s=>{const{paddingInline:o,onlyIconSize:h,paddingBlock:d}=s;return _r(s,{buttonPaddingHorizontal:o,buttonPaddingVertical:d,buttonIconOnlyFontSize:h})},iS=s=>{var o,h,d,g,x,S;const P=(o=s.contentFontSize)!==null&&o!==void 0?o:s.fontSize,M=(h=s.contentFontSizeSM)!==null&&h!==void 0?h:s.fontSize,O=(d=s.contentFontSizeLG)!==null&&d!==void 0?d:s.fontSizeLG,L=(g=s.contentLineHeight)!==null&&g!==void 0?g:bu(P),j=(x=s.contentLineHeightSM)!==null&&x!==void 0?x:bu(M),V=(S=s.contentLineHeightLG)!==null&&S!==void 0?S:bu(O),q=GA(new NA(s.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${s.controlOutlineWidth}px 0 ${s.controlTmpOutline}`,primaryShadow:`0 ${s.controlOutlineWidth}px 0 ${s.controlOutline}`,dangerShadow:`0 ${s.controlOutlineWidth}px 0 ${s.colorErrorOutline}`,primaryColor:s.colorTextLightSolid,dangerColor:s.colorTextLightSolid,borderColorDisabled:s.colorBorder,defaultGhostColor:s.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:s.colorBgContainer,paddingInline:s.paddingContentHorizontal-s.lineWidth,paddingInlineLG:s.paddingContentHorizontal-s.lineWidth,paddingInlineSM:8-s.lineWidth,onlyIconSize:s.fontSizeLG,onlyIconSizeSM:s.fontSizeLG-2,onlyIconSizeLG:s.fontSizeLG+2,groupBorderColor:s.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:s.colorText,textTextHoverColor:s.colorText,textTextActiveColor:s.colorText,textHoverBg:s.colorFillTertiary,defaultColor:s.colorText,defaultBg:s.colorBgContainer,defaultBorderColor:s.colorBorder,defaultBorderColorDisabled:s.colorBorder,defaultHoverBg:s.colorBgContainer,defaultHoverColor:s.colorPrimaryHover,defaultHoverBorderColor:s.colorPrimaryHover,defaultActiveBg:s.colorBgContainer,defaultActiveColor:s.colorPrimaryActive,defaultActiveBorderColor:s.colorPrimaryActive,solidTextColor:q,contentFontSize:P,contentFontSizeSM:M,contentFontSizeLG:O,contentLineHeight:L,contentLineHeightSM:j,contentLineHeightLG:V,paddingBlock:Math.max((s.controlHeight-P*L)/2-s.lineWidth,0),paddingBlockSM:Math.max((s.controlHeightSM-M*j)/2-s.lineWidth,0),paddingBlockLG:Math.max((s.controlHeightLG-O*V)/2-s.lineWidth,0)}},XA=s=>{const{componentCls:o,iconCls:h,fontWeight:d}=s;return{[o]:{outline:"none",position:"relative",display:"inline-flex",gap:s.marginXS,alignItems:"center",justifyContent:"center",fontWeight:d,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${He(s.lineWidth)} ${s.lineType} transparent`,cursor:"pointer",transition:`all ${s.motionDurationMid} ${s.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:s.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-flex"},[`${o}-icon`]:{lineHeight:1},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},kw(s)),[`&${o}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${o}-two-chinese-chars > *:not(${h})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},"&-icon-end":{flexDirection:"row-reverse"}}}},sS=(s,o,h)=>({[`&:not(:disabled):not(${s}-disabled)`]:{"&:hover":o,"&:active":h}}),YA=s=>({minWidth:s.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),WA=s=>({borderRadius:s.controlHeight,paddingInlineStart:s.calc(s.controlHeight).div(2).equal(),paddingInlineEnd:s.calc(s.controlHeight).div(2).equal()}),qA=s=>({cursor:"not-allowed",borderColor:s.borderColorDisabled,color:s.colorTextDisabled,background:s.colorBgContainerDisabled,boxShadow:"none"}),$p=(s,o,h,d,g,x,S,P)=>({[`&${s}-background-ghost`]:Object.assign(Object.assign({color:h||void 0,background:o,borderColor:d||void 0,boxShadow:"none"},sS(s,Object.assign({background:o},S),Object.assign({background:o},P))),{"&:disabled":{cursor:"not-allowed",color:g||void 0,borderColor:x||void 0}})}),JA=s=>({[`&:disabled, &${s.componentCls}-disabled`]:Object.assign({},qA(s))}),ZA=s=>({[`&:disabled, &${s.componentCls}-disabled`]:{cursor:"not-allowed",color:s.colorTextDisabled}}),Uc=(s,o,h,d)=>{const x=d&&["link","text"].includes(d)?ZA:JA;return Object.assign(Object.assign({},x(s)),sS(s.componentCls,o,h))},Hp=(s,o,h,d,g)=>({[`&${s.componentCls}-variant-solid`]:Object.assign({color:o,background:h},Uc(s,d,g))}),Up=(s,o,h,d,g)=>({[`&${s.componentCls}-variant-outlined, &${s.componentCls}-variant-dashed`]:Object.assign({borderColor:o,background:h},Uc(s,d,g))}),Kp=s=>({[`&${s.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),Gp=(s,o,h,d)=>({[`&${s.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:o},Uc(s,h,d))}),Aa=(s,o,h,d,g)=>({[`&${s.componentCls}-variant-${h}`]:Object.assign({color:o,boxShadow:"none"},Uc(s,d,g,h))}),QA=s=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:s.defaultColor,boxShadow:s.defaultShadow},Hp(s,s.solidTextColor,s.colorBgSolid,{background:s.colorBgSolidHover},{background:s.colorBgSolidActive})),Kp(s)),Gp(s,s.colorFillTertiary,{background:s.colorFillSecondary},{background:s.colorFill})),Aa(s,s.textTextColor,"link",{color:s.colorLinkHover,background:s.linkHoverBg},{color:s.colorLinkActive})),$p(s.componentCls,s.ghostBg,s.defaultGhostColor,s.defaultGhostBorderColor,s.colorTextDisabled,s.colorBorder)),_A=s=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:s.colorPrimary,boxShadow:s.primaryShadow},Up(s,s.colorPrimary,s.colorBgContainer,{color:s.colorPrimaryTextHover,borderColor:s.colorPrimaryHover,background:s.colorBgContainer},{color:s.colorPrimaryTextActive,borderColor:s.colorPrimaryActive,background:s.colorBgContainer})),Kp(s)),Gp(s,s.colorPrimaryBg,{background:s.colorPrimaryBgHover},{background:s.colorPrimaryBorder})),Aa(s,s.colorLink,"text",{color:s.colorPrimaryTextHover,background:s.colorPrimaryBg},{color:s.colorPrimaryTextActive,background:s.colorPrimaryBorder})),$p(s.componentCls,s.ghostBg,s.colorPrimary,s.colorPrimary,s.colorTextDisabled,s.colorBorder,{color:s.colorPrimaryHover,borderColor:s.colorPrimaryHover},{color:s.colorPrimaryActive,borderColor:s.colorPrimaryActive})),tL=s=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:s.colorError,boxShadow:s.dangerShadow},Hp(s,s.dangerColor,s.colorError,{background:s.colorErrorHover},{background:s.colorErrorActive})),Up(s,s.colorError,s.colorBgContainer,{color:s.colorErrorHover,borderColor:s.colorErrorBorderHover},{color:s.colorErrorActive,borderColor:s.colorErrorActive})),Kp(s)),Gp(s,s.colorErrorBg,{background:s.colorErrorBgFilledHover},{background:s.colorErrorBgActive})),Aa(s,s.colorError,"text",{color:s.colorErrorHover,background:s.colorErrorBg},{color:s.colorErrorHover,background:s.colorErrorBgActive})),Aa(s,s.colorError,"link",{color:s.colorErrorHover},{color:s.colorErrorActive})),$p(s.componentCls,s.ghostBg,s.colorError,s.colorError,s.colorTextDisabled,s.colorBorder,{color:s.colorErrorHover,borderColor:s.colorErrorHover},{color:s.colorErrorActive,borderColor:s.colorErrorActive})),eL=s=>{const{componentCls:o}=s;return{[`${o}-color-default`]:QA(s),[`${o}-color-primary`]:_A(s),[`${o}-color-dangerous`]:tL(s)}},nL=s=>Object.assign(Object.assign(Object.assign(Object.assign({},Up(s,s.defaultBorderColor,s.defaultBg,{color:s.defaultHoverColor,borderColor:s.defaultHoverBorderColor,background:s.defaultHoverBg},{color:s.defaultActiveColor,borderColor:s.defaultActiveBorderColor,background:s.defaultActiveBg})),Aa(s,s.textTextColor,"text",{color:s.textTextHoverColor,background:s.textHoverBg},{color:s.textTextActiveColor,background:s.colorBgTextActive})),Hp(s,s.primaryColor,s.colorPrimary,{background:s.colorPrimaryHover,color:s.primaryColor},{background:s.colorPrimaryActive,color:s.primaryColor})),Aa(s,s.colorLink,"link",{color:s.colorLinkHover,background:s.linkHoverBg},{color:s.colorLinkActive})),Xp=function(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:h,controlHeight:d,fontSize:g,lineHeight:x,borderRadius:S,buttonPaddingHorizontal:P,iconCls:M,buttonPaddingVertical:O}=s,L=`${h}-icon-only`;return[{[o]:{fontSize:g,lineHeight:x,height:d,padding:`${He(O)} ${He(P)}`,borderRadius:S,[`&${L}`]:{width:d,paddingInline:0,[`&${h}-compact-item`]:{flex:"none"},[`&${h}-round`]:{width:"auto"},[M]:{fontSize:s.buttonIconOnlyFontSize}},[`&${h}-loading`]:{opacity:s.opacityLoading,cursor:"default"},[`${h}-loading-icon`]:{transition:`width ${s.motionDurationSlow} ${s.motionEaseInOut}, opacity ${s.motionDurationSlow} ${s.motionEaseInOut}`}}},{[`${h}${h}-circle${o}`]:YA(s)},{[`${h}${h}-round${o}`]:WA(s)}]},iL=s=>{const o=_r(s,{fontSize:s.contentFontSize,lineHeight:s.contentLineHeight});return Xp(o,s.componentCls)},sL=s=>{const o=_r(s,{controlHeight:s.controlHeightSM,fontSize:s.contentFontSizeSM,lineHeight:s.contentLineHeightSM,padding:s.paddingXS,buttonPaddingHorizontal:s.paddingInlineSM,buttonPaddingVertical:s.paddingBlockSM,borderRadius:s.borderRadiusSM,buttonIconOnlyFontSize:s.onlyIconSizeSM});return Xp(o,`${s.componentCls}-sm`)},rL=s=>{const o=_r(s,{controlHeight:s.controlHeightLG,fontSize:s.contentFontSizeLG,lineHeight:s.contentLineHeightLG,buttonPaddingHorizontal:s.paddingInlineLG,buttonPaddingVertical:s.paddingBlockLG,borderRadius:s.borderRadiusLG,buttonIconOnlyFontSize:s.onlyIconSizeLG});return Xp(o,`${s.componentCls}-lg`)},oL=s=>{const{componentCls:o}=s;return{[o]:{[`&${o}-block`]:{width:"100%"}}}},aL=jp("Button",s=>{const o=nS(s);return[XA(o),iL(o),sL(o),rL(o),oL(o),eL(o),nL(o),bA(o)]},iS,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function lL(s,o,h){const{focusElCls:d,focus:g,borderElCls:x}=h,S=x?"> *":"",P=["hover",g?"focus":null,"active"].filter(Boolean).map(M=>`&:${M} ${S}`).join(",");return{[`&-item:not(${o}-last-item)`]:{marginInlineEnd:s.calc(s.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[P]:{zIndex:2}},d?{[`&${d}`]:{zIndex:2}}:{}),{[`&[disabled] ${S}`]:{zIndex:0}})}}function hL(s,o,h){const{borderElCls:d}=h,g=d?`> ${d}`:"";return{[`&-item:not(${o}-first-item):not(${o}-last-item) ${g}`]:{borderRadius:0},[`&-item:not(${o}-last-item)${o}-first-item`]:{[`& ${g}, &${s}-sm ${g}, &${s}-lg ${g}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${o}-first-item)${o}-last-item`]:{[`& ${g}, &${s}-sm ${g}, &${s}-lg ${g}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function uL(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:h}=s,d=`${h}-compact`;return{[d]:Object.assign(Object.assign({},lL(s,d,o)),hL(h,d,o))}}function cL(s,o){return{[`&-item:not(${o}-last-item)`]:{marginBottom:s.calc(s.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function dL(s,o){return{[`&-item:not(${o}-first-item):not(${o}-last-item)`]:{borderRadius:0},[`&-item${o}-first-item:not(${o}-last-item)`]:{[`&, &${s}-sm, &${s}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${o}-last-item:not(${o}-first-item)`]:{[`&, &${s}-sm, &${s}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function fL(s){const o=`${s.componentCls}-compact-vertical`;return{[o]:Object.assign(Object.assign({},cL(s,o)),dL(s.componentCls,o))}}const gL=s=>{const{componentCls:o,calc:h}=s;return{[o]:{[`&-compact-item${o}-primary`]:{[`&:not([disabled]) + ${o}-compact-item${o}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:h(s.lineWidth).mul(-1).equal(),insetInlineStart:h(s.lineWidth).mul(-1).equal(),display:"inline-block",width:s.lineWidth,height:`calc(100% + ${He(s.lineWidth)} * 2)`,backgroundColor:s.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${o}-primary`]:{[`&:not([disabled]) + ${o}-compact-vertical-item${o}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:h(s.lineWidth).mul(-1).equal(),insetInlineStart:h(s.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${He(s.lineWidth)} * 2)`,height:s.lineWidth,backgroundColor:s.colorPrimaryHover,content:'""'}}}}}}},mL=Mw(["Button","compact"],s=>{const o=nS(s);return[uL(o),fL(o),gL(o)]},iS);var pL=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};function yL(s){if(typeof s=="object"&&s){let o=s==null?void 0:s.delay;return o=!Number.isNaN(o)&&typeof o=="number"?o:0,{loading:o<=0,delay:o}}return{loading:!!s,delay:0}}const vL={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},xL=zt.forwardRef((s,o)=>{var h,d,g,x;const{loading:S=!1,prefixCls:P,color:M,variant:O,type:L,danger:j=!1,shape:V="default",size:q,styles:J,disabled:Y,className:W,rootClassName:T,children:B,icon:I,iconPosition:tt="start",ghost:z=!1,block:nt=!1,htmlType:R="button",classNames:ot,style:lt={},autoInsertSpace:rt}=s,dt=pL(s,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),Pt=L||"default",[ct,Et]=H.useMemo(()=>{if(M&&O)return[M,O];const we=vL[Pt]||[];return j?["danger",we[1]]:we},[L,M,O,j]),wt=ct==="danger"?"dangerous":ct,{getPrefixCls:ft,direction:ht,button:gt}=H.useContext(Un),St=(h=rt??(gt==null?void 0:gt.autoInsertSpace))!==null&&h!==void 0?h:!0,Ct=ft("btn",P),[Bt,Ht,Ut]=aL(Ct),ge=H.useContext(Zu),ae=Y??ge,me=H.useContext(Qw),je=H.useMemo(()=>yL(S),[S]),[Fe,pe]=H.useState(je.loading),[Mn,Ve]=H.useState(!1),Ze=Fc(o,H.createRef()),Le=H.Children.count(B)===1&&!I&&!mf(Et);H.useEffect(()=>{let we=null;je.delay>0?we=setTimeout(()=>{we=null,pe(!0)},je.delay):pe(je.loading);function Gn(){we&&(clearTimeout(we),we=null)}return Gn},[je]),H.useEffect(()=>{if(!Ze||!Ze.current||!St)return;const we=Ze.current.textContent;Le&&um(we)?Mn||Ve(!0):Mn&&Ve(!1)},[Ze]);const Qe=zt.useCallback(we=>{var Gn;if(Fe||ae){we.preventDefault();return}(Gn=s.onClick)===null||Gn===void 0||Gn.call(s,we)},[s.onClick,Fe,ae]),{compactSize:xs,compactItemClassnames:Dn}=fA(Ct,ht),nn={large:"lg",small:"sm",middle:void 0},De=dA(we=>{var Gn,Us;return(Us=(Gn=q??xs)!==null&&Gn!==void 0?Gn:me)!==null&&Us!==void 0?Us:we}),$e=De&&(d=nn[De])!==null&&d!==void 0?d:"",vn=Fe?"loading":I,li=Rc(dt,["navigate"]),ti=Ce(Ct,Ht,Ut,{[`${Ct}-${V}`]:V!=="default"&&V,[`${Ct}-${Pt}`]:Pt,[`${Ct}-dangerous`]:j,[`${Ct}-color-${wt}`]:wt,[`${Ct}-variant-${Et}`]:Et,[`${Ct}-${$e}`]:$e,[`${Ct}-icon-only`]:!B&&B!==0&&!!vn,[`${Ct}-background-ghost`]:z&&!mf(Et),[`${Ct}-loading`]:Fe,[`${Ct}-two-chinese-chars`]:Mn&&St&&!Fe,[`${Ct}-block`]:nt,[`${Ct}-rtl`]:ht==="rtl",[`${Ct}-icon-end`]:tt==="end"},Dn,W,T,gt==null?void 0:gt.className),nr=Object.assign(Object.assign({},gt==null?void 0:gt.style),lt),ns=Ce(ot==null?void 0:ot.icon,(g=gt==null?void 0:gt.classNames)===null||g===void 0?void 0:g.icon),ei=Object.assign(Object.assign({},(J==null?void 0:J.icon)||{}),((x=gt==null?void 0:gt.styles)===null||x===void 0?void 0:x.icon)||{}),Ri=I&&!Fe?zt.createElement(tS,{prefixCls:Ct,className:ns,style:ei},I):zt.createElement(xA,{existIcon:!!I,prefixCls:Ct,loading:Fe}),Ii=B||B===0?vA(B,Le&&St):null;if(li.href!==void 0)return Bt(zt.createElement("a",Object.assign({},li,{className:Ce(ti,{[`${Ct}-disabled`]:ae}),href:ae?void 0:li.href,style:nr,onClick:Qe,ref:Ze,tabIndex:ae?-1:0}),Ri,Ii));let Pi=zt.createElement("button",Object.assign({},dt,{type:R,className:ti,style:nr,onClick:Qe,disabled:ae,ref:Ze}),Ri,Ii,!!Dn&&zt.createElement(mL,{key:"compact",prefixCls:Ct}));return mf(Et)||(Pi=zt.createElement(cA,{component:"Button",disabled:Fe},Pi)),Bt(Pi)}),uh=xL;uh.Group=pA;uh.__ANT_BUTTON=!0;function bf(s){return!!(s!=null&&s.then)}const rS=s=>{const{type:o,children:h,prefixCls:d,buttonProps:g,close:x,autoFocus:S,emitEvent:P,isSilent:M,quitOnNullishReturnValue:O,actionFn:L}=s,j=H.useRef(!1),V=H.useRef(null),[q,J]=Qu(!1),Y=function(){x==null||x.apply(void 0,arguments)};H.useEffect(()=>{let B=null;return S&&(B=setTimeout(()=>{var I;(I=V.current)===null||I===void 0||I.focus()})),()=>{B&&clearTimeout(B)}},[]);const W=B=>{bf(B)&&(J(!0),B.then(function(){J(!1,!0),Y.apply(void 0,arguments),j.current=!1},I=>{if(J(!1,!0),j.current=!1,!(M!=null&&M()))return Promise.reject(I)}))},T=B=>{if(j.current)return;if(j.current=!0,!L){Y();return}let I;if(P){if(I=L(B),O&&!bf(I)){j.current=!1,Y(B);return}}else if(L.length)I=L(x),j.current=!1;else if(I=L(),!bf(I)){Y();return}W(I)};return H.createElement(uh,Object.assign({},_w(o),{onClick:T,loading:q,prefixCls:d},g,{ref:V}),h)},ch=zt.createContext({}),{Provider:oS}=ch,Av=()=>{const{autoFocusButton:s,cancelButtonProps:o,cancelTextLocale:h,isSilent:d,mergedOkCancel:g,rootPrefixCls:x,close:S,onCancel:P,onConfirm:M}=H.useContext(ch);return g?zt.createElement(rS,{isSilent:d,actionFn:P,close:function(){S==null||S.apply(void 0,arguments),M==null||M(!1)},autoFocus:s==="cancel",buttonProps:o,prefixCls:`${x}-btn`},h):null},Lv=()=>{const{autoFocusButton:s,close:o,isSilent:h,okButtonProps:d,rootPrefixCls:g,okTextLocale:x,okType:S,onConfirm:P,onOk:M}=H.useContext(ch);return zt.createElement(rS,{isSilent:h,type:S||"primary",actionFn:M,close:function(){o==null||o.apply(void 0,arguments),P==null||P(!0)},autoFocus:s==="ok",buttonProps:d,prefixCls:`${g}-btn`},x)};var aS=H.createContext(null),Ev=[];function bL(s,o){var h=H.useState(function(){if(!Oi())return null;var J=document.createElement("div");return J}),d=ce(h,1),g=d[0],x=H.useRef(!1),S=H.useContext(aS),P=H.useState(Ev),M=ce(P,2),O=M[0],L=M[1],j=S||(x.current?void 0:function(J){L(function(Y){var W=[J].concat(he(Y));return W})});function V(){g.parentElement||document.body.appendChild(g),x.current=!0}function q(){var J;(J=g.parentElement)===null||J===void 0||J.removeChild(g),x.current=!1}return Wu(function(){return s?S?S(V):V():q(),q},[s]),Wu(function(){O.length&&(O.forEach(function(J){return J()}),L(Ev))},[O]),[g,j]}function wL(s){var o="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),h=document.createElement("div");h.id=o;var d=h.style;d.position="absolute",d.left="0",d.top="0",d.width="100px",d.height="100px",d.overflow="scroll";var g,x;if(s){var S=getComputedStyle(s);d.scrollbarColor=S.scrollbarColor,d.scrollbarWidth=S.scrollbarWidth;var P=getComputedStyle(s,"::-webkit-scrollbar"),M=parseInt(P.width,10),O=parseInt(P.height,10);try{var L=M?"width: ".concat(P.width,";"):"",j=O?"height: ".concat(P.height,";"):"";gr(`
#`.concat(o,`::-webkit-scrollbar {
`).concat(L,`
`).concat(j,`
}`),o)}catch(J){console.error(J),g=M,x=O}}document.body.appendChild(h);var V=s&&g&&!isNaN(g)?g:h.offsetWidth-h.clientWidth,q=s&&x&&!isNaN(x)?x:h.offsetHeight-h.clientHeight;return document.body.removeChild(h),Xl(o),{width:V,height:q}}function SL(s){return typeof document>"u"||!s||!(s instanceof Element)?{width:0,height:0}:wL(s)}function CL(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var kL="rc-util-locker-".concat(Date.now()),Dv=0;function PL(s){var o=!!s,h=H.useState(function(){return Dv+=1,"".concat(kL,"_").concat(Dv)}),d=ce(h,1),g=d[0];Wu(function(){if(o){var x=SL(document.body).width,S=CL();gr(`
html body {
  overflow-y: hidden;
  `.concat(S?"width: calc(100% - ".concat(x,"px);"):"",`
}`),g)}else Xl(g);return function(){Xl(g)}},[o,g])}var ML=!1;function NL(s){return ML}var Ov=function(o){return o===!1?!1:!Oi()||!o?null:typeof o=="string"?document.querySelector(o):typeof o=="function"?o():o},TL=H.forwardRef(function(s,o){var h=s.open,d=s.autoLock,g=s.getContainer;s.debug;var x=s.autoDestroy,S=x===void 0?!0:x,P=s.children,M=H.useState(h),O=ce(M,2),L=O[0],j=O[1],V=L||h;H.useEffect(function(){(S||h)&&j(h)},[h,S]);var q=H.useState(function(){return Ov(g)}),J=ce(q,2),Y=J[0],W=J[1];H.useEffect(function(){var dt=Ov(g);W(dt??null)});var T=bL(V&&!Y),B=ce(T,2),I=B[0],tt=B[1],z=Y??I;PL(d&&h&&Oi()&&(z===I||z===document.body));var nt=null;if(P&&Pp(P)&&o){var R=P;nt=R.ref}var ot=Bb(nt,o);if(!V||!Oi()||Y===void 0)return null;var lt=z===!1||NL(),rt=P;return o&&(rt=H.cloneElement(P,{ref:ot})),H.createElement(aS.Provider,{value:tt},lt?rt:Zs.createPortal(rt,z))}),lS=H.createContext({});function AL(){var s=Mt({},lc);return s.useId}var Fv=0,Rv=AL();const LL=Rv?function(o){var h=Rv();return o||h}:function(o){var h=H.useState("ssr-id"),d=ce(h,2),g=d[0],x=d[1];return H.useEffect(function(){var S=Fv;Fv+=1,x("rc_unique_".concat(S))},[]),o||g};function Iv(s,o,h){var d=o;return!d&&h&&(d="".concat(s,"-").concat(h)),d}function Bv(s,o){var h=s["page".concat(o?"Y":"X","Offset")],d="scroll".concat(o?"Top":"Left");if(typeof h!="number"){var g=s.document;h=g.documentElement[d],typeof h!="number"&&(h=g.body[d])}return h}function EL(s){var o=s.getBoundingClientRect(),h={left:o.left,top:o.top},d=s.ownerDocument,g=d.defaultView||d.parentWindow;return h.left+=Bv(g),h.top+=Bv(g,!0),h}const DL=H.memo(function(s){var o=s.children;return o},function(s,o){var h=o.shouldUpdate;return!h});var OL={width:0,height:0,overflow:"hidden",outline:"none"},FL={outline:"none"},hS=zt.forwardRef(function(s,o){var h=s.prefixCls,d=s.className,g=s.style,x=s.title,S=s.ariaId,P=s.footer,M=s.closable,O=s.closeIcon,L=s.onClose,j=s.children,V=s.bodyStyle,q=s.bodyProps,J=s.modalRender,Y=s.onMouseDown,W=s.onMouseUp,T=s.holderRef,B=s.visible,I=s.forceRender,tt=s.width,z=s.height,nt=s.classNames,R=s.styles,ot=zt.useContext(lS),lt=ot.panel,rt=Bb(T,lt),dt=H.useRef(),Pt=H.useRef();zt.useImperativeHandle(o,function(){return{focus:function(){var Bt;(Bt=dt.current)===null||Bt===void 0||Bt.focus({preventScroll:!0})},changeActive:function(Bt){var Ht=document,Ut=Ht.activeElement;Bt&&Ut===Pt.current?dt.current.focus({preventScroll:!0}):!Bt&&Ut===dt.current&&Pt.current.focus({preventScroll:!0})}}});var ct={};tt!==void 0&&(ct.width=tt),z!==void 0&&(ct.height=z);var Et=P?zt.createElement("div",{className:Ce("".concat(h,"-footer"),nt==null?void 0:nt.footer),style:Mt({},R==null?void 0:R.footer)},P):null,Zt=x?zt.createElement("div",{className:Ce("".concat(h,"-header"),nt==null?void 0:nt.header),style:Mt({},R==null?void 0:R.header)},zt.createElement("div",{className:"".concat(h,"-title"),id:S},x)):null,wt=H.useMemo(function(){return ye(M)==="object"&&M!==null?M:M?{closeIcon:O??zt.createElement("span",{className:"".concat(h,"-close-x")})}:{}},[M,O,h]),ft=Vp(wt,!0),ht=ye(M)==="object"&&M.disabled,gt=M?zt.createElement("button",En({type:"button",onClick:L,"aria-label":"Close"},ft,{className:"".concat(h,"-close"),disabled:ht}),wt.closeIcon):null,St=zt.createElement("div",{className:Ce("".concat(h,"-content"),nt==null?void 0:nt.content),style:R==null?void 0:R.content},gt,Zt,zt.createElement("div",En({className:Ce("".concat(h,"-body"),nt==null?void 0:nt.body),style:Mt(Mt({},V),R==null?void 0:R.body)},q),j),Et);return zt.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":x?S:null,"aria-modal":"true",ref:rt,style:Mt(Mt({},g),ct),className:Ce(h,d),onMouseDown:Y,onMouseUp:W},zt.createElement("div",{ref:dt,tabIndex:0,style:FL},zt.createElement(DL,{shouldUpdate:B||I},J?J(St):St)),zt.createElement("div",{tabIndex:0,ref:Pt,style:OL}))}),uS=H.forwardRef(function(s,o){var h=s.prefixCls,d=s.title,g=s.style,x=s.className,S=s.visible,P=s.forceRender,M=s.destroyOnClose,O=s.motionName,L=s.ariaId,j=s.onVisibleChanged,V=s.mousePosition,q=H.useRef(),J=H.useState(),Y=ce(J,2),W=Y[0],T=Y[1],B={};W&&(B.transformOrigin=W);function I(){var tt=EL(q.current);T(V&&(V.x||V.y)?"".concat(V.x-tt.left,"px ").concat(V.y-tt.top,"px"):"")}return H.createElement(lh,{visible:S,onVisibleChanged:j,onAppearPrepare:I,onEnterPrepare:I,forceRender:P,motionName:O,removeOnLeave:M,ref:q},function(tt,z){var nt=tt.className,R=tt.style;return H.createElement(hS,En({},s,{ref:o,title:d,ariaId:L,prefixCls:h,holderRef:z,style:Mt(Mt(Mt({},R),g),B),className:Ce(x,nt)}))})});uS.displayName="Content";var RL=function(o){var h=o.prefixCls,d=o.style,g=o.visible,x=o.maskProps,S=o.motionName,P=o.className;return H.createElement(lh,{key:"mask",visible:g,motionName:S,leavedClassName:"".concat(h,"-mask-hidden")},function(M,O){var L=M.className,j=M.style;return H.createElement("div",En({ref:O,style:Mt(Mt({},j),d),className:Ce("".concat(h,"-mask"),L,P)},x))})},IL=function(o){var h=o.prefixCls,d=h===void 0?"rc-dialog":h,g=o.zIndex,x=o.visible,S=x===void 0?!1:x,P=o.keyboard,M=P===void 0?!0:P,O=o.focusTriggerAfterClose,L=O===void 0?!0:O,j=o.wrapStyle,V=o.wrapClassName,q=o.wrapProps,J=o.onClose,Y=o.afterOpenChange,W=o.afterClose,T=o.transitionName,B=o.animation,I=o.closable,tt=I===void 0?!0:I,z=o.mask,nt=z===void 0?!0:z,R=o.maskTransitionName,ot=o.maskAnimation,lt=o.maskClosable,rt=lt===void 0?!0:lt,dt=o.maskStyle,Pt=o.maskProps,ct=o.rootClassName,Et=o.classNames,Zt=o.styles,wt=H.useRef(),ft=H.useRef(),ht=H.useRef(),gt=H.useState(S),St=ce(gt,2),Ct=St[0],Bt=St[1],Ht=LL();function Ut(){Eg(ft.current,document.activeElement)||(wt.current=document.activeElement)}function ge(){if(!Eg(ft.current,document.activeElement)){var Le;(Le=ht.current)===null||Le===void 0||Le.focus()}}function ae(Le){if(Le)ge();else{if(Bt(!1),nt&&wt.current&&L){try{wt.current.focus({preventScroll:!0})}catch{}wt.current=null}Ct&&(W==null||W())}Y==null||Y(Le)}function me(Le){J==null||J(Le)}var je=H.useRef(!1),Fe=H.useRef(),pe=function(){clearTimeout(Fe.current),je.current=!0},Mn=function(){Fe.current=setTimeout(function(){je.current=!1})},Ve=null;rt&&(Ve=function(Qe){je.current?je.current=!1:ft.current===Qe.target&&me(Qe)});function Bn(Le){if(M&&Le.keyCode===fe.ESC){Le.stopPropagation(),me(Le);return}S&&Le.keyCode===fe.TAB&&ht.current.changeActive(!Le.shiftKey)}H.useEffect(function(){S&&(Bt(!0),Ut())},[S]),H.useEffect(function(){return function(){clearTimeout(Fe.current)}},[]);var Ze=Mt(Mt(Mt({zIndex:g},j),Zt==null?void 0:Zt.wrapper),{},{display:Ct?null:"none"});return H.createElement("div",En({className:Ce("".concat(d,"-root"),ct)},Vp(o,{data:!0})),H.createElement(RL,{prefixCls:d,visible:nt&&S,motionName:Iv(d,R,ot),style:Mt(Mt({zIndex:g},dt),Zt==null?void 0:Zt.mask),maskProps:Pt,className:Et==null?void 0:Et.mask}),H.createElement("div",En({tabIndex:-1,onKeyDown:Bn,className:Ce("".concat(d,"-wrap"),V,Et==null?void 0:Et.wrapper),ref:ft,onClick:Ve,style:Ze},q),H.createElement(uS,En({},o,{onMouseDown:pe,onMouseUp:Mn,ref:ht,closable:tt,ariaId:Ht,prefixCls:d,visible:S&&Ct,onClose:me,onVisibleChanged:ae,motionName:Iv(d,T,B)}))))},cS=function(o){var h=o.visible,d=o.getContainer,g=o.forceRender,x=o.destroyOnClose,S=x===void 0?!1:x,P=o.afterClose,M=o.panelRef,O=H.useState(h),L=ce(O,2),j=L[0],V=L[1],q=H.useMemo(function(){return{panel:M}},[M]);return H.useEffect(function(){h&&V(!0)},[h]),!g&&S&&!j?null:H.createElement(lS.Provider,{value:q},H.createElement(TL,{open:h||g||j,autoDestroy:!1,getContainer:d,autoLock:h||j},H.createElement(IL,En({},o,{destroyOnClose:S,afterClose:function(){P==null||P(),V(!1)}}))))};cS.displayName="Dialog";var mo="RC_FORM_INTERNAL_HOOKS",qe=function(){Zi(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},La=H.createContext({getFieldValue:qe,getFieldsValue:qe,getFieldError:qe,getFieldWarning:qe,getFieldsError:qe,isFieldsTouched:qe,isFieldTouched:qe,isFieldValidating:qe,isFieldsValidating:qe,resetFields:qe,setFields:qe,setFieldValue:qe,setFieldsValue:qe,validateFields:qe,submit:qe,getInternalHooks:function(){return qe(),{dispatch:qe,initEntityValue:qe,registerField:qe,useSubscribe:qe,setInitialValues:qe,destroyForm:qe,setCallbacks:qe,registerWatch:qe,getFields:qe,setValidateMessages:qe,setPreserve:qe,getInitialValue:qe}}}),nc=H.createContext(null);function cm(s){return s==null?[]:Array.isArray(s)?s:[s]}function BL(s){return s&&!!s._init}function dm(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var o=JSON.parse(JSON.stringify(this));return o.clone=this.clone,o}}}var fm=dm();function jL(s){try{return Function.toString.call(s).indexOf("[native code]")!==-1}catch{return typeof s=="function"}}function zL(s,o,h){if(Mp())return Reflect.construct.apply(null,arguments);var d=[null];d.push.apply(d,o);var g=new(s.bind.apply(s,d));return h&&Ul(g,h.prototype),g}function gm(s){var o=typeof Map=="function"?new Map:void 0;return gm=function(d){if(d===null||!jL(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(d))return o.get(d);o.set(d,g)}function g(){return zL(d,arguments,Kl(this).constructor)}return g.prototype=Object.create(d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),Ul(g,d)},gm(s)}var VL=/%[sdj%]/g,$L=function(){};function mm(s){if(!s||!s.length)return null;var o={};return s.forEach(function(h){var d=h.field;o[d]=o[d]||[],o[d].push(h)}),o}function qi(s){for(var o=arguments.length,h=new Array(o>1?o-1:0),d=1;d<o;d++)h[d-1]=arguments[d];var g=0,x=h.length;if(typeof s=="function")return s.apply(null,h);if(typeof s=="string"){var S=s.replace(VL,function(P){if(P==="%%")return"%";if(g>=x)return P;switch(P){case"%s":return String(h[g++]);case"%d":return Number(h[g++]);case"%j":try{return JSON.stringify(h[g++])}catch{return"[Circular]"}break;default:return P}});return S}return s}function HL(s){return s==="string"||s==="url"||s==="hex"||s==="email"||s==="date"||s==="pattern"}function Kn(s,o){return!!(s==null||o==="array"&&Array.isArray(s)&&!s.length||HL(o)&&typeof s=="string"&&!s)}function UL(s,o,h){var d=[],g=0,x=s.length;function S(P){d.push.apply(d,he(P||[])),g++,g===x&&h(d)}s.forEach(function(P){o(P,S)})}function jv(s,o,h){var d=0,g=s.length;function x(S){if(S&&S.length){h(S);return}var P=d;d=d+1,P<g?o(s[P],x):h([])}x([])}function KL(s){var o=[];return Object.keys(s).forEach(function(h){o.push.apply(o,he(s[h]||[]))}),o}var zv=function(s){Ao(h,s);var o=Lo(h);function h(d,g){var x;return oi(this,h),x=o.call(this,"Async Validation Error"),pt(ke(x),"errors",void 0),pt(ke(x),"fields",void 0),x.errors=d,x.fields=g,x}return ai(h)}(gm(Error));function GL(s,o,h,d,g){if(o.first){var x=new Promise(function(V,q){var J=function(T){return d(T),T.length?q(new zv(T,mm(T))):V(g)},Y=KL(s);jv(Y,h,J)});return x.catch(function(V){return V}),x}var S=o.firstFields===!0?Object.keys(s):o.firstFields||[],P=Object.keys(s),M=P.length,O=0,L=[],j=new Promise(function(V,q){var J=function(W){if(L.push.apply(L,W),O++,O===M)return d(L),L.length?q(new zv(L,mm(L))):V(g)};P.length||(d(L),V(g)),P.forEach(function(Y){var W=s[Y];S.indexOf(Y)!==-1?jv(W,h,J):UL(W,h,J)})});return j.catch(function(V){return V}),j}function XL(s){return!!(s&&s.message!==void 0)}function YL(s,o){for(var h=s,d=0;d<o.length;d++){if(h==null)return h;h=h[o[d]]}return h}function Vv(s,o){return function(h){var d;return s.fullFields?d=YL(o,s.fullFields):d=o[h.field||s.fullField],XL(h)?(h.field=h.field||s.fullField,h.fieldValue=d,h):{message:typeof h=="function"?h():h,fieldValue:d,field:h.field||s.fullField}}}function $v(s,o){if(o){for(var h in o)if(o.hasOwnProperty(h)){var d=o[h];ye(d)==="object"&&ye(s[h])==="object"?s[h]=Mt(Mt({},s[h]),d):s[h]=d}}return s}var Go="enum",WL=function(o,h,d,g,x){o[Go]=Array.isArray(o[Go])?o[Go]:[],o[Go].indexOf(h)===-1&&g.push(qi(x.messages[Go],o.fullField,o[Go].join(", ")))},qL=function(o,h,d,g,x){if(o.pattern){if(o.pattern instanceof RegExp)o.pattern.lastIndex=0,o.pattern.test(h)||g.push(qi(x.messages.pattern.mismatch,o.fullField,h,o.pattern));else if(typeof o.pattern=="string"){var S=new RegExp(o.pattern);S.test(h)||g.push(qi(x.messages.pattern.mismatch,o.fullField,h,o.pattern))}}},JL=function(o,h,d,g,x){var S=typeof o.len=="number",P=typeof o.min=="number",M=typeof o.max=="number",O=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,L=h,j=null,V=typeof h=="number",q=typeof h=="string",J=Array.isArray(h);if(V?j="number":q?j="string":J&&(j="array"),!j)return!1;J&&(L=h.length),q&&(L=h.replace(O,"_").length),S?L!==o.len&&g.push(qi(x.messages[j].len,o.fullField,o.len)):P&&!M&&L<o.min?g.push(qi(x.messages[j].min,o.fullField,o.min)):M&&!P&&L>o.max?g.push(qi(x.messages[j].max,o.fullField,o.max)):P&&M&&(L<o.min||L>o.max)&&g.push(qi(x.messages[j].range,o.fullField,o.min,o.max))},dS=function(o,h,d,g,x,S){o.required&&(!d.hasOwnProperty(o.field)||Kn(h,S||o.type))&&g.push(qi(x.messages.required,o.fullField))},Qh;const ZL=function(){if(Qh)return Qh;var s="[a-fA-F\\d:]",o=function(nt){return nt&&nt.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(s,")|(?<=").concat(s,")(?=\\s|$))"):""},h="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",d="[a-fA-F\\d]{1,4}",g=["(?:".concat(d,":){7}(?:").concat(d,"|:)"),"(?:".concat(d,":){6}(?:").concat(h,"|:").concat(d,"|:)"),"(?:".concat(d,":){5}(?::").concat(h,"|(?::").concat(d,"){1,2}|:)"),"(?:".concat(d,":){4}(?:(?::").concat(d,"){0,1}:").concat(h,"|(?::").concat(d,"){1,3}|:)"),"(?:".concat(d,":){3}(?:(?::").concat(d,"){0,2}:").concat(h,"|(?::").concat(d,"){1,4}|:)"),"(?:".concat(d,":){2}(?:(?::").concat(d,"){0,3}:").concat(h,"|(?::").concat(d,"){1,5}|:)"),"(?:".concat(d,":){1}(?:(?::").concat(d,"){0,4}:").concat(h,"|(?::").concat(d,"){1,6}|:)"),"(?::(?:(?::".concat(d,"){0,5}:").concat(h,"|(?::").concat(d,"){1,7}|:))")],x="(?:%[0-9a-zA-Z]{1,})?",S="(?:".concat(g.join("|"),")").concat(x),P=new RegExp("(?:^".concat(h,"$)|(?:^").concat(S,"$)")),M=new RegExp("^".concat(h,"$")),O=new RegExp("^".concat(S,"$")),L=function(nt){return nt&&nt.exact?P:new RegExp("(?:".concat(o(nt)).concat(h).concat(o(nt),")|(?:").concat(o(nt)).concat(S).concat(o(nt),")"),"g")};L.v4=function(z){return z&&z.exact?M:new RegExp("".concat(o(z)).concat(h).concat(o(z)),"g")},L.v6=function(z){return z&&z.exact?O:new RegExp("".concat(o(z)).concat(S).concat(o(z)),"g")};var j="(?:(?:[a-z]+:)?//)",V="(?:\\S+(?::\\S*)?@)?",q=L.v4().source,J=L.v6().source,Y="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",W="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",T="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",B="(?::\\d{2,5})?",I='(?:[/?#][^\\s"]*)?',tt="(?:".concat(j,"|www\\.)").concat(V,"(?:localhost|").concat(q,"|").concat(J,"|").concat(Y).concat(W).concat(T,")").concat(B).concat(I);return Qh=new RegExp("(?:^".concat(tt,"$)"),"i"),Qh};var Hv={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},hl={integer:function(o){return hl.number(o)&&parseInt(o,10)===o},float:function(o){return hl.number(o)&&!hl.integer(o)},array:function(o){return Array.isArray(o)},regexp:function(o){if(o instanceof RegExp)return!0;try{return!!new RegExp(o)}catch{return!1}},date:function(o){return typeof o.getTime=="function"&&typeof o.getMonth=="function"&&typeof o.getYear=="function"&&!isNaN(o.getTime())},number:function(o){return isNaN(o)?!1:typeof o=="number"},object:function(o){return ye(o)==="object"&&!hl.array(o)},method:function(o){return typeof o=="function"},email:function(o){return typeof o=="string"&&o.length<=320&&!!o.match(Hv.email)},url:function(o){return typeof o=="string"&&o.length<=2048&&!!o.match(ZL())},hex:function(o){return typeof o=="string"&&!!o.match(Hv.hex)}},QL=function(o,h,d,g,x){if(o.required&&h===void 0){dS(o,h,d,g,x);return}var S=["integer","float","array","regexp","object","method","email","number","date","url","hex"],P=o.type;S.indexOf(P)>-1?hl[P](h)||g.push(qi(x.messages.types[P],o.fullField,o.type)):P&&ye(h)!==o.type&&g.push(qi(x.messages.types[P],o.fullField,o.type))},_L=function(o,h,d,g,x){(/^\s+$/.test(h)||h==="")&&g.push(qi(x.messages.whitespace,o.fullField))};const Te={required:dS,whitespace:_L,type:QL,range:JL,enum:WL,pattern:qL};var tE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x)}d(S)},eE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(h==null&&!o.required)return d();Te.required(o,h,g,S,x,"array"),h!=null&&(Te.type(o,h,g,S,x),Te.range(o,h,g,S,x))}d(S)},nE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x),h!==void 0&&Te.type(o,h,g,S,x)}d(S)},iE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h,"date")&&!o.required)return d();if(Te.required(o,h,g,S,x),!Kn(h,"date")){var M;h instanceof Date?M=h:M=new Date(h),Te.type(o,M,g,S,x),M&&Te.range(o,M.getTime(),g,S,x)}}d(S)},sE="enum",rE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x),h!==void 0&&Te[sE](o,h,g,S,x)}d(S)},oE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x),h!==void 0&&(Te.type(o,h,g,S,x),Te.range(o,h,g,S,x))}d(S)},aE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x),h!==void 0&&(Te.type(o,h,g,S,x),Te.range(o,h,g,S,x))}d(S)},lE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x),h!==void 0&&Te.type(o,h,g,S,x)}d(S)},hE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(h===""&&(h=void 0),Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x),h!==void 0&&(Te.type(o,h,g,S,x),Te.range(o,h,g,S,x))}d(S)},uE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x),h!==void 0&&Te.type(o,h,g,S,x)}d(S)},cE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h,"string")&&!o.required)return d();Te.required(o,h,g,S,x),Kn(h,"string")||Te.pattern(o,h,g,S,x)}d(S)},dE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h)&&!o.required)return d();Te.required(o,h,g,S,x),Kn(h)||Te.type(o,h,g,S,x)}d(S)},fE=function(o,h,d,g,x){var S=[],P=Array.isArray(h)?"array":ye(h);Te.required(o,h,g,S,x,P),d(S)},gE=function(o,h,d,g,x){var S=[],P=o.required||!o.required&&g.hasOwnProperty(o.field);if(P){if(Kn(h,"string")&&!o.required)return d();Te.required(o,h,g,S,x,"string"),Kn(h,"string")||(Te.type(o,h,g,S,x),Te.range(o,h,g,S,x),Te.pattern(o,h,g,S,x),o.whitespace===!0&&Te.whitespace(o,h,g,S,x))}d(S)},wf=function(o,h,d,g,x){var S=o.type,P=[],M=o.required||!o.required&&g.hasOwnProperty(o.field);if(M){if(Kn(h,S)&&!o.required)return d();Te.required(o,h,g,P,x,S),Kn(h,S)||Te.type(o,h,g,P,x)}d(P)};const Sl={string:gE,method:lE,number:hE,boolean:nE,regexp:dE,integer:aE,float:oE,array:eE,object:uE,enum:rE,pattern:cE,date:iE,url:wf,hex:wf,email:wf,required:fE,any:tE};var dh=function(){function s(o){oi(this,s),pt(this,"rules",null),pt(this,"_messages",fm),this.define(o)}return ai(s,[{key:"define",value:function(h){var d=this;if(!h)throw new Error("Cannot configure a schema with no rules");if(ye(h)!=="object"||Array.isArray(h))throw new Error("Rules must be an object");this.rules={},Object.keys(h).forEach(function(g){var x=h[g];d.rules[g]=Array.isArray(x)?x:[x]})}},{key:"messages",value:function(h){return h&&(this._messages=$v(dm(),h)),this._messages}},{key:"validate",value:function(h){var d=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},S=h,P=g,M=x;if(typeof P=="function"&&(M=P,P={}),!this.rules||Object.keys(this.rules).length===0)return M&&M(null,S),Promise.resolve(S);function O(J){var Y=[],W={};function T(I){if(Array.isArray(I)){var tt;Y=(tt=Y).concat.apply(tt,he(I))}else Y.push(I)}for(var B=0;B<J.length;B++)T(J[B]);Y.length?(W=mm(Y),M(Y,W)):M(null,S)}if(P.messages){var L=this.messages();L===fm&&(L=dm()),$v(L,P.messages),P.messages=L}else P.messages=this.messages();var j={},V=P.keys||Object.keys(this.rules);V.forEach(function(J){var Y=d.rules[J],W=S[J];Y.forEach(function(T){var B=T;typeof B.transform=="function"&&(S===h&&(S=Mt({},S)),W=S[J]=B.transform(W),W!=null&&(B.type=B.type||(Array.isArray(W)?"array":ye(W)))),typeof B=="function"?B={validator:B}:B=Mt({},B),B.validator=d.getValidationMethod(B),B.validator&&(B.field=J,B.fullField=B.fullField||J,B.type=d.getType(B),j[J]=j[J]||[],j[J].push({rule:B,value:W,source:S,field:J}))})});var q={};return GL(j,P,function(J,Y){var W=J.rule,T=(W.type==="object"||W.type==="array")&&(ye(W.fields)==="object"||ye(W.defaultField)==="object");T=T&&(W.required||!W.required&&J.value),W.field=J.field;function B(R,ot){return Mt(Mt({},ot),{},{fullField:"".concat(W.fullField,".").concat(R),fullFields:W.fullFields?[].concat(he(W.fullFields),[R]):[R]})}function I(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ot=Array.isArray(R)?R:[R];!P.suppressWarning&&ot.length&&s.warning("async-validator:",ot),ot.length&&W.message!==void 0&&(ot=[].concat(W.message));var lt=ot.map(Vv(W,S));if(P.first&&lt.length)return q[W.field]=1,Y(lt);if(!T)Y(lt);else{if(W.required&&!J.value)return W.message!==void 0?lt=[].concat(W.message).map(Vv(W,S)):P.error&&(lt=[P.error(W,qi(P.messages.required,W.field))]),Y(lt);var rt={};W.defaultField&&Object.keys(J.value).map(function(ct){rt[ct]=W.defaultField}),rt=Mt(Mt({},rt),J.rule.fields);var dt={};Object.keys(rt).forEach(function(ct){var Et=rt[ct],Zt=Array.isArray(Et)?Et:[Et];dt[ct]=Zt.map(B.bind(null,ct))});var Pt=new s(dt);Pt.messages(P.messages),J.rule.options&&(J.rule.options.messages=P.messages,J.rule.options.error=P.error),Pt.validate(J.value,J.rule.options||P,function(ct){var Et=[];lt&&lt.length&&Et.push.apply(Et,he(lt)),ct&&ct.length&&Et.push.apply(Et,he(ct)),Y(Et.length?Et:null)})}}var tt;if(W.asyncValidator)tt=W.asyncValidator(W,J.value,I,J.source,P);else if(W.validator){try{tt=W.validator(W,J.value,I,J.source,P)}catch(R){var z,nt;(z=(nt=console).error)===null||z===void 0||z.call(nt,R),P.suppressValidatorError||setTimeout(function(){throw R},0),I(R.message)}tt===!0?I():tt===!1?I(typeof W.message=="function"?W.message(W.fullField||W.field):W.message||"".concat(W.fullField||W.field," fails")):tt instanceof Array?I(tt):tt instanceof Error&&I(tt.message)}tt&&tt.then&&tt.then(function(){return I()},function(R){return I(R)})},function(J){O(J)},S)}},{key:"getType",value:function(h){if(h.type===void 0&&h.pattern instanceof RegExp&&(h.type="pattern"),typeof h.validator!="function"&&h.type&&!Sl.hasOwnProperty(h.type))throw new Error(qi("Unknown rule type %s",h.type));return h.type||"string"}},{key:"getValidationMethod",value:function(h){if(typeof h.validator=="function")return h.validator;var d=Object.keys(h),g=d.indexOf("message");return g!==-1&&d.splice(g,1),d.length===1&&d[0]==="required"?Sl.required:Sl[this.getType(h)]||void 0}}]),s}();pt(dh,"register",function(o,h){if(typeof h!="function")throw new Error("Cannot register a validator by type, validator is not a function");Sl[o]=h});pt(dh,"warning",$L);pt(dh,"messages",fm);pt(dh,"validators",Sl);var Gi="'${name}' is not a valid ${type}",fS={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Gi,method:Gi,array:Gi,object:Gi,number:Gi,date:Gi,boolean:Gi,integer:Gi,float:Gi,regexp:Gi,email:Gi,url:Gi,hex:Gi},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Uv=dh;function mE(s,o){return s.replace(/\\?\$\{\w+\}/g,function(h){if(h.startsWith("\\"))return h.slice(1);var d=h.slice(2,-1);return o[d]})}var Kv="CODE_LOGIC_ERROR";function pm(s,o,h,d,g){return ym.apply(this,arguments)}function ym(){return ym=Eo(wi().mark(function s(o,h,d,g,x){var S,P,M,O,L,j,V,q,J;return wi().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return S=Mt({},d),delete S.ruleIndex,Uv.warning=function(){},S.validator&&(P=S.validator,S.validator=function(){try{return P.apply(void 0,arguments)}catch(T){return console.error(T),Promise.reject(Kv)}}),M=null,S&&S.type==="array"&&S.defaultField&&(M=S.defaultField,delete S.defaultField),O=new Uv(pt({},o,[S])),L=oa(fS,g.validateMessages),O.messages(L),j=[],W.prev=10,W.next=13,Promise.resolve(O.validate(pt({},o,h),Mt({},g)));case 13:W.next=18;break;case 15:W.prev=15,W.t0=W.catch(10),W.t0.errors&&(j=W.t0.errors.map(function(T,B){var I=T.message,tt=I===Kv?L.default:I;return H.isValidElement(tt)?H.cloneElement(tt,{key:"error_".concat(B)}):tt}));case 18:if(!(!j.length&&M)){W.next=23;break}return W.next=21,Promise.all(h.map(function(T,B){return pm("".concat(o,".").concat(B),T,M,g,x)}));case 21:return V=W.sent,W.abrupt("return",V.reduce(function(T,B){return[].concat(he(T),he(B))},[]));case 23:return q=Mt(Mt({},d),{},{name:o,enum:(d.enum||[]).join(", ")},x),J=j.map(function(T){return typeof T=="string"?mE(T,q):T}),W.abrupt("return",J);case 26:case"end":return W.stop()}},s,null,[[10,15]])})),ym.apply(this,arguments)}function pE(s,o,h,d,g,x){var S=s.join("."),P=h.map(function(L,j){var V=L.validator,q=Mt(Mt({},L),{},{ruleIndex:j});return V&&(q.validator=function(J,Y,W){var T=!1,B=function(){for(var z=arguments.length,nt=new Array(z),R=0;R<z;R++)nt[R]=arguments[R];Promise.resolve().then(function(){Zi(!T,"Your validator function has already return a promise. `callback` will be ignored."),T||W.apply(void 0,nt)})},I=V(J,Y,B);T=I&&typeof I.then=="function"&&typeof I.catch=="function",Zi(T,"`callback` is deprecated. Please return a promise instead."),T&&I.then(function(){W()}).catch(function(tt){W(tt||" ")})}),q}).sort(function(L,j){var V=L.warningOnly,q=L.ruleIndex,J=j.warningOnly,Y=j.ruleIndex;return!!V==!!J?q-Y:V?1:-1}),M;if(g===!0)M=new Promise(function(){var L=Eo(wi().mark(function j(V,q){var J,Y,W;return wi().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:J=0;case 1:if(!(J<P.length)){B.next=12;break}return Y=P[J],B.next=5,pm(S,o,Y,d,x);case 5:if(W=B.sent,!W.length){B.next=9;break}return q([{errors:W,rule:Y}]),B.abrupt("return");case 9:J+=1,B.next=1;break;case 12:V([]);case 13:case"end":return B.stop()}},j)}));return function(j,V){return L.apply(this,arguments)}}());else{var O=P.map(function(L){return pm(S,o,L,d,x).then(function(j){return{errors:j,rule:L}})});M=(g?vE(O):yE(O)).then(function(L){return Promise.reject(L)})}return M.catch(function(L){return L}),M}function yE(s){return vm.apply(this,arguments)}function vm(){return vm=Eo(wi().mark(function s(o){return wi().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Promise.all(o).then(function(g){var x,S=(x=[]).concat.apply(x,he(g));return S}));case 1:case"end":return d.stop()}},s)})),vm.apply(this,arguments)}function vE(s){return xm.apply(this,arguments)}function xm(){return xm=Eo(wi().mark(function s(o){var h;return wi().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return h=0,g.abrupt("return",new Promise(function(x){o.forEach(function(S){S.then(function(P){P.errors.length&&x([P]),h+=1,h===o.length&&x([])})})}));case 2:case"end":return g.stop()}},s)})),xm.apply(this,arguments)}function An(s){return cm(s)}function Gv(s,o){var h={};return o.forEach(function(d){var g=Qs(s,d);h=Os(h,d,g)}),h}function ma(s,o){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return s&&s.some(function(d){return gS(o,d,h)})}function gS(s,o){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!s||!o||!h&&s.length!==o.length?!1:o.every(function(d,g){return s[g]===d})}function xE(s,o){if(s===o)return!0;if(!s&&o||s&&!o||!s||!o||ye(s)!=="object"||ye(o)!=="object")return!1;var h=Object.keys(s),d=Object.keys(o),g=new Set([].concat(h,d));return he(g).every(function(x){var S=s[x],P=o[x];return typeof S=="function"&&typeof P=="function"?!0:S===P})}function bE(s){var o=arguments.length<=1?void 0:arguments[1];return o&&o.target&&ye(o.target)==="object"&&s in o.target?o.target[s]:o}function Xv(s,o,h){var d=s.length;if(o<0||o>=d||h<0||h>=d)return s;var g=s[o],x=o-h;return x>0?[].concat(he(s.slice(0,h)),[g],he(s.slice(h,o)),he(s.slice(o+1,d))):x<0?[].concat(he(s.slice(0,o)),he(s.slice(o+1,h+1)),[g],he(s.slice(h+1,d))):s}var wE=["name"],hs=[];function Sf(s,o,h,d,g,x){return typeof s=="function"?s(o,h,"source"in x?{source:x.source}:{}):d!==g}var Yp=function(s){Ao(h,s);var o=Lo(h);function h(d){var g;if(oi(this,h),g=o.call(this,d),pt(ke(g),"state",{resetCount:0}),pt(ke(g),"cancelRegisterFunc",null),pt(ke(g),"mounted",!1),pt(ke(g),"touched",!1),pt(ke(g),"dirty",!1),pt(ke(g),"validatePromise",void 0),pt(ke(g),"prevValidating",void 0),pt(ke(g),"errors",hs),pt(ke(g),"warnings",hs),pt(ke(g),"cancelRegister",function(){var M=g.props,O=M.preserve,L=M.isListField,j=M.name;g.cancelRegisterFunc&&g.cancelRegisterFunc(L,O,An(j)),g.cancelRegisterFunc=null}),pt(ke(g),"getNamePath",function(){var M=g.props,O=M.name,L=M.fieldContext,j=L.prefixName,V=j===void 0?[]:j;return O!==void 0?[].concat(he(V),he(O)):[]}),pt(ke(g),"getRules",function(){var M=g.props,O=M.rules,L=O===void 0?[]:O,j=M.fieldContext;return L.map(function(V){return typeof V=="function"?V(j):V})}),pt(ke(g),"refresh",function(){g.mounted&&g.setState(function(M){var O=M.resetCount;return{resetCount:O+1}})}),pt(ke(g),"metaCache",null),pt(ke(g),"triggerMetaEvent",function(M){var O=g.props.onMetaChange;if(O){var L=Mt(Mt({},g.getMeta()),{},{destroy:M});Og(g.metaCache,L)||O(L),g.metaCache=L}else g.metaCache=null}),pt(ke(g),"onStoreChange",function(M,O,L){var j=g.props,V=j.shouldUpdate,q=j.dependencies,J=q===void 0?[]:q,Y=j.onReset,W=L.store,T=g.getNamePath(),B=g.getValue(M),I=g.getValue(W),tt=O&&ma(O,T);switch(L.type==="valueUpdate"&&L.source==="external"&&!Og(B,I)&&(g.touched=!0,g.dirty=!0,g.validatePromise=null,g.errors=hs,g.warnings=hs,g.triggerMetaEvent()),L.type){case"reset":if(!O||tt){g.touched=!1,g.dirty=!1,g.validatePromise=void 0,g.errors=hs,g.warnings=hs,g.triggerMetaEvent(),Y==null||Y(),g.refresh();return}break;case"remove":{if(V&&Sf(V,M,W,B,I,L)){g.reRender();return}break}case"setField":{var z=L.data;if(tt){"touched"in z&&(g.touched=z.touched),"validating"in z&&!("originRCField"in z)&&(g.validatePromise=z.validating?Promise.resolve([]):null),"errors"in z&&(g.errors=z.errors||hs),"warnings"in z&&(g.warnings=z.warnings||hs),g.dirty=!0,g.triggerMetaEvent(),g.reRender();return}else if("value"in z&&ma(O,T,!0)){g.reRender();return}if(V&&!T.length&&Sf(V,M,W,B,I,L)){g.reRender();return}break}case"dependenciesUpdate":{var nt=J.map(An);if(nt.some(function(R){return ma(L.relatedFields,R)})){g.reRender();return}break}default:if(tt||(!J.length||T.length||V)&&Sf(V,M,W,B,I,L)){g.reRender();return}break}V===!0&&g.reRender()}),pt(ke(g),"validateRules",function(M){var O=g.getNamePath(),L=g.getValue(),j=M||{},V=j.triggerName,q=j.validateOnly,J=q===void 0?!1:q,Y=Promise.resolve().then(Eo(wi().mark(function W(){var T,B,I,tt,z,nt,R;return wi().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(g.mounted){lt.next=2;break}return lt.abrupt("return",[]);case 2:if(T=g.props,B=T.validateFirst,I=B===void 0?!1:B,tt=T.messageVariables,z=T.validateDebounce,nt=g.getRules(),V&&(nt=nt.filter(function(rt){return rt}).filter(function(rt){var dt=rt.validateTrigger;if(!dt)return!0;var Pt=cm(dt);return Pt.includes(V)})),!(z&&V)){lt.next=10;break}return lt.next=8,new Promise(function(rt){setTimeout(rt,z)});case 8:if(g.validatePromise===Y){lt.next=10;break}return lt.abrupt("return",[]);case 10:return R=pE(O,L,nt,M,I,tt),R.catch(function(rt){return rt}).then(function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hs;if(g.validatePromise===Y){var dt;g.validatePromise=null;var Pt=[],ct=[];(dt=rt.forEach)===null||dt===void 0||dt.call(rt,function(Et){var Zt=Et.rule.warningOnly,wt=Et.errors,ft=wt===void 0?hs:wt;Zt?ct.push.apply(ct,he(ft)):Pt.push.apply(Pt,he(ft))}),g.errors=Pt,g.warnings=ct,g.triggerMetaEvent(),g.reRender()}}),lt.abrupt("return",R);case 13:case"end":return lt.stop()}},W)})));return J||(g.validatePromise=Y,g.dirty=!0,g.errors=hs,g.warnings=hs,g.triggerMetaEvent(),g.reRender()),Y}),pt(ke(g),"isFieldValidating",function(){return!!g.validatePromise}),pt(ke(g),"isFieldTouched",function(){return g.touched}),pt(ke(g),"isFieldDirty",function(){if(g.dirty||g.props.initialValue!==void 0)return!0;var M=g.props.fieldContext,O=M.getInternalHooks(mo),L=O.getInitialValue;return L(g.getNamePath())!==void 0}),pt(ke(g),"getErrors",function(){return g.errors}),pt(ke(g),"getWarnings",function(){return g.warnings}),pt(ke(g),"isListField",function(){return g.props.isListField}),pt(ke(g),"isList",function(){return g.props.isList}),pt(ke(g),"isPreserve",function(){return g.props.preserve}),pt(ke(g),"getMeta",function(){g.prevValidating=g.isFieldValidating();var M={touched:g.isFieldTouched(),validating:g.prevValidating,errors:g.errors,warnings:g.warnings,name:g.getNamePath(),validated:g.validatePromise===null};return M}),pt(ke(g),"getOnlyChild",function(M){if(typeof M=="function"){var O=g.getMeta();return Mt(Mt({},g.getOnlyChild(M(g.getControlled(),O,g.props.fieldContext))),{},{isFunction:!0})}var L=Tg(M);return L.length!==1||!H.isValidElement(L[0])?{child:L,isFunction:!1}:{child:L[0],isFunction:!1}}),pt(ke(g),"getValue",function(M){var O=g.props.fieldContext.getFieldsValue,L=g.getNamePath();return Qs(M||O(!0),L)}),pt(ke(g),"getControlled",function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=g.props,L=O.name,j=O.trigger,V=O.validateTrigger,q=O.getValueFromEvent,J=O.normalize,Y=O.valuePropName,W=O.getValueProps,T=O.fieldContext,B=V!==void 0?V:T.validateTrigger,I=g.getNamePath(),tt=T.getInternalHooks,z=T.getFieldsValue,nt=tt(mo),R=nt.dispatch,ot=g.getValue(),lt=W||function(Et){return pt({},Y,Et)},rt=M[j],dt=L!==void 0?lt(ot):{},Pt=Mt(Mt({},M),dt);Pt[j]=function(){g.touched=!0,g.dirty=!0,g.triggerMetaEvent();for(var Et,Zt=arguments.length,wt=new Array(Zt),ft=0;ft<Zt;ft++)wt[ft]=arguments[ft];q?Et=q.apply(void 0,wt):Et=bE.apply(void 0,[Y].concat(wt)),J&&(Et=J(Et,ot,z(!0))),R({type:"updateValue",namePath:I,value:Et}),rt&&rt.apply(void 0,wt)};var ct=cm(B||[]);return ct.forEach(function(Et){var Zt=Pt[Et];Pt[Et]=function(){Zt&&Zt.apply(void 0,arguments);var wt=g.props.rules;wt&&wt.length&&R({type:"validateField",namePath:I,triggerName:Et})}}),Pt}),d.fieldContext){var x=d.fieldContext.getInternalHooks,S=x(mo),P=S.initEntityValue;P(ke(g))}return g}return ai(h,[{key:"componentDidMount",value:function(){var g=this.props,x=g.shouldUpdate,S=g.fieldContext;if(this.mounted=!0,S){var P=S.getInternalHooks,M=P(mo),O=M.registerField;this.cancelRegisterFunc=O(this)}x===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var g=this.state.resetCount,x=this.props.children,S=this.getOnlyChild(x),P=S.child,M=S.isFunction,O;return M?O=P:H.isValidElement(P)?O=H.cloneElement(P,this.getControlled(P.props)):(Zi(!P,"`children` of Field is not validate ReactElement."),O=P),H.createElement(H.Fragment,{key:g},O)}}]),h}(H.Component);pt(Yp,"contextType",La);pt(Yp,"defaultProps",{trigger:"onChange",valuePropName:"value"});function mS(s){var o=s.name,h=er(s,wE),d=H.useContext(La),g=H.useContext(nc),x=o!==void 0?An(o):void 0,S="keep";return h.isListField||(S="_".concat((x||[]).join("_"))),H.createElement(Yp,En({key:S,name:x,isListField:!!g},h,{fieldContext:d}))}function SE(s){var o=s.name,h=s.initialValue,d=s.children,g=s.rules,x=s.validateTrigger,S=s.isListField,P=H.useContext(La),M=H.useContext(nc),O=H.useRef({keys:[],id:0}),L=O.current,j=H.useMemo(function(){var Y=An(P.prefixName)||[];return[].concat(he(Y),he(An(o)))},[P.prefixName,o]),V=H.useMemo(function(){return Mt(Mt({},P),{},{prefixName:j})},[P,j]),q=H.useMemo(function(){return{getKey:function(W){var T=j.length,B=W[T];return[L.keys[B],W.slice(T+1)]}}},[j]);if(typeof d!="function")return Zi(!1,"Form.List only accepts function as children."),null;var J=function(W,T,B){var I=B.source;return I==="internal"?!1:W!==T};return H.createElement(nc.Provider,{value:q},H.createElement(La.Provider,{value:V},H.createElement(mS,{name:[],shouldUpdate:J,rules:g,validateTrigger:x,initialValue:h,isList:!0,isListField:S??!!M},function(Y,W){var T=Y.value,B=T===void 0?[]:T,I=Y.onChange,tt=P.getFieldValue,z=function(){var lt=tt(j||[]);return lt||[]},nt={add:function(lt,rt){var dt=z();rt>=0&&rt<=dt.length?(L.keys=[].concat(he(L.keys.slice(0,rt)),[L.id],he(L.keys.slice(rt))),I([].concat(he(dt.slice(0,rt)),[lt],he(dt.slice(rt))))):(L.keys=[].concat(he(L.keys),[L.id]),I([].concat(he(dt),[lt]))),L.id+=1},remove:function(lt){var rt=z(),dt=new Set(Array.isArray(lt)?lt:[lt]);dt.size<=0||(L.keys=L.keys.filter(function(Pt,ct){return!dt.has(ct)}),I(rt.filter(function(Pt,ct){return!dt.has(ct)})))},move:function(lt,rt){if(lt!==rt){var dt=z();lt<0||lt>=dt.length||rt<0||rt>=dt.length||(L.keys=Xv(L.keys,lt,rt),I(Xv(dt,lt,rt)))}}},R=B||[];return Array.isArray(R)||(R=[]),d(R.map(function(ot,lt){var rt=L.keys[lt];return rt===void 0&&(L.keys[lt]=L.id,rt=L.keys[lt],L.id+=1),{name:lt,key:rt,isListField:!0}}),nt,W)})))}function CE(s){var o=!1,h=s.length,d=[];return s.length?new Promise(function(g,x){s.forEach(function(S,P){S.catch(function(M){return o=!0,M}).then(function(M){h-=1,d[P]=M,!(h>0)&&(o&&x(d),g(d))})})}):Promise.resolve([])}var pS="__@field_split__";function Cf(s){return s.map(function(o){return"".concat(ye(o),":").concat(o)}).join(pS)}var Xo=function(){function s(){oi(this,s),pt(this,"kvs",new Map)}return ai(s,[{key:"set",value:function(h,d){this.kvs.set(Cf(h),d)}},{key:"get",value:function(h){return this.kvs.get(Cf(h))}},{key:"update",value:function(h,d){var g=this.get(h),x=d(g);x?this.set(h,x):this.delete(h)}},{key:"delete",value:function(h){this.kvs.delete(Cf(h))}},{key:"map",value:function(h){return he(this.kvs.entries()).map(function(d){var g=ce(d,2),x=g[0],S=g[1],P=x.split(pS);return h({key:P.map(function(M){var O=M.match(/^([^:]*):(.*)$/),L=ce(O,3),j=L[1],V=L[2];return j==="number"?Number(V):V}),value:S})})}},{key:"toJSON",value:function(){var h={};return this.map(function(d){var g=d.key,x=d.value;return h[g.join(".")]=x,null}),h}}]),s}(),kE=["name"],PE=ai(function s(o){var h=this;oi(this,s),pt(this,"formHooked",!1),pt(this,"forceRootUpdate",void 0),pt(this,"subscribable",!0),pt(this,"store",{}),pt(this,"fieldEntities",[]),pt(this,"initialValues",{}),pt(this,"callbacks",{}),pt(this,"validateMessages",null),pt(this,"preserve",null),pt(this,"lastValidatePromise",null),pt(this,"getForm",function(){return{getFieldValue:h.getFieldValue,getFieldsValue:h.getFieldsValue,getFieldError:h.getFieldError,getFieldWarning:h.getFieldWarning,getFieldsError:h.getFieldsError,isFieldsTouched:h.isFieldsTouched,isFieldTouched:h.isFieldTouched,isFieldValidating:h.isFieldValidating,isFieldsValidating:h.isFieldsValidating,resetFields:h.resetFields,setFields:h.setFields,setFieldValue:h.setFieldValue,setFieldsValue:h.setFieldsValue,validateFields:h.validateFields,submit:h.submit,_init:!0,getInternalHooks:h.getInternalHooks}}),pt(this,"getInternalHooks",function(d){return d===mo?(h.formHooked=!0,{dispatch:h.dispatch,initEntityValue:h.initEntityValue,registerField:h.registerField,useSubscribe:h.useSubscribe,setInitialValues:h.setInitialValues,destroyForm:h.destroyForm,setCallbacks:h.setCallbacks,setValidateMessages:h.setValidateMessages,getFields:h.getFields,setPreserve:h.setPreserve,getInitialValue:h.getInitialValue,registerWatch:h.registerWatch}):(Zi(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),pt(this,"useSubscribe",function(d){h.subscribable=d}),pt(this,"prevWithoutPreserves",null),pt(this,"setInitialValues",function(d,g){if(h.initialValues=d||{},g){var x,S=oa(d,h.store);(x=h.prevWithoutPreserves)===null||x===void 0||x.map(function(P){var M=P.key;S=Os(S,M,Qs(d,M))}),h.prevWithoutPreserves=null,h.updateStore(S)}}),pt(this,"destroyForm",function(d){if(d)h.updateStore({});else{var g=new Xo;h.getFieldEntities(!0).forEach(function(x){h.isMergedPreserve(x.isPreserve())||g.set(x.getNamePath(),!0)}),h.prevWithoutPreserves=g}}),pt(this,"getInitialValue",function(d){var g=Qs(h.initialValues,d);return d.length?oa(g):g}),pt(this,"setCallbacks",function(d){h.callbacks=d}),pt(this,"setValidateMessages",function(d){h.validateMessages=d}),pt(this,"setPreserve",function(d){h.preserve=d}),pt(this,"watchList",[]),pt(this,"registerWatch",function(d){return h.watchList.push(d),function(){h.watchList=h.watchList.filter(function(g){return g!==d})}}),pt(this,"notifyWatch",function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(h.watchList.length){var g=h.getFieldsValue(),x=h.getFieldsValue(!0);h.watchList.forEach(function(S){S(g,x,d)})}}),pt(this,"timeoutId",null),pt(this,"warningUnhooked",function(){}),pt(this,"updateStore",function(d){h.store=d}),pt(this,"getFieldEntities",function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return d?h.fieldEntities.filter(function(g){return g.getNamePath().length}):h.fieldEntities}),pt(this,"getFieldsMap",function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,g=new Xo;return h.getFieldEntities(d).forEach(function(x){var S=x.getNamePath();g.set(S,x)}),g}),pt(this,"getFieldEntitiesForNamePathList",function(d){if(!d)return h.getFieldEntities(!0);var g=h.getFieldsMap(!0);return d.map(function(x){var S=An(x);return g.get(S)||{INVALIDATE_NAME_PATH:An(x)}})}),pt(this,"getFieldsValue",function(d,g){h.warningUnhooked();var x,S,P;if(d===!0||Array.isArray(d)?(x=d,S=g):d&&ye(d)==="object"&&(P=d.strict,S=d.filter),x===!0&&!S)return h.store;var M=h.getFieldEntitiesForNamePathList(Array.isArray(x)?x:null),O=[];return M.forEach(function(L){var j,V,q="INVALIDATE_NAME_PATH"in L?L.INVALIDATE_NAME_PATH:L.getNamePath();if(P){var J,Y;if((J=(Y=L).isList)!==null&&J!==void 0&&J.call(Y))return}else if(!x&&(j=(V=L).isListField)!==null&&j!==void 0&&j.call(V))return;if(!S)O.push(q);else{var W="getMeta"in L?L.getMeta():null;S(W)&&O.push(q)}}),Gv(h.store,O.map(An))}),pt(this,"getFieldValue",function(d){h.warningUnhooked();var g=An(d);return Qs(h.store,g)}),pt(this,"getFieldsError",function(d){h.warningUnhooked();var g=h.getFieldEntitiesForNamePathList(d);return g.map(function(x,S){return x&&!("INVALIDATE_NAME_PATH"in x)?{name:x.getNamePath(),errors:x.getErrors(),warnings:x.getWarnings()}:{name:An(d[S]),errors:[],warnings:[]}})}),pt(this,"getFieldError",function(d){h.warningUnhooked();var g=An(d),x=h.getFieldsError([g])[0];return x.errors}),pt(this,"getFieldWarning",function(d){h.warningUnhooked();var g=An(d),x=h.getFieldsError([g])[0];return x.warnings}),pt(this,"isFieldsTouched",function(){h.warningUnhooked();for(var d=arguments.length,g=new Array(d),x=0;x<d;x++)g[x]=arguments[x];var S=g[0],P=g[1],M,O=!1;g.length===0?M=null:g.length===1?Array.isArray(S)?(M=S.map(An),O=!1):(M=null,O=S):(M=S.map(An),O=P);var L=h.getFieldEntities(!0),j=function(W){return W.isFieldTouched()};if(!M)return O?L.every(function(Y){return j(Y)||Y.isList()}):L.some(j);var V=new Xo;M.forEach(function(Y){V.set(Y,[])}),L.forEach(function(Y){var W=Y.getNamePath();M.forEach(function(T){T.every(function(B,I){return W[I]===B})&&V.update(T,function(B){return[].concat(he(B),[Y])})})});var q=function(W){return W.some(j)},J=V.map(function(Y){var W=Y.value;return W});return O?J.every(q):J.some(q)}),pt(this,"isFieldTouched",function(d){return h.warningUnhooked(),h.isFieldsTouched([d])}),pt(this,"isFieldsValidating",function(d){h.warningUnhooked();var g=h.getFieldEntities();if(!d)return g.some(function(S){return S.isFieldValidating()});var x=d.map(An);return g.some(function(S){var P=S.getNamePath();return ma(x,P)&&S.isFieldValidating()})}),pt(this,"isFieldValidating",function(d){return h.warningUnhooked(),h.isFieldsValidating([d])}),pt(this,"resetWithFieldInitialValue",function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=new Xo,x=h.getFieldEntities(!0);x.forEach(function(M){var O=M.props.initialValue,L=M.getNamePath();if(O!==void 0){var j=g.get(L)||new Set;j.add({entity:M,value:O}),g.set(L,j)}});var S=function(O){O.forEach(function(L){var j=L.props.initialValue;if(j!==void 0){var V=L.getNamePath(),q=h.getInitialValue(V);if(q!==void 0)Zi(!1,"Form already set 'initialValues' with path '".concat(V.join("."),"'. Field can not overwrite it."));else{var J=g.get(V);if(J&&J.size>1)Zi(!1,"Multiple Field with path '".concat(V.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(J){var Y=h.getFieldValue(V),W=L.isListField();!W&&(!d.skipExist||Y===void 0)&&h.updateStore(Os(h.store,V,he(J)[0].value))}}}})},P;d.entities?P=d.entities:d.namePathList?(P=[],d.namePathList.forEach(function(M){var O=g.get(M);if(O){var L;(L=P).push.apply(L,he(he(O).map(function(j){return j.entity})))}})):P=x,S(P)}),pt(this,"resetFields",function(d){h.warningUnhooked();var g=h.store;if(!d){h.updateStore(oa(h.initialValues)),h.resetWithFieldInitialValue(),h.notifyObservers(g,null,{type:"reset"}),h.notifyWatch();return}var x=d.map(An);x.forEach(function(S){var P=h.getInitialValue(S);h.updateStore(Os(h.store,S,P))}),h.resetWithFieldInitialValue({namePathList:x}),h.notifyObservers(g,x,{type:"reset"}),h.notifyWatch(x)}),pt(this,"setFields",function(d){h.warningUnhooked();var g=h.store,x=[];d.forEach(function(S){var P=S.name,M=er(S,kE),O=An(P);x.push(O),"value"in M&&h.updateStore(Os(h.store,O,M.value)),h.notifyObservers(g,[O],{type:"setField",data:S})}),h.notifyWatch(x)}),pt(this,"getFields",function(){var d=h.getFieldEntities(!0),g=d.map(function(x){var S=x.getNamePath(),P=x.getMeta(),M=Mt(Mt({},P),{},{name:S,value:h.getFieldValue(S)});return Object.defineProperty(M,"originRCField",{value:!0}),M});return g}),pt(this,"initEntityValue",function(d){var g=d.props.initialValue;if(g!==void 0){var x=d.getNamePath(),S=Qs(h.store,x);S===void 0&&h.updateStore(Os(h.store,x,g))}}),pt(this,"isMergedPreserve",function(d){var g=d!==void 0?d:h.preserve;return g??!0}),pt(this,"registerField",function(d){h.fieldEntities.push(d);var g=d.getNamePath();if(h.notifyWatch([g]),d.props.initialValue!==void 0){var x=h.store;h.resetWithFieldInitialValue({entities:[d],skipExist:!0}),h.notifyObservers(x,[d.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(S,P){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(h.fieldEntities=h.fieldEntities.filter(function(j){return j!==d}),!h.isMergedPreserve(P)&&(!S||M.length>1)){var O=S?void 0:h.getInitialValue(g);if(g.length&&h.getFieldValue(g)!==O&&h.fieldEntities.every(function(j){return!gS(j.getNamePath(),g)})){var L=h.store;h.updateStore(Os(L,g,O,!0)),h.notifyObservers(L,[g],{type:"remove"}),h.triggerDependenciesUpdate(L,g)}}h.notifyWatch([g])}}),pt(this,"dispatch",function(d){switch(d.type){case"updateValue":{var g=d.namePath,x=d.value;h.updateValue(g,x);break}case"validateField":{var S=d.namePath,P=d.triggerName;h.validateFields([S],{triggerName:P});break}}}),pt(this,"notifyObservers",function(d,g,x){if(h.subscribable){var S=Mt(Mt({},x),{},{store:h.getFieldsValue(!0)});h.getFieldEntities().forEach(function(P){var M=P.onStoreChange;M(d,g,S)})}else h.forceRootUpdate()}),pt(this,"triggerDependenciesUpdate",function(d,g){var x=h.getDependencyChildrenFields(g);return x.length&&h.validateFields(x),h.notifyObservers(d,x,{type:"dependenciesUpdate",relatedFields:[g].concat(he(x))}),x}),pt(this,"updateValue",function(d,g){var x=An(d),S=h.store;h.updateStore(Os(h.store,x,g)),h.notifyObservers(S,[x],{type:"valueUpdate",source:"internal"}),h.notifyWatch([x]);var P=h.triggerDependenciesUpdate(S,x),M=h.callbacks.onValuesChange;if(M){var O=Gv(h.store,[x]);M(O,h.getFieldsValue())}h.triggerOnFieldsChange([x].concat(he(P)))}),pt(this,"setFieldsValue",function(d){h.warningUnhooked();var g=h.store;if(d){var x=oa(h.store,d);h.updateStore(x)}h.notifyObservers(g,null,{type:"valueUpdate",source:"external"}),h.notifyWatch()}),pt(this,"setFieldValue",function(d,g){h.setFields([{name:d,value:g}])}),pt(this,"getDependencyChildrenFields",function(d){var g=new Set,x=[],S=new Xo;h.getFieldEntities().forEach(function(M){var O=M.props.dependencies;(O||[]).forEach(function(L){var j=An(L);S.update(j,function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return V.add(M),V})})});var P=function M(O){var L=S.get(O)||new Set;L.forEach(function(j){if(!g.has(j)){g.add(j);var V=j.getNamePath();j.isFieldDirty()&&V.length&&(x.push(V),M(V))}})};return P(d),x}),pt(this,"triggerOnFieldsChange",function(d,g){var x=h.callbacks.onFieldsChange;if(x){var S=h.getFields();if(g){var P=new Xo;g.forEach(function(O){var L=O.name,j=O.errors;P.set(L,j)}),S.forEach(function(O){O.errors=P.get(O.name)||O.errors})}var M=S.filter(function(O){var L=O.name;return ma(d,L)});M.length&&x(M,S)}}),pt(this,"validateFields",function(d,g){h.warningUnhooked();var x,S;Array.isArray(d)||typeof d=="string"||typeof g=="string"?(x=d,S=g):S=d;var P=!!x,M=P?x.map(An):[],O=[],L=String(Date.now()),j=new Set,V=S||{},q=V.recursive,J=V.dirty;h.getFieldEntities(!0).forEach(function(B){if(P||M.push(B.getNamePath()),!(!B.props.rules||!B.props.rules.length)&&!(J&&!B.isFieldDirty())){var I=B.getNamePath();if(j.add(I.join(L)),!P||ma(M,I,q)){var tt=B.validateRules(Mt({validateMessages:Mt(Mt({},fS),h.validateMessages)},S));O.push(tt.then(function(){return{name:I,errors:[],warnings:[]}}).catch(function(z){var nt,R=[],ot=[];return(nt=z.forEach)===null||nt===void 0||nt.call(z,function(lt){var rt=lt.rule.warningOnly,dt=lt.errors;rt?ot.push.apply(ot,he(dt)):R.push.apply(R,he(dt))}),R.length?Promise.reject({name:I,errors:R,warnings:ot}):{name:I,errors:R,warnings:ot}}))}}});var Y=CE(O);h.lastValidatePromise=Y,Y.catch(function(B){return B}).then(function(B){var I=B.map(function(tt){var z=tt.name;return z});h.notifyObservers(h.store,I,{type:"validateFinish"}),h.triggerOnFieldsChange(I,B)});var W=Y.then(function(){return h.lastValidatePromise===Y?Promise.resolve(h.getFieldsValue(M)):Promise.reject([])}).catch(function(B){var I=B.filter(function(tt){return tt&&tt.errors.length});return Promise.reject({values:h.getFieldsValue(M),errorFields:I,outOfDate:h.lastValidatePromise!==Y})});W.catch(function(B){return B});var T=M.filter(function(B){return j.has(B.join(L))});return h.triggerOnFieldsChange(T),W}),pt(this,"submit",function(){h.warningUnhooked(),h.validateFields().then(function(d){var g=h.callbacks.onFinish;if(g)try{g(d)}catch(x){console.error(x)}}).catch(function(d){var g=h.callbacks.onFinishFailed;g&&g(d)})}),this.forceRootUpdate=o});function yS(s){var o=H.useRef(),h=H.useState({}),d=ce(h,2),g=d[1];if(!o.current)if(s)o.current=s;else{var x=function(){g({})},S=new PE(x);o.current=S.getForm()}return[o.current]}var bm=H.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),ME=function(o){var h=o.validateMessages,d=o.onFormChange,g=o.onFormFinish,x=o.children,S=H.useContext(bm),P=H.useRef({});return H.createElement(bm.Provider,{value:Mt(Mt({},S),{},{validateMessages:Mt(Mt({},S.validateMessages),h),triggerFormChange:function(O,L){d&&d(O,{changedFields:L,forms:P.current}),S.triggerFormChange(O,L)},triggerFormFinish:function(O,L){g&&g(O,{values:L,forms:P.current}),S.triggerFormFinish(O,L)},registerForm:function(O,L){O&&(P.current=Mt(Mt({},P.current),{},pt({},O,L))),S.registerForm(O,L)},unregisterForm:function(O){var L=Mt({},P.current);delete L[O],P.current=L,S.unregisterForm(O)}})},x)},NE=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],TE=function(o,h){var d=o.name,g=o.initialValues,x=o.fields,S=o.form,P=o.preserve,M=o.children,O=o.component,L=O===void 0?"form":O,j=o.validateMessages,V=o.validateTrigger,q=V===void 0?"onChange":V,J=o.onValuesChange,Y=o.onFieldsChange,W=o.onFinish,T=o.onFinishFailed,B=o.clearOnDestroy,I=er(o,NE),tt=H.useRef(null),z=H.useContext(bm),nt=yS(S),R=ce(nt,1),ot=R[0],lt=ot.getInternalHooks(mo),rt=lt.useSubscribe,dt=lt.setInitialValues,Pt=lt.setCallbacks,ct=lt.setValidateMessages,Et=lt.setPreserve,Zt=lt.destroyForm;H.useImperativeHandle(h,function(){return Mt(Mt({},ot),{},{nativeElement:tt.current})}),H.useEffect(function(){return z.registerForm(d,ot),function(){z.unregisterForm(d)}},[z,ot,d]),ct(Mt(Mt({},z.validateMessages),j)),Pt({onValuesChange:J,onFieldsChange:function(Ut){if(z.triggerFormChange(d,Ut),Y){for(var ge=arguments.length,ae=new Array(ge>1?ge-1:0),me=1;me<ge;me++)ae[me-1]=arguments[me];Y.apply(void 0,[Ut].concat(ae))}},onFinish:function(Ut){z.triggerFormFinish(d,Ut),W&&W(Ut)},onFinishFailed:T}),Et(P);var wt=H.useRef(null);dt(g,!wt.current),wt.current||(wt.current=!0),H.useEffect(function(){return function(){return Zt(B)}},[]);var ft,ht=typeof M=="function";if(ht){var gt=ot.getFieldsValue(!0);ft=M(gt,ot)}else ft=M;rt(!ht);var St=H.useRef();H.useEffect(function(){xE(St.current||[],x||[])||ot.setFields(x||[]),St.current=x},[x,ot]);var Ct=H.useMemo(function(){return Mt(Mt({},ot),{},{validateTrigger:q})},[ot,q]),Bt=H.createElement(nc.Provider,{value:null},H.createElement(La.Provider,{value:Ct},ft));return L===!1?Bt:H.createElement(L,En({},I,{ref:tt,onSubmit:function(Ut){Ut.preventDefault(),Ut.stopPropagation(),ot.submit()},onReset:function(Ut){var ge;Ut.preventDefault(),ot.resetFields(),(ge=I.onReset)===null||ge===void 0||ge.call(I,Ut)}}),Bt)};function Yv(s){try{return JSON.stringify(s)}catch{return Math.random()}}function AE(){for(var s=arguments.length,o=new Array(s),h=0;h<s;h++)o[h]=arguments[h];var d=o[0],g=o[1],x=g===void 0?{}:g,S=BL(x)?{form:x}:x,P=S.form,M=H.useState(),O=ce(M,2),L=O[0],j=O[1],V=H.useMemo(function(){return Yv(L)},[L]),q=H.useRef(V);q.current=V;var J=H.useContext(La),Y=P||J,W=Y&&Y._init,T=An(d),B=H.useRef(T);return B.current=T,H.useEffect(function(){if(W){var I=Y.getFieldsValue,tt=Y.getInternalHooks,z=tt(mo),nt=z.registerWatch,R=function(dt,Pt){var ct=S.preserve?Pt:dt;return typeof d=="function"?d(ct):Qs(ct,B.current)},ot=nt(function(rt,dt){var Pt=R(rt,dt),ct=Yv(Pt);q.current!==ct&&(q.current=ct,j(Pt))}),lt=R(I(),I(!0));return L!==lt&&j(lt),ot}},[W]),L}var LE=H.forwardRef(TE),fh=LE;fh.FormProvider=ME;fh.Field=mS;fh.List=SE;fh.useForm=yS;fh.useWatch=AE;const Wv=H.createContext({}),EE=s=>{let{children:o,status:h,override:d}=s;const g=H.useContext(Wv),x=H.useMemo(()=>{const S=Object.assign({},g);return d&&delete S.isFormItemInput,h&&(delete S.status,delete S.hasFeedback,delete S.feedbackIcon),S},[h,d,g]);return H.createElement(Wv.Provider,{value:x},o)},DE=s=>{const{space:o,form:h,children:d}=s;if(d==null)return null;let g=d;return h&&(g=zt.createElement(EE,{override:!0,status:!0},g)),o&&(g=zt.createElement(gA,null,g)),g};function qv(s){if(s)return{closable:s.closable,closeIcon:s.closeIcon}}function Jv(s){const{closable:o,closeIcon:h}=s||{};return zt.useMemo(()=>{if(!o&&(o===!1||h===!1||h===null))return!1;if(o===void 0&&h===void 0)return null;let d={closeIcon:typeof h!="boolean"&&h!==null?h:void 0};return o&&typeof o=="object"&&(d=Object.assign(Object.assign({},d),o)),d},[o,h])}function Zv(){const s={};for(var o=arguments.length,h=new Array(o),d=0;d<o;d++)h[d]=arguments[d];return h.forEach(g=>{g&&Object.keys(g).forEach(x=>{g[x]!==void 0&&(s[x]=g[x])})}),s}const OE={};function FE(s,o){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:OE;const d=Jv(s),g=Jv(o),x=typeof d!="boolean"?!!(d!=null&&d.disabled):!1,S=zt.useMemo(()=>Object.assign({closeIcon:zt.createElement(Vc,null)},h),[h]),P=zt.useMemo(()=>d===!1?!1:d?Zv(S,g,d):g===!1?!1:g?Zv(S,g):S.closable?S:!1,[d,g,S]);return zt.useMemo(()=>{if(P===!1)return[!1,null,x];const{closeIconRender:M}=S,{closeIcon:O}=P;let L=O;if(L!=null){M&&(L=M(O));const j=Vp(P,!0);Object.keys(j).length&&(L=zt.isValidElement(L)?zt.cloneElement(L,j):zt.createElement("span",Object.assign({},j),L))}return[!0,L,x]},[P,S])}const RE=()=>Oi()&&window.document.documentElement,Kc=s=>{const{prefixCls:o,className:h,style:d,size:g,shape:x}=s,S=Ce({[`${o}-lg`]:g==="large",[`${o}-sm`]:g==="small"}),P=Ce({[`${o}-circle`]:x==="circle",[`${o}-square`]:x==="square",[`${o}-round`]:x==="round"}),M=H.useMemo(()=>typeof g=="number"?{width:g,height:g,lineHeight:`${g}px`}:{},[g]);return H.createElement("span",{className:Ce(o,S,P,h),style:Object.assign(Object.assign({},M),d)})},IE=new ki("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),Gc=s=>({height:s,lineHeight:He(s)}),pa=s=>Object.assign({width:s},Gc(s)),BE=s=>({background:s.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:IE,animationDuration:s.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),kf=(s,o)=>Object.assign({width:o(s).mul(5).equal(),minWidth:o(s).mul(5).equal()},Gc(s)),jE=s=>{const{skeletonAvatarCls:o,gradientFromColor:h,controlHeight:d,controlHeightLG:g,controlHeightSM:x}=s;return{[o]:Object.assign({display:"inline-block",verticalAlign:"top",background:h},pa(d)),[`${o}${o}-circle`]:{borderRadius:"50%"},[`${o}${o}-lg`]:Object.assign({},pa(g)),[`${o}${o}-sm`]:Object.assign({},pa(x))}},zE=s=>{const{controlHeight:o,borderRadiusSM:h,skeletonInputCls:d,controlHeightLG:g,controlHeightSM:x,gradientFromColor:S,calc:P}=s;return{[d]:Object.assign({display:"inline-block",verticalAlign:"top",background:S,borderRadius:h},kf(o,P)),[`${d}-lg`]:Object.assign({},kf(g,P)),[`${d}-sm`]:Object.assign({},kf(x,P))}},Qv=s=>Object.assign({width:s},Gc(s)),VE=s=>{const{skeletonImageCls:o,imageSizeBase:h,gradientFromColor:d,borderRadiusSM:g,calc:x}=s;return{[o]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:d,borderRadius:g},Qv(x(h).mul(2).equal())),{[`${o}-path`]:{fill:"#bfbfbf"},[`${o}-svg`]:Object.assign(Object.assign({},Qv(h)),{maxWidth:x(h).mul(4).equal(),maxHeight:x(h).mul(4).equal()}),[`${o}-svg${o}-svg-circle`]:{borderRadius:"50%"}}),[`${o}${o}-circle`]:{borderRadius:"50%"}}},Pf=(s,o,h)=>{const{skeletonButtonCls:d}=s;return{[`${h}${d}-circle`]:{width:o,minWidth:o,borderRadius:"50%"},[`${h}${d}-round`]:{borderRadius:o}}},Mf=(s,o)=>Object.assign({width:o(s).mul(2).equal(),minWidth:o(s).mul(2).equal()},Gc(s)),$E=s=>{const{borderRadiusSM:o,skeletonButtonCls:h,controlHeight:d,controlHeightLG:g,controlHeightSM:x,gradientFromColor:S,calc:P}=s;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[h]:Object.assign({display:"inline-block",verticalAlign:"top",background:S,borderRadius:o,width:P(d).mul(2).equal(),minWidth:P(d).mul(2).equal()},Mf(d,P))},Pf(s,d,h)),{[`${h}-lg`]:Object.assign({},Mf(g,P))}),Pf(s,g,`${h}-lg`)),{[`${h}-sm`]:Object.assign({},Mf(x,P))}),Pf(s,x,`${h}-sm`))},HE=s=>{const{componentCls:o,skeletonAvatarCls:h,skeletonTitleCls:d,skeletonParagraphCls:g,skeletonButtonCls:x,skeletonInputCls:S,skeletonImageCls:P,controlHeight:M,controlHeightLG:O,controlHeightSM:L,gradientFromColor:j,padding:V,marginSM:q,borderRadius:J,titleHeight:Y,blockRadius:W,paragraphLiHeight:T,controlHeightXS:B,paragraphMarginTop:I}=s;return{[o]:{display:"table",width:"100%",[`${o}-header`]:{display:"table-cell",paddingInlineEnd:V,verticalAlign:"top",[h]:Object.assign({display:"inline-block",verticalAlign:"top",background:j},pa(M)),[`${h}-circle`]:{borderRadius:"50%"},[`${h}-lg`]:Object.assign({},pa(O)),[`${h}-sm`]:Object.assign({},pa(L))},[`${o}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[d]:{width:"100%",height:Y,background:j,borderRadius:W,[`+ ${g}`]:{marginBlockStart:L}},[g]:{padding:0,"> li":{width:"100%",height:T,listStyle:"none",background:j,borderRadius:W,"+ li":{marginBlockStart:B}}},[`${g}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${o}-content`]:{[`${d}, ${g} > li`]:{borderRadius:J}}},[`${o}-with-avatar ${o}-content`]:{[d]:{marginBlockStart:q,[`+ ${g}`]:{marginBlockStart:I}}},[`${o}${o}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},$E(s)),jE(s)),zE(s)),VE(s)),[`${o}${o}-block`]:{width:"100%",[x]:{width:"100%"},[S]:{width:"100%"}},[`${o}${o}-active`]:{[`
        ${d},
        ${g} > li,
        ${h},
        ${x},
        ${S},
        ${P}
      `]:Object.assign({},BE(s))}}},UE=s=>{const{colorFillContent:o,colorFill:h}=s,d=o,g=h;return{color:d,colorGradientEnd:g,gradientFromColor:d,gradientToColor:g,titleHeight:s.controlHeight/2,blockRadius:s.borderRadiusSM,paragraphMarginTop:s.marginLG+s.marginXXS,paragraphLiHeight:s.controlHeight/2}},Ia=jp("Skeleton",s=>{const{componentCls:o,calc:h}=s,d=_r(s,{skeletonAvatarCls:`${o}-avatar`,skeletonTitleCls:`${o}-title`,skeletonParagraphCls:`${o}-paragraph`,skeletonButtonCls:`${o}-button`,skeletonInputCls:`${o}-input`,skeletonImageCls:`${o}-image`,imageSizeBase:h(s.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${s.gradientFromColor} 25%, ${s.gradientToColor} 37%, ${s.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[HE(d)]},UE,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),KE=s=>{const{prefixCls:o,className:h,rootClassName:d,active:g,shape:x="circle",size:S="default"}=s,{getPrefixCls:P}=H.useContext(Un),M=P("skeleton",o),[O,L,j]=Ia(M),V=Rc(s,["prefixCls","className"]),q=Ce(M,`${M}-element`,{[`${M}-active`]:g},h,d,L,j);return O(H.createElement("div",{className:q},H.createElement(Kc,Object.assign({prefixCls:`${M}-avatar`,shape:x,size:S},V))))},GE=s=>{const{prefixCls:o,className:h,rootClassName:d,active:g,block:x=!1,size:S="default"}=s,{getPrefixCls:P}=H.useContext(Un),M=P("skeleton",o),[O,L,j]=Ia(M),V=Rc(s,["prefixCls"]),q=Ce(M,`${M}-element`,{[`${M}-active`]:g,[`${M}-block`]:x},h,d,L,j);return O(H.createElement("div",{className:q},H.createElement(Kc,Object.assign({prefixCls:`${M}-button`,size:S},V))))},XE="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",YE=s=>{const{prefixCls:o,className:h,rootClassName:d,style:g,active:x}=s,{getPrefixCls:S}=H.useContext(Un),P=S("skeleton",o),[M,O,L]=Ia(P),j=Ce(P,`${P}-element`,{[`${P}-active`]:x},h,d,O,L);return M(H.createElement("div",{className:j},H.createElement("div",{className:Ce(`${P}-image`,h),style:g},H.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${P}-image-svg`},H.createElement("title",null,"Image placeholder"),H.createElement("path",{d:XE,className:`${P}-image-path`})))))},WE=s=>{const{prefixCls:o,className:h,rootClassName:d,active:g,block:x,size:S="default"}=s,{getPrefixCls:P}=H.useContext(Un),M=P("skeleton",o),[O,L,j]=Ia(M),V=Rc(s,["prefixCls"]),q=Ce(M,`${M}-element`,{[`${M}-active`]:g,[`${M}-block`]:x},h,d,L,j);return O(H.createElement("div",{className:q},H.createElement(Kc,Object.assign({prefixCls:`${M}-input`,size:S},V))))},qE=s=>{const{prefixCls:o,className:h,rootClassName:d,style:g,active:x,children:S}=s,{getPrefixCls:P}=H.useContext(Un),M=P("skeleton",o),[O,L,j]=Ia(M),V=Ce(M,`${M}-element`,{[`${M}-active`]:x},L,h,d,j);return O(H.createElement("div",{className:V},H.createElement("div",{className:Ce(`${M}-image`,h),style:g},S)))},JE=(s,o)=>{const{width:h,rows:d=2}=o;if(Array.isArray(h))return h[s];if(d-1===s)return h},ZE=s=>{const{prefixCls:o,className:h,style:d,rows:g}=s,x=he(new Array(g)).map((S,P)=>H.createElement("li",{key:P,style:{width:JE(P,s)}}));return H.createElement("ul",{className:Ce(o,h),style:d},x)},QE=s=>{let{prefixCls:o,className:h,width:d,style:g}=s;return H.createElement("h3",{className:Ce(o,h),style:Object.assign({width:d},g)})};function Nf(s){return s&&typeof s=="object"?s:{}}function _E(s,o){return s&&!o?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function tD(s,o){return!s&&o?{width:"38%"}:s&&o?{width:"50%"}:{}}function eD(s,o){const h={};return(!s||!o)&&(h.width="61%"),!s&&o?h.rows=3:h.rows=2,h}const Ba=s=>{const{prefixCls:o,loading:h,className:d,rootClassName:g,style:x,children:S,avatar:P=!1,title:M=!0,paragraph:O=!0,active:L,round:j}=s,{getPrefixCls:V,direction:q,skeleton:J}=H.useContext(Un),Y=V("skeleton",o),[W,T,B]=Ia(Y);if(h||!("loading"in s)){const I=!!P,tt=!!M,z=!!O;let nt;if(I){const lt=Object.assign(Object.assign({prefixCls:`${Y}-avatar`},_E(tt,z)),Nf(P));nt=H.createElement("div",{className:`${Y}-header`},H.createElement(Kc,Object.assign({},lt)))}let R;if(tt||z){let lt;if(tt){const dt=Object.assign(Object.assign({prefixCls:`${Y}-title`},tD(I,z)),Nf(M));lt=H.createElement(QE,Object.assign({},dt))}let rt;if(z){const dt=Object.assign(Object.assign({prefixCls:`${Y}-paragraph`},eD(I,tt)),Nf(O));rt=H.createElement(ZE,Object.assign({},dt))}R=H.createElement("div",{className:`${Y}-content`},lt,rt)}const ot=Ce(Y,{[`${Y}-with-avatar`]:I,[`${Y}-active`]:L,[`${Y}-rtl`]:q==="rtl",[`${Y}-round`]:j},J==null?void 0:J.className,d,g,T,B);return W(H.createElement("div",{className:ot,style:Object.assign(Object.assign({},J==null?void 0:J.style),x)},nt,R))}return S??null};Ba.Button=GE;Ba.Avatar=KE;Ba.Input=WE;Ba.Image=YE;Ba.Node=qE;function _v(){}const nD=H.createContext({add:_v,remove:_v});function iD(s){const o=H.useContext(nD),h=H.useRef();return Zl(g=>{if(g){const x=s?g.querySelector(s):g;o.add(x),h.current=x}else o.remove(h.current)})}const t1=()=>{const{cancelButtonProps:s,cancelTextLocale:o,onCancel:h}=H.useContext(ch);return zt.createElement(uh,Object.assign({onClick:h},s),o)},e1=()=>{const{confirmLoading:s,okButtonProps:o,okType:h,okTextLocale:d,onOk:g}=H.useContext(ch);return zt.createElement(uh,Object.assign({},_w(h),{loading:s,onClick:g},o),d)};function vS(s,o){return zt.createElement("span",{className:`${s}-close-x`},o||zt.createElement(Vc,{className:`${s}-close-icon`}))}const xS=s=>{const{okText:o,okType:h="primary",cancelText:d,confirmLoading:g,onOk:x,onCancel:S,okButtonProps:P,cancelButtonProps:M,footer:O}=s,[L]=Ip("Modal",uw()),j=o||(L==null?void 0:L.okText),V=d||(L==null?void 0:L.cancelText),q={confirmLoading:g,okButtonProps:P,cancelButtonProps:M,okTextLocale:j,cancelTextLocale:V,okType:h,onOk:x,onCancel:S},J=zt.useMemo(()=>q,he(Object.values(q)));let Y;return typeof O=="function"||typeof O>"u"?(Y=zt.createElement(zt.Fragment,null,zt.createElement(t1,null),zt.createElement(e1,null)),typeof O=="function"&&(Y=O(Y,{OkBtn:e1,CancelBtn:t1})),Y=zt.createElement(oS,{value:J},Y)):Y=O,zt.createElement(yw,{disabled:!1},Y)};function n1(s){return{position:s,inset:0}}const sD=s=>{const{componentCls:o,antCls:h}=s;return[{[`${o}-root`]:{[`${o}${h}-zoom-enter, ${o}${h}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:s.motionDurationSlow,userSelect:"none"},[`${o}${h}-zoom-leave ${o}-content`]:{pointerEvents:"none"},[`${o}-mask`]:Object.assign(Object.assign({},n1("fixed")),{zIndex:s.zIndexPopupBase,height:"100%",backgroundColor:s.colorBgMask,pointerEvents:"none",[`${o}-hidden`]:{display:"none"}}),[`${o}-wrap`]:Object.assign(Object.assign({},n1("fixed")),{zIndex:s.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${o}-root`]:DA(s)}]},rD=s=>{const{componentCls:o}=s;return[{[`${o}-root`]:{[`${o}-wrap-rtl`]:{direction:"rtl"},[`${o}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[o]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${s.screenSMMax}px)`]:{[o]:{maxWidth:"calc(100vw - 16px)",margin:`${He(s.marginXS)} auto`},[`${o}-centered`]:{[o]:{flex:1}}}}},{[o]:Object.assign(Object.assign({},SN(s)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${He(s.calc(s.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:s.paddingLG,[`${o}-title`]:{margin:0,color:s.titleColor,fontWeight:s.fontWeightStrong,fontSize:s.titleFontSize,lineHeight:s.titleLineHeight,wordWrap:"break-word"},[`${o}-content`]:{position:"relative",backgroundColor:s.contentBg,backgroundClip:"padding-box",border:0,borderRadius:s.borderRadiusLG,boxShadow:s.boxShadow,pointerEvents:"auto",padding:s.contentPadding},[`${o}-close`]:Object.assign({position:"absolute",top:s.calc(s.modalHeaderHeight).sub(s.modalCloseBtnSize).div(2).equal(),insetInlineEnd:s.calc(s.modalHeaderHeight).sub(s.modalCloseBtnSize).div(2).equal(),zIndex:s.calc(s.zIndexPopupBase).add(10).equal(),padding:0,color:s.modalCloseIconColor,fontWeight:s.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:s.borderRadiusSM,width:s.modalCloseBtnSize,height:s.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${s.motionDurationMid}, background-color ${s.motionDurationMid}`,"&-x":{display:"flex",fontSize:s.fontSizeLG,fontStyle:"normal",lineHeight:He(s.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:s.modalCloseIconHoverColor,backgroundColor:s.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:s.colorBgTextActive}},kw(s)),[`${o}-header`]:{color:s.colorText,background:s.headerBg,borderRadius:`${He(s.borderRadiusLG)} ${He(s.borderRadiusLG)} 0 0`,marginBottom:s.headerMarginBottom,padding:s.headerPadding,borderBottom:s.headerBorderBottom},[`${o}-body`]:{fontSize:s.fontSize,lineHeight:s.lineHeight,wordWrap:"break-word",padding:s.bodyPadding,[`${o}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${He(s.margin)} auto`}},[`${o}-footer`]:{textAlign:"end",background:s.footerBg,marginTop:s.footerMarginTop,padding:s.footerPadding,borderTop:s.footerBorderTop,borderRadius:s.footerBorderRadius,[`> ${s.antCls}-btn + ${s.antCls}-btn`]:{marginInlineStart:s.marginXS}},[`${o}-open`]:{overflow:"hidden"}})},{[`${o}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${o}-content,
          ${o}-body,
          ${o}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${o}-confirm-body`]:{marginBottom:"auto"}}}]},oD=s=>{const{componentCls:o}=s;return{[`${o}-root`]:{[`${o}-wrap-rtl`]:{direction:"rtl",[`${o}-confirm-body`]:{direction:"rtl"}}}}},bS=s=>{const o=s.padding,h=s.fontSizeHeading5,d=s.lineHeightHeading5;return _r(s,{modalHeaderHeight:s.calc(s.calc(d).mul(h).equal()).add(s.calc(o).mul(2).equal()).equal(),modalFooterBorderColorSplit:s.colorSplit,modalFooterBorderStyle:s.lineType,modalFooterBorderWidth:s.lineWidth,modalCloseIconColor:s.colorIcon,modalCloseIconHoverColor:s.colorIconHover,modalCloseBtnSize:s.controlHeight,modalConfirmIconSize:s.fontHeight,modalTitleHeight:s.calc(s.titleFontSize).mul(s.titleLineHeight).equal()})},wS=s=>({footerBg:"transparent",headerBg:s.colorBgElevated,titleLineHeight:s.lineHeightHeading5,titleFontSize:s.fontSizeHeading5,contentBg:s.colorBgElevated,titleColor:s.colorTextHeading,contentPadding:s.wireframe?0:`${He(s.paddingMD)} ${He(s.paddingContentHorizontalLG)}`,headerPadding:s.wireframe?`${He(s.padding)} ${He(s.paddingLG)}`:0,headerBorderBottom:s.wireframe?`${He(s.lineWidth)} ${s.lineType} ${s.colorSplit}`:"none",headerMarginBottom:s.wireframe?0:s.marginXS,bodyPadding:s.wireframe?s.paddingLG:0,footerPadding:s.wireframe?`${He(s.paddingXS)} ${He(s.padding)}`:0,footerBorderTop:s.wireframe?`${He(s.lineWidth)} ${s.lineType} ${s.colorSplit}`:"none",footerBorderRadius:s.wireframe?`0 0 ${He(s.borderRadiusLG)} ${He(s.borderRadiusLG)}`:0,footerMarginTop:s.wireframe?0:s.marginSM,confirmBodyPadding:s.wireframe?`${He(s.padding*2)} ${He(s.padding*2)} ${He(s.paddingLG)}`:0,confirmIconMarginInlineEnd:s.wireframe?s.margin:s.marginSM,confirmBtnsMarginTop:s.wireframe?s.marginLG:s.marginSM}),SS=jp("Modal",s=>{const o=bS(s);return[rD(o),oD(o),sD(o),KA(o,"zoom")]},wS,{unitless:{titleLineHeight:!0}});var aD=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};let wm;const lD=s=>{wm={x:s.pageX,y:s.pageY},setTimeout(()=>{wm=null},100)};RE()&&document.documentElement.addEventListener("click",lD,!0);const CS=s=>{var o;const{getPopupContainer:h,getPrefixCls:d,direction:g,modal:x}=H.useContext(Un),S=Ht=>{const{onCancel:Ut}=s;Ut==null||Ut(Ht)},P=Ht=>{const{onOk:Ut}=s;Ut==null||Ut(Ht)},{prefixCls:M,className:O,rootClassName:L,open:j,wrapClassName:V,centered:q,getContainer:J,focusTriggerAfterClose:Y=!0,style:W,visible:T,width:B=520,footer:I,classNames:tt,styles:z,children:nt,loading:R}=s,ot=aD(s,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),lt=d("modal",M),rt=d(),dt=Gw(lt),[Pt,ct,Et]=SS(lt,dt),Zt=Ce(V,{[`${lt}-centered`]:!!q,[`${lt}-wrap-rtl`]:g==="rtl"}),wt=I!==null&&!R?H.createElement(xS,Object.assign({},s,{onOk:P,onCancel:S})):null,[ft,ht,gt]=FE(qv(s),qv(x),{closable:!0,closeIcon:H.createElement(Vc,{className:`${lt}-close-icon`}),closeIconRender:Ht=>vS(lt,Ht)}),St=iD(`.${lt}-content`),[Ct,Bt]=WT("Modal",ot.zIndex);return Pt(H.createElement(DE,{form:!0,space:!0},H.createElement(Xw.Provider,{value:Bt},H.createElement(cS,Object.assign({width:B},ot,{zIndex:Ct,getContainer:J===void 0?h:J,prefixCls:lt,rootClassName:Ce(ct,L,Et,dt),footer:wt,visible:j??T,mousePosition:(o=ot.mousePosition)!==null&&o!==void 0?o:wm,onClose:S,closable:ft&&{disabled:gt,closeIcon:ht},closeIcon:ht,focusTriggerAfterClose:Y,transitionName:ec(rt,"zoom",s.transitionName),maskTransitionName:ec(rt,"fade",s.maskTransitionName),className:Ce(ct,O,x==null?void 0:x.className),style:Object.assign(Object.assign({},x==null?void 0:x.style),W),classNames:Object.assign(Object.assign(Object.assign({},x==null?void 0:x.classNames),tt),{wrapper:Ce(Zt,tt==null?void 0:tt.wrapper)}),styles:Object.assign(Object.assign({},x==null?void 0:x.styles),z),panelRef:St}),R?H.createElement(Ba,{active:!0,title:!1,paragraph:{rows:4},className:`${lt}-body-skeleton`}):nt))))},hD=s=>{const{componentCls:o,titleFontSize:h,titleLineHeight:d,modalConfirmIconSize:g,fontSize:x,lineHeight:S,modalTitleHeight:P,fontHeight:M,confirmBodyPadding:O}=s,L=`${o}-confirm`;return{[L]:{"&-rtl":{direction:"rtl"},[`${s.antCls}-modal-header`]:{display:"none"},[`${L}-body-wrapper`]:Object.assign({},kN()),[`&${o} ${o}-body`]:{padding:O},[`${L}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${s.iconCls}`]:{flex:"none",fontSize:g,marginInlineEnd:s.confirmIconMarginInlineEnd,marginTop:s.calc(s.calc(M).sub(g).equal()).div(2).equal()},[`&-has-title > ${s.iconCls}`]:{marginTop:s.calc(s.calc(P).sub(g).equal()).div(2).equal()}},[`${L}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:s.marginXS},[`${s.iconCls} + ${L}-paragraph`]:{maxWidth:`calc(100% - ${He(s.calc(s.modalConfirmIconSize).add(s.marginSM).equal())})`},[`${L}-title`]:{color:s.colorTextHeading,fontWeight:s.fontWeightStrong,fontSize:h,lineHeight:d},[`${L}-content`]:{color:s.colorText,fontSize:x,lineHeight:S},[`${L}-btns`]:{textAlign:"end",marginTop:s.confirmBtnsMarginTop,[`${s.antCls}-btn + ${s.antCls}-btn`]:{marginBottom:0,marginInlineStart:s.marginXS}}},[`${L}-error ${L}-body > ${s.iconCls}`]:{color:s.colorError},[`${L}-warning ${L}-body > ${s.iconCls},
        ${L}-confirm ${L}-body > ${s.iconCls}`]:{color:s.colorWarning},[`${L}-info ${L}-body > ${s.iconCls}`]:{color:s.colorInfo},[`${L}-success ${L}-body > ${s.iconCls}`]:{color:s.colorSuccess}}},uD=Mw(["Modal","confirm"],s=>{const o=bS(s);return[hD(o)]},wS,{order:-1e3});var cD=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};function kS(s){const{prefixCls:o,icon:h,okText:d,cancelText:g,confirmPrefixCls:x,type:S,okCancel:P,footer:M,locale:O}=s,L=cD(s,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let j=h;if(!h&&h!==null)switch(S){case"info":j=H.createElement(OT,null);break;case"success":j=H.createElement(ST,null);break;case"error":j=H.createElement(PT,null);break;default:j=H.createElement(LT,null)}const V=P??S==="confirm",q=s.autoFocusButton===null?!1:s.autoFocusButton||"ok",[J]=Ip("Modal"),Y=O||J,W=d||(V?Y==null?void 0:Y.okText:Y==null?void 0:Y.justOkText),T=g||(Y==null?void 0:Y.cancelText),B=Object.assign({autoFocusButton:q,cancelTextLocale:T,okTextLocale:W,mergedOkCancel:V},L),I=H.useMemo(()=>B,he(Object.values(B))),tt=H.createElement(H.Fragment,null,H.createElement(Av,null),H.createElement(Lv,null)),z=s.title!==void 0&&s.title!==null,nt=`${x}-body`;return H.createElement("div",{className:`${x}-body-wrapper`},H.createElement("div",{className:Ce(nt,{[`${nt}-has-title`]:z})},j,H.createElement("div",{className:`${x}-paragraph`},z&&H.createElement("span",{className:`${x}-title`},s.title),H.createElement("div",{className:`${x}-content`},s.content))),M===void 0||typeof M=="function"?H.createElement(oS,{value:I},H.createElement("div",{className:`${x}-btns`},typeof M=="function"?M(tt,{OkBtn:Lv,CancelBtn:Av}):tt)):M,H.createElement(uD,{prefixCls:o}))}const dD=s=>{const{close:o,zIndex:h,afterClose:d,open:g,keyboard:x,centered:S,getContainer:P,maskStyle:M,direction:O,prefixCls:L,wrapClassName:j,rootPrefixCls:V,bodyStyle:q,closable:J=!1,closeIcon:Y,modalRender:W,focusTriggerAfterClose:T,onConfirm:B,styles:I}=s,tt=`${L}-confirm`,z=s.width||416,nt=s.style||{},R=s.mask===void 0?!0:s.mask,ot=s.maskClosable===void 0?!1:s.maskClosable,lt=Ce(tt,`${tt}-${s.type}`,{[`${tt}-rtl`]:O==="rtl"},s.className),[,rt]=to(),dt=H.useMemo(()=>h!==void 0?h:rt.zIndexPopupBase+GT,[h,rt]);return H.createElement(CS,{prefixCls:L,className:lt,wrapClassName:Ce({[`${tt}-centered`]:!!s.centered},j),onCancel:()=>{o==null||o({triggerCancel:!0}),B==null||B(!1)},open:g,title:"",footer:null,transitionName:ec(V||"","zoom",s.transitionName),maskTransitionName:ec(V||"","fade",s.maskTransitionName),mask:R,maskClosable:ot,style:nt,styles:Object.assign({body:q,mask:M},I),width:z,zIndex:dt,afterClose:d,keyboard:x,centered:S,getContainer:P,closable:J,closeIcon:Y,modalRender:W,focusTriggerAfterClose:T},H.createElement(kS,Object.assign({},s,{confirmPrefixCls:tt})))},PS=s=>{const{rootPrefixCls:o,iconPrefixCls:h,direction:d,theme:g}=s;return H.createElement(eo,{prefixCls:o,iconPrefixCls:h,direction:d,theme:g},H.createElement(dD,Object.assign({},s)))},po=[];let MS="";function NS(){return MS}const fD=s=>{var o,h;const{prefixCls:d,getContainer:g,direction:x}=s,S=uw(),P=H.useContext(Un),M=NS()||P.getPrefixCls(),O=d||`${M}-modal`;let L=g;return L===!1&&(L=void 0),zt.createElement(PS,Object.assign({},s,{rootPrefixCls:M,prefixCls:O,iconPrefixCls:P.iconPrefixCls,theme:P.theme,direction:x??P.direction,locale:(h=(o=P.locale)===null||o===void 0?void 0:o.Modal)!==null&&h!==void 0?h:S,getContainer:L}))};function gh(s){const o=aT(),h=document.createDocumentFragment();let d=Object.assign(Object.assign({},s),{close:P,open:!0}),g;function x(){for(var O,L=arguments.length,j=new Array(L),V=0;V<L;V++)j[V]=arguments[V];if(j.some(Y=>Y==null?void 0:Y.triggerCancel)){var J;(O=s.onCancel)===null||O===void 0||(J=O).call.apply(J,[s,()=>{}].concat(he(j.slice(1))))}for(let Y=0;Y<po.length;Y++)if(po[Y]===P){po.splice(Y,1);break}qw(h)}function S(O){clearTimeout(g),g=setTimeout(()=>{const L=o.getPrefixCls(void 0,NS()),j=o.getIconPrefixCls(),V=o.getTheme(),q=zt.createElement(fD,Object.assign({},O));Ww(zt.createElement(eo,{prefixCls:L,iconPrefixCls:j,theme:V},o.holderRender?o.holderRender(q):q),h)})}function P(){for(var O=arguments.length,L=new Array(O),j=0;j<O;j++)L[j]=arguments[j];d=Object.assign(Object.assign({},d),{open:!1,afterClose:()=>{typeof s.afterClose=="function"&&s.afterClose(),x.apply(this,L)}}),d.visible&&delete d.visible,S(d)}function M(O){typeof O=="function"?d=O(d):d=Object.assign(Object.assign({},d),O),S(d)}return S(d),po.push(P),{destroy:P,update:M}}function TS(s){return Object.assign(Object.assign({},s),{type:"warning"})}function AS(s){return Object.assign(Object.assign({},s),{type:"info"})}function LS(s){return Object.assign(Object.assign({},s),{type:"success"})}function ES(s){return Object.assign(Object.assign({},s),{type:"error"})}function DS(s){return Object.assign(Object.assign({},s),{type:"confirm"})}function gD(s){let{rootPrefixCls:o}=s;MS=o}var mD=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};const pD=(s,o)=>{var h,{afterClose:d,config:g}=s,x=mD(s,["afterClose","config"]);const[S,P]=H.useState(!0),[M,O]=H.useState(g),{direction:L,getPrefixCls:j}=H.useContext(Un),V=j("modal"),q=j(),J=()=>{var B;d(),(B=M.afterClose)===null||B===void 0||B.call(M)},Y=function(){var B;P(!1);for(var I=arguments.length,tt=new Array(I),z=0;z<I;z++)tt[z]=arguments[z];if(tt.some(ot=>ot==null?void 0:ot.triggerCancel)){var R;(B=M.onCancel)===null||B===void 0||(R=B).call.apply(R,[M,()=>{}].concat(he(tt.slice(1))))}};H.useImperativeHandle(o,()=>({destroy:Y,update:B=>{O(I=>Object.assign(Object.assign({},I),B))}}));const W=(h=M.okCancel)!==null&&h!==void 0?h:M.type==="confirm",[T]=Ip("Modal",Mo.Modal);return H.createElement(PS,Object.assign({prefixCls:V,rootPrefixCls:q},M,{close:Y,open:S,afterClose:J,okText:M.okText||(W?T==null?void 0:T.okText:T==null?void 0:T.justOkText),direction:M.direction||L,cancelText:M.cancelText||(T==null?void 0:T.cancelText)},x))},yD=H.forwardRef(pD);let i1=0;const vD=H.memo(H.forwardRef((s,o)=>{const[h,d]=qT();return H.useImperativeHandle(o,()=>({patchElement:d}),[]),H.createElement(H.Fragment,null,h)}));function xD(){const s=H.useRef(null),[o,h]=H.useState([]);H.useEffect(()=>{o.length&&(he(o).forEach(S=>{S()}),h([]))},[o]);const d=H.useCallback(x=>function(P){var M;i1+=1;const O=H.createRef();let L;const j=new Promise(W=>{L=W});let V=!1,q;const J=H.createElement(yD,{key:`modal-${i1}`,config:x(P),ref:O,afterClose:()=>{q==null||q()},isSilent:()=>V,onConfirm:W=>{L(W)}});return q=(M=s.current)===null||M===void 0?void 0:M.patchElement(J),q&&po.push(q),{destroy:()=>{function W(){var T;(T=O.current)===null||T===void 0||T.destroy()}O.current?W():h(T=>[].concat(he(T),[W]))},update:W=>{function T(){var B;(B=O.current)===null||B===void 0||B.update(W)}O.current?T():h(B=>[].concat(he(B),[T]))},then:W=>(V=!0,j.then(W))}},[]);return[H.useMemo(()=>({info:d(AS),success:d(LS),error:d(ES),warning:d(TS),confirm:d(DS)}),[]),H.createElement(vD,{key:"modal-holder",ref:s})]}function bD(s){return o=>H.createElement(eo,{theme:{token:{motion:!1,zIndexPopupBase:0}}},H.createElement(s,Object.assign({},o)))}var wD=function(s,o){var h={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&o.indexOf(d)<0&&(h[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)o.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(h[d[g]]=s[d[g]]);return h};const SD=s=>{const{prefixCls:o,className:h,closeIcon:d,closable:g,type:x,title:S,children:P,footer:M}=s,O=wD(s,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:L}=H.useContext(Un),j=L(),V=o||L("modal"),q=Gw(j),[J,Y,W]=SS(V,q),T=`${V}-confirm`;let B={};return x?B={closable:g??!1,title:"",footer:"",children:H.createElement(kS,Object.assign({},s,{prefixCls:V,confirmPrefixCls:T,rootPrefixCls:j,content:P}))}:B={closable:g??!0,title:S,footer:M!==null&&H.createElement(xS,Object.assign({},s)),children:P},J(H.createElement(hS,Object.assign({prefixCls:V,className:Ce(Y,`${V}-pure-panel`,x&&T,x&&`${T}-${x}`,h,W,q)},O,{closeIcon:vS(V,d),closable:g},B)))},CD=bD(SD);function OS(s){return gh(TS(s))}const es=CS;es.useModal=xD;es.info=function(o){return gh(AS(o))};es.success=function(o){return gh(LS(o))};es.error=function(o){return gh(ES(o))};es.warning=OS;es.warn=OS;es.confirm=function(o){return gh(DS(o))};es.destroyAll=function(){for(;po.length;){const o=po.pop();o&&o()}};es.config=gD;es._InternalPanelDoNotUseOrYouWillBeFired=CD;const kD=({open:s,setOpen:o,modelText:h,setModelText:d})=>{const g=()=>{try{const q=(typeof h=="string"?JSON.parse(h):h).nodeDataArray.map(Y=>Math.abs(Y.key)).sort((Y,W)=>Y-W);let J=1;for(const Y of q){if(Y!==J)return J;J++}return J}catch(V){return console.error("Error in getNextKey:",V),1}};H.useEffect(()=>{S(V=>({...V,id:g()}))},[h]);const[x,S]=H.useState({id:1,name:"",description:"",color:"#ababab",meaning:"none"}),P=[{value:"#ababab",label:"Gray"},{value:"#ffab46",label:"Orange"},{value:"#00a85d",label:"Green"},{value:"#008248",label:"Dark Green"},{value:"#005c50",label:"Teal"}],M=[{value:"obsolete",label:"Obsolete"},{value:"inProgress",label:"In progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}],O=V=>{const{name:q,value:J}=V.target;S(Y=>({...Y,[q]:J}))},L=V=>{S(q=>({...q,color:V}))},j=()=>{S({id:g(),name:"",description:"",color:"#ababab",meaning:"none"});const V=typeof h=="string"?JSON.parse(h):h,q={"#ababab":"notStart","#ffab46":"draft","#00a85d":"inReview","#008248":"inApproval","#005c50":"approved"},J=-x.id,Y={key:J,category:q[x.color],text:x.name,meaning:x.meaning==="none"?"--":x.meaning,description:x.description};`${x.name}`;const W={...V,nodeDataArray:[...V.nodeDataArray,Y]};d(JSON.stringify(W,null,2)),o(!1)};return Lt.jsx(es,{title:"Add Option...",open:s,onCancel:()=>o(!1),width:500,footer:[Lt.jsx("button",{onClick:j,className:"bg-sky-500 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded",children:"OK"},"ok"),Lt.jsx("button",{onClick:()=>o(!1),className:"ml-2 bg-transparent hover:bg-sky-500 text-sky-700 font-semibold hover:text-white py-2 px-4 border border-sky-500 hover:border-transparent rounded",children:"Cancel"},"cancel")],children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx("label",{className:"w-20",children:"Status:*"}),Lt.jsx("div",{className:"flex-1",children:Lt.jsx("input",{type:"text",name:"name",value:x.name,onChange:O,className:"p-2 border rounded w-full",required:!0})}),Lt.jsx("div",{className:"flex gap-1",children:P.map(V=>Lt.jsx("button",{onClick:()=>L(V.value),className:`w-6 h-6 rounded ${x.color===V.value?"ring-2 ring-blue-500":""}`,style:{backgroundColor:V.value},title:V.label},V.value))})]}),Lt.jsxs("div",{className:"flex items-start gap-2",children:[Lt.jsx("label",{className:"w-24",children:"Description:"}),Lt.jsx("textarea",{name:"description",value:x.description,onChange:O,className:"p-2 border rounded w-full",rows:4})]}),Lt.jsxs("div",{className:"flex items-center gap-2",children:[Lt.jsx("label",{className:"w-24",children:"Meaning:"}),Lt.jsx("div",{className:"flex gap-4",children:M.map(V=>Lt.jsxs("label",{className:"flex items-center gap-1",children:[Lt.jsx("input",{type:"radio",name:"meaning",value:V.value,checked:x.meaning===V.value,onChange:O}),V.label]},V.value))})]})]})})};function PD(){for(var s=arguments.length,o=new Array(s),h=0;h<s;h++)o[h]=arguments[h];return H.useMemo(()=>d=>{o.forEach(g=>g(d))},o)}const Xc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ja(s){const o=Object.prototype.toString.call(s);return o==="[object Window]"||o==="[object global]"}function Wp(s){return"nodeType"in s}function Fi(s){var o,h;return s?ja(s)?s:Wp(s)&&(o=(h=s.ownerDocument)==null?void 0:h.defaultView)!=null?o:window:window}function qp(s){const{Document:o}=Fi(s);return s instanceof o}function mh(s){return ja(s)?!1:s instanceof Fi(s).HTMLElement}function FS(s){return s instanceof Fi(s).SVGElement}function za(s){return s?ja(s)?s.document:Wp(s)?qp(s)?s:mh(s)||FS(s)?s.ownerDocument:document:document:document}const $s=Xc?H.useLayoutEffect:H.useEffect;function Jp(s){const o=H.useRef(s);return $s(()=>{o.current=s}),H.useCallback(function(){for(var h=arguments.length,d=new Array(h),g=0;g<h;g++)d[g]=arguments[g];return o.current==null?void 0:o.current(...d)},[])}function MD(){const s=H.useRef(null),o=H.useCallback((d,g)=>{s.current=setInterval(d,g)},[]),h=H.useCallback(()=>{s.current!==null&&(clearInterval(s.current),s.current=null)},[]);return[o,h]}function _l(s,o){o===void 0&&(o=[s]);const h=H.useRef(s);return $s(()=>{h.current!==s&&(h.current=s)},o),h}function ph(s,o){const h=H.useRef();return H.useMemo(()=>{const d=s(h.current);return h.current=d,d},[...o])}function ic(s){const o=Jp(s),h=H.useRef(null),d=H.useCallback(g=>{g!==h.current&&(o==null||o(g,h.current)),h.current=g},[]);return[h,d]}function Sm(s){const o=H.useRef();return H.useEffect(()=>{o.current=s},[s]),o.current}let Tf={};function yh(s,o){return H.useMemo(()=>{if(o)return o;const h=Tf[s]==null?0:Tf[s]+1;return Tf[s]=h,s+"-"+h},[s,o])}function RS(s){return function(o){for(var h=arguments.length,d=new Array(h>1?h-1:0),g=1;g<h;g++)d[g-1]=arguments[g];return d.reduce((x,S)=>{const P=Object.entries(S);for(const[M,O]of P){const L=x[M];L!=null&&(x[M]=L+s*O)}return x},{...o})}}const ya=RS(1),th=RS(-1);function ND(s){return"clientX"in s&&"clientY"in s}function Zp(s){if(!s)return!1;const{KeyboardEvent:o}=Fi(s.target);return o&&s instanceof o}function TD(s){if(!s)return!1;const{TouchEvent:o}=Fi(s.target);return o&&s instanceof o}function Cm(s){if(TD(s)){if(s.touches&&s.touches.length){const{clientX:o,clientY:h}=s.touches[0];return{x:o,y:h}}else if(s.changedTouches&&s.changedTouches.length){const{clientX:o,clientY:h}=s.changedTouches[0];return{x:o,y:h}}}return ND(s)?{x:s.clientX,y:s.clientY}:null}const eh=Object.freeze({Translate:{toString(s){if(!s)return;const{x:o,y:h}=s;return"translate3d("+(o?Math.round(o):0)+"px, "+(h?Math.round(h):0)+"px, 0)"}},Scale:{toString(s){if(!s)return;const{scaleX:o,scaleY:h}=s;return"scaleX("+o+") scaleY("+h+")"}},Transform:{toString(s){if(s)return[eh.Translate.toString(s),eh.Scale.toString(s)].join(" ")}},Transition:{toString(s){let{property:o,duration:h,easing:d}=s;return o+" "+h+"ms "+d}}}),s1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function AD(s){return s.matches(s1)?s:s.querySelector(s1)}const LD={display:"none"};function ED(s){let{id:o,value:h}=s;return zt.createElement("div",{id:o,style:LD},h)}function DD(s){let{id:o,announcement:h,ariaLiveType:d="assertive"}=s;const g={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return zt.createElement("div",{id:o,style:g,role:"status","aria-live":d,"aria-atomic":!0},h)}function OD(){const[s,o]=H.useState("");return{announce:H.useCallback(d=>{d!=null&&o(d)},[]),announcement:s}}const IS=H.createContext(null);function FD(s){const o=H.useContext(IS);H.useEffect(()=>{if(!o)throw new Error("useDndMonitor must be used within a children of <DndContext>");return o(s)},[s,o])}function RD(){const[s]=H.useState(()=>new Set),o=H.useCallback(d=>(s.add(d),()=>s.delete(d)),[s]);return[H.useCallback(d=>{let{type:g,event:x}=d;s.forEach(S=>{var P;return(P=S[g])==null?void 0:P.call(S,x)})},[s]),o]}const ID={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},BD={onDragStart(s){let{active:o}=s;return"Picked up draggable item "+o.id+"."},onDragOver(s){let{active:o,over:h}=s;return h?"Draggable item "+o.id+" was moved over droppable area "+h.id+".":"Draggable item "+o.id+" is no longer over a droppable area."},onDragEnd(s){let{active:o,over:h}=s;return h?"Draggable item "+o.id+" was dropped over droppable area "+h.id:"Draggable item "+o.id+" was dropped."},onDragCancel(s){let{active:o}=s;return"Dragging was cancelled. Draggable item "+o.id+" was dropped."}};function jD(s){let{announcements:o=BD,container:h,hiddenTextDescribedById:d,screenReaderInstructions:g=ID}=s;const{announce:x,announcement:S}=OD(),P=yh("DndLiveRegion"),[M,O]=H.useState(!1);if(H.useEffect(()=>{O(!0)},[]),FD(H.useMemo(()=>({onDragStart(j){let{active:V}=j;x(o.onDragStart({active:V}))},onDragMove(j){let{active:V,over:q}=j;o.onDragMove&&x(o.onDragMove({active:V,over:q}))},onDragOver(j){let{active:V,over:q}=j;x(o.onDragOver({active:V,over:q}))},onDragEnd(j){let{active:V,over:q}=j;x(o.onDragEnd({active:V,over:q}))},onDragCancel(j){let{active:V,over:q}=j;x(o.onDragCancel({active:V,over:q}))}}),[x,o])),!M)return null;const L=zt.createElement(zt.Fragment,null,zt.createElement(ED,{id:d,value:g.draggable}),zt.createElement(DD,{id:P,announcement:S}));return h?Zs.createPortal(L,h):L}var $n;(function(s){s.DragStart="dragStart",s.DragMove="dragMove",s.DragEnd="dragEnd",s.DragCancel="dragCancel",s.DragOver="dragOver",s.RegisterDroppable="registerDroppable",s.SetDroppableDisabled="setDroppableDisabled",s.UnregisterDroppable="unregisterDroppable"})($n||($n={}));function sc(){}function r1(s,o){return H.useMemo(()=>({sensor:s,options:o??{}}),[s,o])}function zD(){for(var s=arguments.length,o=new Array(s),h=0;h<s;h++)o[h]=arguments[h];return H.useMemo(()=>[...o].filter(d=>d!=null),[...o])}const Hs=Object.freeze({x:0,y:0});function BS(s,o){return Math.sqrt(Math.pow(s.x-o.x,2)+Math.pow(s.y-o.y,2))}function jS(s,o){let{data:{value:h}}=s,{data:{value:d}}=o;return h-d}function VD(s,o){let{data:{value:h}}=s,{data:{value:d}}=o;return d-h}function o1(s){let{left:o,top:h,height:d,width:g}=s;return[{x:o,y:h},{x:o+g,y:h},{x:o,y:h+d},{x:o+g,y:h+d}]}function zS(s,o){if(!s||s.length===0)return null;const[h]=s;return h[o]}function a1(s,o,h){return o===void 0&&(o=s.left),h===void 0&&(h=s.top),{x:o+s.width*.5,y:h+s.height*.5}}const $D=s=>{let{collisionRect:o,droppableRects:h,droppableContainers:d}=s;const g=a1(o,o.left,o.top),x=[];for(const S of d){const{id:P}=S,M=h.get(P);if(M){const O=BS(a1(M),g);x.push({id:P,data:{droppableContainer:S,value:O}})}}return x.sort(jS)},HD=s=>{let{collisionRect:o,droppableRects:h,droppableContainers:d}=s;const g=o1(o),x=[];for(const S of d){const{id:P}=S,M=h.get(P);if(M){const O=o1(M),L=g.reduce((V,q,J)=>V+BS(O[J],q),0),j=Number((L/4).toFixed(4));x.push({id:P,data:{droppableContainer:S,value:j}})}}return x.sort(jS)};function UD(s,o){const h=Math.max(o.top,s.top),d=Math.max(o.left,s.left),g=Math.min(o.left+o.width,s.left+s.width),x=Math.min(o.top+o.height,s.top+s.height),S=g-d,P=x-h;if(d<g&&h<x){const M=o.width*o.height,O=s.width*s.height,L=S*P,j=L/(M+O-L);return Number(j.toFixed(4))}return 0}const KD=s=>{let{collisionRect:o,droppableRects:h,droppableContainers:d}=s;const g=[];for(const x of d){const{id:S}=x,P=h.get(S);if(P){const M=UD(P,o);M>0&&g.push({id:S,data:{droppableContainer:x,value:M}})}}return g.sort(VD)};function GD(s,o,h){return{...s,scaleX:o&&h?o.width/h.width:1,scaleY:o&&h?o.height/h.height:1}}function VS(s,o){return s&&o?{x:s.left-o.left,y:s.top-o.top}:Hs}function XD(s){return function(h){for(var d=arguments.length,g=new Array(d>1?d-1:0),x=1;x<d;x++)g[x-1]=arguments[x];return g.reduce((S,P)=>({...S,top:S.top+s*P.y,bottom:S.bottom+s*P.y,left:S.left+s*P.x,right:S.right+s*P.x}),{...h})}}const YD=XD(1);function WD(s){if(s.startsWith("matrix3d(")){const o=s.slice(9,-1).split(/, /);return{x:+o[12],y:+o[13],scaleX:+o[0],scaleY:+o[5]}}else if(s.startsWith("matrix(")){const o=s.slice(7,-1).split(/, /);return{x:+o[4],y:+o[5],scaleX:+o[0],scaleY:+o[3]}}return null}function qD(s,o,h){const d=WD(o);if(!d)return s;const{scaleX:g,scaleY:x,x:S,y:P}=d,M=s.left-S-(1-g)*parseFloat(h),O=s.top-P-(1-x)*parseFloat(h.slice(h.indexOf(" ")+1)),L=g?s.width/g:s.width,j=x?s.height/x:s.height;return{width:L,height:j,top:O,right:M+L,bottom:O+j,left:M}}const JD={ignoreTransform:!1};function Va(s,o){o===void 0&&(o=JD);let h=s.getBoundingClientRect();if(o.ignoreTransform){const{transform:O,transformOrigin:L}=Fi(s).getComputedStyle(s);O&&(h=qD(h,O,L))}const{top:d,left:g,width:x,height:S,bottom:P,right:M}=h;return{top:d,left:g,width:x,height:S,bottom:P,right:M}}function l1(s){return Va(s,{ignoreTransform:!0})}function ZD(s){const o=s.innerWidth,h=s.innerHeight;return{top:0,left:0,right:o,bottom:h,width:o,height:h}}function QD(s,o){return o===void 0&&(o=Fi(s).getComputedStyle(s)),o.position==="fixed"}function _D(s,o){o===void 0&&(o=Fi(s).getComputedStyle(s));const h=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(g=>{const x=o[g];return typeof x=="string"?h.test(x):!1})}function Yc(s,o){const h=[];function d(g){if(o!=null&&h.length>=o||!g)return h;if(qp(g)&&g.scrollingElement!=null&&!h.includes(g.scrollingElement))return h.push(g.scrollingElement),h;if(!mh(g)||FS(g)||h.includes(g))return h;const x=Fi(s).getComputedStyle(g);return g!==s&&_D(g,x)&&h.push(g),QD(g,x)?h:d(g.parentNode)}return s?d(s):h}function $S(s){const[o]=Yc(s,1);return o??null}function Af(s){return!Xc||!s?null:ja(s)?s:Wp(s)?qp(s)||s===za(s).scrollingElement?window:mh(s)?s:null:null}function HS(s){return ja(s)?s.scrollX:s.scrollLeft}function US(s){return ja(s)?s.scrollY:s.scrollTop}function km(s){return{x:HS(s),y:US(s)}}var Qn;(function(s){s[s.Forward=1]="Forward",s[s.Backward=-1]="Backward"})(Qn||(Qn={}));function KS(s){return!Xc||!s?!1:s===document.scrollingElement}function GS(s){const o={x:0,y:0},h=KS(s)?{height:window.innerHeight,width:window.innerWidth}:{height:s.clientHeight,width:s.clientWidth},d={x:s.scrollWidth-h.width,y:s.scrollHeight-h.height},g=s.scrollTop<=o.y,x=s.scrollLeft<=o.x,S=s.scrollTop>=d.y,P=s.scrollLeft>=d.x;return{isTop:g,isLeft:x,isBottom:S,isRight:P,maxScroll:d,minScroll:o}}const tO={x:.2,y:.2};function eO(s,o,h,d,g){let{top:x,left:S,right:P,bottom:M}=h;d===void 0&&(d=10),g===void 0&&(g=tO);const{isTop:O,isBottom:L,isLeft:j,isRight:V}=GS(s),q={x:0,y:0},J={x:0,y:0},Y={height:o.height*g.y,width:o.width*g.x};return!O&&x<=o.top+Y.height?(q.y=Qn.Backward,J.y=d*Math.abs((o.top+Y.height-x)/Y.height)):!L&&M>=o.bottom-Y.height&&(q.y=Qn.Forward,J.y=d*Math.abs((o.bottom-Y.height-M)/Y.height)),!V&&P>=o.right-Y.width?(q.x=Qn.Forward,J.x=d*Math.abs((o.right-Y.width-P)/Y.width)):!j&&S<=o.left+Y.width&&(q.x=Qn.Backward,J.x=d*Math.abs((o.left+Y.width-S)/Y.width)),{direction:q,speed:J}}function nO(s){if(s===document.scrollingElement){const{innerWidth:x,innerHeight:S}=window;return{top:0,left:0,right:x,bottom:S,width:x,height:S}}const{top:o,left:h,right:d,bottom:g}=s.getBoundingClientRect();return{top:o,left:h,right:d,bottom:g,width:s.clientWidth,height:s.clientHeight}}function XS(s){return s.reduce((o,h)=>ya(o,km(h)),Hs)}function iO(s){return s.reduce((o,h)=>o+HS(h),0)}function sO(s){return s.reduce((o,h)=>o+US(h),0)}function rO(s,o){if(o===void 0&&(o=Va),!s)return;const{top:h,left:d,bottom:g,right:x}=o(s);$S(s)&&(g<=0||x<=0||h>=window.innerHeight||d>=window.innerWidth)&&s.scrollIntoView({block:"center",inline:"center"})}const oO=[["x",["left","right"],iO],["y",["top","bottom"],sO]];class Qp{constructor(o,h){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const d=Yc(h),g=XS(d);this.rect={...o},this.width=o.width,this.height=o.height;for(const[x,S,P]of oO)for(const M of S)Object.defineProperty(this,M,{get:()=>{const O=P(d),L=g[x]-O;return this.rect[M]+L},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cl{constructor(o){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(h=>{var d;return(d=this.target)==null?void 0:d.removeEventListener(...h)})},this.target=o}add(o,h,d){var g;(g=this.target)==null||g.addEventListener(o,h,d),this.listeners.push([o,h,d])}}function aO(s){const{EventTarget:o}=Fi(s);return s instanceof o?s:za(s)}function Lf(s,o){const h=Math.abs(s.x),d=Math.abs(s.y);return typeof o=="number"?Math.sqrt(h**2+d**2)>o:"x"in o&&"y"in o?h>o.x&&d>o.y:"x"in o?h>o.x:"y"in o?d>o.y:!1}var us;(function(s){s.Click="click",s.DragStart="dragstart",s.Keydown="keydown",s.ContextMenu="contextmenu",s.Resize="resize",s.SelectionChange="selectionchange",s.VisibilityChange="visibilitychange"})(us||(us={}));function h1(s){s.preventDefault()}function lO(s){s.stopPropagation()}var Ee;(function(s){s.Space="Space",s.Down="ArrowDown",s.Right="ArrowRight",s.Left="ArrowLeft",s.Up="ArrowUp",s.Esc="Escape",s.Enter="Enter"})(Ee||(Ee={}));const YS={start:[Ee.Space,Ee.Enter],cancel:[Ee.Esc],end:[Ee.Space,Ee.Enter]},hO=(s,o)=>{let{currentCoordinates:h}=o;switch(s.code){case Ee.Right:return{...h,x:h.x+25};case Ee.Left:return{...h,x:h.x-25};case Ee.Down:return{...h,y:h.y+25};case Ee.Up:return{...h,y:h.y-25}}};class _p{constructor(o){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=o;const{event:{target:h}}=o;this.props=o,this.listeners=new Cl(za(h)),this.windowListeners=new Cl(Fi(h)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(us.Resize,this.handleCancel),this.windowListeners.add(us.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(us.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:o,onStart:h}=this.props,d=o.node.current;d&&rO(d),h(Hs)}handleKeyDown(o){if(Zp(o)){const{active:h,context:d,options:g}=this.props,{keyboardCodes:x=YS,coordinateGetter:S=hO,scrollBehavior:P="smooth"}=g,{code:M}=o;if(x.end.includes(M)){this.handleEnd(o);return}if(x.cancel.includes(M)){this.handleCancel(o);return}const{collisionRect:O}=d.current,L=O?{x:O.left,y:O.top}:Hs;this.referenceCoordinates||(this.referenceCoordinates=L);const j=S(o,{active:h,context:d.current,currentCoordinates:L});if(j){const V=th(j,L),q={x:0,y:0},{scrollableAncestors:J}=d.current;for(const Y of J){const W=o.code,{isTop:T,isRight:B,isLeft:I,isBottom:tt,maxScroll:z,minScroll:nt}=GS(Y),R=nO(Y),ot={x:Math.min(W===Ee.Right?R.right-R.width/2:R.right,Math.max(W===Ee.Right?R.left:R.left+R.width/2,j.x)),y:Math.min(W===Ee.Down?R.bottom-R.height/2:R.bottom,Math.max(W===Ee.Down?R.top:R.top+R.height/2,j.y))},lt=W===Ee.Right&&!B||W===Ee.Left&&!I,rt=W===Ee.Down&&!tt||W===Ee.Up&&!T;if(lt&&ot.x!==j.x){const dt=Y.scrollLeft+V.x,Pt=W===Ee.Right&&dt<=z.x||W===Ee.Left&&dt>=nt.x;if(Pt&&!V.y){Y.scrollTo({left:dt,behavior:P});return}Pt?q.x=Y.scrollLeft-dt:q.x=W===Ee.Right?Y.scrollLeft-z.x:Y.scrollLeft-nt.x,q.x&&Y.scrollBy({left:-q.x,behavior:P});break}else if(rt&&ot.y!==j.y){const dt=Y.scrollTop+V.y,Pt=W===Ee.Down&&dt<=z.y||W===Ee.Up&&dt>=nt.y;if(Pt&&!V.x){Y.scrollTo({top:dt,behavior:P});return}Pt?q.y=Y.scrollTop-dt:q.y=W===Ee.Down?Y.scrollTop-z.y:Y.scrollTop-nt.y,q.y&&Y.scrollBy({top:-q.y,behavior:P});break}}this.handleMove(o,ya(th(j,this.referenceCoordinates),q))}}}handleMove(o,h){const{onMove:d}=this.props;o.preventDefault(),d(h)}handleEnd(o){const{onEnd:h}=this.props;o.preventDefault(),this.detach(),h()}handleCancel(o){const{onCancel:h}=this.props;o.preventDefault(),this.detach(),h()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}_p.activators=[{eventName:"onKeyDown",handler:(s,o,h)=>{let{keyboardCodes:d=YS,onActivation:g}=o,{active:x}=h;const{code:S}=s.nativeEvent;if(d.start.includes(S)){const P=x.activatorNode.current;return P&&s.target!==P?!1:(s.preventDefault(),g==null||g({event:s.nativeEvent}),!0)}return!1}}];function u1(s){return!!(s&&"distance"in s)}function c1(s){return!!(s&&"delay"in s)}class t0{constructor(o,h,d){var g;d===void 0&&(d=aO(o.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=o,this.events=h;const{event:x}=o,{target:S}=x;this.props=o,this.events=h,this.document=za(S),this.documentListeners=new Cl(this.document),this.listeners=new Cl(d),this.windowListeners=new Cl(Fi(S)),this.initialCoordinates=(g=Cm(x))!=null?g:Hs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:o,props:{options:{activationConstraint:h,bypassActivationConstraint:d}}}=this;if(this.listeners.add(o.move.name,this.handleMove,{passive:!1}),this.listeners.add(o.end.name,this.handleEnd),this.windowListeners.add(us.Resize,this.handleCancel),this.windowListeners.add(us.DragStart,h1),this.windowListeners.add(us.VisibilityChange,this.handleCancel),this.windowListeners.add(us.ContextMenu,h1),this.documentListeners.add(us.Keydown,this.handleKeydown),h){if(d!=null&&d({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(c1(h)){this.timeoutId=setTimeout(this.handleStart,h.delay);return}if(u1(h))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:o}=this,{onStart:h}=this.props;o&&(this.activated=!0,this.documentListeners.add(us.Click,lO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(us.SelectionChange,this.removeTextSelection),h(o))}handleMove(o){var h;const{activated:d,initialCoordinates:g,props:x}=this,{onMove:S,options:{activationConstraint:P}}=x;if(!g)return;const M=(h=Cm(o))!=null?h:Hs,O=th(g,M);if(!d&&P){if(u1(P)){if(P.tolerance!=null&&Lf(O,P.tolerance))return this.handleCancel();if(Lf(O,P.distance))return this.handleStart()}return c1(P)&&Lf(O,P.tolerance)?this.handleCancel():void 0}o.cancelable&&o.preventDefault(),S(M)}handleEnd(){const{onEnd:o}=this.props;this.detach(),o()}handleCancel(){const{onCancel:o}=this.props;this.detach(),o()}handleKeydown(o){o.code===Ee.Esc&&this.handleCancel()}removeTextSelection(){var o;(o=this.document.getSelection())==null||o.removeAllRanges()}}const uO={move:{name:"pointermove"},end:{name:"pointerup"}};class e0 extends t0{constructor(o){const{event:h}=o,d=za(h.target);super(o,uO,d)}}e0.activators=[{eventName:"onPointerDown",handler:(s,o)=>{let{nativeEvent:h}=s,{onActivation:d}=o;return!h.isPrimary||h.button!==0?!1:(d==null||d({event:h}),!0)}}];const cO={move:{name:"mousemove"},end:{name:"mouseup"}};var Pm;(function(s){s[s.RightClick=2]="RightClick"})(Pm||(Pm={}));class dO extends t0{constructor(o){super(o,cO,za(o.event.target))}}dO.activators=[{eventName:"onMouseDown",handler:(s,o)=>{let{nativeEvent:h}=s,{onActivation:d}=o;return h.button===Pm.RightClick?!1:(d==null||d({event:h}),!0)}}];const Ef={move:{name:"touchmove"},end:{name:"touchend"}};class fO extends t0{constructor(o){super(o,Ef)}static setup(){return window.addEventListener(Ef.move.name,o,{capture:!1,passive:!1}),function(){window.removeEventListener(Ef.move.name,o)};function o(){}}}fO.activators=[{eventName:"onTouchStart",handler:(s,o)=>{let{nativeEvent:h}=s,{onActivation:d}=o;const{touches:g}=h;return g.length>1?!1:(d==null||d({event:h}),!0)}}];var kl;(function(s){s[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect"})(kl||(kl={}));var rc;(function(s){s[s.TreeOrder=0]="TreeOrder",s[s.ReversedTreeOrder=1]="ReversedTreeOrder"})(rc||(rc={}));function gO(s){let{acceleration:o,activator:h=kl.Pointer,canScroll:d,draggingRect:g,enabled:x,interval:S=5,order:P=rc.TreeOrder,pointerCoordinates:M,scrollableAncestors:O,scrollableAncestorRects:L,delta:j,threshold:V}=s;const q=pO({delta:j,disabled:!x}),[J,Y]=MD(),W=H.useRef({x:0,y:0}),T=H.useRef({x:0,y:0}),B=H.useMemo(()=>{switch(h){case kl.Pointer:return M?{top:M.y,bottom:M.y,left:M.x,right:M.x}:null;case kl.DraggableRect:return g}},[h,g,M]),I=H.useRef(null),tt=H.useCallback(()=>{const nt=I.current;if(!nt)return;const R=W.current.x*T.current.x,ot=W.current.y*T.current.y;nt.scrollBy(R,ot)},[]),z=H.useMemo(()=>P===rc.TreeOrder?[...O].reverse():O,[P,O]);H.useEffect(()=>{if(!x||!O.length||!B){Y();return}for(const nt of z){if((d==null?void 0:d(nt))===!1)continue;const R=O.indexOf(nt),ot=L[R];if(!ot)continue;const{direction:lt,speed:rt}=eO(nt,ot,B,o,V);for(const dt of["x","y"])q[dt][lt[dt]]||(rt[dt]=0,lt[dt]=0);if(rt.x>0||rt.y>0){Y(),I.current=nt,J(tt,S),W.current=rt,T.current=lt;return}}W.current={x:0,y:0},T.current={x:0,y:0},Y()},[o,tt,d,Y,x,S,JSON.stringify(B),JSON.stringify(q),J,O,z,L,JSON.stringify(V)])}const mO={x:{[Qn.Backward]:!1,[Qn.Forward]:!1},y:{[Qn.Backward]:!1,[Qn.Forward]:!1}};function pO(s){let{delta:o,disabled:h}=s;const d=Sm(o);return ph(g=>{if(h||!d||!g)return mO;const x={x:Math.sign(o.x-d.x),y:Math.sign(o.y-d.y)};return{x:{[Qn.Backward]:g.x[Qn.Backward]||x.x===-1,[Qn.Forward]:g.x[Qn.Forward]||x.x===1},y:{[Qn.Backward]:g.y[Qn.Backward]||x.y===-1,[Qn.Forward]:g.y[Qn.Forward]||x.y===1}}},[h,o,d])}function yO(s,o){const h=o!==null?s.get(o):void 0,d=h?h.node.current:null;return ph(g=>{var x;return o===null?null:(x=d??g)!=null?x:null},[d,o])}function vO(s,o){return H.useMemo(()=>s.reduce((h,d)=>{const{sensor:g}=d,x=g.activators.map(S=>({eventName:S.eventName,handler:o(S.handler,d)}));return[...h,...x]},[]),[s,o])}var nh;(function(s){s[s.Always=0]="Always",s[s.BeforeDragging=1]="BeforeDragging",s[s.WhileDragging=2]="WhileDragging"})(nh||(nh={}));var Mm;(function(s){s.Optimized="optimized"})(Mm||(Mm={}));const d1=new Map;function xO(s,o){let{dragging:h,dependencies:d,config:g}=o;const[x,S]=H.useState(null),{frequency:P,measure:M,strategy:O}=g,L=H.useRef(s),j=W(),V=_l(j),q=H.useCallback(function(T){T===void 0&&(T=[]),!V.current&&S(B=>B===null?T:B.concat(T.filter(I=>!B.includes(I))))},[V]),J=H.useRef(null),Y=ph(T=>{if(j&&!h)return d1;if(!T||T===d1||L.current!==s||x!=null){const B=new Map;for(let I of s){if(!I)continue;if(x&&x.length>0&&!x.includes(I.id)&&I.rect.current){B.set(I.id,I.rect.current);continue}const tt=I.node.current,z=tt?new Qp(M(tt),tt):null;I.rect.current=z,z&&B.set(I.id,z)}return B}return T},[s,x,h,j,M]);return H.useEffect(()=>{L.current=s},[s]),H.useEffect(()=>{j||q()},[h,j]),H.useEffect(()=>{x&&x.length>0&&S(null)},[JSON.stringify(x)]),H.useEffect(()=>{j||typeof P!="number"||J.current!==null||(J.current=setTimeout(()=>{q(),J.current=null},P))},[P,j,q,...d]),{droppableRects:Y,measureDroppableContainers:q,measuringScheduled:x!=null};function W(){switch(O){case nh.Always:return!1;case nh.BeforeDragging:return h;default:return!h}}}function WS(s,o){return ph(h=>s?h||(typeof o=="function"?o(s):s):null,[o,s])}function bO(s,o){return WS(s,o)}function wO(s){let{callback:o,disabled:h}=s;const d=Jp(o),g=H.useMemo(()=>{if(h||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:x}=window;return new x(d)},[d,h]);return H.useEffect(()=>()=>g==null?void 0:g.disconnect(),[g]),g}function Wc(s){let{callback:o,disabled:h}=s;const d=Jp(o),g=H.useMemo(()=>{if(h||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:x}=window;return new x(d)},[h]);return H.useEffect(()=>()=>g==null?void 0:g.disconnect(),[g]),g}function SO(s){return new Qp(Va(s),s)}function f1(s,o,h){o===void 0&&(o=SO);const[d,g]=H.useReducer(P,null),x=wO({callback(M){if(s)for(const O of M){const{type:L,target:j}=O;if(L==="childList"&&j instanceof HTMLElement&&j.contains(s)){g();break}}}}),S=Wc({callback:g});return $s(()=>{g(),s?(S==null||S.observe(s),x==null||x.observe(document.body,{childList:!0,subtree:!0})):(S==null||S.disconnect(),x==null||x.disconnect())},[s]),d;function P(M){if(!s)return null;if(s.isConnected===!1){var O;return(O=M??h)!=null?O:null}const L=o(s);return JSON.stringify(M)===JSON.stringify(L)?M:L}}function CO(s){const o=WS(s);return VS(s,o)}const g1=[];function kO(s){const o=H.useRef(s),h=ph(d=>s?d&&d!==g1&&s&&o.current&&s.parentNode===o.current.parentNode?d:Yc(s):g1,[s]);return H.useEffect(()=>{o.current=s},[s]),h}function PO(s){const[o,h]=H.useState(null),d=H.useRef(s),g=H.useCallback(x=>{const S=Af(x.target);S&&h(P=>P?(P.set(S,km(S)),new Map(P)):null)},[]);return H.useEffect(()=>{const x=d.current;if(s!==x){S(x);const P=s.map(M=>{const O=Af(M);return O?(O.addEventListener("scroll",g,{passive:!0}),[O,km(O)]):null}).filter(M=>M!=null);h(P.length?new Map(P):null),d.current=s}return()=>{S(s),S(x)};function S(P){P.forEach(M=>{const O=Af(M);O==null||O.removeEventListener("scroll",g)})}},[g,s]),H.useMemo(()=>s.length?o?Array.from(o.values()).reduce((x,S)=>ya(x,S),Hs):XS(s):Hs,[s,o])}function m1(s,o){o===void 0&&(o=[]);const h=H.useRef(null);return H.useEffect(()=>{h.current=null},o),H.useEffect(()=>{const d=s!==Hs;d&&!h.current&&(h.current=s),!d&&h.current&&(h.current=null)},[s]),h.current?th(s,h.current):Hs}function MO(s){H.useEffect(()=>{if(!Xc)return;const o=s.map(h=>{let{sensor:d}=h;return d.setup==null?void 0:d.setup()});return()=>{for(const h of o)h==null||h()}},s.map(o=>{let{sensor:h}=o;return h}))}function NO(s,o){return H.useMemo(()=>s.reduce((h,d)=>{let{eventName:g,handler:x}=d;return h[g]=S=>{x(S,o)},h},{}),[s,o])}function qS(s){return H.useMemo(()=>s?ZD(s):null,[s])}const Df=[];function TO(s,o){o===void 0&&(o=Va);const[h]=s,d=qS(h?Fi(h):null),[g,x]=H.useReducer(P,Df),S=Wc({callback:x});return s.length>0&&g===Df&&x(),$s(()=>{s.length?s.forEach(M=>S==null?void 0:S.observe(M)):(S==null||S.disconnect(),x())},[s]),g;function P(){return s.length?s.map(M=>KS(M)?d:new Qp(o(M),M)):Df}}function AO(s){if(!s)return null;if(s.children.length>1)return s;const o=s.children[0];return mh(o)?o:s}function LO(s){let{measure:o}=s;const[h,d]=H.useState(null),g=H.useCallback(O=>{for(const{target:L}of O)if(mh(L)){d(j=>{const V=o(L);return j?{...j,width:V.width,height:V.height}:V});break}},[o]),x=Wc({callback:g}),S=H.useCallback(O=>{const L=AO(O);x==null||x.disconnect(),L&&(x==null||x.observe(L)),d(L?o(L):null)},[o,x]),[P,M]=ic(S);return H.useMemo(()=>({nodeRef:P,rect:h,setRef:M}),[h,P,M])}const EO=[{sensor:e0,options:{}},{sensor:_p,options:{}}],DO={current:{}},Su={draggable:{measure:l1},droppable:{measure:l1,strategy:nh.WhileDragging,frequency:Mm.Optimized},dragOverlay:{measure:Va}};class Pl extends Map{get(o){var h;return o!=null&&(h=super.get(o))!=null?h:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(o=>{let{disabled:h}=o;return!h})}getNodeFor(o){var h,d;return(h=(d=this.get(o))==null?void 0:d.node.current)!=null?h:void 0}}const OO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Pl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:sc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Su,measureDroppableContainers:sc,windowRect:null,measuringScheduled:!1},FO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:sc,draggableNodes:new Map,over:null,measureDroppableContainers:sc},qc=H.createContext(FO),JS=H.createContext(OO);function RO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Pl}}}function IO(s,o){switch(o.type){case $n.DragStart:return{...s,draggable:{...s.draggable,initialCoordinates:o.initialCoordinates,active:o.active}};case $n.DragMove:return s.draggable.active?{...s,draggable:{...s.draggable,translate:{x:o.coordinates.x-s.draggable.initialCoordinates.x,y:o.coordinates.y-s.draggable.initialCoordinates.y}}}:s;case $n.DragEnd:case $n.DragCancel:return{...s,draggable:{...s.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case $n.RegisterDroppable:{const{element:h}=o,{id:d}=h,g=new Pl(s.droppable.containers);return g.set(d,h),{...s,droppable:{...s.droppable,containers:g}}}case $n.SetDroppableDisabled:{const{id:h,key:d,disabled:g}=o,x=s.droppable.containers.get(h);if(!x||d!==x.key)return s;const S=new Pl(s.droppable.containers);return S.set(h,{...x,disabled:g}),{...s,droppable:{...s.droppable,containers:S}}}case $n.UnregisterDroppable:{const{id:h,key:d}=o,g=s.droppable.containers.get(h);if(!g||d!==g.key)return s;const x=new Pl(s.droppable.containers);return x.delete(h),{...s,droppable:{...s.droppable,containers:x}}}default:return s}}function BO(s){let{disabled:o}=s;const{active:h,activatorEvent:d,draggableNodes:g}=H.useContext(qc),x=Sm(d),S=Sm(h==null?void 0:h.id);return H.useEffect(()=>{if(!o&&!d&&x&&S!=null){if(!Zp(x)||document.activeElement===x.target)return;const P=g.get(S);if(!P)return;const{activatorNode:M,node:O}=P;if(!M.current&&!O.current)return;requestAnimationFrame(()=>{for(const L of[M.current,O.current]){if(!L)continue;const j=AD(L);if(j){j.focus();break}}})}},[d,o,g,S,x]),null}function jO(s,o){let{transform:h,...d}=o;return s!=null&&s.length?s.reduce((g,x)=>x({transform:g,...d}),h):h}function zO(s){return H.useMemo(()=>({draggable:{...Su.draggable,...s==null?void 0:s.draggable},droppable:{...Su.droppable,...s==null?void 0:s.droppable},dragOverlay:{...Su.dragOverlay,...s==null?void 0:s.dragOverlay}}),[s==null?void 0:s.draggable,s==null?void 0:s.droppable,s==null?void 0:s.dragOverlay])}function VO(s){let{activeNode:o,measure:h,initialRect:d,config:g=!0}=s;const x=H.useRef(!1),{x:S,y:P}=typeof g=="boolean"?{x:g,y:g}:g;$s(()=>{if(!S&&!P||!o){x.current=!1;return}if(x.current||!d)return;const O=o==null?void 0:o.node.current;if(!O||O.isConnected===!1)return;const L=h(O),j=VS(L,d);if(S||(j.x=0),P||(j.y=0),x.current=!0,Math.abs(j.x)>0||Math.abs(j.y)>0){const V=$S(O);V&&V.scrollBy({top:j.y,left:j.x})}},[o,S,P,d,h])}const ZS=H.createContext({...Hs,scaleX:1,scaleY:1});var Dr;(function(s){s[s.Uninitialized=0]="Uninitialized",s[s.Initializing=1]="Initializing",s[s.Initialized=2]="Initialized"})(Dr||(Dr={}));const $O=H.memo(function(o){var h,d,g,x;let{id:S,accessibility:P,autoScroll:M=!0,children:O,sensors:L=EO,collisionDetection:j=KD,measuring:V,modifiers:q,...J}=o;const Y=H.useReducer(IO,void 0,RO),[W,T]=Y,[B,I]=RD(),[tt,z]=H.useState(Dr.Uninitialized),nt=tt===Dr.Initialized,{draggable:{active:R,nodes:ot,translate:lt},droppable:{containers:rt}}=W,dt=R?ot.get(R):null,Pt=H.useRef({initial:null,translated:null}),ct=H.useMemo(()=>{var xn;return R!=null?{id:R,data:(xn=dt==null?void 0:dt.data)!=null?xn:DO,rect:Pt}:null},[R,dt]),Et=H.useRef(null),[Zt,wt]=H.useState(null),[ft,ht]=H.useState(null),gt=_l(J,Object.values(J)),St=yh("DndDescribedBy",S),Ct=H.useMemo(()=>rt.getEnabled(),[rt]),Bt=zO(V),{droppableRects:Ht,measureDroppableContainers:Ut,measuringScheduled:ge}=xO(Ct,{dragging:nt,dependencies:[lt.x,lt.y],config:Bt.droppable}),ae=yO(ot,R),me=H.useMemo(()=>ft?Cm(ft):null,[ft]),je=wr(),Fe=bO(ae,Bt.draggable.measure);VO({activeNode:R?ot.get(R):null,config:je.layoutShiftCompensation,initialRect:Fe,measure:Bt.draggable.measure});const pe=f1(ae,Bt.draggable.measure,Fe),Mn=f1(ae?ae.parentElement:null),Ve=H.useRef({activatorEvent:null,active:null,activeNode:ae,collisionRect:null,collisions:null,droppableRects:Ht,draggableNodes:ot,draggingNode:null,draggingNodeRect:null,droppableContainers:rt,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Bn=rt.getNodeFor((h=Ve.current.over)==null?void 0:h.id),Ze=LO({measure:Bt.dragOverlay.measure}),Le=(d=Ze.nodeRef.current)!=null?d:ae,Qe=nt?(g=Ze.rect)!=null?g:pe:null,xs=!!(Ze.nodeRef.current&&Ze.rect),Dn=CO(xs?null:pe),nn=qS(Le?Fi(Le):null),De=kO(nt?Bn??ae:null),$e=TO(De),vn=jO(q,{transform:{x:lt.x-Dn.x,y:lt.y-Dn.y,scaleX:1,scaleY:1},activatorEvent:ft,active:ct,activeNodeRect:pe,containerNodeRect:Mn,draggingNodeRect:Qe,over:Ve.current.over,overlayNodeRect:Ze.rect,scrollableAncestors:De,scrollableAncestorRects:$e,windowRect:nn}),li=me?ya(me,lt):null,ti=PO(De),nr=m1(ti),ns=m1(ti,[pe]),ei=ya(vn,nr),Ri=Qe?YD(Qe,vn):null,Ii=ct&&Ri?j({active:ct,collisionRect:Ri,droppableRects:Ht,droppableContainers:Ct,pointerCoordinates:li}):null,Pi=zS(Ii,"id"),[we,Gn]=H.useState(null),Us=xs?vn:ya(vn,ns),Do=GD(Us,(x=we==null?void 0:we.rect)!=null?x:null,pe),no=H.useCallback((xn,ln)=>{let{sensor:Nn,options:_e}=ln;if(Et.current==null)return;const On=ot.get(Et.current);if(!On)return;const bn=xn.nativeEvent,Fn=new Nn({active:Et.current,activeNode:On,event:bn,options:_e,context:Ve,onStart(Me){const Bi=Et.current;if(Bi==null)return;const ji=ot.get(Bi);if(!ji)return;const{onDragStart:ze}=gt.current,Pe={active:{id:Bi,data:ji.data,rect:Pt}};Zs.unstable_batchedUpdates(()=>{ze==null||ze(Pe),z(Dr.Initializing),T({type:$n.DragStart,initialCoordinates:Me,active:Bi}),B({type:"onDragStart",event:Pe})})},onMove(Me){T({type:$n.DragMove,coordinates:Me})},onEnd:Re($n.DragEnd),onCancel:Re($n.DragCancel)});Zs.unstable_batchedUpdates(()=>{wt(Fn),ht(xn.nativeEvent)});function Re(Me){return async function(){const{active:ji,collisions:ze,over:Pe,scrollAdjustedTranslate:wn}=Ve.current;let Sn=null;if(ji&&wn){const{cancelDrop:Xn}=gt.current;Sn={activatorEvent:bn,active:ji,collisions:ze,delta:wn,over:Pe},Me===$n.DragEnd&&typeof Xn=="function"&&await Promise.resolve(Xn(Sn))&&(Me=$n.DragCancel)}Et.current=null,Zs.unstable_batchedUpdates(()=>{T({type:Me}),z(Dr.Uninitialized),Gn(null),wt(null),ht(null);const Xn=Me===$n.DragEnd?"onDragEnd":"onDragCancel";if(Sn){const Sr=gt.current[Xn];Sr==null||Sr(Sn),B({type:Xn,event:Sn})}})}}},[ot]),le=H.useCallback((xn,ln)=>(Nn,_e)=>{const On=Nn.nativeEvent,bn=ot.get(_e);if(Et.current!==null||!bn||On.dndKit||On.defaultPrevented)return;const Fn={active:bn};xn(Nn,ln.options,Fn)===!0&&(On.dndKit={capturedBy:ln.sensor},Et.current=_e,no(Nn,ln))},[ot,no]),Oo=vO(L,le);MO(L),$s(()=>{pe&&tt===Dr.Initializing&&z(Dr.Initialized)},[pe,tt]),H.useEffect(()=>{const{onDragMove:xn}=gt.current,{active:ln,activatorEvent:Nn,collisions:_e,over:On}=Ve.current;if(!ln||!Nn)return;const bn={active:ln,activatorEvent:Nn,collisions:_e,delta:{x:ei.x,y:ei.y},over:On};Zs.unstable_batchedUpdates(()=>{xn==null||xn(bn),B({type:"onDragMove",event:bn})})},[ei.x,ei.y]),H.useEffect(()=>{const{active:xn,activatorEvent:ln,collisions:Nn,droppableContainers:_e,scrollAdjustedTranslate:On}=Ve.current;if(!xn||Et.current==null||!ln||!On)return;const{onDragOver:bn}=gt.current,Fn=_e.get(Pi),Re=Fn&&Fn.rect.current?{id:Fn.id,rect:Fn.rect.current,data:Fn.data,disabled:Fn.disabled}:null,Me={active:xn,activatorEvent:ln,collisions:Nn,delta:{x:On.x,y:On.y},over:Re};Zs.unstable_batchedUpdates(()=>{Gn(Re),bn==null||bn(Me),B({type:"onDragOver",event:Me})})},[Pi]),$s(()=>{Ve.current={activatorEvent:ft,active:ct,activeNode:ae,collisionRect:Ri,collisions:Ii,droppableRects:Ht,draggableNodes:ot,draggingNode:Le,draggingNodeRect:Qe,droppableContainers:rt,over:we,scrollableAncestors:De,scrollAdjustedTranslate:ei},Pt.current={initial:Qe,translated:Ri}},[ct,ae,Ii,Ri,ot,Le,Qe,Ht,rt,we,De,ei]),gO({...je,delta:lt,draggingRect:Ri,pointerCoordinates:li,scrollableAncestors:De,scrollableAncestorRects:$e});const bs=H.useMemo(()=>({active:ct,activeNode:ae,activeNodeRect:pe,activatorEvent:ft,collisions:Ii,containerNodeRect:Mn,dragOverlay:Ze,draggableNodes:ot,droppableContainers:rt,droppableRects:Ht,over:we,measureDroppableContainers:Ut,scrollableAncestors:De,scrollableAncestorRects:$e,measuringConfiguration:Bt,measuringScheduled:ge,windowRect:nn}),[ct,ae,pe,ft,Ii,Mn,Ze,ot,rt,Ht,we,Ut,De,$e,Bt,ge,nn]),$a=H.useMemo(()=>({activatorEvent:ft,activators:Oo,active:ct,activeNodeRect:pe,ariaDescribedById:{draggable:St},dispatch:T,draggableNodes:ot,over:we,measureDroppableContainers:Ut}),[ft,Oo,ct,pe,T,St,ot,we,Ut]);return zt.createElement(IS.Provider,{value:I},zt.createElement(qc.Provider,{value:$a},zt.createElement(JS.Provider,{value:bs},zt.createElement(ZS.Provider,{value:Do},O)),zt.createElement(BO,{disabled:(P==null?void 0:P.restoreFocus)===!1})),zt.createElement(jD,{...P,hiddenTextDescribedById:St}));function wr(){const xn=(Zt==null?void 0:Zt.autoScrollEnabled)===!1,ln=typeof M=="object"?M.enabled===!1:M===!1,Nn=nt&&!xn&&!ln;return typeof M=="object"?{...M,enabled:Nn}:{enabled:Nn}}}),HO=H.createContext(null),p1="button",UO="Droppable";function KO(s){let{id:o,data:h,disabled:d=!1,attributes:g}=s;const x=yh(UO),{activators:S,activatorEvent:P,active:M,activeNodeRect:O,ariaDescribedById:L,draggableNodes:j,over:V}=H.useContext(qc),{role:q=p1,roleDescription:J="draggable",tabIndex:Y=0}=g??{},W=(M==null?void 0:M.id)===o,T=H.useContext(W?ZS:HO),[B,I]=ic(),[tt,z]=ic(),nt=NO(S,o),R=_l(h);$s(()=>(j.set(o,{id:o,key:x,node:B,activatorNode:tt,data:R}),()=>{const lt=j.get(o);lt&&lt.key===x&&j.delete(o)}),[j,o]);const ot=H.useMemo(()=>({role:q,tabIndex:Y,"aria-disabled":d,"aria-pressed":W&&q===p1?!0:void 0,"aria-roledescription":J,"aria-describedby":L.draggable}),[d,q,Y,W,J,L.draggable]);return{active:M,activatorEvent:P,activeNodeRect:O,attributes:ot,isDragging:W,listeners:d?void 0:nt,node:B,over:V,setNodeRef:I,setActivatorNodeRef:z,transform:T}}function GO(){return H.useContext(JS)}const XO="Droppable",YO={timeout:25};function WO(s){let{data:o,disabled:h=!1,id:d,resizeObserverConfig:g}=s;const x=yh(XO),{active:S,dispatch:P,over:M,measureDroppableContainers:O}=H.useContext(qc),L=H.useRef({disabled:h}),j=H.useRef(!1),V=H.useRef(null),q=H.useRef(null),{disabled:J,updateMeasurementsFor:Y,timeout:W}={...YO,...g},T=_l(Y??d),B=H.useCallback(()=>{if(!j.current){j.current=!0;return}q.current!=null&&clearTimeout(q.current),q.current=setTimeout(()=>{O(Array.isArray(T.current)?T.current:[T.current]),q.current=null},W)},[W]),I=Wc({callback:B,disabled:J||!S}),tt=H.useCallback((ot,lt)=>{I&&(lt&&(I.unobserve(lt),j.current=!1),ot&&I.observe(ot))},[I]),[z,nt]=ic(tt),R=_l(o);return H.useEffect(()=>{!I||!z.current||(I.disconnect(),j.current=!1,I.observe(z.current))},[z,I]),$s(()=>(P({type:$n.RegisterDroppable,element:{id:d,key:x,disabled:h,node:z,rect:V,data:R}}),()=>P({type:$n.UnregisterDroppable,key:x,id:d})),[d]),H.useEffect(()=>{h!==L.current.disabled&&(P({type:$n.SetDroppableDisabled,id:d,key:x,disabled:h}),L.current.disabled=h)},[d,x,h,P]),{active:S,rect:V,isOver:(M==null?void 0:M.id)===d,node:z,over:M,setNodeRef:nt}}function n0(s,o,h){const d=s.slice();return d.splice(h<0?d.length+h:h,0,d.splice(o,1)[0]),d}function qO(s,o){return s.reduce((h,d,g)=>{const x=o.get(d);return x&&(h[g]=x),h},Array(s.length))}function _h(s){return s!==null&&s>=0}function JO(s,o){if(s===o)return!0;if(s.length!==o.length)return!1;for(let h=0;h<s.length;h++)if(s[h]!==o[h])return!1;return!0}function ZO(s){return typeof s=="boolean"?{draggable:s,droppable:s}:s}const QS=s=>{let{rects:o,activeIndex:h,overIndex:d,index:g}=s;const x=n0(o,d,h),S=o[g],P=x[g];return!P||!S?null:{x:P.left-S.left,y:P.top-S.top,scaleX:P.width/S.width,scaleY:P.height/S.height}},tu={scaleX:1,scaleY:1},QO=s=>{var o;let{activeIndex:h,activeNodeRect:d,index:g,rects:x,overIndex:S}=s;const P=(o=x[h])!=null?o:d;if(!P)return null;if(g===h){const O=x[S];return O?{x:0,y:h<S?O.top+O.height-(P.top+P.height):O.top-P.top,...tu}:null}const M=_O(x,g,h);return g>h&&g<=S?{x:0,y:-P.height-M,...tu}:g<h&&g>=S?{x:0,y:P.height+M,...tu}:{x:0,y:0,...tu}};function _O(s,o,h){const d=s[o],g=s[o-1],x=s[o+1];return d?h<o?g?d.top-(g.top+g.height):x?x.top-(d.top+d.height):0:x?x.top-(d.top+d.height):g?d.top-(g.top+g.height):0:0}const _S="Sortable",tC=zt.createContext({activeIndex:-1,containerId:_S,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:QS,disabled:{draggable:!1,droppable:!1}});function tF(s){let{children:o,id:h,items:d,strategy:g=QS,disabled:x=!1}=s;const{active:S,dragOverlay:P,droppableRects:M,over:O,measureDroppableContainers:L}=GO(),j=yh(_S,h),V=P.rect!==null,q=H.useMemo(()=>d.map(nt=>typeof nt=="object"&&"id"in nt?nt.id:nt),[d]),J=S!=null,Y=S?q.indexOf(S.id):-1,W=O?q.indexOf(O.id):-1,T=H.useRef(q),B=!JO(q,T.current),I=W!==-1&&Y===-1||B,tt=ZO(x);$s(()=>{B&&J&&L(q)},[B,q,J,L]),H.useEffect(()=>{T.current=q},[q]);const z=H.useMemo(()=>({activeIndex:Y,containerId:j,disabled:tt,disableTransforms:I,items:q,overIndex:W,useDragOverlay:V,sortedRects:qO(q,M),strategy:g}),[Y,j,tt.draggable,tt.droppable,I,q,W,M,V,g]);return zt.createElement(tC.Provider,{value:z},o)}const eF=s=>{let{id:o,items:h,activeIndex:d,overIndex:g}=s;return n0(h,d,g).indexOf(o)},nF=s=>{let{containerId:o,isSorting:h,wasDragging:d,index:g,items:x,newIndex:S,previousItems:P,previousContainerId:M,transition:O}=s;return!O||!d||P!==x&&g===S?!1:h?!0:S!==g&&o===M},iF={duration:200,easing:"ease"},eC="transform",sF=eh.Transition.toString({property:eC,duration:0,easing:"linear"}),rF={roleDescription:"sortable"};function oF(s){let{disabled:o,index:h,node:d,rect:g}=s;const[x,S]=H.useState(null),P=H.useRef(h);return $s(()=>{if(!o&&h!==P.current&&d.current){const M=g.current;if(M){const O=Va(d.current,{ignoreTransform:!0}),L={x:M.left-O.left,y:M.top-O.top,scaleX:M.width/O.width,scaleY:M.height/O.height};(L.x||L.y)&&S(L)}}h!==P.current&&(P.current=h)},[o,h,d,g]),H.useEffect(()=>{x&&S(null)},[x]),x}function aF(s){let{animateLayoutChanges:o=nF,attributes:h,disabled:d,data:g,getNewIndex:x=eF,id:S,strategy:P,resizeObserverConfig:M,transition:O=iF}=s;const{items:L,containerId:j,activeIndex:V,disabled:q,disableTransforms:J,sortedRects:Y,overIndex:W,useDragOverlay:T,strategy:B}=H.useContext(tC),I=lF(d,q),tt=L.indexOf(S),z=H.useMemo(()=>({sortable:{containerId:j,index:tt,items:L},...g}),[j,g,tt,L]),nt=H.useMemo(()=>L.slice(L.indexOf(S)),[L,S]),{rect:R,node:ot,isOver:lt,setNodeRef:rt}=WO({id:S,data:z,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:nt,...M}}),{active:dt,activatorEvent:Pt,activeNodeRect:ct,attributes:Et,setNodeRef:Zt,listeners:wt,isDragging:ft,over:ht,setActivatorNodeRef:gt,transform:St}=KO({id:S,data:z,attributes:{...rF,...h},disabled:I.draggable}),Ct=PD(rt,Zt),Bt=!!dt,Ht=Bt&&!J&&_h(V)&&_h(W),Ut=!T&&ft,ge=Ut&&Ht?St:null,me=Ht?ge??(P??B)({rects:Y,activeNodeRect:ct,activeIndex:V,overIndex:W,index:tt}):null,je=_h(V)&&_h(W)?x({id:S,items:L,activeIndex:V,overIndex:W}):tt,Fe=dt==null?void 0:dt.id,pe=H.useRef({activeId:Fe,items:L,newIndex:je,containerId:j}),Mn=L!==pe.current.items,Ve=o({active:dt,containerId:j,isDragging:ft,isSorting:Bt,id:S,index:tt,items:L,newIndex:pe.current.newIndex,previousItems:pe.current.items,previousContainerId:pe.current.containerId,transition:O,wasDragging:pe.current.activeId!=null}),Bn=oF({disabled:!Ve,index:tt,node:ot,rect:R});return H.useEffect(()=>{Bt&&pe.current.newIndex!==je&&(pe.current.newIndex=je),j!==pe.current.containerId&&(pe.current.containerId=j),L!==pe.current.items&&(pe.current.items=L)},[Bt,je,j,L]),H.useEffect(()=>{if(Fe===pe.current.activeId)return;if(Fe&&!pe.current.activeId){pe.current.activeId=Fe;return}const Le=setTimeout(()=>{pe.current.activeId=Fe},50);return()=>clearTimeout(Le)},[Fe]),{active:dt,activeIndex:V,attributes:Et,data:z,rect:R,index:tt,newIndex:je,items:L,isOver:lt,isSorting:Bt,isDragging:ft,listeners:wt,node:ot,overIndex:W,over:ht,setNodeRef:Ct,setActivatorNodeRef:gt,setDroppableNodeRef:rt,setDraggableNodeRef:Zt,transform:Bn??me,transition:Ze()};function Ze(){if(Bn||Mn&&pe.current.newIndex===tt)return sF;if(!(Ut&&!Zp(Pt)||!O)&&(Bt||Ve))return eh.Transition.toString({...O,property:eC})}}function lF(s,o){var h,d;return typeof s=="boolean"?{draggable:s,droppable:!1}:{draggable:(h=s==null?void 0:s.draggable)!=null?h:o.draggable,droppable:(d=s==null?void 0:s.droppable)!=null?d:o.droppable}}function oc(s){if(!s)return!1;const o=s.data.current;return!!(o&&"sortable"in o&&typeof o.sortable=="object"&&"containerId"in o.sortable&&"items"in o.sortable&&"index"in o.sortable)}const hF=[Ee.Down,Ee.Right,Ee.Up,Ee.Left],uF=(s,o)=>{let{context:{active:h,collisionRect:d,droppableRects:g,droppableContainers:x,over:S,scrollableAncestors:P}}=o;if(hF.includes(s.code)){if(s.preventDefault(),!h||!d)return;const M=[];x.getEnabled().forEach(j=>{if(!j||j!=null&&j.disabled)return;const V=g.get(j.id);if(V)switch(s.code){case Ee.Down:d.top<V.top&&M.push(j);break;case Ee.Up:d.top>V.top&&M.push(j);break;case Ee.Left:d.left>V.left&&M.push(j);break;case Ee.Right:d.left<V.left&&M.push(j);break}});const O=HD({active:h,collisionRect:d,droppableRects:g,droppableContainers:M,pointerCoordinates:null});let L=zS(O,"id");if(L===(S==null?void 0:S.id)&&O.length>1&&(L=O[1].id),L!=null){const j=x.get(h.id),V=x.get(L),q=V?g.get(V.id):null,J=V==null?void 0:V.node.current;if(J&&q&&j&&V){const W=Yc(J).some((nt,R)=>P[R]!==nt),T=nC(j,V),B=cF(j,V),I=W||!T?{x:0,y:0}:{x:B?d.width-q.width:0,y:B?d.height-q.height:0},tt={x:q.left,y:q.top};return I.x&&I.y?tt:th(tt,I)}}}};function nC(s,o){return!oc(s)||!oc(o)?!1:s.data.current.sortable.containerId===o.data.current.sortable.containerId}function cF(s,o){return!oc(s)||!oc(o)||!nC(s,o)?!1:s.data.current.sortable.index<o.data.current.sortable.index}const dF=({node:s,onDelete:o})=>{const{attributes:h,listeners:d,setNodeRef:g,transform:x,transition:S,isDragging:P}=aF({id:s.key}),M={transform:eh.Transform.toString(x),transition:S,backgroundColor:P?"rgb(243 244 246)":void 0,cursor:"move"},O=L=>{L.stopPropagation(),o(s.key)};return Lt.jsxs("tr",{ref:g,style:M,children:[Lt.jsx("td",{className:"border px-4 py-2",...h,...d,children:Lt.jsx("div",{className:`px-2 py-1 rounded text-white w-fit
          ${s.category==="notStart"?"bg-[#ababab]":""}
          ${s.category==="draft"?"bg-[#ffab46]":""}
          ${s.category==="inReview"?"bg-[#00a85d]":""}
          ${s.category==="inApproval"?"bg-[#008248]":""}
          ${s.category==="approved"?"bg-[#005c50]":""}
          ${s.category==="unset"?"bg-gray-200 text-black":""}`,children:s.text})}),Lt.jsx("td",{className:"border px-4 py-2",...h,...d,children:s.meaning||"--"}),Lt.jsx("td",{className:"border px-4 py-2 text-center",children:Lt.jsx("button",{onClick:O,className:"p-1 hover:bg-gray-100 rounded",children:Lt.jsx(Vc,{className:"h-4 w-4 text-gray-500"})})})]})},fF=({open:s,setOpen:o,modelText:h,setModelText:d,setCurrentModel:g,myDiagramRef:x,setIsModified:S})=>{const[P,M]=H.useState([]),[O,L]=H.useState(!1),j=zD(r1(e0,{activationConstraint:{distance:8}}),r1(_p,{coordinateGetter:uF}));H.useEffect(()=>{if(h)try{const W=typeof h=="string"?JSON.parse(h):h;M(W.nodeDataArray)}catch(W){console.error("Error parsing modelText:",W)}},[h]);const V=W=>{const{active:T,over:B}=W;T.id!==(B==null?void 0:B.id)&&M(I=>{const tt=I.findIndex(lt=>lt.key===T.id),z=I.findIndex(lt=>lt.key===B.id),nt=n0(I,tt,z),ot={...typeof h=="string"?JSON.parse(h):h,nodeDataArray:nt};return d(JSON.stringify(ot,null,2)),nt})},q=W=>{const T=P.filter(I=>I.key!==W);M(T),{...typeof h=="string"?JSON.parse(h):h}},J=()=>{L(!0)},Y=()=>{const T={...typeof h=="string"?JSON.parse(h):h,nodeDataArray:P};d(JSON.stringify(T,null,2)),g(T),x.current&&(x.current.model=Ng.fromJson(T),x.current.isModified=!1,S(!1)),o(!1)};return Lt.jsxs(es,{title:"Status Options",open:s,onCancel:()=>o(!1),footer:[Lt.jsx("button",{onClick:Y,className:"bg-sky-500 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded",children:"OK"},"ok"),Lt.jsx("button",{onClick:()=>o(!1),className:"ml-2 bg-transparent hover:bg-sky-500 text-sky-700 font-semibold hover:text-white py-2 px-4 border border-sky-500 hover:border-transparent rounded",children:"Cancel"},"cancel")],children:[Lt.jsxs("div",{className:"min-h-[300px]",children:[Lt.jsxs("table",{className:"w-full border-collapse",children:[Lt.jsx("thead",{children:Lt.jsxs("tr",{className:"bg-gray-50",children:[Lt.jsx("th",{className:"border px-4 py-2 text-left",children:"Status"}),Lt.jsx("th",{className:"border px-4 py-2 text-left",children:"Meaning"}),Lt.jsx("th",{className:"border px-4 py-2 text-center w-16",children:"Action"})]})}),Lt.jsx($O,{sensors:j,collisionDetection:$D,onDragEnd:V,children:Lt.jsx("tbody",{children:Lt.jsx(tF,{items:P.map(W=>W.key),strategy:QO,children:P.map(W=>Lt.jsx(dF,{node:W,onDelete:q},W.key))})})})]}),Lt.jsx("button",{onClick:J,className:"mt-4 px-4 py-2 text-sky-500 hover:text-sky-600",children:"Add Option..."})]}),s&&Lt.jsx(kD,{open:O,setOpen:L,modelText:h,setModelText:d})]})},Of={class:"GraphLinksModel",pointsDigits:0,nodeDataArray:[{key:-1,category:"unset",loc:"-381 -24",text:"Unset",meaning:"--"},{category:"notStart",text:"Not Start",key:-2,loc:"-380 78"},{category:"draft",text:"Draft",key:-3,loc:"-252 278"},{category:"inReview",text:"In Review",key:-4,loc:"-511 279"},{category:"inApproval",text:"In Approval",key:-5,loc:"-385 461"},{category:"approved",text:"Approved",key:-6,loc:"-328 683"}],linkDataArray:[{from:-1,to:-2,text:"Create"},{from:-2,to:-3,text:"To Draft"},{from:-3,to:-2,text:"Back to Not Start"},{from:-3,to:-4,text:"To Review"},{from:-4,to:-3,text:"Back to Draft"},{from:-4,to:-5,text:"To Approval"},{from:-5,to:-4,text:"Back to Review"},{from:-5,to:-3,text:"Back to Draft"},{from:-5,to:-6,text:"To Approved"},{from:-6,to:-3,text:"Back to Draft"}]},gF=()=>{const s=H.useRef(null),o=H.useRef(null),h=H.useRef(null),d=H.useRef(null),[g,x]=H.useState(()=>JSON.stringify(Of,null,2)),[S,P]=H.useState(!1),[M,O]=H.useState(!1),[L,j]=H.useState(null),[V,q]=H.useState(Of),[J,Y]=H.useState(!1),[W,T]=H.useState(!1),B=lt=>{lt.set({locationSpot:As.Center}).bindTwoWay("location","loc",Dy.parse,Dy.stringify)},I=lt=>{lt.set({strokeWidth:0,portId:"",cursor:"pointer"})},tt=lt=>{lt.set({font:"bold 11pt Figtree, sans-serif"}).theme("stroke","text")},z=()=>{if(!s.current)return;const lt=new q2(s.current,{"undoManager.isEnabled":!0,"themeManager.changesDivBackground":!0,"themeManager.currentTheme":"light"});return lt.addDiagramListener("Modified",rt=>{const dt=lt.isModified;P(dt);const Pt=document.title.indexOf("*");dt?Pt<0&&(document.title+="*"):Pt>=0&&(document.title=document.title.slice(0,Pt))}),lt.themeManager.set("light",{colors:{text:"#000",unsetText:"#000",unset:"#fff",notStart:"#ababab",draft:"#ffab46",inReview:"#00a85d",inApproval:"#008248",approved:"#005c50",bgText:"#000",link:"#dcb263",linkOver:"#cbd5e1",div:"#ede9e0"}}),lt.themeManager.set("dark",{colors:{text:"#fff",unsetText:"#000",notStart:"#ababab",draft:"#ffab46",inReview:"#00a85d",inApproval:"#008248",approved:"#005c50",bgText:"#fff",link:"#fdb71c",linkOver:"#475569",div:"#141e37"}}),lt.nodeTemplateMap.add("unset",new Uo("Auto").apply(B).add(new Ys("Capsule",{fromLinkable:!0}).apply(I).theme("fill","unset"),new oo({margin:new Y2(5,6)}).theme("stroke","unsetText").bindTwoWay("text"))),lt.nodeTemplateMap.add("notStart",new Uo("Auto").apply(B).add(new Ys("Capsule",{fromLinkable:!0,toLinkable:!0,fromSpot:As.AllSides,toSpot:As.AllSides}).apply(I).theme("fill","notStart"),new oo({margin:12,maxSize:new el(160,NaN),wrap:nl.Fit,editable:!0}).apply(tt).bindTwoWay("text"))),lt.nodeTemplateMap.add("draft",new Uo("Auto").apply(B).add(new Ys("Capsule",{fromLinkable:!0,toLinkable:!0,fromSpot:As.AllSides,toSpot:As.AllSides}).apply(I).theme("fill","draft"),new oo({margin:8,maxSize:new el(160,NaN),wrap:nl.Fit,editable:!0}).apply(tt).bindTwoWay("text"))),lt.nodeTemplateMap.add("inReview",new Uo("Auto").apply(B).add(new Ys("Capsule",{fromLinkable:!0,toLinkable:!0,fromSpot:As.AllSides,toSpot:As.AllSides}).apply(I).theme("fill","inReview"),new oo({margin:8,maxSize:new el(160,NaN),wrap:nl.Fit,editable:!0}).apply(tt).bindTwoWay("text"))),lt.nodeTemplateMap.add("inApproval",new Uo("Auto").apply(B).add(new Ys("Capsule",{fromLinkable:!0,toLinkable:!0,fromSpot:As.AllSides,toSpot:As.AllSides}).apply(I).theme("fill","inApproval"),new oo({margin:8,maxSize:new el(160,NaN),wrap:nl.Fit,editable:!0}).apply(tt).bindTwoWay("text"))),lt.nodeTemplateMap.add("approved",new Uo("Auto").apply(B).add(new Ys("Capsule",{fromLinkable:!0,toLinkable:!0,fromSpot:As.AllSides,toSpot:As.AllSides}).apply(I).theme("fill","approved"),new oo({margin:8,maxSize:new el(160,NaN),wrap:nl.Fit,editable:!0}).apply(tt).bindTwoWay("text"))),lt.linkTemplate=new _2({routing:tf.AvoidsNodes,curve:tP.JumpOver,corner:5,toShortLength:4,relinkableFrom:!0,relinkableTo:!0,reshapable:!0,resegmentable:!0,mouseEnter:(rt,dt)=>dt.findObject("HIGHLIGHT").stroke=dt.diagram.themeManager.findValue("linkOver","colors"),mouseLeave:(rt,dt)=>dt.findObject("HIGHLIGHT").stroke="transparent",doubleClick:(rt,dt)=>{j({from:dt.data.from.toString(),to:dt.data.to.toString(),text:dt.data.text}),O(!0)}}).bindTwoWay("points").add(new Ys({isPanelMain:!0,strokeWidth:8,stroke:"transparent",name:"HIGHLIGHT",cursor:"Pointer"}),new Ys({isPanelMain:!0,strokeWidth:2}).theme("stroke","link"),new Ys({toArrow:"standard",strokeWidth:0,scale:1.5}).theme("fill","link"),new Q2("Auto",{visible:!1,cursor:"Pointer"}).bind("visible","text",rt=>typeof rt=="string"&&rt.length>0).add(new Ys("Ellipse",{strokeWidth:0}).theme("fill","div",null,null,rt=>new Z2("Radial",{0:rt,.5:`${rt}00`})),new oo({name:"LABEL",font:"9pt Figtree, sans-serif",margin:3,editable:!0}).theme("stroke","bgText").bindTwoWay("text"))),lt.toolManager.linkingTool.temporaryLink.routing=tf.Orthogonal,lt.toolManager.relinkingTool.temporaryLink.routing=tf.Orthogonal,lt.model=Ng.fromJson(Of),h.current=lt,lt},nt=()=>{if(!o.current||!h.current)return;const lt=new J2(o.current,{nodeTemplateMap:h.current.nodeTemplateMap,themeManager:h.current.themeManager,model:new W2([{category:"unset",text:"Unset"},{category:"notStart",text:"Not Start"},{category:"draft",text:"Draft"},{category:"inReview",text:"In Review"},{category:"inApproval",text:"In Approval"},{category:"approved",text:"Approved"}])});d.current=lt};H.useEffect(()=>(z()&&nt(),()=>{h.current&&(h.current.div=null),d.current&&(d.current.div=null)}),[]);const R=()=>{const lt=V.nodeDataArray,rt=V.linkDataArray,dt={};return lt.forEach(Pt=>{dt[Pt.key.toString()]=Pt.text}),Lt.jsx("div",{className:"w-full max-w-4xl",children:Lt.jsxs("table",{className:"min-w-full border-collapse border border-gray-300",children:[Lt.jsx("thead",{children:Lt.jsxs("tr",{className:"bg-gray-100",children:[Lt.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"From"}),Lt.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"To"}),Lt.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Name"})]})}),Lt.jsx("tbody",{children:rt.map((Pt,ct)=>Lt.jsxs("tr",{className:"hover:bg-gray-50",children:[Lt.jsx("td",{className:"border border-gray-300 px-4 py-2",children:dt[Pt.from.toString()]}),Lt.jsx("td",{className:"border border-gray-300 px-4 py-2",children:dt[Pt.to.toString()]}),Lt.jsx("td",{onClick:()=>{j({from:Pt.from.toString(),to:Pt.to.toString(),text:Pt.text}),O(!0)},className:"border border-gray-300 px-4 py-2 text-cyan-500 cursor-pointer",children:Pt.text})]},ct))})]})})},ot=({open:lt,setOpen:rt,mode:dt,selectedLink:Pt,nodeDataArray:ct,modelText:Et,setModelText:Zt,setCurrentModel:wt,myDiagramRef:ft,setIsModified:ht})=>{const[gt,St]=H.useState({from:"",to:"",name:"",description:"",permitted:"Developer",hidden:!1,automatic:!1});H.useEffect(()=>{dt==="edit"&&Pt?St(Ht=>({...Ht,from:Pt.from,to:Pt.to,name:Pt.text})):dt==="add"&&ct&&ct.length>1&&St(Ht=>({...Ht,from:ct[0].key.toString(),to:ct[1].key.toString()}))},[dt,Pt,ct,lt]);const Ct=Ht=>{const{name:Ut,value:ge,type:ae}=Ht.target,me=ae==="checkbox"?Ht.target.checked:ge;St(je=>({...je,[Ut]:me}))},Bt=()=>{if(!gt.from||!gt.to||!gt.name){alert("Please fill in all required fields");return}try{const Ht=JSON.parse(Et);let Ut;if(dt==="edit"){const ge=Ht.linkDataArray.map(ae=>ae.from.toString()===(Pt==null?void 0:Pt.from)&&ae.to.toString()===(Pt==null?void 0:Pt.to)&&ae.text===(Pt==null?void 0:Pt.text)?{...ae,from:parseInt(gt.from),to:parseInt(gt.to),text:gt.name}:ae);Ut={...Ht,linkDataArray:ge}}else{const ge={from:parseInt(gt.from),to:parseInt(gt.to),text:gt.name};Ut={...Ht,linkDataArray:[...Ht.linkDataArray,ge]}}Zt(JSON.stringify(Ut,null,2)),wt(Ut),ft.current&&(ft.current.model=Ng.fromJson(Ut),ft.current.isModified=!1,ht(!1)),rt(!1)}catch(Ht){console.error("Error updating model:",Ht),alert("Error updating model: "+Ht.message)}};return Lt.jsx(es,{centered:!0,title:dt==="edit"?"Edit State Transition":"Add State Transition",open:lt,width:800,closable:!1,footer:[Lt.jsx("button",{onClick:Bt,className:"bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded",children:"Save"},"Save"),Lt.jsx("button",{onClick:()=>rt(!1),className:"ml-2 bg-transparent hover:bg-cyan-500 text-cyan-700 font-semibold hover:text-white py-2 px-4 border border-cyan-500 hover:border-transparent rounded",children:"Cancel"},"cancel")],children:Lt.jsxs("div",{className:"space-y-4",children:[Lt.jsxs("div",{className:"flex gap-4",children:[Lt.jsxs("div",{className:"flex-1",children:[Lt.jsxs("label",{className:"block",children:["From:",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsx("select",{name:"from",value:gt.from,onChange:Ct,className:"w-full p-2 border rounded",children:ct.map(Ht=>Lt.jsx("option",{value:Ht.key,children:Ht.text},Ht.key))})]}),Lt.jsxs("div",{className:"flex-1",children:[Lt.jsxs("label",{className:"block",children:["To:",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsx("select",{name:"to",value:gt.to,onChange:Ct,className:"w-full p-2 border rounded",children:ct.map(Ht=>Lt.jsx("option",{value:Ht.key,children:Ht.text},Ht.key))})]})]}),Lt.jsx("div",{className:"flex gap-4 items-center",children:Lt.jsxs("div",{className:"flex-1",children:[Lt.jsxs("label",{className:"block",children:["Name:",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsx("input",{type:"text",name:"name",value:gt.name,onChange:Ct,className:"w-full p-2 border rounded"})]})}),Lt.jsxs("div",{children:[Lt.jsx("label",{className:"block",children:"Description:"}),Lt.jsx("textarea",{name:"description",value:gt.description,onChange:Ct,rows:4,className:"w-full p-2 border rounded"})]}),Lt.jsxs("div",{children:[Lt.jsxs("label",{className:"block",children:["Permitted:",Lt.jsx("span",{className:"text-red-500",children:"*"})]}),Lt.jsxs("select",{name:"permitted",value:gt.permitted,onChange:Ct,className:"w-full p-2 border rounded",children:[Lt.jsx("option",{value:"developer",children:"Developer"}),Lt.jsx("option",{value:"external",children:"External"}),Lt.jsx("option",{value:"FSE",children:"Functional Safety Engineer"}),Lt.jsx("option",{value:"projectAdmin",children:"Project Admin"}),Lt.jsx("option",{value:"projectLead",children:"Project Lead"}),Lt.jsx("option",{value:"reviewerL0",children:"Reviewer - L0"}),Lt.jsx("option",{value:"reviewerL1",children:"Reviewer - L1"}),Lt.jsx("option",{value:"reviewerL2",children:"Reviewer - L2"}),Lt.jsx("option",{value:"reviewerL3",children:"Reviewer - L3"}),Lt.jsx("option",{value:"safetyManager",children:"Safety Manager"}),Lt.jsx("option",{value:"VVEngineer",children:"V&V Engineer"})]})]})]})})};return Lt.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[Lt.jsx("div",{className:"flex flex-col xl:flex-row gap-4",children:Lt.jsx("div",{className:"mt-4",children:Lt.jsx(R,{})})}),Lt.jsx("div",{className:"flex flex-col xl:flex-row gap-4",children:Lt.jsxs("div",{className:"mt-4",children:[Lt.jsx("button",{className:"px-4 py-2 bg-sky-500 text-white rounded hover:bg-sky-600 mr-4",onClick:()=>Y(!0),children:"Add Status"}),Lt.jsx("button",{className:"px-4 py-2 bg-cyan-500 text-white rounded hover:bg-cyan-600",onClick:()=>T(!0),children:"Add Transitions"})]})}),Lt.jsx("div",{className:"flex flex-col xl:flex-row gap-4 p-4",children:Lt.jsx("div",{className:"flex gap-4",style:{width:"100%",height:"fit-content"},children:Lt.jsx("div",{ref:s,style:{flexGrow:1,width:"1310px",height:"810px"},className:"border rounded"})})}),Lt.jsx(fF,{open:J,setOpen:Y,modelText:g,setModelText:x,setCurrentModel:q,myDiagramRef:h,setIsModified:P}),Lt.jsx(ot,{open:M,setOpen:O,mode:"edit",selectedLink:L,nodeDataArray:V.nodeDataArray,modelText:g,setModelText:x,setCurrentModel:q,myDiagramRef:h,setIsModified:P}),Lt.jsx(ot,{open:W,setOpen:T,mode:"add",nodeDataArray:V.nodeDataArray,modelText:g,setModelText:x,setCurrentModel:q,myDiagramRef:h,setIsModified:P})]})};function mF(){return Lt.jsx(Lt.Fragment,{children:Lt.jsx(gF,{})})}Lb(document.getElementById("root")).render(Lt.jsx(H.StrictMode,{children:Lt.jsx(mF,{})}));
